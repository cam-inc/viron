(function(){var e=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}var r=n(function(t,n){
/* Riot v3.8.1, @license MIT */
(function(e,t){t(n)})(e,function(e){"use strict";var t=[];var n={};var r="yield";var i="__global_mixin";var a="riot-";var o=["ref","data-ref"];var s="data-is";var u="if";var l="each";var c="no-reorder";var f="show";var d="hide";var h="key";var v="__riot-events__";var p="string";var g="object";var m="undefined";var y="function";var b="http://www.w3.org/1999/xlink";var _="http://www.w3.org/2000/svg";var w=/^xlink:(\w+)/;var x=typeof window===m?undefined:window;var T=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/;var C=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;var k=/^on/;var S=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;var E={viewbox:"viewBox",preserveaspectratio:"preserveAspectRatio"};var P=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/;var O=(x&&x.document||{}).documentMode|0;function M(e,t){return[].slice.call((t||document).querySelectorAll(e))}function A(e,t){return(t||document).querySelector(e)}function N(){return document.createDocumentFragment()}function R(){return document.createTextNode("")}function D(e){var t=e.ownerSVGElement;return!!t||t===null}function L(e){return e==="svg"?document.createElementNS(_,e):document.createElement(e)}function I(e,t,n){if(n){var r=e.ownerDocument.importNode((new DOMParser).parseFromString('<svg xmlns="'+_+'">'+t+"</svg>","application/xml").documentElement,true);e.appendChild(r)}else{e.innerHTML=t}}function B(e,t){e.style.display=t?"":"none";e.hidden=t?false:true}function j(e,t){e.removeAttribute(t)}function F(e){return Object.keys(e).reduce(function(t,n){return t+" "+n+": "+e[n]+";"},"")}function H(e,t){return e.getAttribute(t)}function z(e,t,n){var r=w.exec(t);if(r&&r[1]){e.setAttributeNS(b,r[1],n)}else{e.setAttribute(t,n)}}function U(e,t,n){e.insertBefore(t,n.parentNode&&n)}function V(e,t){if(!e){return}var n;while(n=S.exec(e)){t(n[1].toLowerCase(),n[2]||n[3]||n[4])}}function W(e,t,n){if(e){var r=t(e,n);var i;if(r===false){return}e=e.firstChild;while(e){i=e.nextSibling;W(e,t,r);e=i}}}var q=Object.freeze({$$:M,$:A,createFrag:N,createDOMPlaceholder:R,isSvg:D,mkEl:L,setInnerHTML:I,toggleVisibility:B,remAttr:j,styleObjectToString:F,getAttr:H,setAttr:z,safeInsert:U,walkAttrs:V,walkNodes:W});var Y;var K;var $={};var G=[];var X=false;if(x){Y=function(){var e=L("style");var t=A("style[type=riot]");z(e,"type","text/css");if(t){if(t.id){e.id=t.id}t.parentNode.replaceChild(e,t)}else{document.head.appendChild(e)}return e}();K=Y.styleSheet}var Z={styleNode:Y,add:function e(t,n){if(n){$[n]=t}else{G.push(t)}X=true},inject:function e(){if(!x||!X){return}X=false;var t=Object.keys($).map(function(e){return $[e]}).concat(G).join("\n");if(K){K.cssText=t}else{Y.innerHTML=t}}};var J=function(){var e="[{(,;:?=|&!^~>%*/";var t=["case","default","do","else","in","instanceof","prefix","return","typeof","void","yield"];var n=t.reduce(function(e,t){return e+t.slice(-1)},"");var r=/^\/(?=[^*>/])[^[/\\]*(?:(?:\\.|\[(?:\\.|[^\]\\]*)*\])[^[\\/]*)*?\/[gimuy]*/;var i=/[$\w]/;function a(e,t){while(--t>=0&&/\s/.test(e[t])){}return t}function o(o,s){var u=/.*/g;var l=u.lastIndex=s++;var c=u.exec(o)[0].match(r);if(c){var f=l+c[0].length;l=a(o,l);var d=o[l];if(l<0||~e.indexOf(d)){return f}if(d==="."){if(o[l-1]==="."){s=f}}else if(d==="+"||d==="-"){if(o[--l]!==d||(l=a(o,l))<0||!i.test(o[l])){s=f}}else if(~n.indexOf(d)){var h=l+1;while(--l>=0&&i.test(o[l])){}if(~t.indexOf(o.slice(l+1,h))){s=f}}}return s}return o}();var Q=function(e){var t="g",n=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,r=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|`[^`\\]*(?:\\[\S\s][^`\\]*)*`/g,i=r.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?([^<]\/)[gim]*/.source,a=RegExp("[\\"+"x00-\\x1F<>a-zA-Z0-9'\",;\\\\]"),o=/(?=[[\]()*+?.^$|])/g,s=r.source+"|"+/(\/)(?![*\/])/.source,u={"(":RegExp("([()])|"+s,t),"[":RegExp("([[\\]])|"+s,t),"{":RegExp("([{}])|"+s,t)},l="{ }";var c=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+s,t),l,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/];var f=e,d,h=[],v;function p(e){return e}function g(e,n){if(!n){n=h}return new RegExp(e.source.replace(/{/g,n[2]).replace(/}/g,n[3]),e.global?t:"")}function m(e){if(e===l){return c}var n=e.split(" ");if(n.length!==2||a.test(e)){throw new Error('Unsupported brackets "'+e+'"')}n=n.concat(e.replace(o,"\\").split(" "));n[4]=g(n[1].length>1?/{[\S\s]*?}/:c[4],n);n[5]=g(e.length>3?/\\({|})/g:c[5],n);n[6]=g(c[6],n);n[7]=RegExp("\\\\("+n[3]+")|([[({])|("+n[3]+")|"+s,t);n[8]=e;return n}function y(e){return e instanceof RegExp?d(e):h[e]}y.split=function e(t,n,r){if(!r){r=h}var i=[],a,o,s,l,c=r[6];var f=[];var d="";var v,p;o=s=c.lastIndex=0;while(a=c.exec(t)){p=c.lastIndex;l=a.index;if(o){if(a[2]){var g=a[2];var m=u[g];var y=1;m.lastIndex=p;while(a=m.exec(t)){if(a[1]){if(a[1]===g){++y}else if(!--y){break}}else{m.lastIndex=_(a.index,m.lastIndex,a[2])}}c.lastIndex=y?t.length:m.lastIndex;continue}if(!a[3]){c.lastIndex=_(l,p,a[4]);continue}}if(!a[1]){b(t.slice(s,l));s=c.lastIndex;c=r[6+(o^=1)];c.lastIndex=s}}if(t&&s<t.length){b(t.slice(s))}i.qblocks=f;return i;function b(e){if(d){e=d+e;d=""}if(n||o){i.push(e&&e.replace(r[5],"$1"))}else{i.push(e)}}function _(e,r,i){if(i){r=J(t,e)}if(n&&r>e+2){v="‚Åó"+f.length+"~";f.push(t.slice(e,r));d+=t.slice(s,e)+v;s=r}return r}};y.hasExpr=function e(t){return h[4].test(t)};y.loopKeys=function e(t){var n=t.match(h[9]);return n?{key:n[1],pos:n[2],val:h[0]+n[3].trim()+h[1]}:{val:t.trim()}};y.array=function e(t){return t?m(t):h};function b(e){if((e||(e=l))!==h[8]){h=m(e);d=e===l?p:g;h[9]=d(c[9])}f=e}function _(e){var t;e=e||{};t=e.brackets;Object.defineProperty(e,"brackets",{set:b,get:function(){return f},enumerable:true});v=e;b(t)}Object.defineProperty(y,"settings",{set:_,get:function(){return v}});y.settings=typeof riot!=="undefined"&&riot.settings||{};y.set=b;y.skipRegex=J;y.R_STRINGS=r;y.R_MLCOMMS=n;y.S_QBLOCKS=i;y.S_QBLOCK2=s;return y}();var ee=function(){var e={};function t(t,i){if(!t){return t}return(e[t]||(e[t]=r(t))).call(i,n.bind({data:i,tmpl:t}))}t.hasExpr=Q.hasExpr;t.loopKeys=Q.loopKeys;t.clearCache=function(){e={}};t.errorHandler=null;function n(e,n){e.riotData={tagName:n&&n.__&&n.__.tagName,_riot_id:n&&n._riot_id};if(t.errorHandler){t.errorHandler(e)}else if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(e.message);console.log("<%s> %s",e.riotData.tagName||"Unknown tag",this.tmpl);console.log(this.data)}}function r(e){var t=o(e);if(t.slice(0,11)!=="try{return "){t="return "+t}return new Function("E",t+";")}var i=/\u2057/g;var a=/\u2057(\d+)~/g;function o(e){var t=Q.split(e.replace(i,'"'),1);var n=t.qblocks;var r;if(t.length>2||t[0]){var o,s,u=[];for(o=s=0;o<t.length;++o){r=t[o];if(r&&(r=o&1?l(r,1,n):'"'+r.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')){u[s++]=r}}r=s<2?u[0]:"["+u.join(",")+'].join("")'}else{r=l(t[1],0,n)}if(n.length){r=r.replace(a,function(e,t){return n[t].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})}return r}var s=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/;var u={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g};function l(e,t,n){e=e.replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1");if(e){var r=[],i=0,a;while(e&&(a=e.match(s))&&!a.index){var o,l,c=/,|([[{(])|$/g;e=RegExp.rightContext;o=a[2]?n[a[2]].slice(1,-1).trim().replace(/\s+/g," "):a[1];while(l=(a=c.exec(e))[1]){f(l,c)}l=e.slice(0,a.index);e=RegExp.rightContext;r[i++]=h(l,1,o)}e=!i?h(e,t):i>1?"["+r.join(",")+'].join(" ").trim()':r[0]}return e;function f(t,n){var r,i=1,a=u[t];a.lastIndex=n.lastIndex;while(r=a.exec(e)){if(r[0]===t){++i}else if(!--i){break}}n.lastIndex=i?e.length:a.lastIndex}}var c='"in this?this:'+(typeof window!=="object"?"global":"window")+").",f=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,d=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;function h(e,t,n){var r;e=e.replace(f,function(e,t,n,i,a){if(n){i=r?0:i+e.length;if(n!=="this"&&n!=="global"&&n!=="window"){e=t+'("'+n+c+n;if(i){r=(a=a[i])==="."||a==="("||a==="["}}else if(i){r=!d.test(a.slice(i))}}return e});if(r){e="try{return "+e+"}catch(e){E(e,this)}"}if(n){e=(r?"function(){"+e+"}.call(this)":"("+e+")")+'?"'+n+'":""'}else if(t){e="function(v){"+(r?e.replace("return ","v="):"v=("+e+")")+';return v||v===0?v:""}.call(this)'}return e}t.version=Q.version="v3.0.8";return t}();var te=function(e){e=e||{};var t={},n=Array.prototype.slice;Object.defineProperties(e,{on:{value:function(n,r){if(typeof r=="function"){(t[n]=t[n]||[]).push(r)}return e},enumerable:false,writable:false,configurable:false},off:{value:function(n,r){if(n=="*"&&!r){t={}}else{if(r){var i=t[n];for(var a=0,o;o=i&&i[a];++a){if(o==r){i.splice(a--,1)}}}else{delete t[n]}}return e},enumerable:false,writable:false,configurable:false},one:{value:function(t,n){function r(){e.off(t,r);n.apply(e,arguments)}return e.on(t,r)},enumerable:false,writable:false,configurable:false},trigger:{value:function(r){var i=arguments;var a=arguments.length-1,o=new Array(a),s,u,l;for(l=0;l<a;l++){o[l]=i[l+1]}s=n.call(t[r]||[],0);for(l=0;u=s[l];++l){u.apply(e,o)}if(t["*"]&&r!="*"){e.trigger.apply(e,["*",r].concat(o))}return e},enumerable:false,writable:false,configurable:false}});return e};function ne(e){return P.test(e)}function re(e){return typeof e===y}function ie(e){return e&&typeof e===g}function ae(e){return typeof e===m}function oe(e){return typeof e===p}function se(e){return ue(e)||e===""}function ue(e){return ae(e)||e===null}function le(e){return Array.isArray(e)||e instanceof Array}function ce(e,t){var n=be(e,t);return ae(e[t])||n&&n.writable}var fe=Object.freeze({isBoolAttr:ne,isFunction:re,isObject:ie,isUndefined:ae,isString:oe,isBlank:se,isNil:ue,isArray:le,isWritable:ce});function de(e,t){var n=e?e.length:0;var r=0;for(;r<n;r++){t(e[r],r)}return e}function he(e,t){return e.indexOf(t)!==-1}function ve(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function pe(e,t){return e.slice(0,t.length)===t}function ge(e,t,n,r){Object.defineProperty(e,t,_e({value:n,enumerable:false,writable:false,configurable:true},r));return e}var me=function(){var e=-1;return function(){return++e}}();function ye(e){if(console&&console.warn){console.warn(e)}}var be=function(e,t){return Object.getOwnPropertyDescriptor(e,t)};function _e(e){var t;var n=1;var r=arguments;var i=r.length;for(;n<i;n++){if(t=r[n]){for(var a in t){if(ce(e,a)){e[a]=t[a]}}}}return e}var we=Object.freeze({each:de,contains:he,toCamel:ve,startsWith:pe,defineProperty:ge,uid:me,warn:ye,getPropDescriptor:be,extend:_e});var xe=_e(Object.create(Q.settings),{skipAnonymousTags:true,autoUpdate:true});function Te(e,t,n){var r=this.__.parent;var i=this.__.item;if(!i){while(r&&!i){i=r.__.item;r=r.__.parent}}if(ce(n,"currentTarget")){n.currentTarget=e}if(ce(n,"target")){n.target=n.srcElement}if(ce(n,"which")){n.which=n.charCode||n.keyCode}n.item=i;t.call(this,n);if(!xe.autoUpdate){return}if(!n.preventUpdate){var a=mt(this);if(a.isMounted){a.update()}}}function Ce(e,t,n,r){var i;var a=Te.bind(r,n,t);n[e]=null;i=e.replace(k,"");if(!he(r.__.listeners,n)){r.__.listeners.push(n)}if(!n[v]){n[v]={}}if(n[v][e]){n.removeEventListener(i,n[v][e])}n[v][e]=a;n.addEventListener(i,a,false)}function ke(e,t,r){var i=e.tag||e.dom._tag;var a;var o=i?i.__:{};var s=o.head;var u=e.dom.tagName==="VIRTUAL";if(i&&e.tagName===r){i.update();return}if(i){if(u){a=R();s.parentNode.insertBefore(a,s)}i.unmount(true)}if(!oe(r)){return}e.impl=n[r];if(!e.impl){return}e.tag=i=gt(e.impl,{root:e.dom,parent:t,tagName:r},e.dom.innerHTML,t);de(e.attrs,function(e){return z(i.root,e.name,e.value)});e.tagName=r;i.mount();if(u){Tt(i,a||i.root)}t.__.onUnmount=function(){var e=i.opts.dataIs;wt(i.parent.tags,e,i);wt(i.__.parent.tags,e,i);i.unmount()}}function Se(e){if(!e){return null}e=e.replace(a,"");if(E[e]){e=E[e]}return e}function Ee(e){if(this.root&&H(this.root,"virtualized")){return}var t=e.dom;var n=Se(e.attr);var r=he([f,d],n);var i=e.root&&e.root.tagName==="VIRTUAL";var a=this.__;var o=a.isAnonymous;var s=t&&(e.parent||t.parentNode);var u=n==="style";var l=n==="class";var c;if(e._riot_id){if(e.__.wasCreated){e.update()}else{e.mount();if(i){Tt(e,e.root)}}return}if(e.update){return e.update()}var h=r&&!o?kt.call(this):this;c=ee(e.expr,h);var v=!se(c);var p=ie(c);if(p){if(l){c=ee(JSON.stringify(c),this)}else if(u){c=F(c)}}if(e.attr&&(!e.wasParsedOnce||!v||c===false)){j(t,H(t,e.attr)?e.attr:n)}if(e.bool){c=c?n:false}if(e.isRtag){return ke(e,this,c)}if(e.wasParsedOnce&&e.value===c){return}e.value=c;e.wasParsedOnce=true;if(p&&!l&&!u&&!r){return}if(!v){c=""}if(!n){c+="";if(s){e.parent=s;if(s.tagName==="TEXTAREA"){s.value=c;if(!O){t.nodeValue=c}}else{t.nodeValue=c}}return}if(re(c)){Ce(n,c,t,this)}else if(r){B(t,n===d?!c:c)}else{if(e.bool){t[n]=c}if(n==="value"&&t.value!==c){t.value=c}else if(v&&c!==false){z(t,n,c)}if(u&&t.hidden){B(t,false)}}}function Pe(e){de(e,Ee.bind(this))}var Oe={init:function e(t,n,r){j(t,u);this.tag=n;this.expr=r;this.stub=R();this.pristine=t;var i=t.parentNode;i.insertBefore(this.stub,t);i.removeChild(t);return this},update:function e(){this.value=ee(this.expr,this.tag);if(this.value&&!this.current){this.current=this.pristine.cloneNode(true);this.stub.parentNode.insertBefore(this.current,this.stub);this.expressions=He.apply(this.tag,[this.current,true])}else if(!this.value&&this.current){yt(this.expressions);if(this.current._tag){this.current._tag.unmount()}else if(this.current.parentNode){this.current.parentNode.removeChild(this.current)}this.current=null;this.expressions=[]}if(this.value){Pe.call(this.tag,this.expressions)}},unmount:function e(){yt(this.expressions||[])}};var Me={init:function e(t,n,r,i){this.dom=t;this.attr=r;this.rawValue=i;this.parent=n;this.hasExp=ee.hasExpr(i);return this},update:function e(){var t=this.value;var n=this.parent&&mt(this.parent);var r=this.dom.__ref||this.tag||this.dom;this.value=this.hasExp?ee(this.rawValue,this.parent):this.rawValue;if(!se(t)&&n){wt(n.refs,t,r)}if(!se(this.value)&&oe(this.value)){if(n){_t(n.refs,this.value,r,null,this.parent.__.index)}if(this.value!==t){z(this.dom,this.attr,this.value)}}else{j(this.dom,this.attr)}if(!this.dom.__ref){this.dom.__ref=r}},unmount:function e(){var t=this.tag||this.dom;var n=this.parent&&mt(this.parent);if(!se(this.value)&&n){wt(n.refs,this.value,t)}}};function Ae(e,t,n,r){var i=r?Object.create(r):{};i[e.key]=t;if(e.pos){i[e.pos]=n}return i}function Ne(e,t){var n=t.length;var r=e.length;while(n>r){n--;Re.apply(t[n],[t,n])}}function Re(e,t){e.splice(t,1);this.unmount();wt(this.parent,this,this.__.tagName,true)}function De(e){var t=this;de(Object.keys(this.tags),function(n){pt.apply(t.tags[n],[n,e])})}function Le(e,t,n){if(n){St.apply(this,[e,t])}else{U(e,this.root,t.root)}}function Ie(e,t,n){if(n){Ct.apply(this,[e,t])}else{U(e,this.root,t.root)}}function Be(e,t){if(t){Ct.call(this,e)}else{e.appendChild(this.root)}}function je(e,t,n,r){if(e){return r?ee(e,n):t[e]}return t}function Fe(e,t,r){var i=typeof H(e,c)!==p||j(e,c);var a=H(e,h);var o=a?ee.hasExpr(a):false;var s=bt(e);var f=n[s];var d=e.parentNode;var v=R();var m=vt(e);var y=H(e,u);var b=[];var _=true;var w=e.innerHTML;var x=!n[s];var T=e.tagName==="VIRTUAL";var C=[];var k;j(e,l);j(e,h);r=ee.loopKeys(r);r.isLoop=true;if(y){j(e,u)}d.insertBefore(v,e);d.removeChild(e);r.update=function n(){r.value=ee(r.val,t);var u=r.value;var l=N();var c=!le(u)&&!oe(u);var d=v.parentNode;var h=[];if(!d){return}if(c){k=u||false;u=k?Object.keys(u).map(function(e){return Ae(r,u[e],e)}):[]}else{k=false}if(y){u=u.filter(function(e,n){if(r.key&&!c){return!!ee(y,Ae(r,e,n,t))}return!!ee(y,_e(Object.create(t),e))})}de(u,function(n,c){var v=!k&&r.key?Ae(r,n,c):n;var p=je(a,n,v,o);var y=i&&typeof n===g&&!k;var S=C.indexOf(p);var E=S===-1;var P=!E&&y?S:c;var O=b[P];var M=c>=C.length;var A=y&&E||!y&&!O;if(A){O=ht(f,{parent:t,isLoop:_,isAnonymous:x,tagName:s,root:e.cloneNode(x),item:v,index:c},w);O.mount();if(M){Be.apply(O,[l||d,T])}else{Ie.apply(O,[d,b[c],T])}if(!M){C.splice(c,0,v)}b.splice(c,0,O);if(m){_t(t.tags,s,O,true)}}else if(P!==c&&y){if(a||he(u,C[P])){Le.apply(O,[d,b[c],T]);b.splice(c,0,b.splice(P,1)[0]);C.splice(c,0,C.splice(P,1)[0])}if(r.pos){O[r.pos]=c}if(!m&&O.tags){De.call(O,c)}}O.__.item=v;O.__.index=c;O.__.parent=t;h[c]=p;if(!A){O.update(v)}});Ne(u,b);C=h.slice();d.insertBefore(l,v)};r.unmount=function(){de(b,function(e){e.unmount()})};return r}function He(e,t){var n=this;var r=[];W(e,function(i){var a=i.nodeType;var o;var c;if(!t&&i===e){return}if(a===3&&i.parentNode.tagName!=="STYLE"&&ee.hasExpr(i.nodeValue)){r.push({dom:i,expr:i.nodeValue})}if(a!==1){return}var f=i.tagName==="VIRTUAL";if(o=H(i,l)){if(f){z(i,"loopVirtual",true)}r.push(Fe(i,n,o));return false}if(o=H(i,u)){r.push(Object.create(Oe).init(i,n,o));return false}if(o=H(i,s)){if(ee.hasExpr(o)){r.push({isRtag:true,expr:o,dom:i,attrs:[].slice.call(i.attributes)});return false}}c=vt(i);if(f){if(H(i,"virtualized")){i.parentElement.removeChild(i)}if(!c&&!H(i,"virtualized")&&!H(i,"loopVirtual")){c={tmpl:i.outerHTML}}}if(c&&(i!==e||t)){if(f){if(H(i,s)){ye("Virtual tags shouldn't be used together with the \""+s+'" attribute - https://github.com/riot/riot/issues/2511')}z(i,"virtualized",true);var d=ht({tmpl:i.outerHTML},{root:i,parent:n},i.innerHTML);r.push(d)}else{r.push(gt(c,{root:i,parent:n},i.innerHTML,n));return false}}ze.apply(n,[i,i.attributes,function(e,t){if(!t){return}r.push(t)}])});return r}function ze(e,t,n){var i=this;de(t,function(t){if(!t){return false}var a=t.name;var s=ne(a);var u;if(he(o,a)&&e.tagName.toLowerCase()!==r){u=Object.create(Me).init(e,i,a,t.value)}else if(ee.hasExpr(t.value)){u={dom:e,expr:t.value,attr:a,bool:s}}n(t,u)})}var Ue=/<yield\b/i;var Ve=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi;var We=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi;var qe=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi;var Ye={tr:"tbody",th:"tr",td:"tr",col:"colgroup"};var Ke=O&&O<10?T:C;var $e="div";var Ge="svg";function Xe(e,t,n){var r=n[0]==="o",i=r?"select>":"table>";e.innerHTML="<"+i+t.trim()+"</"+i;i=e.firstChild;if(r){i.selectedIndex=-1}else{var a=Ye[n];if(a&&i.childElementCount===1){i=A(a,i)}}return i}function Ze(e,t){if(!Ue.test(e)){return e}var n={};t=t&&t.replace(We,function(e,t,r){n[t]=n[t]||r;return""}).trim();return e.replace(qe,function(e,t,r){return n[t]||r||""}).replace(Ve,function(e,n){return t||n||""})}function Je(e,t,n){var r=e&&e.match(/^\s*<([-\w]+)/);var i=r&&r[1].toLowerCase();var a=L(n?Ge:$e);e=Ze(e,t);if(Ke.test(i)){a=Xe(a,e,i)}else{I(a,e,n)}return a}function Qe(e,t){var r=this;var i=r.name;var a=r.tmpl;var o=r.css;var s=r.attrs;var u=r.onCreate;if(!n[i]){et(i,a,o,s,u);n[i].class=this.constructor}xt(e,i,t,this);if(o){Z.inject()}return this}function et(e,t,r,i,a){if(re(i)){a=i;if(/^[\w-]+\s?=/.test(r)){i=r;r=""}else{i=""}}if(r){if(re(r)){a=r}else{Z.add(r)}}e=e.toLowerCase();n[e]={name:e,tmpl:t,attrs:i,fn:a};return e}function tt(e,t,r,i,a){if(r){Z.add(r,e)}n[e]={name:e,tmpl:t,attrs:i,fn:a};return e}function nt(e,t,n){var r=[];var i,a;function o(e){if(e.tagName){var i=H(e,s),a;if(t&&i!==t){i=t;z(e,s,t)}a=xt(e,i||e.tagName.toLowerCase(),n);if(a){r.push(a)}}else if(e.length){de(e,o)}}Z.inject();if(ie(t)){n=t;t=0}if(oe(e)){e=e==="*"?a=Et():e+Et(e.split(/, */));i=e?M(e):[]}else{i=e}if(t==="*"){t=a||Et();if(i.tagName){i=M(t,i)}else{var u=[];de(i,function(e){return u.push(M(t,e))});i=u}t=0}o(i);return r}var rt={};var it=rt[i]={};var at=0;function ot(e,t,n){if(ie(e)){ot("__"+at+++"__",e,true);return}var r=n?it:rt;if(!t){if(ae(r[e])){throw new Error("Unregistered mixin: "+e)}return r[e]}r[e]=re(t)?_e(t.prototype,r[e]||{})&&t:_e(r[e]||{},t)}function st(){return de(t,function(e){return e.update()})}function ut(e){n[e]=null}var lt="v3.8.1";var ct=Object.freeze({Tag:Qe,tag:et,tag2:tt,mount:nt,mixin:ot,update:st,unregister:ut,version:lt});function ft(e,t,n,r,i){if(e&&n){return}var o=e?kt.call(this):t||this;de(i,function(e){if(e.expr){Ee.call(o,e.expr)}r[ve(e.name).replace(a,"")]=e.expr?e.expr.value:e.value})}function dt(e){var t=this.__;var n=t.isAnonymous;ge(this,"isMounted",e);if(!n){if(e){this.trigger("mount")}else{this.trigger("unmount");this.off("*");this.__.wasCreated=false}}}function ht(e,n,r){if(e===void 0){e={}}if(n===void 0){n={}}var o=n.context||{};var s=_e({},n.opts);var u=n.parent;var l=n.isLoop;var c=!!n.isAnonymous;var f=xe.skipAnonymousTags&&c;var d=n.item;var h=n.index;var p=[];var g=[];var m=[];var y=n.root;var b=n.tagName||bt(y);var _=b==="virtual";var w=!_&&!e.tmpl;var x;if(!f){te(o)}if(e.name&&y._tag){y._tag.unmount(true)}ge(o,"isMounted",false);ge(o,"__",{isAnonymous:c,instAttrs:p,innerHTML:r,tagName:b,index:h,isLoop:l,isInline:w,listeners:[],virts:[],wasCreated:false,tail:null,head:null,parent:null,item:null});ge(o,"_riot_id",me());ge(o,"root",y);_e(o,{opts:s},d);ge(o,"parent",u||null);ge(o,"tags",{});ge(o,"refs",{});if(w||l&&c){x=y}else{if(!_){y.innerHTML=""}x=Je(e.tmpl,r,D(y))}ge(o,"update",function e(t){var n={};var r=o.isMounted&&!f;if(c&&u){_e(o,u)}_e(o,t);ft.apply(o,[l,u,c,n,p]);if(r&&o.isMounted&&re(o.shouldUpdate)&&!o.shouldUpdate(t,n)){return o}_e(s,n);if(r){o.trigger("update",t)}Pe.call(o,m);if(r){o.trigger("updated")}return o});ge(o,"mixin",function e(){de(arguments,function(e){var t;var n;var r=[];var i=["init","__proto__"];e=oe(e)?ot(e):e;if(re(e)){t=new e}else{t=e}var a=Object.getPrototypeOf(t);do{r=r.concat(Object.getOwnPropertyNames(n||t))}while(n=Object.getPrototypeOf(n||t));de(r,function(e){if(!he(i,e)){var n=be(t,e)||be(a,e);var r=n&&(n.get||n.set);if(!o.hasOwnProperty(e)&&r){Object.defineProperty(o,e,n)}else{o[e]=re(t[e])?t[e].bind(o):t[e]}}});if(t.init){t.init.bind(o)(s)}});return o});ge(o,"mount",function t(){y._tag=o;ze.apply(u,[y,y.attributes,function(e,t){if(!c&&Me.isPrototypeOf(t)){t.tag=o}e.expr=t;p.push(e)}]);V(e.attrs,function(e,t){g.push({name:e,value:t})});ze.apply(o,[y,g,function(e,t){if(t){m.push(t)}else{z(y,e.name,e.value)}}]);ft.apply(o,[l,u,c,s,p]);var n=ot(i);if(n&&!f){for(var r in n){if(n.hasOwnProperty(r)){o.mixin(n[r])}}}if(e.fn){e.fn.call(o,s)}if(!f){o.trigger("before-mount")}de(He.apply(o,[x,c]),function(e){return m.push(e)});o.update(d);if(!c&&!w){while(x.firstChild){y.appendChild(x.firstChild)}}ge(o,"root",y);if(!f&&o.parent){var a=mt(o.parent);a.one(!a.isMounted?"mount":"updated",function(){dt.call(o,true)})}else{dt.call(o,true)}o.__.wasCreated=true;return o});ge(o,"unmount",function n(r){var i=o.root;var s=i.parentNode;var l=t.indexOf(o);if(!f){o.trigger("before-unmount")}V(e.attrs,function(e){if(pe(e,a)){e=e.slice(a.length)}j(y,e)});o.__.listeners.forEach(function(e){Object.keys(e[v]).forEach(function(t){e.removeEventListener(t,e[v][t])})});if(l!==-1){t.splice(l,1)}if(u&&!c){var d=mt(u);if(_){Object.keys(o.tags).forEach(function(e){return wt(d.tags,e,o.tags[e])})}else{wt(d.tags,b,o)}}if(o.__.virts){de(o.__.virts,function(e){if(e.parentNode){e.parentNode.removeChild(e)}})}yt(m);de(p,function(e){return e.expr&&e.expr.unmount&&e.expr.unmount()});if(r){I(i,"")}else if(s){s.removeChild(i)}if(o.__.onUnmount){o.__.onUnmount()}if(!o.isMounted){dt.call(o,true)}dt.call(o,false);delete o.root._tag;return o});return o}function vt(e){return e.tagName&&n[H(e,s)||H(e,s)||e.tagName.toLowerCase()]}function pt(e,t){var n=this.parent;var r;if(!n){return}r=n.tags[e];if(le(r)){r.splice(t,0,r.splice(r.indexOf(this),1)[0])}else{_t(n.tags,e,this)}}function gt(e,t,n,r){var i=ht(e,t,n);var a=t.tagName||bt(t.root,true);var o=mt(r);ge(i,"parent",o);i.__.parent=r;_t(o.tags,a,i);if(o!==r){_t(r.tags,a,i)}return i}function mt(e){var t=e;while(t.__.isAnonymous){if(!t.parent){break}t=t.parent}return t}function yt(e){de(e,function(e){if(e.unmount){e.unmount(true)}else if(e.tagName){e.tag.unmount(true)}else if(e.unmount){e.unmount()}})}function bt(e,t){var n=vt(e);var r=!t&&H(e,s);return r&&!ee.hasExpr(r)?r:n?n.name:e.tagName.toLowerCase()}function _t(e,t,n,r,i){var a=e[t];var o=le(a);var s=!ae(i);if(a&&a===n){return}if(!a&&r){e[t]=[n]}else if(!a){e[t]=n}else{if(o){var u=a.indexOf(n);if(u===i){return}if(u!==-1){a.splice(u,1)}if(s){a.splice(i,0,n)}else{a.push(n)}}else{e[t]=[a,n]}}}function wt(e,t,n,r){if(le(e[t])){var i=e[t].indexOf(n);if(i!==-1){e[t].splice(i,1)}if(!e[t].length){delete e[t]}else if(e[t].length===1&&!r){e[t]=e[t][0]}}else if(e[t]===n){delete e[t]}}function xt(e,r,i,a){var o=n[r];var s=n[r].class;var u=a||(s?Object.create(s.prototype):{});var l=e._innerHTML=e._innerHTML||e.innerHTML;var c=_e({root:e,opts:i,context:u},{parent:i?i.parent:null});var f;if(o&&e){f=ht(o,c,l)}if(f&&f.mount){f.mount(true);if(!he(t,f)){t.push(f)}}return f}function Tt(e,t){var n=N();Ct.call(e,n);t.parentNode.replaceChild(n,t)}function Ct(e,t){var n=this;var r=R();var i=R();var a=N();var o;var s;this.root.insertBefore(r,this.root.firstChild);this.root.appendChild(i);this.__.head=s=r;this.__.tail=i;while(s){o=s.nextSibling;a.appendChild(s);n.__.virts.push(s);s=o}if(t){e.insertBefore(a,t.__.head)}else{e.appendChild(a)}}function kt(){if(this.parent){return _e(Object.create(this),this.parent)}return this}function St(e,t){var n=this;var r=this.__.head;var i;var a=N();while(r){i=r.nextSibling;a.appendChild(r);r=i;if(r===n.__.tail){a.appendChild(r);e.insertBefore(a,t.__.head);break}}}function Et(e){if(!e){var t=Object.keys(n);return t+Et(t)}return e.filter(function(e){return!/[^-\w]/.test(e)}).reduce(function(e,t){var n=t.trim().toLowerCase();return e+",["+s+'="'+n+'"]'},"")}var Pt=Object.freeze({getTag:vt,moveChildTag:pt,initChildTag:gt,getImmediateCustomParentTag:mt,unmountAll:yt,getTagName:bt,arrayishAdd:_t,arrayishRemove:wt,mountTo:xt,makeReplaceVirtual:Tt,makeVirtual:Ct,inheritParentProps:kt,moveVirtual:St,selectTags:Et});var Ot=xe;var Mt={tmpl:ee,brackets:Q,styleManager:Z,vdom:t,styleNode:Z.styleNode,dom:q,check:fe,misc:we,tags:Pt};var At=Qe;var Nt=et;var Rt=tt;var Dt=nt;var Lt=ot;var It=st;var Bt=ut;var jt=lt;var Ft=te;var Ht=_e({},ct,{observable:te,settings:Ot,util:Mt});e.settings=Ot;e.util=Mt;e.Tag=At;e.tag=Nt;e.tag2=Rt;e.mount=Dt;e.mixin=Lt;e.update=It;e.unregister=Bt;e.version=jt;e.observable=Ft;e["default"]=Ht;Object.defineProperty(e,"__esModule",{value:true})})});var i=t(r);var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}var u={type:"logger",log:function e(t){this.output("log",t)},warn:function e(t){this.output("warn",t)},error:function e(t){this.output("error",t)},output:function e(t,n){var r;if(console&&console[t]){(r=console)[t].apply(r,s(n))}}};var l=function(){function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};o(this,e);this.init(t,n)}e.prototype.init=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.prefix=n.prefix||"i18next:";this.logger=t||u;this.options=n;this.debug=n.debug};e.prototype.setDebug=function e(t){this.debug=t};e.prototype.log=function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++){n[r]=arguments[r]}return this.forward(n,"log","",true)};e.prototype.warn=function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++){n[r]=arguments[r]}return this.forward(n,"warn","",true)};e.prototype.error=function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++){n[r]=arguments[r]}return this.forward(n,"error","")};e.prototype.deprecate=function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++){n[r]=arguments[r]}return this.forward(n,"warn","WARNING DEPRECATED: ",true)};e.prototype.forward=function e(t,n,r,i){if(i&&!this.debug){return null}if(typeof t[0]==="string"){t[0]=""+r+this.prefix+" "+t[0]}return this.logger[n](t)};e.prototype.create=function t(n){return new e(this.logger,a({prefix:this.prefix+":"+n+":"},this.options))};return e}();var c=new l;function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var d=function(){function e(){f(this,e);this.observers={}}e.prototype.on=function e(t,n){var r=this;t.split(" ").forEach(function(e){r.observers[e]=r.observers[e]||[];r.observers[e].push(n)})};e.prototype.off=function e(t,n){var r=this;if(!this.observers[t]){return}this.observers[t].forEach(function(){if(!n){delete r.observers[t]}else{var e=r.observers[t].indexOf(n);if(e>-1){r.observers[t].splice(e,1)}}})};e.prototype.emit=function e(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}if(this.observers[t]){var a=[].concat(this.observers[t]);a.forEach(function(e){e.apply(undefined,r)})}if(this.observers["*"]){var o=[].concat(this.observers["*"]);o.forEach(function(e){var n;e.apply(e,(n=[t]).concat.apply(n,r))})}};return e}();function h(e){if(e==null){return""}return""+e}function v(e,t,n){e.forEach(function(e){if(t[e]){n[e]=t[e]}})}function p(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||typeof e==="string"}var a=typeof t!=="string"?[].concat(t):t.split(".");while(a.length>1){if(i()){return{}}var o=r(a.shift());if(!e[o]&&n){e[o]=new n}e=e[o]}if(i()){return{}}return{obj:e,k:r(a.shift())}}function g(e,t,n){var r=p(e,t,Object),i=r.obj,a=r.k;i[a]=n}function m(e,t,n,r){var i=p(e,t,Object),a=i.obj,o=i.k;a[o]=a[o]||[];if(r){a[o]=a[o].concat(n)}if(!r){a[o].push(n)}}function y(e,t){var n=p(e,t),r=n.obj,i=n.k;if(!r){return undefined}return r[i]}function b(e,t,n){for(var r in t){if(r in e){if(typeof e[r]==="string"||e[r]instanceof String||typeof t[r]==="string"||t[r]instanceof String){if(n){e[r]=t[r]}}else{b(e[r],t[r],n)}}else{e[r]=t[r]}}return e}function _(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function x(e){if(typeof e==="string"){return e.replace(/[&<>"'\/]/g,function(e){return w[e]})}return e}var T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};function C(e,t){var n=Object.getOwnPropertyNames(t);for(var r=0;r<n.length;r++){var i=n[r];var a=Object.getOwnPropertyDescriptor(t,i);if(a&&a.configurable&&e[i]===undefined){Object.defineProperty(e,i,a)}}return e}function k(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function S(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function E(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):C(e,t)}}var P=function(e){E(t,e);function t(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{ns:["translation"],defaultNS:"translation"};k(this,t);var i=S(this,e.call(this));i.data=n||{};i.options=r;return i}t.prototype.addNamespaces=function e(t){if(this.options.ns.indexOf(t)<0){this.options.ns.push(t)}};t.prototype.removeNamespaces=function e(t){var n=this.options.ns.indexOf(t);if(n>-1){this.options.ns.splice(n,1)}};t.prototype.getResource=function e(t,n,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var a=i.keySeparator||this.options.keySeparator;if(a===undefined){a="."}var o=[t,n];if(r&&typeof r!=="string"){o=o.concat(r)}if(r&&typeof r==="string"){o=o.concat(a?r.split(a):r)}if(t.indexOf(".")>-1){o=t.split(".")}return y(this.data,o)};t.prototype.addResource=function e(t,n,r,i){var a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{silent:false};var o=this.options.keySeparator;if(o===undefined){o="."}var s=[t,n];if(r){s=s.concat(o?r.split(o):r)}if(t.indexOf(".")>-1){s=t.split(".");i=n;n=s[1]}this.addNamespaces(n);g(this.data,s,i);if(!a.silent){this.emit("added",t,n,r,i)}};t.prototype.addResources=function e(t,n,r){for(var i in r){if(typeof r[i]==="string"){this.addResource(t,n,i,r[i],{silent:true})}}this.emit("added",t,n,r)};t.prototype.addResourceBundle=function e(t,n,r,i,a){var o=[t,n];if(t.indexOf(".")>-1){o=t.split(".");i=r;r=n;n=o[1]}this.addNamespaces(n);var s=y(this.data,o)||{};if(i){b(s,r,a)}else{s=T({},s,r)}g(this.data,o,s);this.emit("added",t,n,r)};t.prototype.removeResourceBundle=function e(t,n){if(this.hasResourceBundle(t,n)){delete this.data[t][n]}this.removeNamespaces(n);this.emit("removed",t,n)};t.prototype.hasResourceBundle=function e(t,n){return this.getResource(t,n)!==undefined};t.prototype.getResourceBundle=function e(t,n){if(!n){n=this.options.defaultNS}if(this.options.compatibilityAPI==="v1"){return T({},this.getResource(t,n))}return this.getResource(t,n)};t.prototype.toJSON=function e(){return this.data};return t}(d);var O={processors:{},addPostProcessor:function e(t){this.processors[t.name]=t},handle:function e(t,n,r,i,a){var o=this;t.forEach(function(e){if(o.processors[e]){n=o.processors[e].process(n,r,i,a)}});return n}};var M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var A=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function N(e,t){var n=Object.getOwnPropertyNames(t);for(var r=0;r<n.length;r++){var i=n[r];var a=Object.getOwnPropertyDescriptor(t,i);if(a&&a.configurable&&e[i]===undefined){Object.defineProperty(e,i,a)}}return e}function R(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function D(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function L(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):N(e,t)}}var I=function(e){L(t,e);function t(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};R(this,t);var i=D(this,e.call(this));v(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector"],n,i);i.options=r;i.logger=c.create("translator");return i}t.prototype.changeLanguage=function e(t){if(t){this.language=t}};t.prototype.exists=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{interpolation:{}};var r=this.resolve(t,n);return r&&r.res!==undefined};t.prototype.extractFromKey=function e(t,n){var r=n.nsSeparator||this.options.nsSeparator;if(r===undefined){r=":"}var i=n.keySeparator||this.options.keySeparator||".";var a=n.ns||this.options.defaultNS;if(r&&t.indexOf(r)>-1){var o=t.split(r);if(r!==i||r===i&&this.options.ns.indexOf(o[0])>-1){a=o.shift()}t=o.join(i)}if(typeof a==="string"){a=[a]}return{key:t,namespaces:a}};t.prototype.translate=function e(t){var n=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if((typeof r==="undefined"?"undefined":A(r))!=="object"){r=this.options.overloadTranslationOptionHandler(arguments)}if(t===undefined||t===null||t===""){return""}if(typeof t==="number"){t=String(t)}if(typeof t==="string"){t=[t]}var i=r.keySeparator||this.options.keySeparator||".";var a=this.extractFromKey(t[t.length-1],r),o=a.key,s=a.namespaces;var u=s[s.length-1];var l=r.lng||this.language;var c=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&l.toLowerCase()==="cimode"){if(c){var f=r.nsSeparator||this.options.nsSeparator;return u+f+o}return o}var d=this.resolve(t,r);var h=d&&d.res;var v=d&&d.usedKey||o;var p=Object.prototype.toString.apply(h);var g=["[object Number]","[object Function]","[object RegExp]"];var m=r.joinArrays!==undefined?r.joinArrays:this.options.joinArrays;var y=typeof h!=="string"&&typeof h!=="boolean"&&typeof h!=="number";if(h&&y&&g.indexOf(p)<0&&!(m&&p==="[object Array]")){if(!r.returnObjects&&!this.options.returnObjects){this.logger.warn("accessing an object - but returnObjects options is not enabled!");return this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,h,r):"key '"+o+" ("+this.language+")' returned an object instead of string."}if(r.keySeparator||this.options.keySeparator){var b=p==="[object Array]"?[]:{};for(var _ in h){if(Object.prototype.hasOwnProperty.call(h,_)){b[_]=this.translate(""+v+i+_,M({},r,{joinArrays:false,ns:s}))}}h=b}}else if(m&&p==="[object Array]"){h=h.join(m);if(h){h=this.extendTranslation(h,t,r)}}else{var w=false;var x=false;if(!this.isValidLookup(h)&&r.defaultValue!==undefined){w=true;h=r.defaultValue}if(!this.isValidLookup(h)){x=true;h=o}var T=r.defaultValue&&r.defaultValue!==h&&this.options.updateMissing;if(x||w||T){this.logger.log(T?"updateKey":"missingKey",l,u,o,T?r.defaultValue:h);var C=[];var k=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&k&&k[0]){for(var S=0;S<k.length;S++){C.push(k[S])}}else if(this.options.saveMissingTo==="all"){C=this.languageUtils.toResolveHierarchy(r.lng||this.language)}else{C.push(r.lng||this.language)}var E=function e(t,i){if(n.options.missingKeyHandler){n.options.missingKeyHandler(t,u,i,T?r.defaultValue:h,T)}else if(n.backendConnector&&n.backendConnector.saveMissing){n.backendConnector.saveMissing(t,u,i,T?r.defaultValue:h,T)}n.emit("missingKey",t,u,i,h)};if(this.options.saveMissing){if(this.options.saveMissingPlurals&&r.count){C.forEach(function(e){var t=n.pluralResolver.getPluralFormsOfKey(e,o);t.forEach(function(t){return E([e],t)})})}else{E(C,o)}}}h=this.extendTranslation(h,t,r);if(x&&h===o&&this.options.appendNamespaceToMissingKey){h=u+":"+o}if(x&&this.options.parseMissingKeyHandler){h=this.options.parseMissingKeyHandler(h)}}return h};t.prototype.extendTranslation=function e(t,n,r){var i=this;if(r.interpolation){this.interpolator.init(M({},r,{interpolation:M({},this.options.interpolation,r.interpolation)}))}var a=r.replace&&typeof r.replace!=="string"?r.replace:r;if(this.options.interpolation.defaultVariables){a=M({},this.options.interpolation.defaultVariables,a)}t=this.interpolator.interpolate(t,a,r.lng||this.language);if(r.nest!==false){t=this.interpolator.nest(t,function(){return i.translate.apply(i,arguments)},r)}if(r.interpolation){this.interpolator.reset()}var o=r.postProcess||this.options.postProcess;var s=typeof o==="string"?[o]:o;if(t!==undefined&&s&&s.length&&r.applyPostProcessor!==false){t=O.handle(s,t,n,r,this)}return t};t.prototype.resolve=function e(t){var n=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=void 0;var a=void 0;if(typeof t==="string"){t=[t]}t.forEach(function(e){if(n.isValidLookup(i)){return}var t=n.extractFromKey(e,r);var o=t.key;a=o;var s=t.namespaces;if(n.options.fallbackNS){s=s.concat(n.options.fallbackNS)}var u=r.count!==undefined&&typeof r.count!=="string";var l=r.context!==undefined&&typeof r.context==="string"&&r.context!=="";var c=r.lngs?r.lngs:n.languageUtils.toResolveHierarchy(r.lng||n.language);s.forEach(function(e){if(n.isValidLookup(i)){return}c.forEach(function(t){if(n.isValidLookup(i)){return}var a=o;var s=[a];var c=void 0;if(u){c=n.pluralResolver.getSuffix(t,r.count)}if(u&&l){s.push(a+c)}if(l){s.push(a+=""+n.options.contextSeparator+r.context)}if(u){s.push(a+=c)}var f=void 0;while(f=s.pop()){if(!n.isValidLookup(i)){i=n.getResource(t,e,f,r)}}})})});return{res:i,usedKey:a}};t.prototype.isValidLookup=function e(t){return t!==undefined&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")};t.prototype.getResource=function e(t,n,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};return this.resourceStore.getResource(t,n,r,i)};return t}(d);function B(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function j(e){return e.charAt(0).toUpperCase()+e.slice(1)}var F=function(){function e(t){B(this,e);this.options=t;this.whitelist=this.options.whitelist||false;this.logger=c.create("languageUtils")}e.prototype.getScriptPartFromCode=function e(t){if(!t||t.indexOf("-")<0){return null}var n=t.split("-");if(n.length===2){return null}n.pop();return this.formatLanguageCode(n.join("-"))};e.prototype.getLanguagePartFromCode=function e(t){if(!t||t.indexOf("-")<0){return t}var n=t.split("-");return this.formatLanguageCode(n[0])};e.prototype.formatLanguageCode=function e(t){if(typeof t==="string"&&t.indexOf("-")>-1){var n=["hans","hant","latn","cyrl","cans","mong","arab"];var r=t.split("-");if(this.options.lowerCaseLng){r=r.map(function(e){return e.toLowerCase()})}else if(r.length===2){r[0]=r[0].toLowerCase();r[1]=r[1].toUpperCase();if(n.indexOf(r[1].toLowerCase())>-1){r[1]=j(r[1].toLowerCase())}}else if(r.length===3){r[0]=r[0].toLowerCase();if(r[1].length===2){r[1]=r[1].toUpperCase()}if(r[0]!=="sgn"&&r[2].length===2){r[2]=r[2].toUpperCase()}if(n.indexOf(r[1].toLowerCase())>-1){r[1]=j(r[1].toLowerCase())}if(n.indexOf(r[2].toLowerCase())>-1){r[2]=j(r[2].toLowerCase())}}return r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t};e.prototype.isWhitelisted=function e(t){if(this.options.load==="languageOnly"||this.options.nonExplicitWhitelist){t=this.getLanguagePartFromCode(t)}return!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(t)>-1};e.prototype.getFallbackCodes=function e(t,n){if(!t){return[]}if(typeof t==="string"){t=[t]}if(Object.prototype.toString.apply(t)==="[object Array]"){return t}if(!n){return t.default||[]}var r=t[n];if(!r){r=t[this.getScriptPartFromCode(n)]}if(!r){r=t[this.formatLanguageCode(n)]}if(!r){r=t.default}return r||[]};e.prototype.toResolveHierarchy=function e(t,n){var r=this;var i=this.getFallbackCodes(n||this.options.fallbackLng||[],t);var a=[];var o=function e(t){if(!t){return}if(r.isWhitelisted(t)){a.push(t)}else{r.logger.warn("rejecting non-whitelisted language code: "+t)}};if(typeof t==="string"&&t.indexOf("-")>-1){if(this.options.load!=="languageOnly"){o(this.formatLanguageCode(t))}if(this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"){o(this.getScriptPartFromCode(t))}if(this.options.load!=="currentOnly"){o(this.getLanguagePartFromCode(t))}}else if(typeof t==="string"){o(this.formatLanguageCode(t))}i.forEach(function(e){if(a.indexOf(e)<0){o(r.formatLanguageCode(e))}});return a};return e}();function H(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var z=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","he","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21}];var U={1:function e(t){return Number(t>1)},2:function e(t){return Number(t!=1)},3:function e(t){return 0},4:function e(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function e(t){return Number(t===0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function e(t){return Number(t==1?0:t>=2&&t<=4?1:2)},7:function e(t){return Number(t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function e(t){return Number(t==1?0:t==2?1:t!=8&&t!=11?2:3)},9:function e(t){return Number(t>=2)},10:function e(t){return Number(t==1?0:t==2?1:t<7?2:t<11?3:4)},11:function e(t){return Number(t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3)},12:function e(t){return Number(t%10!=1||t%100==11)},13:function e(t){return Number(t!==0)},14:function e(t){return Number(t==1?0:t==2?1:t==3?2:3)},15:function e(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function e(t){return Number(t%10==1&&t%100!=11?0:t!==0?1:2)},17:function e(t){return Number(t==1||t%10==1?0:1)},18:function e(t){return Number(t==0?0:t==1?1:2)},19:function e(t){return Number(t==1?0:t===0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function e(t){return Number(t==1?0:t===0||t%100>0&&t%100<20?1:2)},21:function e(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)}};function V(){var e={};z.forEach(function(t){t.lngs.forEach(function(n){e[n]={numbers:t.nr,plurals:U[t.fc]}})});return e}var W=function(){function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};H(this,e);this.languageUtils=t;this.options=n;this.logger=c.create("pluralResolver");this.rules=V()}e.prototype.addRule=function e(t,n){this.rules[t]=n};e.prototype.getRule=function e(t){return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]};e.prototype.needsPlural=function e(t){var n=this.getRule(t);return n&&n.numbers.length>1};e.prototype.getPluralFormsOfKey=function e(t,n){var r=this;var i=[];var a=this.getRule(t);a.numbers.forEach(function(e){var a=r.getSuffix(t,e);i.push(""+n+a)});return i};e.prototype.getSuffix=function e(t,n){var r=this;var i=this.getRule(t);if(i){var a=i.noAbs?i.plurals(n):i.plurals(Math.abs(n));var o=i.numbers[a];if(this.options.simplifyPluralSuffix&&i.numbers.length===2&&i.numbers[0]===1){if(o===2){o="plural"}else if(o===1){o=""}}var s=function e(){return r.options.prepend&&o.toString()?r.options.prepend+o.toString():o.toString()};if(this.options.compatibilityJSON==="v1"){if(o===1){return""}if(typeof o==="number"){return"_plural_"+o.toString()}return s()}else if(this.options.compatibilityJSON==="v2"||i.numbers.length===2&&i.numbers[0]===1){return s()}else if(i.numbers.length===2&&i.numbers[0]===1){return s()}return this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString()}this.logger.warn("no plural rule found for: "+t);return""};return e}();var q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};function Y(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var K=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};Y(this,e);this.logger=c.create("interpolator");this.init(t,true)}e.prototype.init=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=arguments[1];if(n){this.options=t;this.format=t.interpolation&&t.interpolation.format||function(e){return e};this.escape=t.interpolation&&t.interpolation.escape||x}if(!t.interpolation){t.interpolation={escapeValue:true}}var r=t.interpolation;this.escapeValue=r.escapeValue!==undefined?r.escapeValue:true;this.prefix=r.prefix?_(r.prefix):r.prefixEscaped||"{{";this.suffix=r.suffix?_(r.suffix):r.suffixEscaped||"}}";this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||",";this.unescapePrefix=r.unescapeSuffix?"":r.unescapePrefix||"-";this.unescapeSuffix=this.unescapePrefix?"":r.unescapeSuffix||"";this.nestingPrefix=r.nestingPrefix?_(r.nestingPrefix):r.nestingPrefixEscaped||_("$t(");this.nestingSuffix=r.nestingSuffix?_(r.nestingSuffix):r.nestingSuffixEscaped||_(")");this.maxReplaces=r.maxReplaces?r.maxReplaces:1e3;this.resetRegExp()};e.prototype.reset=function e(){if(this.options){this.init(this.options)}};e.prototype.resetRegExp=function e(){var t=this.prefix+"(.+?)"+this.suffix;this.regexp=new RegExp(t,"g");var n=""+this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix;this.regexpUnescape=new RegExp(n,"g");var r=this.nestingPrefix+"(.+?)"+this.nestingSuffix;this.nestingRegexp=new RegExp(r,"g")};e.prototype.interpolate=function e(t,n,r){var i=this;var a=void 0;var o=void 0;var s=void 0;function u(e){return e.replace(/\$/g,"$$$$")}var l=function e(t){if(t.indexOf(i.formatSeparator)<0){return y(n,t)}var a=t.split(i.formatSeparator);var o=a.shift().trim();var s=a.join(i.formatSeparator).trim();return i.format(y(n,o),s,r)};this.resetRegExp();s=0;while(a=this.regexpUnescape.exec(t)){o=l(a[1].trim());t=t.replace(a[0],o);this.regexpUnescape.lastIndex=0;s++;if(s>=this.maxReplaces){break}}s=0;while(a=this.regexp.exec(t)){o=l(a[1].trim());if(typeof o!=="string"){o=h(o)}if(!o){this.logger.warn("missed to pass in variable "+a[1]+" for interpolating "+t);o=""}o=this.escapeValue?u(this.escape(o)):u(o);t=t.replace(a[0],o);this.regexp.lastIndex=0;s++;if(s>=this.maxReplaces){break}}return t};e.prototype.nest=function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=void 0;var a=void 0;var o=q({},r);o.applyPostProcessor=false;function s(e,t){if(e.indexOf(",")<0){return e}var n=e.split(",");e=n.shift();var r=n.join(",");r=this.interpolate(r,o);r=r.replace(/'/g,'"');try{o=JSON.parse(r);if(t){o=q({},t,o)}}catch(t){this.logger.error("failed parsing options string in nesting for key "+e,t)}return e}while(i=this.nestingRegexp.exec(t)){a=n(s.call(this,i[1].trim(),o),o);if(a&&i[0]===t&&typeof a!=="string"){return a}if(typeof a!=="string"){a=h(a)}if(!a){this.logger.warn("missed to resolve "+i[1]+" for nesting "+t);a=""}t=t.replace(i[0],a);this.regexp.lastIndex=0}return t};return e}();var $=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var G=function(){function e(e,t){var n=[];var r=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(r=(s=o.next()).done);r=true){n.push(s.value);if(t&&n.length===t){break}}}catch(e){i=true;a=e}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(i){throw a}}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();function X(e,t){var n=Object.getOwnPropertyNames(t);for(var r=0;r<n.length;r++){var i=n[r];var a=Object.getOwnPropertyDescriptor(t,i);if(a&&a.configurable&&e[i]===undefined){Object.defineProperty(e,i,a)}}return e}function Z(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function J(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function Q(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):X(e,t)}}function ee(e,t){var n=e.indexOf(t);while(n!==-1){e.splice(n,1);n=e.indexOf(t)}}var te=function(e){Q(t,e);function t(n,r,i){var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};Z(this,t);var o=J(this,e.call(this));o.backend=n;o.store=r;o.languageUtils=i.languageUtils;o.options=a;o.logger=c.create("backendConnector");o.state={};o.queue=[];if(o.backend&&o.backend.init){o.backend.init(i,a.backend,a)}return o}t.prototype.queueLoad=function e(t,n,r){var i=this;var a=[];var o=[];var s=[];var u=[];t.forEach(function(e){var t=true;n.forEach(function(n){var r=e+"|"+n;if(i.store.hasResourceBundle(e,n)){i.state[r]=2}else if(i.state[r]<0){}else if(i.state[r]===1){if(o.indexOf(r)<0){o.push(r)}}else{i.state[r]=1;t=false;if(o.indexOf(r)<0){o.push(r)}if(a.indexOf(r)<0){a.push(r)}if(u.indexOf(n)<0){u.push(n)}}});if(!t){s.push(e)}});if(a.length||o.length){this.queue.push({pending:o,loaded:{},errors:[],callback:r})}return{toLoad:a,pending:o,toLoadLanguages:s,toLoadNamespaces:u}};t.prototype.loaded=function e(t,n,r){var i=this;var a=t.split("|"),o=G(a,2),s=o[0],u=o[1];if(n){this.emit("failedLoading",s,u,n)}if(r){this.store.addResourceBundle(s,u,r)}this.state[t]=n?-1:2;this.queue.forEach(function(e){m(e.loaded,[s],u);ee(e.pending,t);if(n){e.errors.push(n)}if(e.pending.length===0&&!e.done){i.emit("loaded",e.loaded);e.done=true;if(e.errors.length){e.callback(e.errors)}else{e.callback()}}});this.queue=this.queue.filter(function(e){return!e.done})};t.prototype.read=function e(t,n,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var a=this;var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:250;var s=arguments[5];if(!t.length){return s(null,{})}return this.backend[r](t,n,function(e,u){if(e&&u&&i<5){setTimeout(function(){a.read.call(a,t,n,r,i+1,o*2,s)},o);return}s(e,u)})};t.prototype.load=function e(t,n,r){var i=this;if(!this.backend){this.logger.warn("No backend was added via i18next.use. Will not load resources.");return r&&r()}var a=$({},this.backend.options,this.options.backend);if(typeof t==="string"){t=this.languageUtils.toResolveHierarchy(t)}if(typeof n==="string"){n=[n]}var o=this.queueLoad(t,n,r);if(!o.toLoad.length){if(!o.pending.length){r()}return null}if(a.allowMultiLoading&&this.backend.readMulti){this.read(o.toLoadLanguages,o.toLoadNamespaces,"readMulti",null,null,function(e,t){if(e){i.logger.warn("loading namespaces "+o.toLoadNamespaces.join(", ")+" for languages "+o.toLoadLanguages.join(", ")+" via multiloading failed",e)}if(!e&&t){i.logger.log("successfully loaded namespaces "+o.toLoadNamespaces.join(", ")+" for languages "+o.toLoadLanguages.join(", ")+" via multiloading",t)}o.toLoad.forEach(function(n){var r=n.split("|"),a=G(r,2),o=a[0],s=a[1];var u=y(t,[o,s]);if(u){i.loaded(n,e,u)}else{var l="loading namespace "+s+" for language "+o+" via multiloading failed";i.loaded(n,l);i.logger.error(l)}})})}else{o.toLoad.forEach(function(e){i.loadOne(e)})}};t.prototype.reload=function e(t,n){var r=this;if(!this.backend){this.logger.warn("No backend was added via i18next.use. Will not load resources.")}var i=$({},this.backend.options,this.options.backend);if(typeof t==="string"){t=this.languageUtils.toResolveHierarchy(t)}if(typeof n==="string"){n=[n]}if(i.allowMultiLoading&&this.backend.readMulti){this.read(t,n,"readMulti",null,null,function(e,i){if(e){r.logger.warn("reloading namespaces "+n.join(", ")+" for languages "+t.join(", ")+" via multiloading failed",e)}if(!e&&i){r.logger.log("successfully reloaded namespaces "+n.join(", ")+" for languages "+t.join(", ")+" via multiloading",i)}t.forEach(function(t){n.forEach(function(n){var a=y(i,[t,n]);if(a){r.loaded(t+"|"+n,e,a)}else{var o="reloading namespace "+n+" for language "+t+" via multiloading failed";r.loaded(t+"|"+n,o);r.logger.error(o)}})})})}else{t.forEach(function(e){n.forEach(function(t){r.loadOne(e+"|"+t,"re")})})}};t.prototype.loadOne=function e(t){var n=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var i=t.split("|"),a=G(i,2),o=a[0],s=a[1];this.read(o,s,"read",null,null,function(e,i){if(e){n.logger.warn(r+"loading namespace "+s+" for language "+o+" failed",e)}if(!e&&i){n.logger.log(r+"loaded namespace "+s+" for language "+o,i)}n.loaded(t,e,i)})};t.prototype.saveMissing=function e(t,n,r,i,a){if(this.backend&&this.backend.create){this.backend.create(t,n,r,i,null,{isUpdate:a})}if(!t||!t[0]){return}this.store.addResource(t[0],n,r,i)};return t}(d);var ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};function re(e,t){var n=Object.getOwnPropertyNames(t);for(var r=0;r<n.length;r++){var i=n[r];var a=Object.getOwnPropertyDescriptor(t,i);if(a&&a.configurable&&e[i]===undefined){Object.defineProperty(e,i,a)}}return e}function ie(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function ae(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function oe(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):re(e,t)}}var se=function(e){oe(t,e);function t(n,r,i){var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};ie(this,t);var o=ae(this,e.call(this));o.cache=n;o.store=r;o.services=i;o.options=a;o.logger=c.create("cacheConnector");if(o.cache&&o.cache.init){o.cache.init(i,a.cache,a)}return o}t.prototype.load=function e(t,n,r){var i=this;if(!this.cache){return r&&r()}var a=ne({},this.cache.options,this.options.cache);var o=typeof t==="string"?this.services.languageUtils.toResolveHierarchy(t):t;if(a.enabled){this.cache.load(o,function(e,t){if(e){i.logger.error("loading languages "+o.join(", ")+" from cache failed",e)}if(t){for(var n in t){if(Object.prototype.hasOwnProperty.call(t,n)){for(var a in t[n]){if(Object.prototype.hasOwnProperty.call(t[n],a)){if(a!=="i18nStamp"){var s=t[n][a];if(s){i.store.addResourceBundle(n,a,s)}}}}}}}if(r){r()}})}else if(r){r()}};t.prototype.save=function e(){if(this.cache&&this.options.cache&&this.options.cache.enabled){this.cache.save(this.store.data)}};return t}(d);function ue(){return{debug:false,initImmediate:true,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:false,whitelist:false,nonExplicitWhitelist:false,load:"all",preload:false,simplifyPluralSuffix:true,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",saveMissing:false,updateMissing:false,saveMissingTo:"fallback",saveMissingPlurals:true,missingKeyHandler:false,postProcess:false,returnNull:true,returnEmptyString:true,returnObjects:false,joinArrays:false,returnedObjectHandler:function e(){},parseMissingKeyHandler:false,appendNamespaceToMissingKey:false,appendNamespaceToCIMode:false,overloadTranslationOptionHandler:function e(t){return{defaultValue:t[1]}},interpolation:{escapeValue:true,format:function e(t,n,r){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",maxReplaces:1e3}}}function le(e){if(typeof e.ns==="string"){e.ns=[e.ns]}if(typeof e.fallbackLng==="string"){e.fallbackLng=[e.fallbackLng]}if(typeof e.fallbackNS==="string"){e.fallbackNS=[e.fallbackNS]}if(e.whitelist&&e.whitelist.indexOf("cimode")<0){e.whitelist.push("cimode")}return e}var ce=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};function de(e,t){var n=Object.getOwnPropertyNames(t);for(var r=0;r<n.length;r++){var i=n[r];var a=Object.getOwnPropertyDescriptor(t,i);if(a&&a.configurable&&e[i]===undefined){Object.defineProperty(e,i,a)}}return e}function he(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function ve(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function pe(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):de(e,t)}}function ge(){}var me=function(e){pe(t,e);function t(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=arguments[1];he(this,t);var i=ve(this,e.call(this));i.options=le(n);i.services={};i.logger=c;i.modules={external:[]};if(r&&!i.isInitialized&&!n.isClone){var a;if(!i.options.initImmediate){return a=i.init(n,r),ve(i,a)}setTimeout(function(){i.init(n,r)},0)}return i}t.prototype.init=function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=arguments[1];if(typeof n==="function"){r=n;n={}}this.options=fe({},ue(),this.options,le(n));this.format=this.options.interpolation.format;if(!r){r=ge}function i(e){if(!e){return null}if(typeof e==="function"){return new e}return e}if(!this.options.isClone){if(this.modules.logger){c.init(i(this.modules.logger),this.options)}else{c.init(null,this.options)}var a=new F(this.options);this.store=new P(this.options.resources,this.options);var o=this.services;o.logger=c;o.resourceStore=this.store;o.resourceStore.on("added removed",function(e,t){o.cacheConnector.save()});o.languageUtils=a;o.pluralResolver=new W(a,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix});o.interpolator=new K(this.options);o.backendConnector=new te(i(this.modules.backend),o.resourceStore,o,this.options);o.backendConnector.on("*",function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}t.emit.apply(t,[e].concat(r))});o.backendConnector.on("loaded",function(e){o.cacheConnector.save()});o.cacheConnector=new se(i(this.modules.cache),o.resourceStore,o,this.options);o.cacheConnector.on("*",function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}t.emit.apply(t,[e].concat(r))});if(this.modules.languageDetector){o.languageDetector=i(this.modules.languageDetector);o.languageDetector.init(o,this.options.detection,this.options)}this.translator=new I(this.services,this.options);this.translator.on("*",function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}t.emit.apply(t,[e].concat(r))});this.modules.external.forEach(function(e){if(e.init){e.init(t)}})}var s=["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle"];s.forEach(function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments)}});var u=function e(){t.changeLanguage(t.options.lng,function(e,n){t.isInitialized=true;t.logger.log("initialized",t.options);t.emit("initialized",t.options);r(e,n)})};if(this.options.resources||!this.options.initImmediate){u()}else{setTimeout(u,0)}return this};t.prototype.loadResources=function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:ge;if(!this.options.resources){if(this.language&&this.language.toLowerCase()==="cimode"){return n()}var r=[];var i=function e(n){if(!n){return}var i=t.services.languageUtils.toResolveHierarchy(n);i.forEach(function(e){if(r.indexOf(e)<0){r.push(e)}})};if(!this.language){var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.forEach(function(e){return i(e)})}else{i(this.language)}if(this.options.preload){this.options.preload.forEach(function(e){return i(e)})}this.services.cacheConnector.load(r,this.options.ns,function(){t.services.backendConnector.load(r,t.options.ns,n)})}else{n(null)}};t.prototype.reloadResources=function e(t,n){if(!t){t=this.languages}if(!n){n=this.options.ns}this.services.backendConnector.reload(t,n)};t.prototype.use=function e(t){if(t.type==="backend"){this.modules.backend=t}if(t.type==="cache"){this.modules.cache=t}if(t.type==="logger"||t.log&&t.warn&&t.error){this.modules.logger=t}if(t.type==="languageDetector"){this.modules.languageDetector=t}if(t.type==="postProcessor"){O.addPostProcessor(t)}if(t.type==="3rdParty"){this.modules.external.push(t)}return this};t.prototype.changeLanguage=function e(t,n){var r=this;var i=function e(t,i){r.translator.changeLanguage(i);if(i){r.emit("languageChanged",i);r.logger.log("languageChanged",i)}if(n){n(t,function(){return r.t.apply(r,arguments)})}};var a=function e(t){if(t){r.language=t;r.languages=r.services.languageUtils.toResolveHierarchy(t);if(!r.translator.language){r.translator.changeLanguage(t)}if(r.services.languageDetector){r.services.languageDetector.cacheUserLanguage(t)}}r.loadResources(function(e){i(e,t)})};if(!t&&this.services.languageDetector&&!this.services.languageDetector.async){a(this.services.languageDetector.detect())}else if(!t&&this.services.languageDetector&&this.services.languageDetector.async){this.services.languageDetector.detect(a)}else{a(t)}};t.prototype.getFixedT=function e(t,n){var r=this;var i=function e(t,n){for(var i=arguments.length,a=Array(i>2?i-2:0),o=2;o<i;o++){a[o-2]=arguments[o]}var s=fe({},n);if((typeof n==="undefined"?"undefined":ce(n))!=="object"){s=r.options.overloadTranslationOptionHandler([t,n].concat(a))}s.lng=s.lng||e.lng;s.lngs=s.lngs||e.lngs;s.ns=s.ns||e.ns;return r.t(t,s)};if(typeof t==="string"){i.lng=t}else{i.lngs=t}i.ns=n;return i};t.prototype.t=function e(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)};t.prototype.exists=function e(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)};t.prototype.setDefaultNamespace=function e(t){this.options.defaultNS=t};t.prototype.loadNamespaces=function e(t,n){var r=this;if(!this.options.ns){return n&&n()}if(typeof t==="string"){t=[t]}t.forEach(function(e){if(r.options.ns.indexOf(e)<0){r.options.ns.push(e)}});this.loadResources(n)};t.prototype.loadLanguages=function e(t,n){if(typeof t==="string"){t=[t]}var r=this.options.preload||[];var i=t.filter(function(e){return r.indexOf(e)<0});if(!i.length){return n()}this.options.preload=r.concat(i);this.loadResources(n)};t.prototype.dir=function e(t){if(!t){t=this.languages&&this.languages.length>0?this.languages[0]:this.language}if(!t){return"rtl"}var n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"];return n.indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>=0?"rtl":"ltr"};t.prototype.createInstance=function e(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=arguments[1];return new t(n,r)};t.prototype.cloneInstance=function e(){var n=this;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:ge;var a=fe({},this.options,r,{isClone:true});var o=new t(a);var s=["store","services","language"];s.forEach(function(e){o[e]=n[e]});o.translator=new I(o.services,o.options);o.translator.on("*",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++){n[r-1]=arguments[r]}o.emit.apply(o,[e].concat(n))});o.init(a,i);o.translator.options=o.options;return o};return t}(d);var ye=new me;var be=ye.changeLanguage.bind(ye);var _e=ye.cloneInstance.bind(ye);var we=ye.createInstance.bind(ye);var xe=ye.dir.bind(ye);var Te=ye.exists.bind(ye);var Ce=ye.getFixedT.bind(ye);var ke=ye.init.bind(ye);var Se=ye.loadLanguages.bind(ye);var Ee=ye.loadNamespaces.bind(ye);var Pe=ye.loadResources.bind(ye);var Oe=ye.off.bind(ye);var Me=ye.on.bind(ye);var Ae=ye.setDefaultNamespace.bind(ye);var Ne=ye.t.bind(ye);var Re=ye.use.bind(ye);var De=[];var Le=De.forEach;var Ie=De.slice;function Be(e){Le.call(Ie.call(arguments,1),function(t){if(t){for(var n in t){if(e[n]===undefined){e[n]=t[n]}}}});return e}var je={create:function e(t,n,r,i){var a=void 0;if(r){var o=new Date;o.setTime(o.getTime()+r*60*1e3);a="; expires="+o.toGMTString()}else{a=""}i=i?"domain="+i+";":"";document.cookie=t+"="+n+a+";"+i+"path=/"},read:function e(t){var n=t+"=";var r=document.cookie.split(";");for(var i=0;i<r.length;i++){var a=r[i];while(a.charAt(0)===" "){a=a.substring(1,a.length)}if(a.indexOf(n)===0){return a.substring(n.length,a.length)}}return null},remove:function e(t){this.create(t,"",-1)}};var Fe={name:"cookie",lookup:function e(t){var n=void 0;if(t.lookupCookie&&typeof document!=="undefined"){var r=je.read(t.lookupCookie);if(r){n=r}}return n},cacheUserLanguage:function e(t,n){if(n.lookupCookie&&typeof document!=="undefined"){je.create(n.lookupCookie,t,n.cookieMinutes,n.cookieDomain)}}};var He={name:"querystring",lookup:function e(t){var n=void 0;if(typeof window!=="undefined"){var r=window.location.search.substring(1);var i=r.split("&");for(var a=0;a<i.length;a++){var o=i[a].indexOf("=");if(o>0){var s=i[a].substring(0,o);if(s===t.lookupQuerystring){n=i[a].substring(o+1)}}}}return n}};var ze=void 0;try{ze=window!=="undefined"&&window.localStorage!==null;var Ue="i18next.translate.boo";window.localStorage.setItem(Ue,"foo");window.localStorage.removeItem(Ue)}catch(e){ze=false}var Ve={name:"localStorage",lookup:function e(t){var n=void 0;if(t.lookupLocalStorage&&ze){var r=window.localStorage.getItem(t.lookupLocalStorage);if(r){n=r}}return n},cacheUserLanguage:function e(t,n){if(n.lookupLocalStorage&&ze){window.localStorage.setItem(n.lookupLocalStorage,t)}}};var We={name:"navigator",lookup:function e(t){var n=[];if(typeof navigator!=="undefined"){if(navigator.languages){for(var r=0;r<navigator.languages.length;r++){n.push(navigator.languages[r])}}if(navigator.userLanguage){n.push(navigator.userLanguage)}if(navigator.language){n.push(navigator.language)}}return n.length>0?n:undefined}};var qe={name:"htmlTag",lookup:function e(t){var n=void 0;var r=t.htmlTag||(typeof document!=="undefined"?document.documentElement:null);if(r&&typeof r.getAttribute==="function"){n=r.getAttribute("lang")}return n}};var Ye=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();function Ke(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function $e(){return{order:["querystring","cookie","localStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var Ge=function(){function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};Ke(this,e);this.type="languageDetector";this.detectors={};this.init(t,n)}Ye(e,[{key:"init",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};this.services=t;this.options=Be(n,this.options||{},$e());this.i18nOptions=r;this.addDetector(Fe);this.addDetector(He);this.addDetector(Ve);this.addDetector(We);this.addDetector(qe)}},{key:"addDetector",value:function e(t){this.detectors[t.name]=t}},{key:"detect",value:function e(t){var n=this;if(!t){t=this.options.order}var r=[];t.forEach(function(e){if(n.detectors[e]){var t=n.detectors[e].lookup(n.options);if(t&&typeof t==="string"){t=[t]}if(t){r=r.concat(t)}}});var i=void 0;r.forEach(function(e){if(i){return}var t=n.services.languageUtils.formatLanguageCode(e);if(n.services.languageUtils.isWhitelisted(t)){i=t}});return i||this.i18nOptions.fallbackLng[0]}},{key:"cacheUserLanguage",value:function e(t,n){var r=this;if(!n){n=this.options.caches}if(!n){return}if(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1){return}n.forEach(function(e){if(r.detectors[e]){r.detectors[e].cacheUserLanguage(t,r.options)}})}}]);return e}();Ge.type="languageDetector";var Xe={word:{manage:"ÁÆ°ÁêÜÁîªÈù¢",dashboard:"„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ"}};var Ze={};var Je={init:()=>{return new Promise((e,t)=>{ye.use(Ge).init({fallbackLng:"ja",resources:{ja:{translation:Xe},en:{translation:Ze}}},n=>{if(n){t(n);return}e()})})},get:()=>{return ye}};const Qe=ye;function et(e,t){if(t==null){return e}var n=e.length,r=-1,i=t.length;while(++r<i){e[n+r]=t[r]}return e}var tt=et;function nt(e){return e}var rt=nt;function it(e){return function(t){return t[e]}}var at=it;function ot(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var st=ot;var ut;var lt;function ct(){lt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];ut=true;for(var e in{toString:null}){ut=false}}function ft(e,t,n){var r,i=0;if(ut==null){ct()}for(r in e){if(dt(t,e,r,n)===false){break}}if(ut){var a=e.constructor,o=!!a&&e===a.prototype;while(r=lt[i++]){if((r!=="constructor"||!o&&st(e,r))&&e[r]!==Object.prototype[r]){if(dt(t,e,r,n)===false){break}}}}}function dt(e,t,n,r){return e.call(r,t[n],n,t)}var ht=ft;function vt(e,t,n){ht(e,function(r,i){if(st(e,i)){return t.call(n,e[i],i,e)}})}var pt=vt;var gt=/^\[object (.*)\]$/;var mt=Object.prototype.toString;var yt;function bt(e){if(e===null){return"Null"}else if(e===yt){return"Undefined"}else{return gt.exec(mt.call(e))[1]}}var _t=bt;function wt(e,t){return _t(e)===t}var xt=wt;var Tt=Array.isArray||function(e){return xt(e,"Array")};var Ct=Tt;function kt(e,t){var n=-1,r=e.length;while(++n<r){if(Pt(e[n],t)){return true}}return false}function St(e,t){var n=-1,r=t.length;while(++n<r){if(!kt(e,t[n])){return false}}return true}function Et(e,t){var n=true;pt(t,function(t,r){if(!Pt(e[r],t)){return n=false}});return n}function Pt(e,t){if(e&&typeof e==="object"&&t&&typeof t==="object"){if(Ct(e)&&Ct(t)){return St(e,t)}else{return Et(e,t)}}else{return e===t}}var Ot=Pt;function Mt(e,t){if(e==null){return rt}switch(typeof e){case"function":return typeof t!=="undefined"?function(n,r,i){return e.call(t,n,r,i)}:e;case"object":return function(t){return Ot(t,e)};case"string":case"number":return at(e)}}var At=Mt;function Nt(e,t,n){t=At(t,n);var r=[];if(e==null){return r}var i=-1,a=e.length;while(++i<a){var o=t(e[i],i,e);if(o!=null){tt(r,o)}}return r}var Rt=Nt;function Dt(e,t,n){n=n||0;if(e==null){return-1}var r=e.length,i=n<0?r+n:n;while(i<r){if(e[i]===t){return i}i++}return-1}var Lt=Dt;function It(e,t){if(t==null){return e}var n=-1,r=t.length;while(++n<r){if(Lt(e,t[n])===-1){e.push(t[n])}}return e}var Bt=It;function jt(e,t,n){t=At(t,n);var r=[];if(e==null){return r}var i=-1,a=e.length,o;while(++i<a){o=e[i];if(t(o,i,e)){r.push(o)}}return r}var Ft=jt;function Ht(e){return Ft(e,function(e){return e!=null})}var zt=Ht;function Ut(e,t){return Lt(e,t)!==-1}var Vt=Ut;function Wt(e,t){t=t||qt;return Ft(e,function(e,n,r){var i=r.length;while(++n<i){if(t(e,r[n])){return false}}return true})}function qt(e,t){return e===t}var Yt=Wt;function Kt(e,t,n){t=At(t,n);var r=false;if(e==null){return r}var i=-1,a=e.length;while(++i<a){if(t(e[i],i,e)){r=true;break}}return r}var $t=Kt;function Gt(e,t,n){var r=e.length;if(t==null){t=0}else if(t<0){t=Math.max(r+t,0)}else{t=Math.min(t,r)}if(n==null){n=r}else if(n<0){n=Math.max(r+n,0)}else{n=Math.min(n,r)}var i=[];while(t<n){i.push(e[t++])}return i}var Xt=Gt;function Zt(e){var t=Xt(arguments,1),n=Ft(Yt(e),function(e){return!$t(t,function(t){return Vt(t,e)})});return n}var Jt=Zt;function Qt(e,t){if(e===t){return e!==0||1/e===1/t}return e!==e&&t!==t}var en=Qt;function tn(e,t,n){t=At(t,n);var r=true;if(e==null){return r}var i=-1,a=e.length;while(++i<a){if(!t(e[i],i,e)){r=false;break}}return r}var nn=tn;function rn(e,t,n){n=n||en;if(!Ct(e)||!Ct(t)){return n(e,t)}if(e.length!==t.length){return false}return nn(e,an(n),t)}function an(e){return function(t,n){return n in this&&e(t,this[n])}}var on=rn;function sn(e,t,n){t=At(t,n);if(e==null){return-1}var r=-1,i=e.length;while(++r<i){if(t(e[r],r,e)){return r}}return-1}var un=sn;function ln(e,t,n){var r=un(e,t,n);return r>=0?e[r]:void 0}var cn=ln;function fn(e,t,n){t=At(t,n);if(e==null){return-1}var r=e.length;while(--r>=0){if(t(e[r],r,e)){return r}}return-1}var dn=fn;function hn(e,t,n){var r=dn(e,t,n);return r>=0?e[r]:void 0}var vn=hn;function pn(e,t,n){if(n===0){tt(t,e);return t}var r,i=-1,a=e.length;while(++i<a){r=e[i];if(Ct(r)){pn(r,t,n-1)}else{t.push(r)}}return t}function gn(e,t){if(e==null){return[]}t=t==null?-1:t;return pn(e,[],t)}var mn=gn;function yn(e,t,n){if(e==null){return}var r=-1,i=e.length;while(++r<i){if(t.call(n,e[r],r,e)===false){break}}}var bn=yn;function _n(e,t,n){if(t){t=At(t,n)}else{t=rt}var r={};bn(e,function(e){var n=t(e);if(!(n in r)){r[n]=[]}r[n].push(e)});return r}var wn=_n;function xn(e,t,n){var r=[];if(e==null){return r}n=typeof n==="number"?n:0;var i=e.length;var a=n>=0?n:i+n;while(a<i){if(e[a]===t){r.push(a)}a++}return r}var Tn=xn;function Cn(e,t){var n=Jt(Xt(arguments,1),e);if(n.length){Array.prototype.push.apply(e,n)}return e.length}var kn=Cn;function Sn(e){var t=Xt(arguments,1),n=Ft(Yt(e),function(e){return nn(t,function(t){return Vt(t,e)})});return n}var En=Sn;function Pn(e,t,n){if(e==null){return e}var r=Xt(arguments,2);var i=-1,a=e.length,o;while(++i<a){o=e[i];o[t].apply(o,r)}return e}var On=Pn;function Mn(e){return e!=null&&e!==""}function An(e,t){t=t||"";return Ft(e,Mn).join(t)}var Nn=An;function Rn(e){if(e==null||e.length<1){return undefined}return e[e.length-1]}var Dn=Rn;function Ln(e,t,n){if(e==null){return-1}var r=e.length;n=n==null||n>=r?r-1:n;n=n<0?r+n:n;while(n>=0){if(e[n]===t){return n}n--}return-1}var In=Ln;function Bn(e,t,n){t=At(t,n);var r=[];if(e==null){return r}var i=-1,a=e.length;while(++i<a){r[i]=t(e[i],i,e)}return r}var jn=Bn;function Fn(e,t,n){if(e==null||!e.length){return Infinity}else if(e.length&&!t){return Math.max.apply(Math,e)}else{t=At(t,n);var r,i=-Infinity,a,o;var s=-1,u=e.length;while(++s<u){a=e[s];o=t(a,s,e);if(o>i){i=o;r=a}}return r}}var Hn=Fn;function zn(e,t,n){if(e==null||!e.length){return-Infinity}else if(e.length&&!t){return Math.min.apply(Math,e)}else{t=At(t,n);var r,i=Infinity,a,o;var s=-1,u=e.length;while(++s<u){a=e[s];o=t(a,s,e);if(o<i){i=o;r=a}}return r}}var Un=zn;var Vn=-2147483648;var Wn=2147483647;function qn(){return qn.get()}qn.get=Math.random;var Yn=qn;function Kn(e,t){e=e==null?Vn:e;t=t==null?Wn:t;return e+(t-e)*Yn()}var $n=Kn;function Gn(e,t){e=e==null?Vn:~~e;t=t==null?Wn:~~t;return Math.round($n(e-.5,t+.499999999999))}var Xn=Gn;function Zn(e,t){if(t!=null){var n=[];if(t>0&&e&&e.length){t=t>e.length?e.length:t;while(t--){n.push(Jn(e))}}return n}return e&&e.length?Jn(e):void 0}function Jn(e){var t=Xn(0,e.length-1);return e.splice(t,1)[0]}var Qn=Zn;function er(e,t){return jn(e,t)}var tr=er;function nr(e,t,n){if(t==null){t=e;e=0}n=n||1;var r=[],i=countSteps_1(t-e,n),a=e;while(a<=t){r.push(a);a+=n}return r}var rr=nr;function ir(e,t,n){var r=arguments.length>2,i=n;if(e==null||!e.length){if(!r){throw new Error("reduce of empty array with no initial value")}else{return n}}var a=-1,o=e.length;while(++a<o){if(!r){i=e[a];r=true}else{i=t(i,e[a],a,e)}}return i}var ar=ir;function or(e,t,n){var r=arguments.length>2;if(e==null||!e.length){if(r){return n}else{throw new Error("reduce of empty array with no initial value")}}var i=e.length,a=n,o;while(--i>=0){o=e[i];if(!r){a=o;r=true}else{a=t(a,o,i,e)}}return a}var sr=or;function ur(e,t,n){t=At(t,n);var r=[];if(e==null){return r}var i=-1,a=e.length,o;while(++i<a){o=e[i];if(!t(o,i,e)){r.push(o)}}return r}var lr=ur;function cr(e,t){var n=Lt(e,t);if(n!==-1){e.splice(n,1)}}var fr=cr;function dr(e,t){var n=Lt(e,t);while(n!==-1){e.splice(n,1);n=Lt(e,t,n)}}var hr=dr;function vr(e){var t=e.slice();t.reverse();return t}var pr=vr;function gr(e){var t=[],n;if(e==null){return t}var r=-1,i=e.length;while(++r<i){if(!r){t[0]=e[0]}else{n=Xn(0,r);t[r]=t[n];t[n]=e[r]}}return t}var mr=gr;function yr(e,t){if(e==null){return[]}else if(e.length<2){return e}if(t==null){t=br}var n,r,i;n=~~(e.length/2);r=yr(e.slice(0,n),t);i=yr(e.slice(n,e.length),t);return _r(r,i,t)}function br(e,t){return e<t?-1:e>t?1:0}function _r(e,t,n){var r=[];while(e.length&&t.length){if(n(e[0],t[0])<=0){r.push(e.shift())}else{r.push(t.shift())}}if(e.length){r.push.apply(r,e)}if(t.length){r.push.apply(r,t)}return r}var wr=yr;function xr(e,t,n){t=At(t,n);return wr(e,function(e,n){e=t(e);n=t(n);return e<n?-1:e>n?1:0})}var Tr=xr;function Cr(e,t){t=t||2;var n=[];if(e==null){return n}var r=Math.floor(e.length/t),i=e.length%t,a=0,o=e.length,s=0,u;while(a<o){u=r;if(s<i){u++}n.push(e.slice(a,a+u));s++;a+=u}return n}var kr=Cr;function Sr(e,t,n){var r=-1;var i=[];if(!n){while(++r<e){i[r]=t(r,e)}}else{while(++r<e){i[r]=t.call(n,r,e)}}return i}var Er=Sr;function Pr(e){return xt(e,"Function")}var Or=Pr;function Mr(e,t){var n={};if(e==null){return n}var r=-1,i=e.length,a;if(Or(t)){while(++r<i){a=e[r];n[t(a)]=a}}else{while(++r<i){a=e[r];n[a[t]]=a}}return n}var Ar=Mr;function Nr(e){var t=arguments;var n=[];var r=-1,i=arguments.length;while(++r<i){tt(n,t[r])}return Yt(n)}var Rr=Nr;function Dr(e,t){e=Yt(e);t=Yt(t);var n=Ft(e,function(e){return!Vt(t,e)}),r=Ft(t,function(t){return!Vt(e,t)});return n.concat(r)}var Lr=Dr;function Ir(e){return e==null?0:e.length}function Br(e){var t=arguments;var n=e?Hn(jn(arguments,Ir)):0,r=[],i=-1;while(++i<n){r.push(jn(t,function(e){return e==null?undefined:e[i]}))}return r}var jr=Br;var Fr={append:tt,collect:Rt,combine:Bt,compact:zt,contains:Vt,difference:Jt,equals:on,every:nn,filter:Ft,find:cn,findIndex:un,findLast:vn,findLastIndex:dn,flatten:mn,forEach:bn,groupBy:wn,indexOf:Lt,indicesOf:Tn,insert:kn,intersection:En,invoke:On,join:Nn,last:Dn,lastIndexOf:In,map:jn,max:Hn,min:Un,pick:Qn,pluck:tr,range:rr,reduce:ar,reduceRight:sr,reject:lr,remove:fr,removeAll:hr,reverse:pr,shuffle:mr,slice:Xt,some:$t,sort:wr,sortBy:Tr,split:kr,take:Er,toLookup:Ar,union:Rr,unique:Yt,xor:Lr,zip:jr};var Hr=Fr.find;var zr=Fr.forEach;var Ur=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"};var Vr=ui;var Wr=Gr;var qr=Xr;var Yr=Qr;var Kr=si;var $r=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Gr(e,t){var n=[];var r=0;var i=0;var a="";var o=t&&t.delimiter||"/";var s;while((s=$r.exec(e))!=null){var u=s[0];var l=s[1];var c=s.index;a+=e.slice(i,c);i=c+u.length;if(l){a+=l[1];continue}var f=e[i];var d=s[2];var h=s[3];var v=s[4];var p=s[5];var g=s[6];var m=s[7];if(a){n.push(a);a=""}var y=d!=null&&f!=null&&f!==d;var b=g==="+"||g==="*";var _=g==="?"||g==="*";var w=s[2]||o;var x=v||p;n.push({name:h||r++,prefix:d||"",delimiter:w,optional:_,repeat:b,partial:y,asterisk:!!m,pattern:x?ti(x):m?".*":"[^"+ei(w)+"]+?"})}if(i<e.length){a+=e.substr(i)}if(a){n.push(a)}return n}function Xr(e,t){return Qr(Gr(e,t))}function Zr(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Jr(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Qr(e){var t=new Array(e.length);for(var n=0;n<e.length;n++){if(typeof e[n]==="object"){t[n]=new RegExp("^(?:"+e[n].pattern+")$")}}return function(n,r){var i="";var a=n||{};var o=r||{};var s=o.pretty?Zr:encodeURIComponent;for(var u=0;u<e.length;u++){var l=e[u];if(typeof l==="string"){i+=l;continue}var c=a[l.name];var f;if(c==null){if(l.optional){if(l.partial){i+=l.prefix}continue}else{throw new TypeError('Expected "'+l.name+'" to be defined')}}if(Ur(c)){if(!l.repeat){throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(c)+"`")}if(c.length===0){if(l.optional){continue}else{throw new TypeError('Expected "'+l.name+'" to not be empty')}}for(var d=0;d<c.length;d++){f=s(c[d]);if(!t[u].test(f)){throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`")}i+=(d===0?l.prefix:l.delimiter)+f}continue}f=l.asterisk?Jr(c):s(c);if(!t[u].test(f)){throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"')}i+=l.prefix+f}return i}}function ei(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function ti(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function ni(e,t){e.keys=t;return e}function ri(e){return e.sensitive?"":"i"}function ii(e,t){var n=e.source.match(/\((?!\?)/g);if(n){for(var r=0;r<n.length;r++){t.push({name:r,prefix:null,delimiter:null,optional:false,repeat:false,partial:false,asterisk:false,pattern:null})}}return ni(e,t)}function ai(e,t,n){var r=[];for(var i=0;i<e.length;i++){r.push(ui(e[i],t,n).source)}var a=new RegExp("(?:"+r.join("|")+")",ri(n));return ni(a,t)}function oi(e,t,n){return si(Gr(e,n),t,n)}function si(e,t,n){if(!Ur(t)){n=t||n;t=[]}n=n||{};var r=n.strict;var i=n.end!==false;var a="";for(var o=0;o<e.length;o++){var s=e[o];if(typeof s==="string"){a+=ei(s)}else{var u=ei(s.prefix);var l="(?:"+s.pattern+")";t.push(s);if(s.repeat){l+="(?:"+u+l+")*"}if(s.optional){if(!s.partial){l="(?:"+u+"("+l+"))?"}else{l=u+"("+l+")?"}}else{l=u+"("+l+")"}a+=l}}var c=ei(n.delimiter||"/");var f=a.slice(-c.length)===c;if(!r){a=(f?a.slice(0,-c.length):a)+"(?:"+c+"(?=$))?"}if(i){a+="$"}else{a+=r&&f?"":"(?="+c+"|$)"}return ni(new RegExp("^"+a,ri(n)),t)}function ui(e,t,n){if(!Ur(t)){n=t||n;t=[]}n=n||{};if(e instanceof RegExp){return ii(e,t)}if(Ur(e)){return ai(e,t,n)}return oi(e,t,n)}Vr.parse=Wr;Vr.compile=qr;Vr.tokensToFunction=Yr;Vr.tokensToRegExp=Kr;var li=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function ci(e){return e&&e.__esModule?e["default"]:e}function fi(e,t){return t={exports:{}},e(t,t.exports),t.exports}var di=fi(function(e){(function(t){var n=setTimeout;function r(){}function i(e,t){return function(){e.apply(t,arguments)}}function a(e){if(typeof this!=="object"){throw new TypeError("Promises must be constructed via new")}if(typeof e!=="function"){throw new TypeError("not a function")}this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];f(e,this)}function o(e,t){while(e._state===3){e=e._value}if(e._state===0){e._deferreds.push(t);return}e._handled=true;a._immediateFn(function(){var n=e._state===1?t.onFulfilled:t.onRejected;if(n===null){(e._state===1?s:u)(t.promise,e._value);return}var r;try{r=n(e._value)}catch(e){u(t.promise,e);return}s(t.promise,r)})}function s(e,t){try{if(t===e){throw new TypeError("A promise cannot be resolved with itself.")}if(t&&(typeof t==="object"||typeof t==="function")){var n=t.then;if(t instanceof a){e._state=3;e._value=t;l(e);return}else if(typeof n==="function"){f(i(n,t),e);return}}e._state=1;e._value=t;l(e)}catch(t){u(e,t)}}function u(e,t){e._state=2;e._value=t;l(e)}function l(e){if(e._state===2&&e._deferreds.length===0){a._immediateFn(function(){if(!e._handled){a._unhandledRejectionFn(e._value)}})}for(var t=0,n=e._deferreds.length;t<n;t++){o(e,e._deferreds[t])}e._deferreds=null}function c(e,t,n){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.promise=n}function f(e,t){var n=false;try{e(function(e){if(n){return}n=true;s(t,e)},function(e){if(n){return}n=true;u(t,e)})}catch(e){if(n){return}n=true;u(t,e)}}a.prototype["catch"]=function(e){return this.then(null,e)};a.prototype.then=function(e,t){var n=new this.constructor(r);o(this,new c(e,t,n));return n};a.all=function(e){var t=Array.prototype.slice.call(e);return new a(function(e,n){if(t.length===0){return e([])}var r=t.length;function i(a,o){try{if(o&&(typeof o==="object"||typeof o==="function")){var s=o.then;if(typeof s==="function"){s.call(o,function(e){i(a,e)},n);return}}t[a]=o;if(--r===0){e(t)}}catch(e){n(e)}}for(var a=0;a<t.length;a++){i(a,t[a])}})};a.resolve=function(e){if(e&&typeof e==="object"&&e.constructor===a){return e}return new a(function(t){t(e)})};a.reject=function(e){return new a(function(t,n){n(e)})};a.race=function(e){return new a(function(t,n){for(var r=0,i=e.length;r<i;r++){e[r].then(t,n)}})};a._immediateFn=typeof setImmediate==="function"&&function(e){setImmediate(e)}||function(e){n(e,0)};a._unhandledRejectionFn=function e(t){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",t)}};a._setImmediateFn=function e(t){a._immediateFn=t};a._setUnhandledRejectionFn=function e(t){a._unhandledRejectionFn=t};if("object"!=="undefined"&&e.exports){e.exports=a}else if(!t.Promise){t.Promise=a}})(li)});var hi=function(){};{hi=function(e,t,n){var r=arguments;var i=arguments.length;n=new Array(i>2?i-2:0);for(var a=2;a<i;a++){n[a-2]=r[a]}if(t===undefined){throw new Error("`warning(condition, format, ...args)` requires a warning "+"message argument")}if(t.length<10||/^[s\W]*$/.test(t)){throw new Error("The warning format should be able to uniquely identify this "+"warning. Please, use a more descriptive format than: "+t)}if(!e){var o=0;var s="Warning: "+t.replace(/%s/g,function(){return n[o++]});if(typeof console!=="undefined"){console.error(s)}try{throw new Error(s)}catch(e){}}}}var vi=hi;var pi=function(e,t,n,r,i,a,o,s){{if(t===undefined){throw new Error("invariant requires an error message argument")}}if(!e){var u;if(t===undefined){u=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var l=[n,r,i,a,o,s];var c=0;u=new Error(t.replace(/%s/g,function(){return l[c++]}));u.name="Invariant Violation"}u.framesToPop=1;throw u}};var gi=pi;var mi=function e(t){return t.charAt(0)==="/"};var yi=function e(t,n){for(var r=n,i=r+1,a=t.length;i<a;r+=1,i+=1){t[r]=t[i]}t.pop()};var bi=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var r=t&&t.split("/")||[];var i=n&&n.split("/")||[];var a=t&&mi(t);var o=n&&mi(n);var s=a||o;if(t&&mi(t)){i=r}else if(r.length){i.pop();i=i.concat(r)}if(!i.length){return"/"}var u=void 0;if(i.length){var l=i[i.length-1];u=l==="."||l===".."||l===""}else{u=false}var c=0;for(var f=i.length;f>=0;f--){var d=i[f];if(d==="."){yi(i,f)}else if(d===".."){yi(i,f);c++}else if(c){yi(i,f);c--}}if(!s){for(;c--;c){i.unshift("..")}}if(s&&i[0]!==""&&(!i[0]||!mi(i[0]))){i.unshift("")}var h=i.join("/");if(u&&h.substr(-1)!=="/"){h+="/"}return h};var _i=bi;var wi=fi(function(e,t){"use strict";t.__esModule=true;var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var r=function e(t,r){if(t===r){return true}if(t==null||r==null){return false}if(Array.isArray(t)){return Array.isArray(r)&&t.length===r.length&&t.every(function(t,n){return e(t,r[n])})}var i=typeof t==="undefined"?"undefined":n(t);var a=typeof r==="undefined"?"undefined":n(r);if(i!==a){return false}if(i==="object"){var o=t.valueOf();var s=r.valueOf();if(o!==t||s!==r){return e(o,s)}var u=Object.keys(t);var l=Object.keys(r);if(u.length!==l.length){return false}return u.every(function(n){return e(t[n],r[n])})}return false};t.default=r});var xi=ci(wi);var Ti=function e(t){return t.charAt(0)==="/"?t:"/"+t};var Ci=function e(t){return t.charAt(0)==="/"?t.substr(1):t};var ki=function e(t,n){return new RegExp("^"+n+"(\\/|\\?|#|$)","i").test(t)};var Si=function e(t,n){return ki(t,n)?t.substr(n.length):t};var Ei=function e(t){return t.charAt(t.length-1)==="/"?t.slice(0,-1):t};var Pi=function e(t){var n=t||"/";var r="";var i="";var a=n.indexOf("#");if(a!==-1){i=n.substr(a);n=n.substr(0,a)}var o=n.indexOf("?");if(o!==-1){r=n.substr(o);n=n.substr(0,o)}return{pathname:n,search:r==="?"?"":r,hash:i==="#"?"":i}};var Oi=function e(t){var n=t.pathname,r=t.search,i=t.hash;var a=n||"/";if(r&&r!=="?"){a+=r.charAt(0)==="?"?r:"?"+r}if(i&&i!=="#"){a+=i.charAt(0)==="#"?i:"#"+i}return a};var Mi=Object.assign||function(e){var t=arguments;for(var n=1;n<arguments.length;n++){var r=t[n];for(var i in r){if(Object.prototype.hasOwnProperty.call(r,i)){e[i]=r[i]}}}return e};var Ai=function e(t,n,r,i){var a=void 0;if(typeof t==="string"){a=Pi(t);a.state=n}else{a=Mi({},t);if(a.pathname===undefined){a.pathname=""}if(a.search){if(a.search.charAt(0)!=="?"){a.search="?"+a.search}}else{a.search=""}if(a.hash){if(a.hash.charAt(0)!=="#"){a.hash="#"+a.hash}}else{a.hash=""}if(n!==undefined&&a.state===undefined){a.state=n}}try{a.pathname=decodeURI(a.pathname)}catch(e){if(e instanceof URIError){throw new URIError('Pathname "'+a.pathname+'" could not be decoded. '+"This is likely caused by an invalid percent-encoding.")}else{throw e}}if(r){a.key=r}if(i){if(!a.pathname){a.pathname=i.pathname}else if(a.pathname.charAt(0)!=="/"){a.pathname=_i(a.pathname,i.pathname)}}else{if(!a.pathname){a.pathname="/"}}return a};var Ni=function e(t,n){return t.pathname===n.pathname&&t.search===n.search&&t.hash===n.hash&&t.key===n.key&&xi(t.state,n.state)};var Ri=function e(){var t=null;var n=function e(n){vi(t==null,"A history supports only one prompt at a time");t=n;return function(){if(t===n){t=null}}};var r=function e(n,r,i,a){if(t!=null){var o=typeof t==="function"?t(n,r):t;if(typeof o==="string"){if(typeof i==="function"){i(o,a)}else{vi(false,"A history needs a getUserConfirmation function in order to use a prompt message");a(true)}}else{a(o!==false)}}else{a(true)}};var i=[];var a=function e(t){var n=true;var r=function e(){if(n){t.apply(undefined,arguments)}};i.push(r);return function(){n=false;i=i.filter(function(e){return e!==r})}};var o=function e(){var t=arguments;for(var n=arguments.length,r=Array(n),a=0;a<n;a++){r[a]=t[a]}i.forEach(function(e){return e.apply(undefined,r)})};return{setPrompt:n,confirmTransitionTo:r,appendListener:a,notifyListeners:o}};var Di=!!(typeof window!=="undefined"&&window.document&&window.document.createElement);var Li=function e(t,n,r){return t.addEventListener?t.addEventListener(n,r,false):t.attachEvent("on"+n,r)};var Ii=function e(t,n,r){return t.removeEventListener?t.removeEventListener(n,r,false):t.detachEvent("on"+n,r)};var Bi=function e(t,n){return n(window.confirm(t))};var ji=function e(){var t=window.navigator.userAgent;if((t.indexOf("Android 2.")!==-1||t.indexOf("Android 4.0")!==-1)&&t.indexOf("Mobile Safari")!==-1&&t.indexOf("Chrome")===-1&&t.indexOf("Windows Phone")===-1){return false}return window.history&&"pushState"in window.history};var Fi=function e(){return window.navigator.userAgent.indexOf("Trident")===-1};var Hi=function e(){return window.navigator.userAgent.indexOf("Firefox")===-1};var zi=function e(t){return t.state===undefined&&navigator.userAgent.indexOf("CriOS")===-1};var Ui=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var Vi=Object.assign||function(e){var t=arguments;for(var n=1;n<arguments.length;n++){var r=t[n];for(var i in r){if(Object.prototype.hasOwnProperty.call(r,i)){e[i]=r[i]}}}return e};var Wi="popstate";var qi="hashchange";var Yi=function e(){try{return window.history.state||{}}catch(e){return{}}};var Ki=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};gi(Di,"Browser history needs a DOM");var n=window.history;var r=ji();var i=!Fi();var a=t.forceRefresh,o=a===undefined?false:a,s=t.getUserConfirmation,u=s===undefined?Bi:s,l=t.keyLength,c=l===undefined?6:l;var f=t.basename?Ei(Ti(t.basename)):"";var d=function e(t){var n=t||{},r=n.key,i=n.state;var a=window.location,o=a.pathname,s=a.search,u=a.hash;var l=o+s+u;vi(!f||ki(l,f),"You are attempting to use a basename on a page whose URL path does not begin "+'with the basename. Expected path "'+l+'" to begin with "'+f+'".');if(f){l=Si(l,f)}return Ai(l,i,r)};var h=function e(){return Math.random().toString(36).substr(2,c)};var v=Ri();var p=function e(t){Vi(D,t);D.length=n.length;v.notifyListeners(D.location,D.action)};var g=function e(t){if(zi(t)){return}b(d(t.state))};var m=function e(){b(d(Yi()))};var y=false;var b=function e(t){if(y){y=false;p()}else{var n="POP";v.confirmTransitionTo(t,n,u,function(e){if(e){p({action:n,location:t})}else{_(t)}})}};var _=function e(t){var n=D.location;var r=x.indexOf(n.key);if(r===-1){r=0}var i=x.indexOf(t.key);if(i===-1){i=0}var a=r-i;if(a){y=true;S(a)}};var w=d(Yi());var x=[w.key];var T=function e(t){return f+Oi(t)};var C=function e(t,i){vi(!((typeof t==="undefined"?"undefined":Ui(t))==="object"&&t.state!==undefined&&i!==undefined),"You should avoid providing a 2nd state argument to push when the 1st "+"argument is a location-like object that already has state; it is ignored");var a="PUSH";var s=Ai(t,i,h(),D.location);v.confirmTransitionTo(s,a,u,function(e){if(!e){return}var t=T(s);var i=s.key,u=s.state;if(r){n.pushState({key:i,state:u},null,t);if(o){window.location.href=t}else{var l=x.indexOf(D.location.key);var c=x.slice(0,l===-1?0:l+1);c.push(s.key);x=c;p({action:a,location:s})}}else{vi(u===undefined,"Browser history cannot push state in browsers that do not support HTML5 history");window.location.href=t}})};var k=function e(t,i){vi(!((typeof t==="undefined"?"undefined":Ui(t))==="object"&&t.state!==undefined&&i!==undefined),"You should avoid providing a 2nd state argument to replace when the 1st "+"argument is a location-like object that already has state; it is ignored");var a="REPLACE";var s=Ai(t,i,h(),D.location);v.confirmTransitionTo(s,a,u,function(e){if(!e){return}var t=T(s);var i=s.key,u=s.state;if(r){n.replaceState({key:i,state:u},null,t);if(o){window.location.replace(t)}else{var l=x.indexOf(D.location.key);if(l!==-1){x[l]=s.key}p({action:a,location:s})}}else{vi(u===undefined,"Browser history cannot replace state in browsers that do not support HTML5 history");window.location.replace(t)}})};var S=function e(t){n.go(t)};var E=function e(){return S(-1)};var P=function e(){return S(1)};var O=0;var M=function e(t){O+=t;if(O===1){Li(window,Wi,g);if(i){Li(window,qi,m)}}else if(O===0){Ii(window,Wi,g);if(i){Ii(window,qi,m)}}};var A=false;var N=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var n=v.setPrompt(t);if(!A){M(1);A=true}return function(){if(A){A=false;M(-1)}return n()}};var R=function e(t){var n=v.appendListener(t);M(1);return function(){M(-1);n()}};var D={length:n.length,action:"POP",location:w,createHref:T,push:C,replace:k,go:S,goBack:E,goForward:P,block:N,listen:R};return D};var $i=Object.assign||function(e){var t=arguments;for(var n=1;n<arguments.length;n++){var r=t[n];for(var i in r){if(Object.prototype.hasOwnProperty.call(r,i)){e[i]=r[i]}}}return e};var Gi="hashchange";var Xi={hashbang:{encodePath:function e(t){return t.charAt(0)==="!"?t:"!/"+Ci(t)},decodePath:function e(t){return t.charAt(0)==="!"?t.substr(1):t}},noslash:{encodePath:Ci,decodePath:Ti},slash:{encodePath:Ti,decodePath:Ti}};var Zi=function e(){var t=window.location.href;var n=t.indexOf("#");return n===-1?"":t.substring(n+1)};var Ji=function e(t){return window.location.hash=t};var Qi=function e(t){var n=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,n>=0?n:0)+"#"+t)};var ea=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};gi(Di,"Hash history needs a DOM");var n=window.history;var r=Hi();var i=t.getUserConfirmation,a=i===undefined?Bi:i,o=t.hashType,s=o===undefined?"slash":o;var u=t.basename?Ei(Ti(t.basename)):"";var l=Xi[s],c=l.encodePath,f=l.decodePath;var d=function e(){var t=f(Zi());vi(!u||ki(t,u),"You are attempting to use a basename on a page whose URL path does not begin "+'with the basename. Expected path "'+t+'" to begin with "'+u+'".');if(u){t=Si(t,u)}return Ai(t)};var h=Ri();var v=function e(t){$i(L,t);L.length=n.length;h.notifyListeners(L.location,L.action)};var p=false;var g=null;var m=function e(){var t=Zi();var n=c(t);if(t!==n){Qi(n)}else{var r=d();var i=L.location;if(!p&&Ni(i,r)){return}if(g===Oi(r)){return}g=null;y(r)}};var y=function e(t){if(p){p=false;v()}else{var n="POP";h.confirmTransitionTo(t,n,a,function(e){if(e){v({action:n,location:t})}else{b(t)}})}};var b=function e(t){var n=L.location;var r=T.lastIndexOf(Oi(n));if(r===-1){r=0}var i=T.lastIndexOf(Oi(t));if(i===-1){i=0}var a=r-i;if(a){p=true;E(a)}};var _=Zi();var w=c(_);if(_!==w){Qi(w)}var x=d();var T=[Oi(x)];var C=function e(t){return"#"+c(u+Oi(t))};var k=function e(t,n){vi(n===undefined,"Hash history cannot push state; it is ignored");var r="PUSH";var i=Ai(t,undefined,undefined,L.location);h.confirmTransitionTo(i,r,a,function(e){if(!e){return}var t=Oi(i);var n=c(u+t);var a=Zi()!==n;if(a){g=t;Ji(n);var o=T.lastIndexOf(Oi(L.location));var s=T.slice(0,o===-1?0:o+1);s.push(t);T=s;v({action:r,location:i})}else{vi(false,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack");v()}})};var S=function e(t,n){vi(n===undefined,"Hash history cannot replace state; it is ignored");var r="REPLACE";var i=Ai(t,undefined,undefined,L.location);h.confirmTransitionTo(i,r,a,function(e){if(!e){return}var t=Oi(i);var n=c(u+t);var a=Zi()!==n;if(a){g=t;Qi(n)}var o=T.indexOf(Oi(L.location));if(o!==-1){T[o]=t}v({action:r,location:i})})};var E=function e(t){vi(r,"Hash history go(n) causes a full page reload in this browser");n.go(t)};var P=function e(){return E(-1)};var O=function e(){return E(1)};var M=0;var A=function e(t){M+=t;if(M===1){Li(window,Gi,m)}else if(M===0){Ii(window,Gi,m)}};var N=false;var R=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var n=h.setPrompt(t);if(!N){A(1);N=true}return function(){if(N){N=false;A(-1)}return n()}};var D=function e(t){var n=h.appendListener(t);A(1);return function(){A(-1);n()}};var L={length:n.length,action:"POP",location:x,createHref:C,push:k,replace:S,go:E,goBack:P,goForward:O,block:R,listen:D};return L};var ta=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var na=Object.assign||function(e){var t=arguments;for(var n=1;n<arguments.length;n++){var r=t[n];for(var i in r){if(Object.prototype.hasOwnProperty.call(r,i)){e[i]=r[i]}}}return e};var ra=function e(t,n,r){return Math.min(Math.max(t,n),r)};var ia=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=t.getUserConfirmation,r=t.initialEntries,i=r===undefined?["/"]:r,a=t.initialIndex,o=a===undefined?0:a,s=t.keyLength,u=s===undefined?6:s;var l=Ri();var c=function e(t){na(T,t);T.length=T.entries.length;l.notifyListeners(T.location,T.action)};var f=function e(){return Math.random().toString(36).substr(2,u)};var d=ra(o,0,i.length-1);var h=i.map(function(e){return typeof e==="string"?Ai(e,undefined,f()):Ai(e,undefined,e.key||f())});var v=Oi;var p=function e(t,r){vi(!((typeof t==="undefined"?"undefined":ta(t))==="object"&&t.state!==undefined&&r!==undefined),"You should avoid providing a 2nd state argument to push when the 1st "+"argument is a location-like object that already has state; it is ignored");var i="PUSH";var a=Ai(t,r,f(),T.location);l.confirmTransitionTo(a,i,n,function(e){if(!e){return}var t=T.index;var n=t+1;var r=T.entries.slice(0);if(r.length>n){r.splice(n,r.length-n,a)}else{r.push(a)}c({action:i,location:a,index:n,entries:r})})};var g=function e(t,r){vi(!((typeof t==="undefined"?"undefined":ta(t))==="object"&&t.state!==undefined&&r!==undefined),"You should avoid providing a 2nd state argument to replace when the 1st "+"argument is a location-like object that already has state; it is ignored");var i="REPLACE";var a=Ai(t,r,f(),T.location);l.confirmTransitionTo(a,i,n,function(e){if(!e){return}T.entries[T.index]=a;c({action:i,location:a})})};var m=function e(t){var r=ra(T.index+t,0,T.entries.length-1);var i="POP";var a=T.entries[r];l.confirmTransitionTo(a,i,n,function(e){if(e){c({action:i,location:a,index:r})}else{c()}})};var y=function e(){return m(-1)};var b=function e(){return m(1)};var _=function e(t){var n=T.index+t;return n>=0&&n<T.entries.length};var w=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return l.setPrompt(t)};var x=function e(t){return l.appendListener(t)};var T={length:h.length,action:"POP",location:h[d],index:d,entries:h,createHref:v,push:p,replace:g,go:m,goBack:y,goForward:b,canGo:_,block:w,listen:x};return T};var aa={BROWSER:"BROWSER",MEMORY:"MEMORY",HASH:"HASH"};var oa=function e(t){if(t===void 0){t=aa.BROWSER}switch(t){case aa.BROWSER:this._history=Ki();break;case aa.MEMORY:this._history=ia();break;case aa.HASH:this._history=ea();break;default:break}this._routes=[];this._unlistener=null;this._onBefore=null;this._onBeforeOnce=null;this._onAfter=null;this._onAfterOnce=null};oa.prototype.start=function e(t){var n=this;if(t===void 0){t=true}this._unlistener=this._history.listen(function(e,t){n._change(e,t)});if(t){this._change(this.getCurrentLocation(),this.getCurrentAction())}};oa.prototype.stop=function e(){if(!this._unlistener){return}this._unlistener();this._unlistener=null};oa.prototype.on=function e(t,n,r,i){var a=[];var o=Vr(t,a);this._routes.push({pattern:t,regexp:o,keys:a,onEnter:n,onBefore:r,onAfter:i});return this};oa.prototype.onBefore=function e(t){this._onBefore=t;return this};oa.prototype.onBeforeOnce=function e(t){this._onBeforeOnce=t;return this};oa.prototype.onAfter=function e(t){this._onAfter=t;return this};oa.prototype.onAfterOnce=function e(t){this._onAfterOnce=t;return this};oa.prototype.navigateTo=function e(t,n){var r=this;if(n===void 0){n=false}return di.resolve().then(function(){if(!n&&r.getCurrentLocation().pathname===t){console.warn("same path is passed.");return}r._history.push(t)})};oa.prototype.replace=function e(t){var n=this;return di.resolve().then(function(){if(n.getCurrentLocation().pathname===t){console.warn("same path is passed.");return}n._history.replace(t)})};oa.prototype.getCurrentLocation=function e(){return this._history.location};oa.prototype.getCurrentAction=function e(){return this._history.action};oa.prototype.createHref=function e(t){return this._history.createHref({pathname:t})};oa.prototype._change=function e(t){var n=this;var r=Hr(this._routes,function(e){return!!e.regexp.exec(t.pathname)});if(!r){return}var i=this._parseLocation(t,r);var a=false;var o=function(e){a=true;n.replace(e)};di.resolve().then(function(){if(!n._onBeforeOnce){return di.resolve()}var e=n._onBeforeOnce;n._onBeforeOnce=null;return e(i)}).then(function(){if(!n._onBefore){return di.resolve()}return n._onBefore(i)}).then(function(){if(!r.onBefore){return di.resolve()}return r.onBefore(i,o)}).then(function(){if(a||!r.onEnter){return di.resolve()}return r.onEnter(i)}).then(function(){if(a||!r.onAfter){return di.resolve()}return r.onAfter(i)}).then(function(){if(a||!n._onAfter){return di.resolve()}return n._onAfter(i)}).then(function(){if(a||!n._onAfterOnce){return di.resolve()}var e=n._onAfterOnce;n._onAfterOnce=null;return e(i)}).catch(function(e){console.error(e.message||"couldn't route. check the onBefore and onAfter functions.")})};oa.prototype._parseLocation=function e(t,n){var r={};var i=n.regexp.exec(t.pathname).slice(1);zr(n.keys,function(e,t){r[e.name]=i[t]});var a={};zr(t.search.slice(1).split("&"),function(e){if(!e){return}var t=e.split("=");a[t[0]]=t[1]});var o=t.hash.slice(1);return{params:r,queries:a,hash:o,pathname:t.pathname}};oa.BROWSER=aa.BROWSER;oa.MEMORY=aa.MEMORY;oa.HASH=aa.HASH;i.tag2("viron-icon-exclamation",'<svg viewbox="-8007 1982 2 8"> <g transform="translate(-8379 1794.5)"> <rect width="5" height="2" rx="0.4" transform="translate(372 192.5) rotate(-90)"></rect> <rect width="2" height="2" rx="0.4" transform="translate(372 195.5) rotate(-90)"></rect> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconExclamation {opts.class}"',function(e){});var sa=function(){const e=()=>{const e=JSON.stringify(this.opts.data,undefined,4);let t=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");t=t.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,e=>{let t="number";if(/^"/.test(e)){if(/:$/.test(e)){t="key"}else{t="string"}}else if(/true|false/.test(e)){t="boolean"}else if(/null/.test(e)){t="null"}return'<span class="Prettyprint__'+t+'">'+e+"</span>"});this.refs.canvas.innerHTML=t};this.on("mount",()=>{e()}).on("updated",()=>{e()})};i.tag2("viron-prettyprint",'<pre class="Prettyprint__canvas" ref="canvas"></pre>',"",'class="Prettyprint"',function(e){this.external(sa)});var ua=function(){this.title=this.opts.title;this.message=this.opts.message;this.detail=null;const e=this.opts.error;if(!!e){this.title=this.title||e.name||e.statusText||"Error";this.message=this.message||e.message}if(!!e&&!!e.response&&!!e.response.obj&&!!e.response.obj.error&&!!e.response.obj.error.data){const t=e.response.obj.error.data;this.title=t.name||this.title;this.message=t.message||this.message}if(!!e){console.error(e)}this.on("mount",()=>{const e=this.opts.error;if(!e){return}if(e instanceof Error){return}Promise.resolve().then(()=>{if(!!e.json){return e.json()}return e.text().then(e=>JSON.parse(e))}).then(e=>{const t=e.error;this.detail=t;!this.opts.title&&!!t.name&&(this.title=t.name);!this.opts.message&&!!t.data&&!!t.data.message&&(this.message=t.data.message);this.update()}).catch(()=>{return Promise.resolve()})})};i.tag2("viron-error",'<div class="Error__icon"> <viron-icon-exclamation></viron-icon-exclamation> </div> <div class="Error__title">{title}</div> <div class="Error__message" if="{!!message}">{message}</div> <viron-prettyprint if="{!!detail}" data="{detail}"></viron-prettyprint>',"",'class="Error"',function(e){this.external(ua)});var la={onBefore:(e,t,n)=>{const r=t.params.endpointKey;const i=e.getter("endpoints.one",r);if(!i){return Promise.resolve().then(()=>{n("/")}).catch(t=>e.action("modals.add","viron-error",{error:t}))}return Promise.resolve().then(()=>e.action("current.update",r)).then(()=>{const t=e.getter("viron.existence");if(t){return Promise.resolve()}return Promise.resolve().then(()=>e.action("oas.setup",r,i.url,i.token)).then(()=>e.action("viron.get",r))}).then(()=>{if(!t.params.page){return Promise.resolve().then(()=>{const t=e.getter("viron.pageIdOf",0);n(`/${r}/${t}`)})}return e.action("page.get",t.params.page)}).catch(t=>{if(t.status!==401){return Promise.resolve().then(()=>e.action("modals.add","viron-error",{error:t})).then(()=>{n("/")})}return Promise.resolve().then(()=>e.action("modals.add","viron-error",{title:"Ë™çË®ºÂàá„Çå",message:"Ë™çË®º„ÅåÂàá„Çå„Åæ„Åó„Åü„ÄÇÂÜçÂ∫¶„É≠„Ç∞„Ç§„É≥„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ"})).then(()=>{n("/")})})},onEnter:(e,t)=>{return e.action("location.update",{name:"components",route:t})}};var ca={onBefore:e=>{return Promise.resolve().then(()=>Promise.all([e.action("current.remove"),e.action("page.remove"),e.action("oas.clear"),e.action("viron.remove")])).catch(t=>e.action("modals.add","viron-error",{error:t}))},onEnter:(e,t)=>{return e.action("location.update",{name:"endpoints",route:t})}};var fa={onBefore:(e,t,n)=>{const r=JSON.parse(decodeURIComponent(t.queries.endpoint));const i=r.url;if(!!e.getter("endpoints.oneByURL",i)){return Promise.resolve().then(()=>{n("/");e.action("toasts.add",{message:`Êó¢„Å´„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà(${i})„ÅåÂ≠òÂú®„Åó„Åæ„Åô„ÄÇ`})})}return Promise.resolve().then(()=>e.action("endpoints.mergeOneWithKey",r)).then(()=>e.action("modals.add","viron-error",{title:"„Ç®„É≥„Éâ„Éù„Ç§„É≥„ÉàËøΩÂä†",message:`„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà(${i})„Åå‰∏ÄË¶ß„Å´ËøΩÂä†„Åï„Çå„Åæ„Åó„Åü„ÄÇ`})).then(()=>{n("/")}).catch(t=>{n("/");e.action("modals.add","viron-error",{title:"„Ç®„É≥„Éâ„Éù„Ç§„É≥„ÉàËøΩÂä† Â§±Êïó",message:`„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà(${i})„ÇíËøΩÂä†Âá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ`,error:t})})}};var da={onEnter:(e,t)=>{return e.action("location.update",{name:"notfound",route:t})}};var ha={onBefore:(e,t,n)=>{const r=t.params.endpointKey;const i=t.queries.token;const a=!!i;let o;const s=[];if(a){o=`/${r}`;s.push(e.action("auth.update",r,decodeURIComponent(i)))}else{o="/";s.push(e.action("auth.remove",r));s.push(e.action("modals.add","viron-error",{title:"Ë™çË®ºÂ§±Êïó",message:"OAuthË™çË®º„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇÊ≠£„Åó„ÅÑ„Ç¢„Ç´„Ç¶„É≥„Éà„ÅßÂÜçÂ∫¶„ÅäË©¶„Åó‰∏ã„Åï„ÅÑ„ÄÇË©≥„Åó„ÅÑ„Ç®„É©„ÉºÂéüÂõ†„Å´„Å§„ÅÑ„Å¶„ÅØÁÆ°ÁêÜËÄÖ„Å´Âïè„ÅÑÂêà„Çè„Åõ„Å¶‰∏ã„Åï„ÅÑ„ÄÇ"}))}return Promise.all(s).then(()=>{n(o)}).catch(t=>e.action("modals.add","viron-error",{error:t}))}};let va;var pa={init:e=>{return Promise.resolve().then(()=>{const t=new oa(oa.HASH);t.onBefore(()=>Promise.all([e.action("application.startNavigation")])).on("/",t=>ca.onEnter(e,t),(t,n)=>ca.onBefore(e,t,n)).on("/oauthredirect/:endpointKey",()=>Promise.resolve(),(t,n)=>ha.onBefore(e,t,n)).on("/endpointimport",()=>Promise.resolve(),(t,n)=>fa.onBefore(e,t,n)).on("/:endpointKey/:page?",t=>la.onEnter(e,t),(t,n)=>la.onBefore(e,t,n)).on("*",t=>da.onEnter(e,t)).onAfter(()=>Promise.all([e.action("application.endNavigation")])).onAfterOnce(()=>e.action("application.launch"));return t}).then(e=>{e.start();va=e;return e})},getInstance:()=>{return va}};const ga="ontouchstart"in document;const ma=10;const ya="hold";var ba={init:()=>{return Promise.resolve().then(()=>{i.settings.autoUpdate=false;i.mixin({init:function(){this.i18n=Je.get()},listen:function(...e){const t=this.riotx.get();this.riotxChange(t,...e)},external:function(e){const t=this;e.apply(t)},close:function(){if(this.opts.isModal){this.opts.modalCloser()}if(this.opts.isMediapreview){this.opts.mediapreviewCloser()}if(this.opts.isDrawer){this.opts.drawerCloser()}if(this.opts.isPopover){this.opts.popoverCloser()}},closeAllFloats:function(){const e=this.riotx.get();e.action("popovers.removeAll")},getRouter:()=>{return pa.getInstance()},getClickHandler:function(e){if(ga){return false}let t=this;while(e.indexOf("parent.")===0){e=e.replace("parent.","");t=t.parent}return t[e]},getTouchStartHandler:function(){if(!ga){return false}return e=>{const t=e.touches[0].pageX;const n=e.touches[0].pageY;e.currentTarget.setAttribute("touch_start_x",t);e.currentTarget.setAttribute("touch_start_y",n);e.currentTarget.classList.add(ya)}},getTouchMoveHandler:function(){if(!ga){return false}return e=>{const t=e.currentTarget.classList.contains(ya);if(!t){return}const n=e.currentTarget.getAttribute("touch_start_x");const r=e.currentTarget.getAttribute("touch_start_y");const i=e.touches[0].pageX;const a=e.touches[0].pageY;const o=i-n;const s=a-r;const u=Math.sqrt(Math.pow(o,2)+Math.pow(s,2));if(u>=ma){e.currentTarget.classList.remove(ya)}}},getTouchEndHandler:function(e){if(!ga){return false}let t=this;while(e.indexOf("parent.")===0){e=e.replace("parent.","");t=t.parent}const n=t[e];return e=>{const t=e.currentTarget.classList.contains(ya);if(t){n(e)}e.currentTarget.classList.remove(ya)}}})})}};var _a=n(function(t){(function(e){var n=setTimeout;function r(){}function i(e,t){return function(){e.apply(t,arguments)}}function a(e){if(!(this instanceof a)){throw new TypeError("Promises must be constructed via new")}if(typeof e!=="function"){throw new TypeError("not a function")}this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];f(e,this)}function o(e,t){while(e._state===3){e=e._value}if(e._state===0){e._deferreds.push(t);return}e._handled=true;a._immediateFn(function(){var n=e._state===1?t.onFulfilled:t.onRejected;if(n===null){(e._state===1?s:u)(t.promise,e._value);return}var r;try{r=n(e._value)}catch(e){u(t.promise,e);return}s(t.promise,r)})}function s(e,t){try{if(t===e){throw new TypeError("A promise cannot be resolved with itself.")}if(t&&(typeof t==="object"||typeof t==="function")){var n=t.then;if(t instanceof a){e._state=3;e._value=t;l(e);return}else if(typeof n==="function"){f(i(n,t),e);return}}e._state=1;e._value=t;l(e)}catch(t){u(e,t)}}function u(e,t){e._state=2;e._value=t;l(e)}function l(e){if(e._state===2&&e._deferreds.length===0){a._immediateFn(function(){if(!e._handled){a._unhandledRejectionFn(e._value)}})}for(var t=0,n=e._deferreds.length;t<n;t++){o(e,e._deferreds[t])}e._deferreds=null}function c(e,t,n){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.promise=n}function f(e,t){var n=false;try{e(function(e){if(n){return}n=true;s(t,e)},function(e){if(n){return}n=true;u(t,e)})}catch(e){if(n){return}n=true;u(t,e)}}a.prototype["catch"]=function(e){return this.then(null,e)};a.prototype.then=function(e,t){var n=new this.constructor(r);o(this,new c(e,t,n));return n};a.all=function(e){return new a(function(t,n){if(!e||typeof e.length==="undefined"){throw new TypeError("Promise.all accepts an array")}var r=Array.prototype.slice.call(e);if(r.length===0){return t([])}var i=r.length;function a(e,o){try{if(o&&(typeof o==="object"||typeof o==="function")){var s=o.then;if(typeof s==="function"){s.call(o,function(t){a(e,t)},n);return}}r[e]=o;if(--i===0){t(r)}}catch(e){n(e)}}for(var o=0;o<r.length;o++){a(o,r[o])}})};a.resolve=function(e){if(e&&typeof e==="object"&&e.constructor===a){return e}return new a(function(t){t(e)})};a.reject=function(e){return new a(function(t,n){n(e)})};a.race=function(e){return new a(function(t,n){for(var r=0,i=e.length;r<i;r++){e[r].then(t,n)}})};a._immediateFn=typeof setImmediate==="function"&&function(e){setImmediate(e)}||function(e){n(e,0)};a._unhandledRejectionFn=function e(t){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",t)}};a._setImmediateFn=function e(t){a._immediateFn=t};a._setUnhandledRejectionFn=function e(t){a._unhandledRejectionFn=t};if("object"!=="undefined"&&t.exports){t.exports=a}else if(!e.Promise){e.Promise=a}})(e)});(function(e){"use strict";if(e.fetch){return}var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{new Blob;return true}catch(e){return false}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer){var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];var r=function(e){return e&&DataView.prototype.isPrototypeOf(e)};var i=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1}}function a(e){if(typeof e!=="string"){e=String(e)}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e)){throw new TypeError("Invalid character in header field name")}return e.toLowerCase()}function o(e){if(typeof e!=="string"){e=String(e)}return e}function s(e){var n={next:function(){var t=e.shift();return{done:t===undefined,value:t}}};if(t.iterable){n[Symbol.iterator]=function(){return n}}return n}function u(e){this.map={};if(e instanceof u){e.forEach(function(e,t){this.append(t,e)},this)}else if(Array.isArray(e)){e.forEach(function(e){this.append(e[0],e[1])},this)}else if(e){Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}}u.prototype.append=function(e,t){e=a(e);t=o(t);var n=this.map[e];this.map[e]=n?n+","+t:t};u.prototype["delete"]=function(e){delete this.map[a(e)]};u.prototype.get=function(e){e=a(e);return this.has(e)?this.map[e]:null};u.prototype.has=function(e){return this.map.hasOwnProperty(a(e))};u.prototype.set=function(e,t){this.map[a(e)]=o(t)};u.prototype.forEach=function(e,t){for(var n in this.map){if(this.map.hasOwnProperty(n)){e.call(t,this.map[n],n,this)}}};u.prototype.keys=function(){var e=[];this.forEach(function(t,n){e.push(n)});return s(e)};u.prototype.values=function(){var e=[];this.forEach(function(t){e.push(t)});return s(e)};u.prototype.entries=function(){var e=[];this.forEach(function(t,n){e.push([n,t])});return s(e)};if(t.iterable){u.prototype[Symbol.iterator]=u.prototype.entries}function l(e){if(e.bodyUsed){return Promise.reject(new TypeError("Already read"))}e.bodyUsed=true}function c(e){return new Promise(function(t,n){e.onload=function(){t(e.result)};e.onerror=function(){n(e.error)}})}function f(e){var t=new FileReader;var n=c(t);t.readAsArrayBuffer(e);return n}function d(e){var t=new FileReader;var n=c(t);t.readAsText(e);return n}function h(e){var t=new Uint8Array(e);var n=new Array(t.length);for(var r=0;r<t.length;r++){n[r]=String.fromCharCode(t[r])}return n.join("")}function v(e){if(e.slice){return e.slice(0)}else{var t=new Uint8Array(e.byteLength);t.set(new Uint8Array(e));return t.buffer}}function p(){this.bodyUsed=false;this._initBody=function(e){this._bodyInit=e;if(!e){this._bodyText=""}else if(typeof e==="string"){this._bodyText=e}else if(t.blob&&Blob.prototype.isPrototypeOf(e)){this._bodyBlob=e}else if(t.formData&&FormData.prototype.isPrototypeOf(e)){this._bodyFormData=e}else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)){this._bodyText=e.toString()}else if(t.arrayBuffer&&t.blob&&r(e)){this._bodyArrayBuffer=v(e.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer])}else if(t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||i(e))){this._bodyArrayBuffer=v(e)}else{throw new Error("unsupported BodyInit type")}if(!this.headers.get("content-type")){if(typeof e==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)){this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}}};if(t.blob){this.blob=function(){var e=l(this);if(e){return e}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(new Blob([this._bodyArrayBuffer]))}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){if(this._bodyArrayBuffer){return l(this)||Promise.resolve(this._bodyArrayBuffer)}else{return this.blob().then(f)}}}this.text=function(){var e=l(this);if(e){return e}if(this._bodyBlob){return d(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(h(this._bodyArrayBuffer))}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}};if(t.formData){this.formData=function(){return this.text().then(b)}}this.json=function(){return this.text().then(JSON.parse)};return this}var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(e){var t=e.toUpperCase();return g.indexOf(t)>-1?t:e}function y(e,t){t=t||{};var n=t.body;if(e instanceof y){if(e.bodyUsed){throw new TypeError("Already read")}this.url=e.url;this.credentials=e.credentials;if(!t.headers){this.headers=new u(e.headers)}this.method=e.method;this.mode=e.mode;if(!n&&e._bodyInit!=null){n=e._bodyInit;e.bodyUsed=true}}else{this.url=String(e)}this.credentials=t.credentials||this.credentials||"omit";if(t.headers||!this.headers){this.headers=new u(t.headers)}this.method=m(t.method||this.method||"GET");this.mode=t.mode||this.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&n){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(n)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})};function b(e){var t=new FormData;e.trim().split("&").forEach(function(e){if(e){var n=e.split("=");var r=n.shift().replace(/\+/g," ");var i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}});return t}function _(e){var t=new u;e.split(/\r?\n/).forEach(function(e){var n=e.split(":");var r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}});return t}p.call(y.prototype);function w(e,t){if(!t){t={}}this.type="default";this.status="status"in t?t.status:200;this.ok=this.status>=200&&this.status<300;this.statusText="statusText"in t?t.statusText:"OK";this.headers=new u(t.headers);this.url=t.url||"";this._initBody(e)}p.call(w.prototype);w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})};w.error=function(){var e=new w(null,{status:0,statusText:""});e.type="error";return e};var x=[301,302,303,307,308];w.redirect=function(e,t){if(x.indexOf(t)===-1){throw new RangeError("Invalid status code")}return new w(null,{status:t,headers:{location:e}})};e.Headers=u;e.Request=y;e.Response=w;e.fetch=function(e,n){return new Promise(function(r,i){var a=new y(e,n);var o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:_(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;r(new w(t,e))};o.onerror=function(){i(new TypeError("Network request failed"))};o.ontimeout=function(){i(new TypeError("Network request failed"))};o.open(a.method,a.url,true);if(a.credentials==="include"){o.withCredentials=true}if("responseType"in o&&t.blob){o.responseType="blob"}a.headers.forEach(function(e,t){o.setRequestHeader(t,e)});o.send(typeof a._bodyInit==="undefined"?null:a._bodyInit)})};e.fetch.polyfill=true})(typeof self!=="undefined"?self:window);window.Promise=_a;var wa="0.9.4";function xa(e,t,n){if(e==null){return}var r=-1,i=e.length;while(++r<i){if(t.call(n,e[r],r,e)===false){break}}}var Ta=xa;function Ca(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var ka=Ca;var Sa;var Ea;function Pa(){Ea=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];Sa=true;for(var e in{toString:null}){Sa=false}}function Oa(e,t,n){var r,i=0;if(Sa==null){Pa()}for(r in e){if(Ma(t,e,r,n)===false){break}}if(Sa){var a=e.constructor,o=!!a&&e===a.prototype;while(r=Ea[i++]){if((r!=="constructor"||!o&&ka(e,r))&&e[r]!==Object.prototype[r]){if(Ma(t,e,r,n)===false){break}}}}}function Ma(e,t,n,r){return e.call(r,t[n],n,t)}var Aa=Oa;function Na(e,t,n){Aa(e,function(r,i){if(ka(e,i)){return t.call(n,e[i],i,e)}})}var Ra=Na;var Da=Object.keys||function(e){var t=[];Ra(e,function(e,n){t.push(n)});return t};var La=Da;
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Ia=Object.getOwnPropertySymbols;var Ba=Object.prototype.hasOwnProperty;var ja=Object.prototype.propertyIsEnumerable;function Fa(e){if(e===null||e===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(e)}function Ha(){try{if(!Object.assign){return false}var e=new String("abc");e[5]="de";if(Object.getOwnPropertyNames(e)[0]==="5"){return false}var t={};for(var n=0;n<10;n++){t["_"+String.fromCharCode(n)]=n}var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if(r.join("")!=="0123456789"){return false}var i={};"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e});if(Object.keys(Object.assign({},i)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(e){return false}}var za=Ha()?Object.assign:function(e,t){var n=arguments;var r;var i=Fa(e);var a;for(var o=1;o<arguments.length;o++){r=Object(n[o]);for(var s in r){if(Ba.call(r,s)){i[s]=r[s]}}if(Ia){a=Ia(r);for(var u=0;u<a.length;u++){if(ja.call(r,a[u])){i[a[u]]=r[a[u]]}}}}return i};var Ua=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function Va(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Wa=Va(function(e){(function(t){var n=setTimeout;function r(){}function i(e,t){return function(){e.apply(t,arguments)}}function a(e){if(typeof this!=="object"){throw new TypeError("Promises must be constructed via new")}if(typeof e!=="function"){throw new TypeError("not a function")}this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];f(e,this)}function o(e,t){while(e._state===3){e=e._value}if(e._state===0){e._deferreds.push(t);return}e._handled=true;a._immediateFn(function(){var n=e._state===1?t.onFulfilled:t.onRejected;if(n===null){(e._state===1?s:u)(t.promise,e._value);return}var r;try{r=n(e._value)}catch(e){u(t.promise,e);return}s(t.promise,r)})}function s(e,t){try{if(t===e){throw new TypeError("A promise cannot be resolved with itself.")}if(t&&(typeof t==="object"||typeof t==="function")){var n=t.then;if(t instanceof a){e._state=3;e._value=t;l(e);return}else if(typeof n==="function"){f(i(n,t),e);return}}e._state=1;e._value=t;l(e)}catch(t){u(e,t)}}function u(e,t){e._state=2;e._value=t;l(e)}function l(e){if(e._state===2&&e._deferreds.length===0){a._immediateFn(function(){if(!e._handled){a._unhandledRejectionFn(e._value)}})}for(var t=0,n=e._deferreds.length;t<n;t++){o(e,e._deferreds[t])}e._deferreds=null}function c(e,t,n){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.promise=n}function f(e,t){var n=false;try{e(function(e){if(n){return}n=true;s(t,e)},function(e){if(n){return}n=true;u(t,e)})}catch(e){if(n){return}n=true;u(t,e)}}a.prototype["catch"]=function(e){return this.then(null,e)};a.prototype.then=function(e,t){var n=new this.constructor(r);o(this,new c(e,t,n));return n};a.all=function(e){var t=Array.prototype.slice.call(e);return new a(function(e,n){if(t.length===0){return e([])}var r=t.length;function i(a,o){try{if(o&&(typeof o==="object"||typeof o==="function")){var s=o.then;if(typeof s==="function"){s.call(o,function(e){i(a,e)},n);return}}t[a]=o;if(--r===0){e(t)}}catch(e){n(e)}}for(var a=0;a<t.length;a++){i(a,t[a])}})};a.resolve=function(e){if(e&&typeof e==="object"&&e.constructor===a){return e}return new a(function(t){t(e)})};a.reject=function(e){return new a(function(t,n){n(e)})};a.race=function(e){return new a(function(t,n){for(var r=0,i=e.length;r<i;r++){e[r].then(t,n)}})};a._immediateFn=typeof setImmediate==="function"&&function(e){setImmediate(e)}||function(e){n(e,0)};a._unhandledRejectionFn=function e(t){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",t)}};a._setImmediateFn=function e(t){a._immediateFn=t};a._setUnhandledRejectionFn=function e(t){a._unhandledRejectionFn=t};if("object"!=="undefined"&&e.exports){e.exports=a}else if(!t.Promise){t.Promise=a}})(Ua)});var qa={debug:false,default:"@",changeBindName:"riotxChange"};var Ya=function(){var e=[],t=arguments.length;while(t--){e[t]=arguments[t]}if(!qa.debug){return}e.unshift("[riotx]");try{console.log.apply(console,e)}catch(t){console.log(e)}};var Ka=function e(t){this.name=t.name;if(!this.name){this.name=qa.default;Ya("Default store name. name="+this.name)}this.state=za({},t.state);this._actions=za({},t.actions);this._mutations=za({},t.mutations);this._getters=za({},t.getters);i.observable(this)};Ka.prototype.getter=function e(t){var n=[],r=arguments.length-1;while(r-- >0){n[r]=arguments[r+1]}Ya("[getter]",t,n);var i={state:za({},this.state)};return this._getters[t].apply(null,[i].concat(n))};Ka.prototype.commit=function e(t){var n=this;var r=[],i=arguments.length-1;while(i-- >0){r[i]=arguments[i+1]}var a=za({},this.state);Ya.apply(void 0,["[commit(before)]",t,a].concat(r));var o={getter:function(e){var t=[],r=arguments.length-1;while(r-- >0){t[r]=arguments[r+1]}return n.getter.apply(n,[e].concat(t))},state:a};var s=this._mutations[t].apply(null,[o].concat(r));Ya.apply(void 0,["[commit(after)]",t,a].concat(r));za(this.state,a);Ta(s,function(e){n.trigger(e,n.state,n)})};Ka.prototype.action=function e(t){var n=this;var r=[],i=arguments.length-1;while(i-- >0){r[i]=arguments[i+1]}Ya("[action]",t,r);var a={getter:function(e){var t=[],r=arguments.length-1;while(r-- >0){t[r]=arguments[r+1]}return n.getter.apply(n,[e].concat(t))},state:za({},this.state),commit:function(){var e=[],t=arguments.length;while(t--){e[t]=arguments[t]}(r=n).commit.apply(r,e);var r}};return Wa.resolve().then(function(){return n._actions[t].apply(null,[a].concat(r))})};Ka.prototype.change=function e(){var t=[],n=arguments.length;while(n--){t[n]=arguments[n]}(r=this).on.apply(r,t);var r};var $a=function e(){this.version=wa||"";this.Store=Ka;this.stores={};var t=function(e,t,n){var r=[],i=arguments.length-3;while(i-- >0){r[i]=arguments[i+3]}this._riotx_change_handlers.push({store:e,evtName:t,handler:n});r.unshift(n);r.unshift(t);e.change.apply(e,r)};i.mixin({init:function(){var e=this;this.on("unmount",function(){e.off("*");Ta(e._riotx_change_handlers,function(e){e.store.off(e.evtName,e.handler)});delete e.riotx;delete e._riotx_change_handlers;delete e[qa.changeBindName]});if(qa.debug){this.on("*",function(t){Ya(t,e)})}this._riotx_change_handlers=[];this[qa.changeBindName]=t},riotx:this})};$a.prototype.add=function e(t){if(this.stores[t.name]){throw new Error("The store instance named `"+t.name+"` already exists.")}this.stores[t.name]=t;return this};$a.prototype.get=function e(t){if(t===void 0){t=qa.default}return this.stores[t]};$a.prototype.debug=function e(t){qa.debug=!!t;return this};$a.prototype.setChangeBindName=function e(t){qa.changeBindName=t;return this};$a.prototype.reset=function e(){this.stores={};return this};$a.prototype.size=function e(){return La(this.stores).length};var Ga=new $a;
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/"use strict";var Xa=Object.getOwnPropertySymbols;var Za=Object.prototype.hasOwnProperty;var Ja=Object.prototype.propertyIsEnumerable;function Qa(e){if(e===null||e===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(e)}function eo(){try{if(!Object.assign){return false}var e=new String("abc");e[5]="de";if(Object.getOwnPropertyNames(e)[0]==="5"){return false}var t={};for(var n=0;n<10;n++){t["_"+String.fromCharCode(n)]=n}var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if(r.join("")!=="0123456789"){return false}var i={};"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e});if(Object.keys(Object.assign({},i)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(e){return false}}var to=eo()?Object.assign:function(e,t){var n;var r=Qa(e);var i;for(var a=1;a<arguments.length;a++){n=Object(arguments[a]);for(var o in n){if(Za.call(n,o)){r[o]=n[o]}}if(Xa){i=Xa(n);for(var s=0;s<i.length;s++){if(Ja.call(n,i[s])){r[i[s]]=n[i[s]]}}}}return r};function no(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var ro=no;var io;var ao;function oo(){ao=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];io=true;for(var e in{toString:null}){io=false}}function so(e,t,n){var r,i=0;if(io==null){oo()}for(r in e){if(uo(t,e,r,n)===false){break}}if(io){var a=e.constructor,o=!!a&&e===a.prototype;while(r=ao[i++]){if((r!=="constructor"||!o&&ro(e,r))&&e[r]!==Object.prototype[r]){if(uo(t,e,r,n)===false){break}}}}}function uo(e,t,n,r){return e.call(r,t[n],n,t)}var lo=so;function co(e,t,n){lo(e,function(r,i){if(ro(e,i)){return t.call(n,e[i],i,e)}})}var fo=co;var ho=(e,t)=>{const n={};fo(t,(t,r)=>{n[`${e}.${r}`]=t});return n};var vo=ho("application",{launch:e=>{return Promise.resolve().then(()=>{e.commit("application.launch",true)})},startNavigation:e=>{return Promise.resolve().then(()=>{e.commit("application.navigation",true)})},endNavigation:e=>{return Promise.resolve().then(()=>{e.commit("application.navigation",false)})},startDrag:e=>{return Promise.resolve().then(()=>{e.commit("application.drag",true)})},endDrag:e=>{return Promise.resolve().then(()=>{e.commit("application.drag",false)})},toggleMenu:e=>{return Promise.resolve().then(()=>{e.commit("application.menuToggle")})},updateEndpointFilterText:(e,t)=>{return Promise.resolve().then(()=>{e.commit("application.endpointFilterText",t);e.commit("application.endpointTempFilterText",t)})},updateEndpointTempFilterText:(e,t)=>{return Promise.resolve().then(()=>{e.commit("application.endpointTempFilterText",t)})},resetEndpointFilterText:e=>{return Promise.resolve().then(()=>{e.commit("application.endpointFilterText","");e.commit("application.endpointTempFilterText","")})}});function po(e){return Object.prototype.toString.call(e).slice(8,-1)}var go=po;function mo(e,t){return go(e)===t}var yo=mo;function bo(e){return yo(e,"Object")}var _o=bo;const wo=e=>{return JSON.stringify(e)};const xo=e=>{const t=[];const n=Object.keys(e);n.forEach(n=>{const r=e[n];const i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;t.push(i)});return t.join("&")};const To=e=>{const t=new FormData;const n=Object.keys(e);n.forEach(n=>{const r=e[n];if(_o(r)||Array.isArray(r)){t.append(n,JSON.stringify(r))}else if(r!=null){t.append(n,r)}});return t};const Co=(e,t,n)=>{n=to({mode:"cors",redirect:"follow",headers:{"Content-Type":"application/json"},cache:"no-store"},n);if(!!n.body&&(n.method==="POST"||n.method==="PUT")){switch(n.headers["Content-Type"]){case"application/json":n.body=wo(n.body);break;case"application/x-www-form-urlencoded":n.body=xo(n.body);break;case"multipart/form-data":n.body=To(n.body);break;default:break}}const r=`networking_${Date.now()}`;return Promise.resolve().then(()=>e.commit("application.addNetworking",{id:r,url:t,options:n})).then(()=>Promise.race([fetch(t,n),new Promise((e,t)=>{setTimeout(()=>{t(new Error("ÊôÇÈñì„Åå„Åã„Åã„ÇäÈÅé„Åé„Åü„Åü„ÇÅÈÄö‰ø°„Çí‰∏≠Êñ≠„Åó„Åæ„Åó„Åü„ÄÇ"))},1e3*10)})])).then(t=>{e.commit("application.removeNetworking",r,e);return t}).then(e=>{if(!e.ok){return Promise.reject(e)}return Promise.resolve(e)}).catch(t=>{e.commit("application.removeNetworking",r,e);throw t})};var ko=ho("auth",{update:(e,t,n)=>{return Promise.resolve().then(()=>{e.commit("endpoints.updateToken",t,n)})},remove:(e,t)=>{return Promise.resolve().then(()=>{e.commit("endpoints.updateToken",t,null)})},validate:(e,t)=>{const n=e.getter("endpoints.one",t);return Promise.resolve().then(()=>Co(e,n.url,{headers:{Authorization:n.token}})).then(n=>{const r=n.headers.get("Authorization");if(!!r){e.commit("endpoints.updateToken",t,r)}return true}).catch(n=>{if(n.status!==401){throw n}e.commit("endpoints.updateToken",t,null);return false})},getTypes:(e,t)=>{const n=e.getter("endpoints.one",t);const r=`${new URL(n.url).origin}/viron_authtype`;return Promise.resolve().then(()=>Co(e,r)).then(e=>e.json())},signinOAuth:(e,t,n)=>{return Promise.resolve().then(()=>{const r=e.getter("endpoints.one",t);const i=new URL(r.url).origin;const a=encodeURIComponent(`${location.href}oauthredirect/${t}`);const o=`${i}${n.url}?redirect_url=${a}`;location.href=o})},signinEmail:(e,t,n,r,i)=>{const a=e.getter("endpoints.one",t);const o=`${new URL(a.url).origin}${n.url}`;return Promise.resolve().then(()=>Co(e,o,{method:n.method,body:{email:r,password:i}})).then(n=>{const r=n.headers.get("Authorization");e.commit("endpoints.updateToken",t,r)})}});function So(e,t){var n=0;for(var r=e.length-1;r>=0;r--){var i=e[r];if(i==="."){e.splice(r,1)}else if(i===".."){e.splice(r,1);n++}else if(n){e.splice(r,1);n--}}if(t){for(;n--;n){e.unshift("..")}}return e}var Eo=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var Po=function(e){return Eo.exec(e).slice(1)};function Oo(){var e="",t=false;for(var n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:"/";if(typeof r!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!r){continue}e=r+"/"+e;t=r.charAt(0)==="/"}e=So(Ho(e.split("/"),function(e){return!!e}),!t).join("/");return(t?"/":"")+e||"."}function Mo(e){var t=Ao(e),n=zo(e,-1)==="/";e=So(Ho(e.split("/"),function(e){return!!e}),!t).join("/");if(!e&&!t){e="."}if(e&&n){e+="/"}return(t?"/":"")+e}function Ao(e){return e.charAt(0)==="/"}function No(){var e=Array.prototype.slice.call(arguments,0);return Mo(Ho(e,function(e,t){if(typeof e!=="string"){throw new TypeError("Arguments to path.join must be strings")}return e}).join("/"))}function Ro(e,t){e=Oo(e).substr(1);t=Oo(t).substr(1);function n(e){var t=0;for(;t<e.length;t++){if(e[t]!==""){break}}var n=e.length-1;for(;n>=0;n--){if(e[n]!==""){break}}if(t>n){return[]}return e.slice(t,n-t+1)}var r=n(e.split("/"));var i=n(t.split("/"));var a=Math.min(r.length,i.length);var o=a;for(var s=0;s<a;s++){if(r[s]!==i[s]){o=s;break}}var u=[];for(var s=o;s<r.length;s++){u.push("..")}u=u.concat(i.slice(o));return u.join("/")}var Do="/";var Lo=":";function Io(e){var t=Po(e),n=t[0],r=t[1];if(!n&&!r){return"."}if(r){r=r.substr(0,r.length-1)}return n+r}function Bo(e,t){var n=Po(e)[2];if(t&&n.substr(-1*t.length)===t){n=n.substr(0,n.length-t.length)}return n}function jo(e){return Po(e)[3]}var Fo={extname:jo,basename:Bo,dirname:Io,sep:Do,delimiter:Lo,relative:Ro,join:No,isAbsolute:Ao,normalize:Mo,resolve:Oo};function Ho(e,t){if(e.filter){return e.filter(t)}var n=[];for(var r=0;r<e.length;r++){if(t(e[r],r,e)){n.push(e[r])}}return n}var zo="ab".substr(-1)==="b"?function(e,t,n){return e.substr(t,n)}:function(e,t,n){if(t<0){t=e.length+t}return e.substr(t,n)};var Uo=Object.freeze({resolve:Oo,normalize:Mo,isAbsolute:Ao,join:No,relative:Ro,sep:Do,delimiter:Lo,dirname:Io,basename:Bo,extname:jo,default:Fo});var Vo=Uo&&Fo||Uo;"use strict";var Wo=is;var qo=ls;var Yo=Vo.basename;var Ko=/[\x00-\x20"'()*,/:;<=>?@[\\\]{}\x7f]/g;var $o=/%[0-9A-Fa-f]{2}/;var Go=/%([0-9A-Fa-f]{2})/g;var Xo=/[^\x20-\x7e\xa0-\xff]/g;var Zo=/\\([\u0000-\u007f])/g;var Jo=/([\\"])/g;var Qo=/;[\x09\x20]*([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*=[\x09\x20]*("(?:[\x20!\x23-\x5b\x5d-\x7e\x80-\xff]|\\[\x20-\x7e])*"|[!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*/g;var es=/^[\x20-\x7e\x80-\xff]+$/;var ts=/^[!#$%&'*+.0-9A-Z^_`a-z|~-]+$/;var ns=/^([A-Za-z0-9!#$%&+\-^_`{}~]+)'(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}|[A-Za-z]{4,8}|)'((?:%[0-9A-Fa-f]{2}|[A-Za-z0-9!#$&+.^_`|~-])+)$/;var rs=/^([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*(?:$|;)/;function is(e,t){var n=t||{};var r=n.type||"attachment";var i=as(e,n.fallback);return os(new vs(r,i))}function as(e,t){if(e===undefined){return}var n={};if(typeof e!=="string"){throw new TypeError("filename must be a string")}if(t===undefined){t=true}if(typeof t!=="string"&&typeof t!=="boolean"){throw new TypeError("fallback must be a string or boolean")}if(typeof t==="string"&&Xo.test(t)){throw new TypeError("fallback must be ISO-8859-1 string")}var r=Yo(e);var i=es.test(r);var a=typeof t!=="string"?t&&us(r):Yo(t);var o=typeof a==="string"&&a!==r;if(o||!i||$o.test(r)){n["filename*"]=r}if(i||o){n.filename=o?a:r}return n}function os(e){var t=e.parameters;var n=e.type;if(!n||typeof n!=="string"||!ts.test(n)){throw new TypeError("invalid type")}var r=String(n).toLowerCase();if(t&&typeof t==="object"){var i;var a=Object.keys(t).sort();for(var o=0;o<a.length;o++){i=a[o];var s=i.substr(-1)==="*"?hs(t[i]):ds(t[i]);r+="; "+i+"="+s}}return r}function ss(e){var t=ns.exec(e);if(!t){throw new TypeError("invalid extended field value")}var n=t[1].toLowerCase();var r=t[2];var i;var a=r.replace(Go,cs);switch(n){case"iso-8859-1":i=us(a);break;case"utf-8":i=new Buffer(a,"binary").toString("utf8");break;default:throw new TypeError("unsupported charset in extended field")}return i}function us(e){return String(e).replace(Xo,"?")}function ls(e){if(!e||typeof e!=="string"){throw new TypeError("argument string is required")}var t=rs.exec(e);if(!t){throw new TypeError("invalid type format")}var n=t[0].length;var r=t[1].toLowerCase();var i;var a=[];var o={};var s;n=Qo.lastIndex=t[0].substr(-1)===";"?n-1:n;while(t=Qo.exec(e)){if(t.index!==n){throw new TypeError("invalid parameter format")}n+=t[0].length;i=t[1].toLowerCase();s=t[2];if(a.indexOf(i)!==-1){throw new TypeError("invalid duplicate parameter")}a.push(i);if(i.indexOf("*")+1===i.length){i=i.slice(0,-1);s=ss(s);o[i]=s;continue}if(typeof o[i]==="string"){continue}if(s[0]==='"'){s=s.substr(1,s.length-2).replace(Zo,"$1")}o[i]=s}if(n!==-1&&n!==e.length){throw new TypeError("invalid parameter format")}return new vs(r,o)}function cs(e,t){return String.fromCharCode(parseInt(t,16))}function fs(e){var t=String(e).charCodeAt(0).toString(16).toUpperCase();return t.length===1?"%0"+t:"%"+t}function ds(e){var t=String(e);return'"'+t.replace(Jo,"\\$1")+'"'}function hs(e){var t=String(e);var n=encodeURIComponent(t).replace(Ko,fs);return"UTF-8''"+n}function vs(e,t){this.type=e;this.parameters=t}Wo.parse=qo;var ps=n(function(t,n){(function(e,n){if(typeof undefined==="function"&&undefined.amd){undefined([],n)}else{t.exports=n()}})(e,function(){return function e(t,n,r){var i=window,a="application/octet-stream",o=r||a,s=t,u=!n&&!r&&s,l=document.createElement("a"),c=function(e){return String(e)},f=i.Blob||i.MozBlob||i.WebKitBlob||c,d=n||"download",h,v;f=f.call?f.bind(i):Blob;if(String(this)==="true"){s=[s,o];o=s[0];s=s[1]}if(u&&u.length<2048){d=u.split("/").pop().split("?")[0];l.href=u;if(l.href.indexOf(u)!==-1){var p=new XMLHttpRequest;p.open("GET",u,true);p.responseType="blob";p.onload=function(t){e(t.target.response,d,a)};setTimeout(function(){p.send()},0);return p}}if(/^data\:[\w+\-]+\/[\w+\-]+[,;]/.test(s)){if(s.length>1024*1024*1.999&&f!==c){s=g(s);o=s.type||a}else{return navigator.msSaveBlob?navigator.msSaveBlob(g(s),d):m(s)}}h=s instanceof f?s:new f([s],{type:o});function g(e){var t=e.split(/[:;,]/),n=t[1],r=t[2]=="base64"?atob:decodeURIComponent,i=r(t.pop()),a=i.length,o=0,s=new Uint8Array(a);for(o;o<a;++o){s[o]=i.charCodeAt(o)}return new f([s],{type:n})}function m(e,t){if("download"in l){l.href=e;l.setAttribute("download",d);l.className="download-js-link";l.innerHTML="downloading...";l.style.display="none";document.body.appendChild(l);setTimeout(function(){l.click();document.body.removeChild(l);if(t===true){setTimeout(function(){i.URL.revokeObjectURL(l.href)},250)}},66);return true}if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent)){e=e.replace(/^data:([\w\/\-\+]+)/,a);if(!window.open(e)){if(confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")){location.href=e}}return true}var n=document.createElement("iframe");document.body.appendChild(n);if(!t){e="data:"+e.replace(/^data:([\w\/\-\+]+)/,a)}n.src=e;setTimeout(function(){document.body.removeChild(n)},333)}if(navigator.msSaveBlob){return navigator.msSaveBlob(h,d)}if(i.URL){m(i.URL.createObjectURL(h),true)}else{if(typeof h==="string"||h.constructor===c){try{return m("data:"+o+";base64,"+i.btoa(h))}catch(e){return m("data:"+o+","+encodeURIComponent(h))}}v=new FileReader;v.onload=function(e){m(this.result)};v.readAsDataURL(h)}return true}})});var gs=ho("components",{get:(e,t,n,r)=>{if(r===void 0)r={};const i=n.api.method;if(i!=="get"){return Promise.reject("only `get` method is allowed.")}let a=n.api.path;if(a.indexOf("/")!==0){a="/"+a}const o=e.getter("oas.apiByPathAndMethod",a,i);const s=e.getter("current.all");const u=e.getter("endpoints.one",s);const l=u.token;const c=`networking_${Date.now()}`;return Promise.resolve().then(()=>e.commit("application.addNetworking",{id:c})).then(()=>o(r,{requestInterceptor:e=>{e.headers["Authorization"]=l}})).then(e=>{if(!e.ok){return Promise.reject(e)}return e}).then(r=>{const i=r.headers["Authorization"];if(!!i){e.commit("endpoints.updateToken",s,i)}e.commit("components.updateOne",t,n,r.obj,r.headers);e.commit("application.removeNetworking",c,e)}).catch(t=>{e.commit("application.removeNetworking",c,e);throw t})},operate:(e,t,n)=>{const r=e.getter("oas.api",t.operationId);const i=e.getter("endpoints.one",e.getter("current.all")).token;const a=e.getter("current.all");const o=`networking_${Date.now()}`;return Promise.resolve().then(()=>e.commit("application.addNetworking",{id:o})).then(()=>r(n,{requestInterceptor:e=>{e.headers["Authorization"]=i}})).then(e=>{if(!e.ok){return Promise.reject(e)}return e}).then(t=>{e.commit("application.removeNetworking",o,e);const n=t.headers["Authorization"];if(!!n){e.commit("endpoints.updateToken",a,n)}const r=t.headers["content-disposition"];if(!r){return t}const i=Wo.parse(r);if(i.type!=="attachment"){return t}ps(t.data,i.parameters.filename,t.headers["content-type"]);return t}).catch(t=>{e.commit("application.removeNetworking",o,e);throw t})},remove:(e,t)=>{return Promise.resolve().then(()=>{e.commit("components.removeOne",t)})},removeAll:e=>{return Promise.resolve().then(()=>{e.commit("components.removeAll")})}});var ms=ho("current",{update:(e,t)=>{return Promise.resolve().then(()=>{e.commit("current.all",t)})},remove:e=>{return Promise.resolve().then(()=>{e.commit("current.all",null)})}});var ys=ho("drawers",{add:(e,t,n,r)=>{return Promise.resolve().then(()=>{e.commit("drawers.add",t,n,r)})},remove:(e,t)=>{return Promise.resolve().then(()=>{e.commit("drawers.remove",t)})}});"use strict";var bs=1;function _s(){bs=(bs*9301+49297)%233280;return bs/233280}function ws(e){bs=e}var xs={nextValue:_s,seed:ws};"use strict";var Ts="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";var Cs;var ks;var Ss;function Es(){Ss=false}function Ps(e){if(!e){if(Cs!==Ts){Cs=Ts;Es()}return}if(e===Cs){return}if(e.length!==Ts.length){throw new Error("Custom alphabet for shortid must be "+Ts.length+" unique characters. You submitted "+e.length+" characters: "+e)}var t=e.split("").filter(function(e,t,n){return t!==n.lastIndexOf(e)});if(t.length){throw new Error("Custom alphabet for shortid must be "+Ts.length+" unique characters. These characters were not unique: "+t.join(", "))}Cs=e;Es()}function Os(e){Ps(e);return Cs}function Ms(e){xs.seed(e);if(ks!==e){Es();ks=e}}function As(){if(!Cs){Ps(Ts)}var e=Cs.split("");var t=[];var n=xs.nextValue();var r;while(e.length>0){n=xs.nextValue();r=Math.floor(n*e.length);t.push(e.splice(r,1)[0])}return t.join("")}function Ns(){if(Ss){return Ss}Ss=As();return Ss}function Rs(e){var t=Ns();return t[e]}var Ds={characters:Os,seed:Ms,lookup:Rs,shuffled:Ns};"use strict";var Ls=typeof window==="object"&&(window.crypto||window.msCrypto);function Is(){if(!Ls||!Ls.getRandomValues){return Math.floor(Math.random()*256)&48}var e=new Uint8Array(1);Ls.getRandomValues(e);return e[0]&48}var Bs=Is;"use strict";function js(e,t){var n=0;var r;var i="";while(!r){i=i+e(t>>4*n&15|Bs());r=t<Math.pow(16,n+1);n++}return i}var Fs=js;"use strict";function Hs(e){var t=Ds.shuffled();return{version:t.indexOf(e.substr(0,1))&15,worker:t.indexOf(e.substr(1,1))&15}}var zs=Hs;"use strict";var Us=1459707606518;var Vs=6;var Ws;var qs;function Ys(e){var t="";var n=Math.floor((Date.now()-Us)*.001);if(n===qs){Ws++}else{Ws=0;qs=n}t=t+Fs(Ds.lookup,Vs);t=t+Fs(Ds.lookup,e);if(Ws>0){t=t+Fs(Ds.lookup,Ws)}t=t+Fs(Ds.lookup,n);return t}var Ks=Ys;"use strict";function $s(e){if(!e||typeof e!=="string"||e.length<6){return false}var t=Ds.characters();var n=e.length;for(var r=0;r<n;r++){if(t.indexOf(e[r])===-1){return false}}return true}var Gs=$s;"use strict";var Xs=0;var Zs=n(function(e){"use strict";var t=Xs||0;function n(t){Ds.seed(t);return e.exports}function r(n){t=n;return e.exports}function i(e){if(e!==undefined){Ds.characters(e)}return Ds.shuffled()}function a(){return Ks(t)}e.exports=a;e.exports.generate=a;e.exports.seed=n;e.exports.worker=r;e.exports.characters=i;e.exports.decode=zs;e.exports.isValid=Gs});"use strict";var Js=Zs;var Qs=ho("endpoints",{add:(e,t)=>{const n={url:t,token:null,title:"",name:"",description:"",version:"",color:"",thumbnail:null,tags:[],theme:"standard"};return Promise.resolve().then(()=>Co(e,t)).then(()=>{const t=Js.generate();const r=to({},n,{key:t});e.commit("endpoints.add",t,r)}).catch(t=>{if(t.status!==401){throw t}const r=Js.generate();const i=to({},n,{key:r});e.commit("endpoints.add",r,i)})},update:(e,t,n)=>{return Promise.resolve().then(()=>{e.commit("endpoints.update",t,n)})},remove:(e,t)=>{return Promise.resolve().then(()=>{e.commit("endpoints.remove",t)})},removeAll:e=>{return Promise.resolve().then(()=>{e.commit("endpoints.removeAll")})},mergeAll:(e,t)=>{return Promise.resolve().then(()=>{e.commit("endpoints.mergeAll",t)})},mergeOneWithKey:(e,t)=>{return Promise.resolve().then(()=>{const n=Js.generate();t.key=n;e.commit("endpoints.add",n,t)})},tidyUpOrder:e=>{return Promise.resolve().then(()=>{e.commit("endpoints.tidyUpOrder")})},changeOrder:(e,t,n)=>{return Promise.resolve().then(()=>{e.commit("endpoints.changeOrder",t,n)})},cleanup:e=>{return Promise.resolve().then(()=>{e.commit("endpoints.cleanup")})}});var eu=ho("layout",{updateSize:(e,t,n)=>{return Promise.resolve().then(()=>{e.commit("layout.updateSize",t,n)})},updateComponentsGridColumnCount:(e,t)=>{return Promise.resolve().then(()=>{e.commit("layout.updateComponentsGridColumnCount",t)})}});var tu=ho("location",{update:(e,t)=>{return Promise.resolve().then(()=>{e.commit("location.all",t)})}});let nu=true;let ru;var iu=ho("mediapreviews",{add:(e,t,n)=>{if(!nu){console.warn("Â§öÈáç„Å´Ëµ∑Âãï„Åó„Å™„ÅÑ„Çà„ÅÜ„ÄÅ‰∏ÄÂÆöÊôÇÈñì„ÅÆ‰ΩúÊàê„ÇíË¶èÂà∂„Åô„Çã„ÄÇ");return Promise.resolve()}nu=false;clearTimeout(ru);ru=setTimeout(()=>{nu=true},300);return Promise.resolve().then(()=>{e.commit("mediapreviews.add",t,n)})},remove:(e,t)=>{return Promise.resolve().then(()=>{e.commit("mediapreviews.remove",t)})}});let au=true;let ou;var su=ho("modals",{add:(e,t,n,r)=>{if(!au){console.warn("Â§öÈáç„Å´Ëµ∑Âãï„Åó„Å™„ÅÑ„Çà„ÅÜ„ÄÅ‰∏ÄÂÆöÊôÇÈñì„ÅÆ„É¢„Éº„ÉÄ„É´‰ΩúÊàê„ÇíË¶èÂà∂„Åô„Çã„ÄÇ");return Promise.resolve()}au=false;clearTimeout(ou);ou=setTimeout(()=>{au=true},300);return Promise.resolve().then(()=>{e.commit("modals.add",t,n,r)})},remove:(e,t)=>{return Promise.resolve().then(()=>{e.commit("modals.remove",t)})}});var uu=Array.isArray||function(e){return yo(e,"Array")};var lu=uu;function cu(e,t,n){if(e==null){return}var r=-1,i=e.length;while(++r<i){if(t.call(n,e[r],r,e)===false){break}}}var fu=cu;function du(e){var t=[],n,r;fo(e,function(e,i){if(lu(e)){n=i+"=";r=new RegExp("&"+i+"+=$");fu(e,function(e){n+=encodeURIComponent(e)+"&"+i+"="});t.push(n.replace(r,""))}else{t.push(i+"="+encodeURIComponent(e))}});return t.length?"?"+t.join("&"):""}var hu=du;const vu=window.SwaggerClient;var pu=ho("oas",{setup:(e,t,n,r)=>{return Promise.resolve().then(()=>vu.http({url:n,headers:{Authorization:r}})).then(e=>{if(e.status===401){const t=new Error;t.name="401 Authorization Required";t.status=e.spec.status;return Promise.reject(t)}const t=e.body;if(!_o(t)||t.swagger!=="2.0"){return Promise.reject({name:n,message:"„É¨„Çπ„Éù„É≥„Çπ„ÅåOAS2.0„Å´Ê∫ñÊã†„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ"})}return t}).then(e=>vu({spec:e})).then(e=>{const t=e.errors;if(!!t&&!!t.length){return Promise.reject(t)}return e}).then(n=>{e.commit("oas.client",n);e.commit("endpoints.update",t,n.spec.info)})},clear:e=>{return Promise.resolve().then(()=>{e.commit("oas.clearClient")})},getAutocomplete:(e,t,n)=>{const r=e.getter("current.all");const i=e.getter("endpoints.one",r);const a=i.token;const o=`${new URL(i.url).origin}${t}${hu(n)}`;return Promise.resolve().then(()=>Co(e,o,{headers:{Authorization:a}})).then(e=>e.json())}});function gu(e){return e}var mu=gu;function yu(e){return function(t){return t[e]}}var bu=yu;function _u(e,t){var n=-1,r=e.length;while(++n<r){if(Tu(e[n],t)){return true}}return false}function wu(e,t){var n=-1,r=t.length;while(++n<r){if(!_u(e,t[n])){return false}}return true}function xu(e,t){var n=true;fo(t,function(t,r){if(!Tu(e[r],t)){return n=false}});return n}function Tu(e,t){if(e&&typeof e==="object"&&t&&typeof t==="object"){if(lu(e)&&lu(t)){return wu(e,t)}else{return xu(e,t)}}else{return e===t}}var Cu=Tu;function ku(e,t){if(e==null){return mu}switch(typeof e){case"function":return typeof t!=="undefined"?function(n,r,i){return e.call(t,n,r,i)}:e;case"object":return function(t){return Cu(t,e)};case"string":case"number":return bu(e)}}var Su=ku;function Eu(e,t,n){t=Su(t,n);var r=false;fo(e,function(n,i){if(t(n,i,e)){r=true;return false}});return r}var Pu=Eu;function Ou(e,t,n){t=Su(t,n);var r;Pu(e,function(e,n,i){if(t(e,n,i)){r=e;return true}});return r}var Mu=Ou;var Au=ho("page",{get:(e,t)=>{return Promise.resolve().then(()=>{const n=e.getter("viron.pages");const r=Mu(n,e=>{return e.id===t});e.commit("page.all",r)})},remove:e=>{return Promise.resolve().then(()=>{e.commit("page.all",null)})}});var Nu=ho("popovers",{add:(e,t,n,r)=>{return Promise.resolve().then(()=>{e.commit("popovers.add",t,n,r)})},remove:(e,t)=>{return Promise.resolve().then(()=>{e.commit("popovers.remove",t)})},removeAll:e=>{return Promise.resolve().then(()=>{e.commit("popovers.removeAll")})}});var Ru=ho("toasts",{add:(e,t)=>{return Promise.resolve().then(()=>{e.commit("toasts.add",t)})},remove:(e,t)=>{return Promise.resolve().then(()=>{e.commit("toasts.remove",t)})}});var Du=n(function(t){
/**
 * @name sua.js
 * @author Kei Funagayama <kei.topaz@gmail.com>
 * @overview UserAgent decision for browser. fork zepto.js(http://zeptojs.com/)
 * @license MIT
 */
(function(e){"use strict";function n(n){if(!n&&e&&e.navigator&&e.navigator.userAgent){n=e.navigator.userAgent}if(!n){throw new Error("useragent setup error. useragent not found.")}this.ie=!!(n.indexOf("MSIE")>=0||n.indexOf("Trident")>=0||n.indexOf("Edge")>=0),this.webkit=n.match(/(WebKit|Webkit)\/([\d.]+)/),this.android=n.match(/(Android)\s+([\d.]+)/),this.android23=n.match(/(Android)\s+(2\.3)([\d.]+)/),this.android4=n.match(/(Android)\s+(4)([\d.]+)/),this.android5=n.match(/(Android)\s+(5)([\d.]+)/),this.android6=n.match(/(Android)\s+(6)([\d.]+)/),this.android7=n.match(/(Android)\s+(7)([\d.]+)/),this.android8=n.match(/(Android)\s+(8)([\d.]+)/),this.ipad=n.match(/(iPad).*OS\s([\d_]+)/),this.iphone=!this.ipad&&n.match(/(iPhone\sOS)\s([\d_]+)/),this.webos=n.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),this.touchpad=this.webos&&n.match(/TouchPad/),this.kindle=n.match(/(Kindle)/),this.silk=n.match(/(Silk)/),this.blackberry=n.match(/(BlackBerry).*/),this.bb10=n.match(/(BB10).*Version\/([\d.]+)/),this.rimtabletos=n.match(/(RIM\sTablet\sOS)\s([\d.]+)/),this.playbook=n.match(/PlayBook/),this.chrome=n.match(/Chrome\/([\d.]+)/)||n.match(/CriOS\/([\d.]+)/),this.firefox=n.match(/Firefox\/([\d.]+)/),this.wii=n.match(/Nintendo (Wii);/),this.wiiu=n.match(/Nintendo (WiiU)/),this.ds=n.match(/Nintendo (DS|3DS|DSi);/),this.nintendo_switch=n.match(/Nintendo (Switch);/),this.ps3=n.match(/PLAYSTATION 3/),this.psp=n.match(/(PlayStation Portable)/),this.psvita=n.match(/(PlayStation Vita)/),this.windowsphone=n.match(/(Windows Phone |Windows Phone OS )([\d.]+)/),this.safari=n.match(/(Version)\/([0-9\.]+).*Safari\/([0-9\.]+)/),this.trident=n.match(/Trident\/([\d\.]+)/),this.xbox=n.match(/Xbox/),this.iphone5=!("object"!=="undefined"&&t.exports)&&this.iphone&&screen&&screen.width===320&&screen.height===568,this.vivaldi=n.match(/Vivaldi\/([\d.]+)/);this.iphone3=this.iphone&&e.devicePixelRatio===1?true:false;this.browser={locale:undefined,lang:undefined,country:undefined};this.os={};if(this.webkit&&!this.ie){this.browser.webkit=true;this.browser.version=this.webkit[1]}if(this.trident){this.browser.trident=true;this.browser.version=this.trident[1]}if(this.android){this.os.android=true;this.os.version=this.android[2];try{this.browser.locale=n.match(/(Android)\s(.+);\s([^;]+);/)[3];this.browser.lang=this.browser.locale.substring(0,2);this.browser.country=this.browser.locale.substring(3)}catch(e){}}if(this.iphone){this.os.ios=this.os.iphone=true;this.os.version=this.iphone[2].replace(/_/g,".")}if(this.ipad){this.os.ios=this.os.ipad=true;this.os.version=this.ipad[2].replace(/_/g,".")}if(this.os.ios){var r=null;if(this.os.version){r=this.os.version.split(".")[0]}for(var i=3;i<12;i++){this["ios"+i]=r===""+i}}if(this.webos){this.os.webos=true;this.os.version=this.webos[2]}if(this.touchpad){this.os.touchpad=true}if(this.blackberry){this.os.blackberry=true}if(this.bb10){this.os.bb10=true;this.os.version=this.bb10[2]}if(this.rimtabletos){this.os.rimtabletos=true;this.os.version=this.rimtabletos[2]}if(this.playbook){this.browser.playbook=true}if(this.kindle){this.os.kindle=true}if(this.silk){this.browser.silk=true}if(!this.silk&&this.os.android&&n.match(/Kindle Fire/)){this.browser.silk=true}if(this.chrome&&!this.ie){this.browser.chrome=true;this.browser.version=this.chrome[1]}if(this.firefox){this.browser.firefox=true;this.browser.version=this.firefox[1];if(n.match(/Android/)){this.android=["Android","Android",""]}}if(this.wii||this.ds||this.wiiu||this.nintendo_switch){this.os.nintendo=true;if(this.wiiu||this.nintendo_switch){this.browser.nintendo=n.match(/NintendoBrowser\/([\d.]+)/);this.browser.version=this.browser.nintendo[1]}}if(this.windowsphone){this.browser.windowsphone=true;this.browser.version=this.windowsphone[2]}if(this.safari){this.browser.safari=true;this.browser.version=this.safari[2]}if(this.ie){this.browser.ie=/(MSIE|rv:?)\s?([\d\.]+)/.exec(n);this.edge=false;if(!this.browser.ie){this.browser.ie=/(Edge\/)(\d.+)/.exec(n);this.browser.version=this.browser.ie[2];this.edge=true;this.chrome=false;this.webkit=false}else if(!this.windowsphone){this.browser.version=this.browser.ie?this.browser.ie[2]:""}if(0<this.browser.version.indexOf(".")){this.browser.majorversion=this.browser.version.substring(0,this.browser.version.indexOf("."))}else{this.browser.majorversion=this.browser.version}}if(this.vivaldi){this.browser.vivaldi=true;this.browser.version=this.vivaldi[1]}this.os.tablet=!!(this.ipad||this.kindle||this.playbook||this.android&&!n.match(/Mobile/)||this.firefox&&n.match(/Tablet/));this.os.phone=!!(!this.os.tablet&&(this.android||this.iphone||this.webos||this.blackberry||this.bb10||this.chrome&&n.match(/Android/)||this.chrome&&n.match(/CriOS\/([\d.]+)/)||this.firefox&&n.match(/Mobile/)||this.windowsphone&&n.match(/IEMobile/)));this.mobile=!!(this.os.tablet||this.os.phone);this.webview={};if(n.match(/Twitter/)){this.webview.twitter=true}}n.VERSION="2.2.0";if("object"!=="undefined"&&t.exports){t.exports=n}if(!e.SUA){e.SUA=n}})(e)});var Lu=ho("ua",{setup:e=>{return Promise.resolve().then(()=>{const t=new Du(navigator.userAgent);e.commit("ua.all",t)})}});var Iu=ho("util",{refreshAllComponents:e=>{return Promise.resolve().then(()=>{e.commit("util.components_refresh")})}});const Bu="/viron";var ju=ho("viron",{get:(e,t)=>{const n=e.getter("oas.operationObject",Bu,"get");const r=e.getter("oas.api",n.operationId);const i=e.getter("current.all");const a=e.getter("endpoints.one",i);const o=a.token;const s=`networking_${Date.now()}`;return Promise.resolve().then(()=>e.commit("application.addNetworking",{id:s})).then(()=>r({},{requestInterceptor:e=>{e.headers["Authorization"]=o}})).then(e=>{if(!e.ok){return Promise.reject(e)}return e}).then(n=>{const r=n.headers["Authorization"];if(!!r){e.commit("endpoints.updateToken",i,r)}e.commit("viron.all",to({endpointKey:t},n.obj));const a=to({},n.obj);delete a.pages;e.commit("endpoints.update",i,a);e.commit("application.removeNetworking",s,e)}).catch(t=>{e.commit("application.removeNetworking",s,e);throw t})},remove:e=>{return Promise.resolve().then(()=>{e.commit("viron.all",null)})}});var Fu=to({},vo,ko,gs,ms,ys,Qs,eu,tu,iu,su,pu,Au,Nu,Ru,Lu,Iu,ju);var Hu=(e,t)=>{const n={};fo(t,(t,r)=>{n[`${e}.${r}`]=((e,...n)=>{return t(e.state,...n)})});return n};var zu=Hu("application",{all:e=>{return e.application},version:e=>{return e.application.version},latestVersion:e=>{return e.application.latestVersion},isLaunched:e=>{return e.application.isLaunched},isNavigating:e=>{return e.application.isNavigating},isNetworking:e=>{return e.application.isNetworking},isDragging:e=>{return e.application.isDragging},isMenuOpened:e=>{return e.application.isMenuOpened},endpointFilterText:e=>{return e.application.endpointFilterText},endpointTempFilterText:e=>{return e.application.endpointTempFilterText}});function Uu(e,t,n){t=Su(t,n);if(e==null){return-1}var r=-1,i=e.length;while(++r<i){if(t(e[r],r,e)){return r}}return-1}var Vu=Uu;function Wu(e,t,n){var r=Vu(e,t,n);return r>=0?e[r]:void 0}var qu=Wu;function Yu(e,t,n){n=n||0;if(e==null){return-1}var r=e.length,i=n<0?r+n:n;while(i<r){if(e[i]===t){return i}i++}return-1}var Ku=Yu;function $u(e,t,n){t=Su(t,n);var r=[];if(e==null){return r}var i=-1,a=e.length;while(++i<a){r[i]=t(e[i],i,e)}return r}var Gu=$u;function Xu(e,t){if(e==null){return[]}else if(e.length<2){return e}if(t==null){t=Zu}var n,r,i;n=~~(e.length/2);r=Xu(e.slice(0,n),t);i=Xu(e.slice(n,e.length),t);return Ju(r,i,t)}function Zu(e,t){return e<t?-1:e>t?1:0}function Ju(e,t,n){var r=[];while(e.length&&t.length){if(n(e[0],t[0])<=0){r.push(e.shift())}else{r.push(t.shift())}}if(e.length){r.push.apply(r,e)}if(t.length){r.push.apply(r,t)}return r}var Qu=Xu;function el(e,t,n){t=Su(t,n);return Qu(e,function(e,n){e=t(e);n=t(n);return e<n?-1:e>n?1:0})}var tl=el;function nl(e,t,n){t=Su(t,n);var r=[];if(e==null){return r}var i=-1,a=e.length,o;while(++i<a){o=e[i];if(t(o,i,e)){r.push(o)}}return r}var rl=nl;function il(e,t){t=t||al;return rl(e,function(e,n,r){var i=r.length;while(++n<i){if(t(e,r[n])){return false}}return true})}function al(e,t){return e===t}var ol=il;function sl(e){return yo(e,"Number")}var ul=sl;var ll=Hu("components",{all:e=>{return e.state.components},one:(e,t)=>{return e.components[t]},def:(e,t)=>{return e.components[t].def},response:(e,t)=>{return e.components[t].response},columns:(e,t)=>{const n=e.components[t];const r=n.columns;const i=n.def.table_labels||[];return Qu(r,(e,t)=>{let n=Ku(i,e.key);let r=Ku(i,t.key);if(n>=0){n=i.length-n}if(r>=0){r=i.length-r}return r-n})},operations:(e,t,n)=>{const r=e.components[t];let i;switch(n){case"table":i=r.tableOperations;break;case"row":i=r.rowOperations;break;case"explorer":i=r.explorerOperations;break;default:i=r.operations||[];break}return i},postOperation:(e,t,n)=>{const r=e.components[t];let i;switch(n){case"table":i=r.tableOperations;break;case"row":i=r.rowOperations;break;case"explorer":i=r.explorerOperations;break;default:i=r.operations||[];break}const a=r.def.api.path;const o=qu(i,e=>{return e.path===a&&e.method==="post"});if(!o){return null}return o},deleteOperation:(e,t,n)=>{const r=e.components[t];let i;switch(n){case"table":i=r.tableOperations;break;case"row":i=r.rowOperations;break;case"explorer":i=r.explorerOperations;break;default:i=r.operations||[];break}const a=r.def.api.path;const o=qu(i,e=>{return e.path===a&&e.method==="delete"});if(!o){return null}return o},searchParameters:(e,t)=>{return e.components[t]["searchParameters"]},primary:(e,t)=>{return e.components[t]["primary"]},pagination:(e,t)=>{return e.components[t].pagination||null},hasPagination:(e,t)=>{return e.components[t].def.pagination&&e.components[t].pagination.max>=2},autoRefreshSec:(e,t)=>{const n=e.components[t].autoRefreshSec;if(!ul(n)){return null}return n},parameterObjectsForCrossSearch:e=>{let t=[];fo(e.components,e=>{t=t.concat(e.searchParameters||[])});const n={};t=Gu(t,e=>{const t=e.name;n[t]||(n[t]=0);n[t]=n[t]+1;return to({},e)});t=ol(t,(e,t)=>{return e.name===t.name});t=tl(t,e=>{return n[e.name]*-1});return t}});var cl=Hu("current",{all:e=>{const t=e.application.version;return e.current[t]}});var fl=Hu("drawers",{all:e=>{return e.drawers}});function dl(e,t,n){var r=e.length;if(t==null){t=0}else if(t<0){t=Math.max(r+t,0)}else{t=Math.min(t,r)}if(n==null){n=r}else if(n<0){n=Math.max(r+n,0)}else{n=Math.min(n,r)}var i=[];while(t<n){i.push(e[t++])}return i}var hl=dl;function vl(e){return!!e&&typeof e==="object"&&e.constructor===Object}var pl=vl;function gl(e,t){var n=0,r=arguments.length,i;while(++n<r){i=arguments[n];if(i!=null){fo(i,ml,e)}}return e}function ml(e,t){this[t]=e}var yl=gl;function bl(e){switch(go(e)){case"Object":return _l(e);case"Array":return Tl(e);case"RegExp":return wl(e);case"Date":return xl(e);default:return e}}function _l(e){if(pl(e)){return yl({},e)}else{return e}}function wl(e){var t="";t+=e.multiline?"m":"";t+=e.global?"g":"";t+=e.ignoreCase?"i":"";return new RegExp(e.source,t)}function xl(e){return new Date(+e)}function Tl(e){return e.slice()}var Cl=bl;function kl(e,t){switch(go(e)){case"Object":return Sl(e,t);case"Array":return El(e,t);default:return Cl(e)}}function Sl(e,t){if(pl(e)){var n={};fo(e,function(e,n){this[n]=kl(e,t)},n);return n}else if(t){return t(e)}else{return e}}function El(e,t){var n=[],r=-1,i=e.length;while(++r<i){n[r]=kl(e[r],t)}return n}var Pl=kl;function Ol(e){var t=0;fo(e,function(){t++});return t}var Ml=Ol;function Al(e){return e==null?"":e.toString()}var Nl=Al;function Rl(e,t,n){e=Nl(e);t=Nl(t);return e.indexOf(t,n)!==-1}var Dl=Rl;const Ll=e=>{let t=[];fo(e,(e,n)=>{e.key=n;t.push(e)});t=tl(t,e=>{return e.order});return t};const Il=(e,t)=>{t=t||"";t=t.replace(/„ÄÄ/g," ");t=t.replace(/,/g," ");const n=rl((t||"").split(" "),e=>{return!!e});if(!n.length){return e}return rl(e,e=>{let t=false;fu(n,n=>{if(Dl(e.url,n)){t=true}if(Dl(e.title,n)){t=true}if(Dl(e.name,n)){t=true}if(Dl(e.description,n)){t=true}if(Dl(e.memo,n)){t=true}fu(e.tags||[],e=>{if(Dl(e,n)){t=true}})});return t})};var Bl=Hu("endpoints",{all:e=>{const t=e.application.version;return e.endpoints[t]||{}},allByOrder:e=>{const t=e.application.version;let n=to({},e.endpoints[t]);n=Ll(n);return n},allByOrderFiltered:e=>{const t=e.application.version;let n=to({},e.endpoints[t]);n=Ll(n);n=Il(n,e.application.endpointFilterText);return n},namesFiltered:(e,t)=>{const n=e.application.version;let r=to({},e.endpoints[n]);r=Ll(r);let i=[];fu(r,e=>{if(!!e.name){i.push(e.name)}});i=ol(i,(e,t)=>{return e===t});let a=e.application.endpointTempFilterText;a=a.replace(/„ÄÄ/g," ");a=a.replace(/,/g," ");const o=rl((a||"").split(" "),e=>{return!!e});if(!!o.length){i=rl(i,e=>{let t=true;fu(o,n=>{if(!Dl(e,n)){t=false}});return t})}if(!!t){i=hl(i,0,t)}return i},tagsFiltered:(e,t)=>{const n=e.application.version;let r=to({},e.endpoints[n]);r=Ll(r);let i=[];fu(r,e=>{fu(e.tags||[],e=>{i.push(e)})});i=ol(i,(e,t)=>{return e===t});let a=e.application.endpointTempFilterText;a=a.replace(/„ÄÄ/g," ");a=a.replace(/,/g," ");const o=rl((a||"").split(" "),e=>{return!!e});if(!!o.length){i=rl(i,e=>{let t=true;fu(o,n=>{if(!Dl(e,n)){t=false}});return t})}if(!!t){i=hl(i,0,t)}return i},count:e=>{const t=e.application.version;const n=e.endpoints[t]||{};return Ml(n)},allWithoutToken:e=>{const t=e.application.version;const n=Pl(e.endpoints[t]);fo(n,e=>{delete e.token});return n},one:(e,t)=>{const n=e.application.version;const r=e.endpoints[n]||{};return r[t]},oneByURL:(e,t)=>{const n=e.application.version;const r=e.endpoints[n]||{};return Mu(r,e=>{return e.url===t})}});var jl={layoutThreshold:640,layoutTypeDesktop:"desktop",layoutTypeMobile:"mobile",authtypeEmail:"email",authtypeOauth:"oauth"};var Fl=Hu("layout",{type:e=>{return e.layout.type},isDesktop:e=>{return e.layout.type===jl.layoutTypeDesktop},isMobile:e=>{return e.layout.type===jl.layoutTypeMobile},size:e=>{return e.layout.size},componentsGridColumnCount:e=>{return e.layout.componentsGridColumnCount}});var Hl=Hu("location",{all:e=>{return e.location},isTop:e=>{return e.location.name==="endpoints"},name:e=>{return e.location.name},route:e=>{return e.location.route}});var zl=Hu("mediapreviews",{all:e=>{return e.mediapreviews}});var Ul=Hu("modals",{all:e=>{return e.modals}});var Vl=Hu("oas",{client:e=>{return e.oas.client},spec:e=>{return e.oas.client.spec},originalSpec:e=>{return e.oas.client.originalSpec},apis:e=>{return e.oas.client.apis},flatApis:e=>{const t={};fo(e.oas.client.apis,e=>{fo(e,(e,n)=>{t[n]=e})});return t},api:(e,t)=>{const n={};fo(e.oas.client.apis,e=>{fo(e,(e,t)=>{n[t]=e})});return n[t]},apiByPathAndMethod:(e,t,n)=>{const r=e.oas.client.spec.paths[t][n];const i=r.operationId;const a={};fo(e.oas.client.apis,e=>{fo(e,(e,t)=>{a[t]=e})});return a[i]},pathItemObject:(e,t)=>{return e.oas.client.spec.paths[t]},pathItemObjectMethodNameByOperationId:(e,t)=>{let n;fo(e.oas.client.spec.paths,e=>{if(!!n){return}fo(e,(e,r)=>{if(!!n){return}if(e.operationId===t){n=r}})});return n},operationObject:(e,t,n)=>{return e.oas.client.spec.paths[t][n]},operationObjectsAsAction:(e,t)=>{const n=["get","put","post","delete"];const r=t.api.path;const i=t.primary;const a=t.actions||[];const o=[];fu(n,t=>{if(t==="get"){return}const n=!!e.oas.client.spec.paths[r]&&!!e.oas.client.spec.paths[r][t];if(!n){return}o.push({path:r,method:t,appendTo:"self"})});if(!!i){const t=`${r}/{${i}}`;fu(n,n=>{const r=!!e.oas.client.spec.paths[t]&&!!e.oas.client.spec.paths[t][n];if(!r){return}o.push({path:t,method:n,appendTo:"row"})})}fu(a,t=>{const r=t.indexOf(`{${i}}`)>=0?"row":"self";fu(n,n=>{const i=!!e.oas.client.spec.paths[t]&&!!e.oas.client.spec.paths[t][n];if(!i){return}o.push({path:t,method:n,appendTo:r})})});const s=[];fu(o,t=>{const n=e.oas.client.spec.paths[t.path][t.method];s.push(to({operationObject:n},t))});return s},operationId:(e,t,n)=>{return e.oas.client.spec.paths[t][n].operationId},parameterObjects:(e,t,n)=>{return e.oas.client.spec.paths[t][n].parameters||[]},responseObjects:(e,t,n)=>{return e.oas.client.spec.paths[t][n].responses},responseObject:(e,t,n,r)=>{if(r===void 0)r=200;return e.oas.client.spec.paths[t][n].responses[r]},schemaObject:(e,t,n,r)=>{if(r===void 0)r=200;return e.oas.client.spec.paths[t][n].responses[r].schema}});function Wl(e,t){return Ku(e,t)!==-1}var ql=Wl;function Yl(e,t,n){t=Su(t,n);var r=[];if(e==null){return r}var i=-1,a=e.length,o;while(++i<a){o=e[i];if(!t(o,i,e)){r.push(o)}}return r}var Kl=Yl;var $l=Hu("page",{all:e=>{return e.page||{}},id:e=>{const t=e.page;if(!t){return""}return t.id},name:e=>{const t=e.page;if(!t){return""}return t.name},components:e=>{const t=e.page;if(!t){return[]}return t.components},componentsInline:e=>{const t=e.page;if(!t){return[]}return rl(t.components,e=>{return ql(["number"],e.style)})},componentsTable:e=>{const t=e.page;if(!t){return[]}return rl(t.components,e=>{return ql(["table"],e.style)})},componentsNotTable:e=>{const t=e.page;if(!t){return[]}return Kl(t.components,e=>{return e.style==="table"})},componentsCount:e=>{const t=e.page;if(!t){return 0}return(t.components||[]).length}});var Gl=Hu("popovers",{all:e=>{return e.popovers}});var Xl=Hu("toasts",{all:e=>{return e.toasts}});var Zl=Hu("ua",{all:e=>{return e.ua},isChrome:e=>{return!!e.ua.chrome},isSafari:e=>{return!!e.ua.safari},isEdge:e=>{return!!e.ua.edge},isFirefox:e=>{return!!e.ua.firefox},usingBrowser:e=>{const t=e.ua;if(!!t.chrome){return"chrome"}if(!!t.safari){return"safari"}if(!!t.edge){return"edge"}if(!!t.firefox){return"firefox"}return null}});var Jl=Hu("util",{components_refresh:e=>{return e.util.components_refresh}});function Ql(e,t,n){t=Su(t,n);var r={};fo(e,function(e,n,i){if(t(e,n,i)){r[n]=e}});return r}var ec=Ql;function tc(e){var t=[];fo(e,function(e,n){t.push(e)});return t}var nc=tc;const rc="dashboard";const ic="manage";var ac=Hu("viron",{all:e=>{if(!e.viron){return null}return e.viron},existence:e=>{return!!e.viron},pages:e=>{return e.viron.pages},pageIdOf:(e,t)=>{return e.viron.pages[t].id},name:e=>{if(!e.viron){return null}return e.viron.name},endpointKey:e=>{if(!e.viron){return null}return e.viron.endpointKey},thumbnail:e=>{if(!e.viron){return null}return e.viron.thumbnail},color:e=>{if(!e.viron){return null}return e.viron.color},theme:e=>{const t="standard";if(!e.viron){return t}if(!ql(["standard","midnight","terminal"],e.viron.theme)){return t}return e.viron.theme},dashboard:e=>{if(!e.viron){return[]}return nc(ec(e.viron.pages,e=>{if(e.section!==rc){return false}return true}))},manage:e=>{if(!e.viron){return[]}return nc(ec(e.viron.pages,e=>{if(e.section!==ic){return false}return true}))},menu:e=>{const t=[];if(!e.viron||!e.viron.sections){return t}const n=e.viron.sections;fu(n,e=>{t.push({name:e.label||e.id,id:e.id,groups:[]})});const r=e.viron.pages;fu(r,e=>{const n=qu(t,t=>{return t.id===e.section});const r=e.group;const i=!r;if(i){n.groups.push({pages:[{name:e.name,id:e.id}],isIndependent:i})}else{if(!qu(n.groups,e=>{return e.name===r})){n.groups.push({name:r,pages:[],isIndependent:i})}const t=qu(n.groups,e=>{return e.name===r});t.pages.push({name:e.name,id:e.id})}});return t}});var oc=to({},zu,ll,cl,fl,Bl,Fl,Hl,zl,Ul,Vl,$l,Gl,Xl,Zl,Jl,ac);var sc=(e,t)=>{const n={};fo(t,(t,r)=>{n[`${e}.${r}`]=((e,...n)=>{return t(e.state,...n)})});return n};var uc=sc("application",{launch:(e,t)=>{e.application.isLaunched=t;return["application"]},navigation:(e,t)=>{e.application.isNavigating=t;return["application"]},addNetworking:(e,t)=>{e.application.networkings.push(to({id:`networking_${Date.now()}`},t));e.application.isNetworking=true;return["application"]},removeNetworking:(e,t,n)=>{e.application.networkings=Kl(e.application.networkings,e=>{return e.id===t});if(!!n){setTimeout(()=>{n.commit("application.isNetworking")},500)}else if(!e.application.networkings.length){e.application.isNetworking=false}return["application"]},isNetworking:e=>{e.application.isNetworking=!!e.application.networkings.length;return["application"]},drag:(e,t)=>{e.application.isDragging=t;return["application"]},menuToggle:e=>{e.application.isMenuOpened=!e.application.isMenuOpened;return["application"]},endpointFilterText:(e,t)=>{e.application.endpointFilterText=t;return["application"]},endpointTempFilterText:(e,t)=>{e.application.endpointTempFilterText=t;return["application"]}});var lc=sc("components",{updateOne:(e,t,n,r,i)=>{e.components[t]={def:n,response:r};const a=n.api.method;const o=n.api.path;const s=n.query;const u=e.oas.client.spec.paths[o][a].parameters||[];e.components[t]["searchParameters"]=rl(u,e=>{if(e.in!=="query"){return false}if(!qu(s,t=>{return t.key===e.name})){return false}return true});if(n.pagination){e.components[t]["pagination"]={current:Number(i["x-pagination-current-page"]||0),size:Number(i["x-pagination-limit"]||0),max:Number(i["x-pagination-total-pages"]||0)}}if(ul(n.auto_refresh_sec)){e.components[t]["autoRefreshSec"]=n.auto_refresh_sec}if(n.style==="table"){const r=e.oas.client.spec.paths[o][a].responses[200].schema.items.properties;const i=[];fo(r,(e,t)=>{i.push(to({key:t},e))});e.components[t]["columns"]=i;const s=[];const u=[];fu(["put","post","delete"],t=>{const n=!!e.oas.client.spec.paths[o]&&e.oas.client.spec.paths[o][t];if(!n){return}s.push(to({method:t,path:o},n))});const l=n.primary;e.components[t]["primary"]=l;if(!!l){fu(["get","put","post","delete"],t=>{const n=!!e.oas.client.spec.paths[`${o}/{${l}}`]&&e.oas.client.spec.paths[`${o}/{${l}}`][t];if(!n){return}u.push(to({method:t,path:`${o}/{${l}}`},n))})}fu(n.actions||[],t=>{const n=t.indexOf(`{${l}}`)>=0;fu(["get","put","post","delete"],r=>{const i=!!e.oas.client.spec.paths[t]&&e.oas.client.spec.paths[t][r];if(!i){return}let a;if(n){a=u}else{a=s}a.push(to({method:r,path:t},i))})});e.components[t]["tableOperations"]=s;e.components[t]["rowOperations"]=u}if(n.style==="explorer"){const n=[];!!e.oas.client.spec.paths[o]&&e.oas.client.spec.paths[o]["post"]&&n.push(to({method:"post",path:o},e.oas.client.spec.paths[o]["post"]));!!e.oas.client.spec.paths[`${o}/{id}`]&&e.oas.client.spec.paths[`${o}/{id}`]["delete"]&&n.push(to({method:"delete",path:o},e.oas.client.spec.paths[`${o}/{id}`]["delete"]));e.components[t]["explorerOperations"]=n}return["components",t]},removeOne:(e,t)=>{delete e.components[t];return["components",t]},removeAll:e=>{e.components={};return["components"]}});var cc=n(function(t,n){"use strict";(function(e,n){if(typeof undefined==="function"&&undefined.amd){undefined([],n)}else{t.exports=n()}})(e,function(){var t={},n=typeof window!="undefined"?window:e,r=n.document,i="localStorage",a="script",o;t.disabled=false;t.version="1.3.20";t.set=function(e,t){};t.get=function(e,t){};t.has=function(e){return t.get(e)!==undefined};t.remove=function(e){};t.clear=function(){};t.transact=function(e,n,r){if(r==null){r=n;n=null}if(n==null){n={}}var i=t.get(e,n);r(i);t.set(e,i)};t.getAll=function(){};t.forEach=function(){};t.serialize=function(e){return JSON.stringify(e)};t.deserialize=function(e){if(typeof e!="string"){return undefined}try{return JSON.parse(e)}catch(t){return e||undefined}};function s(){try{return i in n&&n[i]}catch(e){return false}}if(s()){o=n[i];t.set=function(e,n){if(n===undefined){return t.remove(e)}o.setItem(e,t.serialize(n));return n};t.get=function(e,n){var r=t.deserialize(o.getItem(e));return r===undefined?n:r};t.remove=function(e){o.removeItem(e)};t.clear=function(){o.clear()};t.getAll=function(){var e={};t.forEach(function(t,n){e[t]=n});return e};t.forEach=function(e){for(var n=0;n<o.length;n++){var r=o.key(n);e(r,t.get(r))}}}else if(r&&r.documentElement.addBehavior){var u,l;try{l=new ActiveXObject("htmlfile");l.open();l.write("<"+a+">document.w=window</"+a+'><iframe src="/favicon.ico"></iframe>');l.close();u=l.w.frames[0].document;o=u.createElement("div")}catch(e){o=r.createElement("div");u=r.body}var c=function(e){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(o);u.appendChild(o);o.addBehavior("#default#userData");o.load(i);var r=e.apply(t,n);u.removeChild(o);return r}};var f=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");var d=function(e){return e.replace(/^d/,"___$&").replace(f,"___")};t.set=c(function(e,n,r){n=d(n);if(r===undefined){return t.remove(n)}e.setAttribute(n,t.serialize(r));e.save(i);return r});t.get=c(function(e,n,r){n=d(n);var i=t.deserialize(e.getAttribute(n));return i===undefined?r:i});t.remove=c(function(e,t){t=d(t);e.removeAttribute(t);e.save(i)});t.clear=c(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(i);for(var n=t.length-1;n>=0;n--){e.removeAttribute(t[n].name)}e.save(i)});t.getAll=function(e){var n={};t.forEach(function(e,t){n[e]=t});return n};t.forEach=c(function(e,n){var r=e.XMLDocument.documentElement.attributes;for(var i=0,a;a=r[i];++i){n(a.name,t.deserialize(e.getAttribute(a.name)))}})}try{var h="__storejs__";t.set(h,h);if(t.get(h)!=h){t.disabled=true}t.remove(h)}catch(e){t.disabled=true}t.enabled=!t.disabled;return t})});var fc=sc("current",{all:(e,t)=>{const n=e.application.version;e.current[n]=t;cc.set("current",e.current);return["current"]}});let dc=0;var hc=sc("drawers",{add:(e,t,n,r)=>{if(n===void 0)n={};if(r===void 0)r={};r.depth=++dc;const i={id:`drawer_${Date.now()}`,tagName:t,tagOpts:n,drawerOpts:r};e.drawers.push(i);return["drawers"]},remove:(e,t)=>{e.drawers=Kl(e.drawers,e=>{return e.id===t});return["drawers"]}});const vc=e=>{const t=9999;let n=[];fo(e,(e,r)=>{n.push({key:r,order:ul(e.order)?e.order:t})});n=tl(n,e=>{return e.order});fu(n,(t,n)=>{e[t.key].order=n});return e};var pc=sc("endpoints",{add:(e,t,n)=>{if(!ul(n.order)){n.order=-1}const r=e.application.version;let i=to({},e.endpoints[r]);i[t]=n;i=vc(i);e.endpoints[r]=i;cc.set("endpoints",e.endpoints);return["endpoints"]},remove:(e,t)=>{const n=e.application.version;let r=to({},e.endpoints[n]);delete r[t];r=vc(r);e.endpoints[n]=r;cc.set("endpoints",e.endpoints);return["endpoints"]},removeAll:e=>{const t=e.application.version;e.endpoints[t]={};cc.set("endpoints",e.endpoints);return["endpoints"]},update:(e,t,n)=>{const r=e.application.version;const i=e.endpoints[r];if(!n){delete i[t]}else{i[t]=to({},i[t],n)}cc.set("endpoints",e.endpoints);return["endpoints"]},updateToken:(e,t,n)=>{const r=e.application.version;const i=e.endpoints[r];if(!!i[t]){i[t].token=n}cc.set("endpoints",e.endpoints);return["endpoints"]},mergeAll:(e,t)=>{const n=e.application.version;let r=to({},e.endpoints[n]);fo(t,e=>{let t=Mu(r,t=>{return e.url===t.url});if(!t){const t=Js.generate();e.key=t;r[t]=e}else{to(t,e)}});r=vc(r);e.endpoints[n]=r;cc.set("endpoints",e.endpoints);return["endpoints"]},tidyUpOrder:e=>{const t=e.application.version;const n=vc(to({},e.endpoints[t]));e.endpoints[t]=n;cc.set("endpoints",e.endpoints);return["endpoints"]},changeOrder:(e,t,n)=>{const r=e.application.version;let i=to({},e.endpoints[r]);i[t].order=n-.5;i=vc(i);e.endpoints[r]=i;cc.set("endpoints",e.endpoints);return["endpoints"]},cleanup:e=>{const t=e.application.version;let n=to({},e.endpoints[t]);fo(n,(e,t)=>{if(!_o(e)){delete n[t]}});e.endpoints[t]=n;cc.set("endpoints",e.endpoints);return["endpoints"]}});var gc=sc("layout",{updateSize:(e,t,n)=>{e.layout.size.width=t;e.layout.size.height=n;if(t>jl.layoutThreshold){e.layout.type=jl.layoutTypeDesktop}else{e.layout.type=jl.layoutTypeMobile}return["layout"]},updateComponentsGridColumnCount:(e,t)=>{e.layout.componentsGridColumnCount=t;return["layout"]}});var mc=sc("location",{all:(e,t)=>{e.location=to({},e.location,t);return["location"]},name:(e,t)=>{e.location.name=t;return["location"]},route:(e,t)=>{e.location.route=t;return["location"]}});var yc=sc("mediapreviews",{add:(e,t,n)=>{if(t===void 0)t={};if(n===void 0)n={};e.mediapreviews.push({id:`mediapreview_${Date.now()}`,tagOpts:t,mediapreviewOpts:n});return["mediapreviews"]},remove:(e,t)=>{e.mediapreviews=Kl(e.mediapreviews,e=>{return e.id===t});return["mediapreviews"]}});var bc=sc("modals",{add:(e,t,n,r)=>{if(n===void 0)n={};if(r===void 0)r={};e.modals.push({id:`modal_${Date.now()}`,tagName:t,tagOpts:n,modalOpts:r});return["modals"]},remove:(e,t)=>{e.modals=Kl(e.modals,e=>{return e.id===t});return["modals"]}});var _c=sc("oas",{client:(e,t)=>{e.oas.client=t;return["oas"]},clearClient:e=>{e.oas.client=null;return["oas"]}});var wc=sc("page",{all:(e,t)=>{e.page=t;return["page"]}});var xc=sc("popovers",{add:(e,t,n,r)=>{if(n===void 0)n={};if(r===void 0)r={};e.popovers.push({id:`popover_${Date.now()}`,tagName:t,tagOpts:n,popoverOpts:to({direction:"T",width:100,x:0,y:0},r)});return["popovers"]},remove:(e,t)=>{e.popovers=Kl(e.popovers,e=>{return e.id===t});return["popovers"]},removeAll:e=>{e.popovers=[];return["popovers"]}});const Tc=()=>{return`toast_${Date.now()}`};const Cc=1e3;var kc=sc("toasts",{add:(e,t)=>{const n=to({timeout:Cc,autoHide:true},t,{id:Tc()});e.toasts.push(n);return["toasts"]},remove:(e,t)=>{e.toasts=Kl(e.toasts,e=>{return e.id===t});return["toasts"]}});var Sc=sc("ua",{all:(e,t)=>{e.ua=t;return["ua"]}});var Ec=sc("util",{components_refresh:e=>{e.util.components_refresh=e.util.components_refresh+1;return["util"]}});function Pc(e,t){if(t==null){return e}var n=-1,r=t.length;while(++n<r){if(Ku(e,t[n])===-1){e.push(t[n])}}return e}var Oc=Pc;var Mc=sc("viron",{all:(e,t)=>{if(!!t){t.sections=t.sections||[];if(!qu(t.sections,e=>{return e.id==="manage"})){t.sections=Oc([{id:"manage",label:Qe.t("word.manage")}],t.sections)}if(!qu(t.sections,e=>{return e.id==="dashboard"})){t.sections=Oc([{id:"dashboard",label:Qe.t("word.dashboard")}],t.sections)}}e.viron=t;return["viron"]}});var Ac=to({},uc,lc,fc,hc,pc,gc,mc,yc,bc,_c,wc,xc,kc,Sc,Ec,Mc);var Nc=(e,t)=>{const n={};n[e]=t;return n};var Rc=Nc("application",{version:(()=>{const e=new URL(window.location.href);if(e.hostname==="localhost"){return"local"}return e.pathname.replace(/viron/,"").replace(/\//g,"")})(),latestVersion:"v1",isLaunched:false,isNavigating:false,networkings:[],isNetworking:false,isDragging:false,isMenuOpened:true,endpointFilterText:"",endpointTempFilterText:""});var Dc=Nc("components",{});if(!_o(cc.get("current"))){cc.set("current",{})}var Lc=Nc("current",cc.get("current",{}));var Ic=Nc("drawers",[]);var Bc=Nc("endpoints",cc.get("endpoints",{}));var jc=Nc("layout",{type:(()=>{const e=window.innerWidth;if(e>jl.layoutThreshold){return jl.layoutTypeDesktop}return jl.layoutTypeMobile})(),size:{width:window.innerWidth,height:window.innerHeight},componentsGridColumnCount:(()=>{const e=window.getComputedStyle(document.querySelector("html"));const t=Number(e.getPropertyValue("--page-components-grid-column-count"));return t})()});var Fc=Nc("location",{name:"",route:{params:{},queries:{},hash:""}});var Hc=Nc("mediapreviews",[]);var zc=Nc("modals",[]);var Uc=Nc("oas",{client:null});var Vc=Nc("page",null);var Wc=Nc("popovers",[]);var qc=Nc("signinShowKey",null);var Yc=Nc("toasts",[]);var Kc=Nc("ua",{});var $c=Nc("util",{components_refresh:0});var Gc=Nc("viron",null);var Xc=to({},Rc,Dc,Lc,Ic,Bc,jc,Fc,Hc,zc,Uc,Vc,Wc,qc,Yc,Kc,$c,Gc);const Zc=e=>{return`component_${e}`};var Jc={init:()=>{return Promise.resolve().then(()=>{const e=new Ga.Store({state:Xc,actions:Fu,mutations:Ac,getters:oc});Ga.add(e);return e})}};i.tag2("viron-icon-search",'<svg viewbox="-3434 14059.999 15.999 16.003"> <path d="M3710.818-13811.056l-3.051-3.05a6.957,6.957,0,0,1-3.768,1.1,7.008,7.008,0,0,1-7-7,7.008,7.008,0,0,1,7-7,7.008,7.008,0,0,1,7,7,6.957,6.957,0,0,1-1.107,3.773l3.051,3.049a.205.205,0,0,1,0,.284l-1.839,1.839a.206.206,0,0,1-.142.058A.206.206,0,0,1,3710.818-13811.056ZM3700-13820a4,4,0,0,0,4,4,4,4,0,0,0,4-4,4,4,0,0,0-4-4A4,4,0,0,0,3700-13820Z" transform="translate(-7131 27887)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconSearch {opts.class}"',function(e){});i.tag2("viron-icon-reload",'<svg viewbox="-1791 11377 14.063 16"> <path d="M43.991,5.189a.469.469,0,0,0-.679-.126L41.791,6.2a.469.469,0,0,0-.123.613,4.082,4.082,0,0,1,.582,2.09,4.219,4.219,0,1,1-8.437,0,4.224,4.224,0,0,1,3.75-4.193v1.38a.469.469,0,0,0,.75.375l3.75-2.812a.469.469,0,0,0,0-.75L38.312.094a.469.469,0,0,0-.75.375V1.891a7.049,7.049,0,1,0,6.428,3.3Z" transform="translate(-1822 11377)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconReload {opts.class}"',function(e){});var Qc=function(){this.handleTap=(()=>{if(this.opts.isdisabled){return}if(!this.opts.onselect){return}this.opts.onselect()})};i.tag2("viron-button",'<div class="Button__label">{opts.label}</div>',"",'class="Button Button--{opts.theme || \'primary\'} {\'Button--disabled\' : opts.isdisabled} {opts.class}" onclick="{getClickHandler(\'handleTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleTap\')}"',function(e){this.external(Qc)});i.tag2("viron-icon-arrow-left",'<svg viewbox="-3581 14060.002 10.04 16.002"> <path d="M1793.942-16723.971l-7.4-7.4-.018-.023-.385-.385a.2.2,0,0,1,0-.281l7.8-7.8a.2.2,0,0,1,.281,0l1.84,1.84a.2.2,0,0,1,0,.281l-5.82,5.82,5.82,5.816a.2.2,0,0,1,0,.287l-1.84,1.84a.2.2,0,0,1-.141.057A.2.2,0,0,1,1793.942-16723.971Z" transform="translate(-5367.083 30799.918)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconArrowLeft {opts.class}"',function(e){});i.tag2("viron-icon-arrow-right",'<svg viewbox="-3551.038 14059.998 10.039 16.002"> <path d="M1763.979-16723.969l-7.394-7.4a.291.291,0,0,1-.022-.025l-.381-.383a.2.2,0,0,1,0-.281l7.8-7.8a.2.2,0,0,1,.286,0l1.836,1.84a.191.191,0,0,1,0,.277l-5.819,5.822,5.819,5.818a.2.2,0,0,1,0,.287l-1.836,1.84a.21.21,0,0,1-.143.057A.21.21,0,0,1,1763.979-16723.969Z" transform="translate(-1784.878 -2663.914) rotate(180)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconArrowRight {opts.class}"',function(e){});i.tag2("viron-icon-dots",'<svg viewbox="-3614 14066 16 4"> <g transform="translate(-3894 14025)"> <circle cx="2" cy="2" r="2" transform="translate(280 41)"></circle> <circle cx="2" cy="2" r="2" transform="translate(286 41)"></circle> <circle cx="2" cy="2" r="2" transform="translate(292 41)"></circle> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconDots {opts.class}"',function(e){});function ef(e,t,n){var r=-1;while(++r<e){if(t.call(n,r)===false){break}}}var tf=ef;var nf=function(){this.getIsSimpleMode=(()=>{return this.opts.max<=this.opts.size});this.getBasePages=(()=>{const e=this.opts.size;const t=this.opts.current;const n=this.opts.max;if(this.getIsSimpleMode()){const e=[];tf(n,n=>{n=n+1;e.push({num:n,isSelected:n===t})});return e}let r=t-Math.floor(e/2);let i=t+Math.floor(e/2)-(e%2?0:1);if(r<1){i=i+Math.abs(r+1);r=1}if(i>n){r=r-(i-n);i=n}const a=[];for(let e=r;e<=i;e++){a.push({num:e,isSelected:e===t})}return a});this.handlePrevButtonTap=(()=>{if(!this.opts.onchange){return}if(this.opts.current===1){return}let e=this.opts.current-1;if(e<1){e=1}this.opts.onchange(e)});this.handleFirstPageButtonTap=(()=>{if(!this.opts.onchange){return}this.opts.onchange(1)});this.handleRecedeButtonTap=(()=>{if(!this.opts.onchange){return}let e=this.opts.current-this.opts.size;if(e<1){e=1}this.opts.onchange(e)});this.handlePageButtonTap=(e=>{if(!this.opts.onchange){return}const t=e.item.page.num;this.opts.onchange(t)});this.handleProceedButtonTap=(()=>{if(!this.opts.onchange){return}let e=this.opts.current+this.opts.size;if(e>this.opts.max){e=this.opts.max}this.opts.onchange(e)});this.handleLastPageButtonTap=(()=>{if(!this.opts.onchange){return}this.opts.onchange(this.opts.max)});this.handleNextButtonTap=(()=>{if(!this.opts.onchange){return}if(this.opts.current===this.opts.max){return}let e=this.opts.current+1;if(e>this.opts.max){e=this.opts.max}this.opts.onchange(e)})};i.tag2("viron-pagination",'<div class="Pagination__control"> <virtual if="{getIsSimpleMode()}"> <div class="Pagination__button {\'Pagination__button--disabled\': opts.current === 1}" onclick="{getClickHandler(\'handlePrevButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePrevButtonTap\')}"> <viron-icon-arrow-left></viron-icon-arrow-left> </div> <div class="Pagination__button {\'Pagination__button--selected\': page.isSelected}" each="{page in getBasePages()}" onclick="{getClickHandler(\'handlePageButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePageButtonTap\')}">{page.num}</div> <div class="Pagination__button {\'Pagination__button--disabled\': opts.current === opts.max}" onclick="{getClickHandler(\'handleNextButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleNextButtonTap\')}"> <viron-icon-arrow-right></viron-icon-arrow-right> </div> </virtual> <virtual if="{!getIsSimpleMode()}"> <div class="Pagination__button {\'Pagination__button--disabled\': opts.current === 1}" onclick="{getClickHandler(\'handlePrevButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePrevButtonTap\')}"> <viron-icon-arrow-left></viron-icon-arrow-left> </div> <div class="Pagination__button" if="{getBasePages()[0].num !== 1}" onclick="{getClickHandler(\'handleFirstPageButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleFirstPageButtonTap\')}">1</div> <div class="Pagination__button Pagination__button--moderate" if="{getBasePages()[0].num &gt;= 3}" onclick="{getClickHandler(\'handleRecedeButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleRecedeButtonTap\')}"> <viron-icon-dots class="Pagination__dotsIcon"></viron-icon-dots> <viron-icon-arrow-left class="Pagination__arrowIcon"></viron-icon-arrow-left> </div> <div class="Pagination__button {\'Pagination__button--selected\': page.isSelected}" each="{page in getBasePages()}" onclick="{getClickHandler(\'handlePageButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePageButtonTap\')}">{page.num}</div> <div class="Pagination__button Pagination__button--moderate" if="{getBasePages()[getBasePages().length - 1].num &lt;= opts.max - 2}" onclick="{getClickHandler(\'handleProceedButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleProceedButtonTap\')}"> <viron-icon-dots class="Pagination__dotsIcon"></viron-icon-dots> <viron-icon-arrow-right class="Pagination__arrowIcon"></viron-icon-arrow-right> </div> <div class="Pagination__button" if="{getBasePages()[getBasePages().length - 1].num !== opts.max}" onclick="{getClickHandler(\'handleLastPageButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleLastPageButtonTap\')}">{opts.max}</div> <div class="Pagination__button {\'Pagination__button--disabled\': opts.current === opts.max}" onclick="{getClickHandler(\'handleNextButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleNextButtonTap\')}"> <viron-icon-arrow-right></viron-icon-arrow-right> </div> </virtual> </div>',"",'class="Pagination {opts.class}"',function(e){this.external(nf)});function rf(){return rf.get()}rf.get=typeof Date.now==="function"?Date.now:function(){return+new Date};var af=rf;function of(e,t){var n,r,i,a,o,s=0;function u(){s=af();r=null;i=e.apply(n,a)}function l(){n=this;a=arguments;o=t-(af()-s);if(o<=0){clearTimeout(r);u()}else if(!r){r=setTimeout(u,o)}return i}l.cancel=function(){clearTimeout(r)};return l}var sf=of;i.tag2("viron-icon-arrow-down",'<svg viewbox="-3523.999 14062.964 16.004 10.037"> <path d="M1736.94-16726.932l-5.963-5.963-1.433-1.432-.019-.023-.384-.385a.2.2,0,0,1,0-.281l7.8-7.8a.2.2,0,0,1,.281,0l1.84,1.84a.2.2,0,0,1,0,.277l-5.82,5.824,5.82,5.818a.205.205,0,0,1,0,.283l-1.84,1.84a.2.2,0,0,1-.141.061A.2.2,0,0,1,1736.94-16726.932Z" transform="translate(13218.876 15802.083) rotate(-90)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconArrowDown {opts.class}"',function(e){});i.tag2("viron-icon-arrow-up",'<svg viewbox="-3494.002 14063 16.002 10.037"> <path d="M1706.943-16726.971l-5.963-5.963-1.433-1.434a.122.122,0,0,1-.019-.021l-.384-.385a.2.2,0,0,1,0-.283l7.8-7.8a.2.2,0,0,1,.281,0l1.84,1.842a.2.2,0,0,1,0,.281l-5.82,5.82,5.82,5.818a.2.2,0,0,1,0,.281l-1.84,1.842a.2.2,0,0,1-.141.059A.2.2,0,0,1,1706.943-16726.971Z" transform="translate(-20220.914 12363.916) rotate(90)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconArrowUp {opts.class}"',function(e){});i.tag2("viron-icon-check",'<svg viewbox="-2582 10792 15.997 11.266"> <g transform="translate(-2935 10688)"> <g transform="translate(122.702 -49.51)"> <rect width="12.32" height="2.989" rx="0.2" transform="translate(235.47 162.221) rotate(-45)"></rect> <rect width="9.682" height="2.989" rx="0.2" transform="translate(232.412 155.815) rotate(45)"></rect> </g> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconCheck {opts.class}"',function(e){});i.tag2("viron-icon-close",'<svg viewbox="-3644.002 14060.002 16.001 16.002"> <path d="M1859.9-16723.971l-5.819-5.822-5.818,5.818a.2.2,0,0,1-.281,0l-1.84-1.842a.2.2,0,0,1,0-.281l5.818-5.816-5.818-5.82a.2.2,0,0,1,0-.281l1.84-1.84a.2.2,0,0,1,.281,0l5.818,5.818,5.82-5.818a.2.2,0,0,1,.286,0l1.84,1.84a.2.2,0,0,1,0,.281l-5.823,5.82,5.819,5.82a.2.2,0,0,1,0,.283l-1.836,1.84a.21.21,0,0,1-.143.057A.21.21,0,0,1,1859.9-16723.971Z" transform="translate(-5490.083 30799.918)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconClose {opts.class}"',function(e){});i.tag2("viron-icon-down",'<svg viewbox="-9481.5 13487.999 7.4 4.2"> <path d="M.8,5.6a.553.553,0,0,0-.4.9L3.6,9.7a.6.6,0,0,0,.4.1.6.6,0,0,0,.4-.1L7.6,6.5c.2-.3,0-.9-.4-.9Z" transform="translate(-9481.778 13482.399)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconDown {opts.class}"',function(e){});i.tag2("viron-icon-edit",'<svg viewbox="-3404.002 14060.125 15.979 15.873"> <path d="M1816-16708.127a.946.946,0,0,1-1-1v-12a.946.946,0,0,1,1-1h9.5l-2.6,2.6h-5.3v8.8h8.8v-5.2l2.6-2.6v9.4a.942.942,0,0,1-1,1Zm5.3-5.9c-.1,0-.1,0-.1-.1-.2,0-.2-.1-.2-.1v-1.9c0-.1.1-.2.3-.2a.1.1,0,0,1,.1.1l1.8,1.795c.1.1,0,.2,0,.3l-.1.1Zm2.5-1-1.8-1.9a.189.189,0,0,1,0-.3l4.7-4.7a.2.2,0,0,1,.3,0l1.8,1.8a.189.189,0,0,1,0,.3l-4.7,4.8Zm5.7-5.7-1.8-1.8a.194.194,0,0,1,0-.3l1.1-1.1a.19.19,0,0,1,.3,0l1.8,1.8a.189.189,0,0,1,0,.3l-1.1,1.1a.219.219,0,0,1-.151.072A.219.219,0,0,1,1829.5-16720.723Z" transform="translate(-5219 30784.125)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconEdit {opts.class}"',function(e){});i.tag2("viron-icon-exclamation-circle",'<svg viewbox="-2882 10816 16 16"> <g transform="translate(-3247 10632.5)"> <g transform="translate(365 183.5)"> <circle cx="8" cy="8" r="8"></circle> <circle cx="8" cy="8" r="7.25"></circle> </g> <g transform="translate(9.621 -0.445)"> <rect width="5" height="2" rx="0.4" transform="translate(362.379 192.945) rotate(-90)"></rect> <rect width="2" height="2" rx="0.4" transform="translate(362.379 195.945) rotate(-90)"></rect> </g> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconExclamationCircle {opts.class}"',function(e){});i.tag2("viron-icon-filter",'<svg viewbox="-1832 11377 16.002 16"> <g transform="translate(-2104 11230)"> <rect width="12" height="1.5" rx="0.4" transform="translate(276 154.25)"></rect> <rect width="6" height="1.5" rx="0.4" transform="translate(282 148.75)"></rect> <rect width="12" height="1.5" rx="0.4" transform="translate(284 161.25) rotate(180)"></rect> <path d="M4700.5-19588a2.5,2.5,0,0,1-2.5-2.5,2.5,2.5,0,0,1,2.5-2.5,2.506,2.506,0,0,1,2.5,2.5A2.5,2.5,0,0,1,4700.5-19588Zm0-3a.5.5,0,0,0-.5.5.5.5,0,0,0,.5.5.5.5,0,0,0,.5-.5A.5.5,0,0,0,4700.5-19591Z" transform="translate(-4426 19745.5)"></path> <path d="M4700.5-19588a2.5,2.5,0,0,1-2.5-2.5,2.5,2.5,0,0,1,2.5-2.5,2.506,2.506,0,0,1,2.5,2.5A2.5,2.5,0,0,1,4700.5-19588Zm0-3a.5.5,0,0,0-.5.5.5.5,0,0,0,.5.5.5.5,0,0,0,.5-.5A.5.5,0,0,0,4700.5-19591Z" transform="translate(-4415 19751)"></path> <path d="M4700.5-19588a2.5,2.5,0,0,1-2.5-2.5,2.5,2.5,0,0,1,2.5-2.5,2.506,2.506,0,0,1,2.5,2.5A2.5,2.5,0,0,1,4700.5-19588Zm0-3a.5.5,0,0,0-.5.5.5.5,0,0,0,.5.5.5.5,0,0,0,.5-.5A.5.5,0,0,0,4700.5-19591Z" transform="translate(-4420.501 19740)"></path> <rect width="7" height="1.5" rx="0.4" transform="translate(272 148.75)"></rect> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconFilter {opts.class}"',function(e){});i.tag2("viron-icon-logo",'<svg viewbox="0 0 200 184.62"> <path class="IconLogo__right" d="M200,43a43,43,0,0,0-80.28-21.5L63.87,118.26a43,43,0,1,0,73.38,44.85l.06,0,56.93-98.61h0A42.77,42.77,0,0,0,200,43Z"></path> <path class="IconLogo__left" d="M100,55.63l0,.06L80.28,21.53a43,43,0,1,0-74.5,43h0L62.7,163.16l.06,0a43,43,0,0,0,74.49,0l.06,0,12.4-21.48Z"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconLogo {opts.class}"',function(e){});i.tag2("viron-icon-menu",'<svg viewbox="-3635 13999.001 24 9.4"> <g transform="translate(-3357.6 14031.401) rotate(180)"> <rect width="16" height="3" rx="0.4" transform="translate(261.4 29.4)"></rect> <rect width="16" height="3" rx="0.4" transform="translate(253.4 23)"></rect> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconMenu {opts.class}"',function(e){});i.tag2("viron-icon-menu-invert",'<svg viewbox="-3595 13999.001 24 9.4"> <g transform="translate(-3317.6 14031.401) rotate(180)"> <rect width="16" height="3" rx="0.4" transform="translate(253.4 29.4)"></rect> <rect class="cls-1" width="16" height="3" rx="0.4" transform="translate(261.4 23)"></rect> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconMenuInvert {opts.class}"',function(e){});i.tag2("viron-icon-move",'<svg viewbox="-1076 13435 16 16"> <path d="M15.83,7.6,13.545,5.317a.571.571,0,0,0-.973.4V6.862H9.143V3.434h1.143a.568.568,0,0,0,.4-.973L8.4.175a.561.561,0,0,0-.8,0L5.312,2.46a.571.571,0,0,0,.4.973H6.857V6.862H3.429V5.719a.568.568,0,0,0-.973-.4L.17,7.6a.561.561,0,0,0,0,.8l2.286,2.286a.572.572,0,0,0,.973-.4V9.148H6.857v3.429H5.714a.568.568,0,0,0-.4.973L7.6,15.835a.561.561,0,0,0,.8,0l2.286-2.286a.572.572,0,0,0-.4-.973H9.143V9.148h3.429v1.143a.568.568,0,0,0,.973.4L15.83,8.407a.561.561,0,0,0,0-.8Z" transform="translate(-1076 13434.995)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconMove {opts.class}"',function(e){});i.tag2("viron-icon-plus",'<svg viewbox="-2612 10790 16 16"> <g transform="translate(-3874 10766)"> <rect width="16" height="3" rx="0.2" transform="translate(1262 30.5)"></rect> <rect width="16" height="3" rx="0.2" transform="translate(1271.5 24) rotate(90)"></rect> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconPlus {opts.class}"',function(e){});i.tag2("viron-icon-plus-circle",'<svg viewbox="-2912 10816 16 16"> <g transform="translate(-3277 10632.5)"> <g transform="translate(365 183.5)"> <circle cx="8" cy="8" r="8"></circle> <circle cx="8" cy="8" r="7.25"></circle> </g> <g transform="translate(9.621 -0.445)"> <rect width="8" height="2" rx="0.4" transform="translate(367.379 192.945) rotate(180)"></rect> <rect width="8" height="2" rx="0.4" transform="translate(362.379 195.945) rotate(-90)"></rect> </g> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconPlusCircle {opts.class}"',function(e){});i.tag2("viron-icon-setting",'<svg viewbox="-3464 14060 16 16.001"> <path d="M15.953,7.112a.521.521,0,0,0-.514-.394,1.767,1.767,0,0,1-1.209-3.075.444.444,0,0,0,.049-.6A7.916,7.916,0,0,0,13.01,1.76a.445.445,0,0,0-.608.049,1.844,1.844,0,0,1-2,.448A1.777,1.777,0,0,1,9.327.521.444.444,0,0,0,8.934.053a7.987,7.987,0,0,0-1.8,0,.445.445,0,0,0-.4.458,1.78,1.78,0,0,1-1.1,1.707,1.849,1.849,0,0,1-1.98-.451.446.446,0,0,0-.6-.051,7.946,7.946,0,0,0-1.294,1.28.445.445,0,0,0,.048.608,1.773,1.773,0,0,1,.447,2A1.85,1.85,0,0,1,.518,6.677a.435.435,0,0,0-.462.393,8.014,8.014,0,0,0,0,1.819.529.529,0,0,0,.525.393,1.755,1.755,0,0,1,1.646,1.1,1.779,1.779,0,0,1-.447,1.978.445.445,0,0,0-.049.6,7.945,7.945,0,0,0,1.266,1.28.445.445,0,0,0,.609-.048A1.841,1.841,0,0,1,5.6,13.743,1.774,1.774,0,0,1,6.679,15.48a.444.444,0,0,0,.393.467,7.962,7.962,0,0,0,1.8,0,.445.445,0,0,0,.4-.458,1.778,1.778,0,0,1,1.095-1.706,1.846,1.846,0,0,1,1.981.451.447.447,0,0,0,.6.05,7.965,7.965,0,0,0,1.294-1.28.444.444,0,0,0-.048-.608,1.773,1.773,0,0,1-.448-2,1.791,1.791,0,0,1,1.637-1.085l.1,0a.445.445,0,0,0,.468-.392A8.007,8.007,0,0,0,15.953,7.112ZM8.015,10.686a2.669,2.669,0,1,1,2.668-2.669A2.671,2.671,0,0,1,8.015,10.686Z" transform="translate(-3464.003 14060)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconSetting {opts.class}"',function(e){});i.tag2("viron-icon-square",'<svg viewbox="-3674 14061 15.998 13.998"> <path d="M1869-16726h-14a1,1,0,0,1-1-1v-12a1,1,0,0,1,1-1h14a1,1,0,0,1,1,1v12A1,1,0,0,1,1869-16726Zm-12-11v8h10v-8Z" transform="translate(-5528 30801)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconSquare {opts.class}"',function(e){});i.tag2("viron-icon-star",'<svg viewbox="-1994 12644 16 15.329"> <path d="M15.652,7.994a1.148,1.148,0,0,0-.636-1.957l-3.874-.563A.506.506,0,0,1,10.76,5.2L9.028,1.686a1.147,1.147,0,0,0-2.058,0L5.238,5.2a.507.507,0,0,1-.382.277L.983,6.037A1.148,1.148,0,0,0,.346,7.994l2.8,2.732a.507.507,0,0,1,.146.449l-.661,3.858a1.123,1.123,0,0,0,.25.93,1.159,1.159,0,0,0,1.414.279l3.465-1.822a.519.519,0,0,1,.472,0L11.7,16.242a1.136,1.136,0,0,0,.534.134,1.151,1.151,0,0,0,.88-.413,1.123,1.123,0,0,0,.25-.93L12.7,11.175a.507.507,0,0,1,.146-.449Z" transform="translate(-1993.999 12642.953)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconStar {opts.class}"',function(e){});i.tag2("viron-icon-up",'<svg viewbox="-9451.9 13487.801 7.4 4.2"> <path d="M.8,5.6a.553.553,0,0,0-.4.9L3.6,9.7a.6.6,0,0,0,.4.1.6.6,0,0,0,.4-.1L7.6,6.5c.2-.3,0-.9-.4-.9Z" transform="translate(-9444.222 13497.601) rotate(180)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconUp {opts.class}"',function(e){});var uf=function(){this.handlePositiveSelect=(()=>{this.close();if(!this.opts.onPositiveSelect){return}this.opts.onPositiveSelect()});this.handleNegativeSelect=(()=>{this.close();if(!this.opts.onNegativeSelect){return}this.opts.onNegativSselect()})};i.tag2("viron-dialog",'<div class="Dialog__icon" if="{!!opts.icon}"> <div data-is="viron-icon-{opts.icon}"></div> </div> <div class="Dialog__title" if="{!!opts.title}">{opts.title}</div> <div class="Dialog__message" if="{!!opts.message}">{opts.message}</div> <div class="Dialog__control"> <viron-button label="{opts.labelPositive || \'OK\'}" onselect="{handlePositiveSelect}"></viron-button> <viron-button label="{opts.labelNegative || \'„Ç≠„É£„É≥„Çª„É´\'}" theme="ghost" onselect="{handleNegativeSelect}"></viron-button> </div>',"",'class="Dialog"',function(e){this.external(uf)});var lf=n(function(e){(function(t,n){{e.exports=n()}})("clipboard",function(){if(typeof document==="undefined"||!document.addEventListener){return null}var t={};t.copy=function(){var e=false;var t=null;var n=false;function r(){e=false;t=null;if(n){window.getSelection().removeAllRanges()}n=false}document.addEventListener("copy",function(n){if(e){for(var r in t){n.clipboardData.setData(r,t[r])}n.preventDefault()}});function i(){var e=document.getSelection();if(!document.queryCommandEnabled("copy")&&e.isCollapsed){var t=document.createRange();t.selectNodeContents(document.body);e.removeAllRanges();e.addRange(t);n=true}}return function(n){return new Promise(function(a,o){e=true;if(typeof n==="string"){t={"text/plain":n}}else if(n instanceof Node){t={"text/html":(new XMLSerializer).serializeToString(n)}}else if(n instanceof Object){t=n}else{o("Invalid data type. Must be string, DOM node, or an object mapping MIME types to strings.")}function s(e){try{if(document.execCommand("copy")){r();a()}else{if(!e){i();s(true)}else{r();throw new Error("Unable to copy. Perhaps it's not available in your browser?")}}}catch(e){r();o(e)}}s(false)})}}();t.paste=function(){var e=false;var t;var n;document.addEventListener("paste",function(r){if(e){e=false;r.preventDefault();var i=t;t=null;i(r.clipboardData.getData(n))}});return function(r){return new Promise(function(i,a){e=true;t=i;n=r||"text/plain";try{if(!document.execCommand("paste")){e=false;a(new Error("Unable to paste. Pasting only works in Internet Explorer at the moment."))}}catch(t){e=false;a(new Error(t))}})}}();if(typeof ClipboardEvent==="undefined"&&typeof window.clipboardData!=="undefined"&&typeof window.clipboardData.setData!=="undefined"){(function(t){function n(e,t){return function(){e.apply(t,arguments)}}function r(e){if("object"!=typeof this){throw new TypeError("Promises must be constructed via new")}if("function"!=typeof e){throw new TypeError("not a function")}this._state=null,this._value=null,this._deferreds=[],l(e,n(a,this),n(o,this))}function i(e){var t=this;return null===this._state?void this._deferreds.push(e):void c(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n){return void(t._state?e.resolve:e.reject)(t._value)}var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)})}function a(e){try{if(e===this){throw new TypeError("A promise cannot be resolved with itself.")}if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t){return void l(n(t,e),n(a,this),n(o,this))}}this._state=!0,this._value=e,s.call(this)}catch(e){o.call(this,e)}}function o(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;t>e;e++){i.call(this,this._deferreds[e])}this._deferreds=null}function u(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function l(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r){return}r=!0,n(e)}}var c=r.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)},f=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};r.prototype["catch"]=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=this;return new r(function(r,a){i.call(n,new u(e,t,r,a))})},r.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&f(arguments[0])?arguments[0]:arguments);return new r(function(t,n){function r(a,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s){return void s.call(o,function(e){r(a,e)},n)}}e[a]=o,0===--i&&t(e)}catch(e){n(e)}}if(0===e.length){return t([])}for(var i=e.length,a=0;a<e.length;a++){r(a,e[a])}})},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){for(var r=0,i=e.length;i>r;r++){e[r].then(t,n)}})},"undefined"!="object"&&e.exports?e.exports=r:t.Promise||(t.Promise=r)})(this);t.copy=function(e){return new Promise(function(t,n){if(typeof e!=="string"&&!("text/plain"in e)){throw new Error("You must provide a text/plain type.")}var r=typeof e==="string"?e:e["text/plain"];var i=window.clipboardData.setData("Text",r);if(i){t()}else{n(new Error("Copying was rejected."))}})};t.paste=function(){return new Promise(function(e,t){var n=window.clipboardData.getData("Text");if(n){e(n)}else{t(new Error("Pasting was rejected."))}})}}return t})});var cf=function(){const e=this.riotx.get();this.isMobile=e.getter("layout.isMobile");this.selectedId=this.opts.initialSelectedId;this.selectedPath=qu(this.opts.list,e=>{return e.id===this.selectedId}).url;this.list=this.opts.list||[];this.hasPagination=false;this.isPrevEnabled=false;this.isNextEnabled=false;this.isReady=!this.isMobile;this.on("mount",()=>{setTimeout(()=>{this.isReady=true;this.update()},1e3)});const t=()=>{this.hasPagination=this.list.length>1;if(!this.hasPagination){return}const e=Vu(this.list,e=>{return e.id===this.selectedId});this.isPrevEnabled=e>0;this.isNextEnabled=e<this.list.length-1};t();this.handleCloseTap=(()=>{this.close()});this.handleDeleteTap=(()=>{if(!this.opts.isDeletable){return}if(!this.opts.onDelete){return}const e=()=>{this.close()};this.opts.onDelete(this.selectedId,e)});let n=true;const r=t=>{if(this.isMobile||!n){return}Promise.resolve().then(()=>{return lf.copy(t)}).then(()=>e.action("toasts.add",{message:"„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü„ÄÇ"})).catch(()=>{n=false;e.action("toasts.add",{type:"error",message:"„Åî‰ΩøÁî®‰∏≠„ÅÆ„Éñ„É©„Ç¶„Ç∂„Åß„ÅØ„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„ÉºÂá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ"})})};this.handleIdTap=(()=>{r(this.selectedId)});this.handlePathTap=(()=>{r(this.selectedPath)});this.handleInsertTap=(()=>{this.close();if(!this.opts.onInsert){return}this.opts.onInsert(this.selectedId)});this.handlePrevTap=(()=>{if(!this.isPrevEnabled){return}const e=Vu(this.list,e=>{return e.id===this.selectedId});let n=e-1;if(n<0){n=0}this.selectedId=this.list[n].id;this.selectedPath=qu(this.opts.list,e=>{return e.id===this.selectedId}).url;t();this.update()});this.handleNextTap=(()=>{if(!this.isNextEnabled){return}const e=Vu(this.list,e=>{return e.id===this.selectedId});let n=e+1;if(n>this.list.length-1){n=this.list.length-1}this.selectedId=this.list[n].id;this.selectedPath=qu(this.opts.list,e=>{return e.id===this.selectedId}).url;t();this.update()})};i.tag2("viron-explorer-detail",'<div class="Explorer_Detail__head"> <div class="Explorer_Detail__close" onclick="{getClickHandler(\'handleCloseTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleCloseTap\')}"> <viron-icon-close></viron-icon-close> </div> <div class="Explorer_Detail__delete" if="{opts.isDeletable}" onclick="{getClickHandler(\'handleDeleteTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleDeleteTap\')}">ÂâäÈô§</div> </div> <div class="Explorer_Detail__body"> <div class="Explorer_Detail__inner" if="{isReady}"> <div class="Explorer_Detail__image {\'Explorer_Detail__image--small\': isMobile}" riot-style="background-image:url({selectedPath});"></div> <div class="Explorer_Detail__infos"> <div class="Explorer_Detail__info"> <div class="Explorer_Detail__infoLabel">ID</div> <div class="Explorer_Detail__infoValue" onclick="{getClickHandler(\'handleIdTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleIdTap\')}">{selectedId}</div> </div> <div class="Explorer_Detail__info"> <div class="Explorer_Detail__infoLabel">„Åì„ÅÆÁîªÂÉè„ÅÆ„Ç¢„Éâ„É¨„Çπ</div> <div class="Explorer_Detail__infoValue" onclick="{getClickHandler(\'handlePathTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePathTap\')}">{selectedPath}</div> </div> </div> <viron-button if="{opts.isInsertable}" label="„Åì„ÅÆÁîªÂÉè„ÇíÊåøÂÖ•" onselect="{handleInsertTap}"></viron-button> </div> </div> <div class="Explorer_Detail__tail" if="{hasPagination}"> <div class="Explorer_Detail__pageButton {\'Explorer_Detail__pageButton--disabled\': !isPrevEnabled}" onclick="{getClickHandler(\'handlePrevTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePrevTap\')}"> <viron-icon-arrow-left></viron-icon-arrow-left> </div> <div class="Explorer_Detail__pageButton {\'Explorer_Detail__pageButton--disabled\': !isNextEnabled}" onclick="{getClickHandler(\'handleNextTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleNextTap\')}"> <viron-icon-arrow-right></viron-icon-arrow-right> </div> </div>',"",'class="Explorer_Detail"',function(e){this.external(cf)});var ff=function(){const e=this.riotx.get();const t=()=>{const e=this.refs.list;if(!!e){const t=e.getBoundingClientRect();const n=Math.floor(t.width/100)||1;document.documentElement.style.setProperty("--component-explorer-column-min-count",n)}};const n=()=>{setTimeout(()=>{t()},100)};const r=t=>{if(!t&&this.hasPagination){t={};const e=this.pagination.size;const n=this.pagination.current;t.limit=e;t.offset=(n-1)*e}const r=to({},this.searchQueries,t);return Promise.resolve().then(()=>{this.isLoading=true;this.update()}).then(()=>Promise.all([new Promise(e=>setTimeout(e,300)),e.action("components.get",this.opts.id,this.opts.def,r)])).then(()=>{this.isLoading=false;this.update()}).then(()=>{n()}).catch(e=>{this.isLoading=false;if(e.status===401){this.error="Ë™çË®º„Ç®„É©„Éº„ÄÇ"}else{const e=this.opts.def.api;this.error=`[${e.method.toUpperCase()} ${e.path}]ÈÄö‰ø°„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ`}this.update()})};const i=e=>{if(!e){return"„É¨„Çπ„Éù„É≥„Çπ„Éá„Éº„Çø„Å´Ë™§„Çä„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ"}return null};this.inputId=`Explorer__input${this._riot_id}`;this.isDragWatching=false;this.data=null;this.postOperation=null;this.deleteOperation=null;this.isLoading=true;this.error=null;this.hasPagination=false;this.pagination=null;this.paginationSize=e.getter("layout.isDesktop")?5:3;this.autoRefreshSec=null;let a=null;const o=()=>{if(!this.autoRefreshSec){return}if(a){return}a=window.setInterval(()=>{r()},this.autoRefreshSec*1e3)};const s=()=>{window.clearInterval(a);a=null};this.isMobile=e.getter("layout.isMobile");this.listen("layout",()=>{this.paginationSize=e.getter("layout.isDesktop")?5:3;this.isMobile=e.getter("layout.isMobile");this.update()});this.listen(this.opts.id,()=>{this.data=e.getter("components.response",this.opts.id);this.postOperation=e.getter("components.postOperation",this.opts.id,"explorer");this.deleteOperation=e.getter("components.deleteOperation",this.opts.id,"explorer");this.error=i(this.data);this.hasPagination=e.getter("components.hasPagination",this.opts.id);this.pagination=e.getter("components.pagination",this.opts.id);this.autoRefreshSec=e.getter("components.autoRefreshSec",this.opts.id);o();this.update()});this.refreshId=e.getter("util.components_refresh");this.listen("util",()=>{const t=e.getter("util.components_refresh");if(this.refreshId!==t){this.refreshId=t;r()}});const u=sf(()=>{n()},1e3);this.on("mount",()=>{r();window.addEventListener("resize",u)}).on("unmount",()=>{s();e.action("components.remove",this.opts.id);window.addEventListener("resize",u)});this.handleFileChange=((e,t)=>{let n;if(t){n=e.dataTransfer.files}else{n=e.target.files}if(!n.length){this.refs.form.reset();return}const r=n[0];if(r.type.indexOf("image/")!==0){return}l(r)});const l=t=>{const n=qu(this.postOperation.parameters,e=>{return e.type==="file"});if(!n){return}const i=n.name;const a={};a[i]=t;Promise.resolve().then(()=>e.action("components.operate",this.postOperation,a)).then(()=>{this.refs.form.reset()}).then(()=>{return e.action("toasts.add",{message:"ÁîªÂÉè„ÇíËøΩÂä†„Åó„Åæ„Åó„Åü„ÄÇ"})}).then(()=>{if(!this.hasPagination){r()}else{const e={};const t=this.pagination.size;const n=1;e.limit=t;e.offset=(n-1)*t;r(e)}}).catch(t=>{if(t.status===401){return e.action("modals.add","viron-error",{title:"Ë™çË®ºÂàá„Çå"}).then(()=>{this.getRouter().navigateTo("/")})}return e.action("modals.add","viron-error",{error:t})})};const c=t=>{if(!t){return}const n=qu(this.deleteOperation.parameters,e=>{return e.in==="path"});if(!n){return}const i=n.name;const a={};a[i]=t;Promise.resolve().then(()=>e.action("components.operate",this.deleteOperation,a)).then(()=>{return e.action("toasts.add",{message:"ÁîªÂÉè„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü„ÄÇ"})}).then(()=>{this.selectedItem=null;if(!this.hasPagination){r()}else{const e={};const t=this.pagination.size;const n=1;e.limit=t;e.offset=(n-1)*t;r(e)}}).catch(t=>{if(t.status===401){return e.action("modals.add","viron-error",{title:"Ë™çË®ºÂàá„Çå"}).then(()=>{this.getRouter().navigateTo("/")})}return e.action("modals.add","viron-error",{error:t})})};this.handleDropareaTap=(()=>{this.refs.label.click()});this.handleHandlerDragEnter=(e=>{e.preventDefault();this.isDragWatching=true;this.update()});this.handleHandlerDragOver=(e=>{e.preventDefault()});this.handleHandlerDragLeave=(()=>{this.isDragWatching=false;this.update()});this.handleHandlerDrop=(e=>{e.preventDefault();this.isDragWatching=false;this.update();this.handleFileChange(e,true)});this.handleLabelTap=(e=>{e.stopPropagation()});this.handleItemTap=(t=>{e.action("drawers.add","viron-explorer-detail",{initialSelectedId:t.item.item.id,list:this.data,isDeletable:!!this.deleteOperation,onDelete:(t,n)=>{Promise.resolve().then(()=>e.action("modals.add","viron-dialog",{title:"ÁîªÂÉè„ÇíÂÆåÂÖ®„Å´ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü",message:"ÁîªÂÉè„ÇíÂâäÈô§„Åó„ÅüÂæå„ÅØÂÖÉ„Å´Êàª„Åô‰∫ã„Åå„Åß„Åç„Åæ„Åõ„Çì„ÄÇ„Åì„ÅÆÁîªÂÉè„ÇíÂÆåÂÖ®„Å´ÂâäÈô§„Åó„Å¶„ÇÇ„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü",onPositiveSelect:()=>{n();c(t)}}))},isInsertable:!!this.opts.oninsert,onInsert:e=>{this.opts.oninsert&&this.opts.oninsert(qu(this.data,t=>{return t.id===e}));this.close()}},{isNarrow:true})});this.handlePaginationChange=(e=>{this.selectedItem=null;const t=this.pagination.size;r({limit:t,offset:(e-1)*t})})};i.tag2("viron-explorer",'<div class="Explorer__head"> <div class="Explorer__title">{opts.def.name || \'ÁîªÂÉè„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ\'}</div> <div class="Explorer__control"></div> </div> <div class="Explorer__body"> <div class="Explorer__label">„É©„Ç§„Éñ„É©„É™</div> <virtual if="{isLoading}"> <div class="Explorer__progressWrapper"> <div class="Explorer__progress"> <viron-icon-reload></viron-icon-reload> </div> </div> </virtual> <virtual if="{!isLoading}"> <virtual if="{!!error}"> <div class="Explorer__error">{error}</div> </virtual> <virtual if="{!error}"> <div class="Explorer__content"> <form class="Explorer__droparea {\'Explorer__droparea--active\': isDragWatching, \'Explorer__droparea--mini\': isMobile}" if="{!!postOperation}" ref="form" onclick="{getClickHandler(\'handleDropareaTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleDropareaTap\')}"> <input class="Explorer__input" type="file" id="{inputId}" accept="image/*" onchange="{handleFileChange}"> <div class="Explorer__dropareaLabel" if="{!isMobile}">„Åì„Åì„Å´„Éï„Ç°„Ç§„É´„Çí„Éâ„É≠„ÉÉ„Éó„Åó„Å¶ËøΩÂä†„Åß„Åç„Åæ„Åô</div> <div class="Explorer__dragHandler" ondragenter="{handleHandlerDragEnter}" ondragover="{handleHandlerDragOver}" ondragleave="{handleHandlerDragLeave}" ondrop="{handleHandlerDrop}"></div> <label class="Explorer__dropareaButton" ref="label" for="{inputId}" onclick="{getClickHandler(\'handleLabelTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleLabelTap\')}">„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû</label> </form> <div class="Explorer__list" if="{!!data &amp;&amp; !!data.length}" ref="list"> <div class="Explorer__item" each="{item, idx in data}" riot-style="background-image:url({item.url});" onclick="{getClickHandler(\'handleItemTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleItemTap\')}"></div> </div> </div> </virtual> </virtual> </div> <div class="Explorer__tail" if="{hasPagination}"> <viron-pagination max="{pagination.max}" size="{paginationSize}" current="{pagination.current}" onchange="{handlePaginationChange}"></viron-pagination> </div> <div class="Explorer__blocker" if="{isLoading}"></div>',"",'class="Explorer"',function(e){this.external(ff)});var df=n(function(e){!function(){var t={version:"3.5.17"};var n=[].slice,r=function(e){return n.call(e)};var i=this.document;function a(e){return e&&(e.ownerDocument||e.document||e).documentElement}function o(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(i){try{r(i.documentElement.childNodes)[0].nodeType}catch(e){r=function(e){var t=e.length,n=new Array(t);while(t--){n[t]=e[t]}return n}}}if(!Date.now){Date.now=function(){return+new Date}}if(i){try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var s=this.Element.prototype,u=s.setAttribute,l=s.setAttributeNS,c=this.CSSStyleDeclaration.prototype,f=c.setProperty;s.setAttribute=function(e,t){u.call(this,e,t+"")};s.setAttributeNS=function(e,t,n){l.call(this,e,t,n+"")};c.setProperty=function(e,t,n){f.call(this,e,t+"",n)}}}t.ascending=d;function d(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}t.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};t.min=function(e,t){var n=-1,r=e.length,i,a;if(arguments.length===1){while(++n<r){if((a=e[n])!=null&&a>=a){i=a;break}}while(++n<r){if((a=e[n])!=null&&i>a){i=a}}}else{while(++n<r){if((a=t.call(e,e[n],n))!=null&&a>=a){i=a;break}}while(++n<r){if((a=t.call(e,e[n],n))!=null&&i>a){i=a}}}return i};t.max=function(e,t){var n=-1,r=e.length,i,a;if(arguments.length===1){while(++n<r){if((a=e[n])!=null&&a>=a){i=a;break}}while(++n<r){if((a=e[n])!=null&&a>i){i=a}}}else{while(++n<r){if((a=t.call(e,e[n],n))!=null&&a>=a){i=a;break}}while(++n<r){if((a=t.call(e,e[n],n))!=null&&a>i){i=a}}}return i};t.extent=function(e,t){var n=-1,r=e.length,i,a,o;if(arguments.length===1){while(++n<r){if((a=e[n])!=null&&a>=a){i=o=a;break}}while(++n<r){if((a=e[n])!=null){if(i>a){i=a}if(o<a){o=a}}}}else{while(++n<r){if((a=t.call(e,e[n],n))!=null&&a>=a){i=o=a;break}}while(++n<r){if((a=t.call(e,e[n],n))!=null){if(i>a){i=a}if(o<a){o=a}}}}return[i,o]};function h(e){return e===null?NaN:+e}function v(e){return!isNaN(e)}t.sum=function(e,t){var n=0,r=e.length,i,a=-1;if(arguments.length===1){while(++a<r){if(v(i=+e[a])){n+=i}}}else{while(++a<r){if(v(i=+t.call(e,e[a],a))){n+=i}}}return n};t.mean=function(e,t){var n=0,r=e.length,i,a=-1,o=r;if(arguments.length===1){while(++a<r){if(v(i=h(e[a]))){n+=i}else{--o}}}else{while(++a<r){if(v(i=h(t.call(e,e[a],a)))){n+=i}else{--o}}}if(o){return n/o}};t.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],a=n-r;return a?i+a*(e[r]-i):i};t.median=function(e,n){var r=[],i=e.length,a,o=-1;if(arguments.length===1){while(++o<i){if(v(a=h(e[o]))){r.push(a)}}}else{while(++o<i){if(v(a=h(n.call(e,e[o],o)))){r.push(a)}}}if(r.length){return t.quantile(r.sort(d),.5)}};t.variance=function(e,t){var n=e.length,r=0,i,a,o=0,s=-1,u=0;if(arguments.length===1){while(++s<n){if(v(i=h(e[s]))){a=i-r;r+=a/++u;o+=a*(i-r)}}}else{while(++s<n){if(v(i=h(t.call(e,e[s],s)))){a=i-r;r+=a/++u;o+=a*(i-r)}}}if(u>1){return o/(u-1)}};t.deviation=function(){var e=t.variance.apply(this,arguments);return e?Math.sqrt(e):e};function p(e){return{left:function(t,n,r,i){if(arguments.length<3){r=0}if(arguments.length<4){i=t.length}while(r<i){var a=r+i>>>1;if(e(t[a],n)<0){r=a+1}else{i=a}}return r},right:function(t,n,r,i){if(arguments.length<3){r=0}if(arguments.length<4){i=t.length}while(r<i){var a=r+i>>>1;if(e(t[a],n)>0){i=a}else{r=a+1}}return r}}}var g=p(d);t.bisectLeft=g.left;t.bisect=t.bisectRight=g.right;t.bisector=function(e){return p(e.length===1?function(t,n){return d(e(t),n)}:e)};t.shuffle=function(e,t,n){if((r=arguments.length)<3){n=e.length;if(r<2){t=0}}var r=n-t,i,a;while(r){a=Math.random()*r--|0;i=e[r+t],e[r+t]=e[a+t],e[a+t]=i}return e};t.permute=function(e,t){var n=t.length,r=new Array(n);while(n--){r[n]=e[t[n]]}return r};t.pairs=function(e){var t=0,n=e.length-1,r,i=e[0],a=new Array(n<0?0:n);while(t<n){a[t]=[r=i,i=e[++t]]}return a};t.transpose=function(e){if(!(o=e.length)){return[]}for(var n=-1,r=t.min(e,m),i=new Array(r);++n<r;){for(var a=-1,o,s=i[n]=new Array(o);++a<o;){s[a]=e[a][n]}}return i};function m(e){return e.length}t.zip=function(){return t.transpose(arguments)};t.keys=function(e){var t=[];for(var n in e){t.push(n)}return t};t.values=function(e){var t=[];for(var n in e){t.push(e[n])}return t};t.entries=function(e){var t=[];for(var n in e){t.push({key:n,value:e[n]})}return t};t.merge=function(e){var t=e.length,n,r=-1,i=0,a,o;while(++r<t){i+=e[r].length}a=new Array(i);while(--t>=0){o=e[t];n=o.length;while(--n>=0){a[--i]=o[n]}}return a};var y=Math.abs;t.range=function(e,t,n){if(arguments.length<3){n=1;if(arguments.length<2){t=e;e=0}}if((t-e)/n===Infinity){throw new Error("infinite range")}var r=[],i=b(y(n)),a=-1,o;e*=i,t*=i,n*=i;if(n<0){while((o=e+n*++a)>t){r.push(o/i)}}else{while((o=e+n*++a)<t){r.push(o/i)}}return r};function b(e){var t=1;while(e*t%1){t*=10}return t}function _(e,t){for(var n in t){Object.defineProperty(e.prototype,n,{value:t[n],enumerable:false})}}t.map=function(e,t){var n=new w;if(e instanceof w){e.forEach(function(e,t){n.set(e,t)})}else if(Array.isArray(e)){var r=-1,i=e.length,a;if(arguments.length===1){while(++r<i){n.set(r,e[r])}}else{while(++r<i){n.set(t.call(e,a=e[r],r),a)}}}else{for(var o in e){n.set(o,e[o])}}return n};function w(){this._=Object.create(null)}var x="__proto__",T="\0";_(w,{has:S,get:function(e){return this._[C(e)]},set:function(e,t){return this._[C(e)]=t},remove:E,keys:P,values:function(){var e=[];for(var t in this._){e.push(this._[t])}return e},entries:function(){var e=[];for(var t in this._){e.push({key:k(t),value:this._[t]})}return e},size:O,empty:M,forEach:function(e){for(var t in this._){e.call(this,k(t),this._[t])}}});function C(e){return(e+="")===x||e[0]===T?T+e:e}function k(e){return(e+="")[0]===T?e.slice(1):e}function S(e){return C(e)in this._}function E(e){return(e=C(e))in this._&&delete this._[e]}function P(){var e=[];for(var t in this._){e.push(k(t))}return e}function O(){var e=0;for(var t in this._){++e}return e}function M(){for(var e in this._){return false}return true}t.nest=function(){var e={},n=[],r=[],i,a;function o(t,r,s){if(s>=n.length){return a?a.call(e,r):i?r.sort(i):r}var u=-1,l=r.length,c=n[s++],f,d,h,v=new w,p;while(++u<l){if(p=v.get(f=c(d=r[u]))){p.push(d)}else{v.set(f,[d])}}if(t){d=t();h=function(e,n){d.set(e,o(t,n,s))}}else{d={};h=function(e,n){d[e]=o(t,n,s)}}v.forEach(h);return d}function s(e,t){if(t>=n.length){return e}var i=[],a=r[t++];e.forEach(function(e,n){i.push({key:e,values:s(n,t)})});return a?i.sort(function(e,t){return a(e.key,t.key)}):i}e.map=function(e,t){return o(t,e,0)};e.entries=function(e){return s(o(t.map,e,0),0)};e.key=function(t){n.push(t);return e};e.sortKeys=function(t){r[n.length-1]=t;return e};e.sortValues=function(t){i=t;return e};e.rollup=function(t){a=t;return e};return e};t.set=function(e){var t=new A;if(e){for(var n=0,r=e.length;n<r;++n){t.add(e[n])}}return t};function A(){this._=Object.create(null)}_(A,{has:S,add:function(e){this._[C(e+="")]=true;return e},remove:E,values:P,size:O,empty:M,forEach:function(e){for(var t in this._){e.call(this,k(t))}}});t.behavior={};function N(e){return e}t.rebind=function(e,t){var n=1,r=arguments.length,i;while(++n<r){e[i=arguments[n]]=R(e,t,t[i])}return e};function R(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function D(e,t){if(t in e){return t}t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=L.length;n<r;++n){var i=L[n]+t;if(i in e){return i}}}var L=["webkit","ms","moz","Moz","o","O"];function I(){}t.dispatch=function(){var e=new B,t=-1,n=arguments.length;while(++t<n){e[arguments[t]]=j(e)}return e};function B(){}B.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0){r=e.slice(n+1);e=e.slice(0,n)}if(e){return arguments.length<2?this[e].on(r):this[e].on(r,t)}if(arguments.length===2){if(t==null){for(e in this){if(this.hasOwnProperty(e)){this[e].on(r,null)}}}return this}};function j(e){var t=[],n=new w;function r(){var n=t,r=-1,i=n.length,a;while(++r<i){if(a=n[r].on){a.apply(this,arguments)}}return e}r.on=function(r,i){var a=n.get(r),o;if(arguments.length<2){return a&&a.on}if(a){a.on=null;t=t.slice(0,o=t.indexOf(a)).concat(t.slice(o+1));n.remove(r)}if(i){t.push(n.set(r,{on:i}))}return e};return r}t.event=null;function F(){t.event.preventDefault()}function H(){var e=t.event,n;while(n=e.sourceEvent){e=n}return e}function z(e){var n=new B,r=0,i=arguments.length;while(++r<i){n[arguments[r]]=j(n)}n.of=function(r,i){return function(a){try{var o=a.sourceEvent=t.event;a.target=e;t.event=a;n[a.type].apply(r,i)}finally{t.event=o}}};return n}t.requote=function(e){return e.replace(U,"\\$&")};var U=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var V={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t){e[n]=t[n]}};function W(e){V(e,$);return e}var q=function(e,t){return t.querySelector(e)},Y=function(e,t){return t.querySelectorAll(e)},K=function(e,t){var n=e.matches||e[D(e,"matchesSelector")];K=function(e,t){return n.call(e,t)};return K(e,t)};if(typeof Sizzle==="function"){q=function(e,t){return Sizzle(e,t)[0]||null};Y=Sizzle;K=Sizzle.matchesSelector}t.selection=function(){return t.select(i.documentElement)};var $=t.selection.prototype=[];$.select=function(e){var t=[],n,r,i,a;e=G(e);for(var o=-1,s=this.length;++o<s;){t.push(n=[]);n.parentNode=(i=this[o]).parentNode;for(var u=-1,l=i.length;++u<l;){if(a=i[u]){n.push(r=e.call(a,a.__data__,u,o));if(r&&"__data__"in a){r.__data__=a.__data__}}else{n.push(null)}}}return W(t)};function G(e){return typeof e==="function"?e:function(){return q(e,this)}}$.selectAll=function(e){var t=[],n,i;e=X(e);for(var a=-1,o=this.length;++a<o;){for(var s=this[a],u=-1,l=s.length;++u<l;){if(i=s[u]){t.push(n=r(e.call(i,i.__data__,u,a)));n.parentNode=i}}}return W(t)};function X(e){return typeof e==="function"?e:function(){return Y(e,this)}}var Z="http://www.w3.org/1999/xhtml";var J={svg:"http://www.w3.org/2000/svg",xhtml:Z,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};t.ns={prefix:J,qualify:function(e){var t=e.indexOf(":"),n=e;if(t>=0&&(n=e.slice(0,t))!=="xmlns"){e=e.slice(t+1)}return J.hasOwnProperty(n)?{space:J[n],local:e}:e}};$.attr=function(e,n){if(arguments.length<2){if(typeof e==="string"){var r=this.node();e=t.ns.qualify(e);return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}for(n in e){this.each(Q(n,e[n]))}return this}return this.each(Q(e,n))};function Q(e,n){e=t.ns.qualify(e);function r(){this.removeAttribute(e)}function i(){this.removeAttributeNS(e.space,e.local)}function a(){this.setAttribute(e,n)}function o(){this.setAttributeNS(e.space,e.local,n)}function s(){var t=n.apply(this,arguments);if(t==null){this.removeAttribute(e)}else{this.setAttribute(e,t)}}function u(){var t=n.apply(this,arguments);if(t==null){this.removeAttributeNS(e.space,e.local)}else{this.setAttributeNS(e.space,e.local,t)}}return n==null?e.local?i:r:typeof n==="function"?e.local?u:s:e.local?o:a}function ee(e){return e.trim().replace(/\s+/g," ")}$.classed=function(e,t){if(arguments.length<2){if(typeof e==="string"){var n=this.node(),r=(e=ne(e)).length,i=-1;if(t=n.classList){while(++i<r){if(!t.contains(e[i])){return false}}}else{t=n.getAttribute("class");while(++i<r){if(!te(e[i]).test(t)){return false}}}return true}for(t in e){this.each(re(t,e[t]))}return this}return this.each(re(e,t))};function te(e){return new RegExp("(?:^|\\s+)"+t.requote(e)+"(?:\\s+|$)","g")}function ne(e){return(e+"").trim().split(/^|\s+/)}function re(e,t){e=ne(e).map(ie);var n=e.length;function r(){var r=-1;while(++r<n){e[r](this,t)}}function i(){var r=-1,i=t.apply(this,arguments);while(++r<n){e[r](this,i)}}return typeof t==="function"?i:r}function ie(e){var t=te(e);return function(n,r){if(i=n.classList){return r?i.add(e):i.remove(e)}var i=n.getAttribute("class")||"";if(r){t.lastIndex=0;if(!t.test(i)){n.setAttribute("class",ee(i+" "+e))}}else{n.setAttribute("class",ee(i.replace(t," ")))}}}$.style=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!=="string"){if(r<2){t=""}for(n in e){this.each(ae(n,e[n],t))}return this}if(r<2){var i=this.node();return o(i).getComputedStyle(i,null).getPropertyValue(e)}n=""}return this.each(ae(e,t,n))};function ae(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function a(){var r=t.apply(this,arguments);if(r==null){this.style.removeProperty(e)}else{this.style.setProperty(e,r,n)}}return t==null?r:typeof t==="function"?a:i}$.property=function(e,t){if(arguments.length<2){if(typeof e==="string"){return this.node()[e]}for(t in e){this.each(oe(t,e[t]))}return this}return this.each(oe(e,t))};function oe(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);if(n==null){delete this[e]}else{this[e]=n}}return t==null?n:typeof t==="function"?i:r}$.text=function(e){return arguments.length?this.each(typeof e==="function"?function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}:e==null?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent};$.html=function(e){return arguments.length?this.each(typeof e==="function"?function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML};$.append=function(e){e=se(e);return this.select(function(){return this.appendChild(e.apply(this,arguments))})};function se(e){function n(){var t=this.ownerDocument,n=this.namespaceURI;return n===Z&&t.documentElement.namespaceURI===Z?t.createElement(e):t.createElementNS(n,e)}function r(){return this.ownerDocument.createElementNS(e.space,e.local)}return typeof e==="function"?e:(e=t.ns.qualify(e)).local?r:n}$.insert=function(e,t){e=se(e);t=G(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})};$.remove=function(){return this.each(ue)};function ue(){var e=this.parentNode;if(e){e.removeChild(this)}}$.data=function(e,t){var n=-1,r=this.length,i,a;if(!arguments.length){e=new Array(r=(i=this[0]).length);while(++n<r){if(a=i[n]){e[n]=a.__data__}}return e}function o(e,n){var r,i=e.length,a=n.length,o=Math.min(i,a),c=new Array(a),f=new Array(a),d=new Array(i),h,v;if(t){var p=new w,g=new Array(i),m;for(r=-1;++r<i;){if(h=e[r]){if(p.has(m=t.call(h,h.__data__,r))){d[r]=h}else{p.set(m,h)}g[r]=m}}for(r=-1;++r<a;){if(!(h=p.get(m=t.call(n,v=n[r],r)))){f[r]=le(v)}else if(h!==true){c[r]=h;h.__data__=v}p.set(m,true)}for(r=-1;++r<i;){if(r in g&&p.get(g[r])!==true){d[r]=e[r]}}}else{for(r=-1;++r<o;){h=e[r];v=n[r];if(h){h.__data__=v;c[r]=h}else{f[r]=le(v)}}for(;r<a;++r){f[r]=le(n[r])}for(;r<i;++r){d[r]=e[r]}}f.update=c;f.parentNode=c.parentNode=d.parentNode=e.parentNode;s.push(f);u.push(c);l.push(d)}var s=he([]),u=W([]),l=W([]);if(typeof e==="function"){while(++n<r){o(i=this[n],e.call(i,i.parentNode.__data__,n))}}else{while(++n<r){o(i=this[n],e)}}u.enter=function(){return s};u.exit=function(){return l};return u};function le(e){return{__data__:e}}$.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")};$.filter=function(e){var t=[],n,r,i;if(typeof e!=="function"){e=ce(e)}for(var a=0,o=this.length;a<o;a++){t.push(n=[]);n.parentNode=(r=this[a]).parentNode;for(var s=0,u=r.length;s<u;s++){if((i=r[s])&&e.call(i,i.__data__,s,a)){n.push(i)}}}return W(t)};function ce(e){return function(){return K(this,e)}}$.order=function(){for(var e=-1,t=this.length;++e<t;){for(var n=this[e],r=n.length-1,i=n[r],a;--r>=0;){if(a=n[r]){if(i&&i!==a.nextSibling){i.parentNode.insertBefore(a,i)}i=a}}}return this};$.sort=function(e){e=fe.apply(this,arguments);for(var t=-1,n=this.length;++t<n;){this[t].sort(e)}return this.order()};function fe(e){if(!arguments.length){e=d}return function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}$.each=function(e){return de(this,function(t,n,r){e.call(t,t.__data__,n,r)})};function de(e,t){for(var n=0,r=e.length;n<r;n++){for(var i=e[n],a=0,o=i.length,s;a<o;a++){if(s=i[a]){t(s,a,n)}}}return e}$.call=function(e){var t=r(arguments);e.apply(t[0]=this,t);return this};$.empty=function(){return!this.node()};$.node=function(){for(var e=0,t=this.length;e<t;e++){for(var n=this[e],r=0,i=n.length;r<i;r++){var a=n[r];if(a){return a}}}return null};$.size=function(){var e=0;de(this,function(){++e});return e};function he(e){V(e,ve);return e}var ve=[];t.selection.enter=he;t.selection.enter.prototype=ve;ve.append=$.append;ve.empty=$.empty;ve.node=$.node;ve.call=$.call;ve.size=$.size;ve.select=function(e){var t=[],n,r,i,a,o;for(var s=-1,u=this.length;++s<u;){i=(a=this[s]).update;t.push(n=[]);n.parentNode=a.parentNode;for(var l=-1,c=a.length;++l<c;){if(o=a[l]){n.push(i[l]=r=e.call(a.parentNode,o.__data__,l,s));r.__data__=o.__data__}else{n.push(null)}}}return W(t)};ve.insert=function(e,t){if(arguments.length<2){t=pe(this)}return $.insert.call(this,e,t)};function pe(e){var t,n;return function(r,i,a){var o=e[a].update,s=o.length,u;if(a!=n){n=a,t=0}if(i>=t){t=i+1}while(!(u=o[t])&&++t<s){}return u}}t.select=function(e){var t;if(typeof e==="string"){t=[q(e,i)];t.parentNode=i.documentElement}else{t=[e];t.parentNode=a(e)}return W([t])};t.selectAll=function(e){var t;if(typeof e==="string"){t=r(Y(e,i));t.parentNode=i.documentElement}else{t=r(e);t.parentNode=null}return W([t])};$.on=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!=="string"){if(r<2){t=false}for(n in e){this.each(ge(n,e[n],t))}return this}if(r<2){return(r=this.node()["__on"+e])&&r._}n=false}return this.each(ge(e,t,n))};function ge(e,n,i){var a="__on"+e,o=e.indexOf("."),s=ye;if(o>0){e=e.slice(0,o)}var u=me.get(e);if(u){e=u,s=be}function l(){var t=this[a];if(t){this.removeEventListener(e,t,t.$);delete this[a]}}function c(){var t=s(n,r(arguments));l.call(this);this.addEventListener(e,this[a]=t,t.$=i);t._=n}function f(){var n=new RegExp("^__on([^.]+)"+t.requote(e)+"$"),r;for(var i in this){if(r=i.match(n)){var a=this[i];this.removeEventListener(r[1],a,a.$);delete this[i]}}}return o?n?c:l:n?I:f}var me=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(i){me.forEach(function(e){if("on"+e in i){me.remove(e)}})}function ye(e,n){return function(r){var i=t.event;t.event=r;n[0]=this.__data__;try{e.apply(this,n)}finally{t.event=i}}}function be(e,t){var n=ye(e,t);return function(e){var t=this,r=e.relatedTarget;if(!r||r!==t&&!(r.compareDocumentPosition(t)&8)){n.call(t,e)}}}var _e,we=0;function xe(e){var n=".dragsuppress-"+ ++we,r="click"+n,i=t.select(o(e)).on("touchmove"+n,F).on("dragstart"+n,F).on("selectstart"+n,F);if(_e==null){_e="onselectstart"in e?false:D(e.style,"userSelect")}if(_e){var s=a(e).style,u=s[_e];s[_e]="none"}return function(e){i.on(n,null);if(_e){s[_e]=u}if(e){var t=function(){i.on(r,null)};i.on(r,function(){F();t()},true);setTimeout(t,0)}}}t.mouse=function(e){return Ce(e,H())};var Te=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ce(e,n){if(n.changedTouches){n=n.changedTouches[0]}var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(Te<0){var a=o(e);if(a.scrollX||a.scrollY){r=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var s=r[0][0].getScreenCTM();Te=!(s.f||s.e);r.remove()}}if(Te){i.x=n.pageX,i.y=n.pageY}else{i.x=n.clientX,i.y=n.clientY}i=i.matrixTransform(e.getScreenCTM().inverse());return[i.x,i.y]}var u=e.getBoundingClientRect();return[n.clientX-u.left-e.clientLeft,n.clientY-u.top-e.clientTop]}t.touch=function(e,t,n){if(arguments.length<3){n=t,t=H().changedTouches}if(t){for(var r=0,i=t.length,a;r<i;++r){if((a=t[r]).identifier===n){return Ce(e,a)}}}};t.behavior.drag=function(){var e=z(a,"drag","dragstart","dragend"),n=null,r=s(I,t.mouse,o,"mousemove","mouseup"),i=s(ke,t.touch,N,"touchmove","touchend");function a(){this.on("mousedown.drag",r).on("touchstart.drag",i)}function s(r,i,a,o,s){return function(){var u=this,l=t.event.target.correspondingElement||t.event.target,c=u.parentNode,f=e.of(u,arguments),d=0,h=r(),v=".drag"+(h==null?"":"-"+h),p,g=t.select(a(l)).on(o+v,b).on(s+v,_),m=xe(l),y=i(c,h);if(n){p=n.apply(u,arguments);p=[p.x-y[0],p.y-y[1]]}else{p=[0,0]}f({type:"dragstart"});function b(){var e=i(c,h),t,n;if(!e){return}t=e[0]-y[0];n=e[1]-y[1];d|=t|n;y=e;f({type:"drag",x:e[0]+p[0],y:e[1]+p[1],dx:t,dy:n})}function _(){if(!i(c,h)){return}g.on(o+v,null).on(s+v,null);m(d);f({type:"dragend"})}}}a.origin=function(e){if(!arguments.length){return n}n=e;return a};return t.rebind(a,e,"on")};function ke(){return t.event.changedTouches[0].identifier}t.touches=function(e,t){if(arguments.length<2){t=H().touches}return t?r(t).map(function(t){var n=Ce(e,t);n.identifier=t.identifier;return n}):[]};var Se=1e-6,Ee=Se*Se,Pe=Math.PI,Oe=2*Pe,Me=Oe-Se,Ae=Pe/2,Ne=Pe/180,Re=180/Pe;function De(e){return e>0?1:e<0?-1:0}function Le(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Ie(e){return e>1?0:e<-1?Pe:Math.acos(e)}function Be(e){return e>1?Ae:e<-1?-Ae:Math.asin(e)}function je(e){return((e=Math.exp(e))-1/e)/2}function Fe(e){return((e=Math.exp(e))+1/e)/2}function He(e){return((e=Math.exp(2*e))-1)/(e+1)}function ze(e){return(e=Math.sin(e/2))*e}var Ue=Math.SQRT2,Ve=2,We=4;t.interpolateZoom=function(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],o=t[1],s=t[2],u=a-n,l=o-r,c=u*u+l*l,f,d;if(c<Ee){d=Math.log(s/i)/Ue;f=function(e){return[n+e*u,r+e*l,i*Math.exp(Ue*e*d)]}}else{var h=Math.sqrt(c),v=(s*s-i*i+We*c)/(2*i*Ve*h),p=(s*s-i*i-We*c)/(2*s*Ve*h),g=Math.log(Math.sqrt(v*v+1)-v),m=Math.log(Math.sqrt(p*p+1)-p);d=(m-g)/Ue;f=function(e){var t=e*d,a=Fe(g),o=i/(Ve*h)*(a*He(Ue*t+g)-je(g));return[n+o*u,r+o*l,i*a/Fe(Ue*t+g)]}}f.duration=d*1e3;return f};t.behavior.zoom=function(){var e={x:0,y:0,k:1},n,r,a,s=[960,500],u=qe,l=250,c=0,f="mousedown.zoom",d="mousemove.zoom",h="mouseup.zoom",v,p="touchstart.zoom",g,m=z(x,"zoomstart","zoom","zoomend"),y,b,_,w;if(!Ke){Ke="onwheel"in i?(Ye=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(Ye=function(){return t.event.wheelDelta},"mousewheel"):(Ye=function(){return-t.event.detail},"MozMousePixelScroll")}function x(e){e.on(f,N).on(Ke+".zoom",D).on("dblclick.zoom",L).on(p,R)}x.event=function(n){n.each(function(){var n=m.of(this,arguments),i=e;if(Au){t.select(this).transition().each("start.zoom",function(){e=this.__chart__||{x:0,y:0,k:1};O(n)}).tween("zoom:zoom",function(){var a=s[0],o=s[1],u=r?r[0]:a/2,l=r?r[1]:o/2,c=t.interpolateZoom([(u-e.x)/e.k,(l-e.y)/e.k,a/e.k],[(u-i.x)/i.k,(l-i.y)/i.k,a/i.k]);return function(t){var r=c(t),i=a/r[2];this.__chart__=e={x:u-r[0]*i,y:l-r[1]*i,k:i};M(n)}}).each("interrupt.zoom",function(){A(n)}).each("end.zoom",function(){A(n)})}else{this.__chart__=e;O(n);M(n);A(n)}})};x.translate=function(t){if(!arguments.length){return[e.x,e.y]}e={x:+t[0],y:+t[1],k:e.k};P();return x};x.scale=function(t){if(!arguments.length){return e.k}e={x:e.x,y:e.y,k:null};k(+t);P();return x};x.scaleExtent=function(e){if(!arguments.length){return u}u=e==null?qe:[+e[0],+e[1]];return x};x.center=function(e){if(!arguments.length){return a}a=e&&[+e[0],+e[1]];return x};x.size=function(e){if(!arguments.length){return s}s=e&&[+e[0],+e[1]];return x};x.duration=function(e){if(!arguments.length){return l}l=+e;return x};x.x=function(t){if(!arguments.length){return b}b=t;y=t.copy();e={x:0,y:0,k:1};return x};x.y=function(t){if(!arguments.length){return w}w=t;_=t.copy();e={x:0,y:0,k:1};return x};function T(t){return[(t[0]-e.x)/e.k,(t[1]-e.y)/e.k]}function C(t){return[t[0]*e.k+e.x,t[1]*e.k+e.y]}function k(t){e.k=Math.max(u[0],Math.min(u[1],t))}function S(t,n){n=C(n);e.x+=t[0]-n[0];e.y+=t[1]-n[1]}function E(n,i,a,o){n.__chart__={x:e.x,y:e.y,k:e.k};k(Math.pow(2,o));S(r=i,a);n=t.select(n);if(l>0){n=n.transition().duration(l)}n.call(x.event)}function P(){if(b){b.domain(y.range().map(function(t){return(t-e.x)/e.k}).map(y.invert))}if(w){w.domain(_.range().map(function(t){return(t-e.y)/e.k}).map(_.invert))}}function O(e){if(!c++){e({type:"zoomstart"})}}function M(t){P();t({type:"zoom",scale:e.k,translate:[e.x,e.y]})}function A(e){if(!--c){e({type:"zoomend"}),r=null}}function N(){var e=this,n=m.of(e,arguments),r=0,i=t.select(o(e)).on(d,u).on(h,l),a=T(t.mouse(e)),s=xe(e);Su.call(e);O(n);function u(){r=1;S(t.mouse(e),a);M(n)}function l(){i.on(d,null).on(h,null);s(r);A(n)}}function R(){var n=this,r=m.of(n,arguments),i={},a=0,o,s=".zoom-"+t.event.changedTouches[0].identifier,u="touchmove"+s,l="touchend"+s,c=[],d=t.select(n),h=xe(n);y();O(r);d.on(f,null).on(p,y);function v(){var r=t.touches(n);o=e.k;r.forEach(function(e){if(e.identifier in i){i[e.identifier]=T(e)}});return r}function y(){var r=t.event.target;t.select(r).on(u,b).on(l,_);c.push(r);var o=t.event.changedTouches;for(var s=0,f=o.length;s<f;++s){i[o[s].identifier]=null}var d=v(),h=Date.now();if(d.length===1){if(h-g<500){var p=d[0];E(n,p,i[p.identifier],Math.floor(Math.log(e.k)/Math.LN2)+1);F()}g=h}else if(d.length>1){var p=d[0],m=d[1],y=p[0]-m[0],w=p[1]-m[1];a=y*y+w*w}}function b(){var e=t.touches(n),s,u,l,c;Su.call(n);for(var f=0,d=e.length;f<d;++f,c=null){l=e[f];if(c=i[l.identifier]){if(u){break}s=l,u=c}}if(c){var h=(h=l[0]-s[0])*h+(h=l[1]-s[1])*h,v=a&&Math.sqrt(h/a);s=[(s[0]+l[0])/2,(s[1]+l[1])/2];u=[(u[0]+c[0])/2,(u[1]+c[1])/2];k(v*o)}g=null;S(s,u);M(r)}function _(){if(t.event.touches.length){var e=t.event.changedTouches;for(var n=0,a=e.length;n<a;++n){delete i[e[n].identifier]}for(var o in i){return void v()}}t.selectAll(c).on(s,null);d.on(f,N).on(p,R);h();A(r)}}function D(){var i=m.of(this,arguments);if(v){clearTimeout(v)}else{Su.call(this),n=T(r=a||t.mouse(this)),O(i)}v=setTimeout(function(){v=null;A(i)},50);F();k(Math.pow(2,Ye()*.002)*e.k);S(r,n);M(i)}function L(){var n=t.mouse(this),r=Math.log(e.k)/Math.LN2;E(this,n,T(n),t.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)}return t.rebind(x,m,"on")};var qe=[0,Infinity],Ye,Ke;t.color=$e;function $e(){}$e.prototype.toString=function(){return this.rgb()+""};t.hsl=Ge;function Ge(e,t,n){return this instanceof Ge?void(this.h=+e,this.s=+t,this.l=+n):arguments.length<2?e instanceof Ge?new Ge(e.h,e.s,e.l):mt(""+e,yt,Ge):new Ge(e,t,n)}var Xe=Ge.prototype=new $e;Xe.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);return new Ge(this.h,this.s,this.l/e)};Xe.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new Ge(this.h,this.s,e*this.l)};Xe.rgb=function(){return Ze(this.h,this.s,this.l)};function Ze(e,t,n){var r,i;e=isNaN(e)?0:(e%=360)<0?e+360:e;t=isNaN(t)?0:t<0?0:t>1?1:t;n=n<0?0:n>1?1:n;i=n<=.5?n*(1+t):n+t-n*t;r=2*n-i;function a(e){if(e>360){e-=360}else if(e<0){e+=360}if(e<60){return r+(i-r)*e/60}if(e<180){return i}if(e<240){return r+(i-r)*(240-e)/60}return r}function o(e){return Math.round(a(e)*255)}return new dt(o(e+120),o(e),o(e-120))}t.hcl=Je;function Je(e,n,r){return this instanceof Je?void(this.h=+e,this.c=+n,this.l=+r):arguments.length<2?e instanceof Je?new Je(e.h,e.c,e.l):e instanceof tt?ut(e.l,e.a,e.b):ut((e=bt((e=t.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Je(e,n,r)}var Qe=Je.prototype=new $e;Qe.brighter=function(e){return new Je(this.h,this.c,Math.min(100,this.l+nt*(arguments.length?e:1)))};Qe.darker=function(e){return new Je(this.h,this.c,Math.max(0,this.l-nt*(arguments.length?e:1)))};Qe.rgb=function(){return et(this.h,this.c,this.l).rgb()};function et(e,t,n){if(isNaN(e)){e=0}if(isNaN(t)){t=0}return new tt(n,Math.cos(e*=Ne)*t,Math.sin(e)*t)}t.lab=tt;function tt(e,t,n){return this instanceof tt?void(this.l=+e,this.a=+t,this.b=+n):arguments.length<2?e instanceof tt?new tt(e.l,e.a,e.b):e instanceof Je?et(e.h,e.c,e.l):bt((e=dt(e)).r,e.g,e.b):new tt(e,t,n)}var nt=18;var rt=.95047,it=1,at=1.08883;var ot=tt.prototype=new $e;ot.brighter=function(e){return new tt(Math.min(100,this.l+nt*(arguments.length?e:1)),this.a,this.b)};ot.darker=function(e){return new tt(Math.max(0,this.l-nt*(arguments.length?e:1)),this.a,this.b)};ot.rgb=function(){return st(this.l,this.a,this.b)};function st(e,t,n){var r=(e+16)/116,i=r+t/500,a=r-n/200;i=lt(i)*rt;r=lt(r)*it;a=lt(a)*at;return new dt(ft(3.2404542*i-1.5371385*r-.4985314*a),ft(-.969266*i+1.8760108*r+.041556*a),ft(.0556434*i-.2040259*r+1.0572252*a))}function ut(e,t,n){return e>0?new Je(Math.atan2(n,t)*Re,Math.sqrt(t*t+n*n),e):new Je(NaN,NaN,e)}function lt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ct(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ft(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}t.rgb=dt;function dt(e,t,n){return this instanceof dt?void(this.r=~~e,this.g=~~t,this.b=~~n):arguments.length<2?e instanceof dt?new dt(e.r,e.g,e.b):mt(""+e,dt,Ze):new dt(e,t,n)}function ht(e){return new dt(e>>16,e>>8&255,e&255)}function vt(e){return ht(e)+""}var pt=dt.prototype=new $e;pt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;if(!t&&!n&&!r){return new dt(i,i,i)}if(t&&t<i){t=i}if(n&&n<i){n=i}if(r&&r<i){r=i}return new dt(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))};pt.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new dt(e*this.r,e*this.g,e*this.b)};pt.hsl=function(){return yt(this.r,this.g,this.b)};pt.toString=function(){return"#"+gt(this.r)+gt(this.g)+gt(this.b)};function gt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function mt(e,t,n){var r=0,i=0,a=0,o,s,u;o=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(o){s=o[2].split(",");switch(o[1]){case"hsl":{return n(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100)}case"rgb":{return t(wt(s[0]),wt(s[1]),wt(s[2]))}}}if(u=xt.get(e)){return t(u.r,u.g,u.b)}if(e!=null&&e.charAt(0)==="#"&&!isNaN(u=parseInt(e.slice(1),16))){if(e.length===4){r=(u&3840)>>4;r=r>>4|r;i=u&240;i=i>>4|i;a=u&15;a=a<<4|a}else if(e.length===7){r=(u&16711680)>>16;i=(u&65280)>>8;a=u&255}}return t(r,i,a)}function yt(e,t,n){var r=Math.min(e/=255,t/=255,n/=255),i=Math.max(e,t,n),a=i-r,o,s,u=(i+r)/2;if(a){s=u<.5?a/(i+r):a/(2-i-r);if(e==i){o=(t-n)/a+(t<n?6:0)}else if(t==i){o=(n-e)/a+2}else{o=(e-t)/a+4}o*=60}else{o=NaN;s=u>0&&u<1?0:o}return new Ge(o,s,u)}function bt(e,t,n){e=_t(e);t=_t(t);n=_t(n);var r=ct((.4124564*e+.3575761*t+.1804375*n)/rt),i=ct((.2126729*e+.7151522*t+.072175*n)/it),a=ct((.0193339*e+.119192*t+.9503041*n)/at);return tt(116*i-16,500*(r-i),200*(i-a))}function _t(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function wt(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}var xt=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});xt.forEach(function(e,t){xt.set(e,ht(t))});function Tt(e){return typeof e==="function"?e:function(){return e}}t.functor=Tt;t.xhr=Ct(N);function Ct(e){return function(t,n,r){if(arguments.length===2&&typeof n==="function"){r=n,n=null}return kt(t,n,e,r)}}function kt(e,n,i,a){var o={},s=t.dispatch("beforesend","progress","load","error"),u={},l=new XMLHttpRequest,c=null;if(this.XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(e)){l=new XDomainRequest}"onload"in l?l.onload=l.onerror=f:l.onreadystatechange=function(){l.readyState>3&&f()};function f(){var e=l.status,t;if(!e&&Et(l)||e>=200&&e<300||e===304){try{t=i.call(o,l)}catch(e){s.error.call(o,e);return}s.load.call(o,t)}else{s.error.call(o,l)}}l.onprogress=function(e){var n=t.event;t.event=e;try{s.progress.call(o,l)}finally{t.event=n}};o.header=function(e,t){e=(e+"").toLowerCase();if(arguments.length<2){return u[e]}if(t==null){delete u[e]}else{u[e]=t+""}return o};o.mimeType=function(e){if(!arguments.length){return n}n=e==null?null:e+"";return o};o.responseType=function(e){if(!arguments.length){return c}c=e;return o};o.response=function(e){i=e;return o};["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(r(arguments)))}});o.send=function(t,r,i){if(arguments.length===2&&typeof r==="function"){i=r,r=null}l.open(t,e,true);if(n!=null&&!("accept"in u)){u["accept"]=n+",*/*"}if(l.setRequestHeader){for(var a in u){l.setRequestHeader(a,u[a])}}if(n!=null&&l.overrideMimeType){l.overrideMimeType(n)}if(c!=null){l.responseType=c}if(i!=null){o.on("error",i).on("load",function(e){i(null,e)})}s.beforesend.call(o,l);l.send(r==null?null:r);return o};o.abort=function(){l.abort();return o};t.rebind(o,s,"on");return a==null?o:o.get(St(a))}function St(e){return e.length===1?function(t,n){e(t==null?n:null)}:e}function Et(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}t.dsv=function(e,t){var n=new RegExp('["'+e+"\n]"),r=e.charCodeAt(0);function i(e,n,r){if(arguments.length<3){r=n,n=null}var i=kt(e,t,n==null?a:o(n),r);i.row=function(e){return arguments.length?i.response((n=e)==null?a:o(e)):n};return i}function a(e){return i.parse(e.responseText)}function o(e){return function(t){return i.parse(t.responseText,e)}}i.parse=function(e,t){var n;return i.parseRows(e,function(e,r){if(n){return n(e,r-1)}var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");n=t?function(e,n){return t(i(e),n)}:i})};i.parseRows=function(e,t){var n={},i={},a=[],o=e.length,s=0,u=0,l,c;function f(){if(s>=o){return i}if(c){return c=false,n}var t=s;if(e.charCodeAt(t)===34){var a=t;while(a++<o){if(e.charCodeAt(a)===34){if(e.charCodeAt(a+1)!==34){break}++a}}s=a+2;var u=e.charCodeAt(a+1);if(u===13){c=true;if(e.charCodeAt(a+2)===10){++s}}else if(u===10){c=true}return e.slice(t+1,a).replace(/""/g,'"')}while(s<o){var u=e.charCodeAt(s++),l=1;if(u===10){c=true}else if(u===13){c=true;if(e.charCodeAt(s)===10){++s,++l}}else if(u!==r){continue}return e.slice(t,s-l)}return e.slice(t)}while((l=f())!==i){var d=[];while(l!==n&&l!==i){d.push(l);l=f()}if(t&&(d=t(d,u++))==null){continue}a.push(d)}return a};i.format=function(t){if(Array.isArray(t[0])){return i.formatRows(t)}var n=new A,r=[];t.forEach(function(e){for(var t in e){if(!n.has(t)){r.push(n.add(t))}}});return[r.map(u).join(e)].concat(t.map(function(t){return r.map(function(e){return u(t[e])}).join(e)})).join("\n")};i.formatRows=function(e){return e.map(s).join("\n")};function s(t){return t.map(u).join(e)}function u(e){return n.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return i};t.csv=t.dsv(",","text/csv");t.tsv=t.dsv("\t","text/tab-separated-values");var Pt,Ot,Mt,At,Nt=this[D(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};t.timer=function(){Rt.apply(this,arguments)};function Rt(e,t,n){var r=arguments.length;if(r<2){t=0}if(r<3){n=Date.now()}var i=n+t,a={c:e,t:i,n:null};if(Ot){Ot.n=a}else{Pt=a}Ot=a;if(!Mt){At=clearTimeout(At);Mt=1;Nt(Dt)}return a}function Dt(){var e=Lt(),t=It()-e;if(t>24){if(isFinite(t)){clearTimeout(At);At=setTimeout(Dt,t)}Mt=0}else{Mt=1;Nt(Dt)}}t.timer.flush=function(){Lt();It()};function Lt(){var e=Date.now(),t=Pt;while(t){if(e>=t.t&&t.c(e-t.t)){t.c=null}t=t.n}return e}function It(){var e,t=Pt,n=Infinity;while(t){if(t.c){if(t.t<n){n=t.t}t=(e=t).n}else{t=e?e.n=t.n:Pt=t.n}}Ot=e;return n}function Bt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}t.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var jt=["y","z","a","f","p","n","¬µ","m","","k","M","G","T","P","E","Z","Y"].map(Ft);t.formatPrefix=function(e,n){var r=0;if(e=+e){if(e<0){e*=-1}if(n){e=t.round(e,Bt(e,n))}r=1+Math.floor(1e-12+Math.log(e)/Math.LN10);r=Math.max(-24,Math.min(24,Math.floor((r-1)/3)*3))}return jt[8+r/3]};function Ft(e,t){var n=Math.pow(10,y(8-t)*3);return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Ht(e){var n=e.decimal,r=e.thousands,i=e.grouping,a=e.currency,o=i&&r?function(e,t){var n=e.length,a=[],o=0,s=i[0],u=0;while(n>0&&s>0){if(u+s+1>t){s=Math.max(1,t-u)}a.push(e.substring(n-=s,n+s));if((u+=s+1)>t){break}s=i[o=(o+1)%i.length]}return a.reverse().join(r)}:N;return function(e){var r=zt.exec(e),i=r[1]||" ",s=r[2]||">",u=r[3]||"-",l=r[4]||"",c=r[5],f=+r[6],d=r[7],h=r[8],v=r[9],p=1,g="",m="",y=false,b=true;if(h){h=+h.substring(1)}if(c||i==="0"&&s==="="){c=i="0";s="="}switch(v){case"n":d=true;v="g";break;case"%":p=100;m="%";v="f";break;case"p":p=100;m="%";v="r";break;case"b":case"o":case"x":case"X":if(l==="#"){g="0"+v.toLowerCase()}case"c":b=false;case"d":y=true;h=0;break;case"s":p=-1;v="r";break}if(l==="$"){g=a[0],m=a[1]}if(v=="r"&&!h){v="g"}if(h!=null){if(v=="g"){h=Math.max(1,Math.min(21,h))}else if(v=="e"||v=="f"){h=Math.max(0,Math.min(20,h))}}v=Ut.get(v)||Vt;var _=c&&d;return function(e){var r=m;if(y&&e%1){return""}var a=e<0||e===0&&1/e<0?(e=-e,"-"):u==="-"?"":u;if(p<0){var l=t.formatPrefix(e,h);e=l.scale(e);r=l.symbol+m}else{e*=p}e=v(e,h);var w=e.lastIndexOf("."),x,T;if(w<0){var C=b?e.lastIndexOf("e"):-1;if(C<0){x=e,T=""}else{x=e.substring(0,C),T=e.substring(C)}}else{x=e.substring(0,w);T=n+e.substring(w+1)}if(!c&&d){x=o(x,Infinity)}var k=g.length+x.length+T.length+(_?0:a.length),S=k<f?new Array(k=f-k+1).join(i):"";if(_){x=o(S+x,S.length?f-T.length:Infinity)}a+=g;e=x+T;return(s==="<"?a+e+S:s===">"?S+a+e:s==="^"?S.substring(0,k>>=1)+a+e+S.substring(k):a+(_?e:S+e))+r}}}var zt=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var Ut=t.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,n){return(e=t.round(e,Bt(e,n))).toFixed(Math.max(0,Math.min(20,Bt(e*(1+1e-15),n))))}});function Vt(e){return e+""}var Wt=t.time={},qt=Date;function Yt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Yt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Kt.setUTCDate.apply(this._,arguments)},setDay:function(){Kt.setUTCDay.apply(this._,arguments)},setFullYear:function(){Kt.setUTCFullYear.apply(this._,arguments)},setHours:function(){Kt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Kt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Kt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Kt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Kt.setUTCSeconds.apply(this._,arguments)},setTime:function(){Kt.setTime.apply(this._,arguments)}};var Kt=Date.prototype;function $t(e,t,n){function r(t){var n=e(t),r=a(n,1);return t-n<r-t?n:r}function i(n){t(n=e(new qt(n-1)),1);return n}function a(e,n){t(e=new qt(+e),n);return e}function o(e,r,a){var o=i(e),s=[];if(a>1){while(o<r){if(!(n(o)%a)){s.push(new Date(+o))}t(o,1)}}else{while(o<r){s.push(new Date(+o)),t(o,1)}}return s}function s(e,t,n){try{qt=Yt;var r=new Yt;r._=e;return o(r,t,n)}finally{qt=Date}}e.floor=e;e.round=r;e.ceil=i;e.offset=a;e.range=o;var u=e.utc=Gt(e);u.floor=u;u.round=Gt(r);u.ceil=Gt(i);u.offset=Gt(a);u.range=s;return e}function Gt(e){return function(t,n){try{qt=Yt;var r=new Yt;r._=t;return e(r,n)._}finally{qt=Date}}}Wt.year=$t(function(e){e=Wt.day(e);e.setMonth(0,1);return e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()});Wt.years=Wt.year.range;Wt.years.utc=Wt.year.utc.range;Wt.day=$t(function(e){var t=new qt(2e3,0);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate());return t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1});Wt.days=Wt.day.range;Wt.days.utc=Wt.day.utc.range;Wt.dayOfYear=function(e){var t=Wt.year(e);return Math.floor((e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=Wt[e]=$t(function(e){(e=Wt.day(e)).setDate(e.getDate()-(e.getDay()+t)%7);return e},function(e,t){e.setDate(e.getDate()+Math.floor(t)*7)},function(e){var n=Wt.year(e).getDay();return Math.floor((Wt.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});Wt[e+"s"]=n.range;Wt[e+"s"].utc=n.utc.range;Wt[e+"OfYear"]=function(e){var n=Wt.year(e).getDay();return Math.floor((Wt.dayOfYear(e)+(n+t)%7)/7)}});Wt.week=Wt.sunday;Wt.weeks=Wt.sunday.range;Wt.weeks.utc=Wt.sunday.utc.range;Wt.weekOfYear=Wt.sundayOfYear;function Xt(e){var n=e.dateTime,r=e.date,i=e.time,a=e.periods,o=e.days,s=e.shortDays,u=e.months,l=e.shortMonths;function c(e){var t=e.length;function n(n){var r=[],i=-1,a=0,o,s,u;while(++i<t){if(e.charCodeAt(i)===37){r.push(e.slice(a,i));if((s=Zt[o=e.charAt(++i)])!=null){o=e.charAt(++i)}if(u=w[o]){o=u(n,s==null?o==="e"?" ":"0":s)}r.push(o);a=i+1}}r.push(e.slice(a,i));return r.join("")}n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=f(n,e,t,0);if(r!=t.length){return null}if("p"in n){n.H=n.H%12+n.p*12}var i=n.Z!=null&&qt!==Yt,a=new(i?Yt:qt);if("j"in n){a.setFullYear(n.y,0,n.j)}else if("W"in n||"U"in n){if(!("w"in n)){n.w="W"in n?1:0}a.setFullYear(n.y,0,1);a.setFullYear(n.y,0,"W"in n?(n.w+6)%7+n.W*7-(a.getDay()+5)%7:n.w+n.U*7-(a.getDay()+6)%7)}else{a.setFullYear(n.y,n.m,n.d)}a.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L);return i?a._:a};n.toString=function(){return e};return n}function f(e,t,n,r){var i,a,o,s=0,u=t.length,l=n.length;while(s<u){if(r>=l){return-1}i=t.charCodeAt(s++);if(i===37){o=t.charAt(s++);a=x[o in Zt?t.charAt(s++):o];if(!a||(r=a(e,n,r))<0){return-1}}else if(i!=n.charCodeAt(r++)){return-1}}return r}c.utc=function(e){var t=c(e);function n(e){try{qt=Yt;var n=new qt;n._=e;return t(n)}finally{qt=Date}}n.parse=function(e){try{qt=Yt;var n=t.parse(e);return n&&n._}finally{qt=Date}};n.toString=t.toString;return n};c.multi=c.utc.multi=_n;var d=t.map(),h=tn(o),v=nn(o),p=tn(s),g=nn(s),m=tn(u),y=nn(u),b=tn(l),_=nn(l);a.forEach(function(e,t){d.set(e.toLowerCase(),t)});var w={a:function(e){return s[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:c(n),d:function(e,t){return en(e.getDate(),t,2)},e:function(e,t){return en(e.getDate(),t,2)},H:function(e,t){return en(e.getHours(),t,2)},I:function(e,t){return en(e.getHours()%12||12,t,2)},j:function(e,t){return en(1+Wt.dayOfYear(e),t,3)},L:function(e,t){return en(e.getMilliseconds(),t,3)},m:function(e,t){return en(e.getMonth()+1,t,2)},M:function(e,t){return en(e.getMinutes(),t,2)},p:function(e){return a[+(e.getHours()>=12)]},S:function(e,t){return en(e.getSeconds(),t,2)},U:function(e,t){return en(Wt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return en(Wt.mondayOfYear(e),t,2)},x:c(r),X:c(i),y:function(e,t){return en(e.getFullYear()%100,t,2)},Y:function(e,t){return en(e.getFullYear()%1e4,t,4)},Z:yn,"%":function(){return"%"}};var x={a:T,A:C,b:k,B:S,c:E,d:dn,e:dn,H:vn,I:vn,j:hn,L:mn,m:fn,M:pn,p:M,S:gn,U:an,w:rn,W:on,x:P,X:O,y:un,Y:sn,Z:ln,"%":bn};function T(e,t,n){p.lastIndex=0;var r=p.exec(t.slice(n));return r?(e.w=g.get(r[0].toLowerCase()),n+r[0].length):-1}function C(e,t,n){h.lastIndex=0;var r=h.exec(t.slice(n));return r?(e.w=v.get(r[0].toLowerCase()),n+r[0].length):-1}function k(e,t,n){b.lastIndex=0;var r=b.exec(t.slice(n));return r?(e.m=_.get(r[0].toLowerCase()),n+r[0].length):-1}function S(e,t,n){m.lastIndex=0;var r=m.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1}function E(e,t,n){return f(e,w.c.toString(),t,n)}function P(e,t,n){return f(e,w.x.toString(),t,n)}function O(e,t,n){return f(e,w.X.toString(),t,n)}function M(e,t,n){var r=d.get(t.slice(n,n+=2).toLowerCase());return r==null?-1:(e.p=r,n)}return c}var Zt={"-":"",_:" ",0:"0"},Jt=/^\s*\d+/,Qt=/^%/;function en(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function tn(e){return new RegExp("^(?:"+e.map(t.requote).join("|")+")","i")}function nn(e){var t=new w,n=-1,r=e.length;while(++n<r){t.set(e[n].toLowerCase(),n)}return t}function rn(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function an(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function on(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function sn(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function un(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+2));return r?(e.y=cn(+r[0]),n+r[0].length):-1}function ln(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function cn(e){return e+(e>68?1900:2e3)}function fn(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function dn(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function hn(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function vn(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function pn(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function gn(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function mn(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function yn(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=y(t)/60|0,i=y(t)%60;return n+en(r,"0",2)+en(i,"0",2)}function bn(e,t,n){Qt.lastIndex=0;var r=Qt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function _n(e){var t=e.length,n=-1;while(++n<t){e[n][0]=this(e[n][0])}return function(t){var n=0,r=e[n];while(!r[1](t)){r=e[++n]}return r[0](t)}}t.locale=function(e){return{numberFormat:Ht(e),timeFormat:Xt(e)}};var wn=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});t.format=wn.numberFormat;t.geo={};function xn(){}xn.prototype={s:0,t:0,add:function(e){Cn(e,this.t,Tn);Cn(Tn.s,this.s,this);if(this.s){this.t+=Tn.t}else{this.s=Tn.t}},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Tn=new xn;function Cn(e,t,n){var r=n.s=e+t,i=r-e,a=r-i;n.t=e-a+(t-i)}t.geo.stream=function(e,t){if(e&&Sn.hasOwnProperty(e.type)){Sn[e.type](e,t)}else{kn(e,t)}};function kn(e,t){if(e&&En.hasOwnProperty(e.type)){En[e.type](e,t)}}var Sn={Feature:function(e,t){kn(e.geometry,t)},FeatureCollection:function(e,t){var n=e.features,r=-1,i=n.length;while(++r<i){kn(n[r].geometry,t)}}};var En={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates;t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i){e=n[r],t.point(e[0],e[1],e[2])}},LineString:function(e,t){Pn(e.coordinates,t,0)},MultiLineString:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i){Pn(n[r],t,0)}},Polygon:function(e,t){On(e.coordinates,t)},MultiPolygon:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i){On(n[r],t)}},GeometryCollection:function(e,t){var n=e.geometries,r=-1,i=n.length;while(++r<i){kn(n[r],t)}}};function Pn(e,t,n){var r=-1,i=e.length-n,a;t.lineStart();while(++r<i){a=e[r],t.point(a[0],a[1],a[2])}t.lineEnd()}function On(e,t){var n=-1,r=e.length;t.polygonStart();while(++n<r){Pn(e[n],t,1)}t.polygonEnd()}t.geo.area=function(e){Mn=0;t.geo.stream(e,Nn);return Mn};var Mn,An=new xn;var Nn={sphere:function(){Mn+=4*Pe},point:I,lineStart:I,lineEnd:I,polygonStart:function(){An.reset();Nn.lineStart=Rn},polygonEnd:function(){var e=2*An;Mn+=e<0?4*Pe+e:e;Nn.lineStart=Nn.lineEnd=Nn.point=I}};function Rn(){var e,t,n,r,i;Nn.point=function(o,s){Nn.point=a;n=(e=o)*Ne,r=Math.cos(s=(t=s)*Ne/2+Pe/4),i=Math.sin(s)};function a(e,t){e*=Ne;t=t*Ne/2+Pe/4;var a=e-n,o=a>=0?1:-1,s=o*a,u=Math.cos(t),l=Math.sin(t),c=i*l,f=r*u+c*Math.cos(s),d=c*o*Math.sin(s);An.add(Math.atan2(d,f));n=e,r=u,i=l}Nn.lineEnd=function(){a(e,t)}}function Dn(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function Ln(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function In(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Bn(e,t){e[0]+=t[0];e[1]+=t[1];e[2]+=t[2]}function jn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Fn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t;e[1]/=t;e[2]/=t}function Hn(e){return[Math.atan2(e[1],e[0]),Be(e[2])]}function zn(e,t){return y(e[0]-t[0])<Se&&y(e[1]-t[1])<Se}t.geo.bounds=function(){var e,n,r,i,a,o,s,u,l,c,f;var d={point:h,lineStart:p,lineEnd:g,polygonStart:function(){d.point=m;d.lineStart=b;d.lineEnd=_;l=0;Nn.polygonStart()},polygonEnd:function(){Nn.polygonEnd();d.point=h;d.lineStart=p;d.lineEnd=g;if(An<0){e=-(r=180),n=-(i=90)}else if(l>Se){i=90}else if(l<-Se){n=-90}f[0]=e,f[1]=r}};function h(t,a){c.push(f=[e=t,r=t]);if(a<n){n=a}if(a>i){i=a}}function v(t,o){var s=Dn([t*Ne,o*Ne]);if(u){var l=In(u,s),c=[l[1],-l[0],0],f=In(c,l);Fn(f);f=Hn(f);var d=t-a,v=d>0?1:-1,p=f[0]*Re*v,g=y(d)>180;if(g^(v*a<p&&p<v*t)){var m=f[1]*Re;if(m>i){i=m}}else if(p=(p+360)%360-180,g^(v*a<p&&p<v*t)){var m=-f[1]*Re;if(m<n){n=m}}else{if(o<n){n=o}if(o>i){i=o}}if(g){if(t<a){if(w(e,t)>w(e,r)){r=t}}else{if(w(t,r)>w(e,r)){e=t}}}else{if(r>=e){if(t<e){e=t}if(t>r){r=t}}else{if(t>a){if(w(e,t)>w(e,r)){r=t}}else{if(w(t,r)>w(e,r)){e=t}}}}}else{h(t,o)}u=s,a=t}function p(){d.point=v}function g(){f[0]=e,f[1]=r;d.point=h;u=null}function m(e,t){if(u){var n=e-a;l+=y(n)>180?n+(n>0?360:-360):n}else{o=e,s=t}Nn.point(e,t);v(e,t)}function b(){Nn.lineStart()}function _(){m(o,s);Nn.lineEnd();if(y(l)>Se){e=-(r=180)}f[0]=e,f[1]=r;u=null}function w(e,t){return(t-=e)<0?t+360:t}function x(e,t){return e[0]-t[0]}function T(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(a){i=r=-(e=n=Infinity);c=[];t.geo.stream(a,d);var o=c.length;if(o){c.sort(x);for(var s=1,u=c[0],l,h=[u];s<o;++s){l=c[s];if(T(l[0],u)||T(l[1],u)){if(w(u[0],l[1])>w(u[0],u[1])){u[1]=l[1]}if(w(l[0],u[1])>w(u[0],u[1])){u[0]=l[0]}}else{h.push(u=l)}}var v=-Infinity,p;for(var o=h.length-1,s=0,u=h[o],l;s<=o;u=l,++s){l=h[s];if((p=w(u[1],l[0]))>v){v=p,e=l[0],r=u[1]}}}c=f=null;return e===Infinity||n===Infinity?[[NaN,NaN],[NaN,NaN]]:[[e,n],[r,i]]}}();t.geo.centroid=function(e){Un=Vn=Wn=qn=Yn=Kn=$n=Gn=Xn=Zn=Jn=0;t.geo.stream(e,Qn);var n=Xn,r=Zn,i=Jn,a=n*n+r*r+i*i;if(a<Ee){n=Kn,r=$n,i=Gn;if(Vn<Se){n=Wn,r=qn,i=Yn}a=n*n+r*r+i*i;if(a<Ee){return[NaN,NaN]}}return[Math.atan2(r,n)*Re,Be(i/Math.sqrt(a))*Re]};var Un,Vn,Wn,qn,Yn,Kn,$n,Gn,Xn,Zn,Jn;var Qn={sphere:I,point:er,lineStart:nr,lineEnd:rr,polygonStart:function(){Qn.lineStart=ir},polygonEnd:function(){Qn.lineStart=nr}};function er(e,t){e*=Ne;var n=Math.cos(t*=Ne);tr(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function tr(e,t,n){++Un;Wn+=(e-Wn)/Un;qn+=(t-qn)/Un;Yn+=(n-Yn)/Un}function nr(){var e,t,n;Qn.point=function(i,a){i*=Ne;var o=Math.cos(a*=Ne);e=o*Math.cos(i);t=o*Math.sin(i);n=Math.sin(a);Qn.point=r;tr(e,t,n)};function r(r,i){r*=Ne;var a=Math.cos(i*=Ne),o=a*Math.cos(r),s=a*Math.sin(r),u=Math.sin(i),l=Math.atan2(Math.sqrt((l=t*u-n*s)*l+(l=n*o-e*u)*l+(l=e*s-t*o)*l),e*o+t*s+n*u);Vn+=l;Kn+=l*(e+(e=o));$n+=l*(t+(t=s));Gn+=l*(n+(n=u));tr(e,t,n)}}function rr(){Qn.point=er}function ir(){var e,t,n,r,i;Qn.point=function(o,s){e=o,t=s;Qn.point=a;o*=Ne;var u=Math.cos(s*=Ne);n=u*Math.cos(o);r=u*Math.sin(o);i=Math.sin(s);tr(n,r,i)};Qn.lineEnd=function(){a(e,t);Qn.lineEnd=rr;Qn.point=er};function a(e,t){e*=Ne;var a=Math.cos(t*=Ne),o=a*Math.cos(e),s=a*Math.sin(e),u=Math.sin(t),l=r*u-i*s,c=i*o-n*u,f=n*s-r*o,d=Math.sqrt(l*l+c*c+f*f),h=n*o+r*s+i*u,v=d&&-Ie(h)/d,p=Math.atan2(d,h);Xn+=v*l;Zn+=v*c;Jn+=v*f;Vn+=p;Kn+=p*(n+(n=o));$n+=p*(r+(r=s));Gn+=p*(i+(i=u));tr(n,r,i)}}function ar(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}if(e.invert&&t.invert){n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}}return n}function or(){return true}function sr(e,t,n,r,i){var a=[],o=[];e.forEach(function(e){if((t=e.length-1)<=0){return}var t,n=e[0],r=e[t];if(zn(n,r)){i.lineStart();for(var s=0;s<t;++s){i.point((n=e[s])[0],n[1])}i.lineEnd();return}var u=new lr(n,e,null,true),l=new lr(n,null,u,false);u.o=l;a.push(u);o.push(l);u=new lr(r,e,null,false);l=new lr(r,null,u,true);u.o=l;a.push(u);o.push(l)});o.sort(t);ur(a);ur(o);if(!a.length){return}for(var s=0,u=n,l=o.length;s<l;++s){o[s].e=u=!u}var c=a[0],f,d;while(1){var h=c,v=true;while(h.v){if((h=h.n)===c){return}}f=h.z;i.lineStart();do{h.v=h.o.v=true;if(h.e){if(v){for(var s=0,l=f.length;s<l;++s){i.point((d=f[s])[0],d[1])}}else{r(h.x,h.n.x,1,i)}h=h.n}else{if(v){f=h.p.z;for(var s=f.length-1;s>=0;--s){i.point((d=f[s])[0],d[1])}}else{r(h.x,h.p.x,-1,i)}h=h.p}h=h.o;f=h.z;v=!v}while(!h.v);i.lineEnd()}}function ur(e){if(!(t=e.length)){return}var t,n=0,r=e[0],i;while(++n<t){r.n=i=e[n];i.p=r;r=i}r.n=i=e[0];i.p=r}function lr(e,t,n,r){this.x=e;this.z=t;this.o=n;this.e=r;this.v=false;this.n=this.p=null}function cr(e,n,r,i){return function(a,o){var s=n(o),u=a.invert(i[0],i[1]);var l={point:c,lineStart:d,lineEnd:h,polygonStart:function(){l.point=_;l.lineStart=w;l.lineEnd=x;v=[];y=[]},polygonEnd:function(){l.point=c;l.lineStart=d;l.lineEnd=h;v=t.merge(v);var e=yr(u,y);if(v.length){if(!m){o.polygonStart(),m=true}sr(v,hr,e,r,o)}else if(e){if(!m){o.polygonStart(),m=true}o.lineStart();r(null,null,1,o);o.lineEnd()}if(m){o.polygonEnd(),m=false}v=y=null},sphere:function(){o.polygonStart();o.lineStart();r(null,null,1,o);o.lineEnd();o.polygonEnd()}};function c(t,n){var r=a(t,n);if(e(t=r[0],n=r[1])){o.point(t,n)}}function f(e,t){var n=a(e,t);s.point(n[0],n[1])}function d(){l.point=f;s.lineStart()}function h(){l.point=c;s.lineEnd()}var v;var p=dr(),g=n(p),m=false,y,b;function _(e,t){b.push([e,t]);var n=a(e,t);g.point(n[0],n[1])}function w(){g.lineStart();b=[]}function x(){_(b[0][0],b[0][1]);g.lineEnd();var e=g.clean(),t=p.buffer(),n,r=t.length;b.pop();y.push(b);b=null;if(!r){return}if(e&1){n=t[0];var r=n.length-1,i=-1,a;if(r>0){if(!m){o.polygonStart(),m=true}o.lineStart();while(++i<r){o.point((a=n[i])[0],a[1])}o.lineEnd()}return}if(r>1&&e&2){t.push(t.pop().concat(t.shift()))}v.push(t.filter(fr))}return l}}function fr(e){return e.length>1}function dr(){var e=[],t;return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:I,buffer:function(){var n=e;e=[];t=null;return n},rejoin:function(){if(e.length>1){e.push(e.pop().concat(e.shift()))}}}}function hr(e,t){return((e=e.x)[0]<0?e[1]-Ae-Se:Ae-e[1])-((t=t.x)[0]<0?t[1]-Ae-Se:Ae-t[1])}var vr=cr(or,pr,mr,[-Pe,-Pe/2]);function pr(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart();i=1},point:function(a,o){var s=a>0?Pe:-Pe,u=y(a-t);if(y(u-Pe)<Se){e.point(t,n=(n+o)/2>0?Ae:-Ae);e.point(r,n);e.lineEnd();e.lineStart();e.point(s,n);e.point(a,n);i=0}else if(r!==s&&u>=Pe){if(y(t-r)<Se){t-=r*Se}if(y(a-s)<Se){a-=s*Se}n=gr(t,n,a,o);e.point(r,n);e.lineEnd();e.lineStart();e.point(s,n);i=0}e.point(t=a,n=o);r=s},lineEnd:function(){e.lineEnd();t=n=NaN},clean:function(){return 2-i}}}function gr(e,t,n,r){var i,a,o=Math.sin(e-n);return y(o)>Se?Math.atan((Math.sin(t)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*a*o)):(t+r)/2}function mr(e,t,n,r){var i;if(e==null){i=n*Ae;r.point(-Pe,i);r.point(0,i);r.point(Pe,i);r.point(Pe,0);r.point(Pe,-i);r.point(0,-i);r.point(-Pe,-i);r.point(-Pe,0);r.point(-Pe,i)}else if(y(e[0]-t[0])>Se){var a=e[0]<t[0]?Pe:-Pe;i=n*a/2;r.point(-a,i);r.point(0,i);r.point(a,i)}else{r.point(t[0],t[1])}}function yr(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;An.reset();for(var s=0,u=t.length;s<u;++s){var l=t[s],c=l.length;if(!c){continue}var f=l[0],d=f[0],h=f[1]/2+Pe/4,v=Math.sin(h),p=Math.cos(h),g=1;while(true){if(g===c){g=0}e=l[g];var m=e[0],y=e[1]/2+Pe/4,b=Math.sin(y),_=Math.cos(y),w=m-d,x=w>=0?1:-1,T=x*w,C=T>Pe,k=v*b;An.add(Math.atan2(k*x*Math.sin(T),p*_+k*Math.cos(T)));a+=C?w+x*Oe:w;if(C^d>=n^m>=n){var S=In(Dn(f),Dn(e));Fn(S);var E=In(i,S);Fn(E);var P=(C^w>=0?-1:1)*Be(E[2]);if(r>P||r===P&&(S[0]||S[1])){o+=C^w>=0?1:-1}}if(!g++){break}d=m,v=b,p=_,f=e}}return(a<-Se||a<Se&&An<-Se)^o&1}function br(e){var t=Math.cos(e),n=t>0,r=y(t)>Se,i=ni(e,6*Ne);return cr(a,o,i,n?[0,-e]:[-Pe,e-Pe]);function a(e,n){return Math.cos(e)*Math.cos(n)>t}function o(e){var t,i,o,l,c;return{lineStart:function(){l=o=false;c=1},point:function(f,d){var h=[f,d],v,p=a(f,d),g=n?p?0:u(f,d):p?u(f+(f<0?Pe:-Pe),d):0;if(!t&&(l=o=p)){e.lineStart()}if(p!==o){v=s(t,h);if(zn(t,v)||zn(h,v)){h[0]+=Se;h[1]+=Se;p=a(h[0],h[1])}}if(p!==o){c=0;if(p){e.lineStart();v=s(h,t);e.point(v[0],v[1])}else{v=s(t,h);e.point(v[0],v[1]);e.lineEnd()}t=v}else if(r&&t&&n^p){var m;if(!(g&i)&&(m=s(h,t,true))){c=0;if(n){e.lineStart();e.point(m[0][0],m[0][1]);e.point(m[1][0],m[1][1]);e.lineEnd()}else{e.point(m[1][0],m[1][1]);e.lineEnd();e.lineStart();e.point(m[0][0],m[0][1])}}}if(p&&(!t||!zn(t,h))){e.point(h[0],h[1])}t=h,o=p,i=g},lineEnd:function(){if(o){e.lineEnd()}t=null},clean:function(){return c|(l&&o)<<1}}}function s(e,n,r){var i=Dn(e),a=Dn(n);var o=[1,0,0],s=In(i,a),u=Ln(s,s),l=s[0],c=u-l*l;if(!c){return!r&&e}var f=t*u/c,d=-t*l/c,h=In(o,s),v=jn(o,f),p=jn(s,d);Bn(v,p);var g=h,m=Ln(v,g),b=Ln(g,g),_=m*m-b*(Ln(v,v)-1);if(_<0){return}var w=Math.sqrt(_),x=jn(g,(-m-w)/b);Bn(x,v);x=Hn(x);if(!r){return x}var T=e[0],C=n[0],k=e[1],S=n[1],E;if(C<T){E=T,T=C,C=E}var P=C-T,O=y(P-Pe)<Se,M=O||P<Se;if(!O&&S<k){E=k,k=S,S=E}if(M?O?k+S>0^x[1]<(y(x[0]-T)<Se?k:S):k<=x[1]&&x[1]<=S:P>Pe^(T<=x[0]&&x[0]<=C)){var A=jn(g,(-m+w)/b);Bn(A,v);return[x,Hn(A)]}}function u(t,r){var i=n?e:Pe-e,a=0;if(t<-i){a|=1}else if(t>i){a|=2}if(r<-i){a|=4}else if(r>i){a|=8}return a}}function _r(e,t,n,r){return function(i){var a=i.a,o=i.b,s=a.x,u=a.y,l=o.x,c=o.y,f=0,d=1,h=l-s,v=c-u,p;p=e-s;if(!h&&p>0){return}p/=h;if(h<0){if(p<f){return}if(p<d){d=p}}else if(h>0){if(p>d){return}if(p>f){f=p}}p=n-s;if(!h&&p<0){return}p/=h;if(h<0){if(p>d){return}if(p>f){f=p}}else if(h>0){if(p<f){return}if(p<d){d=p}}p=t-u;if(!v&&p>0){return}p/=v;if(v<0){if(p<f){return}if(p<d){d=p}}else if(v>0){if(p>d){return}if(p>f){f=p}}p=r-u;if(!v&&p<0){return}p/=v;if(v<0){if(p>d){return}if(p>f){f=p}}else if(v>0){if(p<f){return}if(p<d){d=p}}if(f>0){i.a={x:s+f*h,y:u+f*v}}if(d<1){i.b={x:s+d*h,y:u+d*v}}return i}}var wr=1e9;t.geo.clipExtent=function(){var e,t,n,r,i,a,o={stream:function(e){if(i){i.valid=false}i=a(e);i.valid=true;return i},extent:function(s){if(!arguments.length){return[[e,t],[n,r]]}a=xr(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]);if(i){i.valid=false,i=null}return o}};return o.extent([[0,0],[960,500]])};function xr(e,n,r,i){return function(u){var l=u,c=dr(),f=_r(e,n,r,i),d,h,v;var p={point:b,lineStart:P,lineEnd:O,polygonStart:function(){u=c;d=[];h=[];E=true},polygonEnd:function(){u=l;d=t.merge(d);var n=g([e,i]),r=E&&n,a=d.length;if(r||a){u.polygonStart();if(r){u.lineStart();m(null,null,1,u);u.lineEnd()}if(a){sr(d,o,n,m,u)}u.polygonEnd()}d=h=v=null}};function g(e){var t=0,n=h.length,r=e[1];for(var i=0;i<n;++i){for(var a=1,o=h[i],s=o.length,u=o[0],l;a<s;++a){l=o[a];if(u[1]<=r){if(l[1]>r&&Le(u,l,e)>0){++t}}else{if(l[1]<=r&&Le(u,l,e)<0){--t}}u=l}}return t!==0}function m(t,o,u,l){var c=0,f=0;if(t==null||(c=a(t,u))!==(f=a(o,u))||s(t,o)<0^u>0){do{l.point(c===0||c===3?e:r,c>1?i:n)}while((c=(c+u+4)%4)!==f)}else{l.point(o[0],o[1])}}function y(t,a){return e<=t&&t<=r&&n<=a&&a<=i}function b(e,t){if(y(e,t)){u.point(e,t)}}var _,w,x,T,C,k,S,E;function P(){p.point=M;if(h){h.push(v=[])}S=true;k=false;T=C=NaN}function O(){if(d){M(_,w);if(x&&k){c.rejoin()}d.push(c.buffer())}p.point=b;if(k){u.lineEnd()}}function M(e,t){e=Math.max(-wr,Math.min(wr,e));t=Math.max(-wr,Math.min(wr,t));var n=y(e,t);if(h){v.push([e,t])}if(S){_=e,w=t,x=n;S=false;if(n){u.lineStart();u.point(e,t)}}else{if(n&&k){u.point(e,t)}else{var r={a:{x:T,y:C},b:{x:e,y:t}};if(f(r)){if(!k){u.lineStart();u.point(r.a.x,r.a.y)}u.point(r.b.x,r.b.y);if(!n){u.lineEnd()}E=false}else if(n){u.lineStart();u.point(e,t);E=false}}}T=e,C=t,k=n}return p};function a(t,i){return y(t[0]-e)<Se?i>0?0:3:y(t[0]-r)<Se?i>0?2:1:y(t[1]-n)<Se?i>0?1:0:i>0?3:2}function o(e,t){return s(e.x,t.x)}function s(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:n===0?t[1]-e[1]:n===1?e[0]-t[0]:n===2?e[1]-t[1]:t[0]-e[0]}}function Tr(e){var t=0,n=Pe/3,r=$r(e),i=r(t,n);i.parallels=function(e){if(!arguments.length){return[t/Pe*180,n/Pe*180]}return r(t=e[0]*Pe/180,n=e[1]*Pe/180)};return i}function Cr(e,t){var n=Math.sin(e),r=(n+Math.sin(t))/2,i=1+n*(2*r-n),a=Math.sqrt(i)/r;function o(e,t){var n=Math.sqrt(i-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),a-n*Math.cos(e)]}o.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,Be((i-(e*e+n*n)*r*r)/(2*r))]};return o}(t.geo.conicEqualArea=function(){return Tr(Cr)}).raw=Cr;t.geo.albers=function(){return t.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};t.geo.albersUsa=function(){var e=t.geo.albers();var n=t.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var r=t.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var i,a={point:function(e,t){i=[e,t]}},o,s,u;function l(e){var t=e[0],n=e[1];i=null;(o(t,n),i)||(s(t,n),i)||u(t,n);return i}l.invert=function(t){var i=e.scale(),a=e.translate(),o=(t[0]-a[0])/i,s=(t[1]-a[1])/i;return(s>=.12&&s<.234&&o>=-.425&&o<-.214?n:s>=.166&&s<.234&&o>=-.214&&o<-.115?r:e).invert(t)};l.stream=function(t){var i=e.stream(t),a=n.stream(t),o=r.stream(t);return{point:function(e,t){i.point(e,t);a.point(e,t);o.point(e,t)},sphere:function(){i.sphere();a.sphere();o.sphere()},lineStart:function(){i.lineStart();a.lineStart();o.lineStart()},lineEnd:function(){i.lineEnd();a.lineEnd();o.lineEnd()},polygonStart:function(){i.polygonStart();a.polygonStart();o.polygonStart()},polygonEnd:function(){i.polygonEnd();a.polygonEnd();o.polygonEnd()}}};l.precision=function(t){if(!arguments.length){return e.precision()}e.precision(t);n.precision(t);r.precision(t);return l};l.scale=function(t){if(!arguments.length){return e.scale()}e.scale(t);n.scale(t*.35);r.scale(t);return l.translate(e.translate())};l.translate=function(t){if(!arguments.length){return e.translate()}var i=e.scale(),c=+t[0],f=+t[1];o=e.translate(t).clipExtent([[c-.455*i,f-.238*i],[c+.455*i,f+.238*i]]).stream(a).point;s=n.translate([c-.307*i,f+.201*i]).clipExtent([[c-.425*i+Se,f+.12*i+Se],[c-.214*i-Se,f+.234*i-Se]]).stream(a).point;u=r.translate([c-.205*i,f+.212*i]).clipExtent([[c-.214*i+Se,f+.166*i+Se],[c-.115*i-Se,f+.234*i-Se]]).stream(a).point;return l};return l.scale(1070)};var kr,Sr,Er={point:I,lineStart:I,lineEnd:I,polygonStart:function(){Sr=0;Er.lineStart=Pr},polygonEnd:function(){Er.lineStart=Er.lineEnd=Er.point=I;kr+=y(Sr/2)}};function Pr(){var e,t,n,r;Er.point=function(a,o){Er.point=i;e=n=a,t=r=o};function i(e,t){Sr+=r*e-n*t;n=e,r=t}Er.lineEnd=function(){i(e,t)}}var Or,Mr,Ar,Nr;var Rr={point:Dr,lineStart:I,lineEnd:I,polygonStart:I,polygonEnd:I};function Dr(e,t){if(e<Or){Or=e}if(e>Ar){Ar=e}if(t<Mr){Mr=t}if(t>Nr){Nr=t}}function Lr(){var e=Ir(4.5),t=[];var n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o;n.point=r},pointRadius:function(t){e=Ir(t);return n},result:function(){if(t.length){var e=t.join("");t=[];return e}}};function r(n,r){t.push("M",n,",",r,e)}function i(e,r){t.push("M",e,",",r);n.point=a}function a(e,n){t.push("L",e,",",n)}function o(){n.point=r}function s(){t.push("Z")}return n}function Ir(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Br={point:jr,lineStart:Fr,lineEnd:Hr,polygonStart:function(){Br.lineStart=zr},polygonEnd:function(){Br.point=jr;Br.lineStart=Fr;Br.lineEnd=Hr}};function jr(e,t){Wn+=e;qn+=t;++Yn}function Fr(){var e,t;Br.point=function(r,i){Br.point=n;jr(e=r,t=i)};function n(n,r){var i=n-e,a=r-t,o=Math.sqrt(i*i+a*a);Kn+=o*(e+n)/2;$n+=o*(t+r)/2;Gn+=o;jr(e=n,t=r)}}function Hr(){Br.point=jr}function zr(){var e,t,n,r;Br.point=function(a,o){Br.point=i;jr(e=n=a,t=r=o)};function i(e,t){var i=e-n,a=t-r,o=Math.sqrt(i*i+a*a);Kn+=o*(n+e)/2;$n+=o*(r+t)/2;Gn+=o;o=r*e-n*t;Xn+=o*(n+e);Zn+=o*(r+t);Jn+=o*3;jr(n=e,r=t)}Br.lineEnd=function(){i(e,t)}}function Ur(e){var t=4.5;var n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o;n.point=r},pointRadius:function(e){t=e;return n},result:I};function r(n,r){e.moveTo(n+t,r);e.arc(n,r,t,0,Oe)}function i(t,r){e.moveTo(t,r);n.point=a}function a(t,n){e.lineTo(t,n)}function o(){n.point=r}function s(){e.closePath()}return n}function Vr(e){var t=.5,n=Math.cos(30*Ne),r=16;function i(e){return(r?o:a)(e)}function a(t){return Yr(t,function(n,r){n=e(n,r);t.point(n[0],n[1])})}function o(t){var n,i,a,o,u,l,c,f,d,h,v,p,g;var m={point:y,lineStart:b,lineEnd:w,polygonStart:function(){t.polygonStart();m.lineStart=x},polygonEnd:function(){t.polygonEnd();m.lineStart=b}};function y(n,r){n=e(n,r);t.point(n[0],n[1])}function b(){d=NaN;m.point=_;t.lineStart()}function _(n,i){var a=Dn([n,i]),o=e(n,i);s(d,h,f,v,p,g,d=o[0],h=o[1],f=n,v=a[0],p=a[1],g=a[2],r,t);t.point(d,h)}function w(){m.point=y;t.lineEnd()}function x(){b();m.point=T;m.lineEnd=C}function T(e,t){_(n=e,i=t),a=d,o=h,u=v,l=p,c=g;m.point=_}function C(){s(d,h,f,v,p,g,a,o,n,u,l,c,r,t);m.lineEnd=w;w()}return m}function s(r,i,a,o,u,l,c,f,d,h,v,p,g,m){var b=c-r,_=f-i,w=b*b+_*_;if(w>4*t&&g--){var x=o+h,T=u+v,C=l+p,k=Math.sqrt(x*x+T*T+C*C),S=Math.asin(C/=k),E=y(y(C)-1)<Se||y(a-d)<Se?(a+d)/2:Math.atan2(T,x),P=e(E,S),O=P[0],M=P[1],A=O-r,N=M-i,R=_*A-b*N;if(R*R/w>t||y((b*A+_*N)/w-.5)>.3||o*h+u*v+l*p<n){s(r,i,a,o,u,l,O,M,E,x/=k,T/=k,C,g,m);m.point(O,M);s(O,M,E,x,T,C,c,f,d,h,v,p,g,m)}}}i.precision=function(e){if(!arguments.length){return Math.sqrt(t)}r=(t=e*e)>0&&16;return i};return i}t.geo.path=function(){var e=4.5,n,r,i,a,o;function s(n){if(n){if(typeof e==="function"){a.pointRadius(+e.apply(this,arguments))}if(!o||!o.valid){o=i(a)}t.geo.stream(n,o)}return a.result()}s.area=function(e){kr=0;t.geo.stream(e,i(Er));return kr};s.centroid=function(e){Wn=qn=Yn=Kn=$n=Gn=Xn=Zn=Jn=0;t.geo.stream(e,i(Br));return Jn?[Xn/Jn,Zn/Jn]:Gn?[Kn/Gn,$n/Gn]:Yn?[Wn/Yn,qn/Yn]:[NaN,NaN]};s.bounds=function(e){Ar=Nr=-(Or=Mr=Infinity);t.geo.stream(e,i(Rr));return[[Or,Mr],[Ar,Nr]]};s.projection=function(e){if(!arguments.length){return n}i=(n=e)?e.stream||Wr(e):N;return u()};s.context=function(t){if(!arguments.length){return r}a=(r=t)==null?new Lr:new Ur(t);if(typeof e!=="function"){a.pointRadius(e)}return u()};s.pointRadius=function(t){if(!arguments.length){return e}e=typeof t==="function"?t:(a.pointRadius(+t),+t);return s};function u(){o=null;return s}return s.projection(t.geo.albersUsa()).context(null)};function Wr(e){var t=Vr(function(t,n){return e([t*Re,n*Re])});return function(e){return Gr(t(e))}}t.geo.transform=function(e){return{stream:function(t){var n=new qr(t);for(var r in e){n[r]=e[r]}return n}}};function qr(e){this.stream=e}qr.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Yr(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}t.geo.projection=Kr;t.geo.projectionMutator=$r;function Kr(e){return $r(function(){return e})()}function $r(e){var n,r,i,a=Vr(function(e,t){e=n(e,t);return[e[0]*o+v,p-e[1]*o]}),o=150,s=480,u=250,l=0,c=0,f=0,d=0,h=0,v,p,g=vr,m=N,y=null,b=null,_;function w(e){e=i(e[0]*Ne,e[1]*Ne);return[e[0]*o+v,p-e[1]*o]}function x(e){e=i.invert((e[0]-v)/o,(p-e[1])/o);return e&&[e[0]*Re,e[1]*Re]}w.stream=function(e){if(_){_.valid=false}_=Gr(g(r,a(m(e))));_.valid=true;return _};w.clipAngle=function(e){if(!arguments.length){return y}g=e==null?(y=e,vr):br((y=+e)*Ne);return C()};w.clipExtent=function(e){if(!arguments.length){return b}b=e;m=e?xr(e[0][0],e[0][1],e[1][0],e[1][1]):N;return C()};w.scale=function(e){if(!arguments.length){return o}o=+e;return T()};w.translate=function(e){if(!arguments.length){return[s,u]}s=+e[0];u=+e[1];return T()};w.center=function(e){if(!arguments.length){return[l*Re,c*Re]}l=e[0]%360*Ne;c=e[1]%360*Ne;return T()};w.rotate=function(e){if(!arguments.length){return[f*Re,d*Re,h*Re]}f=e[0]%360*Ne;d=e[1]%360*Ne;h=e.length>2?e[2]%360*Ne:0;return T()};t.rebind(w,a,"precision");function T(){i=ar(r=Jr(f,d,h),n);var e=n(l,c);v=s-e[0]*o;p=u+e[1]*o;return C()}function C(){if(_){_.valid=false,_=null}return w}return function(){n=e.apply(this,arguments);w.invert=n.invert&&x;return T()}}function Gr(e){return Yr(e,function(t,n){e.point(t*Ne,n*Ne)})}function Xr(e,t){return[e,t]}(t.geo.equirectangular=function(){return Kr(Xr)}).raw=Xr.invert=Xr;t.geo.rotation=function(e){e=Jr(e[0]%360*Ne,e[1]*Ne,e.length>2?e[2]*Ne:0);function t(t){t=e(t[0]*Ne,t[1]*Ne);return t[0]*=Re,t[1]*=Re,t}t.invert=function(t){t=e.invert(t[0]*Ne,t[1]*Ne);return t[0]*=Re,t[1]*=Re,t};return t};function Zr(e,t){return[e>Pe?e-Oe:e<-Pe?e+Oe:e,t]}Zr.invert=Xr;function Jr(e,t,n){return e?t||n?ar(ei(e),ti(t,n)):ei(e):t||n?ti(t,n):Zr}function Qr(e){return function(t,n){return t+=e,[t>Pe?t-Oe:t<-Pe?t+Oe:t,n]}}function ei(e){var t=Qr(e);t.invert=Qr(-e);return t}function ti(e,t){var n=Math.cos(e),r=Math.sin(e),i=Math.cos(t),a=Math.sin(t);function o(e,t){var o=Math.cos(t),s=Math.cos(e)*o,u=Math.sin(e)*o,l=Math.sin(t),c=l*n+s*r;return[Math.atan2(u*i-c*a,s*n-l*r),Be(c*i+u*a)]}o.invert=function(e,t){var o=Math.cos(t),s=Math.cos(e)*o,u=Math.sin(e)*o,l=Math.sin(t),c=l*i-u*a;return[Math.atan2(u*i+l*a,s*n+c*r),Be(c*n-s*r)]};return o}t.geo.circle=function(){var e=[0,0],t,n=6,r;function i(){var t=typeof e==="function"?e.apply(this,arguments):e,n=Jr(-t[0]*Ne,-t[1]*Ne,0).invert,i=[];r(null,null,1,{point:function(e,t){i.push(e=n(e,t));e[0]*=Re,e[1]*=Re}});return{type:"Polygon",coordinates:[i]}}i.origin=function(t){if(!arguments.length){return e}e=t;return i};i.angle=function(e){if(!arguments.length){return t}r=ni((t=+e)*Ne,n*Ne);return i};i.precision=function(e){if(!arguments.length){return n}r=ni(t*Ne,(n=+e)*Ne);return i};return i.angle(90)};function ni(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,a,o,s){var u=o*t;if(i!=null){i=ri(n,i);a=ri(n,a);if(o>0?i<a:i>a){i+=o*Oe}}else{i=e+o*Oe;a=e-.5*u}for(var l,c=i;o>0?c>a:c<a;c-=u){s.point((l=Hn([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}}function ri(e,t){var n=Dn(t);n[0]-=e;Fn(n);var r=Ie(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Se)%(2*Math.PI)}t.geo.distance=function(e,t){var n=(t[0]-e[0])*Ne,r=e[1]*Ne,i=t[1]*Ne,a=Math.sin(n),o=Math.cos(n),s=Math.sin(r),u=Math.cos(r),l=Math.sin(i),c=Math.cos(i),f;return Math.atan2(Math.sqrt((f=c*a)*f+(f=u*l-s*c*o)*f),s*l+u*c*o)};t.geo.graticule=function(){var e,n,r,i,a,o,s,u,l=10,c=l,f=90,d=360,h,v,p,g,m=2.5;function b(){return{type:"MultiLineString",coordinates:_()}}function _(){return t.range(Math.ceil(i/f)*f,r,f).map(p).concat(t.range(Math.ceil(u/d)*d,s,d).map(g)).concat(t.range(Math.ceil(n/l)*l,e,l).filter(function(e){return y(e%f)>Se}).map(h)).concat(t.range(Math.ceil(o/c)*c,a,c).filter(function(e){return y(e%d)>Se}).map(v))}b.lines=function(){return _().map(function(e){return{type:"LineString",coordinates:e}})};b.outline=function(){return{type:"Polygon",coordinates:[p(i).concat(g(s).slice(1),p(r).reverse().slice(1),g(u).reverse().slice(1))]}};b.extent=function(e){if(!arguments.length){return b.minorExtent()}return b.majorExtent(e).minorExtent(e)};b.majorExtent=function(e){if(!arguments.length){return[[i,u],[r,s]]}i=+e[0][0],r=+e[1][0];u=+e[0][1],s=+e[1][1];if(i>r){e=i,i=r,r=e}if(u>s){e=u,u=s,s=e}return b.precision(m)};b.minorExtent=function(t){if(!arguments.length){return[[n,o],[e,a]]}n=+t[0][0],e=+t[1][0];o=+t[0][1],a=+t[1][1];if(n>e){t=n,n=e,e=t}if(o>a){t=o,o=a,a=t}return b.precision(m)};b.step=function(e){if(!arguments.length){return b.minorStep()}return b.majorStep(e).minorStep(e)};b.majorStep=function(e){if(!arguments.length){return[f,d]}f=+e[0],d=+e[1];return b};b.minorStep=function(e){if(!arguments.length){return[l,c]}l=+e[0],c=+e[1];return b};b.precision=function(t){if(!arguments.length){return m}m=+t;h=ii(o,a,90);v=ai(n,e,m);p=ii(u,s,90);g=ai(i,r,m);return b};return b.majorExtent([[-180,-90+Se],[180,90-Se]]).minorExtent([[-180,-80-Se],[180,80+Se]])};function ii(e,n,r){var i=t.range(e,n-Se,r).concat(n);return function(e){return i.map(function(t){return[e,t]})}}function ai(e,n,r){var i=t.range(e,n-Se,r).concat(n);return function(e){return i.map(function(t){return[t,e]})}}function oi(e){return e.source}function si(e){return e.target}t.geo.greatArc=function(){var e=oi,n,r=si,i;function a(){return{type:"LineString",coordinates:[n||e.apply(this,arguments),i||r.apply(this,arguments)]}}a.distance=function(){return t.geo.distance(n||e.apply(this,arguments),i||r.apply(this,arguments))};a.source=function(t){if(!arguments.length){return e}e=t,n=typeof t==="function"?null:t;return a};a.target=function(e){if(!arguments.length){return r}r=e,i=typeof e==="function"?null:e;return a};a.precision=function(){return arguments.length?a:0};return a};t.geo.interpolate=function(e,t){return ui(e[0]*Ne,e[1]*Ne,t[0]*Ne,t[1]*Ne)};function ui(e,t,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(r),s=Math.sin(r),u=i*Math.cos(e),l=i*Math.sin(e),c=o*Math.cos(n),f=o*Math.sin(n),d=2*Math.asin(Math.sqrt(ze(r-t)+i*o*ze(n-e))),h=1/Math.sin(d);var v=d?function(e){var t=Math.sin(e*=d)*h,n=Math.sin(d-e)*h,r=n*u+t*c,i=n*l+t*f,o=n*a+t*s;return[Math.atan2(i,r)*Re,Math.atan2(o,Math.sqrt(r*r+i*i))*Re]}:function(){return[e*Re,t*Re]};v.distance=d;return v}t.geo.length=function(e){li=0;t.geo.stream(e,ci);return li};var li;var ci={sphere:I,point:I,lineStart:fi,lineEnd:I,polygonStart:I,polygonEnd:I};function fi(){var e,t,n;ci.point=function(i,a){e=i*Ne,t=Math.sin(a*=Ne),n=Math.cos(a);ci.point=r};ci.lineEnd=function(){ci.point=ci.lineEnd=I};function r(r,i){var a=Math.sin(i*=Ne),o=Math.cos(i),s=y((r*=Ne)-e),u=Math.cos(s);li+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=n*a-t*o*u)*s),t*a+n*o*u);e=r,t=a,n=o}}function di(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),a=e(r*i);return[a*i*Math.sin(t),a*Math.sin(n)]}n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*a,r*o),Math.asin(r&&n*a/r)]};return n}var hi=di(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(t.geo.azimuthalEqualArea=function(){return Kr(hi)}).raw=hi;var vi=di(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},N);(t.geo.azimuthalEquidistant=function(){return Kr(vi)}).raw=vi;function pi(e,t){var n=Math.cos(e),r=function(e){return Math.tan(Pe/4+e/2)},i=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),a=n*Math.pow(r(e),i)/i;if(!i){return yi}function o(e,t){if(a>0){if(t<-Ae+Se){t=-Ae+Se}}else{if(t>Ae-Se){t=Ae-Se}}var n=a/Math.pow(r(t),i);return[n*Math.sin(i*e),a-n*Math.cos(i*e)]}o.invert=function(e,t){var n=a-t,r=De(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(a/r,1/i))-Ae]};return o}(t.geo.conicConformal=function(){return Tr(pi)}).raw=pi;function gi(e,t){var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),i=n/r+e;if(y(r)<Se){return Xr}function a(e,t){var n=i-t;return[n*Math.sin(r*e),i-n*Math.cos(r*e)]}a.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,i-De(r)*Math.sqrt(e*e+n*n)]};return a}(t.geo.conicEquidistant=function(){return Tr(gi)}).raw=gi;var mi=di(function(e){return 1/e},Math.atan);(t.geo.gnomonic=function(){return Kr(mi)}).raw=mi;function yi(e,t){return[e,Math.log(Math.tan(Pe/4+t/2))]}yi.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Ae]};function bi(e){var t=Kr(e),n=t.scale,r=t.translate,i=t.clipExtent,a;t.scale=function(){var e=n.apply(t,arguments);return e===t?a?t.clipExtent(null):t:e};t.translate=function(){var e=r.apply(t,arguments);return e===t?a?t.clipExtent(null):t:e};t.clipExtent=function(e){var o=i.apply(t,arguments);if(o===t){if(a=e==null){var s=Pe*n(),u=r();i([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else if(a){o=null}return o};return t.clipExtent(null)}(t.geo.mercator=function(){return bi(yi)}).raw=yi;var _i=di(function(){return 1},Math.asin);(t.geo.orthographic=function(){return Kr(_i)}).raw=_i;var wi=di(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(t.geo.stereographic=function(){return Kr(wi)}).raw=wi;function xi(e,t){return[Math.log(Math.tan(Pe/4+t/2)),-e]}xi.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Ae]};(t.geo.transverseMercator=function(){var e=bi(xi),t=e.center,n=e.rotate;e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])};e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])};return n([0,0,90])}).raw=xi;t.geom={};function Ti(e){return e[0]}function Ci(e){return e[1]}t.geom.hull=function(e){var t=Ti,n=Ci;if(arguments.length){return r(e)}function r(e){if(e.length<3){return[]}var r=Tt(t),i=Tt(n),a,o=e.length,s=[],u=[];for(a=0;a<o;a++){s.push([+r.call(this,e[a],a),+i.call(this,e[a],a),a])}s.sort(Si);for(a=0;a<o;a++){u.push([s[a][0],-s[a][1]])}var l=ki(s),c=ki(u);var f=c[0]===l[0],d=c[c.length-1]===l[l.length-1],h=[];for(a=l.length-1;a>=0;--a){h.push(e[s[l[a]][2]])}for(a=+f;a<c.length-d;++a){h.push(e[s[c[a]][2]])}return h}r.x=function(e){return arguments.length?(t=e,r):t};r.y=function(e){return arguments.length?(n=e,r):n};return r};function ki(e){var t=e.length,n=[0,1],r=2;for(var i=2;i<t;i++){while(r>1&&Le(e[n[r-2]],e[n[r-1]],e[i])<=0){--r}n[r++]=i}return n.slice(0,r)}function Si(e,t){return e[0]-t[0]||e[1]-t[1]}t.geom.polygon=function(e){V(e,Ei);return e};var Ei=t.geom.polygon.prototype=[];Ei.area=function(){var e=-1,t=this.length,n,r=this[t-1],i=0;while(++e<t){n=r;r=this[e];i+=n[1]*r[0]-n[0]*r[1]}return i*.5};Ei.centroid=function(e){var t=-1,n=this.length,r=0,i=0,a,o=this[n-1],s;if(!arguments.length){e=-1/(6*this.area())}while(++t<n){a=o;o=this[t];s=a[0]*o[1]-o[0]*a[1];r+=(a[0]+o[0])*s;i+=(a[1]+o[1])*s}return[r*e,i*e]};Ei.clip=function(e){var t,n=Mi(e),r=-1,i=this.length-Mi(this),a,o,s=this[i-1],u,l,c;while(++r<i){t=e.slice();e.length=0;u=this[r];l=t[(o=t.length-n)-1];a=-1;while(++a<o){c=t[a];if(Pi(c,s,u)){if(!Pi(l,s,u)){e.push(Oi(l,c,s,u))}e.push(c)}else if(Pi(l,s,u)){e.push(Oi(l,c,s,u))}l=c}if(n){e.push(e[0])}s=u}return e};function Pi(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Oi(e,t,n,r){var i=e[0],a=n[0],o=t[0]-i,s=r[0]-a,u=e[1],l=n[1],c=t[1]-u,f=r[1]-l,d=(s*(u-l)-f*(i-a))/(f*o-s*c);return[i+d*o,u+d*c]}function Mi(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}var Ai,Ni,Ri,Di=[],Li,Ii,Bi=[];function ji(){aa(this);this.edge=this.site=this.circle=null}function Fi(e){var t=Di.pop()||new ji;t.site=e;return t}function Hi(e){Xi(e);Ri.remove(e);Di.push(e);aa(e)}function zi(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},a=e.P,o=e.N,s=[e];Hi(e);var u=a;while(u.circle&&y(n-u.circle.x)<Se&&y(r-u.circle.cy)<Se){a=u.P;s.unshift(u);Hi(u);u=a}s.unshift(u);Xi(u);var l=o;while(l.circle&&y(n-l.circle.x)<Se&&y(r-l.circle.cy)<Se){o=l.N;s.push(l);Hi(l);l=o}s.push(l);Xi(l);var c=s.length,f;for(f=1;f<c;++f){l=s[f];u=s[f-1];na(l.edge,u.site,l.site,i)}u=s[0];l=s[c-1];l.edge=ea(u.site,l.site,null,i);Gi(u);Gi(l)}function Ui(e){var t=e.x,n=e.y,r,i,a,o,s=Ri._;while(s){a=Vi(s,n)-t;if(a>Se){s=s.L}else{o=t-Wi(s,n);if(o>Se){if(!s.R){r=s;break}s=s.R}else{if(a>-Se){r=s.P;i=s}else if(o>-Se){r=s;i=s.N}else{r=i=s}break}}}var u=Fi(e);Ri.insert(r,u);if(!r&&!i){return}if(r===i){Xi(r);i=Fi(r.site);Ri.insert(u,i);u.edge=i.edge=ea(r.site,u.site);Gi(r);Gi(i);return}if(!i){u.edge=ea(r.site,u.site);return}Xi(r);Xi(i);var l=r.site,c=l.x,f=l.y,d=e.x-c,h=e.y-f,v=i.site,p=v.x-c,g=v.y-f,m=2*(d*g-h*p),y=d*d+h*h,b=p*p+g*g,_={x:(g*y-h*b)/m+c,y:(d*b-p*y)/m+f};na(i.edge,l,v,_);u.edge=ea(l,e,null,_);i.edge=ea(e,v,null,_);Gi(r);Gi(i)}function Vi(e,t){var n=e.site,r=n.x,i=n.y,a=i-t;if(!a){return r}var o=e.P;if(!o){return-Infinity}n=o.site;var s=n.x,u=n.y,l=u-t;if(!l){return s}var c=s-r,f=1/a-1/l,d=c/l;if(f){return(-d+Math.sqrt(d*d-2*f*(c*c/(-2*l)-u+l/2+i-a/2)))/f+r}return(r+s)/2}function Wi(e,t){var n=e.N;if(n){return Vi(n,t)}var r=e.site;return r.y===t?r.x:Infinity}function qi(e){this.site=e;this.edges=[]}qi.prototype.prepare=function(){var e=this.edges,t=e.length,n;while(t--){n=e[t].edge;if(!n.b||!n.a){e.splice(t,1)}}e.sort(Ki);return e.length};function Yi(e){var t=e[0][0],n=e[1][0],r=e[0][1],i=e[1][1],a,o,s,u,l=Ni,c=l.length,f,d,h,v,p,g;while(c--){f=l[c];if(!f||!f.prepare()){continue}h=f.edges;v=h.length;d=0;while(d<v){g=h[d].end(),s=g.x,u=g.y;p=h[++d%v].start(),a=p.x,o=p.y;if(y(s-a)>Se||y(u-o)>Se){h.splice(d,0,new ra(ta(f.site,g,y(s-t)<Se&&i-u>Se?{x:t,y:y(a-t)<Se?o:i}:y(u-i)<Se&&n-s>Se?{x:y(o-i)<Se?a:n,y:i}:y(s-n)<Se&&u-r>Se?{x:n,y:y(a-n)<Se?o:r}:y(u-r)<Se&&s-t>Se?{x:y(o-r)<Se?a:t,y:r}:null),f.site,null));++v}}}}function Ki(e,t){return t.angle-e.angle}function $i(){aa(this);this.x=this.y=this.arc=this.site=this.cy=null}function Gi(e){var t=e.P,n=e.N;if(!t||!n){return}var r=t.site,i=e.site,a=n.site;if(r===a){return}var o=i.x,s=i.y,u=r.x-o,l=r.y-s,c=a.x-o,f=a.y-s;var d=2*(u*f-l*c);if(d>=-Ee){return}var h=u*u+l*l,v=c*c+f*f,p=(f*h-l*v)/d,g=(u*v-c*h)/d,f=g+s;var m=Bi.pop()||new $i;m.arc=e;m.site=i;m.x=p+o;m.y=f+Math.sqrt(p*p+g*g);m.cy=f;e.circle=m;var y=null,b=Ii._;while(b){if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(b.L){b=b.L}else{y=b.P;break}}else{if(b.R){b=b.R}else{y=b;break}}}Ii.insert(y,m);if(!y){Li=m}}function Xi(e){var t=e.circle;if(t){if(!t.P){Li=t.N}Ii.remove(t);Bi.push(t);aa(t);e.circle=null}}function Zi(e){var t=Ai,n=_r(e[0][0],e[0][1],e[1][0],e[1][1]),r=t.length,i;while(r--){i=t[r];if(!Ji(i,e)||!n(i)||y(i.a.x-i.b.x)<Se&&y(i.a.y-i.b.y)<Se){i.a=i.b=null;t.splice(r,1)}}}function Ji(e,t){var n=e.b;if(n){return true}var r=e.a,i=t[0][0],a=t[1][0],o=t[0][1],s=t[1][1],u=e.l,l=e.r,c=u.x,f=u.y,d=l.x,h=l.y,v=(c+d)/2,p=(f+h)/2,g,m;if(h===f){if(v<i||v>=a){return}if(c>d){if(!r){r={x:v,y:o}}else if(r.y>=s){return}n={x:v,y:s}}else{if(!r){r={x:v,y:s}}else if(r.y<o){return}n={x:v,y:o}}}else{g=(c-d)/(h-f);m=p-g*v;if(g<-1||g>1){if(c>d){if(!r){r={x:(o-m)/g,y:o}}else if(r.y>=s){return}n={x:(s-m)/g,y:s}}else{if(!r){r={x:(s-m)/g,y:s}}else if(r.y<o){return}n={x:(o-m)/g,y:o}}}else{if(f<h){if(!r){r={x:i,y:g*i+m}}else if(r.x>=a){return}n={x:a,y:g*a+m}}else{if(!r){r={x:a,y:g*a+m}}else if(r.x<i){return}n={x:i,y:g*i+m}}}}e.a=r;e.b=n;return true}function Qi(e,t){this.l=e;this.r=t;this.a=this.b=null}function ea(e,t,n,r){var i=new Qi(e,t);Ai.push(i);if(n){na(i,e,t,n)}if(r){na(i,t,e,r)}Ni[e.i].edges.push(new ra(i,e,t));Ni[t.i].edges.push(new ra(i,t,e));return i}function ta(e,t,n){var r=new Qi(e,null);r.a=t;r.b=n;Ai.push(r);return r}function na(e,t,n,r){if(!e.a&&!e.b){e.a=r;e.l=t;e.r=n}else if(e.l===n){e.b=r}else{e.a=r}}function ra(e,t,n){var r=e.a,i=e.b;this.edge=e;this.site=t;this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}ra.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ia(){this._=null}function aa(e){e.U=e.C=e.L=e.R=e.P=e.N=null}ia.prototype={insert:function(e,t){var n,r,i;if(e){t.P=e;t.N=e.N;if(e.N){e.N.P=t}e.N=t;if(e.R){e=e.R;while(e.L){e=e.L}e.L=t}else{e.R=t}n=e}else if(this._){e=ua(this._);t.P=null;t.N=e;e.P=e.L=t;n=e}else{t.P=t.N=null;this._=t;n=null}t.L=t.R=null;t.U=n;t.C=true;e=t;while(n&&n.C){r=n.U;if(n===r.L){i=r.R;if(i&&i.C){n.C=i.C=false;r.C=true;e=r}else{if(e===n.R){oa(this,n);e=n;n=e.U}n.C=false;r.C=true;sa(this,r)}}else{i=r.L;if(i&&i.C){n.C=i.C=false;r.C=true;e=r}else{if(e===n.L){sa(this,n);e=n;n=e.U}n.C=false;r.C=true;oa(this,r)}}n=e.U}this._.C=false},remove:function(e){if(e.N){e.N.P=e.P}if(e.P){e.P.N=e.N}e.N=e.P=null;var t=e.U,n,r=e.L,i=e.R,a,o;if(!r){a=i}else if(!i){a=r}else{a=ua(i)}if(t){if(t.L===e){t.L=a}else{t.R=a}}else{this._=a}if(r&&i){o=a.C;a.C=e.C;a.L=r;r.U=a;if(a!==i){t=a.U;a.U=e.U;e=a.R;t.L=e;a.R=i;i.U=a}else{a.U=t;t=a;e=a.R}}else{o=e.C;e=a}if(e){e.U=t}if(o){return}if(e&&e.C){e.C=false;return}do{if(e===this._){break}if(e===t.L){n=t.R;if(n.C){n.C=false;t.C=true;oa(this,t);n=t.R}if(n.L&&n.L.C||n.R&&n.R.C){if(!n.R||!n.R.C){n.L.C=false;n.C=true;sa(this,n);n=t.R}n.C=t.C;t.C=n.R.C=false;oa(this,t);e=this._;break}}else{n=t.L;if(n.C){n.C=false;t.C=true;sa(this,t);n=t.L}if(n.L&&n.L.C||n.R&&n.R.C){if(!n.L||!n.L.C){n.R.C=false;n.C=true;oa(this,n);n=t.L}n.C=t.C;t.C=n.L.C=false;sa(this,t);e=this._;break}}n.C=true;e=t;t=t.U}while(!e.C);if(e){e.C=false}}};function oa(e,t){var n=t,r=t.R,i=n.U;if(i){if(i.L===n){i.L=r}else{i.R=r}}else{e._=r}r.U=i;n.U=r;n.R=r.L;if(n.R){n.R.U=n}r.L=n}function sa(e,t){var n=t,r=t.L,i=n.U;if(i){if(i.L===n){i.L=r}else{i.R=r}}else{e._=r}r.U=i;n.U=r;n.L=r.R;if(n.L){n.L.U=n}r.R=n}function ua(e){while(e.L){e=e.L}return e}function la(e,t){var n=e.sort(ca).pop(),r,i,a;Ai=[];Ni=new Array(e.length);Ri=new ia;Ii=new ia;while(true){a=Li;if(n&&(!a||n.y<a.y||n.y===a.y&&n.x<a.x)){if(n.x!==r||n.y!==i){Ni[n.i]=new qi(n);Ui(n);r=n.x,i=n.y}n=e.pop()}else if(a){zi(a.arc)}else{break}}if(t){Zi(t),Yi(t)}var o={cells:Ni,edges:Ai};Ri=Ii=Ai=Ni=null;return o}function ca(e,t){return t.y-e.y||t.x-e.x}t.geom.voronoi=function(e){var t=Ti,n=Ci,r=t,i=n,a=fa;if(e){return o(e)}function o(e){var t=new Array(e.length),n=a[0][0],r=a[0][1],i=a[1][0],o=a[1][1];la(s(e),a).cells.forEach(function(a,s){var u=a.edges,l=a.site,c=t[s]=u.length?u.map(function(e){var t=e.start();return[t.x,t.y]}):l.x>=n&&l.x<=i&&l.y>=r&&l.y<=o?[[n,o],[i,o],[i,r],[n,r]]:[];c.point=e[s]});return t}function s(e){return e.map(function(e,t){return{x:Math.round(r(e,t)/Se)*Se,y:Math.round(i(e,t)/Se)*Se,i:t}})}o.links=function(e){return la(s(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})};o.triangles=function(e){var t=[];la(s(e)).cells.forEach(function(n,r){var i=n.site,a=n.edges.sort(Ki),o=-1,s=a.length,u,l,c=a[s-1].edge,f=c.l===i?c.r:c.l;while(++o<s){l=f;c=a[o].edge;f=c.l===i?c.r:c.l;if(r<l.i&&r<f.i&&da(i,l,f)<0){t.push([e[r],e[l.i],e[f.i]])}}});return t};o.x=function(e){return arguments.length?(r=Tt(t=e),o):t};o.y=function(e){return arguments.length?(i=Tt(n=e),o):n};o.clipExtent=function(e){if(!arguments.length){return a===fa?null:a}a=e==null?fa:e;return o};o.size=function(e){if(!arguments.length){return a===fa?null:a&&a[1]}return o.clipExtent(e&&[[0,0],e])};return o};var fa=[[-1e6,-1e6],[1e6,1e6]];function da(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}t.geom.delaunay=function(e){return t.geom.voronoi().triangles(e)};t.geom.quadtree=function(e,t,n,r,i){var a=Ti,o=Ci,s;if(s=arguments.length){a=ha;o=va;if(s===3){i=n;r=t;n=t=0}return u(e)}function u(e){var u,l=Tt(a),c=Tt(o),f,d,h,v,p,g,m,b;if(t!=null){p=t,g=n,m=r,b=i}else{m=b=-(p=g=Infinity);f=[],d=[];v=e.length;if(s){for(h=0;h<v;++h){u=e[h];if(u.x<p){p=u.x}if(u.y<g){g=u.y}if(u.x>m){m=u.x}if(u.y>b){b=u.y}f.push(u.x);d.push(u.y)}}else{for(h=0;h<v;++h){var _=+l(u=e[h],h),w=+c(u,h);if(_<p){p=_}if(w<g){g=w}if(_>m){m=_}if(w>b){b=w}f.push(_);d.push(w)}}}var x=m-p,T=b-g;if(x>T){b=g+x}else{m=p+T}function C(e,t,n,r,i,a,o,s){if(isNaN(n)||isNaN(r)){return}if(e.leaf){var u=e.x,l=e.y;if(u!=null){if(y(u-n)+y(l-r)<.01){k(e,t,n,r,i,a,o,s)}else{var c=e.point;e.x=e.y=e.point=null;k(e,c,u,l,i,a,o,s);k(e,t,n,r,i,a,o,s)}}else{e.x=n,e.y=r,e.point=t}}else{k(e,t,n,r,i,a,o,s)}}function k(e,t,n,r,i,a,o,s){var u=(i+o)*.5,l=(a+s)*.5,c=n>=u,f=r>=l,d=f<<1|c;e.leaf=false;e=e.nodes[d]||(e.nodes[d]=pa());if(c){i=u}else{o=u}if(f){a=l}else{s=l}C(e,t,n,r,i,a,o,s)}var S=pa();S.add=function(e){C(S,e,+l(e,++h),+c(e,h),p,g,m,b)};S.visit=function(e){ga(e,S,p,g,m,b)};S.find=function(e){return ma(S,e[0],e[1],p,g,m,b)};h=-1;if(t==null){while(++h<v){C(S,e[h],f[h],d[h],p,g,m,b)}--h}else{e.forEach(S.add)}f=d=e=u=null;return S}u.x=function(e){return arguments.length?(a=e,u):a};u.y=function(e){return arguments.length?(o=e,u):o};u.extent=function(e){if(!arguments.length){return t==null?null:[[t,n],[r,i]]}if(e==null){t=n=r=i=null}else{t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]}return u};u.size=function(e){if(!arguments.length){return t==null?null:[r-t,i-n]}if(e==null){t=n=r=i=null}else{t=n=0,r=+e[0],i=+e[1]}return u};return u};function ha(e){return e.x}function va(e){return e.y}function pa(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function ga(e,t,n,r,i,a){if(!e(t,n,r,i,a)){var o=(n+i)*.5,s=(r+a)*.5,u=t.nodes;if(u[0]){ga(e,u[0],n,r,o,s)}if(u[1]){ga(e,u[1],o,r,i,s)}if(u[2]){ga(e,u[2],n,s,o,a)}if(u[3]){ga(e,u[3],o,s,i,a)}}}function ma(e,t,n,r,i,a,o){var s=Infinity,u;(function e(l,c,f,d,h){if(c>a||f>o||d<r||h<i){return}if(v=l.point){var v,p=t-l.x,g=n-l.y,m=p*p+g*g;if(m<s){var y=Math.sqrt(s=m);r=t-y,i=n-y;a=t+y,o=n+y;u=v}}var b=l.nodes,_=(c+d)*.5,w=(f+h)*.5,x=t>=_,T=n>=w;for(var C=T<<1|x,k=C+4;C<k;++C){if(l=b[C&3]){switch(C&3){case 0:e(l,c,f,_,w);break;case 1:e(l,_,f,d,w);break;case 2:e(l,c,w,_,h);break;case 3:e(l,_,w,d,h);break}}}})(e,r,i,a,o);return u}t.interpolateRgb=ya;function ya(e,n){e=t.rgb(e);n=t.rgb(n);var r=e.r,i=e.g,a=e.b,o=n.r-r,s=n.g-i,u=n.b-a;return function(e){return"#"+gt(Math.round(r+o*e))+gt(Math.round(i+s*e))+gt(Math.round(a+u*e))}}t.interpolateObject=ba;function ba(e,t){var n={},r={},i;for(i in e){if(i in t){n[i]=Ca(e[i],t[i])}else{r[i]=e[i]}}for(i in t){if(!(i in e)){r[i]=t[i]}}return function(e){for(i in n){r[i]=n[i](e)}return r}}t.interpolateNumber=_a;function _a(e,t){e=+e,t=+t;return function(n){return e*(1-n)+t*n}}t.interpolateString=wa;function wa(e,t){var n=xa.lastIndex=Ta.lastIndex=0,r,i,a,o=-1,s=[],u=[];e=e+"",t=t+"";while((r=xa.exec(e))&&(i=Ta.exec(t))){if((a=i.index)>n){a=t.slice(n,a);if(s[o]){s[o]+=a}else{s[++o]=a}}if((r=r[0])===(i=i[0])){if(s[o]){s[o]+=i}else{s[++o]=i}}else{s[++o]=null;u.push({i:o,x:_a(r,i)})}n=Ta.lastIndex}if(n<t.length){a=t.slice(n);if(s[o]){s[o]+=a}else{s[++o]=a}}return s.length<2?u[0]?(t=u[0].x,function(e){return t(e)+""}):function(){return t}:(t=u.length,function(e){for(var n=0,r;n<t;++n){s[(r=u[n]).i]=r.x(e)}return s.join("")})}var xa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ta=new RegExp(xa.source,"g");t.interpolate=Ca;function Ca(e,n){var r=t.interpolators.length,i;while(--r>=0&&!(i=t.interpolators[r](e,n))){}return i}t.interpolators=[function(e,t){var n=typeof t;return(n==="string"?xt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?ya:wa:t instanceof $e?ya:Array.isArray(t)?ka:n==="object"&&isNaN(t)?ba:_a)(e,t)}];t.interpolateArray=ka;function ka(e,t){var n=[],r=[],i=e.length,a=t.length,o=Math.min(e.length,t.length),s;for(s=0;s<o;++s){n.push(Ca(e[s],t[s]))}for(;s<i;++s){r[s]=e[s]}for(;s<a;++s){r[s]=t[s]}return function(e){for(s=0;s<o;++s){r[s]=n[s](e)}return r}}var Sa=function(){return N};var Ea=t.map({linear:Sa,poly:La,quad:function(){return Na},cubic:function(){return Ra},sin:function(){return Ia},exp:function(){return Ba},circle:function(){return ja},elastic:Fa,back:Ha,bounce:function(){return za}});var Pa=t.map({in:N,out:Ma,"in-out":Aa,"out-in":function(e){return Aa(Ma(e))}});t.ease=function(e){var t=e.indexOf("-"),r=t>=0?e.slice(0,t):e,i=t>=0?e.slice(t+1):"in";r=Ea.get(r)||Sa;i=Pa.get(i)||N;return Oa(i(r.apply(null,n.call(arguments,1))))};function Oa(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function Ma(e){return function(t){return 1-e(1-t)}}function Aa(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Na(e){return e*e}function Ra(e){return e*e*e}function Da(e){if(e<=0){return 0}if(e>=1){return 1}var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function La(e){return function(t){return Math.pow(t,e)}}function Ia(e){return 1-Math.cos(e*Ae)}function Ba(e){return Math.pow(2,10*(e-1))}function ja(e){return 1-Math.sqrt(1-e*e)}function Fa(e,t){var n;if(arguments.length<2){t=.45}if(arguments.length){n=t/Oe*Math.asin(1/e)}else{e=1,n=t/4}return function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Oe/t)}}function Ha(e){if(!e){e=1.70158}return function(t){return t*t*((e+1)*t-e)}}function za(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}t.interpolateHcl=Ua;function Ua(e,n){e=t.hcl(e);n=t.hcl(n);var r=e.h,i=e.c,a=e.l,o=n.h-r,s=n.c-i,u=n.l-a;if(isNaN(s)){s=0,i=isNaN(i)?n.c:i}if(isNaN(o)){o=0,r=isNaN(r)?n.h:r}else if(o>180){o-=360}else if(o<-180){o+=360}return function(e){return et(r+o*e,i+s*e,a+u*e)+""}}t.interpolateHsl=Va;function Va(e,n){e=t.hsl(e);n=t.hsl(n);var r=e.h,i=e.s,a=e.l,o=n.h-r,s=n.s-i,u=n.l-a;if(isNaN(s)){s=0,i=isNaN(i)?n.s:i}if(isNaN(o)){o=0,r=isNaN(r)?n.h:r}else if(o>180){o-=360}else if(o<-180){o+=360}return function(e){return Ze(r+o*e,i+s*e,a+u*e)+""}}t.interpolateLab=Wa;function Wa(e,n){e=t.lab(e);n=t.lab(n);var r=e.l,i=e.a,a=e.b,o=n.l-r,s=n.a-i,u=n.b-a;return function(e){return st(r+o*e,i+s*e,a+u*e)+""}}t.interpolateRound=qa;function qa(e,t){t-=e;return function(n){return Math.round(e+t*n)}}t.transform=function(e){var n=i.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(e){if(e!=null){n.setAttribute("transform",e);var t=n.transform.baseVal.consolidate()}return new Ya(t?t.matrix:Xa)})(e)};function Ya(e){var t=[e.a,e.b],n=[e.c,e.d],r=$a(t),i=Ka(t,n),a=$a(Ga(n,t,-i))||0;if(t[0]*n[1]<n[0]*t[1]){t[0]*=-1;t[1]*=-1;r*=-1;i*=-1}this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Re;this.translate=[e.e,e.f];this.scale=[r,a];this.skew=a?Math.atan2(i,a)*Re:0}Ya.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Ka(e,t){return e[0]*t[0]+e[1]*t[1]}function $a(e){var t=Math.sqrt(Ka(e,e));if(t){e[0]/=t;e[1]/=t}return t}function Ga(e,t,n){e[0]+=n*t[0];e[1]+=n*t[1];return e}var Xa={a:1,b:0,c:0,d:1,e:0,f:0};t.interpolateTransform=no;function Za(e){return e.length?e.pop()+",":""}function Ja(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:_a(e[0],t[0])},{i:i-2,x:_a(e[1],t[1])})}else if(t[0]||t[1]){n.push("translate("+t+")")}}function Qa(e,t,n,r){if(e!==t){if(e-t>180){t+=360}else if(t-e>180){e+=360}r.push({i:n.push(Za(n)+"rotate(",null,")")-2,x:_a(e,t)})}else if(t){n.push(Za(n)+"rotate("+t+")")}}function eo(e,t,n,r){if(e!==t){r.push({i:n.push(Za(n)+"skewX(",null,")")-2,x:_a(e,t)})}else if(t){n.push(Za(n)+"skewX("+t+")")}}function to(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(Za(n)+"scale(",null,",",null,")");r.push({i:i-4,x:_a(e[0],t[0])},{i:i-2,x:_a(e[1],t[1])})}else if(t[0]!==1||t[1]!==1){n.push(Za(n)+"scale("+t+")")}}function no(e,n){var r=[],i=[];e=t.transform(e),n=t.transform(n);Ja(e.translate,n.translate,r,i);Qa(e.rotate,n.rotate,r,i);eo(e.skew,n.skew,r,i);to(e.scale,n.scale,r,i);e=n=null;return function(e){var t=-1,n=i.length,a;while(++t<n){r[(a=i[t]).i]=a.x(e)}return r.join("")}}function ro(e,t){t=(t-=e=+e)||1/t;return function(n){return(n-e)/t}}function io(e,t){t=(t-=e=+e)||1/t;return function(n){return Math.max(0,Math.min(1,(n-e)/t))}}t.layout={};t.layout.bundle=function(){return function(e){var t=[],n=-1,r=e.length;while(++n<r){t.push(ao(e[n]))}return t}};function ao(e){var t=e.source,n=e.target,r=so(t,n),i=[t];while(t!==r){t=t.parent;i.push(t)}var a=i.length;while(n!==r){i.splice(a,0,n);n=n.parent}return i}function oo(e){var t=[],n=e.parent;while(n!=null){t.push(e);e=n;n=n.parent}t.push(e);return t}function so(e,t){if(e===t){return e}var n=oo(e),r=oo(t),i=n.pop(),a=r.pop(),o=null;while(i===a){o=i;i=n.pop();a=r.pop()}return o}t.layout.chord=function(){var e={},n,r,i,a,o=0,s,u,l;function c(){var e={},c=[],d=t.range(a),h=[],v,p,g,m,y;n=[];r=[];v=0,m=-1;while(++m<a){p=0,y=-1;while(++y<a){p+=i[m][y]}c.push(p);h.push(t.range(a));v+=p}if(s){d.sort(function(e,t){return s(c[e],c[t])})}if(u){h.forEach(function(e,t){e.sort(function(e,n){return u(i[t][e],i[t][n])})})}v=(Oe-o*a)/v;p=0,m=-1;while(++m<a){g=p,y=-1;while(++y<a){var b=d[m],_=h[b][y],w=i[b][_],x=p,T=p+=w*v;e[b+"-"+_]={index:b,subindex:_,startAngle:x,endAngle:T,value:w}}r[b]={index:b,startAngle:g,endAngle:p,value:c[b]};p+=o}m=-1;while(++m<a){y=m-1;while(++y<a){var C=e[m+"-"+y],k=e[y+"-"+m];if(C.value||k.value){n.push(C.value<k.value?{source:k,target:C}:{source:C,target:k})}}}if(l){f()}}function f(){n.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}e.matrix=function(t){if(!arguments.length){return i}a=(i=t)&&i.length;n=r=null;return e};e.padding=function(t){if(!arguments.length){return o}o=t;n=r=null;return e};e.sortGroups=function(t){if(!arguments.length){return s}s=t;n=r=null;return e};e.sortSubgroups=function(t){if(!arguments.length){return u}u=t;n=null;return e};e.sortChords=function(t){if(!arguments.length){return l}l=t;if(n){f()}return e};e.chords=function(){if(!n){c()}return n};e.groups=function(){if(!r){c()}return r};return e};t.layout.force=function(){var e={},n=t.dispatch("start","tick","end"),r,i=[1,1],a,o,s=.9,u=vo,l=po,c=-30,f=go,d=.1,h=.64,v=[],p=[],g,m,y;function b(e){return function(t,n,r,i){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=i-n,u=a*a+o*o;if(s*s/h<u){if(u<f){var l=t.charge/u;e.px-=a*l;e.py-=o*l}return true}if(t.point&&u&&u<f){var l=t.pointCharge/u;e.px-=a*l;e.py-=o*l}}return!t.charge}}e.tick=function(){if((o*=.99)<.005){r=null;n.end({type:"end",alpha:o=0});return true}var e=v.length,a=p.length,u,l,f,h,_,w,x,T,C;for(l=0;l<a;++l){f=p[l];h=f.source;_=f.target;T=_.x-h.x;C=_.y-h.y;if(w=T*T+C*C){w=o*m[l]*((w=Math.sqrt(w))-g[l])/w;T*=w;C*=w;_.x-=T*(x=h.weight+_.weight?h.weight/(h.weight+_.weight):.5);_.y-=C*x;h.x+=T*(x=1-x);h.y+=C*x}}if(x=o*d){T=i[0]/2;C=i[1]/2;l=-1;if(x){while(++l<e){f=v[l];f.x+=(T-f.x)*x;f.y+=(C-f.y)*x}}}if(c){ho(u=t.geom.quadtree(v),o,y);l=-1;while(++l<e){if(!(f=v[l]).fixed){u.visit(b(f))}}}l=-1;while(++l<e){f=v[l];if(f.fixed){f.x=f.px;f.y=f.py}else{f.x-=(f.px-(f.px=f.x))*s;f.y-=(f.py-(f.py=f.y))*s}}n.tick({type:"tick",alpha:o})};e.nodes=function(t){if(!arguments.length){return v}v=t;return e};e.links=function(t){if(!arguments.length){return p}p=t;return e};e.size=function(t){if(!arguments.length){return i}i=t;return e};e.linkDistance=function(t){if(!arguments.length){return u}u=typeof t==="function"?t:+t;return e};e.distance=e.linkDistance;e.linkStrength=function(t){if(!arguments.length){return l}l=typeof t==="function"?t:+t;return e};e.friction=function(t){if(!arguments.length){return s}s=+t;return e};e.charge=function(t){if(!arguments.length){return c}c=typeof t==="function"?t:+t;return e};e.chargeDistance=function(t){if(!arguments.length){return Math.sqrt(f)}f=t*t;return e};e.gravity=function(t){if(!arguments.length){return d}d=+t;return e};e.theta=function(t){if(!arguments.length){return Math.sqrt(h)}h=t*t;return e};e.alpha=function(t){if(!arguments.length){return o}t=+t;if(o){if(t>0){o=t}else{r.c=null,r.t=NaN,r=null;n.end({type:"end",alpha:o=0})}}else if(t>0){n.start({type:"start",alpha:o=t});r=Rt(e.tick)}return e};e.start=function(){var t,n=v.length,r=p.length,a=i[0],o=i[1],s,f;for(t=0;t<n;++t){(f=v[t]).index=t;f.weight=0}for(t=0;t<r;++t){f=p[t];if(typeof f.source=="number"){f.source=v[f.source]}if(typeof f.target=="number"){f.target=v[f.target]}++f.source.weight;++f.target.weight}for(t=0;t<n;++t){f=v[t];if(isNaN(f.x)){f.x=d("x",a)}if(isNaN(f.y)){f.y=d("y",o)}if(isNaN(f.px)){f.px=f.x}if(isNaN(f.py)){f.py=f.y}}g=[];if(typeof u==="function"){for(t=0;t<r;++t){g[t]=+u.call(this,p[t],t)}}else{for(t=0;t<r;++t){g[t]=u}}m=[];if(typeof l==="function"){for(t=0;t<r;++t){m[t]=+l.call(this,p[t],t)}}else{for(t=0;t<r;++t){m[t]=l}}y=[];if(typeof c==="function"){for(t=0;t<n;++t){y[t]=+c.call(this,v[t],t)}}else{for(t=0;t<n;++t){y[t]=c}}function d(e,i){if(!s){s=new Array(n);for(u=0;u<n;++u){s[u]=[]}for(u=0;u<r;++u){var a=p[u];s[a.source.index].push(a.target);s[a.target.index].push(a.source)}}var o=s[t],u=-1,l=o.length,c;while(++u<l){if(!isNaN(c=o[u][e])){return c}}return Math.random()*i}return e.resume()};e.resume=function(){return e.alpha(.1)};e.stop=function(){return e.alpha(0)};e.drag=function(){if(!a){a=t.behavior.drag().origin(N).on("dragstart.force",uo).on("drag.force",_).on("dragend.force",lo)}if(!arguments.length){return a}this.on("mouseover.force",co).on("mouseout.force",fo).call(a)};function _(n){n.px=t.event.x,n.py=t.event.y;e.resume()}return t.rebind(e,n,"on")};function uo(e){e.fixed|=2}function lo(e){e.fixed&=~6}function co(e){e.fixed|=4;e.px=e.x,e.py=e.y}function fo(e){e.fixed&=~4}function ho(e,t,n){var r=0,i=0;e.charge=0;if(!e.leaf){var a=e.nodes,o=a.length,s=-1,u;while(++s<o){u=a[s];if(u==null){continue}ho(u,t,n);e.charge+=u.charge;r+=u.charge*u.cx;i+=u.charge*u.cy}}if(e.point){if(!e.leaf){e.point.x+=Math.random()-.5;e.point.y+=Math.random()-.5}var l=t*n[e.point.index];e.charge+=e.pointCharge=l;r+=l*e.point.x;i+=l*e.point.y}e.cx=r/e.charge;e.cy=i/e.charge}var vo=20,po=1,go=Infinity;t.layout.hierarchy=function(){var e=xo,t=_o,n=wo;function r(i){var a=[i],o=[],s;i.depth=0;while((s=a.pop())!=null){o.push(s);if((l=t.call(r,s,s.depth))&&(u=l.length)){var u,l,c;while(--u>=0){a.push(c=l[u]);c.parent=s;c.depth=s.depth+1}if(n){s.value=0}s.children=l}else{if(n){s.value=+n.call(r,s,s.depth)||0}delete s.children}}bo(i,function(t){var r,i;if(e&&(r=t.children)){r.sort(e)}if(n&&(i=t.parent)){i.value+=t.value}});return o}r.sort=function(t){if(!arguments.length){return e}e=t;return r};r.children=function(e){if(!arguments.length){return t}t=e;return r};r.value=function(e){if(!arguments.length){return n}n=e;return r};r.revalue=function(e){if(n){yo(e,function(e){if(e.children){e.value=0}});bo(e,function(e){var t;if(!e.children){e.value=+n.call(r,e,e.depth)||0}if(t=e.parent){t.value+=e.value}})}return e};return r};function mo(e,n){t.rebind(e,n,"sort","children","value");e.nodes=e;e.links=To;return e}function yo(e,t){var n=[e];while((e=n.pop())!=null){t(e);if((i=e.children)&&(r=i.length)){var r,i;while(--r>=0){n.push(i[r])}}}}function bo(e,t){var n=[e],r=[];while((e=n.pop())!=null){r.push(e);if((o=e.children)&&(a=o.length)){var i=-1,a,o;while(++i<a){n.push(o[i])}}}while((e=r.pop())!=null){t(e)}}function _o(e){return e.children}function wo(e){return e.value}function xo(e,t){return t.value-e.value}function To(e){return t.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}t.layout.partition=function(){var e=t.layout.hierarchy(),n=[1,1];function r(e,t,n,i){var a=e.children;e.x=t;e.y=e.depth*i;e.dx=n;e.dy=i;if(a&&(s=a.length)){var o=-1,s,u,l;n=e.value?n/e.value:0;while(++o<s){r(u=a[o],t,l=u.value*n,i);t+=l}}}function i(e){var t=e.children,n=0;if(t&&(a=t.length)){var r=-1,a;while(++r<a){n=Math.max(n,i(t[r]))}}return 1+n}function a(t,a){var o=e.call(this,t,a);r(o[0],0,n[0],n[1]/i(o[0]));return o}a.size=function(e){if(!arguments.length){return n}n=e;return a};return mo(a,e)};t.layout.pie=function(){var e=Number,n=Co,r=0,i=Oe,a=0;function o(s){var u=s.length,l=s.map(function(t,n){return+e.call(o,t,n)}),c=+(typeof r==="function"?r.apply(this,arguments):r),f=(typeof i==="function"?i.apply(this,arguments):i)-c,d=Math.min(Math.abs(f)/u,+(typeof a==="function"?a.apply(this,arguments):a)),h=d*(f<0?-1:1),v=t.sum(l),p=v?(f-u*h)/v:0,g=t.range(u),m=[],y;if(n!=null){g.sort(n===Co?function(e,t){return l[t]-l[e]}:function(e,t){return n(s[e],s[t])})}g.forEach(function(e){m[e]={data:s[e],value:y=l[e],startAngle:c,endAngle:c+=y*p+h,padAngle:d}});return m}o.value=function(t){if(!arguments.length){return e}e=t;return o};o.sort=function(e){if(!arguments.length){return n}n=e;return o};o.startAngle=function(e){if(!arguments.length){return r}r=e;return o};o.endAngle=function(e){if(!arguments.length){return i}i=e;return o};o.padAngle=function(e){if(!arguments.length){return a}a=e;return o};return o};var Co={};t.layout.stack=function(){var e=N,n=Mo,r=Ao,i=Eo,a=ko,o=So;function s(u,l){if(!(p=u.length)){return u}var c=u.map(function(t,n){return e.call(s,t,n)});var f=c.map(function(e){return e.map(function(e,t){return[a.call(s,e,t),o.call(s,e,t)]})});var d=n.call(s,f,l);c=t.permute(c,d);f=t.permute(f,d);var h=r.call(s,f,l);var v=c[0].length,p,g,m,y;for(m=0;m<v;++m){i.call(s,c[0][m],y=h[m],f[0][m][1]);for(g=1;g<p;++g){i.call(s,c[g][m],y+=f[g-1][m][1],f[g][m][1])}}return u}s.values=function(t){if(!arguments.length){return e}e=t;return s};s.order=function(e){if(!arguments.length){return n}n=typeof e==="function"?e:Po.get(e)||Mo;return s};s.offset=function(e){if(!arguments.length){return r}r=typeof e==="function"?e:Oo.get(e)||Ao;return s};s.x=function(e){if(!arguments.length){return a}a=e;return s};s.y=function(e){if(!arguments.length){return o}o=e;return s};s.out=function(e){if(!arguments.length){return i}i=e;return s};return s};function ko(e){return e.x}function So(e){return e.y}function Eo(e,t,n){e.y0=t;e.y=n}var Po=t.map({"inside-out":function(e){var n=e.length,r,i,a=e.map(No),o=e.map(Ro),s=t.range(n).sort(function(e,t){return a[e]-a[t]}),u=0,l=0,c=[],f=[];for(r=0;r<n;++r){i=s[r];if(u<l){u+=o[i];c.push(i)}else{l+=o[i];f.push(i)}}return f.reverse().concat(c)},reverse:function(e){return t.range(e.length).reverse()},default:Mo});var Oo=t.map({silhouette:function(e){var t=e.length,n=e[0].length,r=[],i=0,a,o,s,u=[];for(o=0;o<n;++o){for(a=0,s=0;a<t;a++){s+=e[a][o][1]}if(s>i){i=s}r.push(s)}for(o=0;o<n;++o){u[o]=(i-r[o])/2}return u},wiggle:function(e){var t=e.length,n=e[0],r=n.length,i,a,o,s,u,l,c,f,d,h=[];h[0]=f=d=0;for(a=1;a<r;++a){for(i=0,s=0;i<t;++i){s+=e[i][a][1]}for(i=0,u=0,c=n[a][0]-n[a-1][0];i<t;++i){for(o=0,l=(e[i][a][1]-e[i][a-1][1])/(2*c);o<i;++o){l+=(e[o][a][1]-e[o][a-1][1])/c}u+=l*e[i][a][1]}h[a]=f-=s?u/s*c:0;if(f<d){d=f}}for(a=0;a<r;++a){h[a]-=d}return h},expand:function(e){var t=e.length,n=e[0].length,r=1/t,i,a,o,s=[];for(a=0;a<n;++a){for(i=0,o=0;i<t;i++){o+=e[i][a][1]}if(o){for(i=0;i<t;i++){e[i][a][1]/=o}}else{for(i=0;i<t;i++){e[i][a][1]=r}}}for(a=0;a<n;++a){s[a]=0}return s},zero:Ao});function Mo(e){return t.range(e.length)}function Ao(e){var t=-1,n=e[0].length,r=[];while(++t<n){r[t]=0}return r}function No(e){var t=1,n=0,r=e[0][1],i,a=e.length;for(;t<a;++t){if((i=e[t][1])>r){n=t;r=i}}return n}function Ro(e){return e.reduce(Do,0)}function Do(e,t){return e+t[1]}t.layout.histogram=function(){var e=true,n=Number,r=Bo,i=Lo;function a(a,o){var s=[],u=a.map(n,this),l=r.call(this,u,o),c=i.call(this,l,u,o),f,o=-1,d=u.length,h=c.length-1,v=e?1:1/d,p;while(++o<h){f=s[o]=[];f.dx=c[o+1]-(f.x=c[o]);f.y=0}if(h>0){o=-1;while(++o<d){p=u[o];if(p>=l[0]&&p<=l[1]){f=s[t.bisect(c,p,1,h)-1];f.y+=v;f.push(a[o])}}}return s}a.value=function(e){if(!arguments.length){return n}n=e;return a};a.range=function(e){if(!arguments.length){return r}r=Tt(e);return a};a.bins=function(e){if(!arguments.length){return i}i=typeof e==="number"?function(t){return Io(t,e)}:Tt(e);return a};a.frequency=function(t){if(!arguments.length){return e}e=!!t;return a};return a};function Lo(e,t){return Io(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Io(e,t){var n=-1,r=+e[0],i=(e[1]-r)/t,a=[];while(++n<=t){a[n]=i*n+r}return a}function Bo(e){return[t.min(e),t.max(e)]}t.layout.pack=function(){var e=t.layout.hierarchy().sort(jo),n=0,r=[1,1],i;function a(t,a){var o=e.call(this,t,a),s=o[0],u=r[0],l=r[1],c=i==null?Math.sqrt:typeof i==="function"?i:function(){return i};s.x=s.y=0;bo(s,function(e){e.r=+c(e.value)});bo(s,Uo);if(n){var f=n*(i?1:Math.max(2*s.r/u,2*s.r/l))/2;bo(s,function(e){e.r+=f});bo(s,Uo);bo(s,function(e){e.r-=f})}qo(s,u/2,l/2,i?1:1/Math.max(2*s.r/u,2*s.r/l));return o}a.size=function(e){if(!arguments.length){return r}r=e;return a};a.radius=function(e){if(!arguments.length){return i}i=e==null||typeof e==="function"?e:+e;return a};a.padding=function(e){if(!arguments.length){return n}n=+e;return a};return mo(a,e)};function jo(e,t){return e.value-t.value}function Fo(e,t){var n=e._pack_next;e._pack_next=t;t._pack_prev=e;t._pack_next=n;n._pack_prev=t}function Ho(e,t){e._pack_next=t;t._pack_prev=e}function zo(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Uo(e){if(!(t=e.children)||!(d=t.length)){return}var t,n=Infinity,r=-Infinity,i=Infinity,a=-Infinity,o,s,u,l,c,f,d;function h(e){n=Math.min(e.x-e.r,n);r=Math.max(e.x+e.r,r);i=Math.min(e.y-e.r,i);a=Math.max(e.y+e.r,a)}t.forEach(Vo);o=t[0];o.x=-o.r;o.y=0;h(o);if(d>1){s=t[1];s.x=s.r;s.y=0;h(s);if(d>2){u=t[2];Yo(o,s,u);h(u);Fo(o,u);o._pack_prev=u;Fo(u,s);s=o._pack_next;for(l=3;l<d;l++){Yo(o,s,u=t[l]);var v=0,p=1,g=1;for(c=s._pack_next;c!==s;c=c._pack_next,p++){if(zo(c,u)){v=1;break}}if(v==1){for(f=o._pack_prev;f!==c._pack_prev;f=f._pack_prev,g++){if(zo(f,u)){break}}}if(v){if(p<g||p==g&&s.r<o.r){Ho(o,s=c)}else{Ho(o=f,s)}l--}else{Fo(o,u);s=u;h(u)}}}}var m=(n+r)/2,y=(i+a)/2,b=0;for(l=0;l<d;l++){u=t[l];u.x-=m;u.y-=y;b=Math.max(b,u.r+Math.sqrt(u.x*u.x+u.y*u.y))}e.r=b;t.forEach(Wo)}function Vo(e){e._pack_next=e._pack_prev=e}function Wo(e){delete e._pack_next;delete e._pack_prev}function qo(e,t,n,r){var i=e.children;e.x=t+=r*e.x;e.y=n+=r*e.y;e.r*=r;if(i){var a=-1,o=i.length;while(++a<o){qo(i[a],t,n,r)}}}function Yo(e,t,n){var r=e.r+n.r,i=t.x-e.x,a=t.y-e.y;if(r&&(i||a)){var o=t.r+n.r,s=i*i+a*a;o*=o;r*=r;var u=.5+(r-o)/(2*s),l=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=e.x+u*i+l*a;n.y=e.y+u*a-l*i}else{n.x=e.x+r;n.y=e.y}}t.layout.tree=function(){var e=t.layout.hierarchy().sort(null).value(null),n=Ko,r=[1,1],i=null;function a(t,a){var l=e.call(this,t,a),f=l[0],d=o(f);bo(d,s),d.parent.m=-d.z;yo(d,u);if(i){yo(f,c)}else{var h=f,v=f,p=f;yo(f,function(e){if(e.x<h.x){h=e}if(e.x>v.x){v=e}if(e.depth>p.depth){p=e}});var g=n(h,v)/2-h.x,m=r[0]/(v.x+n(v,h)/2+g),y=r[1]/(p.depth||1);yo(f,function(e){e.x=(e.x+g)*m;e.y=e.depth*y})}return l}function o(e){var t={A:null,children:[e]},n=[t],r;while((r=n.pop())!=null){for(var i=r.children,a,o=0,s=i.length;o<s;++o){n.push((i[o]=a={_:i[o],parent:r,children:(a=i[o].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=a)}}return t.children[0]}function s(e){var t=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(t.length){Zo(e);var a=(t[0].z+t[t.length-1].z)/2;if(i){e.z=i.z+n(e._,i._);e.m=e.z-a}else{e.z=a}}else if(i){e.z=i.z+n(e._,i._)}e.parent.A=l(e,i,e.parent.A||r[0])}function u(e){e._.x=e.z+e.parent.m;e.m+=e.parent.m}function l(e,t,r){if(t){var i=e,a=e,o=t,s=i.parent.children[0],u=i.m,l=a.m,c=o.m,f=s.m,d;while(o=Go(o),i=$o(i),o&&i){s=$o(s);a=Go(a);a.a=e;d=o.z+c-i.z-u+n(o._,i._);if(d>0){Xo(Jo(o,e,r),e,d);u+=d;l+=d}c+=o.m;u+=i.m;f+=s.m;l+=a.m}if(o&&!Go(a)){a.t=o;a.m+=c-l}if(i&&!$o(s)){s.t=i;s.m+=u-f;r=e}}return r}function c(e){e.x*=r[0];e.y=e.depth*r[1]}a.separation=function(e){if(!arguments.length){return n}n=e;return a};a.size=function(e){if(!arguments.length){return i?null:r}i=(r=e)==null?c:null;return a};a.nodeSize=function(e){if(!arguments.length){return i?r:null}i=(r=e)==null?null:c;return a};return mo(a,e)};function Ko(e,t){return e.parent==t.parent?1:2}function $o(e){var t=e.children;return t.length?t[0]:e.t}function Go(e){var t=e.children,n;return(n=t.length)?t[n-1]:e.t}function Xo(e,t,n){var r=n/(t.i-e.i);t.c-=r;t.s+=n;e.c+=r;t.z+=n;t.m+=n}function Zo(e){var t=0,n=0,r=e.children,i=r.length,a;while(--i>=0){a=r[i];a.z+=t;a.m+=t;t+=a.s+(n+=a.c)}}function Jo(e,t,n){return e.a.parent===t.parent?e.a:n}t.layout.cluster=function(){var e=t.layout.hierarchy().sort(null).value(null),n=Ko,r=[1,1],i=false;function a(t,a){var o=e.call(this,t,a),s=o[0],u,l=0;bo(s,function(e){var t=e.children;if(t&&t.length){e.x=es(t);e.y=Qo(t)}else{e.x=u?l+=n(e,u):0;e.y=0;u=e}});var c=ts(s),f=ns(s),d=c.x-n(c,f)/2,h=f.x+n(f,c)/2;bo(s,i?function(e){e.x=(e.x-s.x)*r[0];e.y=(s.y-e.y)*r[1]}:function(e){e.x=(e.x-d)/(h-d)*r[0];e.y=(1-(s.y?e.y/s.y:1))*r[1]});return o}a.separation=function(e){if(!arguments.length){return n}n=e;return a};a.size=function(e){if(!arguments.length){return i?null:r}i=(r=e)==null;return a};a.nodeSize=function(e){if(!arguments.length){return i?r:null}i=(r=e)!=null;return a};return mo(a,e)};function Qo(e){return 1+t.max(e,function(e){return e.y})}function es(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function ts(e){var t=e.children;return t&&t.length?ts(t[0]):e}function ns(e){var t=e.children,n;return t&&(n=t.length)?ns(t[n-1]):e}t.layout.treemap=function(){var e=t.layout.hierarchy(),n=Math.round,r=[1,1],i=null,a=rs,o=false,s,u="squarify",l=.5*(1+Math.sqrt(5));function c(e,t){var n=-1,r=e.length,i,a;while(++n<r){a=(i=e[n]).value*(t<0?0:t);i.area=isNaN(a)||a<=0?0:a}}function f(e){var t=e.children;if(t&&t.length){var n=a(e),r=[],i=t.slice(),o,s=Infinity,l,d=u==="slice"?n.dx:u==="dice"?n.dy:u==="slice-dice"?e.depth&1?n.dy:n.dx:Math.min(n.dx,n.dy),p;c(i,n.dx*n.dy/e.value);r.area=0;while((p=i.length)>0){r.push(o=i[p-1]);r.area+=o.area;if(u!=="squarify"||(l=h(r,d))<=s){i.pop();s=l}else{r.area-=r.pop().area;v(r,d,n,false);d=Math.min(n.dx,n.dy);r.length=r.area=0;s=Infinity}}if(r.length){v(r,d,n,true);r.length=r.area=0}t.forEach(f)}}function d(e){var t=e.children;if(t&&t.length){var n=a(e),r=t.slice(),i,o=[];c(r,n.dx*n.dy/e.value);o.area=0;while(i=r.pop()){o.push(i);o.area+=i.area;if(i.z!=null){v(o,i.z?n.dx:n.dy,n,!r.length);o.length=o.area=0}}t.forEach(d)}}function h(e,t){var n=e.area,r,i=0,a=Infinity,o=-1,s=e.length;while(++o<s){if(!(r=e[o].area)){continue}if(r<a){a=r}if(r>i){i=r}}n*=n;t*=t;return n?Math.max(t*i*l/n,n/(t*a*l)):Infinity}function v(e,t,r,i){var a=-1,o=e.length,s=r.x,u=r.y,l=t?n(e.area/t):0,c;if(t==r.dx){if(i||l>r.dy){l=r.dy}while(++a<o){c=e[a];c.x=s;c.y=u;c.dy=l;s+=c.dx=Math.min(r.x+r.dx-s,l?n(c.area/l):0)}c.z=true;c.dx+=r.x+r.dx-s;r.y+=l;r.dy-=l}else{if(i||l>r.dx){l=r.dx}while(++a<o){c=e[a];c.x=s;c.y=u;c.dx=l;u+=c.dy=Math.min(r.y+r.dy-u,l?n(c.area/l):0)}c.z=false;c.dy+=r.y+r.dy-u;r.x+=l;r.dx-=l}}function p(t){var n=s||e(t),i=n[0];i.x=i.y=0;if(i.value){i.dx=r[0],i.dy=r[1]}else{i.dx=i.dy=0}if(s){e.revalue(i)}c([i],i.dx*i.dy/i.value);(s?d:f)(i);if(o){s=n}return n}p.size=function(e){if(!arguments.length){return r}r=e;return p};p.padding=function(e){if(!arguments.length){return i}function t(t){var n=e.call(p,t,t.depth);return n==null?rs(t):is(t,typeof n==="number"?[n,n,n,n]:n)}function n(t){return is(t,e)}var r;a=(i=e)==null?rs:(r=typeof e)==="function"?t:r==="number"?(e=[e,e,e,e],n):n;return p};p.round=function(e){if(!arguments.length){return n!=Number}n=e?Math.round:Number;return p};p.sticky=function(e){if(!arguments.length){return o}o=e;s=null;return p};p.ratio=function(e){if(!arguments.length){return l}l=e;return p};p.mode=function(e){if(!arguments.length){return u}u=e+"";return p};return mo(p,e)};function rs(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function is(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];if(i<0){n+=i/2;i=0}if(a<0){r+=a/2;a=0}return{x:n,y:r,dx:i,dy:a}}t.random={normal:function(e,t){var n=arguments.length;if(n<2){t=1}if(n<1){e=0}return function(){var n,r,i;do{n=Math.random()*2-1;r=Math.random()*2-1;i=n*n+r*r}while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=t.random.normal.apply(t,arguments);return function(){return Math.exp(e())}},bates:function(e){var n=t.random.irwinHall(e);return function(){return n()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++){t+=Math.random()}return t}}};t.scale={};function as(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function os(e){return e.rangeExtent?e.rangeExtent():as(e.range())}function ss(e,t,n,r){var i=n(e[0],e[1]),a=r(t[0],t[1]);return function(e){return a(i(e))}}function us(e,t){var n=0,r=e.length-1,i=e[n],a=e[r],o;if(a<i){o=n,n=r,r=o;o=i,i=a,a=o}e[n]=t.floor(i);e[r]=t.ceil(a);return e}function ls(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:cs}var cs={floor:N,ceil:N};function fs(e,n,r,i){var a=[],o=[],s=0,u=Math.min(e.length,n.length)-1;if(e[u]<e[0]){e=e.slice().reverse();n=n.slice().reverse()}while(++s<=u){a.push(r(e[s-1],e[s]));o.push(i(n[s-1],n[s]))}return function(n){var r=t.bisect(e,n,1,u)-1;return o[r](a[r](n))}}t.scale.linear=function(){return ds([0,1],[0,1],Ca,false)};function ds(e,t,n,r){var i,a;function o(){var o=Math.min(e.length,t.length)>2?fs:ss,u=r?io:ro;i=o(e,t,u,n);a=o(t,e,u,Ca);return s}function s(e){return i(e)}s.invert=function(e){return a(e)};s.domain=function(t){if(!arguments.length){return e}e=t.map(Number);return o()};s.range=function(e){if(!arguments.length){return t}t=e;return o()};s.rangeRound=function(e){return s.range(e).interpolate(qa)};s.clamp=function(e){if(!arguments.length){return r}r=e;return o()};s.interpolate=function(e){if(!arguments.length){return n}n=e;return o()};s.ticks=function(t){return gs(e,t)};s.tickFormat=function(t,n){return ms(e,t,n)};s.nice=function(t){vs(e,t);return o()};s.copy=function(){return ds(e,t,n,r)};return o()}function hs(e,n){return t.rebind(e,n,"range","rangeRound","interpolate","clamp")}function vs(e,t){us(e,ls(ps(e,t)[2]));us(e,ls(ps(e,t)[2]));return e}function ps(e,t){if(t==null){t=10}var n=as(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),a=t/r*i;if(a<=.15){i*=10}else if(a<=.35){i*=5}else if(a<=.75){i*=2}n[0]=Math.ceil(n[0]/i)*i;n[1]=Math.floor(n[1]/i)*i+i*.5;n[2]=i;return n}function gs(e,n){return t.range.apply(t,ps(e,n))}function ms(e,n,r){var i=ps(e,n);if(r){var a=zt.exec(r);a.shift();if(a[8]==="s"){var o=t.formatPrefix(Math.max(y(i[0]),y(i[1])));if(!a[7]){a[7]="."+bs(o.scale(i[2]))}a[8]="f";r=t.format(a.join(""));return function(e){return r(o.scale(e))+o.symbol}}if(!a[7]){a[7]="."+_s(a[8],i)}r=a.join("")}else{r=",."+bs(i[2])+"f"}return t.format(r)}var ys={s:1,g:1,p:1,r:1,e:1};function bs(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function _s(e,t){var n=bs(t[2]);return e in ys?Math.abs(n-bs(Math.max(y(t[0]),y(t[1]))))+ +(e!=="e"):n-(e==="%")*2}t.scale.log=function(){return ws(t.scale.linear().domain([0,1]),10,true,[1,10])};function ws(e,n,r,i){function a(e){return(r?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(n)}function o(e){return r?Math.pow(n,e):-Math.pow(n,-e)}function s(t){return e(a(t))}s.invert=function(t){return o(e.invert(t))};s.domain=function(t){if(!arguments.length){return i}r=t[0]>=0;e.domain((i=t.map(Number)).map(a));return s};s.base=function(t){if(!arguments.length){return n}n=+t;e.domain(i.map(a));return s};s.nice=function(){var t=us(i.map(a),r?Math:Ts);e.domain(t);i=t.map(o);return s};s.ticks=function(){var e=as(i),t=[],s=e[0],u=e[1],l=Math.floor(a(s)),c=Math.ceil(a(u)),f=n%1?2:n;if(isFinite(c-l)){if(r){for(;l<c;l++){for(var d=1;d<f;d++){t.push(o(l)*d)}}t.push(o(l))}else{t.push(o(l));for(;l++<c;){for(var d=f-1;d>0;d--){t.push(o(l)*d)}}}for(l=0;t[l]<s;l++){}for(c=t.length;t[c-1]>u;c--){}t=t.slice(l,c)}return t};s.tickFormat=function(e,r){if(!arguments.length){return xs}if(arguments.length<2){r=xs}else if(typeof r!=="function"){r=t.format(r)}var i=Math.max(1,n*e/s.ticks().length);return function(e){var t=e/o(Math.round(a(e)));if(t*n<n-.5){t*=n}return t<=i?r(e):""}};s.copy=function(){return ws(e.copy(),n,r,i)};return hs(s,e)}var xs=t.format(".0e"),Ts={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};t.scale.pow=function(){return Cs(t.scale.linear(),1,[0,1])};function Cs(e,t,n){var r=ks(t),i=ks(1/t);function a(t){return e(r(t))}a.invert=function(t){return i(e.invert(t))};a.domain=function(t){if(!arguments.length){return n}e.domain((n=t.map(Number)).map(r));return a};a.ticks=function(e){return gs(n,e)};a.tickFormat=function(e,t){return ms(n,e,t)};a.nice=function(e){return a.domain(vs(n,e))};a.exponent=function(o){if(!arguments.length){return t}r=ks(t=o);i=ks(1/t);e.domain(n.map(r));return a};a.copy=function(){return Cs(e.copy(),t,n)};return hs(a,e)}function ks(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}t.scale.sqrt=function(){return t.scale.pow().exponent(.5)};t.scale.ordinal=function(){return Ss([],{t:"range",a:[[]]})};function Ss(e,n){var r,i,a;function o(t){return i[((r.get(t)||(n.t==="range"?r.set(t,e.push(t)):NaN))-1)%i.length]}function s(n,r){return t.range(e.length).map(function(e){return n+r*e})}o.domain=function(t){if(!arguments.length){return e}e=[];r=new w;var i=-1,a=t.length,s;while(++i<a){if(!r.has(s=t[i])){r.set(s,e.push(s))}}return o[n.t].apply(o,n.a)};o.range=function(e){if(!arguments.length){return i}i=e;a=0;n={t:"range",a:arguments};return o};o.rangePoints=function(t,r){if(arguments.length<2){r=0}var u=t[0],l=t[1],c=e.length<2?(u=(u+l)/2,0):(l-u)/(e.length-1+r);i=s(u+c*r/2,c);a=0;n={t:"rangePoints",a:arguments};return o};o.rangeRoundPoints=function(t,r){if(arguments.length<2){r=0}var u=t[0],l=t[1],c=e.length<2?(u=l=Math.round((u+l)/2),0):(l-u)/(e.length-1+r)|0;i=s(u+Math.round(c*r/2+(l-u-(e.length-1+r)*c)/2),c);a=0;n={t:"rangeRoundPoints",a:arguments};return o};o.rangeBands=function(t,r,u){if(arguments.length<2){r=0}if(arguments.length<3){u=r}var l=t[1]<t[0],c=t[l-0],f=t[1-l],d=(f-c)/(e.length-r+2*u);i=s(c+d*u,d);if(l){i.reverse()}a=d*(1-r);n={t:"rangeBands",a:arguments};return o};o.rangeRoundBands=function(t,r,u){if(arguments.length<2){r=0}if(arguments.length<3){u=r}var l=t[1]<t[0],c=t[l-0],f=t[1-l],d=Math.floor((f-c)/(e.length-r+2*u));i=s(c+Math.round((f-c-(e.length-r)*d)/2),d);if(l){i.reverse()}a=Math.round(d*(1-r));n={t:"rangeRoundBands",a:arguments};return o};o.rangeBand=function(){return a};o.rangeExtent=function(){return as(n.a[0])};o.copy=function(){return Ss(e,n)};return o.domain(e)}t.scale.category10=function(){return t.scale.ordinal().range(Es)};t.scale.category20=function(){return t.scale.ordinal().range(Ps)};t.scale.category20b=function(){return t.scale.ordinal().range(Os)};t.scale.category20c=function(){return t.scale.ordinal().range(Ms)};var Es=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(vt);var Ps=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(vt);var Os=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(vt);var Ms=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(vt);t.scale.quantile=function(){return As([],[])};function As(e,n){var r;function i(){var i=0,o=n.length;r=[];while(++i<o){r[i-1]=t.quantile(e,i/o)}return a}function a(e){if(!isNaN(e=+e)){return n[t.bisect(r,e)]}}a.domain=function(t){if(!arguments.length){return e}e=t.map(h).filter(v).sort(d);return i()};a.range=function(e){if(!arguments.length){return n}n=e;return i()};a.quantiles=function(){return r};a.invertExtent=function(t){t=n.indexOf(t);return t<0?[NaN,NaN]:[t>0?r[t-1]:e[0],t<r.length?r[t]:e[e.length-1]]};a.copy=function(){return As(e,n)};return i()}t.scale.quantize=function(){return Ns(0,1,[0,1])};function Ns(e,t,n){var r,i;function a(t){return n[Math.max(0,Math.min(i,Math.floor(r*(t-e))))]}function o(){r=n.length/(t-e);i=n.length-1;return a}a.domain=function(n){if(!arguments.length){return[e,t]}e=+n[0];t=+n[n.length-1];return o()};a.range=function(e){if(!arguments.length){return n}n=e;return o()};a.invertExtent=function(t){t=n.indexOf(t);t=t<0?NaN:t/r+e;return[t,t+1/r]};a.copy=function(){return Ns(e,t,n)};return o()}t.scale.threshold=function(){return Rs([.5],[0,1])};function Rs(e,n){function r(r){if(r<=r){return n[t.bisect(e,r)]}}r.domain=function(t){if(!arguments.length){return e}e=t;return r};r.range=function(e){if(!arguments.length){return n}n=e;return r};r.invertExtent=function(t){t=n.indexOf(t);return[e[t-1],e[t]]};r.copy=function(){return Rs(e,n)};return r}t.scale.identity=function(){return Ds([0,1])};function Ds(e){function t(e){return+e}t.invert=t;t.domain=t.range=function(n){if(!arguments.length){return e}e=n.map(t);return t};t.ticks=function(t){return gs(e,t)};t.tickFormat=function(t,n){return ms(e,t,n)};t.copy=function(){return Ds(e)};return t}t.svg={};function Ls(){return 0}t.svg.arc=function(){var e=Bs,t=js,n=Ls,r=Is,i=Fs,a=Hs,o=zs;function s(){var s=Math.max(0,+e.apply(this,arguments)),l=Math.max(0,+t.apply(this,arguments)),c=i.apply(this,arguments)-Ae,f=a.apply(this,arguments)-Ae,d=Math.abs(f-c),h=c>f?0:1;if(l<s){v=l,l=s,s=v}if(d>=Me){return u(l,h)+(s?u(s,1-h):"")+"Z"}var v,p,g,m,y=0,b=0,_,w,x,T,C,k,S,E,P=[];if(m=(+o.apply(this,arguments)||0)/2){g=r===Is?Math.sqrt(s*s+l*l):+r.apply(this,arguments);if(!h){b*=-1}if(l){b=Be(g/l*Math.sin(m))}if(s){y=Be(g/s*Math.sin(m))}}if(l){_=l*Math.cos(c+b);w=l*Math.sin(c+b);x=l*Math.cos(f-b);T=l*Math.sin(f-b);var O=Math.abs(f-c-2*b)<=Pe?0:1;if(b&&Us(_,w,x,T)===h^O){var M=(c+f)/2;_=l*Math.cos(M);w=l*Math.sin(M);x=T=null}}else{_=w=0}if(s){C=s*Math.cos(f-y);k=s*Math.sin(f-y);S=s*Math.cos(c+y);E=s*Math.sin(c+y);var A=Math.abs(c-f+2*y)<=Pe?0:1;if(y&&Us(C,k,S,E)===1-h^A){var N=(c+f)/2;C=s*Math.cos(N);k=s*Math.sin(N);S=E=null}}else{C=k=0}if(d>Se&&(v=Math.min(Math.abs(l-s)/2,+n.apply(this,arguments)))>.001){p=s<l^h?0:1;var R=v,D=v;if(d<Pe){var L=S==null?[C,k]:x==null?[_,w]:Oi([_,w],[S,E],[x,T],[C,k]),I=_-L[0],B=w-L[1],j=x-L[0],F=T-L[1],H=1/Math.sin(Math.acos((I*j+B*F)/(Math.sqrt(I*I+B*B)*Math.sqrt(j*j+F*F)))/2),z=Math.sqrt(L[0]*L[0]+L[1]*L[1]);D=Math.min(v,(s-z)/(H-1));R=Math.min(v,(l-z)/(H+1))}if(x!=null){var U=Vs(S==null?[C,k]:[S,E],[_,w],l,R,h),V=Vs([x,T],[C,k],l,R,h);if(v===R){P.push("M",U[0],"A",R,",",R," 0 0,",p," ",U[1],"A",l,",",l," 0 ",1-h^Us(U[1][0],U[1][1],V[1][0],V[1][1]),",",h," ",V[1],"A",R,",",R," 0 0,",p," ",V[0])}else{P.push("M",U[0],"A",R,",",R," 0 1,",p," ",V[0])}}else{P.push("M",_,",",w)}if(S!=null){var W=Vs([_,w],[S,E],s,-D,h),q=Vs([C,k],x==null?[_,w]:[x,T],s,-D,h);if(v===D){P.push("L",q[0],"A",D,",",D," 0 0,",p," ",q[1],"A",s,",",s," 0 ",h^Us(q[1][0],q[1][1],W[1][0],W[1][1]),",",1-h," ",W[1],"A",D,",",D," 0 0,",p," ",W[0])}else{P.push("L",q[0],"A",D,",",D," 0 0,",p," ",W[0])}}else{P.push("L",C,",",k)}}else{P.push("M",_,",",w);if(x!=null){P.push("A",l,",",l," 0 ",O,",",h," ",x,",",T)}P.push("L",C,",",k);if(S!=null){P.push("A",s,",",s," 0 ",A,",",1-h," ",S,",",E)}}P.push("Z");return P.join("")}function u(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}s.innerRadius=function(t){if(!arguments.length){return e}e=Tt(t);return s};s.outerRadius=function(e){if(!arguments.length){return t}t=Tt(e);return s};s.cornerRadius=function(e){if(!arguments.length){return n}n=Tt(e);return s};s.padRadius=function(e){if(!arguments.length){return r}r=e==Is?Is:Tt(e);return s};s.startAngle=function(e){if(!arguments.length){return i}i=Tt(e);return s};s.endAngle=function(e){if(!arguments.length){return a}a=Tt(e);return s};s.padAngle=function(e){if(!arguments.length){return o}o=Tt(e);return s};s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Ae;return[Math.cos(r)*n,Math.sin(r)*n]};return s};var Is="auto";function Bs(e){return e.innerRadius}function js(e){return e.outerRadius}function Fs(e){return e.startAngle}function Hs(e){return e.endAngle}function zs(e){return e&&e.padAngle}function Us(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function Vs(e,t,n,r,i){var a=e[0]-t[0],o=e[1]-t[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),u=s*o,l=-s*a,c=e[0]+u,f=e[1]+l,d=t[0]+u,h=t[1]+l,v=(c+d)/2,p=(f+h)/2,g=d-c,m=h-f,y=g*g+m*m,b=n-r,_=c*h-d*f,w=(m<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-_*_)),x=(_*m-g*w)/y,T=(-_*g-m*w)/y,C=(_*m+g*w)/y,k=(-_*g+m*w)/y,S=x-v,E=T-p,P=C-v,O=k-p;if(S*S+E*E>P*P+O*O){x=C,T=k}return[[x-u,T-l],[x*n/b,T*n/b]]}function Ws(e){var t=Ti,n=Ci,r=or,i=Ys,a=i.key,o=.7;function s(a){var s=[],u=[],l=-1,c=a.length,f,d=Tt(t),h=Tt(n);function v(){s.push("M",i(e(u),o))}while(++l<c){if(r.call(this,f=a[l],l)){u.push([+d.call(this,f,l),+h.call(this,f,l)])}else if(u.length){v();u=[]}}if(u.length){v()}return s.length?s.join(""):null}s.x=function(e){if(!arguments.length){return t}t=e;return s};s.y=function(e){if(!arguments.length){return n}n=e;return s};s.defined=function(e){if(!arguments.length){return r}r=e;return s};s.interpolate=function(e){if(!arguments.length){return a}if(typeof e==="function"){a=i=e}else{a=(i=qs.get(e)||Ys).key}return s};s.tension=function(e){if(!arguments.length){return o}o=e;return s};return s}t.svg.line=function(){return Ws(N)};var qs=t.map({linear:Ys,"linear-closed":Ks,step:$s,"step-before":Gs,"step-after":Xs,basis:nu,"basis-open":ru,"basis-closed":iu,bundle:au,cardinal:Qs,"cardinal-open":Zs,"cardinal-closed":Js,monotone:vu});qs.forEach(function(e,t){t.key=e;t.closed=/-closed$/.test(e)});function Ys(e){return e.length>1?e.join("L"):e+"Z"}function Ks(e){return e.join("L")+"Z"}function $s(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n){i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1])}if(n>1){i.push("H",r[0])}return i.join("")}function Gs(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n){i.push("V",(r=e[t])[1],"H",r[0])}return i.join("")}function Xs(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n){i.push("H",(r=e[t])[0],"V",r[1])}return i.join("")}function Zs(e,t){return e.length<4?Ys(e):e[1]+eu(e.slice(1,-1),tu(e,t))}function Js(e,t){return e.length<3?Ks(e):e[0]+eu((e.push(e[0]),e),tu([e[e.length-2]].concat(e,[e[1]]),t))}function Qs(e,t){return e.length<3?Ys(e):e[0]+eu(e,tu(e,t))}function eu(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2){return Ys(e)}var n=e.length!=t.length,r="",i=e[0],a=e[1],o=t[0],s=o,u=1;if(n){r+="Q"+(a[0]-o[0]*2/3)+","+(a[1]-o[1]*2/3)+","+a[0]+","+a[1];i=e[1];u=2}if(t.length>1){s=t[1];a=e[u];u++;r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var l=2;l<t.length;l++,u++){a=e[u];s=t[l];r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}}if(n){var c=e[u];r+="Q"+(a[0]+s[0]*2/3)+","+(a[1]+s[1]*2/3)+","+c[0]+","+c[1]}return r}function tu(e,t){var n=[],r=(1-t)/2,i,a=e[0],o=e[1],s=1,u=e.length;while(++s<u){i=a;a=o;o=e[s];n.push([r*(o[0]-i[0]),r*(o[1]-i[1])])}return n}function nu(e){if(e.length<3){return Ys(e)}var t=1,n=e.length,r=e[0],i=r[0],a=r[1],o=[i,i,i,(r=e[1])[0]],s=[a,a,a,r[1]],u=[i,",",a,"L",ou(lu,o),",",ou(lu,s)];e.push(e[n-1]);while(++t<=n){r=e[t];o.shift();o.push(r[0]);s.shift();s.push(r[1]);cu(u,o,s)}e.pop();u.push("L",r);return u.join("")}function ru(e){if(e.length<4){return Ys(e)}var t=[],n=-1,r=e.length,i,a=[0],o=[0];while(++n<3){i=e[n];a.push(i[0]);o.push(i[1])}t.push(ou(lu,a)+","+ou(lu,o));--n;while(++n<r){i=e[n];a.shift();a.push(i[0]);o.shift();o.push(i[1]);cu(t,a,o)}return t.join("")}function iu(e){var t,n=-1,r=e.length,i=r+4,a,o=[],s=[];while(++n<4){a=e[n%r];o.push(a[0]);s.push(a[1])}t=[ou(lu,o),",",ou(lu,s)];--n;while(++n<i){a=e[n%r];o.shift();o.push(a[0]);s.shift();s.push(a[1]);cu(t,o,s)}return t.join("")}function au(e,t){var n=e.length-1;if(n){var r=e[0][0],i=e[0][1],a=e[n][0]-r,o=e[n][1]-i,s=-1,u,l;while(++s<=n){u=e[s];l=s/n;u[0]=t*u[0]+(1-t)*(r+l*a);u[1]=t*u[1]+(1-t)*(i+l*o)}}return nu(e)}function ou(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}var su=[0,2/3,1/3,0],uu=[0,1/3,2/3,0],lu=[0,1/6,2/3,1/6];function cu(e,t,n){e.push("C",ou(su,t),",",ou(su,n),",",ou(uu,t),",",ou(uu,n),",",ou(lu,t),",",ou(lu,n))}function fu(e,t){return(t[1]-e[1])/(t[0]-e[0])}function du(e){var t=0,n=e.length-1,r=[],i=e[0],a=e[1],o=r[0]=fu(i,a);while(++t<n){r[t]=(o+(o=fu(i=a,a=e[t+1])))/2}r[t]=o;return r}function hu(e){var t=[],n,r,i,a,o=du(e),s=-1,u=e.length-1;while(++s<u){n=fu(e[s],e[s+1]);if(y(n)<Se){o[s]=o[s+1]=0}else{r=o[s]/n;i=o[s+1]/n;a=r*r+i*i;if(a>9){a=n*3/Math.sqrt(a);o[s]=a*r;o[s+1]=a*i}}}s=-1;while(++s<=u){a=(e[Math.min(u,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s]));t.push([a||0,o[s]*a||0])}return t}function vu(e){return e.length<3?Ys(e):e[0]+eu(e,hu(e))}t.svg.line.radial=function(){var e=Ws(pu);e.radius=e.x,delete e.x;e.angle=e.y,delete e.y;return e};function pu(e){var t,n=-1,r=e.length,i,a;while(++n<r){t=e[n];i=t[0];a=t[1]-Ae;t[0]=i*Math.cos(a);t[1]=i*Math.sin(a)}return e}function gu(e){var t=Ti,n=Ti,r=0,i=Ci,a=or,o=Ys,s=o.key,u=o,l="L",c=.7;function f(s){var f=[],d=[],h=[],v=-1,p=s.length,g,m=Tt(t),y=Tt(r),b=t===n?function(){return w}:Tt(n),_=r===i?function(){return x}:Tt(i),w,x;function T(){f.push("M",o(e(h),c),l,u(e(d.reverse()),c),"Z")}while(++v<p){if(a.call(this,g=s[v],v)){d.push([w=+m.call(this,g,v),x=+y.call(this,g,v)]);h.push([+b.call(this,g,v),+_.call(this,g,v)])}else if(d.length){T();d=[];h=[]}}if(d.length){T()}return f.length?f.join(""):null}f.x=function(e){if(!arguments.length){return n}t=n=e;return f};f.x0=function(e){if(!arguments.length){return t}t=e;return f};f.x1=function(e){if(!arguments.length){return n}n=e;return f};f.y=function(e){if(!arguments.length){return i}r=i=e;return f};f.y0=function(e){if(!arguments.length){return r}r=e;return f};f.y1=function(e){if(!arguments.length){return i}i=e;return f};f.defined=function(e){if(!arguments.length){return a}a=e;return f};f.interpolate=function(e){if(!arguments.length){return s}if(typeof e==="function"){s=o=e}else{s=(o=qs.get(e)||Ys).key}u=o.reverse||o;l=o.closed?"M":"L";return f};f.tension=function(e){if(!arguments.length){return c}c=e;return f};return f}Gs.reverse=Xs;Xs.reverse=Gs;t.svg.area=function(){return gu(N)};t.svg.area.radial=function(){var e=gu(pu);e.radius=e.x,delete e.x;e.innerRadius=e.x0,delete e.x0;e.outerRadius=e.x1,delete e.x1;e.angle=e.y,delete e.y;e.startAngle=e.y0,delete e.y0;e.endAngle=e.y1,delete e.y1;return e};t.svg.chord=function(){var e=oi,t=si,n=mu,r=Fs,i=Hs;function a(n,r){var i=o(this,e,n,r),a=o(this,t,n,r);return"M"+i.p0+u(i.r,i.p1,i.a1-i.a0)+(s(i,a)?l(i.r,i.p1,i.r,i.p0):l(i.r,i.p1,a.r,a.p0)+u(a.r,a.p1,a.a1-a.a0)+l(a.r,a.p1,i.r,i.p0))+"Z"}function o(e,t,a,o){var s=t.call(e,a,o),u=n.call(e,s,o),l=r.call(e,s,o)-Ae,c=i.call(e,s,o)-Ae;return{r:u,a0:l,a1:c,p0:[u*Math.cos(l),u*Math.sin(l)],p1:[u*Math.cos(c),u*Math.sin(c)]}}function s(e,t){return e.a0==t.a0&&e.a1==t.a1}function u(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Pe)+",1 "+t}function l(e,t,n,r){return"Q 0,0 "+r}a.radius=function(e){if(!arguments.length){return n}n=Tt(e);return a};a.source=function(t){if(!arguments.length){return e}e=Tt(t);return a};a.target=function(e){if(!arguments.length){return t}t=Tt(e);return a};a.startAngle=function(e){if(!arguments.length){return r}r=Tt(e);return a};a.endAngle=function(e){if(!arguments.length){return i}i=Tt(e);return a};return a};function mu(e){return e.radius}t.svg.diagonal=function(){var e=oi,t=si,n=yu;function r(r,i){var a=e.call(this,r,i),o=t.call(this,r,i),s=(a.y+o.y)/2,u=[a,{x:a.x,y:s},{x:o.x,y:s},o];u=u.map(n);return"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}r.source=function(t){if(!arguments.length){return e}e=Tt(t);return r};r.target=function(e){if(!arguments.length){return t}t=Tt(e);return r};r.projection=function(e){if(!arguments.length){return n}n=e;return r};return r};function yu(e){return[e.x,e.y]}t.svg.diagonal.radial=function(){var e=t.svg.diagonal(),n=yu,r=e.projection;e.projection=function(e){return arguments.length?r(bu(n=e)):n};return e};function bu(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-Ae;return[n*Math.cos(r),n*Math.sin(r)]}}t.svg.symbol=function(){var e=wu,t=_u;function n(n,r){return(Tu.get(e.call(this,n,r))||xu)(t.call(this,n,r))}n.type=function(t){if(!arguments.length){return e}e=Tt(t);return n};n.size=function(e){if(!arguments.length){return t}t=Tt(e);return n};return n};function _u(){return 64}function wu(){return"circle"}function xu(e){var t=Math.sqrt(e/Pe);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}var Tu=t.map({circle:xu,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*ku)),n=t*ku;return"M0,"+-t+"L"+n+",0"+" 0,"+t+" "+-n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Cu),n=t*Cu/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Cu),n=t*Cu/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});t.svg.symbolTypes=Tu.keys();var Cu=Math.sqrt(3),ku=Math.tan(30*Ne);$.transition=function(e){var t=Au||++Mu,n=Lu(e),r=[],i,a,o=Nu||{time:Date.now(),ease:Da,delay:0,duration:250};for(var s=-1,u=this.length;++s<u;){r.push(i=[]);for(var l=this[s],c=-1,f=l.length;++c<f;){if(a=l[c]){Iu(a,c,n,t,o)}i.push(a)}}return Pu(r,n,t)};$.interrupt=function(e){return this.each(e==null?Su:Eu(Lu(e)))};var Su=Eu(Lu());function Eu(e){return function(){var t,n,r;if((t=this[e])&&(r=t[n=t.active])){r.timer.c=null;r.timer.t=NaN;if(--t.count){delete t[n]}else{delete this[e]}t.active+=.5;r.event&&r.event.interrupt.call(this,this.__data__,r.index)}}}function Pu(e,t,n){V(e,Ou);e.namespace=t;e.id=n;return e}var Ou=[],Mu=0,Au,Nu;Ou.call=$.call;Ou.empty=$.empty;Ou.node=$.node;Ou.size=$.size;t.transition=function(e,n){return e&&e.transition?Au?e.transition(n):e:t.selection().transition(e)};t.transition.prototype=Ou;Ou.select=function(e){var t=this.id,n=this.namespace,r=[],i,a,o;e=G(e);for(var s=-1,u=this.length;++s<u;){r.push(i=[]);for(var l=this[s],c=-1,f=l.length;++c<f;){if((o=l[c])&&(a=e.call(o,o.__data__,c,s))){if("__data__"in o){a.__data__=o.__data__}Iu(a,c,n,t,o[n][t]);i.push(a)}else{i.push(null)}}}return Pu(r,n,t)};Ou.selectAll=function(e){var t=this.id,n=this.namespace,r=[],i,a,o,s,u;e=X(e);for(var l=-1,c=this.length;++l<c;){for(var f=this[l],d=-1,h=f.length;++d<h;){if(o=f[d]){u=o[n][t];a=e.call(o,o.__data__,d,l);r.push(i=[]);for(var v=-1,p=a.length;++v<p;){if(s=a[v]){Iu(s,v,n,t,u)}i.push(s)}}}}return Pu(r,n,t)};Ou.filter=function(e){var t=[],n,r,i;if(typeof e!=="function"){e=ce(e)}for(var a=0,o=this.length;a<o;a++){t.push(n=[]);for(var r=this[a],s=0,u=r.length;s<u;s++){if((i=r[s])&&e.call(i,i.__data__,s,a)){n.push(i)}}}return Pu(t,this.namespace,this.id)};Ou.tween=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){return this.node()[r][n].tween.get(e)}return de(this,t==null?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})};function Ru(e,t,n,r){var i=e.id,a=e.namespace;return de(e,typeof n==="function"?function(e,o,s){e[a][i].tween.set(t,r(n.call(e,e.__data__,o,s)))}:(n=r(n),function(e){e[a][i].tween.set(t,n)}))}Ou.attr=function(e,n){if(arguments.length<2){for(n in e){this.attr(n,e[n])}return this}var r=e=="transform"?no:Ca,i=t.ns.qualify(e);function a(){this.removeAttribute(i)}function o(){this.removeAttributeNS(i.space,i.local)}function s(e){return e==null?a:(e+="",function(){var t=this.getAttribute(i),n;return t!==e&&(n=r(t,e),function(e){this.setAttribute(i,n(e))})})}function u(e){return e==null?o:(e+="",function(){var t=this.getAttributeNS(i.space,i.local),n;return t!==e&&(n=r(t,e),function(e){this.setAttributeNS(i.space,i.local,n(e))})})}return Ru(this,"attr."+e,n,i.local?u:s)};Ou.attrTween=function(e,n){var r=t.ns.qualify(e);function i(e,t){var i=n.call(this,e,t,this.getAttribute(r));return i&&function(e){this.setAttribute(r,i(e))}}function a(e,t){var i=n.call(this,e,t,this.getAttributeNS(r.space,r.local));return i&&function(e){this.setAttributeNS(r.space,r.local,i(e))}}return this.tween("attr."+e,r.local?a:i)};Ou.style=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!=="string"){if(r<2){t=""}for(n in e){this.style(n,e[n],t)}return this}n=""}function i(){this.style.removeProperty(e)}function a(t){return t==null?i:(t+="",function(){var r=o(this).getComputedStyle(this,null).getPropertyValue(e),i;return r!==t&&(i=Ca(r,t),function(t){this.style.setProperty(e,i(t),n)})})}return Ru(this,"style."+e,t,a)};Ou.styleTween=function(e,t,n){if(arguments.length<3){n=""}function r(r,i){var a=t.call(this,r,i,o(this).getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),n)}}return this.tween("style."+e,r)};Ou.text=function(e){return Ru(this,"text",e,Du)};function Du(e){if(e==null){e=""}return function(){this.textContent=e}}Ou.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;if(this[e].count<2&&(t=this.parentNode)){t.removeChild(this)}})};Ou.ease=function(e){var n=this.id,r=this.namespace;if(arguments.length<1){return this.node()[r][n].ease}if(typeof e!=="function"){e=t.ease.apply(t,arguments)}return de(this,function(t){t[r][n].ease=e})};Ou.delay=function(e){var t=this.id,n=this.namespace;if(arguments.length<1){return this.node()[n][t].delay}return de(this,typeof e==="function"?function(r,i,a){r[n][t].delay=+e.call(r,r.__data__,i,a)}:(e=+e,function(r){r[n][t].delay=e}))};Ou.duration=function(e){var t=this.id,n=this.namespace;if(arguments.length<1){return this.node()[n][t].duration}return de(this,typeof e==="function"?function(r,i,a){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,a))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))};Ou.each=function(e,n){var r=this.id,i=this.namespace;if(arguments.length<2){var a=Nu,o=Au;try{Au=r;de(this,function(t,n,a){Nu=t[i][r];e.call(t,t.__data__,n,a)})}finally{Nu=a;Au=o}}else{de(this,function(a){var o=a[i][r];(o.event||(o.event=t.dispatch("start","end","interrupt"))).on(e,n)})}return this};Ou.transition=function(){var e=this.id,t=++Mu,n=this.namespace,r=[],i,a,o,s;for(var u=0,l=this.length;u<l;u++){r.push(i=[]);for(var a=this[u],c=0,f=a.length;c<f;c++){if(o=a[c]){s=o[n][e];Iu(o,c,n,t,{time:s.time,ease:s.ease,delay:s.delay+s.duration,duration:s.duration})}i.push(o)}}return Pu(r,n,t)};function Lu(e){return e==null?"__transition__":"__transition_"+e+"__"}function Iu(e,t,n,r,i){var a=e[n]||(e[n]={active:0,count:0}),o=a[r],s,u,l,c,f;function d(e){var t=o.delay;u.t=t+s;if(t<=e){return h(e-t)}u.c=h}function h(n){var i=a.active,d=a[i];if(d){d.timer.c=null;d.timer.t=NaN;--a.count;delete a[i];d.event&&d.event.interrupt.call(e,e.__data__,d.index)}for(var h in a){if(+h<r){var p=a[h];p.timer.c=null;p.timer.t=NaN;--a.count;delete a[h]}}u.c=v;Rt(function(){if(u.c&&v(n||1)){u.c=null;u.t=NaN}return 1},0,s);a.active=r;o.event&&o.event.start.call(e,e.__data__,t);f=[];o.tween.forEach(function(n,r){if(r=r.call(e,e.__data__,t)){f.push(r)}});c=o.ease;l=o.duration}function v(i){var s=i/l,u=c(s),d=f.length;while(d>0){f[--d].call(e,u)}if(s>=1){o.event&&o.event.end.call(e,e.__data__,t);if(--a.count){delete a[r]}else{delete e[n]}return 1}}if(!o){s=i.time;u=Rt(d,0,s);o=a[r]={tween:new w,time:s,timer:u,delay:i.delay,duration:i.duration,ease:i.ease,index:t};i=null;++a.count}}t.svg.axis=function(){var e=t.scale.linear(),n=Bu,i=6,a=6,o=3,s=[10],u=null,l;function c(r){r.each(function(){var r=t.select(this);var c=this.__chart__||e,f=this.__chart__=e.copy();var d=u==null?f.ticks?f.ticks.apply(f,s):f.domain():u,h=l==null?f.tickFormat?f.tickFormat.apply(f,s):N:l,v=r.selectAll(".tick").data(d,f),p=v.enter().insert("g",".domain").attr("class","tick").style("opacity",Se),g=t.transition(v.exit()).style("opacity",Se).remove(),m=t.transition(v.order()).style("opacity",1),y=Math.max(i,0)+o,b;var _=os(f),w=r.selectAll(".domain").data([0]),x=(w.enter().append("path").attr("class","domain"),t.transition(w));p.append("line");p.append("text");var T=p.select("line"),C=m.select("line"),k=v.select("text").text(h),S=p.select("text"),E=m.select("text"),P=n==="top"||n==="left"?-1:1,O,M,A,R;if(n==="bottom"||n==="top"){b=Fu,O="x",A="y",M="x2",R="y2";k.attr("dy",P<0?"0em":".71em").style("text-anchor","middle");x.attr("d","M"+_[0]+","+P*a+"V0H"+_[1]+"V"+P*a)}else{b=Hu,O="y",A="x",M="y2",R="x2";k.attr("dy",".32em").style("text-anchor",P<0?"end":"start");x.attr("d","M"+P*a+","+_[0]+"H0V"+_[1]+"H"+P*a)}T.attr(R,P*i);S.attr(A,P*y);C.attr(M,0).attr(R,P*i);E.attr(O,0).attr(A,P*y);if(f.rangeBand){var D=f,L=D.rangeBand()/2;c=f=function(e){return D(e)+L}}else if(c.rangeBand){c=f}else{g.call(b,f,c)}p.call(b,c,f);m.call(b,f,f)})}c.scale=function(t){if(!arguments.length){return e}e=t;return c};c.orient=function(e){if(!arguments.length){return n}n=e in ju?e+"":Bu;return c};c.ticks=function(){if(!arguments.length){return s}s=r(arguments);return c};c.tickValues=function(e){if(!arguments.length){return u}u=e;return c};c.tickFormat=function(e){if(!arguments.length){return l}l=e;return c};c.tickSize=function(e){var t=arguments.length;if(!t){return i}i=+e;a=+arguments[t-1];return c};c.innerTickSize=function(e){if(!arguments.length){return i}i=+e;return c};c.outerTickSize=function(e){if(!arguments.length){return a}a=+e;return c};c.tickPadding=function(e){if(!arguments.length){return o}o=+e;return c};c.tickSubdivide=function(){return arguments.length&&c};return c};var Bu="bottom",ju={top:1,right:1,bottom:1,left:1};function Fu(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function Hu(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}t.svg.brush=function(){var e=z(d,"brushstart","brush","brushend"),n=null,r=null,i=[0,0],a=[0,0],s,u,l=true,c=true,f=Uu[0];function d(e){e.each(function(){var e=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g);var i=e.selectAll(".background").data([0]);i.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=e.selectAll(".resize").data(f,N);a.exit().remove();a.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return zu[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");a.style("display",d.empty()?"none":null);var o=t.transition(e),s=t.transition(i),u;if(n){u=os(n);s.attr("x",u[0]).attr("width",u[1]-u[0]);v(o)}if(r){u=os(r);s.attr("y",u[0]).attr("height",u[1]-u[0]);p(o)}h(o)})}d.event=function(n){n.each(function(){var n=e.of(this,arguments),r={x:i,y:a,i:s,j:u},o=this.__chart__||r;this.__chart__=r;if(Au){t.select(this).transition().each("start.brush",function(){s=o.i;u=o.j;i=o.x;a=o.y;n({type:"brushstart"})}).tween("brush:brush",function(){var e=ka(i,r.x),t=ka(a,r.y);s=u=null;return function(o){i=r.x=e(o);a=r.y=t(o);n({type:"brush",mode:"resize"})}}).each("end.brush",function(){s=r.i;u=r.j;n({type:"brush",mode:"resize"});n({type:"brushend"})})}else{n({type:"brushstart"});n({type:"brush",mode:"resize"});n({type:"brushend"})}})};function h(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+i[+/e$/.test(e)]+","+a[+/^s/.test(e)]+")"})}function v(e){e.select(".extent").attr("x",i[0]);e.selectAll(".extent,.n>rect,.s>rect").attr("width",i[1]-i[0])}function p(e){e.select(".extent").attr("y",a[0]);e.selectAll(".extent,.e>rect,.w>rect").attr("height",a[1]-a[0])}function g(){var f=this,g=t.select(t.event.target),m=e.of(f,arguments),y=t.select(f),b=g.datum(),_=!/^(n|s)$/.test(b)&&n,w=!/^(e|w)$/.test(b)&&r,x=g.classed("extent"),T=xe(f),C,k=t.mouse(f),S;var E=t.select(o(f)).on("keydown.brush",M).on("keyup.brush",A);if(t.event.changedTouches){E.on("touchmove.brush",N).on("touchend.brush",D)}else{E.on("mousemove.brush",N).on("mouseup.brush",D)}y.interrupt().selectAll("*").interrupt();if(x){k[0]=i[0]-k[0];k[1]=a[0]-k[1]}else if(b){var P=+/w$/.test(b),O=+/^n/.test(b);S=[i[1-P]-k[0],a[1-O]-k[1]];k[0]=i[P];k[1]=a[O]}else if(t.event.altKey){C=k.slice()}y.style("pointer-events","none").selectAll(".resize").style("display",null);t.select("body").style("cursor",g.style("cursor"));m({type:"brushstart"});N();function M(){if(t.event.keyCode==32){if(!x){C=null;k[0]-=i[1];k[1]-=a[1];x=2}F()}}function A(){if(t.event.keyCode==32&&x==2){k[0]+=i[1];k[1]+=a[1];x=0;F()}}function N(){var e=t.mouse(f),o=false;if(S){e[0]+=S[0];e[1]+=S[1]}if(!x){if(t.event.altKey){if(!C){C=[(i[0]+i[1])/2,(a[0]+a[1])/2]}k[0]=i[+(e[0]<C[0])];k[1]=a[+(e[1]<C[1])]}else{C=null}}if(_&&R(e,n,0)){v(y);o=true}if(w&&R(e,r,1)){p(y);o=true}if(o){h(y);m({type:"brush",mode:x?"move":"resize"})}}function R(e,t,n){var r=os(t),o=r[0],f=r[1],d=k[n],h=n?a:i,v=h[1]-h[0],p,g;if(x){o-=d;f-=v+d}p=(n?c:l)?Math.max(o,Math.min(f,e[n])):e[n];if(x){g=(p+=d)+v}else{if(C){d=Math.max(o,Math.min(f,2*C[n]-p))}if(d<p){g=p;p=d}else{g=d}}if(h[0]!=p||h[1]!=g){if(n){u=null}else{s=null}h[0]=p;h[1]=g;return true}}function D(){N();y.style("pointer-events","all").selectAll(".resize").style("display",d.empty()?"none":null);t.select("body").style("cursor",null);E.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);T();m({type:"brushend"})}}d.x=function(e){if(!arguments.length){return n}n=e;f=Uu[!n<<1|!r];return d};d.y=function(e){if(!arguments.length){return r}r=e;f=Uu[!n<<1|!r];return d};d.clamp=function(e){if(!arguments.length){return n&&r?[l,c]:n?l:r?c:null}if(n&&r){l=!!e[0],c=!!e[1]}else if(n){l=!!e}else if(r){c=!!e}return d};d.extent=function(e){var t,o,l,c,f;if(!arguments.length){if(n){if(s){t=s[0],o=s[1]}else{t=i[0],o=i[1];if(n.invert){t=n.invert(t),o=n.invert(o)}if(o<t){f=t,t=o,o=f}}}if(r){if(u){l=u[0],c=u[1]}else{l=a[0],c=a[1];if(r.invert){l=r.invert(l),c=r.invert(c)}if(c<l){f=l,l=c,c=f}}}return n&&r?[[t,l],[o,c]]:n?[t,o]:r&&[l,c]}if(n){t=e[0],o=e[1];if(r){t=t[0],o=o[0]}s=[t,o];if(n.invert){t=n(t),o=n(o)}if(o<t){f=t,t=o,o=f}if(t!=i[0]||o!=i[1]){i=[t,o]}}if(r){l=e[0],c=e[1];if(n){l=l[1],c=c[1]}u=[l,c];if(r.invert){l=r(l),c=r(c)}if(c<l){f=l,l=c,c=f}if(l!=a[0]||c!=a[1]){a=[l,c]}}return d};d.clear=function(){if(!d.empty()){i=[0,0],a=[0,0];s=u=null}return d};d.empty=function(){return!!n&&i[0]==i[1]||!!r&&a[0]==a[1]};return t.rebind(d,e,"on")};var zu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var Uu=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var Vu=Wt.format=wn.timeFormat;var Wu=Vu.utc;var qu=Wu("%Y-%m-%dT%H:%M:%S.%LZ");Vu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Yu:qu;function Yu(e){return e.toISOString()}Yu.parse=function(e){var t=new Date(e);return isNaN(t)?null:t};Yu.toString=qu.toString;Wt.second=$t(function(e){return new qt(Math.floor(e/1e3)*1e3)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*1e3)},function(e){return e.getSeconds()});Wt.seconds=Wt.second.range;Wt.seconds.utc=Wt.second.utc.range;Wt.minute=$t(function(e){return new qt(Math.floor(e/6e4)*6e4)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*6e4)},function(e){return e.getMinutes()});Wt.minutes=Wt.minute.range;Wt.minutes.utc=Wt.minute.utc.range;Wt.hour=$t(function(e){var t=e.getTimezoneOffset()/60;return new qt((Math.floor(e/36e5-t)+t)*36e5)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*36e5)},function(e){return e.getHours()});Wt.hours=Wt.hour.range;Wt.hours.utc=Wt.hour.utc.range;Wt.month=$t(function(e){e=Wt.day(e);e.setDate(1);return e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()});Wt.months=Wt.month.range;Wt.months.utc=Wt.month.utc.range;function Ku(e,n,r){function i(t){return e(t)}i.invert=function(t){return $u(e.invert(t))};i.domain=function(t){if(!arguments.length){return e.domain().map($u)}e.domain(t);return i};function a(e,r){var i=e[1]-e[0],a=i/r,o=t.bisect(Gu,a);return o==Gu.length?[n.year,ps(e.map(function(e){return e/31536e6}),r)[2]]:!o?[Ju,ps(e,r)[2]]:n[a/Gu[o-1]<Gu[o]/a?o-1:o]}i.nice=function(e,t){var n=i.domain(),r=as(n),o=e==null?a(r,10):typeof e==="number"&&a(r,e);if(o){e=o[0],t=o[1]}function s(n){return!isNaN(n)&&!e.range(n,$u(+n+1),t).length}return i.domain(us(n,t>1?{floor:function(t){while(s(t=e.floor(t))){t=$u(t-1)}return t},ceil:function(t){while(s(t=e.ceil(t))){t=$u(+t+1)}return t}}:e))};i.ticks=function(e,t){var n=as(i.domain()),r=e==null?a(n,10):typeof e==="number"?a(n,e):!e.range&&[{range:e},t];if(r){e=r[0],t=r[1]}return e.range(n[0],$u(+n[1]+1),t<1?1:t)};i.tickFormat=function(){return r};i.copy=function(){return Ku(e.copy(),n,r)};return hs(i,e)}function $u(e){return new Date(e)}var Gu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6];var Xu=[[Wt.second,1],[Wt.second,5],[Wt.second,15],[Wt.second,30],[Wt.minute,1],[Wt.minute,5],[Wt.minute,15],[Wt.minute,30],[Wt.hour,1],[Wt.hour,3],[Wt.hour,6],[Wt.hour,12],[Wt.day,1],[Wt.day,2],[Wt.week,1],[Wt.month,1],[Wt.month,3],[Wt.year,1]];var Zu=Vu.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&e.getDate()!=1}],["%b %d",function(e){return e.getDate()!=1}],["%B",function(e){return e.getMonth()}],["%Y",or]]);var Ju={range:function(e,n,r){return t.range(Math.ceil(e/r)*r,+n,r).map($u)},floor:N,ceil:N};Xu.year=Wt.year;Wt.scale=function(){return Ku(t.scale.linear(),Xu,Zu)};var Qu=Xu.map(function(e){return[e[0].utc,e[1]]});var el=Wu.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],["%b %d",function(e){return e.getUTCDate()!=1}],["%B",function(e){return e.getUTCMonth()}],["%Y",or]]);Qu.year=Wt.year.utc;Wt.scale.utc=function(){return Ku(t.scale.linear(),Qu,el)};t.text=Ct(function(e){return e.responseText});t.json=function(e,t){return kt(e,"application/json",tl,t)};function tl(e){return JSON.parse(e.responseText)}t.html=function(e,t){return kt(e,"text/html",nl,t)};function nl(e){var t=i.createRange();t.selectNode(i.body);return t.createContextualFragment(e.responseText)}t.xml=Ct(function(e){return e.responseXML});if(typeof undefined==="function"&&undefined.amd){this.d3=t,undefined(t)}else if("object"==="object"&&e.exports){e.exports=t}else{this.d3=t}}()});var hf=n(function(t,n){(function e(n,r){{t.exports=r(df)}})(e,function(e){return function(e){var t={};function n(r){if(t[r]){return t[r].exports}var i=t[r]={exports:{},id:r,loaded:false};e[r].call(i.exports,i,i.exports,n);i.loaded=true;return i.exports}n.m=e;n.c=t;n.p="";return n(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.version=t.api=t.__api__=t.Chart=t.Plot=t.GPL=undefined;var r=n(1);var i=n(3);var a=n(10);var o=n(16);var s=n(20);var u=n(38);var l=n(18);var c=n(32);var f=n(25);var d=n(26);var h=n(7);var v=n(40);var p=n(41);var g=n(42);var m=n(4);var y=n(45);var b=n(51);var _=n(55);var w=n(56);var x=n(59);var T=n(60);var C=n(61);var k=n(63);var S=n(64);var E=n(65);var P=n(66);var O=n(67);var M=n(68);var A=n(69);var N=n(70);var R=n(71);var D=n(39);var L=n(72);var I=n(73);var B=n(75);var j=n(76);var F=n(77);var H=n(78);var z=n(9);var U=n(8);var V=n(79);var W=n(2);var q=Y(W);n(82);function Y(e){return e&&e.__esModule?e:{default:e}}function K(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}var $={};var G={};var X={UnitDomainPeriodGenerator:l.UnitDomainPeriodGenerator};var Z={errorCodes:U.errorCodes,unitsRegistry:f.unitsRegistry,scalesRegistry:d.scalesRegistry,grammarRegistry:h.GrammarRegistry,tickFormat:c.FormatterRegistry,isChartElement:i.utils.isChartElement,d3:q.default,utils:i.utils,svgUtils:a.utilsDraw,tickPeriod:l.UnitDomainPeriodGenerator,colorBrewers:{add:function e(t,n){if(!(t in $)){$[t]=n}},get:function e(t){return $[t]}},d3_animationInterceptor:z.d3_animationInterceptor,pluginsSDK:V.PluginsSDK,plugins:{add:function e(t,n){if(!(t in G)){G[t]=n}else{throw new Error("Plugin is already registered.")}},get:function e(t){return G[t]||function(e){throw new Error(e+" plugin is not defined")}}},globalSettings:{animationSpeed:750,renderingTimeout:1e4,asyncRendering:false,syncRenderingInterval:50,syncPointerEvents:false,handleRenderingErrors:true,experimentalShouldAnimate:function e(t){var n=function e(t,n){var r=document.createElementNS("http://www.w3.org/2000/svg",t);Object.keys(n).forEach(function(e){return r.setAttribute(e,String(n[e]))});return r};var r=document.createElement("div");r.style.position="absolute";r.style.visibility="hidden";document.body.appendChild(r);var i=n("svg",{width:100,height:100});r.appendChild(i);var a=performance.now();var o,s,u;for(o=0,u;o<10;o++){for(s=0;s<10;s++){u=n("circle",{fill:"black",r:5,cx:o*10,cy:s*10});i.appendChild(u)}}var l=performance.now()-a;document.body.removeChild(r);return t.sources["/"].data.length*l<500},defaultNiceColor:true,defaultColorBrewer:["#fde725","#fbe723","#f8e621","#f6e620","#f4e61e","#f1e51d","#efe51c","#ece51b","#eae51a","#e7e419","#e5e419","#e2e418","#dfe318","#dde318","#dae319","#d8e219","#d5e21a","#d2e21b","#d0e11c","#cde11d","#cae11f","#c8e020","#c5e021","#c2df23","#c0df25","#bddf26","#bade28","#b8de29","#b5de2b","#b2dd2d","#b0dd2f","#addc30","#aadc32","#a8db34","#a5db36","#a2da37","#a0da39","#9dd93b","#9bd93c","#98d83e","#95d840","#93d741","#90d743","#8ed645","#8bd646","#89d548","#86d549","#84d44b","#81d34d","#7fd34e","#7cd250","#7ad151","#77d153","#75d054","#73d056","#70cf57","#6ece58","#6ccd5a","#69cd5b","#67cc5c","#65cb5e","#63cb5f","#60ca60","#5ec962","#5cc863","#5ac864","#58c765","#56c667","#54c568","#52c569","#50c46a","#4ec36b","#4cc26c","#4ac16d","#48c16e","#46c06f","#44bf70","#42be71","#40bd72","#3fbc73","#3dbc74","#3bbb75","#3aba76","#38b977","#37b878","#35b779","#34b679","#32b67a","#31b57b","#2fb47c","#2eb37c","#2db27d","#2cb17e","#2ab07f","#29af7f","#28ae80","#27ad81","#26ad81","#25ac82","#25ab82","#24aa83","#23a983","#22a884","#22a785","#21a685","#21a585","#20a486","#20a386","#1fa287","#1fa187","#1fa188","#1fa088","#1f9f88","#1f9e89","#1e9d89","#1e9c89","#1e9b8a","#1f9a8a","#1f998a","#1f988b","#1f978b","#1f968b","#1f958b","#1f948c","#20938c","#20928c","#20928c","#21918c","#21908d","#218f8d","#218e8d","#228d8d","#228c8d","#228b8d","#238a8d","#23898e","#23888e","#24878e","#24868e","#25858e","#25848e","#25838e","#26828e","#26828e","#26818e","#27808e","#277f8e","#277e8e","#287d8e","#287c8e","#297b8e","#297a8e","#29798e","#2a788e","#2a778e","#2a768e","#2b758e","#2b748e","#2c738e","#2c728e","#2c718e","#2d718e","#2d708e","#2e6f8e","#2e6e8e","#2e6d8e","#2f6c8e","#2f6b8e","#306a8e","#30698e","#31688e","#31678e","#31668e","#32658e","#32648e","#33638d","#33628d","#34618d","#34608d","#355f8d","#355e8d","#365d8d","#365c8d","#375b8d","#375a8c","#38598c","#38588c","#39568c","#39558c","#3a548c","#3a538b","#3b528b","#3b518b","#3c508b","#3c4f8a","#3d4e8a","#3d4d8a","#3e4c8a","#3e4a89","#3e4989","#3f4889","#3f4788","#404688","#404588","#414487","#414287","#424186","#424086","#423f85","#433e85","#433d84","#443b84","#443a83","#443983","#453882","#453781","#453581","#463480","#46337f","#46327e","#46307e","#472f7d","#472e7c","#472d7b","#472c7a","#472a7a","#482979","#482878","#482677","#482576","#482475","#482374","#482173","#482071","#481f70","#481d6f","#481c6e","#481b6d","#481a6c","#48186a","#481769","#481668","#481467","#471365","#471164","#471063","#470e61","#470d60","#460b5e","#460a5d","#46085c","#46075a","#450559","#450457","#440256","#440154"],defaultClassBrewer:i.utils.range(20).map(function(e){return"color20-"+(1+e)}),log:function e(t,n){n=n||"INFO";if(!Array.isArray(t)){t=[t]}console[n.toLowerCase()].apply(console,t)},facetLabelDelimiter:" ‚Üí ",excludeNull:true,minChartWidth:300,minChartHeight:200,minFacetWidth:150,minFacetHeight:100,specEngine:[{name:"COMPACT",width:600,height:400},{name:"AUTO",width:Number.MAX_VALUE,height:Number.MAX_VALUE}],fitModel:"normal",layoutEngine:"EXTRACT",autoRatio:true,defaultSourceMap:["https://raw.githubusercontent.com","TargetProcess/tauCharts/master/src/addons","world-countries.json"].join("/"),getAxisTickLabelSize:i.utils.memoize(r.utilsDom.getAxisTickLabelSize,function(e){return String(e).length}),getScrollbarSize:r.utilsDom.getScrollbarSize,avoidScrollAtRatio:1.5,xAxisTickLabelLimit:150,yAxisTickLabelLimit:150,xTickWordWrapLinesLimit:2,yTickWordWrapLinesLimit:2,xTickWidth:6+3,yTickWidth:6+3,distToXAxisLabel:10,distToYAxisLabel:10,xAxisPadding:20,yAxisPadding:20,xFontLabelDescenderLineHeight:4,xFontLabelHeight:10,yFontLabelHeight:10,xDensityPadding:2,yDensityPadding:2,"xDensityPadding:measure":8,"yDensityPadding:measure":8,utcTime:false,defaultFormats:{measure:"x-num-auto","measure:time":"x-time-auto"}}};s.Plot.__api__=Z;s.Plot.globalSettings=Z.globalSettings;[["COORDS.RECT",v.Cartesian],["COORDS.MAP",g.GeoMap],["COORDS.PARALLEL",p.Parallel],["ELEMENT.GENERIC.CARTESIAN",m.GenericCartesian],["ELEMENT.POINT",y.Point,"ELEMENT.GENERIC.CARTESIAN"],["ELEMENT.LINE",w.Line,"ELEMENT.GENERIC.CARTESIAN"],["ELEMENT.PATH",_.Path,"ELEMENT.GENERIC.CARTESIAN"],["ELEMENT.AREA",b.Area,"ELEMENT.GENERIC.CARTESIAN"],["ELEMENT.INTERVAL",x.Interval,"ELEMENT.GENERIC.CARTESIAN"],["ELEMENT.INTERVAL.STACKED",x.Interval,"ELEMENT.GENERIC.CARTESIAN"],["PARALLEL/ELEMENT.LINE",T.ParallelLine]].reduce(function(e,t){return e.reg.apply(e,K(t))},Z.unitsRegistry);[["identity",C.IdentityScale,function(e,t){return i.utils.defaults(e,{references:t.references,refCounter:t.refCounter})}],["color",k.ColorScale,function(e,t){return i.utils.defaults(e,{nice:t.defaultNiceColor,brewer:e.dimType==="measure"?t.defaultColorBrewer:t.defaultClassBrewer})}],["fill",R.FillScale],["size",S.SizeScale],["ordinal",E.OrdinalScale],["period",P.PeriodScale,function(e,t){return i.utils.defaults(e,{utcTime:t.utcTime})}],["time",O.TimeScale,function(e,t){return i.utils.defaults(e,{utcTime:t.utcTime})}],["linear",M.LinearScale],["logarithmic",A.LogarithmicScale],["value",N.ValueScale]].reduce(function(e,t){return e.reg.apply(e,K(t))},Z.scalesRegistry);var J=[function(e){return!e.data?["[data] must be specified"]:[]}];Z.chartTypesRegistry=D.chartTypesRegistry.add("scatterplot",B.ChartScatterplot,J).add("line",j.ChartLine,J).add("area",F.ChartArea,J).add("stacked-area",function(e){return F.ChartArea(i.utils.defaults(e,{stack:true}))},J).add("bar",function(e){return I.ChartInterval(i.utils.defaults(e,{flip:false}))},J).add("horizontalBar",function(e){return I.ChartInterval(i.utils.defaults({flip:true},e))},J).add("horizontal-bar",function(e){return I.ChartInterval(i.utils.defaults({flip:true},e))},J).add("stacked-bar",function(e){return I.ChartInterval(i.utils.defaults({flip:false,stack:true},e))},J).add("horizontal-stacked-bar",function(e){return I.ChartInterval(i.utils.defaults({flip:true,stack:true},e))},J).add("map",L.ChartMap,J.concat([function(e){var t=e.fill&&e.code;if(e.fill&&!t){return"[code] must be specified when using [fill]"}},function(e){var t=e.latitude&&e.longitude;if((e.latitude||e.longitude)&&!t){return"[latitude] and [longitude] both must be specified"}}])).add("parallel",H.ChartParallel,J.concat([function(e){var t=e.columns&&e.columns.length>1;if(!t){return"[columns] property must contain at least 2 dimensions"}}]));var Q="1.2.2";t.GPL=o.GPL;t.Plot=s.Plot;t.Chart=u.Chart;t.__api__=X;t.api=Z;t.version=Q;t.default={GPL:o.GPL,Plot:s.Plot,Chart:u.Chart,__api__:X,api:Z,version:Q}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.utilsDom=undefined;var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=n(2);var a=s(i);var o=n(3);function s(e){return e&&e.__esModule?e:{default:e}}var u=document.createElement("div");var l=new WeakMap;var c={appendTo:function e(t,n){var r;if(t instanceof Node){r=t}else{u.insertAdjacentHTML("afterbegin",t);r=u.childNodes[0]}n.appendChild(r);return r},getScrollbarSize:function e(t){if(l.has(t)){return l.get(t)}var n=t.style.overflow;t.style.overflow="scroll";var r={width:t.offsetWidth-t.clientWidth,height:t.offsetHeight-t.clientHeight};t.style.overflow=n;l.set(t,r);return r},setScrollPadding:function e(t,n){n=n||"both";var r=n==="horizontal"||n==="both";var i=n==="vertical"||n==="both";var a=c.getScrollbarSize(t);var o=i?a.width+"px":"0";var s=r?a.height+"px":"0";t.style.overflow="hidden";t.style.padding="0 "+o+" "+s+" 0";var u=t.scrollWidth>t.clientWidth;var l=t.scrollHeight>t.clientHeight;var f=i&&!l?a.width+"px":"0";var d=r&&!u?a.height+"px":"0";t.style.padding="0 "+f+" "+d+" 0";t.style.overflow="";t.style.overflowX=u?"scroll":"hidden";t.style.overflowY=l?"scroll":"hidden";return a},getStyle:function e(t,n){return window.getComputedStyle(t,undefined).getPropertyValue(n)},getStyleAsNum:function e(t,n){return parseInt(this.getStyle(t,n)||0,10)},getContainerSize:function e(t){var n=this.getStyleAsNum(t,"padding-left");var r=this.getStyleAsNum(t,"padding-right");var i=this.getStyleAsNum(t,"padding-bottom");var a=this.getStyleAsNum(t,"padding-top");var o=this.getStyleAsNum(t,"border-top-width");var s=this.getStyleAsNum(t,"border-left-width");var u=this.getStyleAsNum(t,"border-right-width");var l=this.getStyleAsNum(t,"border-bottom-width");var c=o+s+u+l;var f=t.getBoundingClientRect();return{width:f.width-n-r-2*c,height:f.height-i-a-2*c}},getAxisTickLabelSize:function e(t){var n=document.createElement("div");n.style.position="absolute";n.style.visibility="hidden";n.style.width="100px";n.style.height="100px";n.style.border="1px solid green";n.style.top="0";document.body.appendChild(n);n.innerHTML='<svg class="graphical-report__svg">\n            <g class="graphical-report__cell cell">\n            <g class="x axis">\n            <g class="tick"><text>'+t+"</text></g>\n            </g>\n            </g>\n            </svg>";var r=a.default.select(n).selectAll(".x.axis .tick text")[0][0];var i={width:0,height:0};var o=r.getBoundingClientRect();i.width=o.right-o.left;i.height=o.bottom-o.top;var s=t.length!==0?i.width/t.length:0;i.width=i.width+1.5*s;document.body.removeChild(n);return i},getLabelSize:function e(t,n){var r=n.fontSize,i=n.fontFamily,a=n.fontWeight;var o=typeof r==="string"?r:r+"px";var s=0;var u=t.length-1;for(var l=0;l<=u;l++){var f=t.charAt(l);var d=c.getCharSize(f,{fontSize:o,fontFamily:i,fontWeight:a});s+=d.width}return{width:s,height:parseInt(o)}},getCharSize:o.utils.memoize(function(e,t){var n=t.fontSize,r=t.fontFamily,i=t.fontWeight;var a=document.createElement("div");a.style.position="absolute";a.style.visibility="hidden";a.style.border="0px";a.style.top="0";a.style.fontSize=n;a.style.fontFamily=r;a.style.fontWeight=i;document.body.appendChild(a);a.innerHTML=e===" "?"&nbsp;":e;var o={width:0,height:0};var s=a.getBoundingClientRect();o.width=s.right-s.left;o.height=s.bottom-s.top;document.body.removeChild(a);return o},function(e,t){return e+"_"+JSON.stringify(t)}),selectOrAppend:function e(t,n){var r={".":function e(t,n){return n.classed(t,true)},"#":function e(t,n){return n.attr("id",t)}};var i=Object.keys(r).join("");if(n.indexOf(" ")>=0){throw new Error("Selector should not contain whitespaces.")}if(i.indexOf(n[0])>=0){throw new Error("Selector must have tag at the beginning.")}var o=t instanceof Element;if(o){t=a.default.select(t)}var s=function e(t){return o?t.node():t};var u=t.selectAll(n).filter(function(){return this.parentNode===t.node()}).filter(function(e,t){return t===0});if(!u.empty()){return s(u)}var l;var c=-1;var f=null;for(var d=1,h=n.length,v;d<=h;d++){if(d==h||i.indexOf(n[d])>=0){v=n.substring(c+1,d);if(c<0){l=t.append(v)}else{r[f].call(null,v,l)}f=n[d];c=d}}return s(l)},selectImmediate:function e(t,n){return c.selectAllImmediate(t,n)[0]||null},selectAllImmediate:function e(t,n){var r=[];var i=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;for(var a=t.firstElementChild;Boolean(a);a=a.nextElementSibling){if(i.call(a,n)){r.push(a)}}return r},sortChildren:function e(t,n){if(t.childElementCount>0){var r=Array.prototype.filter.call(t.childNodes,function(e){return e.nodeType===Node.ELEMENT_NODE});var i=r.slice().sort(n);var a=r.reduce(function(e,t,n){e.set(t,n);return e},new Map);var s;var u;var l=i.reduce(function(e,t,n){var r=a.get(t);var o=n-r;if(o!==u){if(s){e.push(s)}u=o;s={from:r,to:n,elements:[]}}s.elements.push(t);if(n===i.length-1){e.push(s)}return e},[]);var c=l.slice().sort(function(e,t){return e.from-t.from});var f=c.reduce(function(e,t,n){e.set(t,n);return e},new Map);var d=function e(t){var n=l.map(function(e,t){return{elements:e.elements,from:f.get(e),to:t}}).sort(o.utils.createMultiSorter(function(e,t){return e.elements.length-t.elements.length},t?function(e,t){return t.to-e.to}:function(e,t){return e.to-t.to}));for(var r=0,i,a,s;r<n.length;r++){a=n[r];if(a.from>a.to){for(i=r+1;i<n.length;i++){s=n[i];if(s.from>=a.to&&s.from<a.from){s.from++}}}if(a.from<a.to){for(i=r+1;i<n.length;i++){s=n[i];if(s.from>a.from&&s.from<=a.to){s.from--}}}}return n.filter(function(e){return e.from!==e.to})};var h=d(true);var v=d(false);var p=h.length<v.length?h:v;var g=c.map(function(e){return e.elements});p.forEach(function(e){var n=g.splice(e.from,1)[0];var r=g[e.to];var i=r?r[0]:null;var a;if(e.elements.length===1){a=n[0]}else{a=document.createDocumentFragment();n.forEach(function(e){a.appendChild(e)})}t.insertBefore(a,i);g.splice(e.to,0,n)})}},classes:function e(){var e=[];for(var t=arguments.length,n=Array(t),i=0;i<t;i++){n[i]=arguments[i]}n.filter(function(e){return Boolean(e)}).forEach(function(t){if(typeof t==="string"){e.push(t)}else if((typeof t==="undefined"?"undefined":r(t))==="object"){e.push.apply(e,Object.keys(t).filter(function(e){return Boolean(t[e])}))}});return o.utils.unique(e).join(" ").trim().replace(/\s{2,}/g," ")}};t.utilsDom=c},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.utils=undefined;var r=function(){function e(e,t){var n=[];var r=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(r=(s=o.next()).done);r=true){n.push(s.value);if(t&&n.length===t){break}}}catch(e){i=true;a=e}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(i){throw a}}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var i=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var a=n(4);var o=n(2);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}var c=function e(t,n,r,i){var a=i(r(t),t);(a[n]||[]).forEach(function(t){return e(t,n,r,i)});return a};var f=function e(t,n,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var a=n(t,i);if(a){(t.units||[]).map(function(t){return e(t,n,r,i+1)})}r(t,i)};var d=0;var h={};var v=function(){function e(e){if((typeof e==="undefined"?"undefined":i(e))=="object"){return JSON.parse(JSON.stringify(e))}else{return e}}var t=[];function n(e){for(var t in e){this[t]=e[t]}}n.prototype={constructor:n,canCopy:function e(t){return false},create:function e(t){},populate:function e(t,n,r){}};function r(){this.copiedObjects=[];var e=this;this.recursiveDeepCopy=function(t){return e.deepCopy(t)};this.depth=0}r.prototype={constructor:r,maxDepth:256,cacheResult:function e(t,n){this.copiedObjects.push([t,n])},getCachedResult:function e(t){var n=this.copiedObjects;var r=n.length;for(var i=0;i<r;i++){if(n[i][0]===t){return n[i][1]}}return undefined},deepCopy:function e(n){if(n===null){return null}if((typeof n==="undefined"?"undefined":i(n))!=="object"){return n}var r=this.getCachedResult(n);if(r){return r}for(var a=0;a<t.length;a++){var o=t[a];if(o.canCopy(n)){return this.applyDeepCopier(o,n)}}throw new Error("no DeepCopier is able to copy "+n)},applyDeepCopier:function e(t,n){var r=t.create(n);this.cacheResult(n,r);this.depth++;if(this.depth>this.maxDepth){throw new Error("Exceeded max recursion depth in deep copy.")}t.populate(this.recursiveDeepCopy,n,r);this.depth--;return r}};function a(e,t){var n=new r;if(t){n.maxDepth=t}return n.deepCopy(e)}a.DeepCopier=n;a.deepCopiers=t;a.register=function(e){if(!(e instanceof n)){e=new n(e)}t.unshift(e)};a.register({canCopy:function e(){return true},create:function t(n){if(n instanceof n.constructor){return e(n.constructor.prototype)}else{return{}}},populate:function e(t,n,r){for(var i in n){if(n.hasOwnProperty(i)){r[i]=t(n[i])}}return r}});a.register({canCopy:function e(t){return t instanceof Array},create:function e(t){return new t.constructor},populate:function e(t,n,r){for(var i=0;i<n.length;i++){r.push(t(n[i]))}return r}});a.register({canCopy:function e(t){return t instanceof Date},create:function e(t){return new Date(t)}});return a}();var p=[a.GenericCartesian];var g=function e(t){return/^(#|rgb\(|rgba\()/.test(t)};var m=/(.)^/;var y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var b={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var _=/\\|'|\r|\n|\u2028|\u2029/g;var w="(?:"+Object.keys(y).join("|")+")";var x=RegExp(w);var T=RegExp(w,"g");var C={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var k={clone:function e(t){return v(t)},isDate:function e(t){return t instanceof Date&&!isNaN(Number(t))},isObject:function e(t){return t!=null&&(typeof t==="undefined"?"undefined":i(t))==="object"},isChartElement:function e(t){return p.some(function(e){return t instanceof e})},niceZeroBased:function e(t){var n=10;var r=parseFloat(Math.min.apply(Math,l(t)).toFixed(15));var i=parseFloat(Math.max.apply(Math,l(t)).toFixed(15));if(r===i){var a=i>=0?-1:1;var o=i||1;i=i-a*o/n}r=Math.min(0,r);i=Math.max(0,i);var s=[r,i];var u=s[1]-s[0];var c=Math.pow(10,Math.floor(Math.log(u/n)/Math.LN10));var f=n/u*c;var d=[[.15,10],[.35,5],[.75,2],[1,1],[2,1]];var h=-1;while(f>d[++h][0]){}c*=d[h][1];s[0]=Math.floor(s[0]/c)*c;s[1]=Math.ceil(s[1]/c)*c;var v=r-s[0];var p=s[1]-i;var g=c/2;if(r<0){var m=v>=g?-v:0;s[0]=s[0]-m}if(i>0){var y=p>=g?-p:0;s[1]=s[1]+y}return[parseFloat(s[0].toFixed(15)),parseFloat(s[1].toFixed(15))]},niceTimeDomain:function e(t,n){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{utc:false},a=i.utc;var o=s.default.extent(t),u=r(o,2),l=u[0],c=u[1];var f=c-l;var d=a?s.default.time.scale.utc:s.default.time.scale;if(f===0){var h=24*60*60*1e3;l=new Date(l.getTime()-h);c=new Date(c.getTime()+h);return d().domain([l,c]).nice(n).domain()}var v=d().domain([l,c]).nice(n);if(n){return v.domain()}var p=d().domain([l,c]).nice(n).domain(),g=r(p,2),m=g[0],y=g[1];var b=v.ticks();var _=b.length-1;if((l-m)/(b[1]-m)<.5){l=m}if((y-c)/(y-b[_-1])<.5){c=y}return[l,c]},traverseJSON:c,generateHash:function e(t){var n=btoa(encodeURIComponent(t)).replace(/=/g,"_");if(!h.hasOwnProperty(n)){h[n]="H"+ ++d}return h[n]},generateRatioFunction:function e(t,n,r){var i=function e(t){return k.isDate(t)?t.getTime():t};var a=0;var o=null;var s=k.memoize(function(e,t){return k.unique(e.map(function(e){return t.reduce(function(t,n){return t.concat(i(e[n]))},[])}),function(e){return JSON.stringify(e)}).reduce(function(e,t){var n=t[0];e[n]=e[n]||0;e[n]+=1;return e},{})},function(e,t){var n=o===e?a:++a;o=e;return t.join("")+"-"+n});return function(e,i,a){var o=a.length;var u=r.getSpec();var l=u.sources["/"].data;var c=u.unit.units[0].guide||{};c.padding=c.padding||{l:0,r:0,t:0,b:0};var f=0;if(t==="x"){f=c.padding.l+c.padding.r}else if(t==="y"){f=c.padding.t+c.padding.b}var d=function e(t){var n=s(l,t);return Object.keys(n).reduce(function(e,t){return e+n[t]},0)};var h=function e(t,n){return s(l,t)[n]};var v=d(n);var p=(i-o*f)/v;var g=h(n,e);return(g*p+f)/i}},traverseSpec:f,isSpecRectCoordsOnly:function e(t){var n=true;try{k.traverseSpec(t,function(e){if(e.type.indexOf("COORDS.")===0&&e.type!=="COORDS.RECT"){throw new Error("Not applicable")}},function(e){return e})}catch(e){if(e.message==="Not applicable"){n=false}}return n},throttleLastEvent:function e(t,n,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;if(i==="requestAnimationFrame"){var a=false;return function(){if(!a){requestAnimationFrame(function(){a=false});for(var e=arguments.length,i=Array(e),o=0;o<e;o++){i[o]=arguments[o]}r.apply(this,i);a=true}t.e=n;t.ts=new Date}}return function(){var e={e:n,ts:new Date};var a=t.e&&t.e===e.e?e.ts-t.ts:i;if(a>=i){for(var o=arguments.length,s=Array(o),u=0;u<o;u++){s[u]=arguments[u]}r.apply(this,s)}t.e=e.e;t.ts=e.ts}},splitEvenly:function e(t,n){var r=t[0];var i=t[1];var a=(i-r)/(n-1);var o=n>=2?k.range(n-2).map(function(e){return r+a*(e+1)}):[];return[r].concat(l(o),[i])},extRGBColor:function e(t){return g(t)?t:""},extCSSClass:function e(t){return g(t)?"":t},toRadian:function e(t){return t/180*Math.PI},normalizeAngle:function e(t){if(Math.abs(t)>=360){t=t%360}if(t<0){t=360+t}return t},range:function e(t,n){if(arguments.length===1){n=t;t=0}var r=[];for(var i=t;i<n;i++){r.push(i)}return r},flatten:function e(t){var n;if(!Array.isArray(t)){return t}return(n=[]).concat.apply(n,l(t.map(function(e){return k.flatten(e)})))},unique:function e(t,n){var r={};var i=[];var a=t.length;var o=n||function(e){return String(e)};for(var s=0;s<a;++s){var u=t[s];var l=o(u);if(!r.hasOwnProperty(l)){r[l]=true;i.push(u)}}return i},groupBy:function e(t,n){return t.reduce(function(e,t){var r=n(t);e[r]=e[r]||[];e[r].push(t);return e},{})},union:function e(t,n){return k.unique(t.concat(n))},intersection:function e(t,n){return t.filter(function(e){return n.indexOf(e)!==-1})},defaults:function e(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}var a=r.length;if(a===0||!t){return t}for(var o=0;o<a;o++){var s=r[o],u=k.isObject(s)?Object.keys(s):[],l=u.length;for(var c=0;c<l;c++){var f=u[c];if(t[f]===undefined){t[f]=s[f]}}}return t},omit:function e(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}var a=Object.assign({},t);r.forEach(function(e){delete a[e]});return a},memoize:function e(t,n){var e=function e(r){var i=e.cache;var a=String(n?n.apply(this,arguments):r);if(!i.hasOwnProperty(a)){i[a]=t.apply(this,arguments)}return i[a]};e.cache={};return e},createMultiSorter:function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++){n[r]=arguments[r]}return function(e,t){var r=0;n.every(function(n){r=n(e,t);return r===0});return r}},pick:function e(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}var a={};if(t==null){return a}return r.reduce(function(e,n){var r=t[n];if(r){e[n]=r}return e},{})},escape:function e(t){t=t==null?"":String(t);return x.test(t)?t.replace(T,function(e){return y[e]}):t},template:function e(t,n,r){if(!n&&r){n=r}n=k.defaults({},n,C);var i=RegExp([(n.escape||m).source,(n.interpolate||m).source,(n.evaluate||m).source].join("|")+"|$","g");var a=0;var o="__p+='";t.replace(i,function(e,n,r,i,s){o+=t.slice(a,s).replace(_,function(e){return"\\"+b[e]});a=s+e.length;if(n){o+="'+\n((__t=("+n+"))==null?'':utils.escape(__t))+\n'"}else if(r){o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"}else if(i){o+="';\n"+i+"\n__p+='"}return e});o+="';\n";if(!n.variable){o="with(obj||{}){\n"+o+"}\n"}o="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(n.variable||"obj",o)}catch(e){e.source=o;throw e}var e=function e(t){return s.call(this,t)};var u=n.variable||"obj";e.source="function("+u+"){\n"+o+"}";return e}};t.utils=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GenericCartesian=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(5);var a=n(7);var o=n(9);var s=n(3);var u=n(2);var l=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function v(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var g=t.GenericCartesian=function(e){p(t,e);function t(e){h(this,t);var n=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.config=e;n.config.guide=s.utils.defaults(n.config.guide||{},{animationSpeed:0,enableColorToBarPosition:false});n.config.guide.size=n.config.guide.size||{};var r=n.config.stack;var i=n.config.guide.enableColorToBarPosition;var o=[e.flip&&a.GrammarRegistry.get("flip"),r&&a.GrammarRegistry.get("stack"),i&&a.GrammarRegistry.get("positioningByColor")];n.decorators=(n.config.transformRules||o).concat(e.transformModel||[]);n.adjusters=(n.config.adjustRules||[]).concat(e.adjustScales||[]);return n}r(t,[{key:"defineGrammarModel",value:function e(t){var n=this;var r=this.config;this.regScale("x",t("pos",r.x,[0,r.options.width])).regScale("y",t("pos",r.y,[r.options.height,0])).regScale("size",t("size",r.size,{})).regScale("color",t("color",r.color,{})).regScale("split",t("split",r.split,{})).regScale("label",t("label",r.label,{})).regScale("identity",t("identity",r.identity,{}));var i=this.getScale("x");var a=this.getScale("y");var o=this.getScale("size");var s=this.getScale("label");var u=this.getScale("color");var l=this.getScale("split");var c=this.getScale("identity");var f=a.domain();var h=a.discrete?f[0]:Math.max(0,Math.min.apply(Math,d(f)));var v=a.value(h)+a.stepSize(h)*.5;var p=u.domain();var g="(@taucharts@)";return{data:function e(){return n.data()},flip:false,scaleX:i,scaleY:a,scaleSize:o,scaleLabel:s,scaleColor:u,scaleSplit:l,scaleIdentity:c,color:function e(t){return u.value(t[u.dim])},label:function e(t){return s.value(t[s.dim])},group:function e(t){return""+t[u.dim]+g+t[l.dim]},order:function e(t){var n=t.split(g)[0];var r=p.indexOf(n);return r<0?Number.MAX_VALUE:r},size:function e(t){return o.value(t[o.dim])},id:function e(t){return c.value(t[c.dim],t)},xi:function e(t){return i.value(t[i.dim])},yi:function e(t){return a.value(t[a.dim])},y0:function e(){return v}}}},{key:"getGrammarRules",value:function e(){return this.decorators.filter(function(e){return e})}},{key:"getAdjustScalesRules",value:function e(){return(this.adjusters||[]).filter(function(e){return e})}},{key:"createScreenModel",value:function e(t){var n=t.flip;var r=function e(t,n,r){return t?n:r};return{flip:n,id:t.id,x:r(n,t.yi,t.xi),y:r(n,t.xi,t.yi),x0:r(n,t.y0,t.xi),y0:r(n,t.xi,t.y0),size:t.size,group:t.group,order:t.order,label:t.label,color:function e(n){return t.scaleColor.toColor(t.color(n))},class:function e(n){return t.scaleColor.toClass(t.color(n))},model:t,toFibers:function e(){var n=t.data();var r=s.utils.groupBy(n,t.group);return Object.keys(r).sort(function(e,n){return t.order(e)-t.order(n)}).reduce(function(e,t){return e.concat([r[t]])},[])}}}},{key:"drawFrames",value:function e(){var t=this;var n=this.config.options;var r=function e(t,n){var r=Math.pow(10,n);return Math.round(r*t)/r};var i=function e(n){return r(t.screenModel.size(n)/2,4)};var a=o.d3_animationInterceptor;var u=function e(n,r,i){var o=t.config.guide.animationSpeed;var s=n.selectAll("."+r).data(function(e){return[e]},t.screenModel.id);s.exit().call(a(o,null,{width:0},function(e){return l.default.select(e).remove()}));s.call(a(o,null,i));s.enter().append("rect").style("stroke-width",0).call(a(o,{width:0},i))};var c=this.config.flip;var d=c?"y":"x";var h=c?"x":"y";var v=c?"x0":"y0";var p=c?"height":"width";var g=c?"width":"height";var m=function e(){var n,r,a;u(this,"lvl-top",(n={},f(n,p,function(e){return i(e)}),f(n,g,1),f(n,d,function(e){return t.screenModel[d](e)-i(e)/2}),f(n,h,function(e){return t.screenModel[h](e)}),f(n,"fill",function e(n){return t.screenModel.color(n)}),f(n,"class",function e(n){return"lvl-top "+t.screenModel.class(n)}),n));u(this,"lvl-btm",(r={},f(r,p,function(e){return i(e)}),f(r,g,1),f(r,d,function(e){return t.screenModel[d](e)-i(e)/2}),f(r,h,function(e){return t.screenModel[v](e)}),f(r,"fill",function e(n){return t.screenModel.color(n)}),f(r,"class",function e(n){return"lvl-btm "+t.screenModel.class(n)}),r));u(this,"lvl-link",(a={},f(a,p,.5),f(a,g,function(e){return Math.abs(t.screenModel[h](e)-t.screenModel[v](e))}),f(a,d,function(e){return t.screenModel[d](e)-.25}),f(a,h,function(e){return Math.min(t.screenModel[h](e),t.screenModel[v](e))}),f(a,"fill",function e(n){return t.screenModel.color(n)}),f(a,"class",function e(n){return"lvl-link "+t.screenModel.class(n)}),a))};var y=function e(){this.attr("class","frame-id-"+t.config.uid).call(function(){var e=this.selectAll(".generic").data(function(e){return e},t.screenModel.id);e.exit().remove();e.call(m);e.enter().append("g").attr("class","generic").call(m)})};var b=s.utils.groupBy(this.data(),t.screenModel.group);var _=Object.keys(b).sort(function(e,n){return t.screenModel.order(e)-t.screenModel.order(n)}).reduce(function(e,t){return e.concat([b[t]])},[]);var w=n.container.selectAll(".frame-id-"+t.config.uid).data(_);w.exit().remove();w.call(y);w.enter().append("g").call(y)}}]);return t}(i.Element)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Element=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(6);var a=n(3);var o=n(2);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var d=t.Element=function(e){f(t,e);function t(e){l(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.screenModel=null;n._elementNameSpace=e.namespace||"default";n._elementScalesHub={};return n}r(t,[{key:"regScale",value:function e(t,n){this._elementScalesHub[t]=n;return this}},{key:"getScale",value:function e(t){return this._elementScalesHub[t]||null}},{key:"fireNameSpaceEvent",value:function e(t,n){var r=this._elementNameSpace;this.fire(t+"."+r,n)}},{key:"subscribe",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(e){return e};var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(e){return e};var i=this;var o={};[{event:"mouseover",limit:0},{event:"mouseout",limit:0},{event:"click",limit:0},{event:"mousemove",limit:"requestAnimationFrame"}].forEach(function(e){var u=e.event;var l=e.limit;var c=function e(t){var a={data:n.call(this,t),event:r.call(this,s.default.event,t)};i.fire(u,a);i.fireNameSpaceEvent(u,a)};t.on(u,a.utils.throttleLastEvent(o,u,c,l))})}},{key:"allocateRect",value:function e(){return{left:0,top:0,width:0,height:0}}},{key:"defineGrammarModel",value:function e(t){return{}}},{key:"getGrammarRules",value:function e(){return[]}},{key:"getAdjustScalesRules",value:function e(){return[]}},{key:"createScreenModel",value:function e(t){}},{key:"getClosestElement",value:function e(t,n){return null}},{key:"addInteraction",value:function e(){}},{key:"draw",value:function e(){this.config.options.container=this.config.options.slot(this.config.uid);this.drawFrames(this.config.frames)}},{key:"data",value:function e(){return this.config.frames.reduce(function(e,t){return e.concat(t.part())},[])}},{key:"node",value:function e(){return this}}]);return t}(i.Emitter)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i={};var a={};function o(e){var t=a[e];if(!t){t=function t(){var n=this;var r;var i;var a=0;var o=[];while(n=n.handler){i=n.callbacks[e];if(typeof i==="function"){if(!r){r=[this];for(a=0;a<arguments.length;a++){r.push(arguments[a])}}o.unshift({fn:i,context:n.context,args:r})}i=n.callbacks["*"];if(typeof i==="function"){if(!r){r=[this];for(a=0;a<arguments.length;a++){r.push(arguments[a])}}o.unshift({fn:i,context:n.context,args:[{sender:this,type:e,args:r}]})}}o.forEach(function(e){return e.fn.apply(e.context,e.args)})};a[e]=t}return t}var s=function(){function e(){r(this,e);this.handler=null;this.emit_destroy=o("destroy")}n(e,[{key:"addHandler",value:function e(t,n){n=n||this;this.handler={callbacks:t,context:n,handler:this.handler}}},{key:"on",value:function e(t,n,r){var i={};i[t]=n;this.addHandler(i,r);return i}},{key:"fire",value:function e(t,n){o.call(this,t).call(this,n)}},{key:"removeHandler",value:function e(t,n){var r=this;var a;n=n||this;while(a=r,r=r.handler){if(r.callbacks===t&&r.context===n){r.callbacks=i;a.handler=r.handler;return}}}},{key:"destroy",value:function e(){this.emit_destroy();this.handler=null}}]);return e}();t.Emitter=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GrammarRegistry=undefined;var r=n(3);var i=n(8);function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}var o={};var s={get:function e(t){return o[t]},reg:function e(t,n){o[t]=n;return this}};s.reg("identity",function(){return{}}).reg("flip",function(e){var t=e.scaleY;var n=e.scaleX;var r=-.5;var i=n.domain();var o=n.discrete?i[0]:Math.max(0,Math.min.apply(Math,a(i)));var s=n.value(o)+n.stepSize(o)*r;return{flip:true,scaleX:t,scaleY:n,xi:function e(n){return t.value(n[t.dim])},yi:function e(t){return n.value(t[n.dim])},y0:function e(){return s}}}).reg("positioningByColor",function(e){var t=e.scaleX.discrete?function(e){var t=e.data();var n=t.reduce(function(t,n){var r=n[e.scaleX.dim];var i=n[e.scaleColor.dim];if(!(r in t)){t[r]=[]}if(t[r].indexOf(i)<0){t[r].push(i)}return t},{});var r=e.scaleX;var i=e.scaleColor;var a=i.discrete?i.domain():i.originalSeries().sort(function(e,t){return e-t});var o=a.length||1;var s=function e(t){return r.stepSize(t[r.dim])*(o/(1+o))};return{xi:function t(r){var i=r[e.scaleX.dim];var a=n[i]||[r[e.scaleColor.dim]];var u=a.length;var l=a.indexOf(r[e.scaleColor.dim]);var c=s(r);var f=c/(o+1);var d=e.xi(r)-(u+1)*f/2;var h=(1+l)*f;return d+h}}}:function(){return{}};return t(e)}).reg("groupOrderByAvg",function(e){var t=e.data();var n=function t(n){return n.map(e.yi).reduce(function(e,t){return e+t},0)/n.length};var r=t.reduce(function(t,n){var r=e.group(n);t[r]=t[r]||[];t[r].push(n);return t},{});var i=Object.keys(r).map(function(e){return[e,n(r[e])]}).sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]});return{order:function e(t){var n=i.indexOf(t);return n<0?Number.MAX_VALUE:n}}}).reg("stack",function(e){var t=e.data();var n=e.scaleX;var a=e.scaleY;if(a.discrete||a.domain().some(function(e){return typeof e!=="number"})){throw new i.TauChartError("Stacked field ["+a.dim+"] should be a number",i.errorCodes.STACKED_FIELD_NOT_NUMBER,{field:a.dim})}var o=function e(t){return function(e){var r=e[n.dim];var i=e[a.dim];var o=i>=0?t.positive:t.negative;var s=o[r]||0;var u=s+i;o[r]=u;return{nextStack:u,prevStack:s}}};var s=o({positive:{},negative:{}});var u=o({positive:{},negative:{}});var l=function t(n){return r.utils.memoize(n,e.id)};var c=Number.MAX_VALUE;var f=Number.MIN_VALUE;var d=function e(t){c=t<c?t:c;f=t>f?t:f;return a.value(t)};var h=l(function(e){return d(s(e).nextStack)});var v=l(function(e){return d(u(e).prevStack)});var p=function t(n){return e.group(n)+"/"+(n[a.dim]>=0?1:-1)};var g=r.utils.groupBy(t,p);var m=Object.keys(g).sort(function(t,n){return e.order(t)-e.order(n)}).reduce(function(e,t){return e.concat(g[t])},[]);m.forEach(function(e){h(e);v(e)});a.fixup(function(e){var t={};if(!e.hasOwnProperty("max")||e.max<f){t.max=f}if(!e.hasOwnProperty("min")||e.min>c){t.min=c}return t});return{group:p,data:function e(){return m},yi:h,y0:v}}).reg("size_distribute_evenly",function(e,t){var n=t.minLimit,r=t.maxLimit,i=t.defMin,a=t.defMax;var o=e.data();var s=function e(t,n){return t-n};var u=e.scaleX.discrete?e.scaleX.stepSize()/2:Number.MAX_VALUE;var l=o.map(function(t){return e.xi(t)}).sort(s);var c=l[0];var f=l.slice(1).map(function(e){var t=e-c;c=e;return t}).filter(function(e){return e>0}).sort(s).concat(Number.MAX_VALUE)[0];var d=Math.min(f,u);var h=typeof n==="number"?n:i;var v={minSize:h,maxSize:typeof r==="number"?r:Math.max(h,Math.min(a,d))};e.scaleSize.fixup(function(e){var t={};if(!e.fixed){t.fixed=true;t.minSize=v.minSize;t.maxSize=v.maxSize}else{if(e.maxSize>v.maxSize){t.maxSize=v.maxSize}}return t});return{}}).reg("adjustStaticSizeScale",function(e,t){var n=t.minLimit,r=t.maxLimit,i=t.defMin,a=t.defMax;var o={minSize:typeof n==="number"?n:i,maxSize:typeof r==="number"?r:a};e.scaleSize.fixup(function(e){var t={};if(!e.fixed){t.fixed=true;t.minSize=o.minSize;t.maxSize=o.maxSize}return t});return{}}).reg("adjustSigmaSizeScale",function(e,t){var n=t.minLimit,r=t.maxLimit,i=t.defMin,a=t.defMax;var o=e.data();var s=function e(t,n){return t-n};var u=o.map(function(t){return e.xi(t)}).sort(s);var l=u[0];var c=u.slice(1).map(function(e){var t=e-l;l=e;return t}).filter(function(e){return e>0}).sort(s).concat(Number.MAX_VALUE)[0];var f=e.scaleX.discrete?e.scaleX.stepSize()/2:Number.MAX_VALUE;var d=Math.min(c,f);var h=typeof n==="number"?n:i;var v=typeof r==="number"?r:a;var p=function e(t){var n=(h+v)/2;var r=v;var i=h;var a=.5;return Math.round(n+(r-n)/(1+Math.exp(-(t-i)/a)))};var g={minSize:h,maxSize:Math.max(h,Math.min(v,p(d)))};e.scaleSize.fixup(function(e){var t={};if(!e.fixed){t.fixed=true;t.minSize=g.minSize;t.maxSize=g.maxSize}else{if(e.maxSize>g.maxSize){t.maxSize=g.maxSize}}return t});return{}}).reg("avoidScalesOverflow",function(e,t){var n=t.sizeDirection;var r=function e(t,r){return!t||t.discrete||t.scaleType==="logarithmic"||n.indexOf(r)<0};var i=r(e.scaleX,"x");var a=r(e.scaleY,"y");if(i&&a){return{}}var o;var s;e.scaleSize.fixup(function(e){o=e.minSize;s=e.maxSize;return e});var u=e.data().reduce(function(t,n){var r=e.size(n);var u=(r>=o?r:o+r*(s-o))/2;var l,c;if(!i){l=e.xi(n);t.left=Math.min(t.left,l-u);t.right=Math.max(t.right,l+u)}if(!a){c=e.yi(n);t.top=Math.min(t.top,c-u);t.bottom=Math.max(t.bottom,c+u)}return t},{top:Number.MAX_VALUE,right:-Number.MAX_VALUE,bottom:-Number.MAX_VALUE,left:Number.MAX_VALUE});var l=function t(n,r,i,a){var o=n.domain();var s=Math.abs(n.value(o[1])-n.value(o[0]));var u=(o[1]-o[0])/s;var l=Math.max(0,-r);var c=Math.max(0,i-s);var f=e.flip?c:l;var d=e.flip?l:c;var h=Number(o[0])-(a?d:f)*u;var v=Number(o[1])+(a?f:d)*u;n.fixup(function(e){var t={};if(!e.fixed){t.fixed=true;t.min=h;t.max=v;t.nice=false}else{t.min=e.min>h?t.min:e.min;t.max=e.max<v?t.max:e.max}return t});return s/(f+s+d)};var c=i?1:l(e.scaleX,u.left,u.right,false);var f=a?1:l(e.scaleY,u.top,u.bottom,true);var d=Math.min(o*c,o*f);var h=Math.min(s*c,s*f);e.scaleSize.fixup(function(){return{minSize:d,maxSize:h}});return{}});t.GrammarRegistry=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function r(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function i(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var a=function(e){i(t,e);function t(e,i,a){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));o.name="TauChartError";o.message=e;o.errorCode=i;o.errorArgs=a;return o}return t}(Error);var o={STACKED_FIELD_NOT_NUMBER:"STACKED_FIELD_NOT_NUMBER",NO_DATA:"NO_DATA",NOT_SUPPORTED_TYPE_CHART:"NOT_SUPPORTED_TYPE_CHART",UNKNOWN_UNIT_TYPE:"UNKNOWN_UNIT_TYPE",INVALID_LOG_DOMAIN:"INVALID_LOG_DOMAIN"};t.TauChartError=a;t.errorCodes=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.cutText=t.wrapText=t.d3_selectAllImmediate=t.d3_transition=t.d3_decorator_avoidLabelsCollisions=t.d3_decorator_prettify_categorical_axis_ticks=t.d3_decorator_highlightZeroTick=t.d3_decorator_fixEdgeAxisTicksOverflow=t.d3_decorator_fixHorizontalAxisTicksOverflow=t.d3_decorator_fix_axis_start_line=t.d3_decorator_prettify_axis_label=t.d3_decorator_wrap_tick_label=t.d3_createPathTween=t.d3_animationInterceptor=undefined;var r=n(3);var i=n(1);var a=n(10);var o=n(2);var s=f(o);var u=n(11);var l=f(u);var c=n(13);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function h(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var v=function e(){return r.utils.memoize(function(e){return e.node().getComputedTextLength()},function(e){return e.node().textContent.length})};var p=function e(t,n,r){r=r||v();t.each(function(){var e=s.default.select(this.parentNode);var t=e.data()[0];var i=n(t);var a=s.default.select(this);var o=a.text().split(/\s+/);var u=false;var l=o.reduce(function(e,t,n){if(u){return e}var o=n>0?[e,t].join(" "):t;var s=r(a.text(o));if(s<i){e=o}else{var l=Math.floor(i/s*o.length);e=o.substr(0,l-4)+"...";u=true}return e},"");a.text(l)})};var g=function e(t,n,r,i,a,o){o=o||v();var u=function e(t,n,r,i,a,o,s){var u=s*r+o;return t.append("tspan").attr("x",i).attr("y",a).attr("dy",u+"em").text(n)};t.each(function(){var e=s.default.select(this.parentNode);var t=e.data()[0];var l=n(t);var c=s.default.select(this),f=c.text().split(/\s+/),d=1.1,h=c.attr("x"),v=c.attr("y"),p=parseFloat(c.attr("dy"));c.text(null);var g=u(c,null,d,h,v,p,0);var m=false;var y=f.length-1;var b=f.reduce(function(e,t,n){if(m){return e}var i=e.length===r||n===y;var a=e[e.length-1];var s=a!==""?a+" "+t:t;var u=o(g.text(s));var c=u>l;if(c&&i){var f=Math.floor(l/u*s.length);e[e.length-1]=s.substr(0,f-4)+"...";m=true}if(c&&!i){e.push(t)}if(!c){e[e.length-1]=s}return e},[""]).filter(function(e){return e.length>0});v=a?-1*(b.length-1)*Math.floor(i*.5):v;b.forEach(function(e,t){return u(c,e,d,h,v,p,t)});g.remove()})};var m=function e(t,n,r,i){t.selectAll(".tick").each(function(e){if(n(e)){var t=s.default.select(this);var a=function t(i){var a;var o=n(e);var s=r?o:0;var u=r?0:o;i.attr("transform","translate("+s+","+u+")");var l=n.stepSize(e)*.5;var c=r?"x":"y";var f=r?l:-l;i.select("line").attr((a={},h(a,c+"1",f),h(a,c+"2",f),a))};if(!t.classed("tau-enter")){t.call(a);t.classed("tau-enter",true)}k(t,i).call(a)}})};var y=function e(t,n){var r=n.length&&n[0]instanceof Date;if(r){n=n.map(function(e){return Number(e)})}var i=t.selectAll(".tick").filter(function(e){return n.indexOf(r?Number(e):e)>=0})[0];if(i.length<2){return}var a=parseFloat(i[0].attributes.transform.value.replace("translate(",""));var o=parseFloat(i[1].attributes.transform.value.replace("translate(",""));var s=o-a;var u=0;var l=-1;var c=t.selectAll(".tick text").filter(function(e){return n.indexOf(r?Number(e):e)>=0})[0];c.forEach(function(e,t){var n=e.textContent||"";var r=n.length;if(r>u){u=r;l=t}});var f=false;if(l>=0){var d=c[l].getBoundingClientRect();f=s-d.width<8}t.classed({"graphical-report__d3-time-overflown":f})};var b=function e(t,n){n=n.map(function(e){return Number(e)});var r=t.selectAll(".tick text").filter(function(e){return n.indexOf(Number(e))>=0})[0];if(r.length===0){return}var i=t.node();while(i&&i.tagName!=="svg"){i=i.parentNode}var a=i.getBoundingClientRect();r.forEach(function(e){var t=s.default.select(e);t.attr("dx",0)});var o=function e(t,n){var r=s.default.select(t);var i=t.getBoundingClientRect();var o=n>0?"right":"left";var u=n*(i[o]-a[o]);r.attr("dx",u>0?-n*u:0)};o(r[0],-1);o(r[r.length-1],1)};var _=function e(t,n,r,o,s){var u=function e(t){t.attr("transform",a.utilsDraw.translate(0,n?o:0));return t};var l=function e(t){if(n){t.attr("x2",r)}else{t.attr("y2",o)}return t};var c="tau-extra"+(n?"Y":"X")+"Tick";var f=i.utilsDom.selectOrAppend(t,"g."+c);var d=i.utilsDom.selectOrAppend(f,"line");if(!f.node().hasAttribute("opacity")){f.attr("opacity",1e-6)}k(f,s).call(u);k(d,s).call(l)};var w=function e(t,n,r,o,s){var u=r?1:-1;var l=i.utilsDom.selectOrAppend(t,"text.label").attr("class",i.utilsDom.classes("label",n.cssClass)).attr("transform",a.utilsDraw.rotate(n.rotate));var c=k(l,s).attr("x",u*n.size*.5).attr("y",u*n.padding).style("text-anchor",n.textAnchor);var f=" ‚Üí ";var d=function(e){var t=[];for(var n=0;n<e.length-1;n++){t.push(e[n],f)}t.push(e[n]);return t}(n.text.split(f));var h=l.selectAll("tspan").data(d);h.enter().append("tspan").attr("class",function(e,t){return t%2?"label-token-delimiter label-token-delimiter-"+t:"label-token label-token-"+t}).text(function(e){return e});h.exit().remove();if(["left","right"].indexOf(n.dock)>=0){var v={left:[-o,0],right:[0,o]};c.attr("x",v[n.dock][Number(r)])}};var x=function e(t,n,i,o,s){var u=r.utils.normalizeAngle(i.rotate);var l=t.selectAll(".tick text").attr("transform",a.utilsDraw.rotate(u)).style("text-anchor",i.textAnchor);var c=Math.abs(u/90);if(c%2>0){var f=u<180?1:-1;var d=o?.5:-2;var h=i.scaleOrient==="top"||i.scaleOrient==="left"?-1:1;var m=d*(i.scaleOrient==="bottom"||i.scaleOrient==="top"?h<0?0:.71:.32);var y=t.selectAll(".tick text");var b={x:9*f,y:0,dx:o?null:m+"em",dy:m+"em"};y.transition();y.attr(b);k(y,n,"axisTransition").attr(b)}var _=function e(t){return Math.max(s.stepSize(t),i.tickFormatWordWrapLimit)};if(i.tickFormatWordWrap){l.call(g,_,i.tickFormatWordWrapLines,i.tickFontHeight,!o)}else{l.call(p,_,v())}};var T=function e(t,n,r){var a=r.length&&r[0]instanceof Date;if(a){r=r.map(function(e){return Number(e)})}var o=11;var u=n?-10:20;var l=n?0:1;var c=n?1:-1;var f=[];t.selectAll(".tick").filter(function(e){return r.indexOf(a?Number(e):e)>=0}).each(function(){var e=s.default.select(this);var t=e.attr("transform").replace("translate(","").replace(" ",",").split(",")[l];var n=c*parseFloat(t);var r=e.selectAll("text");var i=r.node().getBBox().width;var a=i/2;var o=n-a;var u=n+a;f.push({c:n,s:o,e:u,l:0,textRef:r,tickRef:e})});var d=function e(t,n){return t.map(function(e,t,r){return n(r[t-1]||{e:-Infinity,s:-Infinity,l:0},e,r[t+1]||{e:Infinity,s:Infinity,l:0})})};var h=function e(t,n){var r={"[T][1]":-1,"[T][-1]":0,"[T][0]":1,"[F][0]":-1};var i="["+n.toString().toUpperCase().charAt(0)+"]["+t+"]";return r.hasOwnProperty(i)?r[i]:0};var v=f.sort(function(e,t){return e.c-t.c});d(v,function(e,t,r){var a=e.e>t.s;var s=r.s<t.e;if(a||s){t.l=h(e.l,a);var l=t.textRef[0].length;var c=t.textRef.text();if(l>1){c=c.replace(/([\.]*$)/gi,"")+"..."}var f=t.l*o;var d=parseFloat(t.textRef.attr("y"))+f;var v=n?0:f;var p=n?f:0;var g=function(e){var t=0;if(!e){return t}var n=e.indexOf("rotate(");if(n>=0){var r=e.indexOf(")",n+7);var i=e.substring(n+7,r);t=parseFloat(i.trim())}return t}(t.textRef.attr("transform"));t.textRef.text(function(e,t){return t===0?c:""}).attr("transform","translate("+v+","+p+") rotate("+g+")");var m={x1:0,x2:0,y1:d+(n?-1:5),y2:u};if(!n){m.transform="rotate(-90)"}i.utilsDom.selectOrAppend(t.tickRef,"line.label-ref").attr(m)}else{t.tickRef.selectAll("line.label-ref").remove()}return t})};var C=function e(t,n){var r=n.ticks();var i=n.domain();var a=r.length-1;var o=r.length>1&&i[0]*i[1]<0&&-i[0]>(r[1]-r[0])/2&&i[1]>(r[a]-r[a-1])/2;t.selectAll(".tick").classed("zero-tick",function(e){return e===0&&o})};var k=function e(t,n,r){if(n>0){t=t.transition(r).duration(n);t.attr=S}t.onTransitionEnd=function(e){O(this,e);return this};return t};var S=function e(t,n){var r=s.default.transition.prototype.attr.apply(this,arguments);if(arguments.length===0){throw new Error("Unexpected `transition().attr()` arguments.")}var i;if(arguments.length===1){i=t}else if(arguments.length>1){i=h({},t,n)}var a="__transitionAttrs__";var o="__lastTransitions__";var u=P();this.each(function(){var e=this;var t={};for(var n in i){if(typeof i[n]==="function"){t[n]=i[n].apply(this,arguments)}else{t[n]=i[n]}}this[a]=Object.assign(this[a]||{},t);if(!this[a][o]){Object.defineProperty(this[a],o,{value:{}})}Object.keys(t).forEach(function(t){return e[a][o][t]=u})});var l=function e(){var t=this;if(this[a]){Object.keys(i).filter(function(e){return t[a][o][e]===u}).forEach(function(e){return delete t[a][e]});if(Object.keys(this[a]).length===0){delete this[a]}}};this.each("interrupt."+u,l);this.each("end."+u,l);return r};var E=0;var P=function e(){return++E};var O=function e(t,n){if(!s.default.transition.prototype.isPrototypeOf(t)||t.empty()){n.call(null,t);return}var r=t.size();var i=function e(){r--;if(r===0){n.call(null,t)}};t.each("interrupt.d3_on_transition_end",i);t.each("end.d3_on_transition_end",i);return t};var M=function e(t,n,i,a){var o=a||function(e){return e};var s=function e(){o(this)};return function(){var e=this;if(n){e=e.attr(r.utils.defaults(n,i))}e=k(e,t);e=e.attr(i);if(t>0){e.each("end.d3_animationInterceptor",s)}else{e.each(s)}return e}};var A=function e(t,n){var r=t.node();return t.selectAll(n).filter(function(){return this.parentNode===r})};var N=function e(t,n,i,a){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:"linear";var s="__pathPoints__";return function(e){var t=this;if(!this[s]){this[s]=i.map(function(){return[]})}var u=i.map(function(n,i){var u=r.utils.unique(e,a).map(n);var f=c.getLineInterpolator(o)||c.getLineInterpolator("linear");var d=f(u);var h=t[s][i];var v=l.default(h,d,c.getInterpolatorSplineType(o));return{pointsFrom:h,pointsTo:d,interpolate:v}});return function(e){if(e===0){var r=u.map(function(e){return e.pointsFrom});return n.apply(undefined,d(r))}if(e===1){var i=u.map(function(e){return e.pointsTo});t[s]=i;return n.apply(undefined,d(i))}var a=u.map(function(t){return t.interpolate(e)});t[s]=a;return n.apply(undefined,d(a))}}};t.d3_animationInterceptor=M;t.d3_createPathTween=N;t.d3_decorator_wrap_tick_label=x;t.d3_decorator_prettify_axis_label=w;t.d3_decorator_fix_axis_start_line=_;t.d3_decorator_fixHorizontalAxisTicksOverflow=y;t.d3_decorator_fixEdgeAxisTicksOverflow=b;t.d3_decorator_highlightZeroTick=C;t.d3_decorator_prettify_categorical_axis_ticks=m;t.d3_decorator_avoidLabelsCollisions=T;t.d3_transition=k;t.d3_selectAllImmediate=A;t.wrapText=g;t.cutText=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.utilsDraw=undefined;var r=n(2);var i=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var o={translate:function e(t,n){return"translate("+t+","+n+")"},rotate:function e(t){return"rotate("+t+")"},getOrientation:function e(t){return["bottom","top"].indexOf(t.toLowerCase())>=0?"h":"v"},isIntersect:function e(t,n,r,i,a,o,s,u){var l,c,f,d;l=r-t;c=i-n;f=s-a;d=u-o;var h,v;h=(-c*(t-a)+l*(n-o))/(-f*c+l*d);v=(f*(n-o)-d*(t-a))/(-f*c+l*d);return h>=0&&h<=1&&v>=0&&v<=1},getDeepTransformTranslate:function e(t){var n=function e(t){var n={x:0,y:0};var r=t.indexOf("translate(");if(r>=0){var i=t.indexOf(")",r+10);var a=t.substring(r+10,i);var o=a.trim().replace(","," ").replace(/\s+/," ").split(" ");n.x=parseFloat(o[0]);if(o.length>1){n.y=parseFloat(o[1])}}return n};var r={x:0,y:0};var i=t;var a,o;while(i&&i.nodeName.toUpperCase()!=="SVG"){o=i.getAttribute("transform");if(o){a=n(o);r.x+=a.x;r.y+=a.y}i=i.parentNode}return r},raiseElements:function e(t,n,r){var a=t.selectAll(n).filter(r);if(a.empty()){return}var o=i.default.select(a.node().parentNode).selectAll(n).filter(function(e){return!r(e)})[0];var s=o[o.length-1];if(s){var u=Array.prototype.indexOf.call(s.parentNode.childNodes,s);var l=s.nextSibling;a.each(function(){var e=Array.prototype.indexOf.call(this.parentNode.childNodes,this);if(e>u){return}this.parentNode.insertBefore(this,l)})}}};t.utilsDraw=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){var n=[];var r=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(r=(s=o.next()).done);r=true){n.push(s.value);if(t&&n.length===t){break}}}catch(e){i=true;a=e}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(i){throw a}}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();t.default=o;var i=n(3);var a=n(12);function o(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"polyline";var r;return function(i){if(i===0){return e}if(i===1){return t}if(!r){r=(n==="cubic"?u:s)(e,t)}return r(i)}}function s(e,t){e=e.filter(function(e){return!e.isInterpolated});var n=e.map(function(e){return e.id});var r=t.map(function(e){return e.id});var i=n.filter(function(e){return r.indexOf(e)>=0});var a=e.filter(function(e){return!e.positionIsBeingChanged});var o=t.filter(function(e){return!e.positionIsBeingChanged});var s=x(a,o);var u=x(o,a);var d=[];i.forEach(function(a,o){var h=n.indexOf(a);var v=r.indexOf(a);if(o===0&&(h>0||v>0)){d.push(l({polylineFrom:e.slice(0,h+1),polylineTo:t.slice(0,v+1),toOppositeScale:v===0?s:u}))}if(o>0){var p=n.indexOf(i[o-1]);var g=r.indexOf(i[o-1]);if(h-p>1||v-g>1){d.push(c({polylineFrom:e.slice(p,h+1),polylineTo:t.slice(g,v+1)}))}}d.push(f({pointFrom:e[h],pointTo:t[v]}));if(o===i.length-1&&(e.length-h-1>0||t.length-v-1>0)){d.push(l({polylineFrom:e.slice(h),polylineTo:t.slice(v),toOppositeScale:t.length-v===1?s:u}))}});if(d.length===0&&(t.length>0&&i.length===0||e.length>0&&i.length===0)){d.push(h({polylineFrom:e.slice(0),polylineTo:t.slice(0)}))}return function(e){var t=[];d.forEach(function(n){var r=n(e);v(t,r)});return t}}function u(e,t){for(var n=2;n<e.length-1;n+=3){e[n-1].isCubicControl=true;e[n].isCubicControl=true}for(n=2;n<t.length-1;n+=3){t[n-1].isCubicControl=true;t[n].isCubicControl=true}e=e.filter(function(e){return!e.isInterpolated});var r,i;for(n=e.length-2;n>=0;n--){i=e[n+1];r=e[n];if(!r.isCubicControl&&!i.isCubicControl){e.splice(n+1,0,a.getBezierPoint(1/3,i,r),a.getBezierPoint(2/3,i,r));e[n+1].isCubicControl=true;e[n+2].isCubicControl=true}}var o=e.filter(function(e,t){return t%3===0});var s=t.filter(function(e,t){return t%3===0});var u=o.map(function(e){return e.id});var p=s.map(function(e){return e.id});var g=u.reduce(function(t,n){return t[n]=e.findIndex(function(e){return e.id===n}),t},{});var m=p.reduce(function(e,n){return e[n]=t.findIndex(function(e){return e.id===n}),e},{});var y=u.filter(function(e){return p.indexOf(e)>=0});var b=o.filter(function(e){return!e.positionIsBeingChanged});var _=s.filter(function(e){return!e.positionIsBeingChanged});var w=x(b,_);var T=x(_,b);var C=[];y.forEach(function(n,r){var i=g[n];var a=m[n];if(r===0&&(i>0||a>0)){C.push(l({polylineFrom:e.slice(0,i+1),polylineTo:t.slice(0,a+1),toOppositeScale:a===0?w:T,isCubic:true}))}if(r>0){var o=g[y[r-1]];var s=m[y[r-1]];if(i-o>3||a-s>3){C.push(c({polylineFrom:e.slice(o,i+1),polylineTo:t.slice(s,a+1),isCubic:true}))}else{C.push(d({polylineFrom:e.slice(o,i+1),polylineTo:t.slice(s,a+1)}))}}C.push(f({pointFrom:e[i],pointTo:t[a]}));if(r===y.length-1&&(e.length-i-1>0||t.length-a-1>0)){C.push(l({polylineFrom:e.slice(i),polylineTo:t.slice(a),toOppositeScale:t.length-a===1?w:T,isCubic:true}))}});if(C.length===0&&(t.length>0&&y.length===0||e.length>0&&y.length===0)){C.push(h({polylineFrom:e.slice(0),polylineTo:t.slice(0),isCubic:true}))}return function(e){var t=[];C.forEach(function(n){var r=n(e);v(t,r)});return t}}function l(e){var t=e.polylineFrom,n=e.polylineTo,r=e.isCubic,i=e.toOppositeScale;var a=t.length>n.length?t:n;var o=n.length===1;var s=t[0].id!==n[0].id;var u=Boolean(s^o);return function(e){var t=(r?b:y)({t:e,polyline:a,decreasing:o,rightToLeft:u});if(o===u){t.shift()}else{t.pop()}var n=t.map(i);var s=m(n,t,o?1-e:e);s.forEach(function(e){return e.positionIsBeingChanged=true});return s}}function c(e){var t=e.polylineFrom,n=e.polylineTo,r=e.isCubic;var i=t.length;var a=n.length;if(a!==i){var o=a<i;var s=o?n:t;var u=o?t:n;var l=(r?w:_)({smallerPolyline:s,biggerPolyline:u,decreasing:o});var c=u.slice(1,u.length-1);var f=l.slice(1,l.length-1);return function(e){var t=m(f,c,o?1-e:e);t.forEach(function(e){return e.positionIsBeingChanged=true});return t}}else{var d=t.slice(1,t.length-1);var h=n.slice(1,n.length-1);return function(e){var t=m(d,h,e);t.forEach(function(e){return e.positionIsBeingChanged=true});return t}}}function f(e){var t=e.pointFrom,n=e.pointTo;return function(e){return[g(t,n,e)]}}function d(e){var t=e.polylineFrom,n=e.polylineTo;return function(e){return m(t.slice(1,3),n.slice(1,3),e)}}function h(e){var t=e.polylineFrom,n=e.polylineTo,r=e.isCubic;var i=n.length===0;var a=i;var o=i?t:n;return function(e){var t=(r?b:y)({t:e,polyline:o,decreasing:i,rightToLeft:a});t.forEach(function(e,t){if(t>0){e.positionIsBeingChanged=true}});return t}}function v(e,t){return Array.prototype.push.apply(e,t)}function p(e,t,n){if(t===undefined){return e}if(typeof t==="number"){return e+n*(t-e)}return t}function g(e,t,n){if(e===t){return t}var r={};var i=Object.keys(e);i.forEach(function(i){return r[i]=p(e[i],t[i],n)});if(t.id!==undefined){r.id=t.id}return r}function m(e,t,n){var r=e.map(function(e,r){return g(e,t[r],n)});return r}function y(e){var t=e.t,n=e.polyline,r=e.decreasing,a=e.rightToLeft;var o=Boolean(r)!==Boolean(a);var s=function e(t,n){var r=0;if(t>0){var a=[0];var o=0;for(var s=1,u,l,c,f,d;s<n.length;s++){c=n[s-1].x;f=n[s-1].y;u=n[s].x;l=n[s].y;d=Math.sqrt((u-c)*(u-c)+(l-f)*(l-f));o+=d;a.push(o)}var h=t*o;for(s=1;s<a.length;s++){if(h<=a[s]){r=Math.min(1,(s-1+(h-a[s-1])/(a[s]-a[s-1]))/(n.length-1));break}}}var p=Math.floor((n.length-1)*r)+1;var m=n.length-p;var y=p;var b=n.slice(0,p);if(r<1){var _=r*(n.length-1)%1;var w=g(n[p-1],n[p],_);v(b,i.utils.range(m).map(function(e){return Object.assign({},w,{id:n[y+e].id,isInterpolated:true})}))}return b}(r?1-t:t,o?n.slice(0).reverse():n);if(o){s.reverse()}return s}function b(e){var t=e.t,n=e.polyline,r=e.decreasing,a=e.rightToLeft;var o=Boolean(r)!==Boolean(a);var s=function e(t,n){var r=(n.length-1)/3+1;var a=0;if(t>0){var o=[0];var s=0;for(var u=1,l,c,f,d,h,p,g,m,y;u<r;u++){f=n[u*3-3].x;d=n[u*3-3].y;h=n[u*3-2].x;p=n[u*3-2].y;g=n[u*3-1].x;m=n[u*3-1].y;l=n[u*3].x;c=n[u*3].y;y=(T(f,d,h,p)+T(h,p,g,m)+T(g,m,l,c)+T(l,c,f,d))/2;s+=y;o.push(s)}var b=t*s;for(u=1;u<o.length;u++){if(b<=o[u]){a=Math.min(1,(u-1+(b-o[u-1])/(o[u]-o[u-1]))/(r-1));break}}}var _=Math.floor((r-1)*a)+1;var w=r-_;var x=_*3;var k=n.slice(0,(_-1)*3+1);if(a<1){var S=a*(r-1)%1;var E=C(S,n.slice((_-1)*3,_*3+1));var P=E.slice(1,4);P.forEach(function(e){return e.isInterpolated=true});P[2].id=n[x].id;v(k,P);i.utils.range(1,w).forEach(function(e){v(k,[{x:P[2].x,y:P[2].y,isCubicControl:true,isInterpolated:true},{x:P[2].x,y:P[2].y,isCubicControl:true,isInterpolated:true},Object.assign({},P[2],{id:n[x+e*3].id,isInterpolated:true})])})}return k}(r?1-t:t,o?n.slice(0).reverse():n);if(o){s.reverse()}return s}function _(e){var t=e.smallerPolyline,n=e.biggerPolyline,r=e.decreasing;var a=t.length-1;var o=n.length-1;var s=Math.floor(o/a)+1;var u=o%a;var l=i.utils.range(a).map(function(e){return s+Number(e<u)});var c=[t[0]];var f=1;l.forEach(function(e){i.utils.range(1,e).forEach(function(i){var a;if(i===e-1){a=Object.assign({},t[f]);if(!r){a.id=n[c.length].id}}else{a=g(t[f-1],t[f],i/(e-1));a.id=n[c.length].id;if(r){a.isInterpolated=true}}c.push(a)});f++});return c}function w(e){var t=e.smallerPolyline,n=e.biggerPolyline,r=e.decreasing;var a=(t.length-1)/3;var o=(n.length-1)/3;var s=Math.floor(o/a)+1;var u=o%a;var l=i.utils.range(a).map(function(e){return s+Number(e<u)});var c=[t[0]];var f=3;l.forEach(function(e){if(e>2){var a=k(i.utils.range(1,e-1).map(function(t){return t/(e-1)}),t.slice(f-3,f+1));i.utils.range(e-2).forEach(function(e){return a[(e+1)*3].id=n[c.length-1+e*3].id});if(r){a.forEach(function(e,t){if(t>0&&t<a.length-1){e.isInterpolated=true}})}v(c,a.slice(1))}else{var o=Object.assign({},t[f-2]);var s=Object.assign({},t[f-1]);var u=Object.assign({},t[f]);if(!r){u.id=n[c.length+2].id}c.push(o,s,u)}f+=3});return c}function x(e,t){var n=[];var r=[];var i,a,o,s,u=0;var l=e.length;var c=t.length;for(i=0;i<l;i++){o=e[i];for(a=u;a<c;a++){s=t[a];if(o.id===s.id){u=a+1;n.push(o);r.push(s);break}}}if(n.length<1||r.length<1){return function(e){return e}}var f=Object.keys(n[0]).filter(function(e){return typeof n[0][e]==="number"}).filter(function(e){return e!=="id"});var d={};var h=function e(t,n,r,i){return function(e){return i+(e-n)*(i-r)/(n-t)}};var v=function e(t,n){return function(e){return e-t+n}};f.forEach(function(e){var t=n[0][e];var i=r[0][e];for(var a=n.length-1,o,s;a>0;a--){o=n[a][e];if(o!==t){s=r[a][e];d[e]=h(t,o,i,s);return}}d[e]=v(t,i)});return function(e){var t=Object.assign({},e);f.forEach(function(n){t[n]=d[n](e[n])});return t}}function T(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}function C(e,t){var n=r(t,4),i=n[0],o=n[1],s=n[2],u=n[3];var l=a.splitCubicSegment(e,i,o,s,u);[l[1],l[2],l[4],l[5]].forEach(function(e){return e.isCubicControl=true});Object.keys(u).forEach(function(t){if(t!=="x"&&t!=="y"&&t!=="id"){l[3][t]=p(i[t],u[t],e)}});return l}function k(e,t){var n=[t[0]];for(var r=0,i,a;r<e.length;r++){i=r===0?e[0]:e[r]/(1-e[r-1]);a=C(i,t);v(n,a.slice(1,4));t=a.slice(3)}v(n,t.slice(1));return n}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.bezier=r;t.getBezierPoint=i;t.splitCubicSegment=a;function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function r(e){if((arguments.length<=1?0:arguments.length-1)===2){return(arguments.length<=1?undefined:arguments[1])*(1-e)+(arguments.length<=2?undefined:arguments[2])*e}if((arguments.length<=1?0:arguments.length-1)===3){return(arguments.length<=1?undefined:arguments[1])*(1-e)*(1-e)+2*(arguments.length<=2?undefined:arguments[2])*(1-e)*e+(arguments.length<=3?undefined:arguments[3])*e*e}return(arguments.length<=1?undefined:arguments[1])*(1-e)*(1-e)*(1-e)+3*(arguments.length<=2?undefined:arguments[2])*(1-e)*(1-e)*e+3*(arguments.length<=3?undefined:arguments[3])*(1-e)*e*e+(arguments.length<=4?undefined:arguments[4])*e*e*e}function i(e){for(var t=arguments.length,i=Array(t>1?t-1:0),a=1;a<t;a++){i[a-1]=arguments[a]}var o=i.map(function(e){return e.x});var s=i.map(function(e){return e.y});o.unshift(e);s.unshift(e);return{x:r.apply(undefined,n(o)),y:r.apply(undefined,n(s))}}function a(e,t,n,r,a){var o=i(e,t,n);var s=i(e,t,n,r);var u=i(e,n,r,a);var l=i(e,r,a);var c=i(e,s,u);return[t,o,s,c,u,l,a]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getLineInterpolator=s;t.getInterpolatorSplineType=u;var r=n(14);var i=n(15);var a={linear:function e(t){return t},step:i.getStepLine,"step-before":i.getStepBeforeLine,"step-after":i.getStepAfterLine};var o={smooth:r.getCurve,"smooth-keep-extremum":r.getCurveKeepingExtremums};function s(e){return a[e]||o[e]}function u(e){if(o[e]!==undefined){return"cubic"}return"polyline"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getCurve=i;t.getCurveKeepingExtremums=a;var r=n(12);function i(e){return o(e,false)}function a(e){return o(e,true)}function o(e,t){if(e.length<2){return e.slice(0)}if(e.length===2){return[e[0],{x:s(e[0].x,e[1].x,1/3),y:s(e[0].y,e[1].y,1/3)},{x:s(e[0].x,e[1].x,2/3),y:s(e[0].y,e[1].y,2/3)},e[1]]}var n=new Array((e.length-1)*3+1);var i,a,o,u,l,c,f,d,h,v,p,g,m,y;for(var b=0;b<e.length;b++){n[b*3]=e[b];if(b>0){n[b*3-2]=r.getBezierPoint(1/3,e[b-1],e[b]);n[b*3-1]=r.getBezierPoint(2/3,e[b-1],e[b])}}var _=n.slice(0);for(var w=0,x;w<3;w++){for(b=6;b<_.length;b+=3){i=_[b-5];a=_[b-3];o=_[b-1];if((a.x-i.x)*(o.x-a.x)*1e12<1){u=s(i.x,a.x,.5);c=s(a.x,o.x,.5);l=s(i.y,a.y,.5);f=s(a.y,o.y,.5)}else{v=(a.x-i.x)/(o.x-i.x);d=(a.x-i.x*(1-v)*(1-v)-o.x*v*v)/(2*(1-v)*v);h=(a.y-i.y*(1-v)*(1-v)-o.y*v*v)/(2*(1-v)*v);u=s(i.x,d,v);c=s(d,o.x,v);l=s(i.y,h,v);f=s(h,o.y,v);if(t){g=a.x-u;m=c-a.x;p=(f-a.y)/m;if((a.y-i.y)*(o.y-a.y)<=0){p=0}else{if(a.y>i.y===f>o.y){y=(o.y-a.y)/(f-a.y);m=s(m*y,m,1/(1+Math.abs(y)));p=(o.y-a.y)/m}if(a.y>i.y===l<i.y){y=(a.y-i.y)/(a.y-l);g=s(g*y,g,1/(1+Math.abs(y)));p=(a.y-i.y)/g}}u=a.x-g;c=a.x+m;l=a.y-p*g;f=a.y+p*m}}n[b-4]={x:u,y:l};n[b-2]={x:c,y:f}}n[1]={x:s(n[0].x,n[3].x,1/3),y:s(n[0].y,s(n[3].y,n[2].y,3/2),2/3)};x=n.length-1;n[x-1]={x:s(n[x].x,n[x-3].x,1/3),y:s(n[x].y,s(n[x-3].y,n[x-2].y,3/2),2/3)};_=n.slice(0)}return _}function s(e,t,n){return e+n*(t-e)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getStepLine=n;t.getStepBeforeLine=r;t.getStepAfterLine=i;function n(e){var t=[];var n=e[0].id!==undefined;var r=e[0].size!==undefined;for(var i=1,a,o,s,u;i<e.length;i++){a=e[i-1];o=e[i];s={x:(a.x+o.x)/2,y:a.y};u={x:(a.x+o.x)/2,y:o.y};if(n){s.id=a.id+"-"+o.id+"-1";u.id=a.id+"-"+o.id+"-2"}if(r){s.size=a.size;u.size=o.size}if(i===1){t.push(a)}t.push(s,u,o)}return t}function r(e){var t=[];var n=e[0].id!==undefined;var r=e[0].size!==undefined;for(var i=1,a,o,s;i<e.length;i++){a=e[i-1];o=e[i];s={x:a.x,y:o.y};if(n){s.id=a.id+"-"+o.id}if(r){s.size=o.size}if(i===1){t.push(a)}t.push(s,o)}return t}function i(e){var t=[];var n=e[0].id!==undefined;var r=e[0].size!==undefined;for(var i=1,a,o,s;i<e.length;i++){a=e[i-1];o=e[i];s={x:o.x,y:a.y};if(n){s.id=a.id+"-"+o.id}if(r){s.size=a.size}if(i===1){t.push(a)}t.push(s,o)}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GPL=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(6);var a=n(3);var o=n(17);var s=n(19);function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var d=function e(t){return a.utils.isDate(t)?t.getTime():t};var h=function e(t){var n=this;Object.keys(t).forEach(function(e){return n[e]=t[e]})};var v=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return Object.assign(new h(t),n)};var p=function e(t,n,r){return t.map(function(e){return typeof e==="string"?r.get(e):e}).filter(function(e){return e}).reduce(function(e,t){return v(e,t(e,{}))},n)};var g=t.GPL=function(e){f(t,e);function t(e,n,r,i){l(this,t);var o=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.utils.defaults(e.scales,{size_null:{type:"size",source:"?"},split_null:{type:"value",source:"?"},label_null:{type:"value",source:"?"},color_null:{type:"color",source:"?"},identity_null:{type:"identity",source:"?"},"size:default":{type:"size",source:"?"},"color:default":{type:"color",source:"?"},"split:default":{type:"value",source:"?"},"label:default":{type:"value",source:"?"},"identity:default":{type:"identity",source:"?"}});e.settings=e.settings||{};o.config=e;o.sources=e.sources;o.scales=e.scales;o.unitSet=r;o.grammarRules=i;o.scalesHub=n;o.transformations=Object.assign(e.transformations||{},{where:function e(t,n){var r=Object.keys(n||{}).map(function(e){return function(t){return d(t[e])===n[e]}});return t.filter(function(e){return r.every(function(t){return t(e)})})}});return o}r(t,[{key:"unfoldStructure",value:function e(){this.root=this._expandUnitsStructure(this.config.unit);return this.config}},{key:"getDrawScenarioQueue",value:function e(t){var n=this;var r=this.grammarRules;var i=this._flattenDrawScenario(t,function(e,t,i){var a=t.expression.inherit===false?null:i;var o=n._createFrameScalesFactoryMethod(a);var s=n.unitSet.create(t.type,Object.assign({},t,{options:e.allocateRect(i.key)}));var u=new h(s.defineGrammarModel(o));var l=p(s.getGrammarRules(),u,r);p(s.getAdjustScalesRules(),l,r);s.node().screenModel=s.createScreenModel(l);return s});var a=function e(){Object.keys(n.scales).forEach(function(e){return n.scalesHub.createScaleInfo(n.scales[e]).commit()})};var o=this._flattenDrawScenario(t,function(e,t,i){var a=t.expression.inherit===false?null:i;var o=n._createFrameScalesFactoryMethod(a);var s=n.unitSet.create(t.type,Object.assign({},t,{options:e.allocateRect(i.key)}));var u=new h(s.defineGrammarModel(o));var l=p(s.getGrammarRules(),u,r);s.node().screenModel=s.createScreenModel(l);s.parentUnit=e;s.addInteraction();return s});return i.concat(a).concat(o)}},{key:"_flattenDrawScenario",value:function e(n,r){var i={};var o=[];var s=[n];var u=function e(t){return s.unshift(t)};var l=function e(){return s.shift()};var c=function e(){return s[0]};var f=t.traverseSpec({unit:this.root},function(e,t,n){e.uid=function(){var r=a.utils.generateHash((t?t.uid+"/":"")+JSON.stringify(Object.keys(e).filter(function(t){return typeof e[t]==="string"}).reduce(function(t,n){return t[n]=e[n],t},{}))+("-"+JSON.stringify(n.pipe)));if(r in i){r+="-"+ ++i[r]}else{i[r]=0}return r}();e.guide=a.utils.clone(e.guide);var s=r(c(),e,n);o.push(s);if(e.type.indexOf("COORDS.")===0){u(s)}},function(e){if(e.type.indexOf("COORDS.")===0){l()}},null,this._datify({source:this.root.expression.source,pipe:[]}));f.push(function(){return o});return f}},{key:"_expandUnitsStructure",value:function e(t){var n=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var i=this;if(t.expression.operator===false){t.frames=t.frames.map(function(e){return i._datify(e)})}else{var o=this._parseExpression(t.expression,r,t.guide);t.transformation=t.transformation||[];t.frames=o.exec().map(function(e){var n=o.inherit?r:[];var s=n.concat([{type:"where",args:e}]).concat(t.transformation);return i._datify({key:e,pipe:s,source:o.source,units:t.units?t.units.map(function(e){var t=a.utils.clone(e);t.guide=e.guide;return t}):[]})})}t.frames.forEach(function(e){return e.units.forEach(function(t){return n._expandUnitsStructure(t,e.pipe)})});return t}},{key:"_createFrameScalesFactoryMethod",value:function e(t){var n=this;return function(e,r,i){var a=r||e+":default";return n.scalesHub.createScaleInfo(n.scales[a],t).create(i)}}},{key:"_datify",value:function e(t){return new s.DataFrame(t,this.sources[t.source].data,this.transformations)}},{key:"_parseExpression",value:function e(t,n,r){var i=this;var a=t.operator||"none";var s=t.source;var l=t.inherit!==false;var c=t.params;var f={source:s,pipe:l?n:[]};var d=function e(){return i._datify(f).part()};var h=o.FramesAlgebra[a];if(!h){throw new Error(a+" operator is not supported")}return{source:s,inherit:l,func:h,args:c,exec:function e(){return h.apply(undefined,[d].concat(u(c||[]),[r]))}}}}],[{key:"traverseSpec",value:function e(t,n,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var o=[];var s=function e(t,n,r,i,a){o.push(function(){n(t,i,a)});if(t.frames){t.frames.forEach(function(i){(i.units||[]).map(function(a){return e(a,n,r,t,i)})})}o.push(function(){return r(t,i,a)})};s(t.unit,n,r,i,a);return o}}]);return t}(i.Emitter)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FramesAlgebra=undefined;var r=n(3);var i=n(18);function a(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}var s=function e(t){return r.utils.isDate(t)?t.getTime():t};var u={cross:function e(t,n,i){var a=t();var o=r.utils.unique(a.map(function(e){return e[n]}),s);var u=r.utils.unique(a.map(function(e){return e[i]}),s);var l=o.length===0?[null]:o;var c=u.length===0?[null]:u;return c.reduce(function(e,t){return e.concat(l.map(function(e){var r={};if(n){r[n]=s(e)}if(i){r[i]=s(t)}return r}))},[])},cross_period:function e(t,n,a,u,l,c){var f=t();var d=c?c.utcTime:false;var h=r.utils.unique(f.map(function(e){return e[n]}),s);var v=r.utils.unique(f.map(function(e){return e[a]}),s);var p=h.length===0?[null]:h;var g=v.length===0?[null]:v;if(u){p=i.UnitDomainPeriodGenerator.generate(Math.min.apply(Math,o(h)),Math.max.apply(Math,o(h)),u,{utc:d})}if(l){g=i.UnitDomainPeriodGenerator.generate(Math.min.apply(Math,o(v)),Math.max.apply(Math,o(v)),l,{utc:d})}return g.reduce(function(e,t){return e.concat(p.map(function(e){var r={};if(n){r[n]=s(e)}if(a){r[a]=s(t)}return r}))},[])},groupBy:function e(t,n){var i=t();var o=r.utils.unique(i.map(function(e){return e[n]}),s);return o.map(function(e){return a({},n,s(e))})},none:function e(){return[null]}};t.FramesAlgebra=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n={day:{cast:function e(t){var n=new Date(t);return new Date(n.setHours(0,0,0,0))},next:function e(t){var n=new Date(t);var e=new Date(n.setDate(n.getDate()+1));return this.cast(e)}},week:{cast:function e(t){var n=new Date(t);n=new Date(n.setHours(0,0,0,0));return new Date(n.setDate(n.getDate()-n.getDay()))},next:function e(t){var n=new Date(t);var e=new Date(n.setDate(n.getDate()+7));return this.cast(e)}},month:{cast:function e(t){var n=new Date(t);n=new Date(n.setHours(0,0,0,0));n=new Date(n.setDate(1));return n},next:function e(t){var n=new Date(t);var e=new Date(n.setMonth(n.getMonth()+1));return this.cast(e)}},quarter:{cast:function e(t){var n=new Date(t);n=new Date(n.setHours(0,0,0,0));n=new Date(n.setDate(1));var r=n.getMonth();var i=r-r%3;return new Date(n.setMonth(i))},next:function e(t){var n=new Date(t);var e=new Date(n.setMonth(n.getMonth()+3));return this.cast(e)}},year:{cast:function e(t){var n=new Date(t);n=new Date(n.setHours(0,0,0,0));n=new Date(n.setDate(1));n=new Date(n.setMonth(0));return n},next:function e(t){var n=new Date(t);var e=new Date(n.setFullYear(n.getFullYear()+1));return this.cast(e)}}};var r={day:{cast:function e(t){var n=new Date(t);return new Date(n.setUTCHours(0,0,0,0))},next:function e(t){var n=new Date(t);var e=new Date(n.setUTCDate(n.getUTCDate()+1));return this.cast(e)}},week:{cast:function e(t){var n=new Date(t);n=new Date(n.setUTCHours(0,0,0,0));return new Date(n.setUTCDate(n.getUTCDate()-n.getUTCDay()))},next:function e(t){var n=new Date(t);var e=new Date(n.setUTCDate(n.getUTCDate()+7));return this.cast(e)}},month:{cast:function e(t){var n=new Date(t);n=new Date(n.setUTCHours(0,0,0,0));n=new Date(n.setUTCDate(1));return n},next:function e(t){var n=new Date(t);var e=new Date(n.setUTCMonth(n.getUTCMonth()+1));return this.cast(e)}},quarter:{cast:function e(t){var n=new Date(t);n=new Date(n.setUTCHours(0,0,0,0));n=new Date(n.setUTCDate(1));var r=n.getUTCMonth();var i=r-r%3;return new Date(n.setUTCMonth(i))},next:function e(t){var n=new Date(t);var e=new Date(n.setUTCMonth(n.getUTCMonth()+3));return this.cast(e)}},year:{cast:function e(t){var n=new Date(t);n=new Date(n.setUTCHours(0,0,0,0));n=new Date(n.setUTCDate(1));n=new Date(n.setUTCMonth(0));return n},next:function e(t){var n=new Date(t);var e=new Date(n.setUTCFullYear(n.getUTCFullYear()+1));return this.cast(e)}}};var i={add:function e(t,i){var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{utc:false},o=a.utc;(o?r:n)[t.toLowerCase()]=i;return this},get:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{utc:false},a=i.utc;var o=t||"";return(a?r:n)[o.toLowerCase()]||null},generate:function e(t,n,r){var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{utc:false},o=a.utc;var s=[];var u=i.get(r,{utc:o});if(u){var l=u.cast(new Date(n));var c=u.cast(new Date(t));s.push(c);while((c=u.next(new Date(c)))<=l){s.push(c)}}return s}};t.UnitDomainPeriodGenerator=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DataFrame=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(3);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=t.DataFrame=function(){function e(t,n){var r=t.key,i=t.pipe,o=t.source,s=t.units;var u=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};a(this,e);this.key=r;this.pipe=i||[];this.source=o;this.units=s;this._frame={key:r,source:o,pipe:this.pipe};this._data=n;this._pipeReducer=function(e,t){return u[t.type](e,t.args)}}r(e,[{key:"hash",value:function e(){var t=[this._frame.pipe,this._frame.key,this._frame.source].map(JSON.stringify).join("");return i.utils.generateHash(t)}},{key:"full",value:function e(){return this._data}},{key:"part",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:function(e){return e};return this._frame.pipe.map(t).reduce(this._pipeReducer,this._data)}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Plot=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=function e(t,n,r){if(t===null){t=Function.prototype}var i=Object.getOwnPropertyDescriptor(t,n);if(i===undefined){var a=Object.getPrototypeOf(t);if(a===null){return undefined}else{return e(a,n,r)}}else if("value"in i){return i.value}else{var o=i.get;if(o===undefined){return undefined}return o.call(r)}};var a=n(21);var o=n(6);var s=n(24);var u=n(3);var l=n(1);var c=n(9);var f=n(7);var d=n(25);var h=n(26);var v=n(27);var p=n(28);var g=n(29);var m=n(30);var y=n(31);var b=n(33);var _=n(35);var w=n(36);var x=n(22);var T=n(16);var C=n(2);var k=P(C);var S=n(37);var E=P(S);function P(e){return e&&e.__esModule?e:{default:e}}function O(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function M(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function A(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var N=l.utilsDom.selectOrAppend;var R=l.utilsDom.selectImmediate;var D=t.Plot=function(e){A(t,e);function t(e){O(this,t);var n=M(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n._nodes=[];n._svg=null;n._filtersStore={filters:{},tick:0};n._layout=g.getLayout();var r=0;e.settings=t.setupSettings(u.utils.defaults(e.settings||{},{references:new WeakMap,refCounter:function e(){return++r}}));if(["sources","scales"].filter(function(t){return e.hasOwnProperty(t)}).length===2){n.configGPL=e}else{n.configGPL=new m.SpecConverter(n.setupConfig(e)).convert()}n.configGPL=t.setupPeriodData(n.configGPL);var i=e.plugins||[];n.transformers=[_.SpecTransformApplyRatio,y.SpecTransformAutoLayout];n.onUnitsStructureExpandedTransformers=[w.SpecTransformExtractAxes,b.SpecTransformCalcSize];n._originData=Object.assign({},n.configGPL.sources);n._chartDataModel=function(e){return e};n._liveSpec=n.configGPL;n._plugins=new s.Plugins(i,n);n._reportProgress=null;n._taskRunner=null;n._renderingPhase=null;return n}r(t,[{key:"destroy",value:function e(){this.destroyNodes();k.default.select(this._svg).remove();k.default.select(this._layout.layout).remove();this._cancelRendering();i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"setupChartSourceModel",value:function e(t){this._chartDataModel=t}},{key:"setupConfig",value:function e(n){if(!n.spec||!n.spec.unit){throw new Error("Provide spec for plot")}var r=u.utils.defaults(n,{spec:{},data:[],plugins:[],settings:{}});this._emptyContainer=n.emptyContainer||"";r.spec.dimensions=t.setupMetaInfo(r.spec.dimensions,r.data);var i=r.settings.log;if(r.settings.excludeNull){this.addFilter({tag:"default",src:"/",predicate:p.DataProcessor.excludeNullValues(r.spec.dimensions,function(e){return i([e,"point was excluded, because it has undefined values."],"WARN")})})}return r}},{key:"insertToLeftSidebar",value:function e(t){return l.utilsDom.appendTo(t,this._layout.leftSidebar)}},{key:"insertToRightSidebar",value:function e(t){return l.utilsDom.appendTo(t,this._layout.rightSidebar)}},{key:"insertToFooter",value:function e(t){return l.utilsDom.appendTo(t,this._layout.footer)}},{key:"insertToHeader",value:function e(t){return l.utilsDom.appendTo(t,this._layout.header)}},{key:"addBalloon",value:function e(t){return new a.Tooltip("",t||{})}},{key:"destroyNodes",value:function e(){this._nodes.forEach(function(e){return e.destroy()});this._nodes=[];this._renderedItems=[]}},{key:"onUnitDraw",value:function e(t){var n=this;this._nodes.push(t);this.fire("unitdraw",t);["click","mouseover","mouseout"].forEach(function(e){return t.on(e,function(t,r){n.fire("element"+e,{element:t,data:r.data,event:r.event})})})}},{key:"onUnitsStructureExpanded",value:function e(t){var n=this;this.onUnitsStructureExpandedTransformers.forEach(function(e){return new e(t).transform(n)});this.fire(["units","structure","expanded"].join(""),t)}},{key:"_getClosestElementPerUnit",value:function e(t,n){return this._renderedItems.filter(function(e){return e.getClosestElement}).map(function(e){var r=e.getClosestElement(t,n);var i=e.node();return{unit:i,closest:r}})}},{key:"disablePointerEvents",value:function e(){this._layout.layout.style.pointerEvents="none"}},{key:"enablePointerEvents",value:function e(){this._layout.layout.style.pointerEvents=""}},{key:"_handlePointerEvent",value:function e(t){var n=this._svg.getBoundingClientRect();var r=t.clientX-n.left;var i=t.clientY-n.top;var a=t.type;var o=a==="click";var s=o?"data-click":"data-hover";var u=null;var l=null;var c=this._getClosestElementPerUnit(r,i);var f=c.filter(function(e){return e.closest}).sort(function(e,t){return e.closest.distance===t.closest.distance?e.closest.secondaryDistance-t.closest.secondaryDistance:e.closest.distance-t.closest.distance});if(f.length>0){var d=f.findIndex(function(e){return e.closest.distance!==f[0].closest.distance||e.closest.secondaryDistance!==f[0].closest.secondaryDistance});var h=d<0?f:f.slice(0,d);if(h.length===1){u=h[0].closest.data;l=h[0].closest.node}else{var v=h.reduce(function(e,t){return e+t.closest.x},0)/h.length;var p=h.reduce(function(e,t){return e+t.closest.y},0)/h.length;var g=Math.atan2(p-i,v-r)+Math.PI;var m=h[Math.round((h.length-1)*g/2/Math.PI)].closest;u=m.data;l=m.node}}c.forEach(function(e){return e.unit.fire(s,{event:t,data:u,node:l})})}},{key:"_initPointerEvents",value:function e(){var t=this;if(!this._liveSpec.settings.syncPointerEvents){this._pointerAnimationFrameId=null}var n=k.default.select(this._svg);var r=this._liveSpec.settings.syncPointerEvents?function(e){return function(){return e(k.default.event)}}:function(e){return function(){var n=k.default.event;if(t._pointerAnimationFrameId&&n.type!=="mousemove"){t._cancelPointerAnimationFrame()}if(!t._pointerAnimationFrameId){t._pointerAnimationFrameId=requestAnimationFrame(function(){t._pointerAnimationFrameId=null;e(n)})}}};var i=function e(n){return t._handlePointerEvent(n)};n.on("mousemove",r(i));n.on("click",r(i));n.on("mouseleave",r(function(e){if(window.getComputedStyle(t._svg).pointerEvents!=="none"){t.select(function(){return true}).forEach(function(t){return t.fire("data-hover",{event:e,data:null,node:null})})}}))}},{key:"_cancelPointerAnimationFrame",value:function e(){cancelAnimationFrame(this._pointerAnimationFrameId);this._pointerAnimationFrameId=null}},{key:"_setupTaskRunner",value:function e(t){var n=this;this._resetTaskRunner();this._taskRunner=new E.default({timeout:t.settings.renderingTimeout||Number.MAX_SAFE_INTEGER,syncInterval:t.settings.asyncRendering?t.settings.syncRenderingInterval:Number.MAX_SAFE_INTEGER,callbacks:{done:function e(){n._completeRendering();n._renderingPhase=null},timeout:function e(t,r){n._displayTimeoutWarning({timeout:t,proceed:function e(){n.disablePointerEvents();r.setTimeout(Number.MAX_SAFE_INTEGER);r.run()},cancel:function e(){n._cancelRendering()}});n.enablePointerEvents();n.fire("renderingtimeout")},progress:function e(t){var r={spec:0,draw:1};var i=r[n._renderingPhase]/2+t/2;n._reportProgress(i)},error:t.settings.handleRenderingErrors?function(e){n._cancelRendering();n._displayRenderingError(e);n.fire("renderingerror",e);t.settings.log(["An error occured during chart rendering.",'Set "handleRenderingErrors: false" in chart settings to debug.',"Error message: "+e.message].join(" "),"ERROR")}:null}});return this._taskRunner}},{key:"_resetTaskRunner",value:function e(){if(this._taskRunner&&this._taskRunner.isRunning()){this._taskRunner.stop();this._taskRunner=null}}},{key:"renderTo",value:function e(t,n){this._resetProgressLayout();var r=this._createLiveSpec(t,n);if(!r){this._svg=null;this._layout.content.innerHTML=this._emptyContainer;this.enablePointerEvents();return}var i=this._createGPL(r);var a=this._setupTaskRunner(r);this._scheduleDrawScenario(a,i);this._scheduleDrawing(a,i);a.run()}},{key:"_createLiveSpec",value:function e(t,n){var r=this;this.disablePointerEvents();this._target=t;this._defaultSize=Object.assign({},n);var i=k.default.select(t).node();if(i===null){throw new Error("Target element not found")}if(this._layout.layout.parentNode!==i){i.appendChild(this._layout.layout)}var a=this._layout.content;var o=l.utilsDom.getScrollbarSize(this._layout.contentContainer);this._layout.contentContainer.style.padding="0 "+o.width+"px "+o.height+"px 0";l.utilsDom.setScrollPadding(this._layout.rightSidebarContainer,"vertical");var s=Object.assign({},n)||{};if(!s.width||!s.height){var c=a.parentElement,f=c.scrollLeft,d=c.scrollTop;a.style.display="none";s=u.utils.defaults(s,l.utilsDom.getContainerSize(a.parentNode));a.style.display="";a.parentElement.scrollLeft=f;a.parentElement.scrollTop=d;if(!s.height){s.height=l.utilsDom.getContainerSize(this._layout.layout).height}}this.configGPL.settings.size=s;this._liveSpec=u.utils.clone(u.utils.omit(this.configGPL,"plugins"));this._liveSpec.sources=this.getDataSources();this._liveSpec.settings=this.configGPL.settings;this._experimentalSetupAnimationSpeed(this._liveSpec);if(this.isEmptySources(this._liveSpec.sources)){return null}this._liveSpec=this.transformers.reduce(function(e,t){return new t(e).transform(r)},this._liveSpec);this.destroyNodes();this.fire("specready",this._liveSpec);return this._liveSpec}},{key:"_experimentalSetupAnimationSpeed",value:function e(t){t.settings.initialAnimationSpeed=t.settings.initialAnimationSpeed||t.settings.animationSpeed;var n=t.settings.experimentalShouldAnimate(t)?t.settings.initialAnimationSpeed:0;t.settings.animationSpeed=n;var r=function e(t){t.guide=t.guide||{};t.guide.animationSpeed=n;if(t.units){t.units.forEach(e)}};r(t.unit)}},{key:"_createGPL",value:function e(t){var n=new T.GPL(t,this.getScaleFactory(),d.unitsRegistry,f.GrammarRegistry);var r=n.unfoldStructure();this.onUnitsStructureExpanded(r);return n}},{key:"_scheduleDrawScenario",value:function e(t,n){var r=this;var i=k.default.select(this._layout.content);var a=n.config.settings.size;t.addTask(function(){return r._renderingPhase="spec"});n.getDrawScenarioQueue({allocateRect:function e(){return{slot:function e(t){return i.selectAll(".uid_"+t)},frameId:"root",left:0,top:0,width:a.width,containerWidth:a.width,height:a.height,containerHeight:a.height}}}).forEach(function(e){return t.addTask(e)})}},{key:"_scheduleDrawing",value:function e(t,n){var r=this;var i=n.config.settings.size;t.addTask(function(e){r._renderingPhase="draw";r._renderRoot({scenario:e,newSize:i});r._cancelPointerAnimationFrame();r._scheduleRenderScenario(e)})}},{key:"_resetProgressLayout",value:function e(){this._createProgressBar();this._clearRenderingError();this._clearTimeoutWarning()}},{key:"_renderRoot",value:function e(t){var n=this;var r=t.scenario,i=t.newSize;var a=k.default.select(this._layout.content);var o=r[0].config.uid;var s=N(a,"svg").attr({width:Math.floor(i.width),height:Math.floor(i.height)});if(!s.attr("class")){s.attr("class",x.CSS_PREFIX+"svg")}this._svg=s.node();this._initPointerEvents();this.fire("beforerender",this._svg);var u=s.selectAll("g.frame-root").data([o],function(e){return e});u.enter().append("g").classed(x.CSS_PREFIX+"cell cell frame-root uid_"+o,true);u.call(function(e){e.classed("tau-active",true);c.d3_transition(e,n.configGPL.settings.animationSpeed,"frameRootToggle").attr("opacity",1)});u.exit().call(function(e){e.classed("tau-active",false);c.d3_transition(e,n.configGPL.settings.animationSpeed,"frameRootToggle").attr("opacity",1e-6).remove()})}},{key:"_scheduleRenderScenario",value:function e(t){var n=this;t.forEach(function(e){n._taskRunner.addTask(function(){e.draw();n.onUnitDraw(e.node());n._renderedItems.push(e)})})}},{key:"_completeRendering",value:function e(){l.utilsDom.setScrollPadding(this._layout.contentContainer);this._layout.rightSidebar.style.maxHeight=this._liveSpec.settings.size.height+"px";this.enablePointerEvents();if(this._svg){this.fire("render",this._svg)}l.utilsDom.setScrollPadding(this._layout.rightSidebarContainer,"vertical")}},{key:"_cancelRendering",value:function e(){this.enablePointerEvents();this._resetTaskRunner();this._cancelPointerAnimationFrame()}},{key:"_createProgressBar",value:function e(){var t=k.default.select(this._layout.header);var n=N(t,"div."+x.CSS_PREFIX+"progress");n.select("div."+x.CSS_PREFIX+"progress__value").remove();var r=n.append("div").classed(x.CSS_PREFIX+"progress__value",true).style("width",0);this._reportProgress=function(e){requestAnimationFrame(function(){n.classed(x.CSS_PREFIX+"progress_active",e<1);r.style("width",e*100+"%")})}}},{key:"_displayRenderingError",value:function e(){this._layout.layout.classList.add(x.CSS_PREFIX+"layout_rendering-error")}},{key:"_clearRenderingError",value:function e(){this._layout.layout.classList.remove(x.CSS_PREFIX+"layout_rendering-error")}},{key:"getScaleFactory",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return new v.ScalesFactory(h.scalesRegistry.instance(this._liveSpec.settings),t||this._liveSpec.sources,this._liveSpec.scales)}},{key:"getScaleInfo",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return this.getScaleFactory().createScaleInfoByName(t,n)}},{key:"getSourceFiltersIterator",value:function e(t){var n=this;var r=u.utils.flatten(Object.keys(this._filtersStore.filters).map(function(e){return n._filtersStore.filters[e]})).filter(function(e){return!t(e)}).map(function(e){return e.predicate});return function(e){return r.reduce(function(t,n){return t&&n(e)},true)}}},{key:"getDataSources",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=function e(t){return function(e){return n.excludeFilter&&n.excludeFilter.indexOf(e.tag)!==-1||e.src!==t}};var i=this._chartDataModel(this._originData);return Object.keys(i).filter(function(e){return e!=="?"}).reduce(function(e,n){var a=i[n];var o=t.getSourceFiltersIterator(r(n));e[n]={dims:a.dims,data:a.data.filter(o)};return e},{"?":i["?"]})}},{key:"isEmptySources",value:function e(t){return!Object.keys(t).filter(function(e){return e!=="?"}).filter(function(e){return t[e].data.length>0}).length}},{key:"getChartModelData",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"/";var r=this.getDataSources(t);return r[n].data}},{key:"getDataDims",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"/";return this._originData[t].dims}},{key:"getData",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"/";return this._originData[t].data}},{key:"setData",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"/";this._originData[n].data=t;this.refresh()}},{key:"getSVG",value:function e(){return this._svg}},{key:"addFilter",value:function e(t){t.src=t.src||"/";var n=t.tag;var r=this._filtersStore.filters[n]=this._filtersStore.filters[n]||[];var i=this._filtersStore.tick++;t.id=i;r.push(t);return i}},{key:"removeFilter",value:function e(t){var n=this;Object.keys(this._filtersStore.filters).map(function(e){n._filtersStore.filters[e]=n._filtersStore.filters[e].filter(function(e){return e.id!==t})});return this}},{key:"refresh",value:function e(){if(this._target){this.renderTo(this._target,this._defaultSize)}}},{key:"resize",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.renderTo(this._target,t)}},{key:"select",value:function e(t){return this._nodes.filter(t)}},{key:"traverseSpec",value:function e(t,n){var r=function e(t,n,r,i){n(t,r,i);if(t.frames){t.frames.forEach(function(r){(r.units||[]).map(function(i){return e(i,n,t,r)})})}else{(t.units||[]).map(function(r){return e(r,n,t,null)})}};r(t.unit,n,null,null)}},{key:"getSpec",value:function e(){return this._liveSpec}},{key:"getLayout",value:function e(){return this._layout}},{key:"_displayTimeoutWarning",value:function e(t){var n=this;var r=t.proceed,i=t.cancel,a=t.timeout;var o=200;var s=100;var u=3;var l=1.5;var c=o/2;var f=Math.round(s/u/l);var d=function e(t){return Math.round(s/u/l*t)};this._layout.content.style.height="100%";this._layout.content.insertAdjacentHTML("beforeend",'\n            <div class="'+x.CSS_PREFIX+'rendering-timeout-warning">\n            <svg\n                viewBox="0 0 '+o+" "+s+'">\n                <text\n                    text-anchor="middle"\n                    font-size="'+f+'">\n                    <tspan x="'+c+'" y="'+d(1)+'">Rendering took more than '+Math.round(a)/1e3+'s</tspan>\n                    <tspan x="'+c+'" y="'+d(2)+'">Would you like to continue?</tspan>\n                </text>\n                <text\n                    class="'+x.CSS_PREFIX+'rendering-timeout-continue-btn"\n                    text-anchor="end"\n                    font-size="'+f+'"\n                    cursor="pointer"\n                    text-decoration="underline"\n                    x="'+(c-f/3)+'"\n                    y="'+d(3)+'">\n                    Continue\n                </text>\n                <text\n                    class="'+x.CSS_PREFIX+'rendering-timeout-cancel-btn"\n                    text-anchor="start"\n                    font-size="'+f+'"\n                    cursor="pointer"\n                    text-decoration="underline"\n                    x="'+(c+f/3)+'"\n                    y="'+d(3)+'">\n                    Cancel\n                </text>\n            </svg>\n            </div>\n        ');this._layout.content.querySelector("."+x.CSS_PREFIX+"rendering-timeout-continue-btn").addEventListener("click",function(){n._clearTimeoutWarning();r.call(n)});this._layout.content.querySelector("."+x.CSS_PREFIX+"rendering-timeout-cancel-btn").addEventListener("click",function(){n._clearTimeoutWarning();i.call(n)})}},{key:"_clearTimeoutWarning",value:function e(){var t=R(this._layout.content,"."+x.CSS_PREFIX+"rendering-timeout-warning");if(t){this._layout.content.removeChild(t);this._layout.content.style.height=""}}}],[{key:"setupPeriodData",value:function e(n){var r=t.__api__.tickPeriod;var i=n.settings.log;var a=Object.keys(n.scales).map(function(e){return n.scales[e]});var o=a.filter(function(e){return e.type==="period"}).reduce(function(e,t){var a=r.get(t.period,{utc:n.settings.utcTime});if(a){e.push({source:t.source,dim:t.dim,period:a})}else{i(['Unknown period "'+t.period+'".',"Docs: http://api.taucharts.com/plugins/customticks.html#how-to-add-custom-tick-period"],"WARN");t.period=null}return e},[]);var s=function e(t){return t===null||t===undefined};var u=function e(t,n){t[n.source].data=t[n.source].data.map(function(e){var t=e[n.dim];if(!s(t)){e[n.dim]=n.period.cast(t)}return e});return t};n.sources=o.reduce(u,n.sources);return n}},{key:"setupMetaInfo",value:function e(t,n){var r=t?t:p.DataProcessor.autoDetectDimTypes(n);return p.DataProcessor.autoAssignScales(r)}},{key:"setupSettings",value:function e(n){var r=t.globalSettings;var i=Object.keys(r).reduce(function(e,t){e[t]=typeof r[t]==="function"?r[t]:u.utils.clone(r[t]);return e},{});var a=u.utils.defaults(n||{},i);if(!Array.isArray(a.specEngine)){a.specEngine=[{width:Number.MAX_VALUE,name:a.specEngine}]}return a}}]);return t}(o.Emitter)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Tooltip=undefined;var r=n(22);var i=n(23);i.Tooltip.defaults.baseClass=r.CSS_PREFIX+"tooltip";t.Tooltip=i.Tooltip},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=t.CSS_PREFIX="graphical-report__"},function(e,t,n){var r,i,a;(function n(o,s){{!(i=[],r=s,a=typeof r==="function"?r.apply(t,i):r,a!==undefined&&(e.exports=a))}})(this,function(){return function(e){var t={};function n(r){if(t[r]){return t[r].exports}var i=t[r]={exports:{},id:r,loaded:false};e[r].call(i.exports,i,i.exports,n);i.loaded=true;return i.exports}n.m=e;n.c=t;n.p="";return n(0)}([function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function e(t){return{add:function e(n){t.classList.add(n)},remove:function e(n){t.classList.remove(n)}}};var r=function e(t,n){return t.indexOf(n)};var i=window;var a=i.document;var o=a.documentElement;var s=["top","bottom"];function u(e,t){for(var n in t){e[n]=t[n]}return e}function l(e){return e&&e.setInterval!=null}function c(e){var t=i.pageYOffset||o.scrollTop;var n=i.pageXOffset||o.scrollLeft;var r={left:0,right:0,top:0,bottom:0,width:0,height:0};if(l(e)){r.width=i.innerWidth||o.clientWidth;r.height=i.innerHeight||o.clientHeight}else if(o.contains(e)&&e.getBoundingClientRect!=null){u(r,e.getBoundingClientRect());r.width=r.right-r.left;r.height=r.bottom-r.top}else{return r}r.top=r.top+t-o.clientTop;r.left=r.left+n-o.clientLeft;r.right=r.left+r.width;r.bottom=r.top+r.height;return r}function f(e){return 0|Math.round(String(e).replace(/[^\-0-9.]/g,""))}var d=i.getComputedStyle;function h(e){var t=String(d(e,h.propName));var n=t.match(/([0-9.]+)([ms]{1,2})/);if(n){t=Number(n[1]);if(n[2]==="s"){t*=1e3}}return 0|t}h.propName=function(){var e=a.createElement("div");var t=["transitionDuration","webkitTransitionDuration"];var n="1s";for(var r=0;r<t.length;r++){e.style[t[r]]=n;if(e.style[t[r]]===n){return t[r]}}}();var v=Object.create;function p(e,t){if(!(this instanceof p)){return new p(e,t)}this.hidden=1;this.options=u(v(p.defaults),t);this._createElement();if(e){this.content(e)}}p.prototype._createElement=function(){this.element=a.createElement("div");this.classes=n(this.element);this.classes.add(this.options.baseClass);var e;for(var t=0;t<p.classTypes.length;t++){e=p.classTypes[t]+"Class";if(this.options[e]){this.classes.add(this.options[e])}}};p.prototype.type=function(e){return this.changeClassType("type",e)};p.prototype.effect=function(e){return this.changeClassType("effect",e)};p.prototype.changeClassType=function(e,t){e+="Class";if(this.options[e]){this.classes.remove(this.options[e])}this.options[e]=t;if(t){this.classes.add(t)}return this};p.prototype.updateSize=function(){if(this.hidden){this.element.style.visibility="hidden";a.body.appendChild(this.element)}this.width=this.element.offsetWidth;this.height=this.element.offsetHeight;if(this.spacing==null){this.spacing=this.options.spacing!=null?this.options.spacing:f(d(this.element,"top"))}if(this.hidden){a.body.removeChild(this.element);this.element.style.visibility=""}else{this.position()}return this};p.prototype.content=function(e){if(typeof e==="object"){this.element.innerHTML="";this.element.appendChild(e)}else{this.element.innerHTML=e}this.updateSize();return this};p.prototype.place=function(e){this.options.place=e;if(!this.hidden){this.position()}return this};p.prototype.attach=function(e){this.attachedTo=e;if(!this.hidden){this.position()}return this};p.prototype.detach=function(){this.hide();this.attachedTo=null;return this};p.prototype._pickPlace=function(e){if(!this.options.auto){return this.options.place}var t=c(i);var n=this.options.place.split("-");var a=this.spacing;if(r(s,n[0])!==-1){if(e.top-this.height-a<=t.top){n[0]="bottom"}else if(e.bottom+this.height+a>=t.bottom){n[0]="top"}switch(n[1]){case"left":if(e.right-this.width<=t.left){n[1]="right"}break;case"right":if(e.left+this.width>=t.right){n[1]="left"}break;default:if(e.left+e.width/2+this.width/2>=t.right){n[1]="left"}else if(e.right-e.width/2-this.width/2<=t.left){n[1]="right"}}}else{if(e.left-this.width-a<=t.left){n[0]="right"}else if(e.right+this.width+a>=t.right){n[0]="left"}switch(n[1]){case"top":if(e.bottom-this.height<=t.top){n[1]="bottom"}break;case"bottom":if(e.top+this.height>=t.bottom){n[1]="top"}break;default:if(e.top+e.height/2+this.height/2>=t.bottom){n[1]="top"}else if(e.bottom-e.height/2-this.height/2<=t.top){n[1]="bottom"}}}return n.join("-")};p.prototype.position=function(e,t){if(this.attachedTo){e=this.attachedTo}if(e==null&&this._p){e=this._p[0];t=this._p[1]}else{this._p=arguments}var n=typeof e==="number"?{left:0|e,right:0|e,top:0|t,bottom:0|t,width:0,height:0}:c(e);var r=this.spacing;var i=this._pickPlace(n);if(i!==this.curPlace){if(this.curPlace){this.classes.remove(this.curPlace)}this.classes.add(i);this.curPlace=i}var a,o;switch(this.curPlace){case"top":a=n.top-this.height-r;o=n.left+n.width/2-this.width/2;break;case"top-left":a=n.top-this.height-r;o=n.right-this.width;break;case"top-right":a=n.top-this.height-r;o=n.left;break;case"bottom":a=n.bottom+r;o=n.left+n.width/2-this.width/2;break;case"bottom-left":a=n.bottom+r;o=n.right-this.width;break;case"bottom-right":a=n.bottom+r;o=n.left;break;case"left":a=n.top+n.height/2-this.height/2;o=n.left-this.width-r;break;case"left-top":a=n.bottom-this.height;o=n.left-this.width-r;break;case"left-bottom":a=n.top;o=n.left-this.width-r;break;case"right":a=n.top+n.height/2-this.height/2;o=n.right+r;break;case"right-top":a=n.bottom-this.height;o=n.right+r;break;case"right-bottom":a=n.top;o=n.right+r;break}this.element.style.top=Math.round(a)+"px";this.element.style.left=Math.round(o)+"px";return this};p.prototype.show=function(e,t){e=this.attachedTo?this.attachedTo:e;clearTimeout(this.aIndex);if(e!=null){this.position(e,t)}if(this.hidden){this.hidden=0;a.body.appendChild(this.element)}if(this.attachedTo){this._aware()}if(this.options.inClass){this.classes.add(this.options.inClass)}return this};p.prototype.getElement=function(){return this.element};p.prototype.hide=function(){if(this.hidden){return}var e=this;var t=0;if(this.options.inClass){this.classes.remove(this.options.inClass);if(this.options.effectClass){t=h(this.element)}}if(this.attachedTo){this._unaware()}clearTimeout(this.aIndex);this.aIndex=setTimeout(function(){e.aIndex=0;a.body.removeChild(e.element);e.hidden=1},t);return this};p.prototype.toggle=function(e,t){return this[this.hidden?"show":"hide"](e,t)};p.prototype.destroy=function(){clearTimeout(this.aIndex);this._unaware();if(!this.hidden){a.body.removeChild(this.element)}this.element=this.options=null};p.prototype._aware=function(){var e=r(p.winAware,this);if(e===-1){p.winAware.push(this)}};p.prototype._unaware=function(){var e=r(p.winAware,this);if(e!==-1){p.winAware.splice(e,1)}};p.reposition=function(){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return setTimeout(e,17)};var t;function n(){if(t||!p.winAware.length){return}t=e(r)}function r(){t=0;var e;for(var n=0,r=p.winAware.length;n<r;n++){e=p.winAware[n];e.position()}}return n}();p.winAware=[];window.addEventListener("resize",p.reposition);window.addEventListener("scroll",p.reposition);p.classTypes=["type","effect"];p.defaults={baseClass:"tooltip",typeClass:null,effectClass:null,inClass:"in",place:"top",spacing:null,auto:0};t.Tooltip=p}])})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(t,n){r(this,e);this.chart=n;this._plugins=t.map(this.initPlugin,this)}n(e,[{key:"initPlugin",value:function e(t){var n=this;if(t.init){t.init(this.chart)}var r=function e(){};this.chart.on("destroy",t.destroy&&t.destroy.bind(t)||r);Object.keys(t).forEach(function(e){if(e.indexOf("on")===0){var r=e.substr(2);n.chart.on(r.toLowerCase(),t[e].bind(t))}})}}]);return e}();t.Plugins=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.unitsRegistry=undefined;var r=n(8);var i={};var a={};var o={reg:function e(t,n,r){if(r){a[t]=r;i[t]=function(e,t){this.___tauchartsseed___=new t(this.init(e))};i[t].prototype=Object.assign({init:function e(t){return t},defineGrammarModel:function e(t){return this.node().defineGrammarModel(t)},getGrammarRules:function e(t){return this.node().getGrammarRules(t)},getAdjustScalesRules:function e(t){return this.node().getAdjustScalesRules(t)},createScreenModel:function e(t){return this.node().createScreenModel(t)},addInteraction:function e(){this.node().addInteraction()},node:function e(){return this.___tauchartsseed___},draw:function e(){this.node().draw()}},n)}else{i[t]=n}return this},get:function e(t){if(!i.hasOwnProperty(t)){throw new r.TauChartError("Unknown unit type: "+t,r.errorCodes.UNKNOWN_UNIT_TYPE)}return i[t]},create:function e(t,n){var r=this.get(t);var i;if(a[t]){var o=this.get(a[t]);i=new r(n,o)}else{i=new r(n)}return i}};t.unitsRegistry=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i={};var a={};var o=t.scalesRegistry=function(){function e(){r(this,e)}n(e,null,[{key:"reg",value:function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(e){return e};i[t]=n;a[t]=r;return this}},{key:"get",value:function e(t){return i[t]}},{key:"instance",value:function t(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return{create:function t(r,i,o){var s=e.get(r);var u=a[r];return new s(i,u(o,n))}}}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ScalesFactory=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(19);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=t.ScalesFactory=function(){function e(t,n,r){a(this,e);this.registry=t;this.sources=n;this.scales=r}r(e,[{key:"createScaleInfo",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=t.dim;var a=t.source;var o=(this.sources[a].dims[r]||{}).type;var s=this.sources[a].data;var u=n||new i.DataFrame({source:a},s);t.dimType=o;return this.registry.create(t.type,u,t)}},{key:"createScaleInfoByName",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return this.createScaleInfo(this.scales[t],n)}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DataProcessor=undefined;var r=n(3);var i={isYFunctionOfX:function e(t,n,i){var a=true;var o=null;try{t.reduce(function(e,t){var a=function e(n,i){var a=t[i];var o=r.utils.isObject(a)?JSON.stringify(a):a;n.push(o);return n};var s=n.reduce(a,[]).join("/");var u=i.reduce(a,[]).join("/");if(!e.hasOwnProperty(s)){e[s]=u}else{var l=e[s];if(l!==u){o={type:"RelationIsNotAFunction",keyX:n.join("/"),keyY:i.join("/"),valX:s,errY:[l,u]};throw new Error("RelationIsNotAFunction")}}return e},{})}catch(e){if(e.message!=="RelationIsNotAFunction"){throw e}a=false}return{result:a,error:o}},excludeNullValues:function e(t,n){var r=Object.keys(t).reduce(function(e,n){var r=t[n];if((!r.hasOwnProperty("hasNull")||r.hasNull)&&(r.type==="measure"||r.scale==="period")){e.push(n)}return e},[]);return function(e){var t=!r.some(function(t){return!(t in e)||e[t]===null});if(!t){n(e)}return t}},autoAssignScales:function e(t){var n="category";var r={category:"ordinal",order:"ordinal",measure:"linear"};var i={};Object.keys(t).forEach(function(e){var a=t[e];var o=(a.type||n).toLowerCase();i[e]=Object.assign({},a,{type:o,scale:a.scale||r[o],value:a.value})});return i},autoDetectDimTypes:function e(t){var n={type:"category",scale:"ordinal"};var i=function e(t,n){var i=n;if(r.utils.isDate(t)){i.type="measure";i.scale="time"}else if(r.utils.isObject(t)){i.type="order";i.scale="ordinal"}else if(Number.isFinite(t)){i.type="measure";i.scale="linear"}return i};var a=function e(t,a){Object.keys(a).forEach(function(e){var o=a.hasOwnProperty(e)?a[e]:null;t[e]=t[e]||{type:null,hasNull:false};if(o===null){t[e].hasNull=true}else{var s=i(o,r.utils.clone(n));var u=s.type;var l=s.scale;var c=t[e].type!==null&&t[e].type!==u;t[e].type=c?n.type:u;t[e].scale=c?n.scale:l}});return t};return t.reduce(a,{})},sortByDim:function e(t,n,r){var i=t;var a=["period","time"].indexOf(r.scale)>=0?function(e){return new Date(e)}:function(e){return e};if(r.type==="measure"||r.scale==="period"){i=t.map(function(e){return e}).sort(function(e,t){return a(e[n])-a(t[n])})}else if(r.order){var o=r.order.reduce(function(e,t,n){e[t]=n;return e},{});var s=r.order.length;var u="(___"+n+"___)";i=t.map(function(e){var t=o[e[n]];t=t>=0?t:s;e[u]=t;return e}).sort(function(e,t){return e[u]-t[u]}).map(function(e){delete e[u];return e})}return i}};t.DataProcessor=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getLayout=undefined;var r=n(22);var i=function e(t,n){var i="div";var a=document.createElement(i);a.classList.add(r.CSS_PREFIX+t);if(n){n.appendChild(a)}return a};var a=function e(){var t=i("layout");var n=i("layout__header",t);var r=i("layout__container",t);var a=i("layout__sidebar",r);var o=i("layout__content",r);var s=i("layout__content__wrap",o);var u=i("layout__sidebar-right",r);var l=i("layout__sidebar-right__wrap",u);var c=i("layout__footer",t);return{layout:t,header:n,content:s,contentContainer:o,leftSidebar:a,rightSidebar:l,rightSidebarContainer:u,footer:c}};t.getLayout=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SpecConverter=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(3);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=t.SpecConverter=function(){function e(t){a(this,e);this.spec=t;this.dist={sources:{"?":{dims:{},data:[{}]},"/":{dims:{},data:[]}},scales:{x_null:{type:"ordinal",source:"?"},y_null:{type:"ordinal",source:"?"},size_null:{type:"size",source:"?"},color_null:{type:"color",source:"?"},split_null:{type:"value",source:"?"},"pos:default":{type:"ordinal",source:"?"},"size:default":{type:"size",source:"?"},"label:default":{type:"value",source:"?"},"color:default":{type:"color",source:"?"},"split:default":{type:"value",source:"?"}},settings:t.settings}}r(e,[{key:"convert",value:function e(){var t=this.spec;var n=this.dist;this.ruleAssignSourceDims(t,n);this.ruleAssignStructure(t,n);this.ruleAssignSourceData(t,n);this.ruleApplyDefaults(n);return n}},{key:"ruleApplyDefaults",value:function e(t){var n=t.settings||{};var r=function e(t,n,r){n(t,r);(t.units||[]).map(function(r){return e(r,n,t)})};var a=function e(t,r){t.namespace="chart";t.guide=i.utils.defaults(t.guide||{},{animationSpeed:n.animationSpeed||0,utcTime:n.utcTime||false});if(r&&!t.hasOwnProperty("units")){t=i.utils.defaults(t,{x:r.x,y:r.y});var a=i.utils.clone(r.guide)||{};t.guide.x=i.utils.defaults(t.guide.x||{},a.x);t.guide.y=i.utils.defaults(t.guide.y||{},a.y);t.expression.inherit=r.expression.inherit}return t};r(t.unit,a,null)}},{key:"ruleAssignSourceData",value:function e(t,n){var r=t.spec.dimensions||{};var a=n.sources["/"].dims;var o=function e(t,n){var r=t[n];if(i.utils.isObject(r)&&!i.utils.isDate(r)){Object.keys(r).forEach(function(e){return t[n+"."+e]=r[e]})}return t};n.sources["/"].data=t.data.map(function(e){var t=Object.keys(e).reduce(o,e);return Object.keys(a).reduce(function(e,t){if(!e.hasOwnProperty(t)){e[t]=null}if(e[t]!==null&&r[t]&&["period","time"].indexOf(r[t].scale)>=0){e[t]=new Date(e[t])}return e},t)})}},{key:"ruleAssignSourceDims",value:function e(t,n){var r=t.spec.dimensions;n.sources["/"].dims=Object.keys(r).reduce(function(e,t){e[t]={type:r[t].type};return e},{})}},{key:"ruleAssignStructure",value:function e(t,n){var r=this;var a=function e(t){var n=i.utils.clone(i.utils.omit(t,"unit"));r.ruleCreateScales(t,n);n.expression=r.ruleInferExpression(t);if(t.unit){n.units=t.unit.map(e)}return n};var o=a(t.spec.unit);o.expression.inherit=false;n.unit=o}},{key:"ruleCreateScales",value:function e(t,n){var r=this;var i=t.guide||{};["identity","color","size","label","x","y","split"].forEach(function(e){if(t.hasOwnProperty(e)){n[e]=r.scalesPool(e,t[e],i[e]||{})}})}},{key:"ruleInferDim",value:function e(t,n){var r=t;var i=this.spec.spec.dimensions;if(!i.hasOwnProperty(r)){return r}if(n.hasOwnProperty("tickLabel")){r=t+"."+n.tickLabel}else if(i[t].value){r=t+"."+i[t].value}var a=this.dist.sources["/"].dims;if(!a.hasOwnProperty(r)){a[r]={type:a[t].type};delete a[t]}return r}},{key:"scalesPool",value:function e(t,n,r){var i=t+"_"+n;if(this.dist.scales.hasOwnProperty(i)){return i}var a=this.spec.spec.dimensions;var o={};if(t==="color"&&n!==null){o={type:"color",source:"/",dim:this.ruleInferDim(n,r)};if(r.hasOwnProperty("brewer")){o.brewer=r.brewer}if(a[n]&&a[n].hasOwnProperty("order")){o.order=a[n].order}if(r.hasOwnProperty("min")){o.min=r.min}if(r.hasOwnProperty("max")){o.max=r.max}if(r.hasOwnProperty("nice")){o.nice=r.nice}}if(t==="size"&&n!==null){o={type:"size",source:"/",dim:this.ruleInferDim(n,r)};if(r.hasOwnProperty("func")){o.func=r.func}if(r.hasOwnProperty("min")){o.min=r.min}if(r.hasOwnProperty("max")){o.max=r.max}if(r.hasOwnProperty("minSize")){o.minSize=r.minSize}if(r.hasOwnProperty("maxSize")){o.maxSize=r.maxSize}}if(t==="label"&&n!==null){o={type:"value",source:"/",dim:this.ruleInferDim(n,r)}}if(t==="split"&&n!==null){o={type:"value",source:"/",dim:this.ruleInferDim(n,r)}}if(t==="identity"&&n!==null){o={type:"identity",source:"/",dim:this.ruleInferDim(n,r)}}if(a.hasOwnProperty(n)&&(t==="x"||t==="y")){o={type:a[n].scale,source:"/",dim:this.ruleInferDim(n,r)};if(a[n].hasOwnProperty("order")){o.order=a[n].order}if(r.hasOwnProperty("min")){o.min=r.min}if(r.hasOwnProperty("max")){o.max=r.max}if(r.hasOwnProperty("autoScale")){o.autoScale=r.autoScale}else{o.autoScale=true}if(r.hasOwnProperty("nice")){o.nice=r.nice}else{o.nice=o.autoScale}if(r.hasOwnProperty("niceInterval")){o.niceInterval=r.niceInterval}else{o.niceInterval=null}if(r.hasOwnProperty("tickPeriod")){o.period=r.tickPeriod;o.type="period"}o.fitToFrameByDims=r.fitToFrameByDims;o.ratio=r.ratio}this.dist.scales[i]=o;return i}},{key:"getScaleConfig",value:function e(t,n){var r=t+"_"+n;return this.dist.scales[r]}},{key:"ruleInferExpression",value:function e(t){var n={operator:"none",params:[]};var r=t.guide||{};var i=r.x||{};var a=r.y||{};var o=this.getScaleConfig("x",t.x);var s=this.getScaleConfig("y",t.y);if(t.type.indexOf("ELEMENT.")===0){if(t.color){n={operator:"groupBy",params:[this.ruleInferDim(t.color,r.color||{})]}}}else if(t.type==="COORDS.RECT"){if(t.unit.length===1&&t.unit[0].type==="COORDS.RECT"){if(o.period||s.period){n={operator:"cross_period",params:[this.ruleInferDim(t.x,i),this.ruleInferDim(t.y,a),o.period,s.period]}}else{n={operator:"cross",params:[this.ruleInferDim(t.x,i),this.ruleInferDim(t.y,a)]}}}}return Object.assign({inherit:true,source:"/"},n)}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SpecTransformAutoLayout=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(3);var a=n(32);var o=n(2);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var c=function e(t){return t.reduce(function(e,t){return e+t},0)};function f(e,t,n,r){var i=e.hasOwnProperty(n)?e[n]:{};i=i||{};r.forEach(function(e){Object.assign(t.guide[n][e],i[e])})}var d=function e(t,n){var r=n.guide||{};var i={x:["label"],y:["label"],size:["label"],color:["label"],padding:[]};Object.keys(i).forEach(function(e){var n=i[e];f(r,t,e,n)});Object.assign(t.guide,Object.keys(r).reduce(function(e,t){if(!i.hasOwnProperty(t)){e[t]=r[t]}return e},{}));return t};var h=function e(t,n,r){t[n]=i.utils.defaults(t[n]||{},{label:""});t[n].label=i.utils.isObject(t[n].label)?t[n].label:{text:t[n].label};t[n].label=i.utils.defaults(t[n].label,r||{},{padding:32,rotate:0,textAnchor:"middle",cssClass:"label",dock:null});return t[n]};var v=function e(t,n,r){t[n]=i.utils.defaults(t[n],r||{},{padding:0,density:30,rotate:0,tickPeriod:null,tickFormat:null,autoScale:true});t[n].tickFormat=t[n].tickFormat||t[n].tickPeriod;t[n].nice=t[n].hasOwnProperty("nice")?t[n].nice:t[n].autoScale;return t[n]};var p=function e(t){t.options=t.options||{};t.guide=t.guide||{};t.guide.padding=i.utils.defaults(t.guide.padding||{},{l:0,b:0,r:0,t:0});t.guide.x=h(t.guide,"x");t.guide.x=v(t.guide,"x",{cssClass:"x axis",scaleOrient:"bottom",textAnchor:"middle"});t.guide.y=h(t.guide,"y",{rotate:-90});t.guide.y=v(t.guide,"y",{cssClass:"y axis",scaleOrient:"left",textAnchor:"end"});t.guide.size=h(t.guide,"size");t.guide.color=h(t.guide,"color");return t};var g=function e(t,n){t.guide=t.guide||{};t.guide.padding=t.guide.padding||{l:0,t:0,r:0,b:0};if(!t.hasOwnProperty("units")){t=i.utils.defaults(t,n);t.guide=i.utils.defaults(t.guide,i.utils.clone(n.guide));t.guide.x=i.utils.defaults(t.guide.x,i.utils.clone(n.guide.x));t.guide.y=i.utils.defaults(t.guide.y,i.utils.clone(n.guide.y))}return t};var m=function e(t){var n=t.units||[];var r=!t.hasOwnProperty("units");var i=!n.some(function(e){return e.hasOwnProperty("units")});return{type:t.type,isLeaf:r,isLeafParent:!r&&i}};var y=function e(t,n,r,i){if(t.length===0){return{width:0,height:0}}if(n===null){var a=r("TauChart Library");a.width=i*.625;return a}if(t.every(function(e){return typeof e==="number"})){t=s.default.scale.linear().domain(t).ticks()}var o=t.reduce(function(e,t){var r=n(t).toString().length;if(!e.computed||r>e.computed){return{value:t,computed:r}}return e},{}).value;return r(n(o))};var b=function e(t,n){var r=t.dimType;var i=t.scaleType;var a="*";var o=[r,i,a].join(":");var s=[r,i].join(":");return n[o]||n[s]||n[r]||null};var _=function e(t,n,r){return t.hasOwnProperty(n+":"+r)?t[n+":"+r]:t[""+n]};var w=function e(t,n){var r=["day","week","month"];if(r.indexOf(t)>=0){t+="-short"+(n?"-utc":"")}return t};var x=function e(t,n){var r=t.width,a=t.height;var o=Math.abs(i.utils.toRadian(n));return{width:Math.max(Math.cos(o)*r,a),height:Math.max(Math.sin(o)*r,a)}};var T=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"x";var r=i.utils.normalizeAngle(t);var a=n==="x"?[[0,45,"middle"],[45,135,"start"],[135,225,"middle"],[225,315,"end"],[315,360,"middle"]]:[[0,90,"end"],[90,135,"middle"],[135,225,"start"],[225,315,"middle"],[315,360,"end"]];var o=a.findIndex(function(e){return r>=e[0]&&r<e[1]});return a[o][2]};var C=function e(t,n,r){var i=Math.ceil(t.width/n);var a=Math.min(i,r);return{height:a*t.height,width:n}};var k=function e(t,n,r,i,o){var s=r.values;var u=i.values;var l=r.isEmpty||t.x.hideTicks;var f=i.isEmpty||t.y.hideTicks;var d=y(s,a.FormatterRegistry.get(t.x.tickFormat,t.x.tickFormatNullAlias),n.getAxisTickLabelSize,n.xAxisTickLabelLimit);var h=y(u,a.FormatterRegistry.get(t.y.tickFormat,t.y.tickFormatNullAlias),n.getAxisTickLabelSize,n.yAxisTickLabelLimit);var v=d;var p=h;if(d.width>n.xAxisTickLabelLimit){t.x.tickFormatWordWrap=true;t.x.tickFormatWordWrapLines=n.xTickWordWrapLinesLimit;v=C(d,n.xAxisTickLabelLimit,n.xTickWordWrapLinesLimit)}if(h.width>n.yAxisTickLabelLimit){t.y.tickFormatWordWrap=true;t.y.tickFormatWordWrapLines=n.yTickWordWrapLinesLimit;p=C(h,n.yAxisTickLabelLimit,n.yTickWordWrapLinesLimit)}var g=l?0:1;var m=f?0:1;var b=t.x.label;var w=t.y.label;var T=b.text&&!b.hide?1:0;var k=w.text&&!w.hide?1:0;var S=x(v,t.x.rotate);var E=x(p,t.y.rotate);if(o){b.padding=(-n.xAxisPadding-n.xFontLabelHeight)/2+n.xFontLabelHeight;b.paddingNoTicks=b.padding;w.padding=(-n.yAxisPadding-n.yFontLabelHeight)/2;w.paddingNoTicks=w.padding;T=0;k=0}else{b.padding=c([g*(n.xTickWidth+S.height),T*(n.distToXAxisLabel+n.xFontLabelHeight)]);b.paddingNoTicks=T*(n.distToXAxisLabel+n.xFontLabelHeight);w.padding=c([m*(n.yTickWidth+E.width),k*n.distToYAxisLabel]);w.paddingNoTicks=k*n.distToYAxisLabel}var P=n.xFontLabelDescenderLineHeight;t.padding=Object.assign(t.padding,{b:t.x.hide?0:c([t.x.padding,g*(n.xTickWidth+S.height),T*(n.distToXAxisLabel+n.xFontLabelHeight+P)]),l:t.y.hide?0:c([t.y.padding,m*(n.yTickWidth+E.width),k*(n.distToYAxisLabel+n.yFontLabelHeight)])});t.paddingNoTicks=Object.assign({},t.paddingNoTicks,{b:t.x.hide?0:c([t.x.padding,T*(n.distToXAxisLabel+n.xFontLabelHeight+P)]),l:t.y.hide?0:c([t.y.padding,k*(n.distToYAxisLabel+n.yFontLabelHeight)])});t.x=Object.assign(t.x,{density:S.width+_(n,"xDensityPadding",r.dimType)*2,tickFontHeight:d.height,$minimalDomain:s.length,$maxTickTextW:v.width,$maxTickTextH:v.height,tickFormatWordWrapLimit:n.xAxisTickLabelLimit});t.y=Object.assign(t.y,{density:E.height+_(n,"yDensityPadding",i.dimType)*2,tickFontHeight:h.height,$minimalDomain:u.length,$maxTickTextW:p.width,$maxTickTextH:p.height,tickFormatWordWrapLimit:n.yAxisTickLabelLimit});return t};var S=function e(t){var n=t.unit,r=t.meta,i=t.settings,a=t.allowXVertical,o=t.allowYVertical,s=t.inlineLabels;var u=r.dimension(n.x);var l=r.dimension(n.y);var c=r.scaleMeta(n.x,n.guide.x);var f=r.scaleMeta(n.y,n.guide.y);var d=c.isEmpty;var h=f.isEmpty;n.guide.x.tickFormat=w(n.guide.x.tickFormat||b(u,i.defaultFormats),i.utcTime);n.guide.y.tickFormat=w(n.guide.y.tickFormat||b(l,i.defaultFormats),i.utcTime);var v=a?!(u.dimType==="measure"):false;var p=o?!(l.dimType==="measure"):false;n.guide.x.padding=d?0:i.xAxisPadding;n.guide.x.paddingNoTicks=n.guide.x.padding;n.guide.y.padding=h?0:i.yAxisPadding;n.guide.y.paddingNoTicks=n.guide.y.padding;n.guide.x.rotate=v?-90:0;n.guide.x.textAnchor=T(n.guide.x.rotate,"x");n.guide.y.rotate=p?-90:0;n.guide.y.textAnchor=T(n.guide.y.rotate,"y");n.guide=k(n.guide,i,c,f,s);if(s){var g=n.guide.x.label;var m=n.guide.y.label;g.cssClass+=" inline";g.dock="right";g.textAnchor="end";m.cssClass+=" inline";m.dock="right";m.textAnchor="end"}return n};var E={NONE:function e(t,n,r){var a=i.utils.clone(t);P(i.utils.clone(a.unit),a.unit,function(e,t){t.guide.x.tickFontHeight=r.getAxisTickLabelSize("X").height;t.guide.y.tickFontHeight=r.getAxisTickLabelSize("Y").height;t.guide.x.tickFormatWordWrapLimit=r.xAxisTickLabelLimit;t.guide.y.tickFormatWordWrapLimit=r.yAxisTickLabelLimit;return t});return a},"BUILD-LABELS":function e(t,n){var r=i.utils.clone(t);var a=[];var o=[];var s=null;var u=null;i.utils.traverseJSON(r.unit,"units",m,function(e,t){if(e.isLeaf){return t}if(!s&&t.x){s=t}if(!u&&t.y){u=t}t.guide=t.guide||{};t.guide.x=t.guide.x||{label:""};t.guide.y=t.guide.y||{label:""};t.guide.x.label=i.utils.isObject(t.guide.x.label)?t.guide.x.label:{text:t.guide.x.label};t.guide.y.label=i.utils.isObject(t.guide.y.label)?t.guide.y.label:{text:t.guide.y.label};if(t.x){t.guide.x.label.text=t.guide.x.label.text||n.dimension(t.x).dimName}if(t.y){t.guide.y.label.text=t.guide.y.label.text||n.dimension(t.y).dimName}var r=t.guide.x.label.text;if(r){a.push(r);t.guide.x.tickFormatNullAlias=t.guide.x.hasOwnProperty("tickFormatNullAlias")?t.guide.x.tickFormatNullAlias:"No "+r;t.guide.x.label.text="";t.guide.x.label._original_text=r}var l=t.guide.y.label.text;if(l){o.push(l);t.guide.y.tickFormatNullAlias=t.guide.y.hasOwnProperty("tickFormatNullAlias")?t.guide.y.tickFormatNullAlias:"No "+l;t.guide.y.label.text="";t.guide.y.label._original_text=l}return t});var l=" ‚Üí ";if(s){s.guide.x.label.text=s.guide.x.label.hide?"":a.join(l)}if(u){u.guide.y.label.text=u.guide.y.label.hide?"":o.join(l)}return r},"BUILD-GUIDE":function e(t,n,r){var a=i.utils.clone(t);P(i.utils.clone(a.unit),a.unit,function(e,t){if(e.isLeaf){return t}var a=!e.isLeaf&&!e.isLeafParent;var o=n.scaleMeta(t.x,t.guide.x);var s=n.scaleMeta(t.y,t.guide.y);var u=!a&&Boolean(o.dimType)&&o.dimType!=="measure";t.guide.x.rotate=u?-90:0;t.guide.x.textAnchor=T(t.guide.x.rotate);t.guide.x.tickFormat=t.guide.x.tickFormat||b(o,r.defaultFormats);t.guide.y.tickFormat=t.guide.y.tickFormat||b(s,r.defaultFormats);t.guide.x.padding=a?0:r.xAxisPadding;t.guide.x.paddingNoTicks=t.guide.x.padding;t.guide.y.padding=a?0:r.yAxisPadding;t.guide.y.paddingNoTicks=t.guide.y.padding;t.guide=k(t.guide,i.utils.defaults({distToXAxisLabel:o.isEmpty?r.xTickWidth:r.distToXAxisLabel,distToYAxisLabel:s.isEmpty?r.yTickWidth:r.distToYAxisLabel},r),o,s);t.guide.x=Object.assign(t.guide.x,{cssClass:a?t.guide.x.cssClass+" facet-axis":t.guide.x.cssClass,avoidCollisions:a?true:t.guide.x.avoidCollisions});t.guide.y=Object.assign(t.guide.y,{cssClass:a?t.guide.y.cssClass+" facet-axis":t.guide.y.cssClass,avoidCollisions:a?false:t.guide.y.avoidCollisions});t.guide=Object.assign(t.guide,{showGridLines:t.guide.hasOwnProperty("showGridLines")?t.guide.showGridLines:e.isLeafParent?"xy":""});return t});return a},"BUILD-COMPACT":function e(t,n,r){var a=i.utils.clone(t);P(i.utils.clone(a.unit),a.unit,function(e,t){if(e.isLeaf){return t}if(!t.guide.hasOwnProperty("showGridLines")){t.guide.showGridLines=e.isLeafParent?"xy":""}if(e.isLeafParent){return S({unit:t,meta:n,settings:i.utils.defaults({xTickWordWrapLinesLimit:1,yTickWordWrapLinesLimit:1},r),allowXVertical:true,allowYVertical:false,inlineLabels:true})}t.guide.x.cssClass+=" facet-axis compact";t.guide.x.avoidCollisions=true;t.guide.y.cssClass+=" facet-axis compact";t.guide.y.avoidCollisions=true;return S({unit:t,meta:n,settings:i.utils.defaults({xAxisPadding:0,yAxisPadding:0,distToXAxisLabel:0,distToYAxisLabel:0,xTickWordWrapLinesLimit:1,yTickWordWrapLinesLimit:1},r),allowXVertical:false,allowYVertical:true,inlineLabels:false})});return a}};E.AUTO=function(e,t,n){return["BUILD-LABELS","BUILD-GUIDE"].reduce(function(e,r){return E[r](e,t,n)},e)};E.COMPACT=function(e,t,n){return["BUILD-LABELS","BUILD-COMPACT"].reduce(function(e,r){return E[r](e,t,n)},e)};var P=function e(t,n,r){var a=p(n);a=r(m(a),a);a=d(a,t);var o=i.utils.omit(a,"units");(a.units||[]).forEach(function(t){return e(i.utils.clone(t),g(t,o),r)});return a};var O={get:function e(t,n,r,a){var o=E[t]||E.NONE;var s={dimension:function e(t){var n=r.scales[t];var i=r.sources[n.source].dims[n.dim]||{};return{dimName:n.dim,dimType:i.type,scaleType:n.type}},scaleMeta:function e(t){var n=a("pos",t);var i=n.domain();var o=r.scales[t];var s=r.sources[o.source].dims[o.dim]||{};return{dimName:o.dim,dimType:s.type,scaleType:o.type,values:i,isEmpty:s.type==null}}};var u={unit:i.utils.clone(r.unit)};var l=o(u,s,n);r.unit=l.unit;return r}};var M=t.SpecTransformAutoLayout=function(){function e(t){l(this,e);this.spec=t;this.isApplicable=i.utils.isSpecRectCoordsOnly(t.unit)}r(e,[{key:"transform",value:function e(t){var n=this.spec;if(!this.isApplicable){return n}var r=n.settings.size;var i=n.settings.specEngine.find(function(e){return r.width<=e.width||r.height<=e.height});return O.get(i.name,n.settings,n,function(e,n){return t.getScaleInfo(n||e+":default")})}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FormatterRegistry=undefined;var r=n(3);var i=n(2);var a=o(i);function o(e){return e&&e.__esModule?e:{default:e}}var s=a.default.format(".4s");var u=a.default.format(".2r");var l=a.default.format(".1e");var c=function(){var e=/\.0+([^\d].*)?$/;var t=/(\.\d+?)0+([^\d].*)?$/;return function(n){return n.replace(e,"$1").replace(t,"$1$2")}}();var f={"x-num-auto":function e(t){var n=Math.abs(t);var r=c(n<1?n===0?"0":n<1e-6?l(t):u(t):s(t));return r},percent:function e(t){var n=parseFloat((t*100).toFixed(2));return n.toString()+"%"},day:a.default.time.format("%d-%b-%Y"),"day-utc":a.default.time.format.utc("%d-%b-%Y"),"day-short":a.default.time.format("%d-%b"),"day-short-utc":a.default.time.format.utc("%d-%b"),week:a.default.time.format("%d-%b-%Y"),"week-utc":a.default.time.format.utc("%d-%b-%Y"),"week-short":a.default.time.format("%d-%b"),"week-short-utc":a.default.time.format.utc("%d-%b"),month:function e(t){var n=new Date(t);var r=n.getMonth();var i=r===0?"%B, %Y":"%B";return a.default.time.format(i)(t)},"month-utc":function e(t){var n=new Date(t);var r=n.getUTCMonth();var i=r===0?"%B, %Y":"%B";return a.default.time.format.utc(i)(t)},"month-short":function e(t){var n=new Date(t);var r=n.getMonth();var i=r===0?"%b '%y":"%b";return a.default.time.format(i)(t)},"month-short-utc":function e(t){var n=new Date(t);var r=n.getUTCMonth();var i=r===0?"%b '%y":"%b";return a.default.time.format.utc(i)(t)},"month-year":a.default.time.format("%B, %Y"),"month-year-utc":a.default.time.format.utc("%B, %Y"),quarter:function e(t){var n=new Date(t);var r=n.getMonth();var i=(r-r%3)/3;return"Q"+(i+1)+" "+n.getFullYear()},"quarter-utc":function e(t){var n=new Date(t);var r=n.getUTCMonth();var i=(r-r%3)/3;return"Q"+(i+1)+" "+n.getUTCFullYear()},year:a.default.time.format("%Y"),"year-utc":a.default.time.format.utc("%Y"),"x-time-auto":null};var d={get:function e(t,n){var i=n||"";var o=function e(t){return(t===null||typeof t==="undefined"?i:t).toString()};var s=f.hasOwnProperty(t);var u=s?f[t]:o;if(s){u=f[t]}if(!s&&t){u=function e(n){var i=r.utils.isDate(n)?a.default.time.format(t):a.default.format(t);return i(n)}}if(!s&&!t){u=o}return u},add:function e(t,n){f[t]=n}};t.FormatterRegistry=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SpecTransformCalcSize=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(3);var a=n(34);function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function e(t){return t.$maxTickTextW};var l=function e(t){return t.rotate==0?t.$maxTickTextW:t.$maxTickTextH};var c=function e(t){return t.density};var f=function e(t){var n=[];var r=[];var i=function e(t){if(t.type==="COORDS.RECT"&&t.units&&t.units[0]&&t.units[0].type==="COORDS.RECT"){var i=t.x.replace(/^x_/,"");var a=t.y.replace(/^y_/,"");if(i!=="null"){n.push(i)}if(a!=="null"){r.push(a)}t.units.forEach(e)}};i(t.unit);var a={};var o={};var s=function e(t){if(t.type==="COORDS.RECT"){t.frames.forEach(function(t){if(t.key){var i=Object.keys(t.key);i.forEach(function(e){if(n.indexOf(e)>=0){if(!(e in a)){a[e]=[]}if(a[e].indexOf(t.key[e])<0){a[e].push(t.key[e])}}if(r.indexOf(e)>=0){if(!(e in o)){o[e]=[]}if(o[e].indexOf(t.key[e])<0){o[e].push(t.key[e])}}});if(t.units){t.units.forEach(e)}}})}};s(t.unit);return{xFacetCount:Object.keys(a).reduce(function(e,t){return e*a[t].length},1),yFacetCount:Object.keys(o).reduce(function(e,t){return e*o[t].length},1)}};var d={"entire-view":function e(t,n,r,i){var o=r.unit.guide;var s=f(r),d=s.xFacetCount,h=s.yFacetCount;var v=o.paddingNoTicks?o.padding.l-o.paddingNoTicks.l:0;var p=o.paddingNoTicks?o.padding.b-o.paddingNoTicks.b:0;var g=o.paddingNoTicks&&t.height-p<r.settings.minChartHeight||h*r.settings.minFacetHeight+p>t.height||d*r.settings.minFacetWidth+v>t.width;var m=o.paddingNoTicks&&t.width-v<r.settings.minChartWidth||h*r.settings.minFacetHeight+p>t.height||d*r.settings.minFacetWidth+v>t.width;if(g){a.SpecTransformOptimize.hideAxisTicks(r.unit,r.settings,"x")}if(m){a.SpecTransformOptimize.hideAxisTicks(r.unit,r.settings,"y")}var y=t.width;var b=n("x",r.unit,u);if(b<=t.width){i(r.unit,r.settings)}else{var _=n("x",r.unit,l);if(_>t.width){var w=Math.max(t.width,n("x",r.unit,c));y=Math.min(_,w)}}var x=Math.max(t.height,n("y",r.unit,c));if(!g&&y>t.width){a.SpecTransformOptimize.hideAxisTicks(r.unit,r.settings,"x")}if(!m&&x>t.height){a.SpecTransformOptimize.hideAxisTicks(r.unit,r.settings,"y")}var T=t.width;var C=t.height;return{newW:T,newH:C}},minimal:function e(t,n,r){var i=n("x",r.unit,c);var a=n("y",r.unit,c);return{newW:i,newH:a}},normal:function e(t,n,r,i){var o=r.unit.guide;if(o.paddingNoTicks){if(t.width-o.padding.l+o.paddingNoTicks.l<r.settings.minChartWidth){a.SpecTransformOptimize.hideAxisTicks(r.unit,r.settings,"y")}if(t.height-o.padding.b+o.paddingNoTicks.b<r.settings.minChartHeight){a.SpecTransformOptimize.hideAxisTicks(r.unit,r.settings,"x")}}var s=t.width;var f=n("x",r.unit,u);if(f<=t.width){i(r.unit,r.settings)}else{var d=n("x",r.unit,l);if(d>t.width){var h=Math.max(t.width,n("x",r.unit,c));s=Math.min(d,h)}}var v=Math.max(t.height,n("y",r.unit,c));return{newW:s,newH:v}},"fit-width":function e(t,n,r,i){var o=r.unit.guide;var s=o.paddingNoTicks?o.padding.l-o.paddingNoTicks.l:0;if(o.paddingNoTicks&&t.width-s<r.settings.minChartWidth||f(r).xFacetCount*r.settings.minFacetWidth+s>t.width){a.SpecTransformOptimize.hideAxisTicks(r.unit,r.settings,"y")}var l=n("x",r.unit,u);if(l<=t.width){i(r.unit,r.settings)}var d=t.width;var h=n("y",r.unit,c);return{newW:d,newH:h}},"fit-height":function e(t,n,r){var i=r.unit.guide;var o=i.paddingNoTicks?i.padding.b-i.paddingNoTicks.b:0;if(i.paddingNoTicks&&t.height-o<r.settings.minChartHeight||f(r).yFacetCount*r.settings.minFacetHeight+o>t.height){a.SpecTransformOptimize.hideAxisTicks(r.unit,r.settings,"x")}var s=n("x",r.unit,c);var u=t.height;return{newW:s,newH:u}}};var h=t.SpecTransformCalcSize=function(){function e(t){s(this,e);this.spec=t;this.isApplicable=i.utils.isSpecRectCoordsOnly(t.unit)}r(e,[{key:"transform",value:function e(t){var n=this.spec;if(!this.isApplicable){return n}var r=n.settings.fitModel;if(!r){return n}var i=n.scales;var s=function e(t,n){return t.reduce(function(e,t){var r=t.key||{};var i=r[n];e[i]=e[i]||[];e[i].push(t);return e},{})};var u=function e(t,n){var r=0;if(t.discrete){r=n*t.domain().length}else{r=n*4}return r};var l=function e(n,r,a){var l=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var c=n==="x"?r.x:r.y;var f=n==="x"?r.y:r.x;var d=r.guide;var h=n==="x"?a(d.x):a(d.y);var v=n==="x"?d.padding.l+d.padding.r:d.padding.b+d.padding.t;if(r.units[0].type==="ELEMENT.INTERVAL"&&n==="y"===Boolean(r.units[0].flip)&&r.units[0].label&&!t.getScaleInfo(r.units[0].label,l).isEmpty()){var p=d.label&&d.label.fontSize?d.label.fontSize:10;var g=r.frames.reduce(function(e,t){return t.full().length*p},0);var m=u(t.getScaleInfo(c,l),h);return v+Math.max(g,m)}else if(r.units[0].type!=="COORDS.RECT"){var y=t.getScaleInfo(c,l);return v+u(y,h)}else{var b=s(r.frames,i[f].dim);var _=Object.keys(b).map(function(t){return b[t].map(function(t){return e(n,t.units[0],a,t)}).reduce(function(e,t){return e+t},0)});var w=Math.max.apply(Math,o(_));return v+w}};var c=n.settings.size;var f=c.width;var h=c.height;var v=d[r];if(v){var p=v(c,l,n,a.SpecTransformOptimize.optimizeXAxisLabel);f=p.newW;h=p.newH}var g=function e(r,i,a){var o=n.settings.getScrollbarSize(t.getLayout().contentContainer);var s=i.width>r.width&&i.width<=r.width*a?r.width:i.width;var u=i.height>r.height&&i.height<=r.height*a?r.height:i.height;var l=r.width-s;var c=r.height-u;var f=c>=0?0:o.width;var d=l>=0?0:o.height;return{height:u-d,width:s-f}};n.settings.size=g(c,{width:f,height:h},n.settings.avoidScrollAtRatio);return n}}]);return e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=t.SpecTransformOptimize=function(){function e(){r(this,e)}n(e,null,[{key:"optimizeXAxisLabel",value:function e(t,n){var r=n.xAxisTickLabelLimit;var i=function e(t){if(!t.guide.x.hide&&!t.guide.x.hideTicks&&t.guide.x.rotate!==0){t.guide.x.rotate=0;t.guide.x.textAnchor="middle";var n=Math.min(r,t.guide.x.$maxTickTextW);var i=0-n+t.guide.x.$maxTickTextH;a(t,i)}(t.units||[]).filter(function(e){return e.type==="COORDS.RECT"}).forEach(function(t){return e(t)})};var a=function e(n,r){if(t!==n&&n.guide.autoLayout==="extract-axes"){t.guide.x.padding+=r;t.guide.padding.b+=r}else{n.guide.x.label.padding+=n.guide.x.label.padding>0?r:0;n.guide.padding.b+=n.guide.padding.b>0?r:0}};i(t)}},{key:"hideAxisTicks",value:function e(t,n,r){var i=function e(t){var n=r==="x"?"b":"l";var i=t.guide;if(!i[r].hide&&!i[r].hideTicks){i[r].hideTicks=true;var a=i[r].label.text&&!i[r].label.hide;i.padding[n]=i.paddingNoTicks?i.paddingNoTicks[n]:0;i[r].padding=i[r].paddingNoTicks||0;i[r].label.padding=a?i[r].label.paddingNoTicks:0}(t.units||[]).filter(function(e){return e.type==="COORDS.RECT"}).forEach(function(t){return e(t)})};i(t)}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SpecTransformApplyRatio=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(3);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=t.SpecTransformApplyRatio=function(){function e(t){a(this,e);this.spec=t;this.isApplicable=t.settings.autoRatio&&i.utils.isSpecRectCoordsOnly(t.unit)}r(e,[{key:"transform",value:function e(t){var n=this.spec;if(!this.isApplicable){return n}try{this.ruleApplyRatio(n,t)}catch(e){if(e.message!=="Not applicable"){throw e}}return n}},{key:"ruleApplyRatio",value:function e(t,n){var r=function e(t){return t.type==="COORDS.RECT"||t.type==="RECT"};var a=function e(t){return t.type.indexOf("ELEMENT.")===0};var o=function e(t,n,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var a=n(t,i);if(a){(t.units||[]).map(function(t){return e(t,n,r,i+1)})}r(t,i)};var s=[];var u=[];var l=function e(t,n){if(n>1||!r(t)){throw new Error("Not applicable")}s.push(t.x);u.push(t.y);var i=t.units||[];var o=i.map(function(e){if(!(r(e)||a(e))){throw new Error("Not applicable")}return e}).filter(r);return o.length===1};o(t.unit,l,function(){return 0});var c=function e(n){return t.scales[n]};var f=function e(t){return t.source==="/"&&!t.ratio&&!t.fitToFrameByDims};var d=function e(t){return t.type==="ordinal"||t.type==="period"&&!t.period};var h=s.map(c).filter(f);var v=u.map(c).filter(f);var p=2;if([h.length,v.length].some(function(e){return e===p})){var g=function e(t){return t.dim};var m=function e(t,n,r){return t.fitToFrameByDims=r.slice(0,n).map(g)};var y=function e(t,r){if(r.filter(d).length===p){r.forEach(m);r[0].ratio=i.utils.generateRatioFunction(t,r.map(g),n)}};y("x",h);y("y",v)}}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SpecTransformExtractAxes=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(3);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=t.SpecTransformExtractAxes=function(){function e(t){a(this,e);this.spec=t;this.isApplicable=t.settings.layoutEngine==="EXTRACT"&&i.utils.isSpecRectCoordsOnly(t.unit)}r(e,[{key:"transform",value:function e(){var t=this.spec;if(!this.isApplicable){return t}try{this.ruleExtractAxes(t)}catch(e){if(e.message==="Not applicable"){console.log("[TauCharts]: can't extract axes for the given chart specification")}else{throw e}}return t}},{key:"ruleExtractAxes",value:function e(t){var n=function e(t){return t.type==="COORDS.RECT"||t.type==="RECT"};var r=function e(t){return t.type.indexOf("ELEMENT.")===0};var a=function e(t){return t?10:0};var o={l:0,r:10,t:10,b:0};var s={l:0,b:0};var u=[];var l=[];var c=function e(t,i){if(i>1||!n(t)){throw new Error("Not applicable")}t.guide=t.guide||{};var a=t.guide;var c=a.padding||{l:0,r:0,t:0,b:0};var f=a.paddingNoTicks||{l:0,b:0};o.l+=c.l;o.r+=c.r;o.t+=c.t;o.b+=c.b;s.l+=f.l;s.b+=f.b;u.push(Object.assign({},o));l.push(Object.assign({},s));var d=t.units||[];var h=d.map(function(e){if(!(n(e)||r(e))){throw new Error("Not applicable")}return e}).filter(n);return h.length===1};var f=function e(t){var n=u.pop();var r=l.pop();var i=t.guide||{};i.x=i.x||{};i.x.padding=i.x.padding||0;i.x.paddingNoTicks=i.x.paddingNoTicks||0;i.y=i.y||{};i.y.padding=i.y.padding||0;i.y.paddingNoTicks=i.y.paddingNoTicks||0;i.padding={l:a(t.y),r:a(1),t:a(1),b:a(t.x)};i.paddingNoTicks={l:0,b:0};i.autoLayout="extract-axes";i.x.padding+=o.b-n.b;i.y.padding+=o.l-n.l;i.x.paddingNoTicks+=s.b-r.b;i.y.paddingNoTicks+=s.l-r.l};i.utils.traverseSpec(t.unit,c,f);t.unit.guide.padding=o;t.unit.guide.paddingNoTicks=s}}]);return e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=t.src,r=n===undefined?null:n,a=t.timeout,o=a===undefined?Number.MAX_SAFE_INTEGER:a,s=t.syncInterval,u=s===undefined?Number.MAX_SAFE_INTEGER:s,l=t.callbacks,c=l===undefined?{}:l;i(this,e);this.setTimeout(o);this.setSyncInterval(u);this.setCallbacks(c);this._running=false;this._queue=[];this._result=r;this._syncDuration=0;this._asyncDuration=0;this._lastCall=null;this._requestedFrameId=null;this._tasksCount=0;this._finishedTasksCount=0}r(e,[{key:"setTimeout",value:function t(n){e.checkType(n,"number","timeout");this._timeout=n}},{key:"setSyncInterval",value:function t(n){e.checkType(n,"number","syncInterval");this._syncInterval=n}},{key:"setCallbacks",value:function t(n){e.checkType(n,"object","callbacks");this._callbacks=Object.assign(this._callbacks||{},n)}},{key:"addTask",value:function e(t){this._queue.push(t);this._tasksCount++;return this}},{key:"run",value:function t(){if(this._running){throw new Error("Task Runner is already running")}this._running=true;e.runnersInProgress++;this._loopTasks()}},{key:"isRunning",value:function e(){return this._running}},{key:"_loopTasks",value:function t(){var n;var r;var i=0;var a;var o;var s=this._syncInterval/e.runnersInProgress;while(this._running&&!(a=this._asyncDuration>this._timeout)&&!(o=i>s)&&(n=this._queue.shift())){r=this._runTask(n);if(r===null){return}this._syncDuration+=r;this._asyncDuration+=r;i+=r}if(a&&this._queue.length>0){this.stop();if(this._callbacks.timeout){this._callbacks.timeout.call(null,this._asyncDuration,this)}}if(!a&&o&&this._queue.length>0){this._requestFrame()}if(this._queue.length===0){this.stop();if(this._callbacks.done){this._callbacks.done.call(null,this._result,this)}}}},{key:"_runTask",value:function e(t){var n=performance.now();if(this._callbacks.error){try{this._result=t.call(null,this._result,this)}catch(e){this.stop();this._callbacks.error.call(null,e,this);return null}}else{this._result=t.call(null,this._result,this)}var r=performance.now();var i=r-n;this._finishedTasksCount++;if(this._callbacks.progress){this._callbacks.progress.call(null,this._finishedTasksCount/this._tasksCount,this)}return i}},{key:"_requestFrame",value:function e(){var t=this;var n=performance.now();this._requestedFrameId=requestAnimationFrame(function(){t._requestedFrameId=null;var e=performance.now();t._asyncDuration+=e-n;t._loopTasks()})}},{key:"stop",value:function t(){if(!this._running){throw new Error("Task Runner is already stopped")}this._running=false;e.runnersInProgress--;if(this._requestedFrameId){cancelAnimationFrame(this._requestedFrameId);this._requestedFrameId=null}}}],[{key:"checkType",value:function e(t,r,i){if((typeof t==="undefined"?"undefined":n(t))!==r){throw new Error('Task Runner "'+i+'" property is not "'+r+'"')}}}]);return e}();t.default=a;a.runnersInProgress=0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Chart=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=function e(t,n,r){if(t===null){t=Function.prototype}var i=Object.getOwnPropertyDescriptor(t,n);if(i===undefined){var a=Object.getPrototypeOf(t);if(a===null){return undefined}else{return e(a,n,r)}}else if("value"in i){return i.value}else{var o=i.get;if(o===undefined){return undefined}return o.call(r)}};var a=n(20);var o=n(3);var s=n(39);function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var f=function(e){c(t,e);function t(e){u(this,t);var n=s.chartTypesRegistry.validate(e.type,e);if(n.length>0){throw new Error(n[0])}var r=s.chartTypesRegistry.get(e.type);e=o.utils.defaults(e,{autoResize:true});e.settings=a.Plot.setupSettings(e.settings);e.dimensions=a.Plot.setupMetaInfo(e.dimensions,e.data);var i=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r(e)));if(e.autoResize){t.winAware.push(i)}return i}r(t,[{key:"destroy",value:function e(){var n=t.winAware.indexOf(this);if(n!==-1){t.winAware.splice(n,1)}i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]);return t}(a.Plot);f.winAware=[];f.resizeOnWindowEvent=function(){var e=void 0;function t(){if(e||!f.winAware.length){return}e=window.requestAnimationFrame(n)}function n(){e=0;for(var t=0,n=f.winAware.length;t<n;t++){f.winAware[t].resize()}}return t}();window.addEventListener("resize",f.resizeOnWindowEvent);t.Chart=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.chartTypesRegistry=undefined;var r=n(8);var i={};var a={};var o=function e(t){var n="Chart type "+t+" is not supported.";console.log(n);console.log("Use one of "+Object.keys(i).join(", ")+".");throw new r.TauChartError(n,r.errorCodes.NOT_SUPPORTED_TYPE_CHART)};var s={validate:function e(t,n){if(!a.hasOwnProperty(t)){o(t)}return a[t].reduce(function(e,t){return e.concat(t(n)||[])},[])},get:function e(t){var n=i[t];if(typeof n!=="function"){o(t)}return n},add:function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];i[t]=n;a[t]=r;return this},getAllRegisteredTypes:function e(){return i}};t.chartTypesRegistry=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Cartesian=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(2);var a=h(i);var o=n(5);var s=n(1);var u=n(10);var l=n(3);var c=n(22);var f=n(32);var d=n(9);function h(e){return e&&e.__esModule?e:{default:e}}function v(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function p(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var y=s.utilsDom.selectOrAppend;var b=function e(t){var n=20;var r=t<=n?1:.75;return Math.max(2,Math.round(t*r))};var _=t.Cartesian=function(e){m(t,e);function t(e){p(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.config=e;n.config.guide=l.utils.defaults(n.config.guide||{},{showGridLines:"xy",padding:{l:50,r:0,t:0,b:50}});n.config.guide.x=n.config.guide.x||{};n.config.guide.x=l.utils.defaults(n.config.guide.x,{cssClass:"x axis",textAnchor:"middle",padding:10,hide:false,scaleOrient:"bottom",rotate:0,density:20,label:{},tickFormatWordWrapLimit:100});if(typeof n.config.guide.x.label==="string"){n.config.guide.x.label={text:n.config.guide.x.label}}n.config.guide.x.label=l.utils.defaults(n.config.guide.x.label,{text:"X",rotate:0,padding:40,textAnchor:"middle"});n.config.guide.y=n.config.guide.y||{};n.config.guide.y=l.utils.defaults(n.config.guide.y,{cssClass:"y axis",textAnchor:"start",padding:10,hide:false,scaleOrient:"left",rotate:0,density:20,label:{},tickFormatWordWrapLimit:100});if(typeof n.config.guide.y.label==="string"){n.config.guide.y.label={text:n.config.guide.y.label}}n.config.guide.y.label=l.utils.defaults(n.config.guide.y.label,{text:"Y",rotate:-90,padding:20,textAnchor:"middle"});var r=n.config;var i=r.guide;if(i.autoLayout==="extract-axes"){var a=r.options.containerHeight;var o=a-(r.options.top+r.options.height);i.x.hide=Math.floor(o)>0;i.y.hide=Math.floor(r.options.left)>0}var s=n.config.options;var u=n.config.guide.padding;n.L=s.left+u.l;n.T=s.top+u.t;n.W=s.width-(u.l+u.r);n.H=s.height-(u.t+u.b);return n}r(t,[{key:"defineGrammarModel",value:function e(t){var n=this.W;var r=this.H;this.xScale=t("pos",this.config.x,[0,n]);this.yScale=t("pos",this.config.y,[r,0]);this.regScale("x",this.xScale).regScale("y",this.yScale);return{scaleX:this.xScale,scaleY:this.yScale,xi:function e(){return n/2},yi:function e(){return r/2},sizeX:function e(){return n},sizeY:function e(){return r}}}},{key:"getGrammarRules",value:function e(){return[function(e){var t=e.scaleX;var n=e.scaleY;return{xi:function n(r){return!r?e.xi(r):t(r[t.dim])},yi:function t(r){return!r?e.yi(r):n(r[n.dim])},sizeX:function n(r){return!r?e.sizeX(r):t.stepSize(r[t.dim])},sizeY:function t(r){return!r?e.sizeY(r):n.stepSize(r[n.dim])}}}]}},{key:"createScreenModel",value:function e(t){return t}},{key:"allocateRect",value:function e(t){var n=this;var r=this.screenModel;return{slot:function e(t){return n.config.options.container.selectAll(".uid_"+t)},left:r.xi(t)-r.sizeX(t)/2,top:r.yi(t)-r.sizeY(t)/2,width:r.sizeX(t),height:r.sizeY(t),containerWidth:this.W,containerHeight:this.H}}},{key:"drawFrames",value:function e(t){var n=Object.assign({},this.config);var r=n.options;var i=this.W;var a=this.H;n.x=this.xScale;n.y=this.yScale;n.x.scaleObj=this.xScale;n.y.scaleObj=this.yScale;n.x.guide=n.guide.x;n.y.guide=n.guide.y;n.x.guide.label.size=i;n.y.guide.label.size=a;(r.container.attr("transform")?d.d3_transition(r.container,this.config.guide.animationSpeed,"cartesianContainerTransform"):r.container).attr("transform",u.utilsDraw.translate(this.L,this.T));if(!n.x.guide.hide){var o=n.x.guide.scaleOrient;var s=o==="top"?[0,0-n.guide.x.padding]:[0,a+n.guide.x.padding];this._drawDimAxis(r.container,n.x,s,i)}else{this._removeDimAxis(r.container,n.x)}if(!n.y.guide.hide){var l=n.y.guide.scaleOrient;var f=l==="right"?[i+n.guide.y.padding,0]:[0-n.guide.y.padding,0];this._drawDimAxis(r.container,n.y,f,a)}else{this._removeDimAxis(r.container,n.y)}var h=t.reduce(function(e,t){return e.concat((t.units||[]).map(function(e){return e.uid}))},[]);var v=this._drawGrid(r.container,n,i,a,r);var p=d.d3_selectAllImmediate(v,".cell").data(h,function(e){return e});p.enter().append("g").attr("class",function(e){return c.CSS_PREFIX+"cell cell uid_"+e});d.d3_transition(p.classed("tau-active",true),this.config.guide.animationSpeed).attr("opacity",1);d.d3_transition(p.exit().classed("tau-active",false),this.config.guide.animationSpeed).attr("opacity",1e-6).remove()}},{key:"_drawDimAxis",value:function e(t,n,r,i){var o=this;var s=a.default.svg.axis().scale(n.scaleObj).orient(n.guide.scaleOrient);var l=f.FormatterRegistry.get(n.guide.tickFormat,n.guide.tickFormatNullAlias);if(l!==null){s.ticks(b(i/n.guide.density));s.tickFormat(l)}var c=this.config.guide.animationSpeed;y(t,this._getAxisSelector(n)).classed("tau-active",true).classed(n.guide.cssClass,true).call(function(e){var t=d.d3_transition(e,c,"axisTransition");var a=e.attr("transform");var l=u.utilsDraw.translate.apply(u.utilsDraw,v(r));if(l!==a){(a?t:e).attr("transform",u.utilsDraw.translate.apply(u.utilsDraw,v(r)))}t.call(s);t.attr("opacity",1);var f=u.utilsDraw.getOrientation(n.guide.scaleOrient)==="h";var h=n.scaleType==="ordinal"||n.scaleType==="period";if(h&&!n.guide.hideTicks){d.d3_decorator_prettify_categorical_axis_ticks(t,n,f,c)}if(n.scaleType==="linear"){d.d3_decorator_highlightZeroTick(e,n.scaleObj)}d.d3_decorator_wrap_tick_label(e,c,n.guide,f,n);if(!n.guide.label.hide){d.d3_decorator_prettify_axis_label(e,n.guide.label,f,i,c)}if(n.guide.hideTicks){e.selectAll(".tick").remove();e.selectAll(".domain").remove();return}var p=n.scaleObj.ticks?n.scaleObj.ticks():n.scaleObj.domain();var g=function t(){if(h&&n.guide.avoidCollisions){d.d3_decorator_avoidLabelsCollisions(e,f,p)}if(f&&n.scaleType==="time"){d.d3_decorator_fixHorizontalAxisTicksOverflow(e,p)}};var m=function t(){if(f&&(n.scaleType==="time"||n.scaleType==="linear")){d.d3_decorator_fixEdgeAxisTicksOverflow(e,p)}};var y=function e(){g();m()};g();var b="_transitionEndTimeout_"+(f?"h":"v");clearTimeout(o[b]);if(c>0){o[b]=setTimeout(y,c*1.5)}else{m()}})}},{key:"_removeDimAxis",value:function e(t,n){var r=d.d3_selectAllImmediate(t,this._getAxisSelector(n)).classed("tau-active",false);d.d3_transition(r,this.config.guide.animationSpeed,"axisTransition").attr("opacity",1e-6).remove()}},{key:"_getAxisSelector",value:function e(t){var n=u.utilsDraw.getOrientation(t.guide.scaleOrient)==="h";return"g."+(n?"x":"y")+".axis"}},{key:"_drawGrid",value:function e(t,n,r,i){var o=this;var s=y(t,"g.grid").attr("transform",u.utilsDraw.translate(0,0)).call(function(e){var t=e;var s=o.config.guide.animationSpeed;var l=(n.guide.showGridLines||"").toLowerCase();if(l.length>0){var c=y(t,"g.grid-lines");if(l.indexOf("x")>-1){var h=n.x;var v=h.guide.scaleOrient==="top"?-1:1;var p=a.default.svg.axis().scale(h.scaleObj).orient(h.guide.scaleOrient).tickSize(v*i);var g=f.FormatterRegistry.get(h.guide.tickFormat);if(g!==null){p.ticks(b(r/h.guide.density));p.tickFormat(g)}var m=y(c,"g.grid-lines-x");var _=d.d3_transition(m,s).call(p);var w=u.utilsDraw.getOrientation(h.guide.scaleOrient)==="h";var x=h.scaleType==="ordinal"||h.scaleType==="period";if(x){d.d3_decorator_prettify_categorical_axis_ticks(_,h,w,s)}if(h.scaleType==="linear"&&!h.guide.hideTicks){d.d3_decorator_highlightZeroTick(m,h.scaleObj)}var T=y(c,"g.tau-extraGridLines");d.d3_decorator_fix_axis_start_line(T,w,r,i,s);if(h.guide.hideTicks){m.selectAll(".tick").filter(function(e){return e!=0}).remove()}}if(l.indexOf("y")>-1){var C=n.y;var k=C.guide.scaleOrient==="right"?1:-1;var S=a.default.svg.axis().scale(C.scaleObj).orient(C.guide.scaleOrient).tickSize(k*r);var E=f.FormatterRegistry.get(C.guide.tickFormat);if(E!==null){S.ticks(b(i/C.guide.density));S.tickFormat(E)}var P=y(c,"g.grid-lines-y");var O=d.d3_transition(P,s).call(S);var M=u.utilsDraw.getOrientation(C.guide.scaleOrient)==="h";var A=C.scaleType==="ordinal"||C.scaleType==="period";if(A){d.d3_decorator_prettify_categorical_axis_ticks(O,C,M,s)}if(C.scaleType==="linear"&&!C.guide.hideTicks){d.d3_decorator_highlightZeroTick(P,C.scaleObj)}var N=["time","ordinal","period"];var R=N.indexOf(C.scaleType)!==-1;if(R){var D=y(c,"g.tau-extraGridLines");d.d3_decorator_fix_axis_start_line(D,M,r,i,s)}if(C.guide.hideTicks){P.selectAll(".tick").filter(function(e){return e!=0}).remove()}}c.selectAll("text").remove()}});return s}}]);return t}(o.Element)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Parallel=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(2);var a=f(i);var o=n(5);var s=n(10);var u=n(3);var l=n(22);var c=n(32);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function v(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var g=t.Parallel=function(e){p(t,e);function t(e){h(this,t);var n=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.config=e;n.config.guide=u.utils.defaults(n.config.guide||{},{padding:{l:50,r:50,t:50,b:50},enableBrushing:false});n.columnsBrushes={};n.on("force-brush",function(e,t){return n._forceBrushing(t)});var r=n.config.options;var i=n.config.guide.padding;n.L=r.left+i.l;n.T=r.top+i.t;n.W=r.width-(i.l+i.r);n.H=r.height-(i.t+i.b);return n}r(t,[{key:"defineGrammarModel",value:function e(t){var n=this.config;var r=this.W;var i=this.H;this.columnsScalesMap=n.columns.reduce(function(e,n){e[n]=t("pos",n,[i,0]);return e},{});var a=r/(n.columns.length-1);var o=n.columns.reduce(function(e,t,n){e[t]=n*a;return e},{});this.xBase=function(e){return o[e]};this.regScale("columns",this.columnsScalesMap);return{}}},{key:"allocateRect",value:function e(){var t=this;return{slot:function e(n){return t.config.options.container.selectAll(".uid_"+n)},left:0,top:0,width:this.W,height:this.H,containerWidth:this.W,containerHeight:this.H}}},{key:"drawFrames",value:function e(t){var n=this;var r=Object.assign({},this.config);var i=r.options;var o=function e(t,n,r){var i=n.selectAll(".layer_"+t).data(r.units,function(e){return e.uid});i.exit().remove();i.enter().append("g").attr("class",function(e){return"layer_"+t+" uid_"+e.uid})};var s=function e(t){o(i.frameId,a.default.select(this),t)};var u=this._fnDrawGrid(i.container,r,i.frameId,Object.keys(this.columnsScalesMap).reduce(function(e,t){return e.concat([n.columnsScalesMap[t].getHash()])},[]).join("_"));var c=u.selectAll(".parent-frame-"+i.frameId).data(t,function(e){return e.hash()});c.exit().remove();c.each(s);c.enter().append("g").attr("class",function(e){return l.CSS_PREFIX+"cell cell parent-frame-"+i.frameId+" frame-"+e.hash()}).each(s);var f=this._fnDrawColumns(u,r);if(r.guide.enableBrushing){this._enableBrushing(f)}}},{key:"_fnDrawGrid",value:function e(t,n,r,i){var a=t.selectAll(".grid_"+r).data([i],function(e){return e});a.exit().remove();a.enter().append("g").attr("class","grid grid_"+r).attr("transform",s.utilsDraw.translate(this.L,this.T));return a}},{key:"_fnDrawColumns",value:function e(t,n){var r=n.guide.columns||{};var i=this.xBase;var o=this.columnsScalesMap;var u=a.default.svg.axis().orient("left");var l=t.selectAll(".column").data(n.columns,function(e){return e});l.exit().remove();l.enter().append("g").attr("class","column").attr("transform",function(e){return s.utilsDraw.translate(i(e),0)}).call(function(){this.append("g").attr("class","y axis").each(function(e){var t=o[e].dim;var n=u.scale(o[e]);var i=r[t]||{};var s=c.FormatterRegistry.get(i.tickFormat,i.tickFormatNullAlias);if(s!==null){n.tickFormat(s)}a.default.select(this).call(n)}).append("text").attr("class","label").attr("text-anchor","middle").attr("y",-9).text(function(e){return((r[e]||{}).label||{}).text||o[e].dim})});return l}},{key:"_enableBrushing",value:function e(t){var n=this;var r=16;var i=this.columnsScalesMap;var o=this.columnsBrushes;var s=function e(t){return t};var l=function e(t){return t};var c=function e(){var t=Object.keys(o).filter(function(e){return!o[e].empty()}).map(function(e){var t=o[e].extent();var n=[];if(i[e].discrete){n=i[e].domain().filter(function(n){var r=i[e](n);return t[0]<=r&&t[1]>=r})}else{n=[t[0],t[1]]}return{dim:i[e].dim,func:i[e].discrete?"inset":"between",args:n}});n.fire("brush",t)};t.selectAll(".brush").remove();t.append("g").attr("class","brush").each(function(e){o[e]=a.default.svg.brush().y(i[e]).on("brushstart",s).on("brush",c).on("brushend",l);a.default.select(this).classed("brush-"+u.utils.generateHash(e),true).call(o[e])}).selectAll("rect").attr("x",r/2*-1).attr("width",r);return t}},{key:"_forceBrushing",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=this.columnsBrushes;var r=this.columnsScalesMap;Object.keys(t).filter(function(e){return n[e]&&r[e]&&t[e]}).forEach(function(e){var i=t[e];var o=[];if(r[e].discrete){var s=i.map(r[e]).filter(function(e){return e>=0});var l=r[e].stepSize()/2;o=[Math.min.apply(Math,d(s))-l,Math.max.apply(Math,d(s))+l]}else{o=[i[0],i[1]]}var c=u.utils.generateHash(e);n[e].extent(o);n[e](a.default.select(".brush-"+c));n[e].event(a.default.select(".brush-"+c))})}}]);return t}(o.Element)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GeoMap=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(2);var a=f(i);var o=n(3);var s=n(43);var u=f(s);var l=n(44);var c=n(5);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}a.default.labeler=l.d3Labeler;var p=5.5;var g=10;var m=.5;var y=["land","continents","georegions","countries","regions","subunits","states","counties"];var b=t.GeoMap=function(e){v(t,e);function t(e){d(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.config=e;n.config.guide=o.utils.defaults(n.config.guide||{},{defaultFill:"rgba(128,128,128,0.25)",padding:{l:0,r:0,t:0,b:0},showNames:true});n.contourToFill=null;n.on("highlight-area",function(e,t){return n._highlightArea(t)});n.on("highlight-point",function(e,t){return n._highlightPoint(t)});n.on("highlight",function(e,t){return n._highlightPoint(t)});return n}r(t,[{key:"defineGrammarModel",value:function e(t){var n=this.config;var r=n.options;var i=n.guide.padding;var a=r.width-(i.l+i.r);var o=r.height-(i.t+i.b);this.latScale=t("pos",n.latitude,[0,o]);this.lonScale=t("pos",n.longitude,[a,0]);this.sizeScale=t("size",n.size);this.colorScale=t("color",n.color);this.codeScale=t("value",n.code);this.fillScale=t("fill",n.fill);this.W=a;this.H=o;this.regScale("latitude",this.latScale).regScale("longitude",this.lonScale).regScale("size",this.sizeScale).regScale("color",this.colorScale).regScale("code",this.codeScale).regScale("fill",this.fillScale);return{}}},{key:"drawFrames",value:function e(t){var n=this;var r=this.config.guide;if(typeof r.sourcemap==="string"){a.default.json(r.sourcemap,function(e,r){if(e){throw e}n._drawMap(t,r)})}else{this._drawMap(t,r.sourcemap)}}},{key:"_calcLabels",value:function e(t,n,r){var i=this.W;var o=this.H;var s={};n.forEach(function(e){var n=u.default.feature(t,t.objects[e]).features||[];var l=n.map(function(t){var n=t.properties||{};var a=r.centroid(t);var o=r.bounds(t);var s=a[0];var u=a[1];var l=o[1][0];var c=o[0][0];var f=l-c;var d=n.name||"";var h=n.abbr||d;var v=f<d.length*p;var g=v?h:d;var m=f<2.5*p;var y=m?i-s-3*p:0;return{id:e+"-"+t.id,sx:s,sy:u,x:s+y,y:u,width:g.length*p,height:10,name:g,r:y,isRef:m}}).filter(function(e){return!Number.isNaN(e.x)&&!Number.isNaN(e.y)});var c=l.map(function(e){return{x:e.sx,y:e.sy,r:e.r}});a.default.labeler().label(l).anchor(c).width(i).height(o).start(g);l.filter(function(e){return!e.isRef}).map(function(e){e.x=e.sx;e.y=e.sy;return e}).reduce(function(e,t){e[t.id]=t;return e},s);var f=l.filter(function(e){return e.isRef});if(f.length<6){f.reduce(function(e,t){e[t.id]=t;return e},s)}});return s}},{key:"_drawMap",value:function e(t,n){var r=this;var i=this;var o=this.config.guide;var s=this.config.options;var l=this.config.options.container;var c=this.latScale;var f=this.lonScale;var d=this.sizeScale;var h=this.colorScale;var v=this.codeScale;var g=this.fillScale;var b=this.W;var _=this.H;var w=y.filter(function(e){return(n.objects||{}).hasOwnProperty(e)});if(w.length===0){throw new Error("Invalid map: should contain some contours")}var x;if(!g.dim){x=w[w.length-1]}else if(v.georole){if(w.indexOf(v.georole)===-1){console.log('There is no contour for georole "'+v.georole+'"');console.log("Available contours are: "+w.join(" | "));throw new Error("Invalid [georole]")}x=v.georole}else{console.log("Specify [georole] for code scale");throw new Error("[georole] is missing")}this.contourToFill=x;var T;if(c.dim&&f.dim){var C=a.default.extent(c.domain());var k=a.default.extent(f.domain());T=[(k[1]+k[0])/2,(C[1]+C[0])/2]}var S=this._createProjection(n,w[0],T);var E=a.default.geo.path().projection(S);var P=l.selectAll(".map-container").data([""+b+_+T+w.join("-")],function(e){return e});P.exit().remove();P.enter().append("g").call(function(){var e=this;e.attr("class","map-container");var t={};var r=w.reduceRight(function(e,t){return e.concat(t)},[]);if(o.showNames){t=i._calcLabels(n,r,E)}r.forEach(function(r,i){var a=function e(n){return t[r+"-"+n.id]};e.selectAll(".map-contour-"+r).data(u.default.feature(n,n.objects[r]).features||[]).enter().append("g").call(function(){var e=this;e.attr("class","map-contour-"+r+" map-contour-level map-contour-level-"+i).attr("fill","none");e.append("title").text(function(e){return(e.properties||{}).name});e.append("path").attr("d",E);e.append("text").attr("class","place-label-"+r).attr("transform",function(e){var t=a(e);return t?"translate("+[t.x,t.y]+")":""}).text(function(e){var t=a(e);return t?t.name:""});e.append("line").attr("class","place-label-link-"+r).attr("stroke","gray").attr("stroke-width",.25).attr("x1",function(e){var t=a(e);return t&&t.isRef?t.sx:0}).attr("y1",function(e){var t=a(e);return t&&t.isRef?t.sy:0}).attr("x2",function(e){var t=a(e);return t&&t.isRef?t.x-t.name.length*.6*p:0}).attr("y2",function(e){var t=a(e);return t&&t.isRef?t.y-3.5:0})})});if(n.objects.hasOwnProperty("places")){var s=u.default.feature(n,n.objects.places);var l=s.features.map(function(e){var t=S(e.geometry.coordinates);return{x:t[0]+3.5,y:t[1]+3.5,width:e.properties.name.length*p,height:12,name:e.properties.name}});var c=s.features.map(function(e){var t=S(e.geometry.coordinates);return{x:t[0],y:t[1],r:2.5}});a.default.labeler().label(l).anchor(c).width(b).height(_).start(100);e.selectAll(".place").data(c).enter().append("circle").attr("class","place").attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).attr("r",function(e){return e.r+"px"});e.selectAll(".place-label").data(l).enter().append("text").attr("class","place-label").attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).text(function(e){return e.name})}});this.groupByCode=t.reduce(function(e,t){return t.part().reduce(function(e,t){var n=(t[v.dim]||"").toLowerCase();e[n]=t;return e},e)},{});var O=this._resolveFeature.bind(this);P.selectAll(".map-contour-"+x).data(u.default.feature(n,n.objects[x]).features).call(function(){this.classed("map-contour",true).attr("fill",function(e){var t=O(e);return t===null?o.defaultFill:g(t[g.dim])})}).on("mouseover",function(e){return r.fire("area-mouseover",{data:O(e),event:a.default.event})}).on("mouseout",function(e){return r.fire("area-mouseout",{data:O(e),event:a.default.event})}).on("click",function(e){return r.fire("area-click",{data:O(e),event:a.default.event})});if(!c.dim||!f.dim){return[]}var M=function e(){return this.attr({r:function e(t){var n=t.data;return d(n[d.dim])},transform:function e(t){var n=t.data;return"translate("+S([n[f.dim],n[c.dim]])+")"},class:function e(t){var n=t.data;return h(n[h.dim])},opacity:m}).on("mouseover",function(e){var t=e.data;return i.fire("point-mouseover",{data:t,event:a.default.event})}).on("mouseout",function(e){var t=e.data;return i.fire("point-mouseout",{data:t,event:a.default.event})}).on("click",function(e){var t=e.data;return i.fire("point-click",{data:t,event:a.default.event})})};var A=function e(){this.attr("class",function(e){return"frame frame-"+e.hash}).call(function(){var e=this.selectAll("circle").data(function(e){return e.data.map(function(e){return{data:e,uid:s.uid}})});e.exit().remove();e.call(M);e.enter().append("circle").call(M)})};var N=function e(t){return{tags:t.key||{},hash:t.hash(),data:t.part()}};var R=P.selectAll(".frame").data(t.map(N),function(e){return e.hash});R.exit().remove();R.call(A);R.enter().append("g").call(A);return[]}},{key:"_resolveFeature",value:function e(t){var n=this.groupByCode;var r=t.properties;var i=["c1","c2","c3","abbr","name"].filter(function(e){return r.hasOwnProperty(e)&&r[e]&&n.hasOwnProperty(r[e].toLowerCase())});var a;if(i.length===0){a=null}else if(i.length>0){var o=r[i[0]].toLowerCase();a=n[o]}return a}},{key:"_highlightArea",value:function e(t){var n=this;var r=this.config.options.container;var i=this.contourToFill;r.selectAll(".map-contour-"+i).classed("map-contour-highlighted",function(e){return t(n._resolveFeature(e))})}},{key:"_highlightPoint",value:function e(t){this.config.options.container.selectAll("circle").classed("map-point-highlighted",function(e){var n=e.data;return t(n)}).attr("opacity",function(e){var n=e.data;return t(n)?m:.1})}},{key:"_createProjection",value:function e(t,n,r){var i=this.W;var o=this.H;var s=this.config.guide;var l=100;var c=[i/2,o/2];var f=r||t.center;var d=s.projection||t.projection||"mercator";var h=this._createD3Projection(d,f,l,c);var v=a.default.geo.path().projection(h);var p=v.bounds(u.default.feature(t,t.objects[n]));var g=l*i/(p[1][0]-p[0][0]);var m=l*o/(p[1][1]-p[0][1]);l=g<m?g:m;c=[i-(p[0][0]+p[1][0])/2,o-(p[0][1]+p[1][1])/2];return this._createD3Projection(d,f,l,c)}},{key:"_createD3Projection",value:function e(t,n,r,i){var o=a.default.geo[t];if(!o){console.log('Unknown projection "'+t+'"');console.log("See available projection types here: https://github.com/mbostock/d3/wiki/Geo-Projections");throw new Error('Invalid map: unknown projection "'+t+'"')}var s=o();var u=[{method:"scale",args:r},{method:"center",args:n},{method:"translate",args:i}].filter(function(e){return e.args});return u.reduce(function(e,t){if(e[t.method]){e=e[t.method](t.args)}return e},s)}}]);return t}(c.Element)},function(e,t,n){(function(e,n){n(t)})(this,function(e){"use strict";function t(){}function n(e){if(!e){return t}var n,r,i=e.scale[0],a=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,t){if(!t){n=r=0}e[0]=(n+=e[0])*i+o;e[1]=(r+=e[1])*a+s}}function r(e){if(!e){return t}var n,r,i=e.scale[0],a=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,t){if(!t){n=r=0}var u=(e[0]-o)/i|0,l=(e[1]-s)/a|0;e[0]=u-n;e[1]=l-r;n=u;r=l}}function i(e,t){var n,r=e.length,i=r-t;while(i<--r){n=e[i],e[i++]=e[r],e[r]=n}}function a(e,t){var n=0,r=e.length;while(n<r){var i=n+r>>>1;if(e[i]<t){n=i+1}else{r=i}}return n}function o(e,t){return t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(t){return s(e,t)})}:s(e,t)}function s(e,t){var n={type:"Feature",id:t.id,properties:t.properties||{},geometry:u(e,t)};if(t.id==null){delete n.id}return n}function u(e,t){var r=n(e.transform),a=e.arcs;function o(e,t){if(t.length){t.pop()}for(var n=a[e<0?~e:e],o=0,s=n.length,u;o<s;++o){t.push(u=n[o].slice());r(u,o)}if(e<0){i(t,s)}}function s(e){e=e.slice();r(e,0);return e}function u(e){var t=[];for(var n=0,r=e.length;n<r;++n){o(e[n],t)}if(t.length<2){t.push(t[0].slice())}return t}function l(e){var t=u(e);while(t.length<4){t.push(t[0].slice())}return t}function c(e){return e.map(l)}function f(e){var t=e.type;return t==="GeometryCollection"?{type:t,geometries:e.geometries.map(f)}:t in d?{type:t,coordinates:d[t](e)}:null}var d={Point:function(e){return s(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(s)},LineString:function(e){return u(e.arcs)},MultiLineString:function(e){return e.arcs.map(u)},Polygon:function(e){return c(e.arcs)},MultiPolygon:function(e){return e.arcs.map(c)}};return f(t)}function l(e,t){var n={},r={},i={},a=[],o=-1;t.forEach(function(n,r){var i=e.arcs[n<0?~n:n],a;if(i.length<3&&!i[1][0]&&!i[1][1]){a=t[++o],t[o]=n,t[r]=a}});t.forEach(function(e){var t=s(e),n=t[0],a=t[1],o,u;if(o=i[n]){delete i[o.end];o.push(e);o.end=a;if(u=r[a]){delete r[u.start];var l=u===o?o:o.concat(u);r[l.start=o.start]=i[l.end=u.end]=l}else{r[o.start]=i[o.end]=o}}else if(o=r[a]){delete r[o.start];o.unshift(e);o.start=n;if(u=i[n]){delete i[u.end];var c=u===o?o:u.concat(o);r[c.start=u.start]=i[c.end=o.end]=c}else{r[o.start]=i[o.end]=o}}else{o=[e];r[o.start=n]=i[o.end=a]=o}});function s(t){var n=e.arcs[t<0?~t:t],r=n[0],i;if(e.transform){i=[0,0],n.forEach(function(e){i[0]+=e[0],i[1]+=e[1]})}else{i=n[n.length-1]}return t<0?[i,r]:[r,i]}function u(e,t){for(var r in e){var i=e[r];delete t[i.start];delete i.start;delete i.end;i.forEach(function(e){n[e<0?~e:e]=1});a.push(i)}}u(i,r);u(r,i);t.forEach(function(e){if(!n[e<0?~e:e]){a.push([e])}});return a}function c(e){return u(e,f.apply(this,arguments))}function f(e,t,n){var r=[];function i(e){var t=e<0?~e:e;(u[t]||(u[t]=[])).push({i:e,g:c})}function a(e){e.forEach(i)}function o(e){e.forEach(a)}function s(e){if(e.type==="GeometryCollection"){e.geometries.forEach(s)}else if(e.type in f){c=e,f[e.type](e.arcs)}}if(arguments.length>1){var u=[],c;var f={LineString:a,MultiLineString:o,Polygon:o,MultiPolygon:function(e){e.forEach(o)}};s(t);u.forEach(arguments.length<3?function(e){r.push(e[0].i)}:function(e){if(n(e[0].g,e[e.length-1].g)){r.push(e[0].i)}})}else{for(var d=0,h=e.arcs.length;d<h;++d){r.push(d)}}return{type:"MultiLineString",arcs:l(e,r)}}function d(e){var t=e[0],n=e[1],r=e[2];return Math.abs((t[0]-r[0])*(n[1]-t[1])-(t[0]-n[0])*(r[1]-t[1]))}function h(e){var t=-1,n=e.length,r,i=e[n-1],a=0;while(++t<n){r=i;i=e[t];a+=r[0]*i[1]-r[1]*i[0]}return a/2}function v(e){return u(e,p.apply(this,arguments))}function p(e,t){var n={},r=[],i=[];t.forEach(function(e){if(e.type==="Polygon"){a(e.arcs)}else if(e.type==="MultiPolygon"){e.arcs.forEach(a)}});function a(e){e.forEach(function(t){t.forEach(function(t){(n[t=t<0?~t:t]||(n[t]=[])).push(e)})});r.push(e)}function o(t){return h(u(e,{type:"Polygon",arcs:[t]}).coordinates[0])>0}r.forEach(function(e){if(!e._){var t=[],r=[e];e._=1;i.push(t);while(e=r.pop()){t.push(e);e.forEach(function(e){e.forEach(function(e){n[e<0?~e:e].forEach(function(e){if(!e._){e._=1;r.push(e)}})})})}}});r.forEach(function(e){delete e._});return{type:"MultiPolygon",arcs:i.map(function(t){var r=[],i;t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){if(n[e<0?~e:e].length<2){r.push(e)}})})});r=l(e,r);if((i=r.length)>1){var a=o(t[0][0]);for(var s=0,u;s<i;++s){if(a===o(r[s])){u=r[0],r[0]=r[s],r[s]=u;break}}}return r})}}function g(e){var t={},n=e.map(function(){return[]});function r(e,n){e.forEach(function(e){if(e<0){e=~e}var r=t[e];if(r){r.push(n)}else{t[e]=[n]}})}function i(e,t){e.forEach(function(e){r(e,t)})}function o(e,t){if(e.type==="GeometryCollection"){e.geometries.forEach(function(e){o(e,t)})}else if(e.type in s){s[e.type](e.arcs,t)}}var s={LineString:r,MultiLineString:i,Polygon:i,MultiPolygon:function(e,t){e.forEach(function(e){i(e,t)})}};e.forEach(o);for(var u in t){for(var l=t[u],c=l.length,f=0;f<c;++f){for(var d=f+1;d<c;++d){var h=l[f],v=l[d],p;if((p=n[h])[u=a(p,v)]!==v){p.splice(u,0,v)}if((p=n[v])[u=a(p,h)]!==h){p.splice(u,0,h)}}}}return n}function m(e,t){return e[1][2]-t[1][2]}function y(){var e={},t=[],n=0;e.push=function(e){r(t[e._=n]=e,n++);return n};e.pop=function(){if(n<=0){return}var e=t[0],r;if(--n>0){r=t[n],i(t[r._=0]=r,0)}return e};e.remove=function(e){var a=e._,o;if(t[a]!==e){return}if(a!==--n){o=t[n],(m(o,e)<0?r:i)(t[o._=a]=o,a)}return a};function r(e,n){while(n>0){var r=(n+1>>1)-1,i=t[r];if(m(e,i)>=0){break}t[i._=n]=i;t[e._=n=r]=e}}function i(e,r){while(true){var i=r+1<<1,a=i-1,o=r,s=t[o];if(a<n&&m(t[a],s)<0){s=t[o=a]}if(i<n&&m(t[i],s)<0){s=t[o=i]}if(o===r){break}t[s._=r]=s;t[e._=r=o]=e}}return e}function b(e,t){var i=n(e.transform),a=r(e.transform),o=y();if(!t){t=d}e.arcs.forEach(function(e){var n=[],r=0,u,l,c,f;for(l=0,c=e.length;l<c;++l){f=e[l];i(e[l]=[f[0],f[1],Infinity],l)}for(l=1,c=e.length-1;l<c;++l){u=e.slice(l-1,l+2);u[1][2]=t(u);n.push(u);o.push(u)}for(l=0,c=n.length;l<c;++l){u=n[l];u.previous=n[l-1];u.next=n[l+1]}while(u=o.pop()){var d=u.previous,h=u.next;if(u[1][2]<r){u[1][2]=r}else{r=u[1][2]}if(d){d.next=h;d[2]=u[2];s(d)}if(h){h.previous=d;h[0]=u[0];s(h)}}e.forEach(a)});function s(e){o.remove(e);e[1][2]=t(e);o.push(e)}return e}var _="1.6.24";e.version=_;e.mesh=c;e.meshArcs=f;e.merge=v;e.mergeArcs=p;e.feature=o;e.neighbors=g;e.presimplify=b})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function e(){var t=[],n=[],r=1,i=1,a={};var o=5,s=.5;var u=.2,l=1,c=30,f=30,d=3;var h=false;var v;var p=function e(r){var i=t.length,a=0,o=t[r].x-n[r].x,s=n[r].y-t[r].y,h=Math.sqrt(o*o+s*s),v=true;if(h>0){a+=h*u}o/=h;s/=h;if(o>0&&s>0){a+=0*d}else if(o<0&&s>0){a+=1*d}else if(o<0&&s<0){a+=2*d}else{a+=3*d}var p=t[r].x,g=t[r].y-t[r].height+2,m=t[r].x+t[r].width,b=t[r].y+2;var _,w,x,T,C,k,S;for(var E=0;E<i;E++){if(E!=r){v=y(n[r].x,t[r].x,n[E].x,t[E].x,n[r].y,t[r].y,n[E].y,t[E].y);if(v){a+=l}_=t[E].x;x=t[E].y-t[E].height+2;w=t[E].x+t[E].width;T=t[E].y+2;C=Math.max(0,Math.min(w,m)-Math.max(_,p));k=Math.max(0,Math.min(T,b)-Math.max(x,g));S=C*k;a+=S*c}_=n[E].x-n[E].r;x=n[E].y-n[E].r;w=n[E].x+n[E].r;T=n[E].y+n[E].r;C=Math.max(0,Math.min(w,m)-Math.max(_,p));k=Math.max(0,Math.min(T,b)-Math.max(x,g));S=C*k;a+=S*f}return a};var g=function e(a){var s=Math.floor(Math.random()*t.length);var u=t[s].x;var l=t[s].y;var c;if(h){c=v(s,t,n)}else{c=p(s)}t[s].x+=(Math.random()-.5)*o;t[s].y+=(Math.random()-.5)*o;if(t[s].x>r){t[s].x=u}if(t[s].x<0){t[s].x=u}if(t[s].y>i){t[s].y=l}if(t[s].y<0){t[s].y=l}var f;if(h){f=v(s,t,n)}else{f=p(s)}var d=f-c;if(Math.random()<Math.exp(-d/a)){}else{t[s].x=u;t[s].y=l}};var m=function e(a){var o=Math.floor(Math.random()*t.length);var u=t[o].x;var l=t[o].y;var c;if(h){c=v(o,t,n)}else{c=p(o)}var f=(Math.random()-.5)*s;var d=Math.sin(f);var g=Math.cos(f);t[o].x-=n[o].x;t[o].y-=n[o].y;var m=t[o].x*g-t[o].y*d,y=t[o].x*d+t[o].y*g;t[o].x=m+n[o].x;t[o].y=y+n[o].y;if(t[o].x>r){t[o].x=u}if(t[o].x<0){t[o].x=u}if(t[o].y>i){t[o].y=l}if(t[o].y<0){t[o].y=l}var b;if(h){b=v(o,t,n)}else{b=p(o)}var _=b-c;if(Math.random()<Math.exp(-_/a)){}else{t[o].x=u;t[o].y=l}};var y=function e(t,n,r,i,a,o,s,u){var l,c;var f,d,h;f=(u-s)*(n-t)-(i-r)*(o-a);d=(i-r)*(a-s)-(u-s)*(t-r);h=(n-t)*(a-s)-(o-a)*(t-r);l=d/f;c=h/f;if(!(l<0||l>1||c<0||c>1)){return true}return false};var b=function e(t,n,r){return t-n/r};a.start=function(e){var n=t.length,r=1,i=1;for(var a=0;a<e;a++){for(var o=0;o<n;o++){if(Math.random()<.5){g(r)}else{m(r)}}r=b(r,i,e)}};a.width=function(e){if(!arguments.length){return r}r=e;return a};a.height=function(e){if(!arguments.length){return i}i=e;return a};a.label=function(e){if(!arguments.length){return t}t=e;return a};a.anchor=function(e){if(!arguments.length){return n}n=e;return a};a.alt_energy=function(e){if(!arguments.length){return p}v=e;h=true;return a};a.alt_schedule=function(){if(!arguments.length){return b}return a};return a};t.d3Labeler=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Point=undefined;var r=n(22);var i=n(7);var a=n(46);var o=n(9);var s=n(3);var u=n(1);var l=n(10);var c=n(2);var f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var v={init:function e(t){var n=Object.assign({},t);n.guide=s.utils.defaults(n.guide||{},{animationSpeed:0,avoidScalesOverflow:true,enableColorToBarPosition:false,maxHighlightDistance:32});n.guide.size=n.guide.size||{};n.guide.label=s.utils.defaults(n.guide.label||{},{position:["auto:avoid-label-label-overlap","auto:avoid-label-anchor-overlap","auto:adjust-on-label-overflow","auto:hide-on-label-label-overlap","auto:hide-on-label-anchor-overlap"]});var r=n.guide.avoidScalesOverflow;var a=n.guide.enableColorToBarPosition;n.transformRules=[function(e){var t=[e.scaleX,e.scaleY].sort(function(e,t){var n=e.discrete?1:0;var r=t.discrete?1:0;return r*t.domain().length-n*e.domain().length})[0];var n=e.scaleY===t;return n?i.GrammarRegistry.get("flip")(e):i.GrammarRegistry.get("identity")(e)},n.stack&&i.GrammarRegistry.get("stack"),a&&i.GrammarRegistry.get("positioningByColor")].filter(function(e){return e});n.adjustRules=[n.stack&&i.GrammarRegistry.get("adjustYScale"),function(e,t){var r=e.scaleSize.isEmptyScale();var a=s.utils.defaults(n.guide.size,{defMinSize:10,defMaxSize:r?10:40,enableDistributeEvenly:!r});var o=Object.assign({},t,{defMin:a.defMinSize,defMax:a.defMaxSize,minLimit:a.minSize,maxLimit:a.maxSize});var u=a.enableDistributeEvenly?i.GrammarRegistry.get("adjustSigmaSizeScale"):i.GrammarRegistry.get("adjustStaticSizeScale");return u(e,o)},r&&function(e,t){var n=Object.assign({},t,{sizeDirection:"xy"});return i.GrammarRegistry.get("avoidScalesOverflow")(e,n)}].filter(function(e){return e});return n},addInteraction:function e(){var t=this;var n=this.node();var r=function e(t,n){return function(e){return e===t?true:n}};n.on("highlight",function(e,n){return t.highlight(n)});n.on("data-hover",function(e,n){return t.highlight(r(n.data,null))})},draw:function e(){var t=this.node();var n=t.config;var i=n.options;i.container=i.slot(n.uid);var s=function e(t){return o.d3_transition(t,n.guide.animationSpeed)};var u=r.CSS_PREFIX+"dot dot i-role-element i-role-datum";var l=t.screenModel;var c=1e4;var f={fill:function e(t){return l.color(t)},class:function e(t){return u+" "+l.class(t)}};var d={r:function e(t){return Math.round(c*l.size(t)/2)/c},cx:function e(t){return l.x(t)},cy:function e(t){return l.y(t)}};var h=function e(){this.attr("class","frame").call(function(){var e=this.selectAll("circle").data(function(e){return e},l.id);s(e.enter().append("circle").attr(f)).attr(d);s(e.attr(f)).attr(d);s(e.exit()).attr({r:0}).remove();t.subscribe(e)});s(this).attr("opacity",1)};var v=l.toFibers();this._getGroupOrder=function(){var e=v.reduce(function(e,t,n){e.set(t,n);return e},new Map);return function(t){return e.get(t)}}();var p=i.container.selectAll(".frame").data(v,function(e){return l.group(e[0])});p.enter().append("g").attr("opacity",0).call(h);p.call(h);this._boundsInfo=this._getBoundsInfo(p.selectAll(".dot").reduce(function(e,t){return e.concat(t)},[]));s(p.exit()).attr("opacity",0).remove().selectAll("circle").attr("r",0);t.subscribe(new a.LayerLabels(l.model,l.flip,n.guide.label,i).draw(v))},_getBoundsInfo:function e(t){if(t.length===0){return null}var n=this.node().screenModel;var r=t.map(function(e){var t=f.default.select(e).data()[0];var r=n.x(t);var i=n.y(t);var a=n.size(t)/2;return{node:e,data:t,x:r,y:i,r:a}}).filter(function(e){return!isNaN(e.x)&&!isNaN(e.y)});var i=r.reduce(function(e,t){var n=t.x,r=t.y;e.left=Math.min(n,e.left);e.right=Math.max(n,e.right);e.top=Math.min(r,e.top);e.bottom=Math.max(r,e.bottom);return e},{left:Number.MAX_VALUE,right:Number.MIN_VALUE,top:Number.MAX_VALUE,bottom:Number.MIN_VALUE});var a=r.reduce(function(e,t){var n=t.x+","+t.y;if(!e[n]){e[n]=[]}e[n].push(t);return e},{});var o=f.default.geom.quadtree().x(function(e){return e[0].x}).y(function(e){return e[0].y})(Object.keys(a).map(function(e){return a[e]}));return{bounds:i,tree:o}},getClosestElement:function e(t,n){if(!this._boundsInfo){return null}var r=this._boundsInfo,i=r.bounds,a=r.tree;var o=this.node().config.options.container;var s=l.utilsDraw.getDeepTransformTranslate(o.node());var u=t-s.x;var c=n-s.y;var f=this.node().config.guide.maxHighlightDistance;if(u<i.left-f||u>i.right+f||c<i.top-f||c>i.bottom+f){return null}var d=(a.find([u,c])||[]).map(function(e){var t=Math.sqrt(Math.pow(u-e.x,2)+Math.pow(c-e.y,2));if(t>f){return null}var n=t<e.r?e.r-t:t;return{node:e.node,data:e.data,x:e.x,y:e.y,distance:t,secondaryDistance:n}}).filter(function(e){return e}).sort(function(e,t){return e.secondaryDistance-t.secondaryDistance});var h=d.findIndex(function(e){return e.distance!==d[0].distance||e.secondaryDistance!==d[0].secondaryDistance});var v=h<0?d:d.slice(0,h);if(v.length===1){return v[0]}var p=v.reduce(function(e,t){return e+t.x},0)/v.length;var g=v.reduce(function(e,t){return e+t.y},0)/v.length;var m=Math.atan2(g-c,p-u)+Math.PI;var y=v[Math.round((v.length-1)*m/2/Math.PI)];return y},highlight:function e(t){var n;var r="graphical-report__highlighted";var i="graphical-report__dimmed";var a=this.node().config.options.container;var o=(n={},h(n,r,function(e){return t(e)===true}),h(n,i,function(e){return t(e)===false}),n);a.selectAll(".dot").classed(o);a.selectAll(".i-role-label").classed(o);this._sortElements(t)},_sortElements:function e(t){var n=this;var r=this.node().config.options.container;var i=new Map;var a=new Map;r.selectAll(".frame").each(function(e){i.set(this,e.some(t));a.set(this,e)});var o=s.utils.createMultiSorter(function(e,t){return i.get(e)-i.get(t)},function(e,t){return n._getGroupOrder(a.get(e))-n._getGroupOrder(a.get(t))});u.utilsDom.sortChildren(r.node(),function(e,t){if(e.tagName==="g"&&t.tagName==="g"){return o(e,t)}return e.tagName.localeCompare(t.tagName)});l.utilsDraw.raiseElements(r,".dot",t)}};t.Point=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LayerLabels=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(10);var a=n(1);var o=n(3);var s=n(47);var u=n(48);var l=n(49);var c=n(50);var f=n(32);function d(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var v=function e(t,n,r,a,o,s,u,l){return i.utilsDraw.isIntersect(t,o,n,s,r,u,a,l)};var p=t.LayerLabels=function(){function e(t,n,r,i){var a=i.width,s=i.height,u=i.container;h(this,e);this.container=u;this.model=t;this.flip=n;this.w=a;this.h=s;this.guide=o.utils.defaults(r||{},{fontFamily:"Helvetica Neue, Segoe UI, Open Sans, Ubuntu, sans-serif",fontWeight:"normal",fontSize:10,fontColor:"#000",hideEqualLabels:false,position:[],tickFormat:null,tickFormatNullAlias:""})}r(e,[{key:"draw",value:function e(t){var n=this;var r=this.model;var i=this.guide;var o=s.LayerLabelsModel.seed(r,{fontSize:i.fontSize,fontColor:i.fontColor,flip:n.flip,formatter:f.FormatterRegistry.get(i.tickFormat,i.tickFormatNullAlias),labelRectSize:function e(t){return a.utilsDom.getLabelSize(t,i)}});var l={maxWidth:n.w,maxHeight:n.h,data:t.reduce(function(e,t){return e.concat(t)},[])};var c=i.position.filter(function(e){return e.indexOf("auto:")===-1});var h=c.map(u.LayerLabelsRules.getRule).reduce(function(e,t){return s.LayerLabelsModel.compose(e,t(e,l))},o);var v=function e(t,n){var r=t.length-1;var i=[];for(var a=0;a<=r;a++){var o=a===0?a:a-1;var s=a;var u=a===r?a:a+1;i.push(n(t[o],t[s],t[u]))}return i};var p=t.reduce(function(e,t){var n=t.map(function(e){return{data:e,x:h.x(e)+h.dx(e),y:h.y(e)+h.dy(e),w:h.w(e),h:h.h(e,l),hide:h.hide(e),extr:null,size:h.model.size(e),angle:h.angle(e),label:h.label(e),color:h.color(e)}});e.text=e.text.concat(n);e.edges=e.edges.concat(v(n,function(e,t,n){if(t.y===Math.max(t.y,e.y,n.y)){t.extr="min"}else if(t.y===Math.min(t.y,e.y,n.y)){t.extr="max"}else{t.extr="norm"}return{x0:e.x,x1:t.x,y0:e.y,y1:t.y}}));return e},{text:[],edges:[]});p.text=p.text.filter(function(e){return e.label}).map(function(e,t){return Object.assign(e,{i:t})});var g=this.guide.position.filter(function(e){return e.indexOf("auto:avoid")===0});p=p.text.length>0&&g.length>0?this.autoPosition(p,g):p;var m=this.guide.position.reduce(function(e,t){return Object.assign(e,d({},t,true))},{});p.text=p.text=m["auto:adjust-on-label-overflow"]?this.adjustOnOverflow(p.text,l):p.text;p.text=m["auto:hide-on-label-edges-overlap"]?this.hideOnLabelEdgesOverlap(p.text,p.edges):p.text;p.text=m["auto:hide-on-label-label-overlap"]?this.hideOnLabelLabelOverlap(p.text):p.text;p.text=m["auto:hide-on-label-anchor-overlap"]?this.hideOnLabelAnchorOverlap(p.text):p.text;var y=p.text;var b=function e(t){return function(e,n){return y[n][t]}};var _=b("x");var w=b("y");var x=b("angle");var T=b("color");var C=b("label");var k=function e(){this.style("fill",T).style("font-size",n.guide.fontSize+"px").style("display",function(e,t){return y[t].hide?"none":null}).attr("class","i-role-label").attr("text-anchor","middle").attr("transform",function(e,t){return"translate("+_(e,t)+","+w(e,t)+") rotate("+x(e,t)+")"}).text(C)};if(i.hideEqualLabels){y.filter(function(e){return!e.hide}).filter(function(e,t,n){return t<n.length-1&&e.label===n[t+1].label}).forEach(function(e){return e.hide=true})}var S=this.container.selectAll(".i-role-label").data(y.map(function(e){return e.data}));S.exit().remove();S.call(k);S.enter().append("text").call(k);return S}},{key:"autoPosition",value:function e(t,n){var r=function e(t,n){var r=4;var i=2;var a=r+(t.size+t.w)/2;var o=i+(t.size+t.h)/2;return{x:a*Math.cos(n),y:o*Math.sin(n)}};var i=t.edges;var a=t.text.map(function(e){var t={max:-Math.PI/2,min:Math.PI/2,norm:Math.random()*Math.PI*2};var n=r(e,t[e.extr]);return{i:e.i,x0:e.x,y0:e.y,x:e.x+n.x,y:e.y+n.y,w:e.w,h:e.h,size:e.size,hide:e.hide,extr:e.extr}}).filter(function(e){return!e.hide});var o=new l.AnnealingSimulator({items:a,transactor:function e(t){var n=t.x;var i=t.y;return{modify:function e(){var n={max:-Math.PI,min:Math.PI,norm:Math.PI*2};var i=4;var a=n[t.extr];var o=a/i+Math.random()*(a*(i-2))/i;var s=r(t,o);t.x=t.x0+s.x;t.y=t.y0+s.y;return t},revert:function e(){t.x=n;t.y=i;return t}}},penalties:n.map(function(e){return c.LayerLabelsPenalties.get(e)}).filter(function(e){return e}).map(function(e){return e(a,i)})});var s=o.start(5);t.text=s.reduce(function(e,t){var n=e[t.i];n.x=t.x;n.y=t.y;return e},t.text);return t}},{key:"hideOnLabelEdgesOverlap",value:function e(t,n){var r=this;var i=function e(t,n){var i=r.getLabelRect(t);return n.reduce(function(e,t){var n=v(i.x0,i.x1,t.x0,t.x1,i.y0,i.y1,t.y0,t.y1);var r=v(i.x0,i.x1,t.x0,t.x1,i.y1,i.y0,t.y0,t.y1);return e+(n+r)*2},0)};t.filter(function(e){return!e.hide}).forEach(function(e){if(i(e,n)>0){e.hide=true}});return t}},{key:"hideOnLabelLabelOverlap",value:function e(t){var n=this;var r={min:0,max:1,norm:2};var i={"min/min":function e(t,n){return n.y-t.y},"max/max":function e(t,n){return t.y-n.y},"min/max":function e(){return-1},"min/norm":function e(){return-1},"max/norm":function e(){return-1},"norm/norm":function e(t,n){return t.y-n.y}};var a=function e(t,a){var o=n.getLabelRect(t);var s=n.getLabelRect(a);var u=!t.hide&&!a.hide;var l=u*Math.max(0,Math.min(s.x1,o.x1)-Math.max(o.x0,s.x0));var c=u*Math.max(0,Math.min(s.y1,o.y1)-Math.max(o.y0,s.y0));if(l*c>0){var f=[t,a];f.sort(function(e,t){return r[e.extr]-r[t.extr]});var d=i[f[0].extr+"/"+f[1].extr](f[0],f[1])<0?f[0]:f[1];d.hide=true}};t.filter(function(e){return!e.hide}).sort(function(e,t){return r[e.extr]-r[t.extr]}).forEach(function(e){t.forEach(function(t){if(e.i!==t.i){a(e,t)}})});return t}},{key:"getLabelRect",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return{x0:t.x-t.w/2-n,x1:t.x+t.w/2+n,y0:t.y-t.h/2-n,y1:t.y+t.h/2+n}}},{key:"getPointRect",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return{x0:t.x-t.size/2-n,x1:t.x+t.size/2+n,y0:t.y-t.size/2-n,y1:t.y+t.size/2+n}}},{key:"hideOnLabelAnchorOverlap",value:function e(t){var n=this;var r=function e(t,r){var i=n.getLabelRect(t,2);var a=n.getPointRect(r,2);var o=Math.max(0,Math.min(a.x1,i.x1)-Math.max(a.x0,i.x0));var s=Math.max(0,Math.min(a.y1,i.y1)-Math.max(a.y0,i.y0));return o*s>.001};t.filter(function(e){return!e.hide}).forEach(function(e){var n=t.length;for(var i=0;i<n;i++){var a=t[i];if(e.i!==a.i&&r(e,a)){e.hide=true;break}}});return t}},{key:"adjustOnOverflow",value:function e(t,n){var r=n.maxWidth,i=n.maxHeight;return t.map(function(e){if(!e.hide){e.x=Math.min(Math.max(e.x,e.w/2),r-e.w/2);e.y=Math.max(Math.min(e.y,i-e.h/2),e.h/2)}return e})}}]);return e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function e(t){return function(){return t}};var a=t.LayerLabelsModel=function(){function e(t){r(this,e);this.model=t.model;this.x=t.x||i(0);this.y=t.y||i(0);this.dx=t.dx||i(0);this.dy=t.dy||i(0);this.w=t.w||i(0);this.h=t.h||i(0);this.hide=t.hide||i(false);this.label=t.label||i("");this.color=t.color||i("");this.angle=t.angle||i(0)}n(e,null,[{key:"seed",value:function t(n,r){var i=r.fontColor,a=r.flip,o=r.formatter,s=r.labelRectSize,u=r.paddingKoeff,l=u===undefined?.5:u;var c=a?n.yi:n.xi;var f=a?n.xi:n.yi;var d=function e(t){return o(n.label(t))};return new e({model:n,x:function e(t){return c(t)},y:function e(t){return f(t)},dy:function e(t){return s(d(t)).height*l},w:function e(t){return s(d(t)).width},h:function e(t){return s(d(t)).height},label:d,color:function e(){return i},angle:function e(){return 0}})}},{key:"compose",value:function t(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return Object.keys(r).reduce(function(e,t){e[t]=r[t];return e},new e(n))}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LayerLabelsRules=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(47);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o={};var s=t.LayerLabelsRules=function(){function e(){a(this,e)}r(e,null,[{key:"regRule",value:function e(t,n){o[t]=n;return this}},{key:"getRule",value:function e(t){return o[t]}}]);return e}();var u=function e(t,n,r){return r<n?Math.max(1,Math.floor(r*t.length/n))-1:t.length};var l=function e(t,n){return n===0?"":t.slice(0,n).replace(/\.+$/g,"")+"‚Ä¶"};var c=function e(t,n){return t.discrete||!t.discrete&&n[t.dim]>=0};var f=function e(t,n){return!t.discrete&&n[t.dim]<0};var d=function e(t,n){return t.w(n)/2+Math.floor(t.model.size(n)/5)};var h=function e(t,n){return t.h(n)/2+Math.floor(t.model.size(n)/5)};var v=function e(t){return function(e){return{dx:function n(r){var i=e.model.scaleY;if(t[2]==="+"&&!c(i,r)){return e.dx(r)}if(t[2]==="-"&&!f(i,r)){return e.dx(r)}var a=t[1];var o=t[0]===t[0].toUpperCase()?1:0;return e.dx(r)+a*o*e.model.size(r)/2+a*d(e,r)}}}};var p=function e(t){return function(e){return{dy:function n(r){var i=e.model.scaleY;if(t[2]==="+"&&!c(i,r)){return e.dy(r)}if(t[2]==="-"&&!f(i,r)){return e.dy(r)}var a=t[1];var o=t[0]===t[0].toUpperCase()?1:0;return e.dy(r)+a*o*e.model.size(r)/2+a*h(e,r)}}}};s.regRule("l",v(["l",-1,null])).regRule("L",v(["L",-1,null])).regRule("l+",v(["l",-1,"+"])).regRule("l-",v(["l",-1,"-"])).regRule("L+",v(["L",-1,"+"])).regRule("L-",v(["L",-1,"-"])).regRule("r",v(["r",1,null])).regRule("R",v(["R",1,null])).regRule("r+",v(["r",1,"+"])).regRule("r-",v(["r",1,"-"])).regRule("R+",v(["R",1,"+"])).regRule("R-",v(["R",1,"-"])).regRule("t",p(["t",-1,null])).regRule("T",p(["T",-1,null])).regRule("t+",p(["t",-1,"+"])).regRule("t-",p(["t",-1,"-"])).regRule("T+",p(["T",-1,"+"])).regRule("T-",p(["T",-1,"-"])).regRule("b",p(["b",1,null])).regRule("B",p(["B",1,null])).regRule("b+",p(["b",1,"+"])).regRule("b-",p(["b",1,"-"])).regRule("B+",p(["B",1,"+"])).regRule("B-",p(["B",1,"-"])).regRule("rotate-on-size-overflow",function(e,t){var n=t.data;var r=function t(n){return e.model.size(n)<e.w(n)};var i=n.reduce(function(e,t){return e+(r(t)?1:0)},0);var a=i/n.length>.5;var o={};if(a){var s=.5;o={angle:function e(){return-90},w:function t(n){return e.h(n)},h:function t(n){return e.w(n)},dx:function t(n){return e.h(n)*s-2},dy:function e(){return 0}}}return o}).regRule("hide-by-label-height-vertical",function(e){return{hide:function t(n){var r=void 0;var i=void 0;if(e.angle(n)===0){i=e.h(n);r=Math.abs(e.model.y0(n)-e.model.yi(n))}else{i=e.w(n);r=e.model.size(n)}if(i>r){return true}return e.hide(n)}}}).regRule("cut-label-vertical",function(e){return{h:function t(n){var r=e.h(n);if(Math.abs(e.angle(n))>0){var i=e.label(n);var a=Math.abs(e.model.y0(n)-e.model.yi(n));var o=u(i,r,a);return o<i.length?a:r}return r},w:function t(n){var r=e.w(n);if(e.angle(n)===0){var i=e.label(n);var a=e.model.size(n);var o=u(i,r,a);return o<i.length?a:r}return r},label:function t(n){var r=void 0;var i=void 0;if(e.angle(n)===0){r=e.w(n);i=e.model.size(n)}else{r=e.h(n);i=Math.abs(e.model.y0(n)-e.model.yi(n))}var a=e.label(n);var o=u(a,r,i);return o<a.length?l(a,o):a},dy:function t(n){var r=e.dy(n);if(e.angle(n)!==0){var i=e.h(n);var a=Math.abs(e.model.y0(n)-e.model.yi(n));var o=e.label(n);var s=u(o,i,a);return s<o.length?a*r/i:r}return r}}}).regRule("cut-outer-label-vertical",function(e){return{h:function t(n,r){var i=e.h(n);if(Math.abs(e.angle(n))>0){var a=e.label(n);var o=e.model.y0(n)<e.model.yi(n)?r.maxHeight-e.model.yi(n):e.model.yi(n);var s=u(a,i,o);return s<a.length?o:i}return i},w:function t(n){var r=e.w(n);if(e.angle(n)===0){var i=e.label(n);var a=e.model.size(n);var o=u(i,r,a);return o<i.length?a:r}return r},label:function t(n,r){var i=void 0;var a=void 0;if(e.angle(n)===0){i=e.w(n);a=e.model.size(n)}else{i=e.h(n);a=e.model.y0(n)<e.model.yi(n)?r.maxHeight-e.model.yi(n):e.model.yi(n)}var o=e.label(n);var s=u(o,i,a);return s<o.length?l(o,s):o},dy:function t(n,r){var i=e.dy(n);if(e.angle(n)!==0){var a=e.h(n);var o=e.model.y0(n)<e.model.yi(n)?r.maxHeight-e.model.yi(n):e.model.yi(n);var s=e.label(n);var l=u(s,a,o);return l<s.length?o*i/a:i}return i}}}).regRule("from-beginning",function(e){var t=function t(n){return e.model.y0(n)};return e.model.flip?{x:t}:{y:t}}).regRule("to-end",function(e){var t=function t(n){return e.model.yi(n)};return e.model.flip?{x:t}:{y:t}}).regRule("towards",function(e){var t=function e(t,n){return t.model.yi(n)-t.model.y0(n)>=0?1:-1};var n=e.model.flip?d:h;var r=function r(i){return t(e,i)*n(e,i)};return e.model.flip?{dx:r}:{dy:r}}).regRule("inside-start-then-outside-end-horizontal",function(e,t){var n=[s.getRule("from-beginning"),s.getRule("towards"),s.getRule("cut-label-horizontal")].reduce(function(e,n){return i.LayerLabelsModel.compose(e,n(e,t))},e);var r=[s.getRule("to-end"),s.getRule("towards"),s.getRule("cut-outer-label-horizontal")].reduce(function(e,n){return i.LayerLabelsModel.compose(e,n(e,t))},e);var a=function e(t){return n.label(t).length>=r.label(t).length};return Object.assign({},n,["x","dx","hide","label"].reduce(function(e,t){e[t]=function(e){return(a(e)?n:r)[t](e)};return e},{}))}).regRule("inside-start-then-outside-end-vertical",function(e,t){var n=[s.getRule("from-beginning"),s.getRule("towards"),s.getRule("cut-label-vertical")].reduce(function(e,n){return i.LayerLabelsModel.compose(e,n(e,t))},e);var r=[s.getRule("to-end"),s.getRule("towards"),s.getRule("cut-outer-label-vertical")].reduce(function(e,n){return i.LayerLabelsModel.compose(e,n(e,t))},e);var a=function e(t){return n.label(t).length>=r.label(t).length};return Object.assign({},n,["y","dy","hide","label"].reduce(function(e,t){e[t]=function(e){return(a(e)?n:r)[t](e)};return e},{}))}).regRule("outside-then-inside-horizontal",function(e,t){var n=["r+","l-","cut-outer-label-horizontal"].map(s.getRule).reduce(function(e,n){return i.LayerLabelsModel.compose(e,n(e,t))},e);var r=["r-","l+","hide-by-label-height-horizontal","cut-label-horizontal"].map(s.getRule).reduce(function(e,n){return i.LayerLabelsModel.compose(e,n(e,t))},e);var a=function e(t){return r.label(t).length>n.label(t).length};return Object.assign({},n,["x","dx","hide","label"].reduce(function(e,t){e[t]=function(e){return(a(e)?r:n)[t](e)};return e},{}))}).regRule("outside-then-inside-vertical",function(e,t){var n=["t+","b-","cut-outer-label-vertical"].map(s.getRule).reduce(function(e,n){return i.LayerLabelsModel.compose(e,n(e,t))},e);var r=["t-","b+","hide-by-label-height-vertical","cut-label-vertical"].map(s.getRule).reduce(function(e,n){return i.LayerLabelsModel.compose(e,n(e,t))},e);var a=function e(i){return r.label(i,t).length>n.label(i,t).length};return Object.assign({},n,["y","dy","hide","label"].reduce(function(e,i){e[i]=function(e){return(a(e)?r:n)[i](e,t)};return e},{}))}).regRule("hide-by-label-height-horizontal",function(e){return{hide:function t(n){if(e.model.size(n)<e.h(n)){return true}return e.hide(n)}}}).regRule("cut-label-horizontal",function(e){return{dx:function t(n){var r=e.label(n);var i=e.w(n);var a=Math.abs(e.model.y0(n)-e.model.yi(n));var o=u(r,i,a);var s=e.dx(n);return o<r.length?a*s/i:s},w:function t(n){var r=e.label(n);var i=e.w(n);var a=Math.abs(e.model.y0(n)-e.model.yi(n));var o=u(r,i,a);return o<r.length?a:i},label:function t(n){var r=e.label(n);var i=e.w(n);var a=Math.abs(e.model.y0(n)-e.model.yi(n));var o=u(r,i,a);return o<r.length?l(r,o):r}}}).regRule("cut-outer-label-horizontal",function(e,t){return{dx:function n(r){var i=e.label(r);var a=e.w(r);var o=e.model.y0(r)<e.model.yi(r)?t.maxWidth-e.model.yi(r):e.model.yi(r);var s=u(i,a,o);var l=e.dx(r);return s<i.length?o*l/a:l},w:function n(r){var i=e.label(r);var a=e.w(r);var o=e.model.y0(r)<e.model.yi(r)?t.maxWidth-e.model.yi(r):e.model.yi(r);var s=u(i,a,o);return s<i.length?o:a},label:function n(r){var i=e.label(r);var a=e.w(r);var o=e.model.y0(r)<e.model.yi(r)?t.maxWidth-e.model.yi(r):e.model.yi(r);var s=u(i,a,o);return s<i.length?l(i,s):i}}}).regRule("keep-within-diameter-or-top",function(e){return{dy:function t(n){if(e.model.size(n)/e.w(n)<1){return e.dy(n)-e.h(n)/2-e.model.size(n)/2}return e.dy(n)}}}).regRule("keep-in-box",function(e,t){var n=t.maxWidth,r=t.maxHeight;return{dx:function t(r){var t=e.dx(r);var i=e.x(r)+t;var a=e.w(r);var o=i-a/2;var s=i+a/2;var u=0-o;if(u>0){return t+u}var l=s-n;if(l>0){return t-l}return t},dy:function t(n){var t=e.dy(n);var i=e.y(n)+t;var a=e.h(n);var o=i-a/2;var s=i+a/2;var u=0-o;if(u>0){return 0}var l=s-r;if(l>0){return t-l}return t}}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=t.AnnealingSimulator=function(){function e(t){r(this,e);this.minError=Number.MAX_VALUE;this.items=t.items;this.revision=this.items.map(function(e){return{i:e.i,x:e.x,y:e.y}});this.penalties=t.penalties;this.transactor=t.transactor;this.cooling_schedule=t.cooling_schedule||function(e,t,n){return e-t/n}}n(e,[{key:"energy",value:function e(t){return this.penalties.reduce(function(e,n){return e+n(t)},0)}},{key:"move",value:function e(t){var n=Math.floor(Math.random()*this.items.length);var r=this.transactor(this.items[n]);var i=this.energy(n);this.items[n]=r.modify();var a=this.energy(n);var o=a-i;var s=o<0?1:Math.exp(-o/t);if(Math.random()>=s){this.items[n]=r.revert()}else if(a<this.minError){this.minError=a;this.revision=this.items.map(function(e){return{i:e.i,x:e.x,y:e.y}})}}},{key:"start",value:function e(t){var n=1;var r=1;var i=this.items.length;e:{for(var a=0;a<t;a++){for(var o=0;o<i;o++){this.move(n);if(this.minError<=10){break e}}n=this.cooling_schedule(n,r,t)}}return this.revision}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LayerLabelsPenalties=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(10);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function e(t,n,r,a,o,s,u,l){return i.utilsDraw.isIntersect(t,o,n,s,r,u,a,l)};var s={};var u=t.LayerLabelsPenalties=function(){function e(){a(this,e)}r(e,null,[{key:"reg",value:function e(t,n){s[t]=n;return this}},{key:"get",value:function e(t){return s[t]}}]);return e}();u.reg("auto:avoid-label-label-overlap",function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;return function(t){var r=e[t].x;var i=e[t].y-e[t].h+2;var a=e[t].x+e[t].w;var o=e[t].y+2;return e.reduce(function(e,s,u){var l=u!==t;var c=s.x;var f=s.y-s.h+2;var d=s.x+s.w;var h=s.y+2;var v=Math.max(0,Math.min(d,a)-Math.max(c,r));var p=Math.max(0,Math.min(h,o)-Math.max(f,i));var g=v*p;return e+l*(g*n)},0)}}).reg("auto:avoid-label-anchor-overlap",function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;return function(t){var r=e[t];var i=r.x-r.w/2;var a=r.x+r.w/2;var o=r.y-r.h/2+2;var s=r.y+r.h/2+2;return e.reduce(function(e,t){var r=t.x0-t.size/2;var u=t.x0+t.size/2;var l=t.y0-t.size/2;var c=t.y0+t.size/2;var f=Math.max(0,Math.min(u,a)-Math.max(r,i));var d=Math.max(0,Math.min(c,s)-Math.max(l,o));var h=f*d;return e+h*n},0)}}).reg("auto:avoid-label-edges-overlap",function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;return function(r){var i=e[r];var a=i.x-i.w/2;var s=i.x+i.w/2;var u=i.y-i.h/2;var l=i.y+i.h/2;return t.reduce(function(e,t){var r=o(a,s,t.x0,t.x1,u,l,t.y0,t.y1);var i=o(a,s,t.x0,t.x1,l,u,t.y0,t.y1);return e+(r+i)*n},0)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Area=undefined;var r=n(2);var i=h(r);var a=n(22);var o=n(3);var s=n(52);var u=n(53);var l=n(7);var c=n(9);var f=n(13);var d=n(54);function h(e){return e&&e.__esModule?e:{default:e}}var v={draw:s.BasePath.draw,getClosestElement:s.BasePath.getClosestElement,highlight:s.BasePath.highlight,highlightDataPoints:s.BasePath.highlightDataPoints,addInteraction:s.BasePath.addInteraction,_getBoundsInfo:s.BasePath._getBoundsInfo,_sortElements:s.BasePath._sortElements,init:function e(t){var n=s.BasePath.init(t);var r=n.stack;n.transformRules=[n.flip&&l.GrammarRegistry.get("flip"),!r&&l.GrammarRegistry.get("groupOrderByAvg"),r&&s.BasePath.grammarRuleFillGaps,r&&l.GrammarRegistry.get("stack")];n.adjustRules=[function(e,t){var r=e.scaleSize.isEmptyScale();var i=o.utils.defaults(n.guide.size||{},{defMinSize:2,defMaxSize:r?6:40});var a=Object.assign({},t,{defMin:i.defMinSize,defMax:i.defMaxSize,minLimit:i.minSize,maxLimit:i.maxSize});return l.GrammarRegistry.get("adjustStaticSizeScale")(e,a)}];return n},buildModel:function e(t){var n=s.BasePath.baseModel(t);var r=this.node().config.guide;var o=u.getLineClassesByCount(t.model.scaleColor.domain().length);var l=a.CSS_PREFIX+"area area i-role-path "+o+" "+r.cssClass+" ";n.groupAttributes={class:function e(t){return l+" "+n.class(t[0])+" frame"}};var h=function e(r){return{id:t.id(r),x:n.x(r),y:n.y(r)}};var v=function e(r){return{id:t.id(r),x:n.x0(r),y:n.y0(r)}};var p={fill:function e(t){return n.color(t[0])},stroke:function e(t){var r=n.color(t[0]);if(r.length>0){r=i.default.rgb(r).darker(1)}return r}};n.pathAttributesEnterInit=p;n.pathAttributesUpdateDone=p;var g=f.getInterpolatorSplineType(r.interpolate)==="polyline";n.pathElement=g?"polygon":"path";n.pathTween={attr:g?"points":"d",fn:c.d3_createPathTween(g?"points":"d",g?d.getAreaPolygon:d.getSmoothAreaPath,[h,v],t.id,r.interpolate)};return n}};t.Area=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BasePath=undefined;var r=function(){function e(e,t){var n=[];var r=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(r=(s=o.next()).done);r=true){n.push(s.value);if(t&&n.length===t){break}}}catch(e){i=true;a=e}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(i){throw a}}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var i=n(46);var a=n(22);var o=n(9);var s=n(3);var u=n(1);var l=n(10);var c=n(2);var f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function h(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function v(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var p="taucharts_synthetic_record";var g=function e(t){return t[p]!==true};var m={grammarRuleFillGaps:function e(t){var n=t.data();var r=s.utils.groupBy(n,t.group);var i=Object.keys(r).sort(function(e,n){return t.order(e)-t.order(n)}).reduce(function(e,t){return e.concat([r[t]])},[]);var a=t.scaleX.dim;var o=t.scaleY.dim;var u=t.scaleColor.dim;var l=t.scaleSplit.dim;var c=function e(t){return t[o]>=0?1:-1};var f=function e(n,r,i){var s;var c=[n,t.id(r),i].join(" ");return s={},v(s,a,n),v(s,o,i*1e-10),v(s,l,r[l]),v(s,u,r[u]),v(s,p,true),v(s,p+"id",c),s};var d=function e(t,n,r){var i=s.utils.groupBy(n,function(e){return e[a]});var o=n[0];return t.reduce(function(e,t){return e.concat(i[t]||f(t,o,r))},[])};var h=function e(t,n){return t-n};var g=s.utils.unique(i.reduce(function(e,t){return e.concat(t.map(function(e){return e[a]}))},[])).sort(h);var m=i.map(function(e){return e.sort(function(e,n){return t.xi(e)-t.xi(n)})}).reduce(function(e,t){var n=s.utils.groupBy(t,c);return Object.keys(n).reduce(function(e,t){return e.concat(d(g,n[t],t))},e)},[]);return{data:function e(){return m},id:function e(n){return n[p]?n[p+"id"]:t.id(n)}}},init:function e(t){var n=t;n.guide=s.utils.defaults(n.guide||{},{animationSpeed:0,cssClass:"",maxHighlightDistance:32,widthCssClass:"",color:{},label:{}});n.guide.label=s.utils.defaults(n.guide.label,{fontSize:11,hideEqualLabels:true,position:["auto:avoid-label-label-overlap","auto:avoid-label-anchor-overlap","auto:avoid-label-edges-overlap","auto:adjust-on-label-overflow","auto:hide-on-label-label-overlap","auto:hide-on-label-edges-overlap"]});n.guide.color=s.utils.defaults(n.guide.color||{},{fill:null});if(["never","hover","always"].indexOf(n.guide.showAnchors)<0){n.guide.showAnchors="hover"}n.transformRules=[];n.adjustRules=[];return n},baseModel:function e(t){var n="i-role-datum";var r=a.CSS_PREFIX+"dot-line dot-line i-role-dot "+n+" "+a.CSS_PREFIX+"dot ";var i=1e4;var e={gog:t.model,x:t.x,y:t.y,x0:t.x0,y0:t.y0,size:t.size,group:t.group,order:t.order,color:t.color,class:t.class,groupAttributes:{},pathAttributesUpdateInit:{},pathAttributesUpdateDone:{},pathAttributesEnterInit:{},pathAttributesEnterDone:{},pathElement:null,dotAttributes:{r:function t(n){return Math.round(i*e.size(n)/2)/i},cx:function t(n){return e.x(n)},cy:function t(n){return e.y(n)},fill:function t(n){return e.color(n)},class:function t(n){return r+" "+e.class(n)}},dotAttributesDefault:{r:0,cy:function t(n){return e.y0(n)}}};return e},addInteraction:function e(){var t=this;var n=this.node();var r=this.node().config;var i=function e(t,n){return function(e){return e===t?true:n}};n.on("highlight",function(e,n){return t.highlight(n)});n.on("highlight-data-points",function(e,n){return t.highlightDataPoints(n)});if(r.guide.showAnchors!=="never"){n.on("data-hover",function(e,n){return t.highlightDataPoints(i(n.data,null))})}},draw:function e(){var t=this.node();var n=t.config;var a=n.guide;var s=n.options;s.container=s.slot(n.uid);var u=t.screenModel;var l=this.buildModel(u);var c=o.d3_animationInterceptor;var d=function e(){this.attr(l.groupAttributes);var r=this.selectAll("circle").data(function(e){return e.length<=1?e:[]},u.id);r.exit().call(c(a.animationSpeed,null,{r:0},function(e){return f.default.select(e).remove()}));r.call(c(a.animationSpeed,null,l.dotAttributes));r.enter().append("circle").call(c(a.animationSpeed,l.dotAttributesDefault,l.dotAttributes));t.subscribe(r);var i=function e(t){if(n.guide.animationSpeed>0){t.attr(l.pathTween.attr,function(e){return l.pathTween.fn.call(this,e)(0)});o.d3_transition(t,n.guide.animationSpeed,"pathTransition").attrTween(l.pathTween.attr,l.pathTween.fn)}else{t.attr(l.pathTween.attr,function(e){return l.pathTween.fn.call(this,e)(1)})}};var s=this.selectAll(l.pathElement).data(function(e){return e.length>1?[e]:[]},y);s.exit().remove();s.call(c(a.animationSpeed,l.pathAttributesUpdateInit,l.pathAttributesUpdateDone,l.afterPathUpdate)).call(i);s.enter().append(l.pathElement).call(c(a.animationSpeed,l.pathAttributesEnterInit,l.pathAttributesEnterDone,l.afterPathUpdate)).call(i);t.subscribe(s);if(a.showAnchors!=="never"){var d="i-data-anchor";var h={r:a.showAnchors==="hover"?0:function(e){return u.size(e)/2},cx:function e(t){return l.x(t)},cy:function e(t){return l.y(t)},opacity:a.showAnchors==="hover"?0:1,fill:function e(t){return u.color(t)},class:d};var v=this.selectAll("."+d).data(function(e){return e.filter(g)},u.id);v.exit().remove();v.call(c(a.animationSpeed,null,h));v.enter().append("circle").call(c(a.animationSpeed,{r:0},h));t.subscribe(v)}};var v=u.toFibers();var p=v.map(function(e){return e.filter(g)});var m=s.container.selectAll(".frame");var y=function(){var e=m.empty()?[]:m.data();var t=new Map;m.each(function(e){t.set(e,Number(this.getAttribute("data-id")))});var n=e.reduce(function(e,t){e.set(t,t.map(u.id));return e},new Map);var i=new Map;var a=Math.max.apply(Math,[0].concat(h(Array.from(t.values()))));return function(e){if(i.has(e)){return i.get(e)}var o=e.map(function(e){return u.id(e)});var s=(Array.from(n.entries()).find(function(e){var t=r(e,2),n=t[1];return o.some(function(e){return n.some(function(t){return t===e})})})||[null])[0];var l;if(s){l=t.get(s)}else{++a;l=a}i.set(e,l);return l}}();this._getDataSetId=y;var b=m.data(v,y);b.exit().remove();b.call(d);b.enter().append("g").attr("data-id",y).call(d);b.order();this._boundsInfo=this._getBoundsInfo(s.container.selectAll(".i-data-anchor")[0]);t.subscribe(new i.LayerLabels(u.model,n.flip,n.guide.label,s).draw(p))},_getBoundsInfo:function e(t){if(t.length===0){return null}var n=this.node().screenModel;var r=this.node().config.flip;var i=t.map(function(e){var t=f.default.select(e).data()[0];var r=n.x(t);var i=n.y(t);return{node:e,data:t,x:r,y:i}}).filter(function(e){return!isNaN(e.x)&&!isNaN(e.y)});var a=i.reduce(function(e,t){var n=t.x,r=t.y;e.left=Math.min(n,e.left);e.right=Math.max(n,e.right);e.top=Math.min(r,e.top);e.bottom=Math.max(r,e.bottom);return e},{left:Number.MAX_VALUE,right:Number.MIN_VALUE,top:Number.MAX_VALUE,bottom:Number.MIN_VALUE});var o=s.utils.unique(i.map(r?function(e){return e.y}:function(e){return e.x})).sort(function(e,t){return e-t});var u=o.reduce(function(e,t){return e[t]=[],e},{});i.forEach(function(e){var t=o.find(r?function(t){return e.y===t}:function(t){return e.x===t});u[t].push(e)});var l=function e(t){if(t.length===1){return u[t]}var n=Math.ceil(t.length/2);var r=(t[n-1]+t[n])/2;return{middle:r,lower:e(t.slice(0,n)),greater:e(t.slice(n))}};var c=l(o);return{bounds:a,tree:c}},getClosestElement:function e(t,n){if(!this._boundsInfo){return null}var r=this._boundsInfo,i=r.bounds,a=r.tree;var o=this.node().config.options.container;var s=this.node().config.flip;var u=l.utilsDraw.getDeepTransformTranslate(o.node());var c=this.node().config.guide.maxHighlightDistance;if(t<i.left+u.x-c||t>i.right+u.x+c||n<i.top+u.y-c||n>i.bottom+u.y+c){return null}var f=s?n-u.y:t-u.x;var d=function e(t){if(Array.isArray(t)){return t}return e(f>t.middle?t.greater:t.lower)}(a).map(function(e){var r=e.x+u.x;var i=e.y+u.y;var a=Math.abs(s?n-i:t-r);var o=Math.abs(s?t-r:n-i);return{node:e.node,data:e.data,distance:a,secondaryDistance:o,x:r,y:i}}).sort(function(e,t){return e.distance===t.distance?e.secondaryDistance-t.secondaryDistance:e.distance-t.distance});var h=d.findIndex(function(e){return e.distance!==d[0].distance||e.secondaryDistance!==d[0].secondaryDistance});var v=h<0?d:d.slice(0,h);if(v.length===1){return v[0]}var p=v.reduce(function(e,t){return e+t.x},0)/v.length;var g=v.reduce(function(e,t){return e+t.y},0)/v.length;var m=Math.atan2(g-n,p-t)+Math.PI;var y=v[Math.round((v.length-1)*m/2/Math.PI)];return y},highlight:function e(t){var n,r;var i=this.node().config.options.container;var a="graphical-report__highlighted";var o="graphical-report__dimmed";var s=i.selectAll(".i-role-path");var u=s.data().filter(function(e){return e.filter(g).some(t)});var l=u.length>0;s.classed((n={},v(n,a,function(e){return l&&u.indexOf(e)>=0}),v(n,o,function(e){return l&&u.indexOf(e)<0}),n));var c=(r={},v(r,a,function(e){return t(e)===true}),v(r,o,function(e){return t(e)===false}),r);i.selectAll(".i-role-dot").classed(c);i.selectAll(".i-role-label").classed(c);this._sortElements(t)},highlightDataPoints:function e(t){var n="i-data-anchor";var r=this.node().screenModel;var i=this.node().config.guide.showAnchors==="hover";var o=4;var s=1.25;var l=this.node();var c=l.config.options.container;var f=c.selectAll("."+n).attr({r:i?function(e){return t(e)?Math.max(o,r.size(e)/2):0}:function(e){var n=r.size(e)/2;if(t(e)){n=Math.max(o,Math.ceil(n*s))}return n},opacity:i?function(e){return t(e)?1:0}:1,fill:function e(t){return r.color(t)},class:function e(t){return u.utilsDom.classes(n,r.class(t))}}).classed(a.CSS_PREFIX+"highlighted",t);var d=l.config.flip;var h=f.filter(t);var v=c.select(".cursor-line");if(h.empty()){v.remove()}else{if(v.empty()){v=c.append("line")}var p=l.screenModel.model;var g=p.xi(h.data()[0]);var m=p.xi(h.data()[0]);var y=p.scaleY.domain();var b=p.scaleY(y[0]);var _=p.scaleY(y[1]);v.attr("class","cursor-line").attr("x1",d?b:g).attr("y1",d?g:b).attr("x2",d?_:m).attr("y2",d?m:_)}this._sortElements(t)},_sortElements:function e(t){var n=this.node().config.options.container;var r=new Map;var i=new Map;var a=this._getDataSetId;n.selectAll(".i-role-path").each(function(e){r.set(this,a(e));i.set(this,e.filter(g).some(t))});var o=s.utils.createMultiSorter(function(e,t){return i.get(e)-i.get(t)},function(e,t){return r.get(e)-r.get(t)});var l={line:0,g:1,text:2};u.utilsDom.sortChildren(n.node(),function(e,t){if(e.tagName==="g"&&t.tagName==="g"){return o(e,t)}return l[e.tagName]-l[t.tagName]})}};t.BasePath=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getLineClassesByCount=t.getLineClassesByWidth=undefined;var r=n(22);var i=[1,2,3,4,5];var a=i.map(function(e){return r.CSS_PREFIX+"line-opacity-"+e});var o=i.map(function(e){return r.CSS_PREFIX+"line-width-"+e});function s(e){return a[e-1]||a[4]}function u(e){var t=0;if(e>=160&&e<320){t=1}else if(e>=320&&e<480){t=2}else if(e>=480&&e<640){t=3}else if(e>=640){t=4}return o[t]}t.getLineClassesByWidth=u;t.getLineClassesByCount=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getAreaPolygon=n;t.getSmoothAreaPath=r;function n(e,t){if(e.length<2){return""}var n=String.prototype.concat.apply("",e.concat(t.slice().reverse()).map(function(e,t){return""+(t===0?"":" ")+e.x+","+e.y}));return n}function r(e,t){if(e.length<2){return""}var n=function e(t){var n=t.map(function(e,t){var n=(t-1)%3===0?"C":"";return""+n+e.x+","+e.y+" "});return String.prototype.concat.apply("",n)};var r=n(e);var i=n(t.slice().reverse());var a="M"+r+"L"+i+"Z";return a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Path=undefined;var r=n(22);var i=n(7);var a=n(52);var o=n(3);var s=n(53);var u=n(9);var l={draw:a.BasePath.draw,getClosestElement:a.BasePath.getClosestElement,highlight:a.BasePath.highlight,highlightDataPoints:a.BasePath.highlightDataPoints,addInteraction:a.BasePath.addInteraction,_getBoundsInfo:a.BasePath._getBoundsInfo,_sortElements:a.BasePath._sortElements,init:function e(t){var n=a.BasePath.init(t);n.transformRules=[n.flip&&i.GrammarRegistry.get("flip")];n.adjustRules=[function(e,t){var r=e.scaleSize.isEmptyScale();var a=o.utils.defaults(n.guide.size||{},{defMinSize:2,defMaxSize:r?6:40});var s=Object.assign({},t,{defMin:a.defMinSize,defMax:a.defMaxSize,minLimit:a.minSize,maxLimit:a.maxSize});return i.GrammarRegistry.get("adjustStaticSizeScale")(e,s)}];return n},buildModel:function e(t){var n=a.BasePath.baseModel(t);var i=this.node().config.guide;var o=s.getLineClassesByCount(t.model.scaleColor.domain().length);var l=r.CSS_PREFIX+"area area i-role-path "+o+" "+i.cssClass+" ";n.groupAttributes={class:function e(t){return l+" "+n.class(t[0])+" frame"}};var c=function e(r){return{id:t.id(r),x:n.x(r),y:n.y(r)}};var f=function e(t,n){return function(e){return e.map(function(e){return[t(e),n(e)].join(",")}).join(" ")}};var d={fill:function e(t){return n.color(t[0])},stroke:function e(t){return n.color(t[0])}};n.pathAttributesEnterInit=d;n.pathAttributesUpdateDone=d;n.pathElement="polygon";n.pathTween={attr:"points",fn:u.d3_createPathTween("points",f(function(e){return e.x},function(e){return e.y}),[c],t.id)};return n}};t.Path=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Line=undefined;var r=n(22);var i=n(52);var a=n(7);var o=n(53);var s=n(3);var u=n(9);var l=n(13);var c=n(57);var f=n(58);var d={draw:i.BasePath.draw,getClosestElement:i.BasePath.getClosestElement,highlight:i.BasePath.highlight,highlightDataPoints:i.BasePath.highlightDataPoints,addInteraction:i.BasePath.addInteraction,_getBoundsInfo:i.BasePath._getBoundsInfo,_sortElements:i.BasePath._sortElements,init:function e(t){var n=i.BasePath.init(t);var r=n.stack;n.guide=s.utils.defaults(n.guide||{},{avoidScalesOverflow:true,interpolate:"linear"});n.transformRules=[n.flip&&a.GrammarRegistry.get("flip"),!r&&a.GrammarRegistry.get("groupOrderByAvg"),r&&i.BasePath.grammarRuleFillGaps,r&&a.GrammarRegistry.get("stack")];var o=n.guide.avoidScalesOverflow;var u=function e(t){return t.scaleSize.isEmptyScale()};n.adjustRules=[function(e,t){var r=s.utils.defaults(n.guide.size||{},{defMinSize:2,defMaxSize:u(e)?6:40});var i=Object.assign({},t,{defMin:r.defMinSize,defMax:r.defMaxSize,minLimit:r.minSize,maxLimit:r.maxSize});return a.GrammarRegistry.get("adjustStaticSizeScale")(e,i)},o&&function(e,t){if(u(e)){return function(){return{}}}var n=Object.assign({},t,{sizeDirection:"xy"});return a.GrammarRegistry.get("avoidScalesOverflow")(e,n)}].filter(function(e){return e});return n},buildModel:function e(t){var n=this.node().config;var a=n.guide;var s=n.options;var d=!t.model.scaleSize.dim;var h=d?a.widthCssClass||o.getLineClassesByWidth(s.width):"";var v=o.getLineClassesByCount(t.model.scaleColor.domain().length);var p=d?"line":"area";var g=""+r.CSS_PREFIX+p+" "+p+" i-role-path "+h+" "+v+" "+a.cssClass+" ";var m=d?{stroke:function e(t){return b.color(t[0])},class:"i-role-datum"}:{fill:function e(t){return b.color(t[0])}};var y=l.getInterpolatorSplineType(a.interpolate)==="cubic"?d?f.getCurve:c.getBrushCurve:d?f.getPolyline:c.getBrushLine;var b=i.BasePath.baseModel(t);var _=d?function(e){return{id:t.id(e),x:b.x(e),y:b.y(e)}}:function(e){return{id:t.id(e),x:b.x(e),y:b.y(e),size:b.size(e)}};b.groupAttributes={class:function e(t){return g+" "+b.class(t[0])+" frame"}};b.pathElement="path";b.pathAttributesEnterInit=m;b.pathAttributesUpdateDone=m;b.pathTween={attr:"d",fn:u.d3_createPathTween("d",y,[_],t.id,a.interpolate)};return b}};t.Line=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getBrushLine=a;t.getBrushCurve=o;var r=n(12);function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function a(e){if(e.length===0){return""}if(e.length===1){return s(e[0])}var t=[];for(var n=1;n<e.length;n++){t.push(u(e[n-1],e[n]))}return t.join(" ")}function o(e){if(e.length===0){return""}if(e.length===1){return s(e[0])}var t=[];for(var n=3;n<e.length;n+=3){t.push(l(e[n-3],e[n-2],e[n-1],e[n]))}return t.join(" ")}function s(e){var t=e.size/2;return["M"+e.x+","+(e.y-t),"A"+t+","+t+" 0 0 1",e.x+","+(e.y+t),"A"+t+","+t+" 0 0 1",e.x+","+(e.y-t),"Z"].join(" ")}function u(e,t){var n=g(e,t);if(!n){return s(e.size>t.size?e:t)}return["M"+n.left[0].x+","+n.left[0].y,"L"+n.left[1].x+","+n.left[1].y,"A"+t.size/2+","+t.size/2+" 0 "+Number(e.size<t.size)+" 1",n.right[1].x+","+n.right[1].y,"L"+n.right[0].x+","+n.right[0].y,"A"+e.size/2+","+e.size/2+" 0 "+Number(e.size>t.size)+" 1",n.left[0].x+","+n.left[0].y,"Z"].join(" ")}function l(e,t,n,r){var i=m(e,t,n,r);if(!i){return u(e,r)}var a=f(c(e,i.right[0]),c(e,i.left[0]));var o=f(c(r,i.right[1]),c(r,i.left[1]));return["M"+i.left[0].x+","+i.left[0].y,"C"+i.left[1].x+","+i.left[1].y,i.left[2].x+","+i.left[2].y,i.left[3].x+","+i.left[3].y,"A"+r.size/2+","+r.size/2+" 0 "+Number(a>Math.PI)+" 1",i.right[3].x+","+i.right[3].y,"C"+i.right[2].x+","+i.right[2].y,i.right[1].x+","+i.right[1].y,i.right[0].x+","+i.right[0].y,"A"+e.size/2+","+e.size/2+" 0 "+Number(o>Math.PI)+" 1",i.left[0].x+","+i.left[0].y,"Z"].join(" ")}function c(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}function f(e,t){if(t<e){t+=2*Math.PI}return t-e}function d(){var e=0;for(var t=arguments.length,n=Array(t),r=0;r<t;r++){n[r]=arguments[r]}for(var i=1;i<n.length;i++){e+=Math.sqrt((n[i].x-n[i-1].x)*(n[i].x-n[i-1].x)+(n[i].y-n[i-1].y)*(n[i].y-n[i-1].y))}return e}function h(e,t,n){return{x:e.x+t*Math.cos(n),y:e.y+t*Math.sin(n)}}function v(e,t,n,i,a){var o=r.splitCubicSegment(e,t,n,i,a);var s=1/(1+d(o[3],o[4],o[5],o[6],o[3])/d(o[0],o[1],o[2],o[3],o[0]));o[3].size=t.size*(1-s)+a.size*s;return o}function p(e,t,n){var i=r.getBezierPoint(d(e,t)/d(e,t,n),e,n);var a=r.getBezierPoint(2,i,t);return[e,a,n]}function g(e,t){var n=d(e,t);if(n===0||n+e.size/2<=t.size/2||n+t.size/2<=e.size/2){return null}var r=c(e,t);var i=Math.asin((e.size-t.size)/n/2);var a=r-Math.PI/2+i;var o=r+Math.PI/2-i;return{left:[h(e,e.size/2,a),h(t,t.size/2,a)],right:[h(e,e.size/2,o),h(t,t.size/2,o)]}}function m(e,t,n,a){var o=d(e,a);if(o===0||o+e.size/2<=a.size/2||o+a.size/2<=e.size/2){return null}var s=1/12;var u=function o(u){var l=u?[a,n,t,e]:[e,t,n,a];var c=v.apply(undefined,[2*s].concat(l));var f=v.apply(undefined,[.5].concat(i(c.slice(0,4))));var d=f[3];var h=f[6];var m=g(l[0],d);var y=g(d,h);var b=[m.left[0],r.getBezierPoint(.5,m.left[1],y.left[0]),y.left[1]];var _=[m.right[0],r.getBezierPoint(.5,m.right[1],y.right[0]),y.right[1]];var w=p.apply(undefined,b)[1];var x=p.apply(undefined,_)[1];var T=r.getBezierPoint(1/3/s,m.left[0],w);var C=r.getBezierPoint(1/3/s,m.right[0],x);return{left:u?[C,_[0]]:[b[0],T],right:u?[T,b[0]]:[_[0],C]}};var l=u(false);var c=u(true);return{left:[].concat(i(l.left),i(c.left)),right:[].concat(i(l.right),i(c.right))}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getPolyline=n;t.getCurve=r;function n(e){if(e.length<2){return""}var t="";for(var n=0;n<e.length;n++){t+=""+(n===0?"M":" L")+e[n].x+","+e[n].y}return t}function r(e){if(e.length<4){return""}var t="M"+e[0].x+","+e[0].y;for(var n=3;n<e.length;n+=3){t+=" C"+e[n-2].x+","+e[n-2].y+" "+e[n-1].x+","+e[n-1].y+" "+e[n].x+","+e[n].y}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Interval=undefined;var r=n(22);var i=n(7);var a=n(46);var o=n(9);var s=n(3);var u=n(1);var l=n(10);var c=n(2);var f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var v=function e(t){return f.default.select(t).data()[0]};var p={init:function e(t){var n=Object.assign({},t);n.guide=n.guide||{};n.guide=s.utils.defaults(n.guide,{animationSpeed:0,avoidScalesOverflow:true,maxHighlightDistance:32,prettify:true,sortByBarHeight:true,enableColorToBarPosition:n.guide.enableColorToBarPosition!=null?n.guide.enableColorToBarPosition:!n.stack});n.guide.size=s.utils.defaults(n.guide.size||{},{enableDistributeEvenly:true});n.guide.label=s.utils.defaults(n.guide.label||{},{position:n.flip?n.stack?["r-","l+","hide-by-label-height-horizontal","cut-label-horizontal"]:["outside-then-inside-horizontal","auto:hide-on-label-label-overlap"]:n.stack?["rotate-on-size-overflow","t-","b+","hide-by-label-height-vertical","cut-label-vertical","auto:hide-on-label-label-overlap"]:["rotate-on-size-overflow","outside-then-inside-vertical","auto:hide-on-label-label-overlap"]});var r=n.guide.avoidScalesOverflow;var a=n.guide.enableColorToBarPosition;var o=n.guide.size.enableDistributeEvenly;n.transformRules=[n.flip&&i.GrammarRegistry.get("flip"),n.stack&&i.GrammarRegistry.get("stack"),a&&i.GrammarRegistry.get("positioningByColor")].filter(function(e){return e});n.adjustRules=[o&&function(e,t){var r=s.utils.defaults(n.guide.size||{},{defMinSize:n.guide.prettify?3:0,defMaxSize:n.guide.prettify?40:Number.MAX_VALUE});var a=Object.assign({},t,{defMin:r.defMinSize,defMax:r.defMaxSize,minLimit:r.minSize,maxLimit:r.maxSize});return i.GrammarRegistry.get("size_distribute_evenly")(e,a)},r&&o&&function(e,t){var n=Object.assign({},t,{sizeDirection:"x"});return i.GrammarRegistry.get("avoidScalesOverflow")(e,n)},n.stack&&i.GrammarRegistry.get("adjustYScale")].filter(function(e){return e});return n},addInteraction:function e(){var t=this;var n=this.node();var r=function e(t,n){return function(e){return e===t?true:n}};n.on("highlight",function(e,n){return t.highlight(n)});n.on("data-hover",function(e,n){return t.highlight(r(n.data,null))})},draw:function e(){var t,n;var i=this.node();var u=i.config;var l=u.options;l.container=l.slot(u.uid);var c=u.guide.prettify;var d="i-role-element i-role-datum bar "+r.CSS_PREFIX+"bar";var p=i.screenModel;var g=this.buildModel(p,{prettify:c,minBarH:1,minBarW:1,baseCssClass:d});var m=o.d3_animationInterceptor;var y=u.flip?"y":"x";var b=u.flip?"x":"y";var _=u.flip?"width":"height";var w=u.flip?"height":"width";var x=p.toFibers();var T=x.reduce(function(e,t){return e.concat(t)},[]);var C=g.class;var k=s.utils.omit(g,"class");var S=l.container.selectAll(".bar").data(T,p.id);S.exit().classed("tau-removing",true).call(m(u.guide.animationSpeed,null,(t={},h(t,y,function(){var e=f.default.select(this);var t=e.attr(y)-0;var n=e.attr(w)-0;return t+n/2}),h(t,b,function(){return this.getAttribute("data-zero")}),h(t,w,0),h(t,_,0),t),function(e){var t=f.default.select(e);if(t.classed("tau-removing")){t.remove()}}));S.call(m(u.guide.animationSpeed,null,k)).attr("class",C).attr("data-zero",p[b+"0"]);S.enter().append("rect").call(m(u.guide.animationSpeed,(n={},h(n,b,p[b+"0"]),h(n,_,0),n),k)).attr("class",C).attr("data-zero",p[b+"0"]);i.subscribe(new a.LayerLabels(p.model,p.model.flip,u.guide.label,l).draw(x));var E=function e(t,n){var r=v(t);var i=v(n);var a=g.width(r);var o=g.width(i);if(a===o){var s=g.y(r);var u=g.y(i);if(s===u){return O(t,n)}return s-u}return o-a};var P=function e(t,n){var r=v(t);var i=v(n);var a=g.height(r);var o=g.height(i);if(a===o){var s=g.x(r);var u=g.x(i);if(s===u){return O(t,n)}return s-u}return o-a};var O=function(){var e=T.reduce(function(e,t,n){e.set(t,n+1);return e},new Map);return function(t,n){var r=e.get(v(t))||-1;var i=e.get(v(n))||-1;return r-i}}();this._barsSorter=u.guide.sortByBarHeight?u.flip?E:P:O;var M={rect:0,text:1};this._typeSorter=function(e,t){return M[e.tagName]-M[t.tagName]};this._sortElements(this._typeSorter,this._barsSorter);i.subscribe(S);this._boundsInfo=this._getBoundsInfo(S[0])},buildModel:function e(t,n){var r=n.prettify,i=n.minBarH,a=n.minBarW,o=n.baseCssClass;var s=function e(n){var i=t.size(n);if(r){i=Math.max(a,i)}return i};var u;var l=function e(n){return n[t.model.scaleY.dim]};if(t.flip){var c=function e(n){return Math.abs(t.x(n)-t.x0(n))};u={y:function e(n){return t.y(n)-s(n)*.5},x:function e(n){var e=Math.min(t.x0(n),t.x(n));if(r){var a=c(n);var o=l(n);var s=0;if(o===0){s=0}if(o>0){s=a}if(o<0){s=0-i}var u=a<i;return u?e+s:e}else{return e}},height:function e(t){return s(t)},width:function e(t){var n=c(t);if(r){return l(t)===0?n:Math.max(i,n)}return n}}}else{var f=function e(n){return Math.abs(t.y(n)-t.y0(n))};u={x:function e(n){return t.x(n)-s(n)*.5},y:function e(n){var e=Math.min(t.y0(n),t.y(n));if(r){var a=f(n);var o=a<i;e=o&&l(n)>0?e-i:e}return e},width:function e(t){return s(t)},height:function e(t){var n=f(t);if(r){n=l(t)===0?n:Math.max(i,n)}return n}}}return Object.assign(u,{class:function e(n){return o+" "+t.class(n)},fill:function e(n){return t.color(n)}})},_sortElements:function e(){var t=this.node().config.options.container.node();u.utilsDom.sortChildren(t,s.utils.createMultiSorter.apply(s.utils,arguments))},_getBoundsInfo:function e(t){if(t.length===0){return null}var n=this.node().screenModel;var r=this.node().config.flip;var i=t.map(function(e){var t=f.default.select(e).data()[0];var r=n.x(t);var i=n.x0(t);var a=n.y(t);var o=n.y0(t);var s=Math.abs(r-i);var u=Math.abs(a-o);var l=(r+i)/2;var c=(a+o)/2;var d=a>o;var h={top:c-u/2,right:l+s/2,bottom:c+u/2,left:l-s/2};return{node:e,data:t,cx:l,cy:c,box:h,invert:d}});var a=i.reduce(function(e,t){var n=t.box;e.left=Math.min(n.left,e.left);e.right=Math.max(n.right,e.right);e.top=Math.min(n.top,e.top);e.bottom=Math.max(n.bottom,e.bottom);return e},{left:Number.MAX_VALUE,right:Number.MIN_VALUE,top:Number.MAX_VALUE,bottom:Number.MIN_VALUE});var o=s.utils.unique(i.map(r?function(e){return e.cy}:function(e){return e.cx})).sort(function(e,t){return e-t});var u=o.reduce(function(e,t){return e[t]=[],e},{});i.forEach(function(e){var t=o.find(r?function(t){return e.cy===t}:function(t){return e.cx===t});u[t].push(e)});var l=function e(t){if(t.length===1){return u[t]}var n=Math.ceil(t.length/2);var r=(t[n-1]+t[n])/2;return{middle:r,lower:e(t.slice(0,n)),greater:e(t.slice(n))}};var c=l(o);return{bounds:a,tree:c}},getClosestElement:function e(t,n){if(!this._boundsInfo){return null}var r=this._boundsInfo,i=r.bounds,a=r.tree;var o=this.node().config.options.container;var s=this.node().config.flip;var u=l.utilsDraw.getDeepTransformTranslate(o.node());var c=t-u.x;var f=n-u.y;var d=this.node().config.guide.maxHighlightDistance;if(c<i.left-d||c>i.right+d||f<i.top-d||f>i.bottom+d){return null}var h=s?f:c;var v=s?c:f;var p=function e(t,n,r){return t>=n&&t<=r};var g=function e(t){if(Array.isArray(t)){return t}return e(h>t.middle?t.greater:t.lower)}(a).map(function(e){var t=s?e.box.left:e.box.top;var n=s?e.box.right:e.box.bottom;var r=p(v,t,n);if(!r&&Math.abs(v-t)>d&&Math.abs(v-n)>d){return null}var i=Math.abs(v-(e.invert!==s?n:t));return Object.assign(e,{distToValue:i,cursorInside:r})}).filter(function(e){return e}).sort(function(e,t){if(e.cursorInside!==t.cursorInside){return t.cursorInside-e.cursorInside}return Math.abs(e.distToValue)-Math.abs(t.distToValue)}).map(function(e){var t=e.cx;var n=e.cy;var r=Math.abs(s?f-n:c-t);var i=Math.abs(s?c-t:f-n);return{node:e.node,data:e.data,distance:r,secondaryDistance:i,x:t,y:n}});return g[0]||null},highlight:function e(t){var n;var r="graphical-report__highlighted";var i="graphical-report__dimmed";var a=this.node().config.options.container;var o=(n={},h(n,r,function(e){return t(e)===true}),h(n,i,function(e){return t(e)===false}),n);a.selectAll(".bar").classed(o);a.selectAll(".i-role-label").classed(o);this._sortElements(function(e,n){return t(v(e))-t(v(n))},this._typeSorter,this._barsSorter)}};t.Interval=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ParallelLine=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(22);var a=n(5);var o=n(3);var s=n(2);var u=l(s);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var h=t.ParallelLine=function(e){d(t,e);function t(e){c(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.config=e;n.config.guide=o.utils.defaults(n.config.guide||{},{});n.on("highlight",function(e,t){return n.highlight(t)});return n}r(t,[{key:"defineGrammarModel",value:function e(t){var n=this.config;var r=n.options;this.color=t("color",n.color,{});this.scalesMap=n.columns.reduce(function(e,n){e[n]=t("pos",n,[r.height,0]);return e},{});var i=r.width/(n.columns.length-1);var a=n.columns.reduce(function(e,t,n){e[t]=n*i;return e},{});this.xBase=function(e){return a[e]};this.regScale("columns",this.scalesMap).regScale("color",this.color);return{}}},{key:"drawFrames",value:function e(t){var n=this.config;var r=this.config.options;var a=this.scalesMap;var o=this.xBase;var s=this.color;var l=u.default.svg.line();var c=function e(){this.attr({d:function e(t){return l(n.columns.map(function(e){return[o(e),a[e](t[a[e].dim])]}))}})};var f=function e(){this.attr({stroke:function e(t){return s.toColor(s(t[s.dim]))},class:function e(t){return i.CSS_PREFIX+"__line line "+s.toClass(s(t[s.dim]))+" foreground"}})};var d=function e(){var t=this.selectAll(".background").data(function(e){return e.part()});t.exit().remove();t.call(c);t.enter().append("path").attr("class","background line").call(c);var n=this.selectAll(".foreground").data(function(e){return e.part()});n.exit().remove();n.call(function(){c.call(this);f.call(this)});n.enter().append("path").call(function(){c.call(this);f.call(this)})};var h=r.container.selectAll(".lines-frame").data(t,function(e){return e.hash()});h.exit().remove();h.call(d);h.enter().append("g").attr("class","lines-frame").call(d);this.subscribe(r.container.selectAll(".lines-frame .foreground"))}},{key:"highlight",value:function e(t){this.config.options.container.selectAll(".lines-frame .foreground").style("visibility",function(e){return t(e)?"":"hidden"})}}]);return t}(a.Element)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.IdentityScale=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(62);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var u=t.IdentityScale=function(e){s(t,e);function t(e,n){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r._references=n.references;r._refCounter=n.refCounter;r.addField("scaleType","identity");return r}r(t,[{key:"create",value:function e(){var t=this._references;var n=this._refCounter;return this.toBaseScale(function(e,r){if(e==null){var i=t.get(r);if(i==null){i=n();t.set(r,i)}}else{i=e}return i})}}]);return t}(i.BaseScale)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BaseScale=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(3);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function e(t){return t==="date"?function(e){return new Date(e).getTime()}:function(e){return e}};var s=function e(t,n){return i.utils.generateHash([t,n].map(JSON.stringify).join(""))};var u=t.BaseScale=function(){function e(t,n){var r=this;a(this,e);this._fields={};var o;if(Array.isArray(n.fitToFrameByDims)&&n.fitToFrameByDims.length){var s=function e(t){var r={};if(t.type==="where"&&t.args){r.type=t.type;r.args=n.fitToFrameByDims.reduce(function(e,n){if(t.args.hasOwnProperty(n)){e[n]=t.args[n]}return e},{})}else{r=t}return r};o=t.part(s)}else{o=t.full()}var u=this.getVarSet(o,n);if(n.order){u=i.utils.union(i.utils.intersection(n.order,u),u)}this.vars=u;var l=u.map(function(e){return e});this.scaleConfig=n;this.scaleConfig.nice=this.scaleConfig.hasOwnProperty("nice")?this.scaleConfig.nice:this.scaleConfig.autoScale;this.addField("dim",this.scaleConfig.dim).addField("scaleDim",this.scaleConfig.dim).addField("scaleType",this.scaleConfig.type).addField("source",this.scaleConfig.source).addField("domain",function(){return r.vars}).addField("isInteger",l.every(Number.isInteger)).addField("originalSeries",function(){return l}).addField("isContains",function(e){return r.isInDomain(e)}).addField("isEmptyScale",function(e){return r.isEmpty(e)}).addField("fixup",function(e){var t=r.scaleConfig;t.__fixup__=t.__fixup__||{};t.__fixup__=Object.assign(t.__fixup__,e(Object.assign({},t,t.__fixup__)))}).addField("commit",function(){r.scaleConfig=Object.assign(r.scaleConfig,r.scaleConfig.__fixup__);delete r.scaleConfig.__fixup__})}r(e,[{key:"isInDomain",value:function e(t){return this.domain().indexOf(t)>=0}},{key:"addField",value:function e(t,n){this._fields[t]=n;this[t]=n;return this}},{key:"getField",value:function e(t){return this._fields[t]}},{key:"isEmpty",value:function e(){return!Boolean(this._fields.dim)}},{key:"toBaseScale",value:function e(t){var n=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=Object.keys(this._fields).reduce(function(e,t){e[t]=n._fields[t];return e},t);i.getHash=function(){return s(n.vars,r)};i.value=i;return i}},{key:"getVarSet",value:function e(t,n){var r=n.hasOwnProperty("series")?n.series:t.map(function(e){return e[n.dim]});return i.utils.unique(r,o(n.dimType))}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ColorScale=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(62);var a=n(3);var o=n(2);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var h=t.ColorScale=function(e){d(t,e);function t(e,n){c(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));var i=n.dimType!=="measure";var o=r.scaleConfig.brewer||(i?a.utils.range(20).map(function(e){return"color20-"+(1+e)}):["#eee","#000"]);var u=r.scaleConfig;if(!i){var d=s.default.extent(r.vars);var h=function e(t){return Number.isFinite(t)||a.utils.isDate(t)};var v=h(u.min)?u.min:d[0];var p=h(u.max)?u.max:d[1];var g=[v,d[0]].filter(h);var m=[p,d[1]].filter(h);d=[g.sort(function(e,t){return e-t})[0],m.sort(function(e,t){return t-e})[0]];if(u.nice){if(d[0]<0&&d[1]>0){var y=Math.max.apply(Math,l(d.map(Math.abs)));d=[-y,y]}}r.vars=d}r.addField("scaleType","color").addField("discrete",i).addField("brewer",o).addField("toColor",a.utils.extRGBColor).addField("toClass",a.utils.extCSSClass);return r}r(t,[{key:"create",value:function e(){var t=this.discrete;var n=this.vars;var r=this.getField("brewer");var i=t?this.createDiscreteScale(n,r):this.createContinuesScale(n,r);return this.toBaseScale(i)}},{key:"createDiscreteScale",value:function e(t,n){var r=function e(){return"color-default"};var i=function e(t,n){var r=t.map(function(e){return String(e).toString()});return s.default.scale.ordinal().range(n).domain(r)};var o=function e(t,n){var r=Object.keys(t);var i=r.map(function(e){return t[e]});var a=s.default.scale.ordinal().range(i).domain(r);return function(e){return t.hasOwnProperty(e)?a(e):n(e)}};var u=function e(t){return function(e){return t(String(e).toString())}};var l;if(Array.isArray(n)){l=u(i(t,n))}else if(typeof n==="function"){l=function e(r){return n(r,u(i(t,a.utils.range(20).map(function(e){return"color20-"+(1+e)}))))}}else if(a.utils.isObject(n)){l=o(n,r)}else{throw new Error("This brewer is not supported")}return l}},{key:"createContinuesScale",value:function e(t,n){var r;if(Array.isArray(n)){r=s.default.scale.linear().domain(a.utils.splitEvenly(t.map(function(e){return e-0}),n.length)).range(n)}else{throw new Error("This brewer is not supported")}return r}}]);return t}(i.BaseScale)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SizeScale=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(62);var a=n(3);var o=n(2);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var h={sqrt:function e(t){return Math.sqrt(t)},linear:function e(t){return t}};var v=t.SizeScale=function(e){d(t,e);function t(e,n){c(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));var i=r.scaleConfig;var a=s.default.extent(r.vars);var o=Number.isFinite(i.min)?i.min:a[0];var u=Number.isFinite(i.max)?i.max:a[1];r.vars=[Math.min.apply(Math,l([o,a[0]].filter(Number.isFinite))),Math.max.apply(Math,l([u,a[1]].filter(Number.isFinite)))];r.addField("scaleType","size");r.addField("funcType",n.func||"sqrt");return r}r(t,[{key:"isInDomain",value:function e(t){var n=this.domain().sort();var r=n[0];var i=n[n.length-1];return!Number.isNaN(r)&&!Number.isNaN(i)&&t<=i&&t>=r}},{key:"create",value:function e(){var t=this.scaleConfig;var n=this.vars;var r=a.utils.defaults({},t,{func:"sqrt",minSize:0,maxSize:1});var i=r.func;var o=r.minSize;var s=r.maxSize;var u=h[i];var c=n.filter(function(e){return Number.isFinite(Number(e))});var f;if(c.length===0){f=function e(){return s}}else{var d=1;var v=0;var p=Math.min.apply(Math,l(c));var g=Math.max.apply(Math,l(c));var m=u(Math.max(Math.abs(p),Math.abs(g),g-p));v=p<0?p:0;d=m===0?1:(s-o)/m;f=function e(t){var n=t!==null?parseFloat(t):0;if(!Number.isFinite(n)){return s}var r=n-v;return o+u(r)*d}}return this.toBaseScale(f)}}]);return t}(i.BaseScale)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OrdinalScale=undefined;var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var a=n(62);var o=n(2);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var h=t.OrdinalScale=function(e){d(t,e);function t(e,n){c(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.addField("scaleType","ordinal").addField("discrete",true);return r}i(t,[{key:"create",value:function e(t){var n=this.scaleConfig;var i=this.vars;var a=s.default.scale.ordinal().domain(i);var o=a.rangePoints(t,1);var u=Math.max.apply(Math,l(t));var c=function e(t){var a=r(n.ratio);if(a==="function"){return n.ratio(t,u,i)}else if(a==="object"){return n.ratio[t]}else{return 1/i.length}};var f=function e(t){var r;if(!n.ratio){r=o(t)}else{r=u-i.slice(i.indexOf(t)+1).reduce(function(e,t){return e+u*c(t)},u*c(t)*.5)}return r};Object.keys(o).forEach(function(e){return f[e]=o[e]});f.stepSize=function(e){return c(e)*u};return this.toBaseScale(f,t)}}]);return t}(a.BaseScale)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PeriodScale=undefined;var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var a=n(62);var o=n(18);var s=n(3);var u=n(2);var l=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var p=t.PeriodScale=function(e){v(t,e);function t(e,n){d(this,t);var r=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));var i=r.scaleConfig;var a=r.vars;var u=l.default.extent(a);var c=i.min===null||i.min===undefined?u[0]:new Date(i.min).getTime();var f=i.max===null||i.max===undefined?u[1]:new Date(i.max).getTime();var v=[new Date(Math.min(c,u[0])),new Date(Math.max(f,u[1]))];var p=o.UnitDomainPeriodGenerator.get(i.period,{utc:i.utcTime});if(i.fitToFrameByDims||p===null){r.vars=s.utils.unique(a.map(function(e){return new Date(e)}),function(e){return e.getTime()}).sort(function(e,t){return t-e})}else{r.vars=o.UnitDomainPeriodGenerator.generate(v[0],v[1],i.period,{utc:i.utcTime})}r.addField("scaleType","period").addField("period",r.scaleConfig.period).addField("discrete",true);return r}i(t,[{key:"isInDomain",value:function e(t){var n=o.UnitDomainPeriodGenerator.get(this.scaleConfig.period,{utc:this.scaleConfig.utcTime});var r=n.cast(new Date(t)).getTime();return this.domain().map(function(e){return e.getTime()}).indexOf(r)>=0}},{key:"create",value:function e(t){var n=this.vars;var i=this.vars.map(function(e){return e.getTime()});var a=this.scaleConfig;var o=l.default.scale.ordinal().domain(n);var s=o.rangePoints(t,1);var u=l.default.scale.ordinal().domain(i.map(String));var c=u.rangePoints(t,1);var d=Math.max.apply(Math,f(t));var h=function e(t){var o=new Date(t).getTime();var s=r(a.ratio);if(s==="function"){return a.ratio(o,d,i)}else if(s==="object"){return a.ratio[o]}else{return 1/n.length}};var v=function e(t){var n;var r=new Date(t);var o=r.getTime();if(!a.ratio){n=c(String(o))}else{n=d-i.slice(i.indexOf(o)+1).reduce(function(e,t){return e+d*h(t)},d*h(t)*.5)}return n};Object.keys(s).forEach(function(e){return v[e]=s[e]});v.stepSize=function(e){return h(e)*d};return this.toBaseScale(v,t)}}]);return t}(a.BaseScale)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TimeScale=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(62);var a=n(2);var o=u(a);var s=n(3);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var d=t.TimeScale=function(e){f(t,e);function t(e,n){l(this,t);var r=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));var i=r.scaleConfig;var a=r.vars;var u=o.default.extent(a).map(function(e){return new Date(e)});var f=i.min===null||i.min===undefined?u[0]:new Date(i.min).getTime();var d=i.max===null||i.max===undefined?u[1]:new Date(i.max).getTime();a=[new Date(Math.min(f,u[0])),new Date(Math.max(d,u[1]))];r.niceIntervalFn=null;if(i.nice){var h=i.niceInterval;var v=h&&o.default.time[h]?i.utcTime?o.default.time[h].utc:o.default.time[h]:null;if(v){r.niceIntervalFn=v}else{r.niceIntervalFn=null}r.vars=s.utils.niceTimeDomain(a,r.niceIntervalFn,{utc:i.utcTime})}else{r.vars=a}r.addField("scaleType","time");return r}r(t,[{key:"isInDomain",value:function e(t){var n=new Date(t);var r=this.domain();var i=r[0];var a=r[r.length-1];return!Number.isNaN(i)&&!Number.isNaN(a)&&n<=a&&n>=i}},{key:"create",value:function e(t){var n=this.vars;var r=this.scaleConfig.utcTime;var i=r?o.default.time.scale.utc:o.default.time.scale;var a=i().domain(this.scaleConfig.nice?s.utils.niceTimeDomain(n,this.niceIntervalFn,{utc:r}):n);var u=a.range(t);var l=function e(t){var r=n[0];var i=n[1];if(t>i){t=i}if(t<r){t=r}return u(new Date(t))};Object.keys(u).forEach(function(e){return l[e]=u[e]});l.stepSize=function(){return 0};return this.toBaseScale(l,t)}}]);return t}(i.BaseScale)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LinearScale=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(62);var a=n(3);var o=n(2);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var h=t.LinearScale=function(e){d(t,e);function t(e,n){c(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));var i=r.scaleConfig;var o=s.default.extent(r.vars);var u=Number.isFinite(i.min)?i.min:o[0];var d=Number.isFinite(i.max)?i.max:o[1];o=[Math.min.apply(Math,l([u,o[0]].filter(Number.isFinite))),Math.max.apply(Math,l([d,o[1]].filter(Number.isFinite)))];r.vars=i.nice?a.utils.niceZeroBased(o):s.default.extent(o);if(r.vars[0]===r.vars[1]){var h=Math.pow(10,Math.floor(Math.log(r.vars[0])/Math.LN10));r.vars[0]-=h;r.vars[1]+=h||10}r.addField("scaleType","linear").addField("discrete",false);return r}r(t,[{key:"isInDomain",value:function e(t){var n=this.domain();var r=n[0];var i=n[n.length-1];return!Number.isNaN(r)&&!Number.isNaN(i)&&t<=i&&t>=r}},{key:"create",value:function e(t){var n=this.vars;var r=this.extendScale(s.default.scale.linear());r.domain(n).range(t).clamp(true);return this.toBaseScale(r,t)}},{key:"extendScale",value:function e(t){var n=this;var r=t.copy;var i=t.ticks;Object.assign(t,{stepSize:function e(){return 0},copy:function e(){return n.extendScale(r.call(t))},ticks:this.getField("isInteger")?function(e){return i.call(t,e).filter(Number.isInteger)}:t.ticks});return t}}]);return t}(i.BaseScale)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LogarithmicScale=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(62);var a=n(8);var o=n(2);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var h=t.LogarithmicScale=function(e){d(t,e);function t(e,n){c(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));var i=r.scaleConfig;var a=s.default.extent(r.vars);var o=Number.isFinite(i.min)?i.min:a[0];var u=Number.isFinite(i.max)?i.max:a[1];a=[Math.min.apply(Math,l([o,a[0]].filter(Number.isFinite))),Math.max.apply(Math,l([u,a[1]].filter(Number.isFinite)))];p(a);if(i.nice){a=m(a)}r.vars=a;r.addField("scaleType","logarithmic").addField("discrete",false);return r}r(t,[{key:"isInDomain",value:function e(t){var n=this.domain();var r=n[0];var i=n[n.length-1];return!Number.isNaN(r)&&!Number.isNaN(i)&&t<=i&&t>=r}},{key:"create",value:function e(t){var n=this.vars;p(n);var r=g(s.default.scale.log()).domain(n).range(t);r.stepSize=function(){return 0};return this.toBaseScale(r,t)}}]);return t}(i.BaseScale);function v(e){return Math.log(e)/Math.LN10}function p(e){if(e[0]*e[1]<=0){throw new a.TauChartError("Logarithmic scale domain cannot cross zero.",a.errorCodes.INVALID_LOG_DOMAIN)}}function g(e){var t=e.copy;e.ticks=function(t){var n=10;var r=[];var i=s.default.extent(e.domain());var a=Math.floor(v(i[0]));var o=Math.ceil(v(i[1]));var u=Math.ceil((o-a)*n/(Math.ceil(t/n)*n));for(var l=a;l<=o;l+=u){for(var c=1;c<=n;c++){var f=Math.pow(c,u)*Math.pow(10,l);f=parseFloat(f.toExponential(0));if(f>=i[0]&&f<=i[1]){r.push(f)}}}return r};e.copy=function(){var n=t.call(e);g(n);return n};return e}function m(e){var t=e[0]>0;var n=e.map(function(e){return Math.abs(e)});var r=Math.max.apply(Math,l(n));var i=Math.min.apply(Math,l(n));var a=i.toExponential().split("e");var o=r.toExponential().split("e");var s=parseFloat(Math.floor(a[0])+"e"+a[1]);var u=parseFloat(Math.ceil(o[0])+"e"+o[1]);return t?[s,u]:[-u,-s]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ValueScale=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(62);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var u=t.ValueScale=function(e){s(t,e);function t(e,n){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.addField("scaleType","value").addField("georole",n.georole);return r}r(t,[{key:"create",value:function e(){return this.toBaseScale(function(e){return e})}}]);return t}(i.BaseScale)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FillScale=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(62);var a=n(3);var o=n(2);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var d=t.FillScale=function(e){f(t,e);function t(e,n){l(this,t);var r=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));var i=r.scaleConfig;var o=s.default.extent(r.vars);var u=Number.isFinite(i.min)?i.min:o[0];var f=Number.isFinite(i.max)?i.max:o[1];o=[Math.min(u,o[0]),Math.max(f,o[1])];r.vars=i.nice?a.utils.niceZeroBased(o):s.default.extent(o);var d=(1-.2)/9;var h=a.utils.range(10).map(function(e){return"rgba(90,180,90,"+(.2+e*d).toFixed(2)+")"});var v=i.brewer||h;r.addField("scaleType","fill").addField("brewer",v);return r}r(t,[{key:"isInDomain",value:function e(t){var n=this.domain();var r=n[0];var i=n[n.length-1];return!Number.isNaN(r)&&!Number.isNaN(i)&&t<=i&&t>=r}},{key:"create",value:function e(){var t=this.vars;var n=this.getField("brewer");if(!Array.isArray(n)){throw new Error("This brewer is not supported")}var r=n.length;var i=(t[1]-t[0])/r;var o=a.utils.range(r-1).map(function(e){return e+1}).reduce(function(e,n){return e.concat([t[0]+n*i])},[]);var u=s.default.scale.threshold().domain(o).range(n);return this.toBaseScale(u)}}]);return t}(i.BaseScale)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChartMap=undefined;var r=n(3);var i=function e(t){var n=Object.assign({sourcemap:t.settings.defaultSourceMap},t.guide||{});n.size=r.utils.defaults(n.size||{},{min:1,max:10});n.code=r.utils.defaults(n.code||{},{georole:"countries"});var i={};var a=function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var a;var o=n;var s;if(!n){a=t+":default";s="?"}else{a=t+"_"+n;s="/"}if(!i.hasOwnProperty(a)){i[a]=Object.assign({type:t,source:s,dim:o},r)}return a};return{sources:{"?":{dims:{},data:[{}]},"/":{dims:Object.keys(t.dimensions).reduce(function(e,n){e[n]={type:t.dimensions[n].type};return e},{}),data:t.data}},scales:i,unit:{type:"COORDS.MAP",expression:{operator:"none",source:"/"},code:a("value",t.code,n.code),fill:a("fill",t.fill,n.fill),size:a("size",t.size,n.size),color:a("color",t.color,n.color),latitude:a("linear",t.latitude,{nice:false}),longitude:a("linear",t.longitude,{nice:false}),guide:n},plugins:t.plugins||[]}};t.ChartMap=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChartInterval=undefined;var r=n(74);var i=function e(t){var n=t.flip?t.y:t.x;var r=n.indexOf(t.color)>=0;var i=t.guide[t.guide.length-1];if(r&&!i.hasOwnProperty("enableColorToBarPosition")){i.enableColorToBarPosition=false}return t};var a=function e(t){var n=r.normalizeConfig(t);n=i(n);return r.transformConfig("ELEMENT.INTERVAL",n)};t.ChartInterval=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.transformConfig=t.normalizeConfig=undefined;var r;var i=n(3);function a(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var o=function e(t){return!t?null:t};var s=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return!Array.isArray(t)?[t]:t.length===0?[n]:t};var u=function e(t,n){return{type:t,x:n.x,y:n.y,identity:n.identity,size:n.size,color:n.color,split:n.split,label:n.label,guide:{color:n.colorGuide,size:n.sizeGuide},flip:n.flip,stack:n.stack}};var l={SUCCESS:"SUCCESS",WARNING:"WARNING",FAIL:"FAIL"};var c=(r={},a(r,l.SUCCESS,function(e){return e}),a(r,l.FAIL,function(e,t){throw new Error((t.messages||[]).join("\n")||"This configuration is not supported, See http://api.taucharts.com/basic/facet.html#easy-approach-for-creating-facet-chart")}),a(r,l.WARNING,function(e,t,n){var r=t.axis;var i=t.indexMeasureAxis[0];var a=e[i];var o=e.filter(function(e){return e!==a});o.push(a);var s=n[i][r]||{};var u=n[n.length-1][r]||{};n[n.length-1][r]=s;n[i][r]=u;return o}),r);function f(e,t,n){return t.reduce(function(t,r,i){var a=e[r];if(!a){t.status=l.FAIL;if(r){t.messages.push('"'+r+'" dimension is undefined for "'+n+'" axis')}else{t.messages.push('"'+n+'" axis should be specified')}}else if(t.status!=l.FAIL){if(a.type==="measure"){t.countMeasureAxis++;t.indexMeasureAxis.push(i)}if(a.type!=="measure"&&t.countMeasureAxis===1){t.status=l.WARNING}else if(t.countMeasureAxis>1){t.status=l.FAIL;t.messages.push('There is more than one measure dimension for "'+n+'" axis')}}return t},{status:l.SUCCESS,countMeasureAxis:0,indexMeasureAxis:[],messages:[],axis:n})}function d(e){var t=s(e.x);var n=s(e.y);var r=Math.max(t.length,n.length);var i=s(e.guide||{},{});var a=r-i.length;for(var o=0;o<a;o++){i.push({})}i=i.slice(0,r);var u=f(e.dimensions,t,"x");var l=f(e.dimensions,n,"y");t=c[u.status](t,u,i);n=c[l.status](n,l,i);return Object.assign({},e,{x:t,y:n,guide:i})}function h(e,t){var n=t.x;var r=t.y;var a=t.guide;var s=Math.max(n.length,r.length);var l={type:"COORDS.RECT",unit:[]};var c=[].concat(n);var f=[].concat(r);var d=[].concat(a);for(var h=s;h>0;h--){var v=c.pop();var p=f.pop();var g=d.pop()||{};if(h===s){l.x=v;l.y=p;l.unit.push(u(e,{x:o(v),y:o(p),identity:t.identity,split:t.split,color:t.color,label:t.label,size:t.size,flip:t.flip,stack:t.stack,colorGuide:g.color,sizeGuide:g.size}));l.guide=i.utils.defaults(g,{x:{label:v},y:{label:p}})}else{l={type:"COORDS.RECT",x:o(v),y:o(p),unit:[l],guide:i.utils.defaults(g,{x:{label:v},y:{label:p}})}}}t.spec={dimensions:t.dimensions,unit:l};return t}t.normalizeConfig=d;t.transformConfig=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChartScatterplot=undefined;var r=n(74);var i=function e(t){var n=r.normalizeConfig(t);return r.transformConfig("ELEMENT.POINT",n)};t.ChartScatterplot=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChartLine=undefined;var r=n(28);var i=n(74);var a=function e(t){var n=i.normalizeConfig(t);var a=n.data;var o=n.settings.log;var s={none:function e(){return null},horizontal:function e(t){return t.x[t.x.length-1]},vertical:function e(t){return t.y[t.y.length-1]},auto:function e(t){var n=t.x;var i=t.y;var s=n[n.length-1];var u=n.slice(0,n.length-1);var l=i[i.length-1];var c=i.slice(0,i.length-1);var f=t.color;var d=u.concat(c).concat([f]).filter(function(e){return e!==null});var h=-1;var v=[[[s].concat(d),l],[[l].concat(d),s]];var p=v.some(function(e,t){var n=e[0];var i=e[1];var s=r.DataProcessor.isYFunctionOfX(a,n,[i]);if(s.result){h=t}else{o(["Attempt to find a functional relation between",e[0]+" and "+e[1]+" is failed.","There are several "+s.error.keyY+" values (e.g. "+s.error.errY.join(",")+")","for ("+s.error.keyX+" = "+s.error.valX+")."].join(" "))}return s.result});var g;if(p){g=v[h][0][0]}else{o(["All attempts are failed.","Will orient line horizontally by default.","NOTE: the [scatterplot] chart is more convenient for that data."].join(" "));g=s}return g}};var u=(n.lineOrientation||"").toLowerCase();var l=s.hasOwnProperty(u)?s[u]:s.auto;var c=l(n);if(c!==null){n.data=r.DataProcessor.sortByDim(a,c,n.dimensions[c])}return i.transformConfig("ELEMENT.LINE",n)};t.ChartLine=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChartArea=undefined;var r=n(28);var i=n(74);var a=function e(t){var n=i.normalizeConfig(t);var a=n.data;var o=n.settings.log;var s={horizontal:function e(t){return{prop:t.x[t.x.length-1],flip:false}},vertical:function e(t){return{prop:t.y[t.y.length-1],flip:true}},auto:function e(t){var n=t.x;var i=t.y;var s=n[n.length-1];var u=n.slice(0,n.length-1);var l=i[i.length-1];var c=i.slice(0,i.length-1);var f=t.color;var d=u.concat(c).concat([f]).filter(function(e){return e!==null});var h=-1;var v=[[[s].concat(d),l],[[l].concat(d),s]];var p=v.some(function(e,t){var n=e[0];var i=e[1];var s=r.DataProcessor.isYFunctionOfX(a,n,[i]);if(s.result){h=t}else{o(["Attempt to find a functional relation between",e[0]+" and "+e[1]+" is failed.","There are several "+s.error.keyY+" values (e.g. "+s.error.errY.join(",")+")","for ("+s.error.keyX+" = "+s.error.valX+")."].join(" "))}return s.result});var g;var m=null;if(p){g=v[h][0][0];m=h!==0}else{o("All attempts are failed. Gonna transform AREA to general PATH.");g=null}return{prop:g,flip:m}}};var u=typeof n.flip!=="boolean"?"auto":n.flip?"vertical":"horizontal";var l=s[u];var c=l(n);var f="ELEMENT.AREA";if(c.prop!==null){n.data=r.DataProcessor.sortByDim(a,c.prop,n.dimensions[c.prop]);n.flip=c.flip}return i.transformConfig(f,n)};t.ChartArea=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function e(t){var n=Object.assign({columns:{}},t.guide||{});var r={};var i=function e(t,n){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var a;var o=n;var s;if(!n){a=t+":default";s="?"}else{a=t+"_"+n;s="/"}if(!r.hasOwnProperty(a)){r[a]=Object.assign({type:t,source:s,dim:o},i)}return a};var a=t.columns.map(function(e){return i(t.dimensions[e].scale,e,n.columns[e])});return{sources:{"?":{dims:{},data:[{}]},"/":{dims:Object.keys(t.dimensions).reduce(function(e,n){e[n]={type:t.dimensions[n].type};return e},{}),data:t.data}},scales:r,unit:{type:"COORDS.PARALLEL",expression:{operator:"none",source:"/"},columns:a,guide:n,units:[{type:"PARALLEL/ELEMENT.LINE",color:i("color",t.color,n.color),columns:a,expression:{operator:"none",source:"/"}}]},plugins:t.plugins||[]}};t.ChartParallel=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PluginsSDK=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(32);var a=n(80);var o=n(81);function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u={};var l=function(){function e(){s(this,e)}r(e,null,[{key:"unit",value:function e(t){return new a.Unit(t)}},{key:"spec",value:function e(t){return new o.Spec(t)}},{key:"cloneObject",value:function e(t){return JSON.parse(JSON.stringify(t))}},{key:"depthFirstSearch",value:function t(n,r){if(r(n)){return n}var i=n.hasOwnProperty("frames")?n.frames:[{units:n.units}];for(var a=0;a<i.length;a++){var o=i[a].units||[];for(var s=0;s<o.length;s++){var u=e.depthFirstSearch(o[s],r);if(u){return u}}}}},{key:"traverseSpec",value:function e(t,n){var r=function e(t,n,r){n(t,r);(t.units||[]).map(function(r){return e(r,n,t)})};r(t.unit,n,null)}},{key:"extractFieldsFormatInfo",value:function t(n){var r=n.scales;var a=function e(t){return!r[t].dim};var o=function e(t,n,i){var a=n.guide||{};var o=r[n[i]];var s=a[i]||{};t[o.dim]=t[o.dim]||{label:[],format:[],nullAlias:[],tickLabel:[]};var u=s.label;var l=s.label||{};t[o.dim].label.push(typeof u==="string"?u:l._original_text||l.text);var c=s.tickFormat||s.tickPeriod;t[o.dim].format.push(c);t[o.dim].nullAlias.push(s.tickFormatNullAlias);t[o.dim].tickLabel.push(s.tickLabel)};var s=[];e.traverseSpec(n,function(e){s.push(e)});var u=s.reduce(function(e,t){if(t.type==="COORDS.RECT"&&t.hasOwnProperty("x")&&!a(t.x)){o(e,t,"x")}if(t.type==="COORDS.RECT"&&t.hasOwnProperty("y")&&!a(t.y)){o(e,t,"y")}if(t.hasOwnProperty("color")&&!a(t.color)){o(e,t,"color")}if(t.hasOwnProperty("size")&&!a(t.size)){o(e,t,"size")}if(t.hasOwnProperty("label")&&!a(t.label)){o(e,t,"label")}return e},{});var l=function e(t,n){return t.filter(function(e){return e})[0]||n};return Object.keys(u).reduce(function(e,t){e[t].label=l(e[t].label,t);e[t].format=l(e[t].format,null);e[t].nullAlias=l(e[t].nullAlias,"No "+e[t].label);e[t].tickLabel=l(e[t].tickLabel,null);var r=e[t].format==="x-time-auto"?n.settings.utcTime?"day-utc":"day":e[t].format;var a=e[t].nullAlias;var o=r?i.FormatterRegistry.get(r,a):function(e){return e===null?a:e};e[t].format=o;if(e[t].tickLabel){var s=t.replace("."+e[t].tickLabel,"");e[s]={label:e[t].label,nullAlias:e[t].nullAlias,tickLabel:e[t].tickLabel,format:function t(n){return o(n&&n[e[s].tickLabel])},isComplexField:true};e[t].parentField=s}return e},u)}},{key:"tokens",value:function e(){return{reg:function e(t,n){u[t]=n;return this},get:function e(t){return u[t]||t}}}},{key:"getParentUnit",value:function e(t,n){var r=null;var i=function e(t,i){if(t.uid===n.uid){r=i;return true}if(t.frames){t.frames.some(function(n){return(n.units||[]).some(function(n){return e(n,t)})})}else{(t.units||[]).some(function(n){return e(n,t)})}return false};i(t.unit,null);return r}}]);return e}();t.PluginsSDK=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(t){r(this,e);this.unitRef=t}n(e,[{key:"value",value:function e(){return this.unitRef}},{key:"clone",value:function e(){return JSON.parse(JSON.stringify(this.unitRef))}},{key:"traverse",value:function e(t){var n=function e(t,n,r){n(t,r);(t.units||[]).map(function(r){return e(r,n,t)})};n(this.unitRef,t,null);return this}},{key:"reduce",value:function e(t,n){var r=n;this.traverse(function(e,n){return r=t(r,e,n)});return r}},{key:"addFrame",value:function e(t){this.unitRef.frames=this.unitRef.frames||[];t.key.__layerid__=["L",(new Date).getTime(),this.unitRef.frames.length].join("");t.source=t.hasOwnProperty("source")?t.source:this.unitRef.expression.source;t.pipe=t.pipe||[];this.unitRef.frames.push(t);return this}},{key:"addTransformation",value:function e(t,n){this.unitRef.transformation=this.unitRef.transformation||[];this.unitRef.transformation.push({type:t,args:n});return this}},{key:"isCoordinates",value:function e(){return(this.unitRef.type||"").toUpperCase().indexOf("COORDS.")===0}},{key:"isElementOf",value:function e(t){if(this.isCoordinates()){return false}var n=this.unitRef.type||"";var r=n.split("/");if(r.length===1){r.unshift("RECT")}return r[0].toUpperCase()===t.toUpperCase()}}]);return e}();t.Unit=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Spec=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(80);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(t){a(this,e);this.specRef=t}r(e,[{key:"value",value:function e(){return this.specRef}},{key:"unit",value:function e(t){if(t){this.specRef.unit=t}return new i.Unit(this.specRef.unit)}},{key:"addTransformation",value:function e(t,n){this.specRef.transformations=this.specRef.transformations||{};this.specRef.transformations[t]=n;return this}},{key:"getSettings",value:function e(t){return this.specRef.settings[t]}},{key:"setSettings",value:function e(t,n){this.specRef.settings=this.specRef.settings||{};this.specRef.settings[t]=n;return this}},{key:"getScale",value:function e(t){return this.specRef.scales[t]}},{key:"addScale",value:function e(t,n){this.specRef.scales[t]=n;return this}},{key:"regSource",value:function e(t,n){this.specRef.sources[t]=n;return this}},{key:"getSourceData",value:function e(t){var n=this.specRef.sources[t]||{data:[]};return n.data}},{key:"getSourceDim",value:function e(t,n){var r=this.specRef.sources[t]||{dims:{}};return r.dims[n]||{}}}]);return e}();t.Spec=o},function(e,t){"use strict";if(!window.requestAnimationFrame){(function(){var e=0;window.requestAnimationFrame=function(t){var n=Date.now();var r=Math.max(0,16-n+e);e=n+r;return setTimeout(function(){t.call(null,n+r)},r)};window.cancelAnimationFrame=function(e){clearTimeout(e)}})()}if(!Number.isFinite){Object.defineProperty(Number,"isFinite",{value:function e(t){return typeof t==="number"&&isFinite(t)},configurable:true,enumerable:false,writable:true})}if(!Number.isNaN){Object.defineProperty(Number,"isNaN",{value:function e(t){return typeof t==="number"&&isNaN(t)},configurable:true,enumerable:false,writable:true})}if(!Number.isInteger){Object.defineProperty(Number,"isInteger",{value:function e(t){return typeof t==="number"&&isFinite(t)&&Math.floor(t)===t},configurable:true,enumerable:false,writable:true})}if(!Number.MAX_SAFE_INTEGER){Object.defineProperty(Number,"MAX_SAFE_INTEGER",{value:9007199254740991,configurable:false,enumerable:false,writable:false})}if(!Array.prototype.find){Object.defineProperty(Array.prototype,"find",{value:function e(t){if(this==null){throw new TypeError("Array.prototype.find called on null or undefined")}if(typeof t!=="function"){throw new TypeError("predicate must be a function")}var n=Object(this);var r=n.length>>>0;var i=arguments[1];var e;for(var a=0;a<r;a++){e=n[a];if(t.call(i,e,a,n)){return e}}return undefined},configurable:true,enumerable:false,writable:true})}if(!Array.prototype.findIndex){Object.defineProperty(Array.prototype,"findIndex",{value:function e(t){if(this==null){throw new TypeError("Array.prototype.findIndex called on null or undefined")}if(typeof t!=="function"){throw new TypeError("predicate must be a function")}var n=Object(this);var r=n.length>>>0;var i=arguments[1];var e;for(var a=0;a<r;a++){e=n[a];if(t.call(i,e,a,n)){return a}}return-1},configurable:true,enumerable:false,writable:true})}if(!Array.from){Object.defineProperty(Array,"from",{value:function(){var e=Object.prototype.toString;var t=function t(n){return typeof n==="function"||e.call(n)==="[object Function]"};var n=function e(t){var n=Number(t);if(isNaN(n)){return 0}if(n===0||!isFinite(n)){return n}return(n>0?1:-1)*Math.floor(Math.abs(n))};var r=Math.pow(2,53)-1;var i=function e(t){var i=n(t);return Math.min(Math.max(i,0),r)};return function e(n){var r=this;var a=Object(n);if(n==null){throw new TypeError("Array.from requires an array-like object - not null or undefined")}var o=arguments.length>1?arguments[1]:undefined;var s;if(typeof o!=="undefined"){if(!t(o)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){s=arguments[2]}}var u=i(a.length);var l=t(r)?Object(new r(u)):new Array(u);var c=0;var f;while(c<u){f=a[c];if(o){l[c]=typeof s==="undefined"?o(f,c):o.call(s,f,c)}else{l[c]=f}c+=1}l.length=u;return l}}(),configurable:true,enumerable:false,writable:true});var n=Map.prototype.set;Object.defineProperty(Map.prototype,"set",{value:function e(){n.apply(this,arguments);return this},configurable:true,enumerable:false,writable:true});Object.defineProperty(Map.prototype,"values",{value:function e(){var t={};var n=0;this.forEach(function(e){return t[String(n++)]=e});t.length=n;return t},configurable:true,enumerable:false,writable:true});Object.defineProperty(Map.prototype,"entries",{value:function e(){var t={};var n=0;this.forEach(function(e,r){return t[String(n++)]=[r,e]});t.length=n;return t},configurable:true,enumerable:false,writable:true})}if(!Object.assign){Object.defineProperty(Object,"assign",{value:function e(t){if(t===undefined||t===null){throw new TypeError("Cannot convert undefined or null to object")}var n=Object(t);for(var r=1;r<arguments.length;r++){var i=arguments[r];if(i!==undefined&&i!==null){for(var a in i){if(i.hasOwnProperty(a)){n[a]=i[a]}}}}return n},configurable:true,enumerable:false,writable:true})}if(!Element.prototype.matches){Object.defineProperty(Element.prototype,"matches",{value:Element.prototype.msMatchesSelector,configurable:true,enumerable:true,writable:true})}}])})});var vf=t(hf);var pf=n(function(e){(function(t){if(typeof undefined==="function"&&undefined.amd){undefined(["taucharts"],function(e){return t(e)})}else if("object"==="object"&&e.exports){var n=hf;e.exports=t(n)}else{t(this.tauCharts)}})(function(e){var t=e.api.d3;var n=e.api.utils;var r=e.api.pluginsSDK;var i="graphical-report__tooltip-target";var a=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")};function o(o){var s=n.defaults(o||{},{align:"bottom-right",escapeHtml:true,fields:null,formatters:{},dockToData:false,aggregationGroupFields:[],onRevealAggregation:function(e,t){console.log("Setup [onRevealAggregation] callback and filter original data by the following criteria: ",JSON.stringify(e,null,2))},spacing:24});var u={init:function(e){this._chart=e;this._metaInfo={};this._skipInfo={};Object.assign(this,n.omit(s,"fields","getFields"));this._tooltip=this._chart.addBalloon({spacing:s.spacing,auto:true,effectClass:"fade"});var t=s.aggregationGroupFields.length>0?this.templateRevealAggregation:"";var r=n.template(this.template);var i=this.getTooltipNode();this._tooltip.content(r({revealTemplate:t,excludeTemplate:this.templateExclude}));i.addEventListener("click",function(e){var t=e.target;while(t!==e.currentTarget&&t!==null){if(t.classList.contains("i-role-exclude")){this._exclude();this.setState({highlight:null,isStuck:false})}if(t.classList.contains("i-role-reveal")){this._reveal();this.setState({highlight:null,isStuck:false})}t=t.parentNode}}.bind(this),false);this._scrollHandler=function(){this.setState({highlight:null,isStuck:false})}.bind(this);window.addEventListener("scroll",this._scrollHandler,true);this._outerClickHandler=function(e){var t=this.getTooltipNode().getBoundingClientRect();if(e.clientX<t.left||e.clientX>t.right||e.clientY<t.top||e.clientY>t.bottom){this.setState({highlight:null,isStuck:false})}}.bind(this);this.setState(this.state);this.afterInit(i)},getTooltipNode:function(){return this._tooltip.getElement()},state:{highlight:null,isStuck:false},setState:function(e){var t=this.state;var n=this.state=Object.assign({},t,e);t.highlight=t.highlight||{data:null,cursor:null,unit:null};n.highlight=n.highlight||{data:null,cursor:null,unit:null};if(n.isStuck&&t.highlight.data){n.highlight=t.highlight}if(n.highlight.data!==t.highlight.data){if(n.highlight.data){this.hideTooltip();this.showTooltip(n.highlight.data,n.highlight.cursor);this._setTargetSvgClass(true);requestAnimationFrame(function(){this._setTargetSvgClass(true)}.bind(this))}else if(!n.isStuck&&t.highlight.data&&!n.highlight.data){this._removeFocus();this.hideTooltip();this._setTargetSvgClass(false)}}if(n.highlight.data&&(!t.highlight.cursor||n.highlight.cursor.x!==t.highlight.cursor.x||n.highlight.cursor.y!==t.highlight.cursor.y)){this._tooltip.position(n.highlight.cursor.x,n.highlight.cursor.y)}var r=this.getTooltipNode();if(n.isStuck!==t.isStuck){if(n.isStuck){window.addEventListener("click",this._outerClickHandler,true);r.classList.add("stuck");this._setTargetEventsEnabled(false);this._accentFocus(n.highlight.data);this._tooltip.updateSize()}else{window.removeEventListener("click",this._outerClickHandler,true);r.classList.remove("stuck");requestAnimationFrame(function(){this._setTargetEventsEnabled(true)}.bind(this))}}},showTooltip:function(e,t){var n=this.getTooltipNode().querySelectorAll(".i-role-content")[0];if(n){var r=s.fields||typeof s.getFields==="function"&&s.getFields(this._chart)||Object.keys(e);n.innerHTML=this.render(e,r)}this._tooltip.position(t.x,t.y).place(s.align).show().updateSize()},hideTooltip:function(e){window.removeEventListener("click",this._outerClickHandler,true);this._tooltip.hide()},destroy:function(){window.removeEventListener("scroll",this._scrollHandler,true);this._setTargetSvgClass(false);this.setState({highlight:null,isStuck:false});this._tooltip.destroy()},_subscribeToHover:function(){var e=["ELEMENT.LINE","ELEMENT.AREA","ELEMENT.PATH","ELEMENT.INTERVAL","ELEMENT.INTERVAL.STACKED","ELEMENT.POINT"];this._chart.select(function(t){return e.indexOf(t.config.type)>=0}).forEach(function(e){e.on("data-hover",function(e,t){var n=document.body.getBoundingClientRect();this.setState({highlight:t.data?{data:t.data,cursor:{x:t.event.clientX-n.left,y:t.event.clientY-n.top},unit:e}:null})}.bind(this));e.on("data-click",function(e,t){var n=document.body.getBoundingClientRect();this.setState(t.data?{highlight:{data:t.data,cursor:{x:t.event.clientX-n.left,y:t.event.clientY-n.top},unit:e},isStuck:true}:{highlight:null,isStuck:null})}.bind(this))},this)},afterInit:function(e){},render:function(e,t){var n=this;return t.filter(function(e){var t=e.split(".");var r=t.length===2&&n._skipInfo[t[0]];return!r}).map(function(t){var r=t;var i=e[t];return n.renderItem(n._getLabel(r),n._getFormat(r)(i),r,i)}).join("")},renderItem:function(e,t,n,r){return this.itemTemplate({label:s.escapeHtml?a(e):e,value:s.escapeHtml?a(t):t})},_getFormat:function(e){var t=this._metaInfo[e]||{format:function(e){return String(e)}};return t.format},_getLabel:function(e){var t=this._metaInfo[e]||{label:e};return t.label},_accentFocus:function(e){var t=function(t){return t===e};this._chart.select(function(){return true}).forEach(function(e){e.fire("highlight",t)})},_removeFocus:function(){var e=function(){return null};this._chart.select(function(){return true}).forEach(function(t){t.fire("highlight",e);t.fire("highlight-data-points",e)})},_reveal:function(){var e=this.state.highlight.data;var t=s.aggregationGroupFields||[];var n=t.reduce(function(t,n){if(e.hasOwnProperty(n)){t[n]=e[n]}return t},{});s.onRevealAggregation(n,e)},_exclude:function(){this._chart.addFilter({tag:"exclude",predicate:function(e){return function(t){return JSON.stringify(t)!==JSON.stringify(e)}}(this.state.highlight.data)});this._chart.refresh()},onRender:function(){var e=this._getFormatters();this._metaInfo=e.meta;this._skipInfo=e.skip;this._subscribeToHover();this.setState({highlight:null,isStuck:false})},_setTargetSvgClass:function(e){t.select(this._chart.getSVG()).classed(i,e)},_setTargetEventsEnabled:function(e){if(e){this._chart.enablePointerEvents()}else{this._chart.disablePointerEvents()}},templateRevealAggregation:['<div class="i-role-reveal graphical-report__tooltip__vertical">','   <div class="graphical-report__tooltip__vertical__wrap">',"       Reveal","   </div>","</div>"].join(""),templateExclude:['<div class="i-role-exclude graphical-report__tooltip__exclude">','   <div class="graphical-report__tooltip__exclude__wrap">','       <span class="tau-icon-close-gray"></span>',"       Exclude","   </div>","</div>"].join(""),template:['<div class="i-role-content graphical-report__tooltip__content"></div>',"<%= revealTemplate %>","<%= excludeTemplate %>"].join(""),itemTemplate:n.template(['<div class="graphical-report__tooltip__list__item">','<div class="graphical-report__tooltip__list__elem"><%=label%></div>','<div class="graphical-report__tooltip__list__elem"><%=value%></div>',"</div>"].join("")),_getFormatters:function(){var t=r.extractFieldsFormatInfo(this._chart.getSpec());var i={};Object.keys(t).forEach(function(e){if(t[e].isComplexField){i[e]=true}if(t[e].parentField){delete t[e]}});var a=function(e){var t={};if(typeof e==="function"||typeof e==="string"){t={format:e}}else if(n.isObject(e)){t=n.pick(e,"label","format","nullAlias")}return t};Object.keys(s.formatters).forEach(function(r){var i=a(s.formatters[r]);t[r]=Object.assign({label:r,nullAlias:"No "+r},t[r]||{},n.pick(i,"label","nullAlias"));if(i.hasOwnProperty("format")){t[r].format=typeof i.format==="function"?i.format:e.api.tickFormat.get(i.format,t[r].nullAlias)}else{t[r].format=t[r].hasOwnProperty("format")?t[r].format:e.api.tickFormat.get(null,t[r].nullAlias)}});return{meta:t,skip:i}}};return u}e.api.plugins.add("tooltip",o);return o})});var gf=function(){const e=this.riotx.get();const t=()=>{const e={};switch(this.opts.def.style){case"graph-scatterplot":e.type="scatterplot";break;case"graph-line":e.type="line";e.guide={interpolate:"smooth"};break;case"graph-bar":e.type="bar";break;case"graph-horizontal-bar":e.type="horizontalBar";break;case"graph-stacked-bar":e.type="stacked-bar";break;case"graph-horizontal-stacked-bar":e.type="horizontal-stacked-bar";break;case"graph-stacked-area":e.type="stacked-area";break;default:e.type="scatterplot";break}return to({plugins:[vf.api.plugins.get("tooltip")()]},e)};const n=()=>{const e=this.refs.canvas;if(!e){return}const n=this.data;new vf.Chart(to(t(),n)).renderTo(e)};const r=()=>{return Promise.resolve().then(()=>{this.isLoading=true;this.update()}).then(()=>Promise.all([new Promise(e=>setTimeout(e,300)),e.action("components.get",this.opts.id,this.opts.def)])).then(()=>{this.isLoading=false;this.update()}).then(()=>{n()}).catch(e=>{this.isLoading=false;if(e.status===401){this.error="Ë™çË®º„Ç®„É©„Éº„ÄÇ"}else{const e=this.opts.def.api;this.error=`[${e.method.toUpperCase()} ${e.path}]ÈÄö‰ø°„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ`}this.update()})};const i=e=>{if(!_o(e)){return"„É¨„Çπ„Éù„É≥„Çπ„Éá„Éº„Çø„Å´Ë™§„Çä„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ"}return null};this.data=null;this.isLoading=true;this.error=null;this.autoRefreshSec=null;let a=null;const o=()=>{if(!this.autoRefreshSec){return}if(a){return}a=window.setInterval(()=>{r()},this.autoRefreshSec*1e3)};const s=()=>{window.clearInterval(a);a=null};this.listen(this.opts.id,()=>{this.data=e.getter("components.response",this.opts.id);this.error=i(this.data);this.autoRefreshSec=e.getter("components.autoRefreshSec",this.opts.id);o();this.update()});this.refreshId=e.getter("util.components_refresh");this.listen("util",()=>{const t=e.getter("util.components_refresh");if(this.refreshId!==t){this.refreshId=t;r()}});this.on("mount",()=>{r()}).on("unmount",()=>{s();e.action("components.remove",this.opts.id)})};i.tag2("viron-components-page-chart",'<div class="ComponentsPage_Card_Chart__head"> <div class="ComponentsPage_Card_Chart__title">{opts.def.name}</div> </div> <div class="ComponentsPage_Card_Chart__body"> <virtual if="{isLoading}"> <div class="ComponentsPage_Card_Chart__progress"> <viron-icon-reload></viron-icon-reload> </div> </virtual> <virtual if="{!isLoading}"> <virtual if="{!!error}"> <div class="ComponentsPage_Card_Chart__error">{error}</div> </virtual> <virtual if="{!error}"> <div class="ComponentsPage_Card_Chart__canvas" ref="canvas" id="{_riot_id}"></div> </virtual> </virtual> </div> <div class="ComponentsPage_Card_Chart__blocker" if="{isLoading}"></div>',"",'class="ComponentsPage_Card_Chart"',function(e){this.external(gf)});function mf(e){if(typeof e==="number"){return e}if(!e){return 0}if(typeof e==="string"){return parseFloat(e)}if(lu(e)){return NaN}return Number(e)}var yf=mf;function bf(e,t,n,r){e=yf(e);t=t==null?2:t;n=n==null?".":n;r=r==null?",":r;var i=e.toFixed(t),a=new RegExp("^(-?\\d{1,3})((?:\\d{3})+)(\\.(\\d{"+t+"}))?$").exec(i);if(a){return a[1]+a[2].replace(/\d{3}/g,r+"$&")+(a[4]?n+a[4]:"")}else{return i.replace(".",n)}}var _f=bf;var wf=function(){const e=this.riotx.get();const t=()=>{return Promise.resolve().then(()=>{this.isLoading=true;this.update()}).then(()=>Promise.all([new Promise(e=>setTimeout(e,300)),e.action("components.get",this.opts.id,this.opts.def)])).then(()=>{this.isLoading=false;this.update()}).catch(e=>{this.isLoading=false;if(e.status===401){this.error="Ë™çË®º„Ç®„É©„Éº„ÄÇ"}else{const e=this.opts.def.api;this.error=`[${e.method.toUpperCase()} ${e.path}]ÈÄö‰ø°„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ`}this.update()})};const n=e=>{if(!e){return"„É¨„Çπ„Éù„É≥„Çπ„Éá„Éº„Çø„Å´Ë™§„Çä„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ"}if(!ul(e.value)){return"valueÂÄ§„ÅåÊï∞ÂÄ§„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ"}return null};this.data=null;this.isLoading=true;this.error=null;this.autoRefreshSec=null;let r=null;const i=()=>{if(!this.autoRefreshSec){return}if(r){return}r=window.setInterval(()=>{t()},this.autoRefreshSec*1e3)};const a=()=>{window.clearInterval(r);r=null};this.getValue=(()=>{return _f(this.data.value,0)});this.listen(this.opts.id,()=>{this.data=e.getter("components.response",this.opts.id);this.error=n(this.data);this.autoRefreshSec=e.getter("components.autoRefreshSec",this.opts.id);i();this.update()});this.refreshId=e.getter("util.components_refresh");this.listen("util",()=>{const n=e.getter("util.components_refresh");if(this.refreshId!==n){this.refreshId=n;t()}});this.on("mount",()=>{t()}).on("unmount",()=>{a();e.action("components.remove",this.opts.id)})};i.tag2("viron-components-page-number",'<div class="ComponentsPage_Card_Number__head"> <div class="ComponentsPage_Card_Number__title">{opts.def.name}</div> </div> <div class="ComponentsPage_Card_Number__body"> <virtual if="{isLoading}"> <div class="ComponentsPage_Card_Number__progress"> <viron-icon-reload></viron-icon-reload> </div> </virtual> <virtual if="{!isLoading}"> <virtual if="{!!error}"> <div class="ComponentsPage_Card_Number__error">{error}</div> </virtual> <virtual if="{!error}"> <div class="ComponentsPage_Card_Number__valueWrapper"> <div class="ComponentsPage_Card_Number__value">{getValue()}</div> <div class="ComponentsPage_Card_Number__unit" if="{!!data.unit}">{data.unit}</div> </div> </virtual> </virtual> </div> <div class="ComponentsPage_Card_Number__blocker" if="{isLoading}"></div>',"",'class="ComponentsPage_Card_Number"',function(e){this.external(wf)});i.tag2("viron-icon-file",'<svg viewbox="3093.704 22727.934 46.089 60.576"> <path d="M78.81,0H54.481a6.457,6.457,0,0,0-6.447,6.447V54.128a6.454,6.454,0,0,0,6.447,6.447h33.2a6.454,6.454,0,0,0,6.445-6.447V15.259Zm8.867,56.627h-33.2a2.5,2.5,0,0,1-2.5-2.5V51.239s0-20.952,0-44.792a2.5,2.5,0,0,1,2.5-2.495l22.852-.024v8.447A4.473,4.473,0,0,0,81.8,16.847l8.275-.024.093,37.305A2.5,2.5,0,0,1,87.678,56.627Z" transform="translate(3045.671 22727.934)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconFile {opts.class}"',function(e){});i.tag2("viron-icon-plus-thin",'<svg viewbox="-7753.249 2039.999 15.999 16.002"> <path d="M11622.45-705a.2.2,0,0,1-.2-.2v-7.049h-7.05a.2.2,0,0,1-.2-.2v-1.1a.2.2,0,0,1,.2-.2h7.05V-720.8a.2.2,0,0,1,.2-.2h1.1a.2.2,0,0,1,.2.2v7.049h7.05a.2.2,0,0,1,.2.2v1.1a.2.2,0,0,1-.2.2h-7.05v7.049a.2.2,0,0,1-.2.2Z" transform="translate(-19368.25 2761)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconPlusThin {opts.class}"',function(e){});i.tag2("viron-icon-remove",'<svg viewbox="-7714 1990 16 16"> <g transform="translate(-8037 1850)"> <rect width="16" height="2" rx="0.2" transform="translate(323 142)"></rect> <rect width="4" height="2.5" rx="0.2" transform="translate(329 140)"></rect> <path d="M2945.8-10677h-9.6a.2.2,0,0,1-.2-.2l-1-10.6a.2.2,0,0,1,.2-.2h11.6a.2.2,0,0,1,.2.2l-1,10.6A.2.2,0,0,1,2945.8-10677Zm-4.852-9.661a.2.2,0,0,0-.2.2v7.824a.2.2,0,0,0,.2.2h.351a.2.2,0,0,0,.2-.2v-7.824a.2.2,0,0,0-.2-.2Zm2.5,0a.2.2,0,0,0-.2.2v7.1a.2.2,0,0,0,.2.2h.351a.2.2,0,0,0,.2-.2v-7.1a.2.2,0,0,0-.2-.2Zm-5.25,0a.189.189,0,0,0-.2.182v7.136a.191.191,0,0,0,.2.182h.352a.191.191,0,0,0,.2-.182v-7.136a.189.189,0,0,0-.2-.182Z" transform="translate(-2610 10833)"></path> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconRemove {opts.class}"',function(e){});function xf(e){return yo(e,"Boolean")}var Tf=xf;function Cf(e){return e===null}var kf=Cf;function Sf(e){return yo(e,"String")}var Ef=Sf;var Pf;function Of(e){return e===Pf}var Mf=Of;var Af=function(){this.isText=false;this.isImage=false;this.isBase64=false;this.mimeType=null;this.isVideo=false;this.videoType=null;this.value=(()=>{const e=this.opts.data;const t=this.opts.column;if(kf(e)){this.isText=true;return"null"}if(Tf(e)){this.isText=true;return e?"true":"false"}if(ul(e)){this.isText=true;return String(e)}if(lu(e)){this.isText=true;return"[...]"}if(_o(e)){this.isText=true;return"{...}"}if(Ef(e)){if(t.format==="base64"){this.isBase64=true;this.mimeType=t["x-mime-type"]||"image/png";switch(this.mimeType){case"image/png":case"image/gif":case"image/jpeg":this.isImage=true;break;default:break}return e}const n=e.split(".");if(n.length<2){this.isText=true;return e}const r=n[n.length-1];if(ql(["png","jpg","jpeg","gif"],r)){this.isImage=true;return e}if(ql(["mp4","ogv","webm"],r)){this.isVideo=true;this.videoType=r;return e}this.isText=true;return e}if(Mf(e)){this.isText=true;return""}this.isText=true;return String(e)})();this.isEmphasised=(()=>{const e=this.opts.column["x-emphasis"]||[];if(!e.length){return false}return ql(e,this.value)})()};i.tag2("viron-components-page-table-cell",'<virtual if="{isText}"> <div class="ComponentsPage_Card_Table_Cell__string {\'ComponentsPage_Card_Table_Cell__string--emphasised\': isEmphasised}">{value}</div> </virtual> <virtual if="{isImage}"> <virtual if="{!isBase64}"> <div class="ComponentsPage_Card_Table_Cell__image" riot-style="background-image:url({value});"></div> </virtual> <virtual if="{isBase64}"> <div class="ComponentsPage_Card_Table_Cell__image" riot-style="background-image:url(data:{mimeType};base64,{value});"></div> </virtual> </virtual> <virtual if="{isVideo}"> <componentspage_card_table_cell__video>TODO</ComponentsPage_Card_Table_Cell__video> </virtual>',"",'class="ComponentsPage_Card_Table_Cell"',function(e){this.external(Af)});var Nf=function(){this.handleTap=(()=>{if(!this.opts.onchange){return}if(this.opts.isdisabled){return}this.opts.onchange(!this.opts.ischecked,this.opts.id)});this.handleBlockerTap=(e=>{e.stopPropagation()})};i.tag2("viron-checkbox",'<div class="Checkbox__content"> <div class="Checkbox__mark"> <viron-icon-check></viron-icon-check> </div> <div class="Checkbox__label" if="{!!opts.label}">{opts.label}</div> </div> <div class="Checkbox__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"","class=\"Checkbox {'Checkbox--checked': opts.ischecked, 'Checkbox--preview': opts.ispreview, 'Checkbox--error': opts.iserror, 'Checkbox--disabled': opts.isdisabled} Checkbox--{opts.theme}\" onclick=\"{getClickHandler('handleTap')}\" ontouchstart=\"{getTouchStartHandler()}\" ontouchmove=\"{getTouchMoveHandler()}\" ontouchend=\"{getTouchEndHandler('handleTap')}\"",function(e){this.external(Nf)});var Rf=function(){const e=this.riotx.get();this.isApplyButtonDisabled=false;const t=this.opts.selectedColumnKeys;this.columns=Gu(Pl(this.opts.columns),e=>{let n;if(!t||ql(t,e.key)){n=true}return to(e,{isSelected:n})});this.isAllSelected=!t||t.length===this.columns.length;this.layoutType=e.getter("layout.type");this.isMobile=e.getter("layout.isMobile");this.listen("layout",()=>{this.layoutType=e.getter("layout.type");this.isMobile=e.getter("layout.isMobile");this.update()});this.handleCloseButtonTap=(()=>{this.close()});this.handleAllSelectChange=(e=>{this.isAllSelected=e;Gu(this.columns,t=>{t.isSelected=e;return t});if(!qu(this.columns,e=>{return e.isSelected})){this.isApplyButtonDisabled=true}else{this.isApplyButtonDisabled=false}this.update()});this.handleItemChange=((e,t)=>{const n=qu(this.columns,e=>{return e.key===t});if(!!n){n.isSelected=e}if(!qu(this.columns,e=>{return e.isSelected})){this.isApplyButtonDisabled=true}else{this.isApplyButtonDisabled=false}if(qu(this.columns,e=>{return!e.isSelected})){this.isAllSelected=false}else{this.isAllSelected=true}this.update()});this.handleApplyButtonTap=(()=>{if(!this.opts.onChange){return}let e=Gu(rl(this.columns,e=>{return e.isSelected}),e=>{return e.key});if(e.length===this.columns.length){e=null}this.opts.onChange(e);if(this.isMobile){this.close()}})};i.tag2("viron-components-page-filter",'<div class="ComponentsPage_Filter__head"> <div class="ComponentsPage_Filter__closeButton" onclick="{getClickHandler(\'handleCloseButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleCloseButtonTap\')}"> <viron-icon-close></viron-icon-close> </div> <div class="ComponentsPage_Filter__title">Ë°®Á§∫È†ÖÁõÆ„Éï„Ç£„É´„Çø„Éº</div> <div class="ComponentsPage_Filter__description">„ÉÜ„Éº„Éñ„É´„Å´Ë°®Á§∫„Åô„ÇãÈ†ÖÁõÆ„ÇíÈÅ∏Êäû„Åß„Åç„Åæ„Åô„ÄÇË°®Á§∫„Åï„Åõ„Åü„ÅÑÈ†ÖÁõÆ„ÇíON„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</div> <div class="ComponentsPage_Filter__control"> <div class="ComponentsPage_Filter__item"> <viron-checkbox label="ÂÖ®„Å¶ÈÅ∏Êäû„Åô„Çã" ischecked="{isAllSelected}" theme="ghost" onchange="{handleAllSelectChange}"></viron-checkbox> </div> </div> </div> <div class="ComponentsPage_Filter__body"> <div class="ComponentsPage_Filter__item" each="{column in columns}"> <viron-checkbox id="{column.key}" label="{column.description || column.key}" ischecked="{column.isSelected}" theme="ghost" onchange="{handleItemChange}"></viron-checkbox> </div> </div> <div class="ComponentsPage_Filter__tail"> <viron-button label="ÈÅ©Áî®„Åô„Çã" isdisabled="{isApplyButtonDisabled}" onselect="{handleApplyButtonTap}"></viron-button> </div>',"",'class="ComponentsPage_Filter ComponentsPage_Filter--{layoutType}"',function(e){this.external(Rf)});var Df=function(){const e=this.riotx.get();let t=true;this.isMobile=e.getter("layout.isMobile");this.options=[];const n=this.opts.config;const r=n.path;const i=n.field;const a=n.query||{};const o=t=>{if(kf(t)||Mf(t)){return}Promise.resolve().then(()=>e.action("oas.getAutocomplete",r,to({},a,{[i]:t}))).then(e=>{this.options=e;this.update()}).catch(t=>e.action("modals.add","viron-error",{error:t}))};this.normalizeValue=(e=>{if(ul(e)){return String(e)}if(Mf(e)){return null}return e});this.on("mount",()=>{o(this.normalizeValue(this.refs.input.value))});this.handleFormSubmit=(e=>{e.preventDefault();e.stopPropagation();const t=this.normalizeValue(this.opts.val);const n=this.opts.id;if(this.opts.onchange){this.opts.onchange(t,n)}if(this.opts.onsubmit){this.opts.onsubmit(t,n)}const r=this.refs.input;if(this.refs.input){r.blur()}});this.handleInputInput=(e=>{if(!this.opts.onchange){return}if(this.opts.isdisabled){return}o(this.normalizeValue(e.target.value));this.opts.onchange(this.normalizeValue(e.target.value),this.opts.id)});this.handleInputChange=(e=>{e.stopPropagation()});this.handleInputFocus=(()=>{if(!this.opts.onfocus){return}this.opts.onfocus()});this.handleInputBlur=(()=>{if(!this.opts.onblur){return}this.opts.onblur()});this.handleBlockerTap=(n=>{n.stopPropagation();if(this.isMobile||!t||!this.opts.val){return}Promise.resolve().then(()=>{return lf.copy(this.opts.val)}).then(()=>e.action("toasts.add",{message:"„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü„ÄÇ"})).catch(()=>{t=false;e.action("toasts.add",{type:"error",message:"„Åî‰ΩøÁî®‰∏≠„ÅÆ„Éñ„É©„Ç¶„Ç∂„Åß„ÅØ„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„ÉºÂá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ"})})})};i.tag2("viron-autocomplete",'<div class="Autocomplete__label" if="{!!opts.label}">{opts.label}</div> <form onsubmit="{handleFormSubmit}"> <input class="Autocomplete__input" type="text" riot-value="{opts.val}" ref="input" list="{_riot_id}" disabled="{opts.isdisabled}" oninput="{handleInputInput}" onchange="{handleInputChange}" onfocus="{handleInputFocus}" onblur="{handleInputBlur}"> </form> <datalist id="{_riot_id}"> <option each="{opt in options}" riot-value="{opt.value}">{opt.name}</option> </datalist> <div class="Autocomplete__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"","class=\"Autocomplete {'Autocomplete--disabled': opts.isdisabled, 'Autocomplete--preview': opts.ispreview, 'Autocomplete--error': opts.iserror}\"",function(e){this.external(Df)});var Lf=function(){const e=this.riotx.get();const t=this.opts.mimetype||"";this.isImage=false;if(t.indexOf("image")===0){this.isImage=true}this.handleBlockerTap=(t=>{t.stopPropagation();if(!this.opts.ispreview){return}e.action("mediapreviews.add",{path:`data:${this.mimeType};base64,${this.opts.val}`})})};i.tag2("viron-base64",'<virtual if="{isImage}"> <div class="Base64__content" riot-style="background-image:url(data:{mimeType};base64,{opts.val});"></div> </virtual> <div class="Base64__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"",'class="Base64"',function(e){this.external(Lf)});var If=n(function(e,t){(function(){var e=function(e){var t={};function n(r){if(t[r]){return t[r].exports}var i=t[r]={i:r,l:false,exports:{}};e[r].call(i.exports,i,i.exports,n);i.l=true;return i.exports}n.m=e;n.c=t;n.i=function(e){return e};n.d=function(e,t,r){if(!n.o(e,t)){Object.defineProperty(e,t,{configurable:false,enumerable:true,get:r})}};n.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};n.d(t,"a",t);return t};n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};n.p="";return n(n.s=6)}([function(e,t){var n="¬™¬µ¬∫√Ä-√ñ√ò-√∂√∏-ÀÅÀÜ-ÀëÀ†-À§À¨ÀÆÕ∞-Õ¥Õ∂Õ∑Õ∫-ÕΩŒÜŒà-ŒäŒåŒé-Œ°Œ£-œµœ∑-“Å“ä-‘ß‘±-’ñ’ô’°-÷á◊ê-◊™◊∞-◊≤ÿ†-ŸäŸÆŸØŸ±-€ì€ï€•€¶€Æ€Ø€∫-€º€ø‹ê‹í-‹Ø›ç-ﬁ•ﬁ±ﬂä-ﬂ™ﬂ¥ﬂµﬂ∫‡†Ä-‡†ï‡†ö‡†§‡†®‡°Ä-‡°ò‡¢†‡¢¢-‡¢¨‡§Ñ-‡§π‡§Ω‡•ê‡•ò-‡•°‡•±-‡•∑‡•π-‡•ø‡¶Ö-‡¶å‡¶è‡¶ê‡¶ì-‡¶®‡¶™-‡¶∞‡¶≤‡¶∂-‡¶π‡¶Ω‡ßé‡ßú‡ßù‡ßü-‡ß°‡ß∞‡ß±‡®Ö-‡®ä‡®è‡®ê‡®ì-‡®®‡®™-‡®∞‡®≤‡®≥‡®µ‡®∂‡®∏‡®π‡©ô-‡©ú‡©û‡©≤-‡©¥‡™Ö-‡™ç‡™è-‡™ë‡™ì-‡™®‡™™-‡™∞‡™≤‡™≥‡™µ-‡™π‡™Ω‡´ê‡´†‡´°‡¨Ö-‡¨å‡¨è‡¨ê‡¨ì-‡¨®‡¨™-‡¨∞‡¨≤‡¨≥‡¨µ-‡¨π‡¨Ω‡≠ú‡≠ù‡≠ü-‡≠°‡≠±‡ÆÉ‡ÆÖ-‡Æä‡Æé-‡Æê‡Æí-‡Æï‡Æô‡Æö‡Æú‡Æû‡Æü‡Æ£‡Æ§‡Æ®-‡Æ™‡ÆÆ-‡Æπ‡Øê‡∞Ö-‡∞å‡∞é-‡∞ê‡∞í-‡∞®‡∞™-‡∞≥‡∞µ-‡∞π‡∞Ω‡±ò‡±ô‡±†‡±°‡≤Ö-‡≤å‡≤é-‡≤ê‡≤í-‡≤®‡≤™-‡≤≥‡≤µ-‡≤π‡≤Ω‡≥û‡≥†‡≥°‡≥±‡≥≤‡¥Ö-‡¥å‡¥é-‡¥ê‡¥í-‡¥∫‡¥Ω‡µé‡µ†‡µ°‡µ∫-‡µø‡∂Ö-‡∂ñ‡∂ö-‡∂±‡∂≥-‡∂ª‡∂Ω‡∑Ä-‡∑Ü‡∏Å-‡∏∞‡∏≤‡∏≥‡πÄ-‡πÜ‡∫Å‡∫Ç‡∫Ñ‡∫á‡∫à‡∫ä‡∫ç‡∫î-‡∫ó‡∫ô-‡∫ü‡∫°-‡∫£‡∫•‡∫ß‡∫™‡∫´‡∫≠-‡∫∞‡∫≤‡∫≥‡∫Ω‡ªÄ-‡ªÑ‡ªÜ‡ªú-‡ªü‡ºÄ‡ΩÄ-‡Ωá‡Ωâ-‡Ω¨‡æà-‡æå·ÄÄ-·Ä™·Äø·Åê-·Åï·Åö-·Åù·Å°·Å•·Å¶·ÅÆ-·Å∞·Åµ-·ÇÅ·Çé·Ç†-·ÉÖ·Éá·Éç·Éê-·É∫·Éº-·âà·âä-·âç·âê-·âñ·âò·âö-·âù·â†-·äà·ää-·äç·äê-·ä∞·ä≤-·äµ·ä∏-·äæ·ãÄ·ãÇ-·ãÖ·ãà-·ãñ·ãò-·åê·åí-·åï·åò-·çö·éÄ-·éè·é†-·è¥·êÅ-·ô¨·ôØ-·ôø·öÅ-·öö·ö†-·õ™·õÆ-·õ∞·úÄ-·úå·úé-·úë·ú†-·ú±·ùÄ-·ùë·ù†-·ù¨·ùÆ-·ù∞·ûÄ-·û≥·üó·üú·††-·°∑·¢Ä-·¢®·¢™·¢∞-·£µ·§Ä-·§ú·•ê-·•≠·•∞-·•¥·¶Ä-·¶´·ßÅ-·ßá·®Ä-·®ñ·®†-·©î·™ß·¨Ö-·¨≥·≠Ö-·≠ã·ÆÉ-·Æ†·ÆÆ·ÆØ·Æ∫-·Ø•·∞Ä-·∞£·±ç-·±è·±ö-·±Ω·≥©-·≥¨·≥Æ-·≥±·≥µ·≥∂·¥Ä-·∂ø·∏Ä-·ºï·ºò-·ºù·º†-·ΩÖ·Ωà-·Ωç·Ωê-·Ωó·Ωô·Ωõ·Ωù·Ωü-·ΩΩ·æÄ-·æ¥·æ∂-·æº·ææ·øÇ-·øÑ·øÜ-·øå·øê-·øì·øñ-·øõ·ø†-·ø¨·ø≤-·ø¥·ø∂-·øº‚Å±‚Åø‚Çê-‚Çú‚ÑÇ‚Ñá‚Ñä-‚Ñì‚Ñï‚Ñô-‚Ñù‚Ñ§‚Ñ¶‚Ñ®‚Ñ™-‚Ñ≠‚ÑØ-‚Ñπ‚Ñº-‚Ñø‚ÖÖ-‚Öâ‚Öé‚Ö†-‚Üà‚∞Ä-‚∞Æ‚∞∞-‚±û‚±†-‚≥§‚≥´-‚≥Æ‚≥≤‚≥≥‚¥Ä-‚¥•‚¥ß‚¥≠‚¥∞-‚µß‚µØ‚∂Ä-‚∂ñ‚∂†-‚∂¶‚∂®-‚∂Æ‚∂∞-‚∂∂‚∂∏-‚∂æ‚∑Ä-‚∑Ü‚∑à-‚∑é‚∑ê-‚∑ñ‚∑ò-‚∑û‚∏Ø„ÄÖ-„Äá„Ä°-„Ä©„Ä±-„Äµ„Ä∏-„Äº„ÅÅ-„Çñ„Çù-„Çü„Ç°-„É∫„Éº-„Éø„ÑÖ-„Ñ≠„Ñ±-„Üé„Ü†-„Ü∫„á∞-„áø„êÄ-‰∂µ‰∏Ä-ÈøåÍÄÄ-ÍíåÍìê-ÍìΩÍîÄ-ÍòåÍòê-ÍòüÍò™Íò´ÍôÄ-ÍôÆÍôø-ÍöóÍö†-ÍõØÍúó-ÍúüÍú¢-ÍûàÍûã-ÍûéÍûê-ÍûìÍû†-Íû™Íü∏-Í†ÅÍ†É-Í†ÖÍ†á-Í†äÍ†å-Í†¢Í°Ä-Í°≥Í¢Ç-Í¢≥Í£≤-Í£∑Í£ªÍ§ä-Í§•Í§∞-Í•ÜÍ•†-Í•ºÍ¶Ñ-Í¶≤ÍßèÍ®Ä-Í®®Í©Ä-Í©ÇÍ©Ñ-Í©ãÍ©†-Í©∂Í©∫Í™Ä-Í™ØÍ™±Í™µÍ™∂Í™π-Í™ΩÍ´ÄÍ´ÇÍ´õ-Í´ùÍ´†-Í´™Í´≤-Í´¥Í¨Å-Í¨ÜÍ¨â-Í¨éÍ¨ë-Í¨ñÍ¨†-Í¨¶Í¨®-Í¨ÆÍØÄ-ÍØ¢Í∞Ä-Ìû£Ìû∞-ÌüÜÌüã-ÌüªÔ§Ä-Ô©≠Ô©∞-Ô´ôÔ¨Ä-Ô¨ÜÔ¨ì-Ô¨óÔ¨ùÔ¨ü-Ô¨®Ô¨™-Ô¨∂Ô¨∏-Ô¨ºÔ¨æÔ≠ÄÔ≠ÅÔ≠ÉÔ≠ÑÔ≠Ü-ÔÆ±ÔØì-Ô¥ΩÔµê-Ô∂èÔ∂í-Ô∑áÔ∑∞-Ô∑ªÔπ∞-Ôπ¥Ôπ∂-ÔªºÔº°-Ôº∫ÔΩÅ-ÔΩöÔΩ¶-ÔææÔøÇ-ÔøáÔøä-ÔøèÔøí-ÔøóÔøö-Ôøú";var r="ÃÄ-ÕØ“É-“á÷ë-÷Ω÷ø◊Å◊Ç◊Ñ◊Ö◊áÿê-ÿöÿ†-ŸâŸ≤-€ì€ß-€®€ª-€º‹∞-›ä‡†Ä-‡†î‡†õ-‡†£‡†•-‡†ß‡†©-‡†≠‡°Ä-‡°ó‡£§-‡£æ‡§Ä-‡§É‡§∫-‡§º‡§æ-‡•è‡•ë-‡•ó‡•¢-‡•£‡•¶-‡•Ø‡¶Å-‡¶É‡¶º‡¶æ-‡ßÑ‡ßá‡ßà‡ßó‡ßü-‡ß†‡®Å-‡®É‡®º‡®æ-‡©Ç‡©á‡©à‡©ã-‡©ç‡©ë‡©¶-‡©±‡©µ‡™Å-‡™É‡™º‡™æ-‡´Ö‡´á-‡´â‡´ã-‡´ç‡´¢-‡´£‡´¶-‡´Ø‡¨Å-‡¨É‡¨º‡¨æ-‡≠Ñ‡≠á‡≠à‡≠ã-‡≠ç‡≠ñ‡≠ó‡≠ü-‡≠†‡≠¶-‡≠Ø‡ÆÇ‡Ææ-‡ØÇ‡ØÜ-‡Øà‡Øä-‡Øç‡Øó‡Ø¶-‡ØØ‡∞Å-‡∞É‡±Ü-‡±à‡±ä-‡±ç‡±ï‡±ñ‡±¢-‡±£‡±¶-‡±Ø‡≤Ç‡≤É‡≤º‡≤æ-‡≥Ñ‡≥Ü-‡≥à‡≥ä-‡≥ç‡≥ï‡≥ñ‡≥¢-‡≥£‡≥¶-‡≥Ø‡¥Ç‡¥É‡µÜ-‡µà‡µó‡µ¢-‡µ£‡µ¶-‡µØ‡∂Ç‡∂É‡∑ä‡∑è-‡∑î‡∑ñ‡∑ò-‡∑ü‡∑≤‡∑≥‡∏¥-‡∏∫‡πÄ-‡πÖ‡πê-‡πô‡∫¥-‡∫π‡ªà-‡ªç‡ªê-‡ªô‡ºò‡ºô‡º†-‡º©‡ºµ‡º∑‡ºπ‡ΩÅ-‡Ωá‡Ω±-‡æÑ‡æÜ-‡æá‡æç-‡æó‡æô-‡æº‡øÜ·ÄÄ-·Ä©·ÅÄ-·Åâ·Åß-·Å≠·Å±-·Å¥·ÇÇ-·Çç·Çè-·Çù·çù-·çü·úé-·úê·ú†-·ú∞·ùÄ-·ùê·ù≤·ù≥·ûÄ-·û≤·üù·ü†-·ü©·†ã-·†ç·†ê-·†ô·§†-·§´·§∞-·§ª·•ë-·•≠·¶∞-·ßÄ·ßà-·ßâ·ßê-·ßô·®Ä-·®ï·®†-·©ì·©†-·©º·©ø-·™â·™ê-·™ô·≠Ü-·≠ã·≠ê-·≠ô·≠´-·≠≥·Æ∞-·Æπ·Ø¶-·Ø≥·∞Ä-·∞¢·±Ä-·±â·±õ-·±Ω·≥ê-·≥í·¥Ä-·∂æ·∏Å-·ºï‚Äå‚Äç‚Äø‚ÅÄ‚Åî‚Éê-‚Éú‚É°‚É•-‚É∞‚∂Å-‚∂ñ‚∑†-‚∑ø„Ä°-„Ä®„Çô„ÇöÍôÄ-Íô≠Íô¥-ÍôΩÍöüÍõ∞-Íõ±Íü∏-Í†ÄÍ†ÜÍ†ãÍ†£-Í†ßÍ¢Ä-Í¢ÅÍ¢¥-Í£ÑÍ£ê-Í£ôÍ£≥-Í£∑Í§Ä-Í§âÍ§¶-Í§≠Í§∞-Í•ÖÍ¶Ä-Í¶ÉÍ¶≥-ÍßÄÍ®Ä-Í®ßÍ©Ä-Í©ÅÍ©å-Í©çÍ©ê-Í©ôÍ©ªÍ´†-Í´©Í´≤-Í´≥ÍØÄ-ÍØ°ÍØ¨ÍØ≠ÍØ∞-ÍØπÔ¨†-Ô¨®Ô∏Ä-Ô∏èÔ∏†-Ô∏¶Ô∏≥Ô∏¥Ôπç-ÔπèÔºê-ÔºôÔºø";var i=new RegExp("["+n+"]");var a=new RegExp("["+n+r+"]");t.newline=/[\n\r\u2028\u2029]/;t.lineBreak=new RegExp("\r\n|"+t.newline.source);t.allLineBreaks=new RegExp(t.lineBreak.source,"g");t.isIdentifierStart=function(e){if(e<65){return e===36||e===64}if(e<91){return true}if(e<97){return e===95}if(e<123){return true}return e>=170&&i.test(String.fromCharCode(e))};t.isIdentifierChar=function(e){if(e<48){return e===36}if(e<58){return true}if(e<65){return false}if(e<91){return true}if(e<97){return e===95}if(e<123){return true}return e>=170&&a.test(String.fromCharCode(e))}},function(e,t,n){var r=n(3).mergeOpts;var i=n(0);var a=n(4).Output;var o=n(7).Tokenizer;function s(e,t){if(t.multiline_frame||t.mode===g.ForInitializer||t.mode===g.Conditional){return}var n=t.start_line_index;e.remove_indent(n)}function u(e,t){for(var n=0;n<t.length;n+=1){if(t[n]===e){return true}}return false}function l(e){return e.replace(/^\s+|\s+$/g,"")}function c(e){return e.replace(/^\s+/g,"")}function f(e){var t={};for(var n=0;n<e.length;n++){t[e[n].replace(/-/g,"_")]=e[n]}return t}function d(e){e=e||v.before_newline;if(!u(e,h)){throw new Error("Invalid Option Value: The option 'operator_position' must be one of the following values\n"+h+"\nYou passed in: '"+e+"'")}return e}var h=["before-newline","after-newline","preserve-newline"];var v=f(h);var p=[v.before_newline,v.preserve_newline];var g={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function m(e,t){"use strict";var n;var f=[],h;var m;var y;var b,_,w;var x,T,C;var k;var S,E;var P="";S={TK_START_EXPR:J,TK_END_EXPR:Q,TK_START_BLOCK:ee,TK_END_BLOCK:te,TK_WORD:ne,TK_RESERVED:ne,TK_SEMICOLON:re,TK_STRING:ie,TK_EQUALS:ae,TK_OPERATOR:se,TK_COMMA:oe,TK_BLOCK_COMMENT:ue,TK_COMMENT:le,TK_DOT:ce,TK_UNKNOWN:fe,TK_EOF:de};function O(e,t){var r=0;if(e){r=e.indentation_level;if(!n.just_added_newline()&&e.line_indent_level>r){r=e.line_indent_level}}var i={mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:false,declaration_assignment:false,multiline_frame:false,inline_frame:false,if_block:false,else_block:false,do_block:false,do_while:false,import_block:false,in_case_statement:false,in_case:false,case_body:false,indentation_level:r,line_indent_level:e?e.line_indent_level:r,start_line_index:n.get_line_number(),ternary_depth:0};return i}t=t?t:{};t=r(t,"js");E={};if(t.brace_style==="expand-strict"){t.brace_style="expand"}else if(t.brace_style==="collapse-preserve-inline"){t.brace_style="collapse,preserve-inline"}else if(t.braces_on_own_line!==undefined){t.brace_style=t.braces_on_own_line?"expand":"collapse"}else if(!t.brace_style){t.brace_style="collapse"}var M=t.brace_style.split(/[^a-zA-Z0-9_\-]+/);E.brace_preserve_inline=false;E.brace_style="collapse";for(var A=0;A<M.length;A++){if(M[A]==="preserve-inline"){E.brace_preserve_inline=true}else{E.brace_style=M[A]}}E.indent_size=t.indent_size?parseInt(t.indent_size,10):4;E.indent_char=t.indent_char?t.indent_char:" ";E.eol=t.eol?t.eol:"auto";E.preserve_newlines=t.preserve_newlines===undefined?true:t.preserve_newlines;E.unindent_chained_methods=t.unindent_chained_methods===undefined?false:t.unindent_chained_methods;E.break_chained_methods=t.break_chained_methods===undefined?false:t.break_chained_methods;E.max_preserve_newlines=t.max_preserve_newlines===undefined?0:parseInt(t.max_preserve_newlines,10);E.space_in_paren=t.space_in_paren===undefined?false:t.space_in_paren;E.space_in_empty_paren=t.space_in_empty_paren===undefined?false:t.space_in_empty_paren;E.jslint_happy=t.jslint_happy===undefined?false:t.jslint_happy;E.space_after_anon_function=t.space_after_anon_function===undefined?false:t.space_after_anon_function;E.keep_array_indentation=t.keep_array_indentation===undefined?false:t.keep_array_indentation;E.space_before_conditional=t.space_before_conditional===undefined?true:t.space_before_conditional;E.unescape_strings=t.unescape_strings===undefined?false:t.unescape_strings;E.wrap_line_length=t.wrap_line_length===undefined?0:parseInt(t.wrap_line_length,10);E.e4x=t.e4x===undefined?false:t.e4x;E.end_with_newline=t.end_with_newline===undefined?false:t.end_with_newline;E.comma_first=t.comma_first===undefined?false:t.comma_first;E.operator_position=d(t.operator_position);E.test_output_raw=t.test_output_raw===undefined?false:t.test_output_raw;if(E.jslint_happy){E.space_after_anon_function=true}if(t.indent_with_tabs){E.indent_char="\t";E.indent_size=1}if(E.eol==="auto"){E.eol="\n";if(e&&i.lineBreak.test(e||"")){E.eol=e.match(i.lineBreak)[0]}}E.eol=E.eol.replace(/\\r/,"\r").replace(/\\n/,"\n");w="";while(E.indent_size>0){w+=E.indent_char;E.indent_size-=1}var N=0;if(e&&e.length){while(e.charAt(N)===" "||e.charAt(N)==="\t"){N+=1}P=e.substring(0,N);e=e.substring(N)}b="TK_START_BLOCK";_="";n=new a(w,P);n.raw=E.test_output_raw;C=[];U(g.BlockStatement);this.beautify=function(){var t;m=new o(e,E,w);f=m.tokenize();h=0;y=Z();while(y){S[y.type]();_=x.last_text;b=y.type;x.last_text=y.text;h+=1;y=Z()}t=n.get_code(E.end_with_newline,E.eol);return t};function R(e,t){var n=e.newlines;var r=E.keep_array_indentation&&V(x.mode);var i=y;for(var a=0;a<e.comments_before.length;a++){y=e.comments_before[a];R(y,t);S[y.type](t)}y=i;if(r){for(var o=0;o<n;o+=1){B(o>0,t)}}else{if(E.max_preserve_newlines&&n>E.max_preserve_newlines){n=E.max_preserve_newlines}if(E.preserve_newlines){if(e.newlines>1){B(false,t);for(var s=1;s<n;s+=1){B(true,t)}}}}}function D(e){e=e.replace(i.allLineBreaks,"\n");var t=[],n=e.indexOf("\n");while(n!==-1){t.push(e.substring(0,n));e=e.substring(n+1);n=e.indexOf("\n")}if(e.length){t.push(e)}return t}var L=["break","continue","return","throw","yield"];function I(e){e=e===undefined?false:e;if(n.just_added_newline()){return}var t=E.preserve_newlines&&y.wanted_newline||e;var r=u(x.last_text,m.positionable_operators)||u(y.text,m.positionable_operators);if(r){var i=u(x.last_text,m.positionable_operators)&&u(E.operator_position,p)||u(y.text,m.positionable_operators);t=t&&i}if(t){B(false,true)}else if(E.wrap_line_length){if(b==="TK_RESERVED"&&u(x.last_text,L)){return}var a=n.current_line.get_character_count()+y.text.length+(n.space_before_token?1:0);if(a>=E.wrap_line_length){B(false,true)}}}function B(e,t){if(!t){if(x.last_text!==";"&&x.last_text!==","&&x.last_text!=="="&&b!=="TK_OPERATOR"){var r=Z(1);while(x.mode===g.Statement&&!(x.if_block&&r&&r.type==="TK_RESERVED"&&r.text==="else")&&!x.do_block){q()}}}if(n.add_new_line(e)){x.multiline_frame=true}}function j(){if(n.just_added_newline()){if(E.keep_array_indentation&&V(x.mode)&&y.wanted_newline){n.current_line.push(y.whitespace_before);n.space_before_token=false}else if(n.set_indent(x.indentation_level)){x.line_indent_level=x.indentation_level}}}function F(e){if(n.raw){n.add_raw_token(y);return}if(E.comma_first&&b==="TK_COMMA"&&n.just_added_newline()){if(n.previous_line.last()===","){var t=n.previous_line.pop();if(n.previous_line.is_empty()){n.previous_line.push(t);n.trim(true);n.current_line.pop();n.trim()}j();n.add_token(",");n.space_before_token=true}}e=e||y.text;j();n.add_token(e)}function H(){x.indentation_level+=1}function z(){if(x.indentation_level>0&&(!x.parent||x.indentation_level>x.parent.indentation_level)){x.indentation_level-=1}}function U(e){if(x){C.push(x);T=x}else{T=O(null,e)}x=O(T,e)}function V(e){return e===g.ArrayLiteral}function W(e){return u(e,[g.Expression,g.ForInitializer,g.Conditional])}function q(){if(C.length>0){T=x;x=C.pop();if(T.mode===g.Statement&&!E.unindent_chained_methods){s(n,T)}}}function Y(){return x.parent.mode===g.ObjectLiteral&&x.mode===g.Statement&&(x.last_text===":"&&x.ternary_depth===0||b==="TK_RESERVED"&&u(x.last_text,["get","set"]))}function K(){if(b==="TK_RESERVED"&&u(x.last_text,["var","let","const"])&&y.type==="TK_WORD"||b==="TK_RESERVED"&&x.last_text==="do"||b==="TK_RESERVED"&&u(x.last_text,L)&&!y.wanted_newline||b==="TK_RESERVED"&&x.last_text==="else"&&!(y.type==="TK_RESERVED"&&y.text==="if"&&!y.comments_before.length)||b==="TK_END_EXPR"&&(T.mode===g.ForInitializer||T.mode===g.Conditional)||b==="TK_WORD"&&x.mode===g.BlockStatement&&!x.in_case&&!(y.text==="--"||y.text==="++")&&_!=="function"&&y.type!=="TK_WORD"&&y.type!=="TK_RESERVED"||x.mode===g.ObjectLiteral&&(x.last_text===":"&&x.ternary_depth===0||b==="TK_RESERVED"&&u(x.last_text,["get","set"]))){U(g.Statement);if(!E.unindent_chained_methods){H()}R(y,true);if(!Y()){I(y.type==="TK_RESERVED"&&u(y.text,["do","for","if","while"]))}return true}return false}function $(e,t){for(var n=0;n<e.length;n++){var r=l(e[n]);if(r.charAt(0)!==t){return false}}return true}function G(e,t){var n=0,r=e.length,i;for(;n<r;n++){i=e[n];if(i&&i.indexOf(t)!==0){return false}}return true}function X(e){return u(e,["case","return","do","if","throw","else"])}function Z(e){var t=h+(e||0);return t<0||t>=f.length?null:f[t]}function J(){if(!K()){R(y)}var e=g.Expression;if(y.text==="["){if(b==="TK_WORD"||x.last_text===")"){if(b==="TK_RESERVED"&&u(x.last_text,m.line_starters)){n.space_before_token=true}U(e);F();H();if(E.space_in_paren){n.space_before_token=true}return}e=g.ArrayLiteral;if(V(x.mode)){if(x.last_text==="["||x.last_text===","&&(_==="]"||_==="}")){if(!E.keep_array_indentation){B()}}}}else{if(b==="TK_RESERVED"&&x.last_text==="for"){e=g.ForInitializer}else if(b==="TK_RESERVED"&&u(x.last_text,["if","while"])){e=g.Conditional}else{}}if(x.last_text===";"||b==="TK_START_BLOCK"){B()}else if(b==="TK_END_EXPR"||b==="TK_START_EXPR"||b==="TK_END_BLOCK"||x.last_text==="."){I(y.wanted_newline)}else if(!(b==="TK_RESERVED"&&y.text==="(")&&b!=="TK_WORD"&&b!=="TK_OPERATOR"){n.space_before_token=true}else if(b==="TK_RESERVED"&&(x.last_word==="function"||x.last_word==="typeof")||x.last_text==="*"&&(u(_,["function","yield"])||x.mode===g.ObjectLiteral&&u(_,["{",","]))){if(E.space_after_anon_function){n.space_before_token=true}}else if(b==="TK_RESERVED"&&(u(x.last_text,m.line_starters)||x.last_text==="catch")){if(E.space_before_conditional){n.space_before_token=true}}if(y.text==="("&&b==="TK_RESERVED"&&u(x.last_word,["await","async"])){n.space_before_token=true}if(y.text==="("){if(b==="TK_EQUALS"||b==="TK_OPERATOR"){if(!Y()){I()}}}if(y.text==="("&&b!=="TK_WORD"&&b!=="TK_RESERVED"){I()}U(e);F();if(E.space_in_paren){n.space_before_token=true}H()}function Q(){while(x.mode===g.Statement){q()}R(y);if(x.multiline_frame){I(y.text==="]"&&V(x.mode)&&!E.keep_array_indentation)}if(E.space_in_paren){if(b==="TK_START_EXPR"&&!E.space_in_empty_paren){n.trim();n.space_before_token=false}else{n.space_before_token=true}}if(y.text==="]"&&E.keep_array_indentation){F();q()}else{q();F()}s(n,T);if(x.do_while&&T.mode===g.Conditional){T.mode=g.Expression;x.do_block=false;x.do_while=false}}function ee(){R(y);var e=Z(1);var t=Z(2);if(t&&(u(t.text,[":",","])&&u(e.type,["TK_STRING","TK_WORD","TK_RESERVED"])||u(e.text,["get","set","..."])&&u(t.type,["TK_WORD","TK_RESERVED"]))){if(!u(_,["class","interface"])){U(g.ObjectLiteral)}else{U(g.BlockStatement)}}else if(b==="TK_OPERATOR"&&x.last_text==="=>"){U(g.BlockStatement)}else if(u(b,["TK_EQUALS","TK_START_EXPR","TK_COMMA","TK_OPERATOR"])||b==="TK_RESERVED"&&u(x.last_text,["return","throw","import","default"])){U(g.ObjectLiteral)}else{U(g.BlockStatement)}var r=!e.comments_before.length&&e.text==="}";var i=r&&x.last_word==="function"&&b==="TK_END_EXPR";if(E.brace_preserve_inline){var a=0;var o=null;x.inline_frame=true;do{a+=1;o=Z(a);if(o.wanted_newline){x.inline_frame=false;break}}while(o.type!=="TK_EOF"&&!(o.type==="TK_END_BLOCK"&&o.opened===y))}if((E.brace_style==="expand"||E.brace_style==="none"&&y.wanted_newline)&&!x.inline_frame){if(b!=="TK_OPERATOR"&&(i||b==="TK_EQUALS"||b==="TK_RESERVED"&&X(x.last_text)&&x.last_text!=="else")){n.space_before_token=true}else{B(false,true)}}else{if(V(T.mode)&&(b==="TK_START_EXPR"||b==="TK_COMMA")){if(b==="TK_COMMA"||E.space_in_paren){n.space_before_token=true}if(b==="TK_COMMA"||b==="TK_START_EXPR"&&x.inline_frame){I();T.multiline_frame=T.multiline_frame||x.multiline_frame;x.multiline_frame=false}}if(b!=="TK_OPERATOR"&&b!=="TK_START_EXPR"){if(b==="TK_START_BLOCK"&&!x.inline_frame){B()}else{n.space_before_token=true}}}F();H()}function te(){R(y);while(x.mode===g.Statement){q()}var e=b==="TK_START_BLOCK";if(x.inline_frame&&!e){n.space_before_token=true}else if(E.brace_style==="expand"){if(!e){B()}}else{if(!e){if(V(x.mode)&&E.keep_array_indentation){E.keep_array_indentation=false;B();E.keep_array_indentation=true}else{B()}}}q();F()}function ne(){if(y.type==="TK_RESERVED"){if(u(y.text,["set","get"])&&x.mode!==g.ObjectLiteral){y.type="TK_WORD"}else if(u(y.text,["as","from"])&&!x.import_block){y.type="TK_WORD"}else if(x.mode===g.ObjectLiteral){var e=Z(1);if(e.text===":"){y.type="TK_WORD"}}}if(K()){if(b==="TK_RESERVED"&&u(x.last_text,["var","let","const"])&&y.type==="TK_WORD"){x.declaration_statement=true}}else if(y.wanted_newline&&!W(x.mode)&&(b!=="TK_OPERATOR"||(x.last_text==="--"||x.last_text==="++"))&&b!=="TK_EQUALS"&&(E.preserve_newlines||!(b==="TK_RESERVED"&&u(x.last_text,["var","let","const","set","get"])))){R(y);B()}else{R(y)}if(x.do_block&&!x.do_while){if(y.type==="TK_RESERVED"&&y.text==="while"){n.space_before_token=true;F();n.space_before_token=true;x.do_while=true;return}else{B();x.do_block=false}}if(x.if_block){if(!x.else_block&&(y.type==="TK_RESERVED"&&y.text==="else")){x.else_block=true}else{while(x.mode===g.Statement){q()}x.if_block=false;x.else_block=false}}if(y.type==="TK_RESERVED"&&(y.text==="case"||y.text==="default"&&x.in_case_statement)){B();if(x.case_body||E.jslint_happy){z();x.case_body=false}F();x.in_case=true;x.in_case_statement=true;return}if(b==="TK_COMMA"||b==="TK_START_EXPR"||b==="TK_EQUALS"||b==="TK_OPERATOR"){if(!Y()){I()}}if(y.type==="TK_RESERVED"&&y.text==="function"){if(u(x.last_text,["}",";"])||n.just_added_newline()&&!(u(x.last_text,["(","[","{",":","=",","])||b==="TK_OPERATOR")){if(!n.just_added_blankline()&&!y.comments_before.length){B();B(true)}}if(b==="TK_RESERVED"||b==="TK_WORD"){if(b==="TK_RESERVED"&&(u(x.last_text,["get","set","new","export","async"])||u(x.last_text,L))){n.space_before_token=true}else if(b==="TK_RESERVED"&&x.last_text==="default"&&_==="export"){n.space_before_token=true}else{B()}}else if(b==="TK_OPERATOR"||x.last_text==="="){n.space_before_token=true}else if(!x.multiline_frame&&(W(x.mode)||V(x.mode))){}else{B()}F();x.last_word=y.text;return}k="NONE";if(b==="TK_END_BLOCK"){if(T.inline_frame){k="SPACE"}else if(!(y.type==="TK_RESERVED"&&u(y.text,["else","catch","finally","from"]))){k="NEWLINE"}else{if(E.brace_style==="expand"||E.brace_style==="end-expand"||E.brace_style==="none"&&y.wanted_newline){k="NEWLINE"}else{k="SPACE";n.space_before_token=true}}}else if(b==="TK_SEMICOLON"&&x.mode===g.BlockStatement){k="NEWLINE"}else if(b==="TK_SEMICOLON"&&W(x.mode)){k="SPACE"}else if(b==="TK_STRING"){k="NEWLINE"}else if(b==="TK_RESERVED"||b==="TK_WORD"||x.last_text==="*"&&(u(_,["function","yield"])||x.mode===g.ObjectLiteral&&u(_,["{",","]))){k="SPACE"}else if(b==="TK_START_BLOCK"){if(x.inline_frame){k="SPACE"}else{k="NEWLINE"}}else if(b==="TK_END_EXPR"){n.space_before_token=true;k="NEWLINE"}if(y.type==="TK_RESERVED"&&u(y.text,m.line_starters)&&x.last_text!==")"){if(x.inline_frame||x.last_text==="else"||x.last_text==="export"){k="SPACE"}else{k="NEWLINE"}}if(y.type==="TK_RESERVED"&&u(y.text,["else","catch","finally"])){if((!(b==="TK_END_BLOCK"&&T.mode===g.BlockStatement)||E.brace_style==="expand"||E.brace_style==="end-expand"||E.brace_style==="none"&&y.wanted_newline)&&!x.inline_frame){B()}else{n.trim(true);var t=n.current_line;if(t.last()!=="}"){B()}n.space_before_token=true}}else if(k==="NEWLINE"){if(b==="TK_RESERVED"&&X(x.last_text)){n.space_before_token=true}else if(b!=="TK_END_EXPR"){if((b!=="TK_START_EXPR"||!(y.type==="TK_RESERVED"&&u(y.text,["var","let","const"])))&&x.last_text!==":"){if(y.type==="TK_RESERVED"&&y.text==="if"&&x.last_text==="else"){n.space_before_token=true}else{B()}}}else if(y.type==="TK_RESERVED"&&u(y.text,m.line_starters)&&x.last_text!==")"){B()}}else if(x.multiline_frame&&V(x.mode)&&x.last_text===","&&_==="}"){B()}else if(k==="SPACE"){n.space_before_token=true}F();x.last_word=y.text;if(y.type==="TK_RESERVED"){if(y.text==="do"){x.do_block=true}else if(y.text==="if"){x.if_block=true}else if(y.text==="import"){x.import_block=true}else if(x.import_block&&y.type==="TK_RESERVED"&&y.text==="from"){x.import_block=false}}}function re(){if(K()){n.space_before_token=false}else{R(y)}var e=Z(1);while(x.mode===g.Statement&&!(x.if_block&&e&&e.type==="TK_RESERVED"&&e.text==="else")&&!x.do_block){q()}if(x.import_block){x.import_block=false}F()}function ie(){if(K()){n.space_before_token=true}else{R(y);if(b==="TK_RESERVED"||b==="TK_WORD"||x.inline_frame){n.space_before_token=true}else if(b==="TK_COMMA"||b==="TK_START_EXPR"||b==="TK_EQUALS"||b==="TK_OPERATOR"){if(!Y()){I()}}else{B()}}F()}function ae(){if(K()){}else{R(y)}if(x.declaration_statement){x.declaration_assignment=true}n.space_before_token=true;F();n.space_before_token=true}function oe(){R(y,true);F();n.space_before_token=true;if(x.declaration_statement){if(W(x.parent.mode)){x.declaration_assignment=false}if(x.declaration_assignment){x.declaration_assignment=false;B(false,true)}else if(E.comma_first){I()}}else if(x.mode===g.ObjectLiteral||x.mode===g.Statement&&x.parent.mode===g.ObjectLiteral){if(x.mode===g.Statement){q()}if(!x.inline_frame){B()}}else if(E.comma_first){I()}}function se(){var e=y.text==="*"&&(b==="TK_RESERVED"&&u(x.last_text,["function","yield"])||u(b,["TK_START_BLOCK","TK_COMMA","TK_END_BLOCK","TK_SEMICOLON"]));var t=u(y.text,["-","+"])&&(u(b,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||u(x.last_text,m.line_starters)||x.last_text===",");if(K()){}else{var r=!e;R(y,r)}if(b==="TK_RESERVED"&&X(x.last_text)){n.space_before_token=true;F();return}if(y.text==="*"&&b==="TK_DOT"){F();return}if(y.text==="::"){F();return}if(b==="TK_OPERATOR"&&u(E.operator_position,p)){I()}if(y.text===":"&&x.in_case){x.case_body=true;H();F();B();x.in_case=false;return}var i=true;var a=true;var o=false;if(y.text===":"){if(x.ternary_depth===0){i=false}else{x.ternary_depth-=1;o=true}}else if(y.text==="?"){x.ternary_depth+=1}if(!t&&!e&&E.preserve_newlines&&u(y.text,m.positionable_operators)){var s=y.text===":";var l=s&&o;var c=s&&!o;switch(E.operator_position){case v.before_newline:n.space_before_token=!c;F();if(!s||l){I()}n.space_before_token=true;return;case v.after_newline:n.space_before_token=true;if(!s||l){if(Z(1).wanted_newline){B(false,true)}else{I()}}else{n.space_before_token=false}F();n.space_before_token=true;return;case v.preserve_newline:if(!c){I()}i=!(n.just_added_newline()||c);n.space_before_token=i;F();n.space_before_token=true;return}}if(e){I();i=false;var f=Z(1);a=f&&u(f.type,["TK_WORD","TK_RESERVED"])}else if(y.text==="..."){I();i=b==="TK_START_BLOCK";a=false}else if(u(y.text,["--","++","!","~"])||t){i=false;a=false;if(y.wanted_newline&&(y.text==="--"||y.text==="++")){B(false,true)}if(x.last_text===";"&&W(x.mode)){i=true}if(b==="TK_RESERVED"){i=true}else if(b==="TK_END_EXPR"){i=!(x.last_text==="]"&&(y.text==="--"||y.text==="++"))}else if(b==="TK_OPERATOR"){i=u(y.text,["--","-","++","+"])&&u(x.last_text,["--","-","++","+"]);if(u(y.text,["+","-"])&&u(x.last_text,["--","++"])){a=true}}if((x.mode===g.BlockStatement&&!x.inline_frame||x.mode===g.Statement)&&(x.last_text==="{"||x.last_text===";")){B()}}n.space_before_token=n.space_before_token||i;F();n.space_before_token=a}function ue(e){if(n.raw){n.add_raw_token(y);if(y.directives&&y.directives.preserve==="end"){n.raw=E.test_output_raw}return}if(y.directives){B(false,e);F();if(y.directives.preserve==="start"){n.raw=true}B(false,true);return}if(!i.newline.test(y.text)&&!y.wanted_newline){n.space_before_token=true;F();n.space_before_token=true;return}var t=D(y.text);var r;var a=false;var o=false;var s=y.whitespace_before;var u=s.length;B(false,e);if(t.length>1){a=$(t.slice(1),"*");o=G(t.slice(1),s)}F(t[0]);for(r=1;r<t.length;r++){B(false,true);if(a){F(" "+c(t[r]))}else if(o&&t[r].length>u){F(t[r].substring(u))}else{n.add_token(t[r])}}B(false,e)}function le(e){if(y.wanted_newline){B(false,e)}else{n.trim(true)}n.space_before_token=true;F();B(false,e)}function ce(){if(K()){}else{R(y,true)}if(b==="TK_RESERVED"&&X(x.last_text)){n.space_before_token=true}else{I(x.last_text===")"&&E.break_chained_methods)}F()}function fe(e){F();if(y.text[y.text.length-1]==="\n"){B(false,e)}}function de(){while(x.mode===g.Statement){q()}R(y)}}e.exports.Beautifier=m},function(e,t){function n(e){var t=e;var n=t.length;var r=0;this.back=function(){r-=1};this.hasNext=function(){return r<n};this.next=function(){var e=null;if(this.hasNext()){e=t.charAt(r);r+=1}return e};this.peek=function(e){var i=null;e=e||0;e+=r;if(e>=0&&e<n){i=t.charAt(e)}return i};this.peekCharCode=function(e){var i=0;e=e||0;e+=r;if(e>=0&&e<n){i=t.charCodeAt(e)}return i};this.test=function(e,n){n=n||0;e.lastIndex=r+n;return e.test(t)};this.testChar=function(e,t){var n=this.peek(t);return n!==null&&e.test(n)};this.match=function(e){e.lastIndex=r;var n=e.exec(t);if(n&&n.index===r){r+=n[0].length}else{n=null}return n}}e.exports.InputScanner=n},function(e,t){function n(e,t){var n={};var r;for(r in e){if(r!==t){n[r]=e[r]}}if(t in e){for(r in e[t]){n[r]=e[t][r]}}return n}e.exports.mergeOpts=n},function(e,t){function n(e){var t=0;var n=-1;var r=[];var i=true;this.set_indent=function(r){t=e.baseIndentLength+r*e.indent_length;n=r};this.get_character_count=function(){return t};this.is_empty=function(){return i};this.last=function(){if(!this._empty){return r[r.length-1]}else{return null}};this.push=function(e){r.push(e);t+=e.length;i=false};this.pop=function(){var e=null;if(!i){e=r.pop();t-=e.length;i=r.length===0}return e};this.remove_indent=function(){if(n>0){n-=1;t-=e.indent_length}};this.trim=function(){while(this.last()===" "){r.pop();t-=1}i=r.length===0};this.toString=function(){var t="";if(!this._empty){if(n>=0){t=e.indent_cache[n]}t+=r.join("")}return t}}function r(e,t){t=t||"";this.indent_cache=[t];this.baseIndentLength=t.length;this.indent_length=e.length;this.raw=false;var r=[];this.baseIndentString=t;this.indent_string=e;this.previous_line=null;this.current_line=null;this.space_before_token=false;this.add_outputline=function(){this.previous_line=this.current_line;this.current_line=new n(this);r.push(this.current_line)};this.add_outputline();this.get_line_number=function(){return r.length};this.add_new_line=function(e){if(this.get_line_number()===1&&this.just_added_newline()){return false}if(e||!this.just_added_newline()){if(!this.raw){this.add_outputline()}return true}return false};this.get_code=function(e,t){var n=r.join("\n").replace(/[\r\n\t ]+$/,"");if(e){n+="\n"}if(t!=="\n"){n=n.replace(/[\n]/g,t)}return n};this.set_indent=function(e){if(r.length>1){while(e>=this.indent_cache.length){this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string)}this.current_line.set_indent(e);return true}this.current_line.set_indent(0);return false};this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++){this.add_outputline()}this.current_line.push(e.whitespace_before);this.current_line.push(e.text);this.space_before_token=false};this.add_token=function(e){this.add_space_before_token();this.current_line.push(e)};this.add_space_before_token=function(){if(this.space_before_token&&!this.just_added_newline()){this.current_line.push(" ")}this.space_before_token=false};this.remove_indent=function(e){var t=r.length;while(e<t){r[e].remove_indent();e++}};this.trim=function(n){n=n===undefined?false:n;this.current_line.trim(e,t);while(n&&r.length>1&&this.current_line.is_empty()){r.pop();this.current_line=r[r.length-1];this.current_line.trim()}this.previous_line=r.length>1?r[r.length-2]:null};this.just_added_newline=function(){return this.current_line.is_empty()};this.just_added_blankline=function(){if(this.just_added_newline()){if(r.length===1){return true}var e=r[r.length-2];return e.is_empty()}return false}}e.exports.Output=r},function(e,t){function n(e,t,n,r,i){this.type=e;this.text=t;this.comments_before=[];this.comments_after=[];this.newlines=n||0;this.wanted_newline=n>0;this.whitespace_before=r||"";this.parent=i||null;this.opened=null;this.directives=null}e.exports.Token=n},function(e,t,n){var r=n(1).Beautifier;function i(e,t){var n=new r(e,t);return n.beautify()}e.exports=i},function(e,t,n){var r=n(2).InputScanner;var i=n(5).Token;var a=n(0);function o(e){return e.replace(/^\s+|\s+$/g,"")}function s(e,t){for(var n=0;n<t.length;n+=1){if(t[n]===e){return true}}return false}function u(e,t){var n="\n\r\t ".split("");var u=/[0-9]/;var l=/[01]/;var c=/[01234567]/;var f=/[0123456789abcdefABCDEF]/;this.positionable_operators="!= !== % & && * ** + - / : < << <= == === > >= >> >>> ? ^ | ||".split(" ");var d=this.positionable_operators.concat("! %= &= *= **= ++ += , -- -= /= :: <<= = => >>= >>>= ^= |= ~ ...".split(" "));this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var h=this.line_starters.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]);var v=/([\s\S]*?)((?:\*\/)|$)/g;var p=/([^\n\r\u2028\u2029]*)/g;var g=/\/\* beautify( \w+[:]\w+)+ \*\//g;var m=/ (\w+)[:](\w+)/g;var y=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g;var b=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;var _,w,x,T;var C;this.tokenize=function(){C=new r(e);x=false;T=[];var t,n;var a;var o=null;var s=[];var u=[];while(!(n&&n.type==="TK_EOF")){a=S();t=new i(a[1],a[0],_,w);while(t.type==="TK_COMMENT"||t.type==="TK_BLOCK_COMMENT"||t.type==="TK_UNKNOWN"){if(t.type==="TK_BLOCK_COMMENT"){t.directives=a[2]}u.push(t);a=S();t=new i(a[1],a[0],_,w)}if(u.length){t.comments_before=u;u=[]}if(t.type==="TK_START_BLOCK"||t.type==="TK_START_EXPR"){t.parent=n;s.push(o);o=t}else if((t.type==="TK_END_BLOCK"||t.type==="TK_END_EXPR")&&(o&&(t.text==="]"&&o.text==="["||t.text===")"&&o.text==="("||t.text==="}"&&o.text==="{"))){t.parent=o.parent;t.opened=o;o=s.pop()}T.push(t);n=t}return T};function k(e){if(!e.match(g)){return null}var t={};m.lastIndex=0;var n=m.exec(e);while(n){t[n[1]]=n[2];n=m.exec(e)}return t}function S(){var e;var r=[];_=0;w="";var g=C.next();if(g===null){return["","TK_EOF"]}var m;if(T.length){m=T[T.length-1]}else{m=new i("TK_START_BLOCK","{")}while(s(g,n)){if(a.newline.test(g)){if(!(g==="\n"&&C.peek(-2)==="\r")){_+=1;r=[]}}else{r.push(g)}g=C.next();if(g===null){return["","TK_EOF"]}}if(r.length){w=r.join("")}if(u.test(g)||g==="."&&C.testChar(u)){var S=true;var P=true;var O=u;if(g==="0"&&C.testChar(/[XxOoBb]/)){S=false;P=false;if(C.testChar(/[Bb]/)){O=l}else if(C.testChar(/[Oo]/)){O=c}else{O=f}g+=C.next()}else if(g==="."){S=false}else{g="";C.back()}while(C.testChar(O)){g+=C.next();if(S&&C.peek()==="."){g+=C.next();S=false}if(P&&C.testChar(/[Ee]/)){g+=C.next();if(C.testChar(/[+-]/)){g+=C.next()}P=false;S=false}}return[g,"TK_WORD"]}if(a.isIdentifierStart(C.peekCharCode(-1))){if(C.hasNext()){while(a.isIdentifierChar(C.peekCharCode())){g+=C.next();if(!C.hasNext()){break}}}if(!(m.type==="TK_DOT"||m.type==="TK_RESERVED"&&s(m.text,["set","get"]))&&s(g,h)){if(g==="in"||g==="of"){return[g,"TK_OPERATOR"]}return[g,"TK_RESERVED"]}return[g,"TK_WORD"]}if(g==="("||g==="["){return[g,"TK_START_EXPR"]}if(g===")"||g==="]"){return[g,"TK_END_EXPR"]}if(g==="{"){return[g,"TK_START_BLOCK"]}if(g==="}"){return[g,"TK_END_BLOCK"]}if(g===";"){return[g,"TK_SEMICOLON"]}if(g==="/"){var M="";var A;if(C.peek()==="*"){C.next();A=C.match(v);M="/*"+A[0];var N=k(M);if(N&&N.ignore==="start"){A=C.match(y);M+=A[0]}M=M.replace(a.allLineBreaks,"\n");return[M,"TK_BLOCK_COMMENT",N]}if(C.peek()==="/"){C.next();A=C.match(p);M="//"+A[0];return[M,"TK_COMMENT"]}}var R=/<()([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/g;if(g==="`"||g==="'"||g==='"'||(g==="/"||t.e4x&&g==="<"&&C.test(R,-1))&&(m.type==="TK_RESERVED"&&s(m.text,["return","case","throw","else","do","typeof","yield"])||m.type==="TK_END_EXPR"&&m.text===")"&&m.parent&&m.parent.type==="TK_RESERVED"&&s(m.parent.text,["if","while","for"])||s(m.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var D=g,L=false,I=false;e=g;if(D==="/"){var B=false;while(C.hasNext()&&((L||B||C.peek()!==D)&&!C.testChar(a.newline))){e+=C.peek();if(!L){L=C.peek()==="\\";if(C.peek()==="["){B=true}else if(C.peek()==="]"){B=false}}else{L=false}C.next()}}else if(t.e4x&&D==="<"){var j=/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/g;C.back();var F="";var H=C.match(R);if(H){var z=H[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}");var U=z.indexOf("{")===0;var V=0;while(H){var W=!!H[1];var q=H[2];var Y=!!H[H.length-1]||q.slice(0,8)==="![CDATA[";if(!Y&&(q===z||U&&q.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))){if(W){--V}else{++V}}F+=H[0];if(V<=0){break}H=C.match(j)}if(!H){F+=C.match(/[\s\S]*/g)[0]}F=F.replace(a.allLineBreaks,"\n");return[F,"TK_STRING"]}}else{var K=function(t,n,r){var i;while(C.hasNext()){i=C.peek();if(!(L||i!==t&&(n||!a.newline.test(i)))){break}if((L||n)&&a.newline.test(i)){if(i==="\r"&&C.peek(1)==="\n"){C.next();i=C.peek()}e+="\n"}else{e+=i}if(L){if(i==="x"||i==="u"){I=true}L=false}else{L=i==="\\"}C.next();if(r&&e.indexOf(r,e.length-r.length)!==-1){if(t==="`"){K("}",n,"`")}else{K("`",n,"${")}if(C.hasNext()){e+=C.next()}}}};if(D==="`"){K("`",true,"${")}else{K(D)}}if(I&&t.unescape_strings){e=E(e)}if(C.peek()===D){e+=D;C.next();if(D==="/"){while(C.hasNext()&&a.isIdentifierStart(C.peekCharCode())){e+=C.next()}}}return[e,"TK_STRING"]}if(g==="#"){if(T.length===0&&C.peek()==="!"){e=g;while(C.hasNext()&&g!=="\n"){g=C.next();e+=g}return[o(e)+"\n","TK_UNKNOWN"]}var $="#";if(C.hasNext()&&C.testChar(u)){do{g=C.next();$+=g}while(C.hasNext()&&g!=="#"&&g!=="=");if(g==="#"){}else if(C.peek()==="["&&C.peek(1)==="]"){$+="[]";C.next();C.next()}else if(C.peek()==="{"&&C.peek(1)==="}"){$+="{}";C.next();C.next()}return[$,"TK_WORD"]}}if(g==="<"&&(C.peek()==="?"||C.peek()==="%")){C.back();var G=C.match(b);if(G){g=G[0];g=g.replace(a.allLineBreaks,"\n");return[g,"TK_STRING"]}}if(g==="<"&&C.match(/\!--/g)){g="\x3c!--";while(C.hasNext()&&!C.testChar(a.newline)){g+=C.next()}x=true;return[g,"TK_COMMENT"]}if(g==="-"&&x&&C.match(/->/g)){x=false;return["--\x3e","TK_COMMENT"]}if(g==="."){if(C.peek()==="."&&C.peek(1)==="."){g+=C.next()+C.next();return[g,"TK_OPERATOR"]}return[g,"TK_DOT"]}if(s(g,d)){while(C.hasNext()&&s(g+C.peek(),d)){g+=C.next();if(!C.hasNext()){break}}if(g===","){return[g,"TK_COMMA"]}else if(g==="="){return[g,"TK_EQUALS"]}else{return[g,"TK_OPERATOR"]}}return[g,"TK_UNKNOWN"]}function E(e){var t="",n=0;var i=new r(e);var a=null;while(i.hasNext()){a=i.match(/([\s]|[^\\]|\\\\)+/g);if(a){t+=a[0]}if(i.peek()==="\\"){i.next();if(i.peek()==="x"){a=i.match(/x([0-9A-Fa-f]{2})/g)}else if(i.peek()==="u"){a=i.match(/u([0-9A-Fa-f]{4})/g)}else{t+="\\";if(i.hasNext()){t+=i.next()}continue}if(!a){return e}n=parseInt(a[1],16);if(n>126&&n<=255&&a[0].indexOf("x")===0){return e}else if(n>=0&&n<32){t+="\\"+a[0];continue}else if(n===34||n===39||n===92){t+="\\"+String.fromCharCode(n)}else{t+=String.fromCharCode(n)}}}return t}}e.exports.Tokenizer=u}]);var n=e;if(typeof undefined==="function"&&undefined.amd){undefined([],function(){return{js_beautify:n}})}else{t.js_beautify=n}})()});t(If);var Bf=n(function(e,t){(function(){var e=function(e){var t={};function n(r){if(t[r]){return t[r].exports}var i=t[r]={i:r,l:false,exports:{}};e[r].call(i.exports,i,i.exports,n);i.l=true;return i.exports}n.m=e;n.c=t;n.i=function(e){return e};n.d=function(e,t,r){if(!n.o(e,t)){Object.defineProperty(e,t,{configurable:false,enumerable:true,get:r})}};n.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};n.d(t,"a",t);return t};n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};n.p="";return n(n.s=4)}([function(e,t,n){var r=n(2).mergeOpts;var i=n(1);var a=n(3).Output;var o=i.lineBreak;var s=i.allLineBreaks;function u(e,t){t=t||{};t=r(t,"css");e=e||"";var n=0;var i=t.indent_size?parseInt(t.indent_size,10):4;var u=t.indent_char||" ";var l=t.preserve_newlines===undefined?false:t.preserve_newlines;var c=t.selector_separator_newline===undefined?true:t.selector_separator_newline;var f=t.end_with_newline===undefined?false:t.end_with_newline;var d=t.newline_between_rules===undefined?true:t.newline_between_rules;var h=t.space_around_combinator===undefined?false:t.space_around_combinator;h=h||(t.space_around_selector_separator===undefined?false:t.space_around_selector_separator);var v=t.eol?t.eol:"auto";if(t.indent_with_tabs){u="\t";i=1}if(v==="auto"){v="\n";if(e&&o.test(e||"")){v=e.match(o)[0]}}v=v.replace(/\\r/,"\r").replace(/\\n/,"\n");e=e.replace(s,"\n");var p=/^\s+$/;var g=-1,m;var y=0;function b(){m=e.charAt(++g);return m||""}function _(t){var n="";var r=g;if(t){T()}n=e.charAt(g+1)||"";g=r-1;b();return n}function w(t){var n=g;while(b()){if(m==="\\"){b()}else if(t.indexOf(m)!==-1){break}else if(m==="\n"){break}}return e.substring(n,g+1)}function x(e){var t=g;var n=w(e);g=t-1;b();return n}function T(e){var t=0;while(p.test(_())){b();if(m==="\n"&&e&&l){R.add_new_line(true);t++}}n=t;return t}function C(){var e="";if(m&&p.test(m)){e=m}while(p.test(b())){e+=m}return e}function k(){var t=g;var n=_()==="/";b();while(b()){if(!n&&m==="*"&&_()==="/"){b();break}else if(n&&m==="\n"){return e.substring(t,g)}}return e.substring(t,g)+m}function S(t){return e.substring(g-t.length,g).toLowerCase()===t}function E(){var t=0;for(var n=g+1;n<e.length;n++){var r=e.charAt(n);if(r==="{"){return true}else if(r==="("){t+=1}else if(r===")"){if(t===0){return false}t-=1}else if(r===";"||r==="}"){return false}}return false}var P="";var O=0;if(e&&e.length){while(e.charAt(O)===" "||e.charAt(O)==="\t"){O+=1}P=e.substring(0,O);e=e.substring(O)}var M=new Array(i+1).join(u);var A;var N;var R;function D(e){if(R.just_added_newline()){R.set_indent(A)}R.add_token(e)}function L(e){if(e){R.space_before_token=true}}function I(){A++}function B(){if(A>0){A--}}this.beautify=function(){R=new a(M,P);A=0;N=0;g=-1;m=null;y=0;var e=false;var t=false;var r=false;var i="";var o="";while(true){var s=C();var u=s!=="";var l=s.indexOf("\n")!==-1;o=i;i=m;if(!m){break}else if(m==="/"&&_()==="*"){var O=A===0;if(l||O){R.add_new_line()}D(k());R.add_new_line();if(O){R.add_new_line(true)}}else if(m==="/"&&_()==="/"){if(!l&&o!=="{"){R.trim(true)}R.space_before_token=true;D(k());R.add_new_line()}else if(m==="@"){L(u);if(_()==="{"){D(w("}"))}else{D(m);var j=x(": ,;{}()[]/='\"");if(j.match(/[ :]$/)){b();j=w(": ").replace(/\s$/,"");D(j);R.space_before_token=true}j=j.replace(/\s$/,"");if(j in this.NESTED_AT_RULE){N+=1;if(j in this.CONDITIONAL_GROUP_RULE){r=true}}}}else if(m==="#"&&_()==="{"){L(u);D(w("}"))}else if(m==="{"){if(_(true)==="}"){T();b();R.space_before_token=true;D("{}");if(!T(true)){R.add_new_line()}if(n<2&&d&&A===0){R.add_new_line(true)}}else{I();R.space_before_token=true;D(m);if(!T(true)){R.add_new_line()}if(r){r=false;e=A>N}else{e=A>=N}}}else if(m==="}"){B();R.add_new_line();D(m);e=false;t=false;if(N){N--}if(!T(true)){R.add_new_line()}if(n<2&&d&&A===0){R.add_new_line(true)}}else if(m===":"){T();if((e||r)&&!(S("&")||E())&&!S("(")){D(":");if(!t){t=true;R.space_before_token=true}}else{if(S(" ")){R.space_before_token=true}if(_()===":"){b();D("::")}else{D(":")}}}else if(m==='"'||m==="'"){L(u);D(w(m))}else if(m===";"){t=false;D(m);if(!T(true)){R.add_new_line()}}else if(m==="("){if(S("url")){D(m);T();if(b()){if(m!==")"&&m!=='"'&&m!=="'"){D(w(")"))}else{g--}}}else{y++;L(u);D(m);T()}}else if(m===")"){D(m);y--}else if(m===","){D(m);if(!T(true)&&c&&!t&&y<1){R.add_new_line()}else{R.space_before_token=true}}else if((m===">"||m==="+"||m==="~")&&!t&&y<1){if(h){R.space_before_token=true;D(m);R.space_before_token=true}else{D(m);T();if(m&&p.test(m)){m=""}}}else if(m==="]"){D(m)}else if(m==="["){L(u);D(m)}else if(m==="="){T();D("=");if(p.test(m)){m=""}}else if(m==="!"){D(" ");D(m)}else{L(u);D(m)}}var F=R.get_code(f,v);return F};this.NESTED_AT_RULE={"@page":true,"@font-face":true,"@keyframes":true,"@media":true,"@supports":true,"@document":true};this.CONDITIONAL_GROUP_RULE={"@media":true,"@supports":true,"@document":true}}e.exports.Beautifier=u},function(e,t){var n="¬™¬µ¬∫√Ä-√ñ√ò-√∂√∏-ÀÅÀÜ-ÀëÀ†-À§À¨ÀÆÕ∞-Õ¥Õ∂Õ∑Õ∫-ÕΩŒÜŒà-ŒäŒåŒé-Œ°Œ£-œµœ∑-“Å“ä-‘ß‘±-’ñ’ô’°-÷á◊ê-◊™◊∞-◊≤ÿ†-ŸäŸÆŸØŸ±-€ì€ï€•€¶€Æ€Ø€∫-€º€ø‹ê‹í-‹Ø›ç-ﬁ•ﬁ±ﬂä-ﬂ™ﬂ¥ﬂµﬂ∫‡†Ä-‡†ï‡†ö‡†§‡†®‡°Ä-‡°ò‡¢†‡¢¢-‡¢¨‡§Ñ-‡§π‡§Ω‡•ê‡•ò-‡•°‡•±-‡•∑‡•π-‡•ø‡¶Ö-‡¶å‡¶è‡¶ê‡¶ì-‡¶®‡¶™-‡¶∞‡¶≤‡¶∂-‡¶π‡¶Ω‡ßé‡ßú‡ßù‡ßü-‡ß°‡ß∞‡ß±‡®Ö-‡®ä‡®è‡®ê‡®ì-‡®®‡®™-‡®∞‡®≤‡®≥‡®µ‡®∂‡®∏‡®π‡©ô-‡©ú‡©û‡©≤-‡©¥‡™Ö-‡™ç‡™è-‡™ë‡™ì-‡™®‡™™-‡™∞‡™≤‡™≥‡™µ-‡™π‡™Ω‡´ê‡´†‡´°‡¨Ö-‡¨å‡¨è‡¨ê‡¨ì-‡¨®‡¨™-‡¨∞‡¨≤‡¨≥‡¨µ-‡¨π‡¨Ω‡≠ú‡≠ù‡≠ü-‡≠°‡≠±‡ÆÉ‡ÆÖ-‡Æä‡Æé-‡Æê‡Æí-‡Æï‡Æô‡Æö‡Æú‡Æû‡Æü‡Æ£‡Æ§‡Æ®-‡Æ™‡ÆÆ-‡Æπ‡Øê‡∞Ö-‡∞å‡∞é-‡∞ê‡∞í-‡∞®‡∞™-‡∞≥‡∞µ-‡∞π‡∞Ω‡±ò‡±ô‡±†‡±°‡≤Ö-‡≤å‡≤é-‡≤ê‡≤í-‡≤®‡≤™-‡≤≥‡≤µ-‡≤π‡≤Ω‡≥û‡≥†‡≥°‡≥±‡≥≤‡¥Ö-‡¥å‡¥é-‡¥ê‡¥í-‡¥∫‡¥Ω‡µé‡µ†‡µ°‡µ∫-‡µø‡∂Ö-‡∂ñ‡∂ö-‡∂±‡∂≥-‡∂ª‡∂Ω‡∑Ä-‡∑Ü‡∏Å-‡∏∞‡∏≤‡∏≥‡πÄ-‡πÜ‡∫Å‡∫Ç‡∫Ñ‡∫á‡∫à‡∫ä‡∫ç‡∫î-‡∫ó‡∫ô-‡∫ü‡∫°-‡∫£‡∫•‡∫ß‡∫™‡∫´‡∫≠-‡∫∞‡∫≤‡∫≥‡∫Ω‡ªÄ-‡ªÑ‡ªÜ‡ªú-‡ªü‡ºÄ‡ΩÄ-‡Ωá‡Ωâ-‡Ω¨‡æà-‡æå·ÄÄ-·Ä™·Äø·Åê-·Åï·Åö-·Åù·Å°·Å•·Å¶·ÅÆ-·Å∞·Åµ-·ÇÅ·Çé·Ç†-·ÉÖ·Éá·Éç·Éê-·É∫·Éº-·âà·âä-·âç·âê-·âñ·âò·âö-·âù·â†-·äà·ää-·äç·äê-·ä∞·ä≤-·äµ·ä∏-·äæ·ãÄ·ãÇ-·ãÖ·ãà-·ãñ·ãò-·åê·åí-·åï·åò-·çö·éÄ-·éè·é†-·è¥·êÅ-·ô¨·ôØ-·ôø·öÅ-·öö·ö†-·õ™·õÆ-·õ∞·úÄ-·úå·úé-·úë·ú†-·ú±·ùÄ-·ùë·ù†-·ù¨·ùÆ-·ù∞·ûÄ-·û≥·üó·üú·††-·°∑·¢Ä-·¢®·¢™·¢∞-·£µ·§Ä-·§ú·•ê-·•≠·•∞-·•¥·¶Ä-·¶´·ßÅ-·ßá·®Ä-·®ñ·®†-·©î·™ß·¨Ö-·¨≥·≠Ö-·≠ã·ÆÉ-·Æ†·ÆÆ·ÆØ·Æ∫-·Ø•·∞Ä-·∞£·±ç-·±è·±ö-·±Ω·≥©-·≥¨·≥Æ-·≥±·≥µ·≥∂·¥Ä-·∂ø·∏Ä-·ºï·ºò-·ºù·º†-·ΩÖ·Ωà-·Ωç·Ωê-·Ωó·Ωô·Ωõ·Ωù·Ωü-·ΩΩ·æÄ-·æ¥·æ∂-·æº·ææ·øÇ-·øÑ·øÜ-·øå·øê-·øì·øñ-·øõ·ø†-·ø¨·ø≤-·ø¥·ø∂-·øº‚Å±‚Åø‚Çê-‚Çú‚ÑÇ‚Ñá‚Ñä-‚Ñì‚Ñï‚Ñô-‚Ñù‚Ñ§‚Ñ¶‚Ñ®‚Ñ™-‚Ñ≠‚ÑØ-‚Ñπ‚Ñº-‚Ñø‚ÖÖ-‚Öâ‚Öé‚Ö†-‚Üà‚∞Ä-‚∞Æ‚∞∞-‚±û‚±†-‚≥§‚≥´-‚≥Æ‚≥≤‚≥≥‚¥Ä-‚¥•‚¥ß‚¥≠‚¥∞-‚µß‚µØ‚∂Ä-‚∂ñ‚∂†-‚∂¶‚∂®-‚∂Æ‚∂∞-‚∂∂‚∂∏-‚∂æ‚∑Ä-‚∑Ü‚∑à-‚∑é‚∑ê-‚∑ñ‚∑ò-‚∑û‚∏Ø„ÄÖ-„Äá„Ä°-„Ä©„Ä±-„Äµ„Ä∏-„Äº„ÅÅ-„Çñ„Çù-„Çü„Ç°-„É∫„Éº-„Éø„ÑÖ-„Ñ≠„Ñ±-„Üé„Ü†-„Ü∫„á∞-„áø„êÄ-‰∂µ‰∏Ä-ÈøåÍÄÄ-ÍíåÍìê-ÍìΩÍîÄ-ÍòåÍòê-ÍòüÍò™Íò´ÍôÄ-ÍôÆÍôø-ÍöóÍö†-ÍõØÍúó-ÍúüÍú¢-ÍûàÍûã-ÍûéÍûê-ÍûìÍû†-Íû™Íü∏-Í†ÅÍ†É-Í†ÖÍ†á-Í†äÍ†å-Í†¢Í°Ä-Í°≥Í¢Ç-Í¢≥Í£≤-Í£∑Í£ªÍ§ä-Í§•Í§∞-Í•ÜÍ•†-Í•ºÍ¶Ñ-Í¶≤ÍßèÍ®Ä-Í®®Í©Ä-Í©ÇÍ©Ñ-Í©ãÍ©†-Í©∂Í©∫Í™Ä-Í™ØÍ™±Í™µÍ™∂Í™π-Í™ΩÍ´ÄÍ´ÇÍ´õ-Í´ùÍ´†-Í´™Í´≤-Í´¥Í¨Å-Í¨ÜÍ¨â-Í¨éÍ¨ë-Í¨ñÍ¨†-Í¨¶Í¨®-Í¨ÆÍØÄ-ÍØ¢Í∞Ä-Ìû£Ìû∞-ÌüÜÌüã-ÌüªÔ§Ä-Ô©≠Ô©∞-Ô´ôÔ¨Ä-Ô¨ÜÔ¨ì-Ô¨óÔ¨ùÔ¨ü-Ô¨®Ô¨™-Ô¨∂Ô¨∏-Ô¨ºÔ¨æÔ≠ÄÔ≠ÅÔ≠ÉÔ≠ÑÔ≠Ü-ÔÆ±ÔØì-Ô¥ΩÔµê-Ô∂èÔ∂í-Ô∑áÔ∑∞-Ô∑ªÔπ∞-Ôπ¥Ôπ∂-ÔªºÔº°-Ôº∫ÔΩÅ-ÔΩöÔΩ¶-ÔææÔøÇ-ÔøáÔøä-ÔøèÔøí-ÔøóÔøö-Ôøú";var r="ÃÄ-ÕØ“É-“á÷ë-÷Ω÷ø◊Å◊Ç◊Ñ◊Ö◊áÿê-ÿöÿ†-ŸâŸ≤-€ì€ß-€®€ª-€º‹∞-›ä‡†Ä-‡†î‡†õ-‡†£‡†•-‡†ß‡†©-‡†≠‡°Ä-‡°ó‡£§-‡£æ‡§Ä-‡§É‡§∫-‡§º‡§æ-‡•è‡•ë-‡•ó‡•¢-‡•£‡•¶-‡•Ø‡¶Å-‡¶É‡¶º‡¶æ-‡ßÑ‡ßá‡ßà‡ßó‡ßü-‡ß†‡®Å-‡®É‡®º‡®æ-‡©Ç‡©á‡©à‡©ã-‡©ç‡©ë‡©¶-‡©±‡©µ‡™Å-‡™É‡™º‡™æ-‡´Ö‡´á-‡´â‡´ã-‡´ç‡´¢-‡´£‡´¶-‡´Ø‡¨Å-‡¨É‡¨º‡¨æ-‡≠Ñ‡≠á‡≠à‡≠ã-‡≠ç‡≠ñ‡≠ó‡≠ü-‡≠†‡≠¶-‡≠Ø‡ÆÇ‡Ææ-‡ØÇ‡ØÜ-‡Øà‡Øä-‡Øç‡Øó‡Ø¶-‡ØØ‡∞Å-‡∞É‡±Ü-‡±à‡±ä-‡±ç‡±ï‡±ñ‡±¢-‡±£‡±¶-‡±Ø‡≤Ç‡≤É‡≤º‡≤æ-‡≥Ñ‡≥Ü-‡≥à‡≥ä-‡≥ç‡≥ï‡≥ñ‡≥¢-‡≥£‡≥¶-‡≥Ø‡¥Ç‡¥É‡µÜ-‡µà‡µó‡µ¢-‡µ£‡µ¶-‡µØ‡∂Ç‡∂É‡∑ä‡∑è-‡∑î‡∑ñ‡∑ò-‡∑ü‡∑≤‡∑≥‡∏¥-‡∏∫‡πÄ-‡πÖ‡πê-‡πô‡∫¥-‡∫π‡ªà-‡ªç‡ªê-‡ªô‡ºò‡ºô‡º†-‡º©‡ºµ‡º∑‡ºπ‡ΩÅ-‡Ωá‡Ω±-‡æÑ‡æÜ-‡æá‡æç-‡æó‡æô-‡æº‡øÜ·ÄÄ-·Ä©·ÅÄ-·Åâ·Åß-·Å≠·Å±-·Å¥·ÇÇ-·Çç·Çè-·Çù·çù-·çü·úé-·úê·ú†-·ú∞·ùÄ-·ùê·ù≤·ù≥·ûÄ-·û≤·üù·ü†-·ü©·†ã-·†ç·†ê-·†ô·§†-·§´·§∞-·§ª·•ë-·•≠·¶∞-·ßÄ·ßà-·ßâ·ßê-·ßô·®Ä-·®ï·®†-·©ì·©†-·©º·©ø-·™â·™ê-·™ô·≠Ü-·≠ã·≠ê-·≠ô·≠´-·≠≥·Æ∞-·Æπ·Ø¶-·Ø≥·∞Ä-·∞¢·±Ä-·±â·±õ-·±Ω·≥ê-·≥í·¥Ä-·∂æ·∏Å-·ºï‚Äå‚Äç‚Äø‚ÅÄ‚Åî‚Éê-‚Éú‚É°‚É•-‚É∞‚∂Å-‚∂ñ‚∑†-‚∑ø„Ä°-„Ä®„Çô„ÇöÍôÄ-Íô≠Íô¥-ÍôΩÍöüÍõ∞-Íõ±Íü∏-Í†ÄÍ†ÜÍ†ãÍ†£-Í†ßÍ¢Ä-Í¢ÅÍ¢¥-Í£ÑÍ£ê-Í£ôÍ£≥-Í£∑Í§Ä-Í§âÍ§¶-Í§≠Í§∞-Í•ÖÍ¶Ä-Í¶ÉÍ¶≥-ÍßÄÍ®Ä-Í®ßÍ©Ä-Í©ÅÍ©å-Í©çÍ©ê-Í©ôÍ©ªÍ´†-Í´©Í´≤-Í´≥ÍØÄ-ÍØ°ÍØ¨ÍØ≠ÍØ∞-ÍØπÔ¨†-Ô¨®Ô∏Ä-Ô∏èÔ∏†-Ô∏¶Ô∏≥Ô∏¥Ôπç-ÔπèÔºê-ÔºôÔºø";var i=new RegExp("["+n+"]");var a=new RegExp("["+n+r+"]");t.newline=/[\n\r\u2028\u2029]/;t.lineBreak=new RegExp("\r\n|"+t.newline.source);t.allLineBreaks=new RegExp(t.lineBreak.source,"g");t.isIdentifierStart=function(e){if(e<65){return e===36||e===64}if(e<91){return true}if(e<97){return e===95}if(e<123){return true}return e>=170&&i.test(String.fromCharCode(e))};t.isIdentifierChar=function(e){if(e<48){return e===36}if(e<58){return true}if(e<65){return false}if(e<91){return true}if(e<97){return e===95}if(e<123){return true}return e>=170&&a.test(String.fromCharCode(e))}},function(e,t){function n(e,t){var n={};var r;for(r in e){if(r!==t){n[r]=e[r]}}if(t in e){for(r in e[t]){n[r]=e[t][r]}}return n}e.exports.mergeOpts=n},function(e,t){function n(e){var t=0;var n=-1;var r=[];var i=true;this.set_indent=function(r){t=e.baseIndentLength+r*e.indent_length;n=r};this.get_character_count=function(){return t};this.is_empty=function(){return i};this.last=function(){if(!this._empty){return r[r.length-1]}else{return null}};this.push=function(e){r.push(e);t+=e.length;i=false};this.pop=function(){var e=null;if(!i){e=r.pop();t-=e.length;i=r.length===0}return e};this.remove_indent=function(){if(n>0){n-=1;t-=e.indent_length}};this.trim=function(){while(this.last()===" "){r.pop();t-=1}i=r.length===0};this.toString=function(){var t="";if(!this._empty){if(n>=0){t=e.indent_cache[n]}t+=r.join("")}return t}}function r(e,t){t=t||"";this.indent_cache=[t];this.baseIndentLength=t.length;this.indent_length=e.length;this.raw=false;var r=[];this.baseIndentString=t;this.indent_string=e;this.previous_line=null;this.current_line=null;this.space_before_token=false;this.add_outputline=function(){this.previous_line=this.current_line;this.current_line=new n(this);r.push(this.current_line)};this.add_outputline();this.get_line_number=function(){return r.length};this.add_new_line=function(e){if(this.get_line_number()===1&&this.just_added_newline()){return false}if(e||!this.just_added_newline()){if(!this.raw){this.add_outputline()}return true}return false};this.get_code=function(e,t){var n=r.join("\n").replace(/[\r\n\t ]+$/,"");if(e){n+="\n"}if(t!=="\n"){n=n.replace(/[\n]/g,t)}return n};this.set_indent=function(e){if(r.length>1){while(e>=this.indent_cache.length){this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string)}this.current_line.set_indent(e);return true}this.current_line.set_indent(0);return false};this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++){this.add_outputline()}this.current_line.push(e.whitespace_before);this.current_line.push(e.text);this.space_before_token=false};this.add_token=function(e){this.add_space_before_token();this.current_line.push(e)};this.add_space_before_token=function(){if(this.space_before_token&&!this.just_added_newline()){this.current_line.push(" ")}this.space_before_token=false};this.remove_indent=function(e){var t=r.length;while(e<t){r[e].remove_indent();e++}};this.trim=function(n){n=n===undefined?false:n;this.current_line.trim(e,t);while(n&&r.length>1&&this.current_line.is_empty()){r.pop();this.current_line=r[r.length-1];this.current_line.trim()}this.previous_line=r.length>1?r[r.length-2]:null};this.just_added_newline=function(){return this.current_line.is_empty()};this.just_added_blankline=function(){if(this.just_added_newline()){if(r.length===1){return true}var e=r[r.length-2];return e.is_empty()}return false}}e.exports.Output=r},function(e,t,n){var r=n(0).Beautifier;function i(e,t){var n=new r(e,t);return n.beautify()}e.exports=i}]);var n=e;if(typeof undefined==="function"&&undefined.amd){undefined([],function(){return{css_beautify:n}})}else{t.css_beautify=n}})()});t(Bf);var jf=n(function(e,t){(function(){var e=function(e){var t={};function n(r){if(t[r]){return t[r].exports}var i=t[r]={i:r,l:false,exports:{}};e[r].call(i.exports,i,i.exports,n);i.l=true;return i.exports}n.m=e;n.c=t;n.i=function(e){return e};n.d=function(e,t,r){if(!n.o(e,t)){Object.defineProperty(e,t,{configurable:false,enumerable:true,get:r})}};n.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};n.d(t,"a",t);return t};n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};n.p="";return n(n.s=3)}([function(e,t,n){var r=n(2).mergeOpts;var i=n(1);var a=i.lineBreak;var o=i.allLineBreaks;function s(e){return e.replace(/^\s+/g,"")}function u(e){return e.replace(/\s+$/g,"")}function l(e,t,n,i){e=e||"";var l,c,f,d,h,v,p,g,m,y,b,_,w,x,T,C,k,S,E,P,O;t=t||{};t=r(t,"html");if((t.wrap_line_length===undefined||parseInt(t.wrap_line_length,10)===0)&&(t.max_char!==undefined&&parseInt(t.max_char,10)!==0)){t.wrap_line_length=t.max_char}c=t.indent_inner_html===undefined?false:t.indent_inner_html;f=t.indent_body_inner_html===undefined?true:t.indent_body_inner_html;d=t.indent_head_inner_html===undefined?true:t.indent_head_inner_html;h=t.indent_size===undefined?4:parseInt(t.indent_size,10);v=t.indent_char===undefined?" ":t.indent_char;g=t.brace_style===undefined?"collapse":t.brace_style;p=parseInt(t.wrap_line_length,10)===0?32786:parseInt(t.wrap_line_length||250,10);m=t.unformatted||["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","address","big","dt","ins","strike","tt"];y=t.content_unformatted||["pre"];b=t.preserve_newlines===undefined?true:t.preserve_newlines;_=b?isNaN(parseInt(t.max_preserve_newlines,10))?32786:parseInt(t.max_preserve_newlines,10):0;w=t.indent_handlebars===undefined?false:t.indent_handlebars;x=t.wrap_attributes===undefined?"auto":t.wrap_attributes;T=isNaN(parseInt(t.wrap_attributes_indent_size,10))?h:parseInt(t.wrap_attributes_indent_size,10);C=x.substr(0,"force".length)==="force";k=x==="force-expand-multiline";S=x==="force-aligned";E=t.end_with_newline===undefined?false:t.end_with_newline;P=typeof t.extra_liners==="object"&&t.extra_liners?t.extra_liners.concat():typeof t.extra_liners==="string"?t.extra_liners.split(","):"head,body,/html".split(",");O=t.eol?t.eol:"auto";if(t.indent_with_tabs){v="\t";h=1}if(O==="auto"){O="\n";if(e&&a.test(e||"")){O=e.match(a)[0]}}O=O.replace(/\\r/,"\r").replace(/\\n/,"\n");e=e.replace(o,"\n");function M(){this.pos=0;this.token="";this.current_mode="CONTENT";this.tags={parent:"parent1",parentcount:1,parent1:""};this.tag_type="";this.token_text=this.last_token=this.last_text=this.token_type="";this.newlines=0;this.indent_content=c;this.indent_body_inner_html=f;this.indent_head_inner_html=d;this.Utils={whitespace:"\n\r\t ".split(""),single_token:t.void_elements||["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","?php","basefont","isindex"],extra_liners:P,in_array:function(e,t){for(var n=0;n<t.length;n++){if(e===t[n]){return true}}return false}};this.is_whitespace=function(e){for(var t=0;t<e.length;t++){if(!this.Utils.in_array(e.charAt(t),this.Utils.whitespace)){return false}}return true};this.traverse_whitespace=function(){var e="";e=this.input.charAt(this.pos);if(this.Utils.in_array(e,this.Utils.whitespace)){this.newlines=0;while(this.Utils.in_array(e,this.Utils.whitespace)){if(b&&e==="\n"&&this.newlines<=_){this.newlines+=1}this.pos++;e=this.input.charAt(this.pos)}return true}return false};this.space_or_wrap=function(e){if(this.line_char_count>=this.wrap_line_length){this.print_newline(false,e);this.print_indentation(e);return true}else{this.line_char_count++;e.push(" ");return false}};this.get_content=function(){var e="",t=[],n=0;while(this.input.charAt(this.pos)!=="<"||n===2){if(this.pos>=this.input.length){return t.length?t.join(""):["","TK_EOF"]}if(n<2&&this.traverse_whitespace()){this.space_or_wrap(t);continue}e=this.input.charAt(this.pos);if(w){if(e==="{"){n+=1}else if(n<2){n=0}if(e==="}"&&n>0){if(n--===0){break}}var r=this.input.substr(this.pos,3);if(r==="{{#"||r==="{{/"){break}else if(r==="{{!"){return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"]}else if(this.input.substr(this.pos,2)==="{{"){if(this.get_tag(true)==="{{else}}"){break}}}this.pos++;this.line_char_count++;t.push(e)}return t.length?t.join(""):""};this.get_contents_to=function(e){if(this.pos===this.input.length){return["","TK_EOF"]}var t="";var n=new RegExp("</"+e+"\\s*>","igm");n.lastIndex=this.pos;var r=n.exec(this.input);var i=r?r.index:this.input.length;if(this.pos<i){t=this.input.substring(this.pos,i);this.pos=i}return t};this.record_tag=function(e){if(this.tags[e+"count"]){this.tags[e+"count"]++;this.tags[e+this.tags[e+"count"]]=this.indent_level}else{this.tags[e+"count"]=1;this.tags[e+this.tags[e+"count"]]=this.indent_level}this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent;this.tags.parent=e+this.tags[e+"count"]};this.retrieve_tag=function(e){if(this.tags[e+"count"]){var t=this.tags.parent;while(t){if(e+this.tags[e+"count"]===t){break}t=this.tags[t+"parent"]}if(t){this.indent_level=this.tags[e+this.tags[e+"count"]];this.tags.parent=this.tags[t+"parent"]}delete this.tags[e+this.tags[e+"count"]+"parent"];delete this.tags[e+this.tags[e+"count"]];if(this.tags[e+"count"]===1){delete this.tags[e+"count"]}else{this.tags[e+"count"]--}}};this.indent_to_tag=function(e){if(!this.tags[e+"count"]){return}var t=this.tags.parent;while(t){if(e+this.tags[e+"count"]===t){break}t=this.tags[t+"parent"]}if(t){this.indent_level=this.tags[e+this.tags[e+"count"]]}};this.get_tag=function(e){var t="",n=[],r="",i=false,a=true,o=false,s,u,l,c=this.pos,f=this.line_char_count,d=false,h;e=e!==undefined?e:false;do{if(this.pos>=this.input.length){if(e){this.pos=c;this.line_char_count=f}return n.length?n.join(""):["","TK_EOF"]}t=this.input.charAt(this.pos);this.pos++;if(this.Utils.in_array(t,this.Utils.whitespace)){i=true;continue}if(t==="'"||t==='"'){t+=this.get_unformatted(t);i=true}if(t==="="){i=false}h=this.input.substr(this.pos-1);if(k&&o&&!d&&(t===">"||t==="/")){if(h.match(/^\/?\s*>/)){i=false;d=true;this.print_newline(false,n);this.print_indentation(n)}}if(n.length&&n[n.length-1]!=="="&&t!==">"&&i){var v=this.space_or_wrap(n);var p=v&&t!=="/"&&!C;i=false;if(C&&t!=="/"){var g=false;if(k&&a){var b=h.match(/^\S*(="([^"]|\\")*")?\s*\/?\s*>/)!==null;g=!b}if(!a||g){this.print_newline(false,n);this.print_indentation(n);p=true}}if(p){o=true;var _=T;if(S){_=n.indexOf(" ")+1}for(var x=0;x<_;x++){n.push(" ")}}if(a){for(var E=0;E<n.length;E++){if(n[E]===" "){a=false;break}}}}if(w&&l==="<"){if(t+this.input.charAt(this.pos)==="{{"){t+=this.get_unformatted("}}");if(n.length&&n[n.length-1]!==" "&&n[n.length-1]!=="<"){t=" "+t}i=true}}if(t==="<"&&!l){s=this.pos-1;l="<"}if(w&&!l){if(n.length>=2&&n[n.length-1]==="{"&&n[n.length-2]==="{"){if(t==="#"||t==="/"||t==="!"){s=this.pos-3}else{s=this.pos-2}l="{"}}this.line_char_count++;n.push(t);if(n[1]&&(n[1]==="!"||n[1]==="?"||n[1]==="%")){n=[this.get_comment(s)];break}if(w&&n[1]&&n[1]==="{"&&n[2]&&n[2]==="!"){n=[this.get_comment(s)];break}if(w&&l==="{"&&n.length>2&&n[n.length-2]==="}"&&n[n.length-1]==="}"){break}}while(t!==">");var P=n.join("");var O;var M;if(P.indexOf(" ")!==-1){O=P.indexOf(" ")}else if(P.indexOf("\n")!==-1){O=P.indexOf("\n")}else if(P.charAt(0)==="{"){O=P.indexOf("}")}else{O=P.indexOf(">")}if(P.charAt(0)==="<"||!w){M=1}else{M=P.charAt(2)==="#"?3:2}var A=P.substring(M,O).toLowerCase();if(P.charAt(P.length-2)==="/"||this.Utils.in_array(A,this.Utils.single_token)){if(!e){this.tag_type="SINGLE"}}else if(w&&P.charAt(0)==="{"&&A==="else"){if(!e){this.indent_to_tag("if");this.tag_type="HANDLEBARS_ELSE";this.indent_content=true;this.traverse_whitespace()}}else if(this.is_unformatted(A,m)||this.is_unformatted(A,y)){r=this.get_unformatted("</"+A+">",P);n.push(r);this.tag_type="SINGLE"}else if(A==="script"&&(P.search("type")===-1||P.search("type")>-1&&P.search(/\b(text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect)/)>-1)){if(!e){this.record_tag(A);this.tag_type="SCRIPT"}}else if(A==="style"&&(P.search("type")===-1||P.search("type")>-1&&P.search("text/css")>-1)){if(!e){this.record_tag(A);this.tag_type="STYLE"}}else if(A.charAt(0)==="!"){if(!e){this.tag_type="SINGLE";this.traverse_whitespace()}}else if(!e){if(A.charAt(0)==="/"){this.retrieve_tag(A.substring(1));this.tag_type="END"}else{this.record_tag(A);if(A.toLowerCase()!=="html"){this.indent_content=true}this.tag_type="START"}if(this.traverse_whitespace()){this.space_or_wrap(n)}if(this.Utils.in_array(A,this.Utils.extra_liners)){this.print_newline(false,this.output);if(this.output.length&&this.output[this.output.length-2]!=="\n"){this.print_newline(true,this.output)}}}if(e){this.pos=c;this.line_char_count=f}return n.join("")};this.get_comment=function(e){var t="",n=">",r=false;this.pos=e;var i=this.input.charAt(this.pos);this.pos++;while(this.pos<=this.input.length){t+=i;if(t.charAt(t.length-1)===n.charAt(n.length-1)&&t.indexOf(n)!==-1){break}if(!r&&t.length<10){if(t.indexOf("<![if")===0){n="<![endif]>";r=true}else if(t.indexOf("<![cdata[")===0){n="]]>";r=true}else if(t.indexOf("<![")===0){n="]>";r=true}else if(t.indexOf("\x3c!--")===0){n="--\x3e";r=true}else if(t.indexOf("{{!--")===0){n="--}}";r=true}else if(t.indexOf("{{!")===0){if(t.length===5&&t.indexOf("{{!--")===-1){n="}}";r=true}}else if(t.indexOf("<?")===0){n="?>";r=true}else if(t.indexOf("<%")===0){n="%>";r=true}}i=this.input.charAt(this.pos);this.pos++}return t};function e(e){var t="";var n=function(n){var r=t+n.toLowerCase();t=r.length<=e.length?r:r.substr(r.length-e.length,e.length)};var r=function(){return t.indexOf(e)===-1};return{add:n,doesNotMatch:r}}this.get_unformatted=function(t,n){if(n&&n.toLowerCase().indexOf(t)!==-1){return""}var r="";var i="";var a=true;var o=e(t);do{if(this.pos>=this.input.length){return i}r=this.input.charAt(this.pos);this.pos++;if(this.Utils.in_array(r,this.Utils.whitespace)){if(!a){this.line_char_count--;continue}if(r==="\n"||r==="\r"){i+="\n";this.line_char_count=0;continue}}i+=r;o.add(r);this.line_char_count++;a=true;if(w&&r==="{"&&i.length&&i.charAt(i.length-2)==="{"){i+=this.get_unformatted("}}")}}while(o.doesNotMatch());return i};this.get_token=function(){var e;if(this.last_token==="TK_TAG_SCRIPT"||this.last_token==="TK_TAG_STYLE"){var t=this.last_token.substr(7);e=this.get_contents_to(t);if(typeof e!=="string"){return e}return[e,"TK_"+t]}if(this.current_mode==="CONTENT"){e=this.get_content();if(typeof e!=="string"){return e}else{return[e,"TK_CONTENT"]}}if(this.current_mode==="TAG"){e=this.get_tag();if(typeof e!=="string"){return e}else{var n="TK_TAG_"+this.tag_type;return[e,n]}}};this.get_full_indent=function(e){e=this.indent_level+e||0;if(e<1){return""}return Array(e+1).join(this.indent_string)};this.is_unformatted=function(e,t){if(!this.Utils.in_array(e,t)){return false}if(e.toLowerCase()!=="a"||!this.Utils.in_array("a",t)){return true}var n=this.get_tag(true);var r=(n||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);if(!r||this.Utils.in_array(r[1],t)){return true}else{return false}};this.printer=function(e,t,n,r,i){this.input=e||"";this.input=this.input.replace(/\r\n|[\r\u2028\u2029]/g,"\n");this.output=[];this.indent_character=t;this.indent_string="";this.indent_size=n;this.brace_style=i;this.indent_level=0;this.wrap_line_length=r;this.line_char_count=0;for(var a=0;a<this.indent_size;a++){this.indent_string+=this.indent_character}this.print_newline=function(e,t){this.line_char_count=0;if(!t||!t.length){return}if(e||t[t.length-1]!=="\n"){if(t[t.length-1]!=="\n"){t[t.length-1]=u(t[t.length-1])}t.push("\n")}};this.print_indentation=function(e){for(var t=0;t<this.indent_level;t++){e.push(this.indent_string);this.line_char_count+=this.indent_string.length}};this.print_token=function(e){if(this.is_whitespace(e)&&!this.output.length){return}if(e||e!==""){if(this.output.length&&this.output[this.output.length-1]==="\n"){this.print_indentation(this.output);e=s(e)}}this.print_token_raw(e)};this.print_token_raw=function(e){if(this.newlines>0){e=u(e)}if(e&&e!==""){if(e.length>1&&e.charAt(e.length-1)==="\n"){this.output.push(e.slice(0,-1));this.print_newline(false,this.output)}else{this.output.push(e)}}for(var t=0;t<this.newlines;t++){this.print_newline(t>0,this.output)}this.newlines=0};this.indent=function(){this.indent_level++};this.unindent=function(){if(this.indent_level>0){this.indent_level--}}};return this}this.beautify=function(){l=new M;l.printer(e,v,h,p,g);while(true){var r=l.get_token();l.token_text=r[0];l.token_type=r[1];if(l.token_type==="TK_EOF"){break}switch(l.token_type){case"TK_TAG_START":l.print_newline(false,l.output);l.print_token(l.token_text);if(l.indent_content){if((l.indent_body_inner_html||!l.token_text.match(/<body(?:.*)>/))&&(l.indent_head_inner_html||!l.token_text.match(/<head(?:.*)>/))){l.indent()}l.indent_content=false}l.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":l.print_newline(false,l.output);l.print_token(l.token_text);l.current_mode="CONTENT";break;case"TK_TAG_END":if(l.last_token==="TK_CONTENT"&&l.last_text===""){var a=(l.token_text.match(/\w+/)||[])[0];var o=null;if(l.output.length){o=l.output[l.output.length-1].match(/(?:<|{{#)\s*(\w+)/)}if(o===null||o[1]!==a&&!l.Utils.in_array(o[1],m)){l.print_newline(false,l.output)}}l.print_token(l.token_text);l.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var s=l.token_text.match(/^\s*<([a-z-]+)/i);if(!s||!l.Utils.in_array(s[1],m)){l.print_newline(false,l.output)}l.print_token(l.token_text);l.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":var u=false;for(var c=l.output.length-1;c>=0;c--){if(l.output[c]==="\n"){break}else{if(l.output[c].match(/{{#if/)){u=true;break}}}if(!u){l.print_newline(false,l.output)}l.print_token(l.token_text);if(l.indent_content){l.indent();l.indent_content=false}l.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":l.print_token(l.token_text);l.current_mode="TAG";break;case"TK_CONTENT":l.print_token(l.token_text);l.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(l.token_text!==""){l.print_newline(false,l.output);var f=l.token_text,d,y=1;if(l.token_type==="TK_SCRIPT"){d=typeof n==="function"&&n}else if(l.token_type==="TK_STYLE"){d=typeof i==="function"&&i}if(t.indent_scripts==="keep"){y=0}else if(t.indent_scripts==="separate"){y=-l.indent_level}var b=l.get_full_indent(y);if(d){var _=function(){this.eol="\n"};_.prototype=t;var w=new _;f=d(f.replace(/^\s*/,b),w)}else{var x=f.match(/^\s*/)[0];var T=x.match(/[^\n\r]*$/)[0].split(l.indent_string).length-1;var C=l.get_full_indent(y-T);f=f.replace(/^\s*/,b).replace(/\r\n|\r|\n/g,"\n"+C).replace(/\s+$/,"")}if(f){l.print_token_raw(f);l.print_newline(true,l.output)}}l.current_mode="TAG";break;default:if(l.token_text!==""){l.print_token(l.token_text)}break}l.last_token=l.token_type;l.last_text=l.token_text}var k=l.output.join("").replace(/[\r\n\t ]+$/,"");if(E){k+="\n"}if(O!=="\n"){k=k.replace(/[\n]/g,O)}return k}}e.exports.Beautifier=l},function(e,t){var n="¬™¬µ¬∫√Ä-√ñ√ò-√∂√∏-ÀÅÀÜ-ÀëÀ†-À§À¨ÀÆÕ∞-Õ¥Õ∂Õ∑Õ∫-ÕΩŒÜŒà-ŒäŒåŒé-Œ°Œ£-œµœ∑-“Å“ä-‘ß‘±-’ñ’ô’°-÷á◊ê-◊™◊∞-◊≤ÿ†-ŸäŸÆŸØŸ±-€ì€ï€•€¶€Æ€Ø€∫-€º€ø‹ê‹í-‹Ø›ç-ﬁ•ﬁ±ﬂä-ﬂ™ﬂ¥ﬂµﬂ∫‡†Ä-‡†ï‡†ö‡†§‡†®‡°Ä-‡°ò‡¢†‡¢¢-‡¢¨‡§Ñ-‡§π‡§Ω‡•ê‡•ò-‡•°‡•±-‡•∑‡•π-‡•ø‡¶Ö-‡¶å‡¶è‡¶ê‡¶ì-‡¶®‡¶™-‡¶∞‡¶≤‡¶∂-‡¶π‡¶Ω‡ßé‡ßú‡ßù‡ßü-‡ß°‡ß∞‡ß±‡®Ö-‡®ä‡®è‡®ê‡®ì-‡®®‡®™-‡®∞‡®≤‡®≥‡®µ‡®∂‡®∏‡®π‡©ô-‡©ú‡©û‡©≤-‡©¥‡™Ö-‡™ç‡™è-‡™ë‡™ì-‡™®‡™™-‡™∞‡™≤‡™≥‡™µ-‡™π‡™Ω‡´ê‡´†‡´°‡¨Ö-‡¨å‡¨è‡¨ê‡¨ì-‡¨®‡¨™-‡¨∞‡¨≤‡¨≥‡¨µ-‡¨π‡¨Ω‡≠ú‡≠ù‡≠ü-‡≠°‡≠±‡ÆÉ‡ÆÖ-‡Æä‡Æé-‡Æê‡Æí-‡Æï‡Æô‡Æö‡Æú‡Æû‡Æü‡Æ£‡Æ§‡Æ®-‡Æ™‡ÆÆ-‡Æπ‡Øê‡∞Ö-‡∞å‡∞é-‡∞ê‡∞í-‡∞®‡∞™-‡∞≥‡∞µ-‡∞π‡∞Ω‡±ò‡±ô‡±†‡±°‡≤Ö-‡≤å‡≤é-‡≤ê‡≤í-‡≤®‡≤™-‡≤≥‡≤µ-‡≤π‡≤Ω‡≥û‡≥†‡≥°‡≥±‡≥≤‡¥Ö-‡¥å‡¥é-‡¥ê‡¥í-‡¥∫‡¥Ω‡µé‡µ†‡µ°‡µ∫-‡µø‡∂Ö-‡∂ñ‡∂ö-‡∂±‡∂≥-‡∂ª‡∂Ω‡∑Ä-‡∑Ü‡∏Å-‡∏∞‡∏≤‡∏≥‡πÄ-‡πÜ‡∫Å‡∫Ç‡∫Ñ‡∫á‡∫à‡∫ä‡∫ç‡∫î-‡∫ó‡∫ô-‡∫ü‡∫°-‡∫£‡∫•‡∫ß‡∫™‡∫´‡∫≠-‡∫∞‡∫≤‡∫≥‡∫Ω‡ªÄ-‡ªÑ‡ªÜ‡ªú-‡ªü‡ºÄ‡ΩÄ-‡Ωá‡Ωâ-‡Ω¨‡æà-‡æå·ÄÄ-·Ä™·Äø·Åê-·Åï·Åö-·Åù·Å°·Å•·Å¶·ÅÆ-·Å∞·Åµ-·ÇÅ·Çé·Ç†-·ÉÖ·Éá·Éç·Éê-·É∫·Éº-·âà·âä-·âç·âê-·âñ·âò·âö-·âù·â†-·äà·ää-·äç·äê-·ä∞·ä≤-·äµ·ä∏-·äæ·ãÄ·ãÇ-·ãÖ·ãà-·ãñ·ãò-·åê·åí-·åï·åò-·çö·éÄ-·éè·é†-·è¥·êÅ-·ô¨·ôØ-·ôø·öÅ-·öö·ö†-·õ™·õÆ-·õ∞·úÄ-·úå·úé-·úë·ú†-·ú±·ùÄ-·ùë·ù†-·ù¨·ùÆ-·ù∞·ûÄ-·û≥·üó·üú·††-·°∑·¢Ä-·¢®·¢™·¢∞-·£µ·§Ä-·§ú·•ê-·•≠·•∞-·•¥·¶Ä-·¶´·ßÅ-·ßá·®Ä-·®ñ·®†-·©î·™ß·¨Ö-·¨≥·≠Ö-·≠ã·ÆÉ-·Æ†·ÆÆ·ÆØ·Æ∫-·Ø•·∞Ä-·∞£·±ç-·±è·±ö-·±Ω·≥©-·≥¨·≥Æ-·≥±·≥µ·≥∂·¥Ä-·∂ø·∏Ä-·ºï·ºò-·ºù·º†-·ΩÖ·Ωà-·Ωç·Ωê-·Ωó·Ωô·Ωõ·Ωù·Ωü-·ΩΩ·æÄ-·æ¥·æ∂-·æº·ææ·øÇ-·øÑ·øÜ-·øå·øê-·øì·øñ-·øõ·ø†-·ø¨·ø≤-·ø¥·ø∂-·øº‚Å±‚Åø‚Çê-‚Çú‚ÑÇ‚Ñá‚Ñä-‚Ñì‚Ñï‚Ñô-‚Ñù‚Ñ§‚Ñ¶‚Ñ®‚Ñ™-‚Ñ≠‚ÑØ-‚Ñπ‚Ñº-‚Ñø‚ÖÖ-‚Öâ‚Öé‚Ö†-‚Üà‚∞Ä-‚∞Æ‚∞∞-‚±û‚±†-‚≥§‚≥´-‚≥Æ‚≥≤‚≥≥‚¥Ä-‚¥•‚¥ß‚¥≠‚¥∞-‚µß‚µØ‚∂Ä-‚∂ñ‚∂†-‚∂¶‚∂®-‚∂Æ‚∂∞-‚∂∂‚∂∏-‚∂æ‚∑Ä-‚∑Ü‚∑à-‚∑é‚∑ê-‚∑ñ‚∑ò-‚∑û‚∏Ø„ÄÖ-„Äá„Ä°-„Ä©„Ä±-„Äµ„Ä∏-„Äº„ÅÅ-„Çñ„Çù-„Çü„Ç°-„É∫„Éº-„Éø„ÑÖ-„Ñ≠„Ñ±-„Üé„Ü†-„Ü∫„á∞-„áø„êÄ-‰∂µ‰∏Ä-ÈøåÍÄÄ-ÍíåÍìê-ÍìΩÍîÄ-ÍòåÍòê-ÍòüÍò™Íò´ÍôÄ-ÍôÆÍôø-ÍöóÍö†-ÍõØÍúó-ÍúüÍú¢-ÍûàÍûã-ÍûéÍûê-ÍûìÍû†-Íû™Íü∏-Í†ÅÍ†É-Í†ÖÍ†á-Í†äÍ†å-Í†¢Í°Ä-Í°≥Í¢Ç-Í¢≥Í£≤-Í£∑Í£ªÍ§ä-Í§•Í§∞-Í•ÜÍ•†-Í•ºÍ¶Ñ-Í¶≤ÍßèÍ®Ä-Í®®Í©Ä-Í©ÇÍ©Ñ-Í©ãÍ©†-Í©∂Í©∫Í™Ä-Í™ØÍ™±Í™µÍ™∂Í™π-Í™ΩÍ´ÄÍ´ÇÍ´õ-Í´ùÍ´†-Í´™Í´≤-Í´¥Í¨Å-Í¨ÜÍ¨â-Í¨éÍ¨ë-Í¨ñÍ¨†-Í¨¶Í¨®-Í¨ÆÍØÄ-ÍØ¢Í∞Ä-Ìû£Ìû∞-ÌüÜÌüã-ÌüªÔ§Ä-Ô©≠Ô©∞-Ô´ôÔ¨Ä-Ô¨ÜÔ¨ì-Ô¨óÔ¨ùÔ¨ü-Ô¨®Ô¨™-Ô¨∂Ô¨∏-Ô¨ºÔ¨æÔ≠ÄÔ≠ÅÔ≠ÉÔ≠ÑÔ≠Ü-ÔÆ±ÔØì-Ô¥ΩÔµê-Ô∂èÔ∂í-Ô∑áÔ∑∞-Ô∑ªÔπ∞-Ôπ¥Ôπ∂-ÔªºÔº°-Ôº∫ÔΩÅ-ÔΩöÔΩ¶-ÔææÔøÇ-ÔøáÔøä-ÔøèÔøí-ÔøóÔøö-Ôøú";var r="ÃÄ-ÕØ“É-“á÷ë-÷Ω÷ø◊Å◊Ç◊Ñ◊Ö◊áÿê-ÿöÿ†-ŸâŸ≤-€ì€ß-€®€ª-€º‹∞-›ä‡†Ä-‡†î‡†õ-‡†£‡†•-‡†ß‡†©-‡†≠‡°Ä-‡°ó‡£§-‡£æ‡§Ä-‡§É‡§∫-‡§º‡§æ-‡•è‡•ë-‡•ó‡•¢-‡•£‡•¶-‡•Ø‡¶Å-‡¶É‡¶º‡¶æ-‡ßÑ‡ßá‡ßà‡ßó‡ßü-‡ß†‡®Å-‡®É‡®º‡®æ-‡©Ç‡©á‡©à‡©ã-‡©ç‡©ë‡©¶-‡©±‡©µ‡™Å-‡™É‡™º‡™æ-‡´Ö‡´á-‡´â‡´ã-‡´ç‡´¢-‡´£‡´¶-‡´Ø‡¨Å-‡¨É‡¨º‡¨æ-‡≠Ñ‡≠á‡≠à‡≠ã-‡≠ç‡≠ñ‡≠ó‡≠ü-‡≠†‡≠¶-‡≠Ø‡ÆÇ‡Ææ-‡ØÇ‡ØÜ-‡Øà‡Øä-‡Øç‡Øó‡Ø¶-‡ØØ‡∞Å-‡∞É‡±Ü-‡±à‡±ä-‡±ç‡±ï‡±ñ‡±¢-‡±£‡±¶-‡±Ø‡≤Ç‡≤É‡≤º‡≤æ-‡≥Ñ‡≥Ü-‡≥à‡≥ä-‡≥ç‡≥ï‡≥ñ‡≥¢-‡≥£‡≥¶-‡≥Ø‡¥Ç‡¥É‡µÜ-‡µà‡µó‡µ¢-‡µ£‡µ¶-‡µØ‡∂Ç‡∂É‡∑ä‡∑è-‡∑î‡∑ñ‡∑ò-‡∑ü‡∑≤‡∑≥‡∏¥-‡∏∫‡πÄ-‡πÖ‡πê-‡πô‡∫¥-‡∫π‡ªà-‡ªç‡ªê-‡ªô‡ºò‡ºô‡º†-‡º©‡ºµ‡º∑‡ºπ‡ΩÅ-‡Ωá‡Ω±-‡æÑ‡æÜ-‡æá‡æç-‡æó‡æô-‡æº‡øÜ·ÄÄ-·Ä©·ÅÄ-·Åâ·Åß-·Å≠·Å±-·Å¥·ÇÇ-·Çç·Çè-·Çù·çù-·çü·úé-·úê·ú†-·ú∞·ùÄ-·ùê·ù≤·ù≥·ûÄ-·û≤·üù·ü†-·ü©·†ã-·†ç·†ê-·†ô·§†-·§´·§∞-·§ª·•ë-·•≠·¶∞-·ßÄ·ßà-·ßâ·ßê-·ßô·®Ä-·®ï·®†-·©ì·©†-·©º·©ø-·™â·™ê-·™ô·≠Ü-·≠ã·≠ê-·≠ô·≠´-·≠≥·Æ∞-·Æπ·Ø¶-·Ø≥·∞Ä-·∞¢·±Ä-·±â·±õ-·±Ω·≥ê-·≥í·¥Ä-·∂æ·∏Å-·ºï‚Äå‚Äç‚Äø‚ÅÄ‚Åî‚Éê-‚Éú‚É°‚É•-‚É∞‚∂Å-‚∂ñ‚∑†-‚∑ø„Ä°-„Ä®„Çô„ÇöÍôÄ-Íô≠Íô¥-ÍôΩÍöüÍõ∞-Íõ±Íü∏-Í†ÄÍ†ÜÍ†ãÍ†£-Í†ßÍ¢Ä-Í¢ÅÍ¢¥-Í£ÑÍ£ê-Í£ôÍ£≥-Í£∑Í§Ä-Í§âÍ§¶-Í§≠Í§∞-Í•ÖÍ¶Ä-Í¶ÉÍ¶≥-ÍßÄÍ®Ä-Í®ßÍ©Ä-Í©ÅÍ©å-Í©çÍ©ê-Í©ôÍ©ªÍ´†-Í´©Í´≤-Í´≥ÍØÄ-ÍØ°ÍØ¨ÍØ≠ÍØ∞-ÍØπÔ¨†-Ô¨®Ô∏Ä-Ô∏èÔ∏†-Ô∏¶Ô∏≥Ô∏¥Ôπç-ÔπèÔºê-ÔºôÔºø";var i=new RegExp("["+n+"]");var a=new RegExp("["+n+r+"]");t.newline=/[\n\r\u2028\u2029]/;t.lineBreak=new RegExp("\r\n|"+t.newline.source);t.allLineBreaks=new RegExp(t.lineBreak.source,"g");t.isIdentifierStart=function(e){if(e<65){return e===36||e===64}if(e<91){return true}if(e<97){return e===95}if(e<123){return true}return e>=170&&i.test(String.fromCharCode(e))};t.isIdentifierChar=function(e){if(e<48){return e===36}if(e<58){return true}if(e<65){return false}if(e<91){return true}if(e<97){return e===95}if(e<123){return true}return e>=170&&a.test(String.fromCharCode(e))}},function(e,t){function n(e,t){var n={};var r;for(r in e){if(r!==t){n[r]=e[r]}}if(t in e){for(r in e[t]){n[r]=e[t][r]}}return n}e.exports.mergeOpts=n},function(e,t,n){var r=n(0).Beautifier;function i(e,t,n,i){var a=new r(e,t,n,i);return a.beautify()}e.exports=i}]);var n=e;if(typeof undefined==="function"&&undefined.amd){undefined(["require","./beautify","./beautify-css"],function(e){var t=e("./beautify");var r=e("./beautify-css");return{html_beautify:function(e,i){return n(e,i,t.js_beautify,r.css_beautify)}}})}else{var r=If;var i=Bf;t.html_beautify=function(e,t){return n(e,t,r.js_beautify,i.css_beautify)}}})()});t(jf);var Ff=n(function(e){function t(e,t,n){var r=function(t,n){return e.js_beautify(t,n)};r.js=e.js_beautify;r.css=t.css_beautify;r.html=n.html_beautify;r.js_beautify=e.js_beautify;r.css_beautify=t.css_beautify;r.html_beautify=n.html_beautify;return r}if(typeof undefined==="function"&&undefined.amd){undefined(["./lib/beautify","./lib/beautify-css","./lib/beautify-html"],function(e,n,r){return t(e,n,r)})}else{(function(e){var n=If;var r=Bf;var i=jf;e.exports=t(n,r,i)})(e)}});"use strict";var Hf;var zf=function e(t){return typeof t==="string"&&Uf().test(t)};function Uf(){return Hf||(Hf=new RegExp('^[\\s\t\n\v\f\r ¬†·öÄ·†é‚ÄÄ‚ÄÅ‚ÄÇ‚ÄÉ‚ÄÑ‚ÄÖ‚ÄÜ‚Äá‚Äà‚Äâ‚Ää‚ÄØ‚Åü„ÄÄ\u2028\u2029\ufeff"]+$'))}"use strict";var Vf=function e(t){return typeof t!=="undefined"&&t!==null&&(typeof t==="object"||typeof t==="function")};"use strict";var Wf=function e(t){if(!Vf(t)){t={}}var n=arguments.length;for(var r=1;r<n;r++){var i=arguments[r];if(Vf(i)){qf(t,i)}}return t};function qf(e,t){for(var n in t){if(Yf(t,n)){e[n]=t[n]}}}function Yf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Kf=function(e){return e!=null&&($f(e)||Gf(e)||!!e._isBuffer)};function $f(e){return!!e.constructor&&typeof e.constructor.isBuffer==="function"&&e.constructor.isBuffer(e)}function Gf(e){return typeof e.readFloatLE==="function"&&typeof e.slice==="function"&&$f(e.slice(0,0))}var Xf=Object.prototype.toString;var Zf=function e(t){if(typeof t==="undefined"){return"undefined"}if(t===null){return"null"}if(t===true||t===false||t instanceof Boolean){return"boolean"}if(typeof t==="string"||t instanceof String){return"string"}if(typeof t==="number"||t instanceof Number){return"number"}if(typeof t==="function"||t instanceof Function){return"function"}if(typeof Array.isArray!=="undefined"&&Array.isArray(t)){return"array"}if(t instanceof RegExp){return"regexp"}if(t instanceof Date){return"date"}var n=Xf.call(t);if(n==="[object RegExp]"){return"regexp"}if(n==="[object Date]"){return"date"}if(n==="[object Arguments]"){return"arguments"}if(n==="[object Error]"){return"error"}if(Kf(t)){return"buffer"}if(n==="[object Set]"){return"set"}if(n==="[object WeakSet]"){return"weakset"}if(n==="[object Map]"){return"map"}if(n==="[object WeakMap]"){return"weakmap"}if(n==="[object Symbol]"){return"symbol"}if(n==="[object Int8Array]"){return"int8array"}if(n==="[object Uint8Array]"){return"uint8array"}if(n==="[object Uint8ClampedArray]"){return"uint8clampedarray"}if(n==="[object Int16Array]"){return"int16array"}if(n==="[object Uint16Array]"){return"uint16array"}if(n==="[object Int32Array]"){return"int32array"}if(n==="[object Uint32Array]"){return"uint32array"}if(n==="[object Float32Array]"){return"float32array"}if(n==="[object Float64Array]"){return"float64array"}return"object"};"use strict";var Jf=function(e,t){var n=Wf({},t);var r=n.sep||"\n\n";var i=n.min;var a;if(typeof i==="number"&&i!==2){a=new RegExp("(\\r\\n|\\n|\\u2424) {"+i+",}")}if(typeof a==="undefined"){a=n.regex||/(\r\n|\n|\u2424){2,}/g}if(n.keepWhitespace!==true){e=e.split("\n").map(function(e){return zf(e)?e.trim():e}).join("\n")}e=Qf(e,n);return e.replace(a,r)};function Qf(e,t){var n=t.trailingNewline;if(n===false){return e}switch(Zf(n)){case"string":e=e.replace(/\s+$/,t.trailingNewline);break;case"function":e=t.trailingNewline(e);break;case"undefined":case"boolean":default:{e=e.replace(/\s+$/,"\n");break}}return e}"use strict";var ed={unformatted:["code","pre","em","strong","span"],indent_inner_html:true,indent_char:" ",indent_size:2,sep:"\n"};var td=function e(t,n){var r=Wf({},ed,n);t=Ff.html(t,r);if(r.ocd===true){if(r.newlines){r.sep=r.newlines}return nd(t,r)}return t};function nd(e,t){return Jf(e,t).replace(/^\s+/g,"").replace(/\s+$/g,"\n").replace(/(\s*<!--)/g,"\n$1").replace(/>(\s*)(?=<!--\s*\/)/g,"> ")}var rd=function(){this.getBeautifiedHtml=(()=>{const e=this.opts.data;if(!e){return""}return td(e)})};i.tag2("viron-prettyhtml","<pre>{getBeautifiedHtml()}</pre>","",'class="Prettyhtml"',function(e){this.external(rd)});var id=function(){const e=this.riotx.get();let t=true;this.isMobile=e.getter("layout.isMobile");this.normalizeValue=(e=>{if(!Ef(e)){return null}return e});this.handleTap=(()=>{if(this.opts.isdisabled){return}this.refs.input.focus()});this.handleFormSubmit=(e=>{e.preventDefault();if(!this.opts.onchange){return}if(this.opts.isdisabled){return}const t=this.normalizeValue(this.opts.val);this.opts.onchange(t,this.opts.id)});this.handleTextareaChange=(e=>{e.stopPropagation()});this.handleTextareaInput=(e=>{if(!this.opts.onchange){return}if(this.opts.isdisabled){return}const t=this.normalizeValue(e.target.value);this.opts.onchange(t,this.opts.id)});this.handleTextareaFocus=(()=>{if(!this.opts.onfocus){return}this.opts.onfocus()});this.handleTextareaBlur=(()=>{if(!this.opts.onblur){return}this.opts.onblur()});this.handleBlockerTap=(n=>{n.stopPropagation();if(this.isMobile||!t||!this.opts.val){return}Promise.resolve().then(()=>{return lf.copy(this.opts.val)}).then(()=>e.action("toasts.add",{message:"„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü„ÄÇ"})).catch(()=>{t=false;e.action("toasts.add",{type:"error",message:"„Åî‰ΩøÁî®‰∏≠„ÅÆ„Éñ„É©„Ç¶„Ç∂„Åß„ÅØ„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„ÉºÂá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ"})})})};i.tag2("viron-textarea",'<div class="Textarea__label" if="{!!opts.label}">{opts.label}</div> <form class="Textarea__form" ref="form" onsubmit="{handleFormSubmit}"> <virtual if="{!opts.ispreview}"> <textarea class="Textarea__input" ref="input" riot-value="{normalizeValue(opts.val)}" placeholder="{opts.placeholder}" disabled="{!!opts.isdisabled}" oninput="{handleTextareaInput}" onchange="{handleTextareaChange}" onfocus="{handleTextareaFocus}" onblur="{handleTextareaBlur}"></textarea> </virtual> <virtual if="{opts.ispreview}"> <pre class="Textarea__input Textarea__input--break">{normalizeValue(opts.val)}</pre> </virtual> </form> <div class="Textarea__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"","class=\"Textarea {'Textarea--disabled': opts.isdisabled, 'Textarea--preview': opts.ispreview, 'Textarea--error': opts.iserror}\" onclick=\"{getClickHandler('handleTap')}\" ontouchstart=\"{getTouchStartHandler()}\" ontouchmove=\"{getTouchMoveHandler()}\" ontouchend=\"{getTouchEndHandler('handleTap')}\"",function(e){this.external(id)});var ad=function(){const e=this.riotx.get();let t=true;this.isMobile=e.getter("layout.isMobile");this.isEditorMode=true;this.isPreviewMode=false;this.on("mount",()=>{this.update()}).on("update",()=>{});this.handleEditorTabTap=(()=>{this.isEditorMode=true;this.isPreviewMode=false;this.update()});this.handlePreviewTabTap=(()=>{this.isEditorMode=false;this.isPreviewMode=true;this.update()});this.handleEditorChange=(e=>{if(!this.opts.onchange){return}this.opts.onchange(e)});this.handleEditorFocus=(()=>{if(!this.opts.onfocus){return}this.opts.onfocus()});this.handleEditorBlur=(()=>{if(!this.opts.onblur){return}this.opts.onblur()});this.handleBlockerTap=(n=>{n.stopPropagation();if(this.isMobile||!t||!this.opts.val){return}Promise.resolve().then(()=>{return lf.copy(this.opts.val)}).then(()=>e.action("toasts.add",{message:"„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü„ÄÇ"})).catch(()=>{t=false;e.action("toasts.add",{type:"error",message:"„Åî‰ΩøÁî®‰∏≠„ÅÆ„Éñ„É©„Ç¶„Ç∂„Åß„ÅØ„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„ÉºÂá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ"})})})};i.tag2("viron-html",'<div class="Html__tabs"> <div class="Html__tab {\'Html__tab--selected\': isEditorMode}" onclick="{getClickHandler(\'handleEditorTabTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleEditorTabTap\')}">„Ç®„Éá„Ç£„Çø</div> <div class="Html__tab {\'Html__tab--selected\': isPreviewMode}" onclick="{getClickHandler(\'handlePreviewTabTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePreviewTabTap\')}">„Éó„É¨„Éì„É•„Éº</div> </div> <div class="Html__body"> <div class="Html__editor" if="{isEditorMode}"> <viron-textarea val="{opts.val}" isdisabled="{opts.isdisabled}" onchange="{handleEditorChange}" onfocus="{handleEditorFocus}" onblur="{handleEditorBlur}"></viron-textarea> </div> <div class="Html__preview" if="{isPreviewMode}"> <viron-prettyhtml data="{opts.val}"></viron-prettyhtml> </div> </div> <div class="Html__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"","class=\"Html {'Html--disabled': opts.isdisabled, 'Html--error': opts.haserror}\"",function(e){this.external(ad)});var od=function(){const e=this.riotx.get();this.handleBlockerTap=(t=>{t.stopPropagation();if(!this.opts.ispreview){return}e.action("mediapreviews.add",{path:this.opts.val})})};i.tag2("viron-image",'<div class="Image__content" riot-style="background-image:url({opts.val});"></div> <div class="Image__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"",'class="Image"',function(e){this.external(od)});function sd(e){return typeof e==="number"&&e!=e}var ud=sd;function ld(e){return!ul(e)||ud(Number(e))}var cd=ld;var fd=function(){const e=this.riotx.get();let t=true;this.isMobile=e.getter("layout.isMobile");const n=e=>{if(cd(e)){return false}return ul(e)};this.normalizeValue=(e=>{if(kf(e)){return e}if(Mf(e)){return null}if(Ef(e)){e=e.replace(/[^-^0-9]/g,"");if(!e.length){return null}e=Number(e);if(cd(e)){return null}}return e});this.handleTap=(()=>{this.refs.input.focus()});this.handleFormSubmit=(e=>{e.preventDefault();e.stopPropagation();const t=this.normalizeValue(this.opts.val);const n=this.opts.id;if(this.opts.onchange){this.opts.onchange(t,n)}if(this.opts.onsubmit){this.opts.onsubmit(t,n)}const r=this.refs.input;if(this.refs.input){r.blur()}});this.handleInputChange=(e=>{e.stopPropagation()});this.handleInputInput=(e=>{if(!this.opts.onchange){return}const t=this.normalizeValue(e.target.value);this.opts.onchange(t,this.opts.id)});this.handleInputFocus=(()=>{if(!this.opts.onfocus){return}this.opts.onfocus()});this.handleInputBlur=(()=>{if(!this.opts.onblur){return}this.opts.onblur()});this.handleBlockerTap=(r=>{r.stopPropagation();if(this.isMobile||!t||!n(this.opts.val)){return}Promise.resolve().then(()=>{return lf.copy(String(this.opts.val))}).then(()=>e.action("toasts.add",{message:"„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü„ÄÇ"})).catch(()=>{t=false;e.action("toasts.add",{type:"error",message:"„Åî‰ΩøÁî®‰∏≠„ÅÆ„Éñ„É©„Ç¶„Ç∂„Åß„ÅØ„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„ÉºÂá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ"})})})};i.tag2("viron-numberinput",'<div class="Numberinput__label" if="{!!opts.label}">{opts.label}</div> <form class="Numberinput__form" ref="form" onsubmit="{handleFormSubmit}"> <input class="Numberinput__input" ref="input" type="text" riot-value="{normalizeValue(opts.val)}" placeholder="{opts.placeholder}" disabled="{!!opts.isdisabled}" oninput="{handleInputInput}" onchange="{handleInputChange}" onfocus="{handleInputFocus}" onblur="{handleInputBlur}"> </form> <div class="Numberinput__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"","class=\"Numberinput {'Numberinput--disabled': opts.isdisabled, 'Numberinput--preview': opts.ispreview, 'Numberinput--error': opts.iserror} Numberinput--{opts.theme}\" onclick=\"{getClickHandler('handleTap')}\" ontouchstart=\"{getTouchStartHandler()}\" ontouchmove=\"{getTouchMoveHandler()}\" ontouchend=\"{getTouchEndHandler('handleTap')}\"",function(e){this.external(fd)});var dd=function(){const e=this.riotx.get();let t=true;this.isMobile=e.getter("layout.isMobile");this.isEditorMode=true;this.isPreviewMode=false;this.on("mount",()=>{this.update()}).on("update",()=>{});this.handleEditorTabTap=(()=>{this.isEditorMode=true;this.isPreviewMode=false;this.update()});this.handlePreviewTabTap=(()=>{this.isEditorMode=false;this.isPreviewMode=true;this.update()});this.handleEditorChange=(e=>{if(!this.opts.onchange){return}this.opts.onchange(e)});this.handleEditorFocus=(()=>{if(!this.opts.onfocus){return}this.opts.onfocus()});this.handleEditorBlur=(()=>{if(!this.opts.onblur){return}this.opts.onblur()});this.handleBlockerTap=(n=>{n.stopPropagation();n.stopPropagation();if(this.isMobile||!t||!this.opts.val){return}Promise.resolve().then(()=>{return lf.copy(this.opts.val)}).then(()=>e.action("toasts.add",{message:"„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü„ÄÇ"})).catch(()=>{t=false;e.action("toasts.add",{type:"error",message:"„Åî‰ΩøÁî®‰∏≠„ÅÆ„Éñ„É©„Ç¶„Ç∂„Åß„ÅØ„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„ÉºÂá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ"})})})};i.tag2("viron-pug",'<div class="Pug__tabs"> <div class="Pug__tab {\'Pug__tab--selected\': isEditorMode}" onclick="{getClickHandler(\'handleEditorTabTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleEditorTabTap\')}">„Ç®„Éá„Ç£„Çø</div> <div class="Pug__tab {\'Pug__tab--selected\': isPreviewMode}" onclick="{getClickHandler(\'handlePreviewTabTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePreviewTabTap\')}">„Éó„É¨„Éì„É•„Éº</div> </div> <div class="Pug__body"> <div class="Pug__editor" if="{isEditorMode}"> <viron-textarea val="{opts.val}" isdisabled="{opts.isdisabled}" onchange="{handleEditorChange}" onfocus="{handleEditorFocus}" onblur="{handleEditorBlur}"></viron-textarea> </div> <div class="Pug__preview" if="{isPreviewMode}"> <viron-prettyhtml data="{opts.val}"></viron-prettyhtml> </div> </div> <div class="Pug__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"","class=\"Pug {'Pug--disabled': opts.isdisabled, 'Pug--error': opts.haserror}\"",function(e){this.external(dd)});var hd=function(){const e=this.riotx.get();let t=true;this.isMobile=e.getter("layout.isMobile");const n=()=>{const e=this.refs.select.selectedIndex;const t=[];fu(this.opts.options,(n,r)=>{t.push(to({},n,{isSelected:r===e}))});return t};this.handleFormSubmit=(e=>{e.preventDefault();if(!this.opts.onchange){return}if(this.opts.isdisabled){return}this.opts.onchange(n())});this.handleSelectInput=(()=>{if(!this.opts.onchange){return}if(this.opts.isdisabled){return}this.opts.onchange(n())});this.handleSelectChange=(e=>{e.stopPropagation()});this.handleBlockerTap=(n=>{n.stopPropagation();if(this.isMobile||!t){return}const r=qu(this.opts.options||[],{isSelected:true});const i=r&&r.value;if(Mf(i)||kf(i)){return}Promise.resolve().then(()=>{return lf.copy(String(i))}).then(()=>e.action("toasts.add",{message:"„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü„ÄÇ"})).catch(()=>{t=false;e.action("toasts.add",{type:"error",message:"„Åî‰ΩøÁî®‰∏≠„ÅÆ„Éñ„É©„Ç¶„Ç∂„Åß„ÅØ„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„ÉºÂá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ"})})})};i.tag2("viron-select",'<form class="Select__form" onsubmit="{handleFormSubmit}"> <select class="Select__select" ref="select" disabled="{opts.isdisabled}" oninput="{handleSelectInput}" onchange="{handleSelectChange}"> <option class="Select__option" each="{option in opts.options}" selected="{option.isSelected}">{option.label}</option> </select> <viron-icon-arrow-down class="Select__icon" if="{!opts.ispreview}"></viron-icon-arrow-down> </form> <div class="Select__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"","class=\"Select {'Select--disabled': opts.isdisabled, 'Select--preview': opts.ispreview, 'Select--error': opts.iserror} Select--{opts.theme}\"",function(e){this.external(hd)});var vd=function(){const e=this.riotx.get();let t=true;this.isMobile=e.getter("layout.isMobile");this.normalizeValue=(e=>{if(!Ef(e)){return null}return e});this.handleTap=(()=>{if(this.opts.isdisabled){return}this.refs.input.focus()});this.handleFormSubmit=(e=>{e.preventDefault();e.stopPropagation();const t=this.normalizeValue(this.opts.val);const n=this.opts.id;if(this.opts.onchange){this.opts.onchange(t,n)}if(this.opts.onsubmit){this.opts.onsubmit(t,n)}const r=this.refs.input;if(this.refs.input){r.blur()}});this.handleInputChange=(e=>{e.stopPropagation()});this.handleInputInput=(e=>{if(!this.opts.onchange){return}if(this.opts.isdisabled){return}const t=this.normalizeValue(e.target.value);this.opts.onchange(t,this.opts.id)});this.handleInputFocus=(()=>{if(!this.opts.onfocus){return}this.opts.onfocus()});this.handleInputBlur=(()=>{if(!this.opts.onblur){return}this.opts.onblur()});this.handleBlockerTap=(n=>{n.stopPropagation();if(this.isMobile||!t||!this.opts.val){return}Promise.resolve().then(()=>{return lf.copy(this.opts.val)}).then(()=>e.action("toasts.add",{message:"„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü„ÄÇ"})).catch(()=>{t=false;e.action("toasts.add",{type:"error",message:"„Åî‰ΩøÁî®‰∏≠„ÅÆ„Éñ„É©„Ç¶„Ç∂„Åß„ÅØ„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„ÉºÂá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ"})})})};i.tag2("viron-textinput",'<div class="Textinput__label" if="{!!opts.label}">{opts.label}</div> <form class="Textinput__form" ref="form" onsubmit="{handleFormSubmit}"> <input class="Textinput__input" ref="input" type="{opts.type || \'text\'}" riot-value="{normalizeValue(opts.val)}" placeholder="{opts.placeholder}" disabled="{!!opts.isdisabled}" oninput="{handleInputInput}" onsubmit="{handleInputSubmit}" onchange="{handleInputChange}" onfocus="{handleInputFocus}" onblur="{handleInputBlur}"> </form> <div class="Textinput__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"",'class="Textinput {\'Textinput--disabled\': opts.isdisabled, \'Textinput--preview\': opts.ispreview, \'Textinput--error\': opts.iserror} Textinput--{opts.theme}" ref="textinput" onclick="{getClickHandler(\'handleTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleTap\')}"',function(e){this.external(vd)});i.tag2("viron-icon-file-add",'<svg viewbox="2937 22889 57.219 64.002"> <g transform="translate(2863 22751)"> <g transform="translate(-347 -90)"> <g transform="translate(421 228)"> <path d="M6.449,56.554a2.5,2.5,0,0,1-2.5-2.5V6.449a2.5,2.5,0,0,1,2.5-2.482l22.825-.02v8.442a4.476,4.476,0,0,0,4.476,4.476l8.259-.02.041,19.509a13.014,13.014,0,0,1,1.79-.122,15.508,15.508,0,0,1,2.2.163V15.237L30.739,0H6.449A6.451,6.451,0,0,0,0,6.449V54.072a6.451,6.451,0,0,0,6.449,6.449H33.363a14.909,14.909,0,0,1-2.645-3.947H6.449Z"></path> </g> <g transform="translate(169.449 90.915)"> <g transform="translate(282 174.316)"> <path d="M-4190.615-7823.229A13.4,13.4,0,0,1-4204-7836.616,13.4,13.4,0,0,1-4190.615-7850a13.4,13.4,0,0,1,13.385,13.385A13.4,13.4,0,0,1-4190.615-7823.229Zm-6.292-14.64a.4.4,0,0,0-.4.4v1.71a.4.4,0,0,0,.4.4h5.038v5.038a.4.4,0,0,0,.4.4h1.71a.4.4,0,0,0,.4-.4v-5.038h5.038a.4.4,0,0,0,.4-.4v-1.71a.4.4,0,0,0-.4-.4h-5.038v-5.04a.4.4,0,0,0-.4-.4h-1.71a.4.4,0,0,0-.4.4v5.04Z" transform="translate(4204 7850)"></path> </g> </g> </g> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconFileAdd {opts.class}"',function(e){});i.tag2("viron-icon-file-csv",'<svg viewbox="3040.477 22887.934 49.316 60.576"> <path d="M42.872,60.575H9.675a6.454,6.454,0,0,1-6.448-6.447V51.24H2.6a2.6,2.6,0,0,1-2.6-2.6V32.886a2.6,2.6,0,0,1,2.6-2.6h.629V6.448A6.455,6.455,0,0,1,9.675,0H34L49.316,15.259v38.87A6.453,6.453,0,0,1,42.872,60.575ZM7.177,51.239v2.89a2.5,2.5,0,0,0,2.5,2.5h33.2a2.5,2.5,0,0,0,2.495-2.5l-.093-37.306L37,16.846a4.476,4.476,0,0,1-4.471-4.47V3.929L9.675,3.952a2.5,2.5,0,0,0-2.5,2.5v23.84H38.124a2.6,2.6,0,0,1,2.6,2.6V48.641a2.6,2.6,0,0,1-2.6,2.6H7.177Zm10.262-6.831a.6.6,0,0,0-.3.084.521.521,0,0,0-.28.48,1.662,1.662,0,0,0,.248.872,1.247,1.247,0,0,0,.664.553,6.509,6.509,0,0,0,2.256.352c2.749,0,4.144-1.131,4.144-3.361a3.17,3.17,0,0,0-.84-2.272,7.269,7.269,0,0,0-3-1.568c-1-.33-1.5-.884-1.5-1.648a1.3,1.3,0,0,1,.417-1.024,1.788,1.788,0,0,1,1.216-.368,6.72,6.72,0,0,1,2.384.448.691.691,0,0,0,.257.053.646.646,0,0,0,.35-.108.586.586,0,0,0,.288-.52,1.472,1.472,0,0,0-.256-.841,1.168,1.168,0,0,0-.672-.488,8.977,8.977,0,0,0-2.512-.3,4.058,4.058,0,0,0-2.736.849,2.907,2.907,0,0,0-.976,2.3,3.124,3.124,0,0,0,.856,2.208,6.7,6.7,0,0,0,2.776,1.552,3.284,3.284,0,0,1,1.3.728A1.453,1.453,0,0,1,21.9,43.42c0,1.019-.684,1.536-2.032,1.536a5.049,5.049,0,0,1-2.16-.481A.606.606,0,0,0,17.439,44.408Zm-5.713-9.66a5.161,5.161,0,0,0-4.008,1.577,6.368,6.368,0,0,0-1.432,4.424,6.228,6.228,0,0,0,1.48,4.44,5.282,5.282,0,0,0,4.008,1.561,11.7,11.7,0,0,0,2-.144,1.013,1.013,0,0,0,.671-.4,1.237,1.237,0,0,0,.256-.768.659.659,0,0,0-.288-.56.758.758,0,0,0-.449-.15.851.851,0,0,0-.191.023,7.671,7.671,0,0,1-1.76.208,3.134,3.134,0,0,1-2.5-1.1,4.656,4.656,0,0,1-.944-3.1,4.758,4.758,0,0,1,.9-3.1,3.075,3.075,0,0,1,2.488-1.088,7.264,7.264,0,0,1,1.728.193.865.865,0,0,0,.19.022.724.724,0,0,0,.442-.151.665.665,0,0,0,.28-.56,1.194,1.194,0,0,0-.272-.768,1.077,1.077,0,0,0-.688-.4A12.221,12.221,0,0,0,11.726,34.747Zm14.4.16a.857.857,0,0,0-.816,1.136l3.136,9.409a1.556,1.556,0,0,0,.6.823,1.665,1.665,0,0,0,.984.312,1.633,1.633,0,0,0,.976-.312,1.66,1.66,0,0,0,.608-.823l3.136-9.44a.838.838,0,0,0-.112-.76.778.778,0,0,0-.672-.344,1.559,1.559,0,0,0-1.488,1.12L30.062,44.38l-2.416-8.32a1.582,1.582,0,0,0-1.52-1.152Z" transform="translate(3040.477 22887.934)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconFileCSV {opts.class}"',function(e){});var pd=function(){this.inputId=`Uploader__input${this._riot_id}`;this.file=null;this.fileName=null;this.isTypeOfImage=false;this.isTypeOfCsv=false;this.isTypeOfOther=false;this.blobURL=this.opts.initialbloburl||null;this.isDragWatching=false;this.isDroppable=false;this.reset=(()=>{window.URL.revokeObjectURL(this.blobURL);this.refs.form.reset();this.file=null;this.fileName=null;this.isTypeOfImage=false;this.isTypeOfCsv=false;this.isTypeOfOther=false;this.blobURL=this.opts.initialbloburl||null;this.opts.onchange&&this.opts.onchange(this.file,this.blobURL)});this.handleChange=(e=>{e.stopPropagation()});this.handleFileChange=((e,t)=>{if(!this.opts.onchange){return}if(this.opts.isdisabled){return}let n;if(t){n=e.dataTransfer.files}else{n=e.target.files}if(!n.length){this.reset();return}const r=n[0];this.file=r;this.fileName=r.name;if(r.type.indexOf("image/")===0){this.isTypeOfImage=true;this.isTypeOfCsv=false;this.isTypeOfOther=false}else if(r.type.indexOf("text/csv")===0){this.isTypeOfImage=false;this.isTypeOfCsv=true;this.isTypeOfOther=false}else{this.isTypeOfImage=false;this.isTypeOfCsv=false;this.isTypeOfOther=true}this.blobURL=window.URL.createObjectURL(r);this.opts.onchange(this.file,this.blobURL)});this.handleHandlerDragEnter=(e=>{e.preventDefault();if(this.opts.isdisabled){return}this.isDragWatching=true;this.update()});this.handleHandlerDragOver=(e=>{e.preventDefault()});this.handleHandlerDragLeave=(()=>{if(this.opts.isdisabled){return}this.isDragWatching=false;this.update()});this.handleHandlerDrop=(e=>{e.preventDefault();if(this.opts.isdisabled){return}this.isDragWatching=false;this.update();this.handleFileChange(e,true)});this.handleResetButtonTap=(()=>{if(this.opts.isdisabled){return}this.reset()});this.handleBlockerTap=(e=>{e.stopPropagation()})};i.tag2("viron-uploader",'<form class="Uploader__form" ref="form"> <input class="Uploader__input" type="file" id="{inputId}" accept="{opts.accept || \'*\'}" disabled="{opts.isdisabled}" onchange="{handleFileChange}"> <label class="Uploader__label" for="{inputId}"> <virtual if="{!file || !blobURL}"> <div class="Uploader__icon"> <viron-icon-file-add></viron-icon-file-add> </div> </virtual> <virtual if="{!!file &amp;&amp; !!blobURL}"> <virtual if="{isTypeOfImage}"> <div class="Uploader__image" riot-style="background-image:url({blobURL});"></div> </virtual> <virtual if="{isTypeOfCsv}"> <div class="Uploader__icon"> <viron-icon-file-csv></viron-icon-file-csv> </div> </virtual> <virtual if="{isTypeOfOther}"> <div class="Uploader__icon"> <viron-icon-file></viron-icon-file> </div> </virtual> </virtual> <div class="Uploader__dragHandler" ondragenter="{handleHandlerDragEnter}" ondragover="{handleHandlerDragOver}" ondragleave="{handleHandlerDragLeave}" ondrop="{handleHandlerDrop}"></div> </label> </form> <div class="Uploader__reset" if="{!!file}" onclick="{getClickHandler(\'handleResetButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleResetButtonTap\')}"> <viron-icon-close></viron-icon-close> </div> <div class="Uploader__fileName" if="{!!fileName}">{fileName}</div> <div class="Uploader__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"","class=\"Uploader {'Uploader--dragWatching' : isDragWatching, 'Uploader--disabled': opts.isdisabled, 'Uploader--error': opts.haserror}\" onchange=\"{handleChange}\"",function(e){this.external(pd)});var gd=n(function(e){(function(){(function(){"use strict";var t=function(){};var n=function(e){return function(){return e()}};var r=function(e,t){return function(){return e(t.apply(null,arguments))}};var i=function(e){return function(){return e}};var a=function(e){return e};var o=function(e,t){return e===t};var s=function(e){var t=new Array(arguments.length-1);for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}return function(){var n=new Array(arguments.length);for(var r=0;r<n.length;r++){n[r]=arguments[r]}var i=t.concat(n);return e.apply(null,i)}};var u=function(e){return function(){return!e.apply(null,arguments)}};var l=function(e){return function(){throw new Error(e)}};var c=function(e){return e()};var f=function(e){e()};var d=i(false);var h=i(true);var v={noop:t,noarg:n,compose:r,constant:i,identity:a,tripleEquals:o,curry:s,not:u,die:l,apply:c,call:f,never:d,always:h};var p=v.never;var g=v.always;var m=function(){return y};var y=function(){var e=function(e){return e.isNone()};var t=function(e){return e()};var n=function(e){return e};var r=function(){};var i={fold:function(e,t){return e()},is:p,isSome:p,isNone:g,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:n,orThunk:t,map:m,ap:m,each:r,bind:m,flatten:m,exists:p,forall:g,filter:m,equals:e,equals_:e,toArray:function(){return[]},toString:v.constant("none()")};if(Object.freeze){Object.freeze(i)}return i}();var b=function(e){var t=function(){return e};var n=function(){return a};var r=function(t){return b(t(e))};var i=function(t){return t(e)};var a={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:g,isNone:p,getOr:t,getOrThunk:t,getOrDie:t,or:n,orThunk:n,map:r,ap:function(t){return t.fold(m,function(t){return b(t(e))})},each:function(t){t(e)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(e)?a:y},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(p,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return a};var _=function(e){return e===null||e===undefined?y:b(e)};var w={some:b,none:m,from:_};var x=function(){var e=Array.prototype.indexOf;var t=function(t,n){return e.call(t,n)};var n=function(e,t){return j(e,t)};return e===undefined?n:t}();var T=function(e,t){var n=x(e,t);return n===-1?w.none():w.some(n)};var C=function(e,t){return x(e,t)>-1};var k=function(e,t){return B(e,t).isSome()};var S=function(e,t){var n=[];for(var r=0;r<e;r++){n.push(t(r))}return n};var E=function(e,t){var n=[];for(var r=0;r<e.length;r+=t){var i=e.slice(r,r+t);n.push(i)}return n};var P=function(e,t){var n=e.length;var r=new Array(n);for(var i=0;i<n;i++){var a=e[i];r[i]=t(a,i,e)}return r};var O=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];t(i,n,e)}};var M=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];t(r,n,e)}};var A=function(e,t){var n=[];var r=[];for(var i=0,a=e.length;i<a;i++){var o=e[i];var s=t(o,i,e)?n:r;s.push(o)}return{pass:n,fail:r}};var N=function(e,t){var n=[];for(var r=0,i=e.length;r<i;r++){var a=e[r];if(t(a,r,e)){n.push(a)}}return n};var R=function(e,t){if(e.length===0){return[]}else{var n=t(e[0]);var r=[];var i=[];for(var a=0,o=e.length;a<o;a++){var s=e[a];var u=t(s);if(u!==n){r.push(i);i=[]}n=u;i.push(s)}if(i.length!==0){r.push(i)}return r}};var D=function(e,t,n){M(e,function(e){n=t(n,e)});return n};var L=function(e,t,n){O(e,function(e){n=t(n,e)});return n};var I=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e)){return w.some(i)}}return w.none()};var B=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e)){return w.some(n)}}return w.none()};var j=function(e,t){for(var n=0,r=e.length;n<r;++n){if(e[n]===t){return n}}return-1};var F=Array.prototype.push;var H=function(e){var t=[];for(var n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n])){throw new Error("Arr.flatten item "+n+" was not an array, input: "+e)}F.apply(t,e[n])}return t};var z=function(e,t){var n=P(e,t);return H(n)};var U=function(e,t){for(var n=0,r=e.length;n<r;++n){var i=e[n];if(t(i,n,e)!==true){return false}}return true};var V=function(e,t){return e.length===t.length&&U(e,function(e,n){return e===t[n]})};var W=Array.prototype.slice;var q=function(e){var t=W.call(e,0);t.reverse();return t};var Y=function(e,t){return N(e,function(e){return!C(t,e)})};var K=function(e,t){var n={};for(var r=0,i=e.length;r<i;r++){var a=e[r];n[String(a)]=t(a,r)}return n};var $=function(e){return[e]};var G=function(e,t){var n=W.call(e,0);n.sort(t);return n};var X=function(e){return e.length===0?w.none():w.some(e[0])};var Z=function(e){return e.length===0?w.none():w.some(e[e.length-1])};var J={map:P,each:O,eachr:M,partition:A,filter:N,groupBy:R,indexOf:T,foldr:D,foldl:L,find:I,findIndex:B,flatten:H,bind:z,forall:U,exists:k,contains:C,equal:V,reverse:q,chunk:E,difference:Y,mapToObject:K,pure:$,sort:G,range:S,head:X,last:Z};var Q=typeof window!=="undefined"?window:Function("return this;")();var ee=function(e,t){var n=t!==undefined&&t!==null?t:Q;for(var r=0;r<e.length&&n!==undefined&&n!==null;++r){n=n[e[r]]}return n};var te=function(e,t){var n=e.split(".");return ee(n,t)};var ne=function(e,t){if(e[t]===undefined||e[t]===null){e[t]={}}return e[t]};var re=function(e,t){var n=t!==undefined?t:Q;for(var r=0;r<e.length;++r){n=ne(n,e[r])}return n};var ie=function(e,t){var n=e.split(".");return re(n,t)};var ae={path:ee,resolve:te,forge:re,namespace:ie};var oe=function(e,t){return ae.resolve(e,t)};var se=function(e,t){var n=oe(e,t);if(n===undefined||n===null){throw e+" not available on this browser"}return n};var ue={getOrDie:se};var le=function(){return ue.getOrDie("URL")};var ce=function(e){return le().createObjectURL(e)};var fe=function(e){le().revokeObjectURL(e)};var de={createObjectURL:ce,revokeObjectURL:fe};var he=navigator;var ve=he.userAgent;var pe;var ge;var me;var ye;var be;var _e;var we;var xe;var Te;var Ce;var ke;var Se;var Ee;var Pe=function(e){return"matchMedia"in window?matchMedia(e).matches:false};pe=false;Te=/Android/.test(ve);ge=/WebKit/.test(ve);me=!ge&&!pe&&/MSIE/gi.test(ve)&&/Explorer/gi.test(he.appName);me=me&&/MSIE (\w+)\./.exec(ve)[1];ye=ve.indexOf("Trident/")!==-1&&(ve.indexOf("rv:")!==-1||he.appName.indexOf("Netscape")!==-1)?11:false;be=ve.indexOf("Edge/")!==-1&&!me&&!ye?12:false;me=me||ye||be;_e=!ge&&!ye&&/Gecko/.test(ve);we=ve.indexOf("Mac")!==-1;xe=/(iPad|iPhone)/.test(ve);Ce="FormData"in window&&"FileReader"in window&&"URL"in window&&!!de.createObjectURL;ke=Pe("only screen and (max-device-width: 480px)")&&(Te||xe);Se=Pe("only screen and (min-width: 800px)")&&(Te||xe);Ee=ve.indexOf("Windows Phone")!==-1;if(be){ge=false}var Oe=!xe||Ce||parseInt(ve.match(/AppleWebKit\/(\d*)/)[1],10)>=534;var Me={opera:pe,webkit:ge,ie:me,gecko:_e,mac:we,iOS:xe,android:Te,contentEditable:Oe,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:me!==8,range:window.getSelection&&"Range"in window,documentMode:me&&!be?document.documentMode||7:10,fileApi:Ce,ceFalse:me===false||me>8,cacheSuffix:"",container:null,overrideViewPort:null,experimentalShadowDom:false,canHaveCSP:me===false||me>11,desktop:!ke&&!Se,windowsPhone:Ee};var Ae=function(){function e(e,t){return function(){e.apply(t,arguments)}}var t=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var n=function(t){if(typeof this!=="object"){throw new TypeError("Promises must be constructed via new")}if(typeof t!=="function"){throw new TypeError("not a function")}this._state=null;this._value=null;this._deferreds=[];l(t,e(a,this),e(o,this))};var r=n.immediateFn||typeof setImmediate==="function"&&setImmediate||function(e){setTimeout(e,1)};function i(e){var t=this;if(this._state===null){this._deferreds.push(e);return}r(function(){var n=t._state?e.onFulfilled:e.onRejected;if(n===null){(t._state?e.resolve:e.reject)(t._value);return}var r;try{r=n(t._value)}catch(t){e.reject(t);return}e.resolve(r)})}function a(t){try{if(t===this){throw new TypeError("A promise cannot be resolved with itself.")}if(t&&(typeof t==="object"||typeof t==="function")){var n=t.then;if(typeof n==="function"){l(e(n,t),e(a,this),e(o,this));return}}this._state=true;this._value=t;s.call(this)}catch(e){o.call(this,e)}}function o(e){this._state=false;this._value=e;s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++){i.call(this,this._deferreds[e])}this._deferreds=null}function u(e,t,n,r){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.resolve=n;this.reject=r}function l(e,t,n){var r=false;try{e(function(e){if(r){return}r=true;t(e)},function(e){if(r){return}r=true;n(e)})}catch(e){if(r){return}r=true;n(e)}}n.prototype.catch=function(e){return this.then(null,e)};n.prototype.then=function(e,t){var r=this;return new n(function(n,a){i.call(r,new u(e,t,n,a))})};n.all=function(){var e=Array.prototype.slice.call(arguments.length===1&&t(arguments[0])?arguments[0]:arguments);return new n(function(t,n){if(e.length===0){return t([])}var r=e.length;function i(a,o){try{if(o&&(typeof o==="object"||typeof o==="function")){var s=o.then;if(typeof s==="function"){s.call(o,function(e){i(a,e)},n);return}}e[a]=o;if(--r===0){t(e)}}catch(e){n(e)}}for(var a=0;a<e.length;a++){i(a,e[a])}})};n.resolve=function(e){if(e&&typeof e==="object"&&e.constructor===n){return e}return new n(function(t){t(e)})};n.reject=function(e){return new n(function(t,n){n(e)})};n.race=function(e){return new n(function(t,n){for(var r=0,i=e.length;r<i;r++){e[r].then(t,n)}})};return n};var Ne=window.Promise?window.Promise:Ae();var Re;var De=function(e,t){var n,r=window.requestAnimationFrame;var i=["ms","moz","webkit"];var a=function(e){window.setTimeout(e,0)};for(n=0;n<i.length&&!r;n++){r=window[i[n]+"RequestAnimationFrame"]}if(!r){r=a}r(e,t)};var Le=function(e,t){if(typeof t!=="number"){t=0}return setTimeout(e,t)};var Ie=function(e,t){if(typeof t!=="number"){t=1}return setInterval(e,t)};var Be=function(e){return clearTimeout(e)};var je=function(e){return clearInterval(e)};var Fe=function(e,t){var n,r;r=function(){var r=arguments;clearTimeout(n);n=Le(function(){e.apply(this,r)},t)};r.stop=function(){clearTimeout(n)};return r};var He={requestAnimationFrame:function(e,t){if(Re){Re.then(e);return}Re=new Ne(function(e){if(!t){t=document.body}De(e,t)}).then(e)},setTimeout:Le,setInterval:Ie,setEditorTimeout:function(e,t,n){return Le(function(){if(!e.removed){t()}},n)},setEditorInterval:function(e,t,n){var r;r=Ie(function(){if(!e.removed){t()}else{clearInterval(r)}},n);return r},debounce:Fe,throttle:Fe,clearInterval:je,clearTimeout:Be};var ze="mce-data-";var Ue=/^(?:mouse|contextmenu)|click/;var Ve={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1};var We=function(e){return e.isDefaultPrevented===Ye||e.isDefaultPrevented===qe};var qe=function(){return false};var Ye=function(){return true};var Ke=function(e,t,n,r){if(e.addEventListener){e.addEventListener(t,n,r||false)}else if(e.attachEvent){e.attachEvent("on"+t,n)}};var $e=function(e,t,n,r){if(e.removeEventListener){e.removeEventListener(t,n,r||false)}else if(e.detachEvent){e.detachEvent("on"+t,n)}};var Ge=function(e,t){var n,r=t;n=e.path;if(n&&n.length>0){r=n[0]}if(e.composedPath){n=e.composedPath();if(n&&n.length>0){r=n[0]}}return r};var Xe=function(e,t){var n;var r=t||{};for(n in e){if(!Ve[n]){r[n]=e[n]}}if(!r.target){r.target=r.srcElement||document}if(Me.experimentalShadowDom){r.target=Ge(e,r.target)}if(e&&Ue.test(e.type)&&e.pageX===undefined&&e.clientX!==undefined){var i=r.target.ownerDocument||document;var a=i.documentElement;var o=i.body;r.pageX=e.clientX+(a&&a.scrollLeft||o&&o.scrollLeft||0)-(a&&a.clientLeft||o&&o.clientLeft||0);r.pageY=e.clientY+(a&&a.scrollTop||o&&o.scrollTop||0)-(a&&a.clientTop||o&&o.clientTop||0)}r.preventDefault=function(){r.isDefaultPrevented=Ye;if(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}}};r.stopPropagation=function(){r.isPropagationStopped=Ye;if(e){if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}}};r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=Ye;r.stopPropagation()};if(We(r)===false){r.isDefaultPrevented=qe;r.isPropagationStopped=qe;r.isImmediatePropagationStopped=qe}if(typeof r.metaKey==="undefined"){r.metaKey=false}return r};var Ze=function(e,t,n){var r=e.document,i={type:"ready"};if(n.domLoaded){t(i);return}var a=function(){return r.readyState==="complete"||r.readyState==="interactive"&&r.body};var o=function(){if(!n.domLoaded){n.domLoaded=true;t(i)}};var s=function(){if(a()){$e(r,"readystatechange",s);o()}};var u=function(){try{r.documentElement.doScroll("left")}catch(e){He.setTimeout(u);return}o()};if(r.addEventListener&&!(Me.ie&&Me.ie<11)){if(a()){o()}else{Ke(e,"DOMContentLoaded",o)}}else{Ke(r,"readystatechange",s);if(r.documentElement.doScroll&&e.self===e.top){u()}}Ke(e,"load",o)};var Je=function(){var e=this;var t={},n,r,i,a,o;r=ze+(+new Date).toString(32);a="onmouseenter"in document.documentElement;i="onfocusin"in document.documentElement;o={mouseenter:"mouseover",mouseleave:"mouseout"};n=1;e.domLoaded=false;e.events=t;var s=function(e,n){var r,i,a,o;var s=t[n];r=s&&s[e.type];if(r){for(i=0,a=r.length;i<a;i++){o=r[i];if(o&&o.func.call(o.scope,e)===false){e.preventDefault()}if(e.isImmediatePropagationStopped()){return}}}};e.bind=function(u,l,c,f){var d,h,v,p,g,m,y;var b=window;var _=function(e){s(Xe(e||b.event),d)};if(!u||u.nodeType===3||u.nodeType===8){return}if(!u[r]){d=n++;u[r]=d;t[d]={}}else{d=u[r]}f=f||u;l=l.split(" ");v=l.length;while(v--){p=l[v];m=_;g=y=false;if(p==="DOMContentLoaded"){p="ready"}if(e.domLoaded&&p==="ready"&&u.readyState==="complete"){c.call(f,Xe({type:p}));continue}if(!a){g=o[p];if(g){m=function(e){var t,n;t=e.currentTarget;n=e.relatedTarget;if(n&&t.contains){n=t.contains(n)}else{while(n&&n!==t){n=n.parentNode}}if(!n){e=Xe(e||b.event);e.type=e.type==="mouseout"?"mouseleave":"mouseenter";e.target=t;s(e,d)}}}}if(!i&&(p==="focusin"||p==="focusout")){y=true;g=p==="focusin"?"focus":"blur";m=function(e){e=Xe(e||b.event);e.type=e.type==="focus"?"focusin":"focusout";s(e,d)}}h=t[d][p];if(!h){t[d][p]=h=[{func:c,scope:f}];h.fakeName=g;h.capture=y;h.nativeHandler=m;if(p==="ready"){Ze(u,m,e)}else{Ke(u,g||p,m,y)}}else{if(p==="ready"&&e.domLoaded){c({type:p})}else{h.push({func:c,scope:f})}}}u=h=0;return c};e.unbind=function(n,i,a){var o,s,u,l,c,f;if(!n||n.nodeType===3||n.nodeType===8){return e}o=n[r];if(o){f=t[o];if(i){i=i.split(" ");u=i.length;while(u--){c=i[u];s=f[c];if(s){if(a){l=s.length;while(l--){if(s[l].func===a){var d=s.nativeHandler;var h=s.fakeName,v=s.capture;s=s.slice(0,l).concat(s.slice(l+1));s.nativeHandler=d;s.fakeName=h;s.capture=v;f[c]=s}}}if(!a||s.length===0){delete f[c];$e(n,s.fakeName||c,s.nativeHandler,s.capture)}}}}else{for(c in f){s=f[c];$e(n,s.fakeName||c,s.nativeHandler,s.capture)}f={}}for(c in f){return e}delete t[o];try{delete n[r]}catch(e){n[r]=null}}return e};e.fire=function(t,n,i){var a;if(!t||t.nodeType===3||t.nodeType===8){return e}i=Xe(null,i);i.type=n;i.target=t;do{a=t[r];if(a){s(i,a)}t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!i.isPropagationStopped());return e};e.clean=function(t){var n,i;var a=e.unbind;if(!t||t.nodeType===3||t.nodeType===8){return e}if(t[r]){a(t)}if(!t.getElementsByTagName){t=t.document}if(t&&t.getElementsByTagName){a(t);i=t.getElementsByTagName("*");n=i.length;while(n--){t=i[n];if(t[r]){a(t)}}}return e};e.destroy=function(){t={}};e.cancel=function(e){if(e){e.preventDefault();e.stopImmediatePropagation()}return false}};Je.Event=new Je;Je.Event.bind(window,"ready",function(){});var Qe;var et;var tt;var nt;var rt;var it;var at;var ot;var st;var ut;var lt;var ct;var ft;var dt;var ht;var vt;var pt;var gt;var mt;var yt="sizzle"+-new Date;var bt=window.document;var _t=0;var wt=0;var xt=nn();var Tt=nn();var Ct=nn();var kt=function(e,t){if(e===t){lt=true}return 0};var St=typeof undefined;var Et=1<<31;var Pt={}.hasOwnProperty;var Ot=[];var Mt=Ot.pop;var At=Ot.push;var Nt=Ot.push;var Rt=Ot.slice;var Dt=Ot.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++){if(this[t]===e){return t}}return-1};var Lt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped";var It="[\\x20\\t\\r\\n\\f]";var Bt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+";var jt="\\["+It+"*("+Bt+")(?:"+It+"*([*^$|!~]?=)"+It+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Bt+"))|)"+It+"*\\]";var Ft=":("+Bt+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+jt+")*)|"+".*"+")\\)|)";var Ht=new RegExp("^"+It+"+|((?:^|[^\\\\])(?:\\\\.)*)"+It+"+$","g");var zt=new RegExp("^"+It+"*,"+It+"*");var Ut=new RegExp("^"+It+"*([>+~]|"+It+")"+It+"*");var Vt=new RegExp("="+It+"*([^\\]'\"]*?)"+It+"*\\]","g");var Wt=new RegExp(Ft);var qt=new RegExp("^"+Bt+"$");var Yt={ID:new RegExp("^#("+Bt+")"),CLASS:new RegExp("^\\.("+Bt+")"),TAG:new RegExp("^("+Bt+"|[*])"),ATTR:new RegExp("^"+jt),PSEUDO:new RegExp("^"+Ft),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+It+"*(even|odd|(([+-]|)(\\d*)n|)"+It+"*(?:([+-]|)"+It+"*(\\d+)|))"+It+"*\\)|)","i"),bool:new RegExp("^(?:"+Lt+")$","i"),needsContext:new RegExp("^"+It+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+It+"*((?:-\\d)?\\d*)"+It+"*\\)|)(?=[^-]|$)","i")};var Kt=/^(?:input|select|textarea|button)$/i;var $t=/^h\d$/i;var Gt=/^[^{]+\{\s*\[native \w/;var Xt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/;var Zt=/[+~]/;var Jt=/'|\\/g;var Qt=new RegExp("\\\\([\\da-f]{1,6}"+It+"?|("+It+")|.)","ig");var en=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)};try{Nt.apply(Ot=Rt.call(bt.childNodes),bt.childNodes);Ot[bt.childNodes.length].nodeType}catch(e){Nt={apply:Ot.length?function(e,t){At.apply(e,Rt.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]){}e.length=n-1}}}var tn=function(e,t,n,r){var i,a,o,s,u,l,c,f,d,h;if((t?t.ownerDocument||t:bt)!==ft){ct(t)}t=t||ft;n=n||[];if(!e||typeof e!=="string"){return n}if((s=t.nodeType)!==1&&s!==9){return[]}if(ht&&!r){if(i=Xt.exec(e)){if(o=i[1]){if(s===9){a=t.getElementById(o);if(a&&a.parentNode){if(a.id===o){n.push(a);return n}}else{return n}}else{if(t.ownerDocument&&(a=t.ownerDocument.getElementById(o))&&mt(t,a)&&a.id===o){n.push(a);return n}}}else if(i[2]){Nt.apply(n,t.getElementsByTagName(e));return n}else if((o=i[3])&&et.getElementsByClassName){Nt.apply(n,t.getElementsByClassName(o));return n}}if(et.qsa&&(!vt||!vt.test(e))){f=c=yt;d=t;h=s===9&&e;if(s===1&&t.nodeName.toLowerCase()!=="object"){l=it(e);if(c=t.getAttribute("id")){f=c.replace(Jt,"\\$&")}else{t.setAttribute("id",f)}f="[id='"+f+"'] ";u=l.length;while(u--){l[u]=f+fn(l[u])}d=Zt.test(e)&&ln(t.parentNode)||t;h=l.join(",")}if(h){try{Nt.apply(n,d.querySelectorAll(h));return n}catch(e){}finally{if(!c){t.removeAttribute("id")}}}}}return ot(e.replace(Ht,"$1"),t,n,r)};function nn(){var e=[];function t(n,r){if(e.push(n+" ")>tt.cacheLength){delete t[e.shift()]}return t[n+" "]=r}return t}function rn(e){e[yt]=true;return e}function an(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||Et)-(~e.sourceIndex||Et);if(r){return r}if(n){while(n=n.nextSibling){if(n===t){return-1}}}return e?1:-1}function on(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function sn(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function un(e){return rn(function(t){t=+t;return rn(function(n,r){var i,a=e([],n.length,t),o=a.length;while(o--){if(n[i=a[o]]){n[i]=!(r[i]=n[i])}}})})}function ln(e){return e&&typeof e.getElementsByTagName!==St&&e}et=tn.support={};rt=tn.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":false};ct=tn.setDocument=function(e){var t,n=e?e.ownerDocument||e:bt,r=n.defaultView;function i(e){try{return e.top}catch(e){}return null}if(n===ft||n.nodeType!==9||!n.documentElement){return ft}ft=n;dt=n.documentElement;ht=!rt(n);if(r&&r!==i(r)){if(r.addEventListener){r.addEventListener("unload",function(){ct()},false)}else if(r.attachEvent){r.attachEvent("onunload",function(){ct()})}}et.attributes=true;et.getElementsByTagName=true;et.getElementsByClassName=Gt.test(n.getElementsByClassName);et.getById=true;tt.find.ID=function(e,t){if(typeof t.getElementById!==St&&ht){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}};tt.filter.ID=function(e){var t=e.replace(Qt,en);return function(e){return e.getAttribute("id")===t}};tt.find.TAG=et.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==St){return t.getElementsByTagName(e)}}:function(e,t){var n,r=[],i=0,a=t.getElementsByTagName(e);if(e==="*"){while(n=a[i++]){if(n.nodeType===1){r.push(n)}}return r}return a};tt.find.CLASS=et.getElementsByClassName&&function(e,t){if(ht){return t.getElementsByClassName(e)}};pt=[];vt=[];et.disconnectedMatch=true;vt=vt.length&&new RegExp(vt.join("|"));pt=pt.length&&new RegExp(pt.join("|"));t=Gt.test(dt.compareDocumentPosition);mt=t||Gt.test(dt.contains)?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return true}}}return false};kt=t?function(e,t){if(e===t){lt=true;return 0}var r=!e.compareDocumentPosition-!t.compareDocumentPosition;if(r){return r}r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1;if(r&1||!et.sortDetached&&t.compareDocumentPosition(e)===r){if(e===n||e.ownerDocument===bt&&mt(bt,e)){return-1}if(t===n||t.ownerDocument===bt&&mt(bt,t)){return 1}return ut?Dt.call(ut,e)-Dt.call(ut,t):0}return r&4?-1:1}:function(e,t){if(e===t){lt=true;return 0}var r,i=0,a=e.parentNode,o=t.parentNode,s=[e],u=[t];if(!a||!o){return e===n?-1:t===n?1:a?-1:o?1:ut?Dt.call(ut,e)-Dt.call(ut,t):0}else if(a===o){return an(e,t)}r=e;while(r=r.parentNode){s.unshift(r)}r=t;while(r=r.parentNode){u.unshift(r)}while(s[i]===u[i]){i++}return i?an(s[i],u[i]):s[i]===bt?-1:u[i]===bt?1:0};return n};tn.matches=function(e,t){return tn(e,null,null,t)};tn.matchesSelector=function(e,t){if((e.ownerDocument||e)!==ft){ct(e)}t=t.replace(Vt,"='$1']");if(et.matchesSelector&&ht&&(!pt||!pt.test(t))&&(!vt||!vt.test(t))){try{var n=gt.call(e,t);if(n||et.disconnectedMatch||e.document&&e.document.nodeType!==11){return n}}catch(e){}}return tn(t,ft,null,[e]).length>0};tn.contains=function(e,t){if((e.ownerDocument||e)!==ft){ct(e)}return mt(e,t)};tn.attr=function(e,t){if((e.ownerDocument||e)!==ft){ct(e)}var n=tt.attrHandle[t.toLowerCase()],r=n&&Pt.call(tt.attrHandle,t.toLowerCase())?n(e,t,!ht):undefined;return r!==undefined?r:et.attributes||!ht?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null};tn.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};tn.uniqueSort=function(e){var t,n=[],r=0,i=0;lt=!et.detectDuplicates;ut=!et.sortStable&&e.slice(0);e.sort(kt);if(lt){while(t=e[i++]){if(t===e[i]){r=n.push(i)}}while(r--){e.splice(n[r],1)}}ut=null;return e};nt=tn.getText=function(e){var t,n="",r=0,i=e.nodeType;if(!i){while(t=e[r++]){n+=nt(t)}}else if(i===1||i===9||i===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){n+=nt(e)}}}else if(i===3||i===4){return e.nodeValue}return n};tt=tn.selectors={cacheLength:50,createPseudo:rn,match:Yt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(Qt,en);e[3]=(e[3]||e[4]||e[5]||"").replace(Qt,en);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){tn.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+(e[7]+e[8]||e[3]==="odd")}else if(e[3]){tn.error(e[0])}return e},PSEUDO:function(e){var t,n=!e[6]&&e[2];if(Yt.CHILD.test(e[0])){return null}if(e[3]){e[2]=e[4]||e[5]||""}else if(n&&Wt.test(n)&&(t=it(n,true))&&(t=n.indexOf(")",n.length-t)-n.length)){e[0]=e[0].slice(0,t);e[2]=n.slice(0,t)}return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(Qt,en).toLowerCase();return e==="*"?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=xt[e+" "];return t||(t=new RegExp("(^|"+It+")"+e+"("+It+"|$)"))&&xt(e,function(e){return t.test(typeof e.className==="string"&&e.className||typeof e.getAttribute!==St&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=tn.attr(r,e);if(i==null){return t==="!="}if(!t){return true}i+="";return t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":false}},CHILD:function(e,t,n,r,i){var a=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",s=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,d,h,v,p=a!==o?"nextSibling":"previousSibling",g=t.parentNode,m=s&&t.nodeName.toLowerCase(),y=!u&&!s;if(g){if(a){while(p){f=t;while(f=f[p]){if(s?f.nodeName.toLowerCase()===m:f.nodeType===1){return false}}v=p=e==="only"&&!v&&"nextSibling"}return true}v=[o?g.firstChild:g.lastChild];if(o&&y){c=g[yt]||(g[yt]={});l=c[e]||[];h=l[0]===_t&&l[1];d=l[0]===_t&&l[2];f=h&&g.childNodes[h];while(f=++h&&f&&f[p]||(d=h=0)||v.pop()){if(f.nodeType===1&&++d&&f===t){c[e]=[_t,h,d];break}}}else if(y&&(l=(t[yt]||(t[yt]={}))[e])&&l[0]===_t){d=l[1]}else{while(f=++h&&f&&f[p]||(d=h=0)||v.pop()){if((s?f.nodeName.toLowerCase()===m:f.nodeType===1)&&++d){if(y){(f[yt]||(f[yt]={}))[e]=[_t,d]}if(f===t){break}}}}d-=i;return d===r||d%r===0&&d/r>=0}}},PSEUDO:function(e,t){var n,r=tt.pseudos[e]||tt.setFilters[e.toLowerCase()]||tn.error("unsupported pseudo: "+e);if(r[yt]){return r(t)}if(r.length>1){n=[e,e,"",t];return tt.setFilters.hasOwnProperty(e.toLowerCase())?rn(function(e,n){var i,a=r(e,t),o=a.length;while(o--){i=Dt.call(e,a[o]);e[i]=!(n[i]=a[o])}}):function(e){return r(e,0,n)}}return r}},pseudos:{not:rn(function(e){var t=[],n=[],r=at(e.replace(Ht,"$1"));return r[yt]?rn(function(e,t,n,i){var a,o=r(e,null,i,[]),s=e.length;while(s--){if(a=o[s]){e[s]=!(t[s]=a)}}}):function(e,i,a){t[0]=e;r(t,null,a,n);return!n.pop()}}),has:rn(function(e){return function(t){return tn(e,t).length>0}}),contains:rn(function(e){e=e.replace(Qt,en);return function(t){return(t.textContent||t.innerText||nt(t)).indexOf(e)>-1}}),lang:rn(function(e){if(!qt.test(e||"")){tn.error("unsupported lang: "+e)}e=e.replace(Qt,en).toLowerCase();return function(t){var n;do{if(n=ht?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang")){n=n.toLowerCase();return n===e||n.indexOf(e+"-")===0}}while((t=t.parentNode)&&t.nodeType===1);return false}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===dt},focus:function(e){return e===ft.activeElement&&(!ft.hasFocus||ft.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return!tt.pseudos.empty(e)},header:function(e){return $t.test(e.nodeName)},input:function(e){return Kt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:un(function(){return[0]}),last:un(function(e,t){return[t-1]}),eq:un(function(e,t,n){return[n<0?n+t:n]}),even:un(function(e,t){var n=0;for(;n<t;n+=2){e.push(n)}return e}),odd:un(function(e,t){var n=1;for(;n<t;n+=2){e.push(n)}return e}),lt:un(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;){e.push(r)}return e}),gt:un(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;){e.push(r)}return e})}};tt.pseudos.nth=tt.pseudos.eq;for(Qe in{radio:true,checkbox:true,file:true,password:true,image:true}){tt.pseudos[Qe]=on(Qe)}for(Qe in{submit:true,reset:true}){tt.pseudos[Qe]=sn(Qe)}function cn(){}cn.prototype=tt.filters=tt.pseudos;tt.setFilters=new cn;it=tn.tokenize=function(e,t){var n,r,i,a,o,s,u,l=Tt[e+" "];if(l){return t?0:l.slice(0)}o=e;s=[];u=tt.preFilter;while(o){if(!n||(r=zt.exec(o))){if(r){o=o.slice(r[0].length)||o}s.push(i=[])}n=false;if(r=Ut.exec(o)){n=r.shift();i.push({value:n,type:r[0].replace(Ht," ")});o=o.slice(n.length)}for(a in tt.filter){if((r=Yt[a].exec(o))&&(!u[a]||(r=u[a](r)))){n=r.shift();i.push({value:n,type:a,matches:r});o=o.slice(n.length)}}if(!n){break}}return t?o.length:o?tn.error(e):Tt(e,s).slice(0)};function fn(e){var t=0,n=e.length,r="";for(;t<n;t++){r+=e[t].value}return r}function dn(e,t,n){var r=t.dir,i=n&&r==="parentNode",a=wt++;return t.first?function(t,n,a){while(t=t[r]){if(t.nodeType===1||i){return e(t,n,a)}}}:function(t,n,o){var s,u,l=[_t,a];if(o){while(t=t[r]){if(t.nodeType===1||i){if(e(t,n,o)){return true}}}}else{while(t=t[r]){if(t.nodeType===1||i){u=t[yt]||(t[yt]={});if((s=u[r])&&s[0]===_t&&s[1]===a){return l[2]=s[2]}else{u[r]=l;if(l[2]=e(t,n,o)){return true}}}}}}}function hn(e){return e.length>1?function(t,n,r){var i=e.length;while(i--){if(!e[i](t,n,r)){return false}}return true}:e[0]}function vn(e,t,n){var r=0,i=t.length;for(;r<i;r++){tn(e,t[r],n)}return n}function pn(e,t,n,r,i){var a,o=[],s=0,u=e.length,l=t!=null;for(;s<u;s++){if(a=e[s]){if(!n||n(a,r,i)){o.push(a);if(l){t.push(s)}}}}return o}function gn(e,t,n,r,i,a){if(r&&!r[yt]){r=gn(r)}if(i&&!i[yt]){i=gn(i,a)}return rn(function(a,o,s,u){var l,c,f,d=[],h=[],v=o.length,p=a||vn(t||"*",s.nodeType?[s]:s,[]),g=e&&(a||!t)?pn(p,d,e,s,u):p,m=n?i||(a?e:v||r)?[]:o:g;if(n){n(g,m,s,u)}if(r){l=pn(m,h);r(l,[],s,u);c=l.length;while(c--){if(f=l[c]){m[h[c]]=!(g[h[c]]=f)}}}if(a){if(i||e){if(i){l=[];c=m.length;while(c--){if(f=m[c]){l.push(g[c]=f)}}i(null,m=[],l,u)}c=m.length;while(c--){if((f=m[c])&&(l=i?Dt.call(a,f):d[c])>-1){a[l]=!(o[l]=f)}}}}else{m=pn(m===o?m.splice(v,m.length):m);if(i){i(null,o,m,u)}else{Nt.apply(o,m)}}})}function mn(e){var t,n,r,i=e.length,a=tt.relative[e[0].type],o=a||tt.relative[" "],s=a?1:0,u=dn(function(e){return e===t},o,true),l=dn(function(e){return Dt.call(t,e)>-1},o,true),c=[function(e,n,r){return!a&&(r||n!==st)||((t=n).nodeType?u(e,n,r):l(e,n,r))}];for(;s<i;s++){if(n=tt.relative[e[s].type]){c=[dn(hn(c),n)]}else{n=tt.filter[e[s].type].apply(null,e[s].matches);if(n[yt]){r=++s;for(;r<i;r++){if(tt.relative[e[r].type]){break}}return gn(s>1&&hn(c),s>1&&fn(e.slice(0,s-1).concat({value:e[s-2].type===" "?"*":""})).replace(Ht,"$1"),n,s<r&&mn(e.slice(s,r)),r<i&&mn(e=e.slice(r)),r<i&&fn(e))}c.push(n)}}return hn(c)}function yn(e,t){var n=t.length>0,r=e.length>0,i=function(i,a,o,s,u){var l,c,f,d=0,h="0",v=i&&[],p=[],g=st,m=i||r&&tt.find.TAG("*",u),y=_t+=g==null?1:Math.random()||.1,b=m.length;if(u){st=a!==ft&&a}for(;h!==b&&(l=m[h])!=null;h++){if(r&&l){c=0;while(f=e[c++]){if(f(l,a,o)){s.push(l);break}}if(u){_t=y}}if(n){if(l=!f&&l){d--}if(i){v.push(l)}}}d+=h;if(n&&h!==d){c=0;while(f=t[c++]){f(v,p,a,o)}if(i){if(d>0){while(h--){if(!(v[h]||p[h])){p[h]=Mt.call(s)}}}p=pn(p)}Nt.apply(s,p);if(u&&!i&&p.length>0&&d+t.length>1){tn.uniqueSort(s)}}if(u){_t=y;st=g}return v};return n?rn(i):i}at=tn.compile=function(e,t){var n,r=[],i=[],a=Ct[e+" "];if(!a){if(!t){t=it(e)}n=t.length;while(n--){a=mn(t[n]);if(a[yt]){r.push(a)}else{i.push(a)}}a=Ct(e,yn(i,r));a.selector=e}return a};ot=tn.select=function(e,t,n,r){var i,a,o,s,u,l=typeof e==="function"&&e,c=!r&&it(e=l.selector||e);n=n||[];if(c.length===1){a=c[0]=c[0].slice(0);if(a.length>2&&(o=a[0]).type==="ID"&&et.getById&&t.nodeType===9&&ht&&tt.relative[a[1].type]){t=(tt.find.ID(o.matches[0].replace(Qt,en),t)||[])[0];if(!t){return n}else if(l){t=t.parentNode}e=e.slice(a.shift().value.length)}i=Yt.needsContext.test(e)?0:a.length;while(i--){o=a[i];if(tt.relative[s=o.type]){break}if(u=tt.find[s]){if(r=u(o.matches[0].replace(Qt,en),Zt.test(a[0].type)&&ln(t.parentNode)||t)){a.splice(i,1);e=r.length&&fn(a);if(!e){Nt.apply(n,r);return n}break}}}}(l||at(e,c))(r,t,!ht,n,Zt.test(e)&&ln(t.parentNode)||t);return n};et.sortStable=yt.split("").sort(kt).join("")===yt;et.detectDuplicates=!!lt;ct();et.sortDetached=true;var bn=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var _n=function(e){var t=e,n,r;if(!bn(e)){t=[];for(n=0,r=e.length;n<r;n++){t[n]=e[n]}}return t};var wn=function(e,t,n){var r,i;if(!e){return 0}n=n||e;if(e.length!==undefined){for(r=0,i=e.length;r<i;r++){if(t.call(n,e[r],r,e)===false){return 0}}}else{for(r in e){if(e.hasOwnProperty(r)){if(t.call(n,e[r],r,e)===false){return 0}}}}return 1};var xn=function(e,t){var n=[];wn(e,function(r,i){n.push(t(r,i,e))});return n};var Tn=function(e,t){var n=[];wn(e,function(r,i){if(!t||t(r,i,e)){n.push(r)}});return n};var Cn=function(e,t){var n,r;if(e){for(n=0,r=e.length;n<r;n++){if(e[n]===t){return n}}}return-1};var kn=function(e,t,n,r){var i=0;if(arguments.length<3){n=e[0]}for(;i<e.length;i++){n=t.call(r,n,e[i],i)}return n};var Sn=function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++){if(t.call(n,e[r],r,e)){return r}}return-1};var En=function(e,t,n){var r=Sn(e,t,n);if(r!==-1){return e[r]}return undefined};var Pn=function(e){return e[e.length-1]};var On={isArray:bn,toArray:_n,each:wn,map:xn,filter:Tn,indexOf:Cn,reduce:kn,findIndex:Sn,find:En,last:Pn};var Mn=/^\s*|\s*$/g;var An=function(e){return e===null||e===undefined?"":(""+e).replace(Mn,"")};var Nn=function(e,t){if(!t){return e!==undefined}if(t==="array"&&On.isArray(e)){return true}return typeof e===t};var Rn=function(e,t,n){var r;e=e||[];t=t||",";if(typeof e==="string"){e=e.split(t)}n=n||{};r=e.length;while(r--){n[e[r]]={}}return n};var Dn=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var Ln=function(e,t,n){var r=this;var i,a,o,s,u,l=0;e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e);o=e[3].match(/(^|\.)(\w+)$/i)[2];a=r.createNS(e[3].replace(/\.\w+$/,""),n);if(a[o]){return}if(e[2]==="static"){a[o]=t;if(this.onCreate){this.onCreate(e[2],e[3],a[o])}return}if(!t[o]){t[o]=function(){};l=1}a[o]=t[o];r.extend(a[o].prototype,t);if(e[5]){i=r.resolve(e[5]).prototype;s=e[5].match(/\.(\w+)$/i)[1];u=a[o];if(l){a[o]=function(){return i[s].apply(this,arguments)}}else{a[o]=function(){this.parent=i[s];return u.apply(this,arguments)}}a[o].prototype[o]=a[o];r.each(i,function(e,t){a[o].prototype[t]=i[t]});r.each(t,function(e,t){if(i[t]){a[o].prototype[t]=function(){this.parent=i[t];return e.apply(this,arguments)}}else{if(t!==o){a[o].prototype[t]=e}}})}r.each(t.static,function(e,t){a[o][t]=e})};var In=function(e,t){var n=[];for(var r=2;r<arguments.length;r++){n[r-2]=arguments[r]}var i,a,o;var s=arguments;var u;for(i=1,a=s.length;i<a;i++){t=s[i];for(o in t){if(t.hasOwnProperty(o)){u=t[o];if(u!==undefined){e[o]=u}}}}return e};var Bn=function(e,t,n,r){r=r||this;if(e){if(n){e=e[n]}On.each(e,function(e,i){if(t.call(r,e,i,n)===false){return false}Bn(e,t,n,r)})}};var jn=function(e,t){var n,r;t=t||window;e=e.split(".");for(n=0;n<e.length;n++){r=e[n];if(!t[r]){t[r]={}}t=t[r]}return t};var Fn=function(e,t){var n,r;t=t||window;e=e.split(".");for(n=0,r=e.length;n<r;n++){t=t[e[n]];if(!t){break}}return t};var Hn=function(e,t){if(!e||Nn(e,"array")){return e}return On.map(e.split(t||","),An)};var zn=function(e){var t=Me.cacheSuffix;if(t){e+=(e.indexOf("?")===-1?"?":"&")+t}return e};var Un={trim:An,isArray:On.isArray,is:Nn,toArray:On.toArray,makeMap:Rn,each:On.each,map:On.map,grep:On.filter,inArray:On.indexOf,hasOwn:Dn,extend:In,create:Ln,walk:Bn,createNS:jn,resolve:Fn,explode:Hn,_addCacheSuffix:zn};var Vn=document;var Wn=Array.prototype.push;var qn=Array.prototype.slice;var Yn=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/;var Kn=Je.Event;var $n=Un.makeMap("children,contents,next,prev");var Gn=function(e){return typeof e!=="undefined"};var Xn=function(e){return typeof e==="string"};var Zn=function(e){return e&&e===e.window};var Jn=function(e,t){var n,r,i;t=t||Vn;i=t.createElement("div");n=t.createDocumentFragment();i.innerHTML=e;while(r=i.firstChild){n.appendChild(r)}return n};var Qn=function(e,t,n,r){var i;if(Xn(t)){t=Jn(t,vr(e[0]))}else if(t.length&&!t.nodeType){t=ur.makeArray(t);if(r){for(i=t.length-1;i>=0;i--){Qn(e,t[i],n,r)}}else{for(i=0;i<t.length;i++){Qn(e,t[i],n,r)}}return e}if(t.nodeType){i=e.length;while(i--){n.call(e[i],t)}}return e};var er=function(e,t){return e&&t&&(" "+e.className+" ").indexOf(" "+t+" ")!==-1};var tr=function(e,t,n){var r,i;t=ur(t)[0];e.each(function(){var e=this;if(!n||r!==e.parentNode){r=e.parentNode;i=t.cloneNode(false);e.parentNode.insertBefore(i,e);i.appendChild(e)}else{i.appendChild(e)}});return e};var nr=Un.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," ");var rr=Un.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," ");var ir={for:"htmlFor",class:"className",readonly:"readOnly"};var ar={float:"cssFloat"};var or={};var sr={};var ur=function(e,t){return new ur.fn.init(e,t)};var lr=function(e,t){var n;if(t.indexOf){return t.indexOf(e)}n=t.length;while(n--){if(t[n]===e){return n}}return-1};var cr=/^\s*|\s*$/g;var fr=function(e){return e===null||e===undefined?"":(""+e).replace(cr,"")};var dr=function(e,t){var n,r,i,a;if(e){n=e.length;if(n===undefined){for(r in e){if(e.hasOwnProperty(r)){a=e[r];if(t.call(a,r,a)===false){break}}}}else{for(i=0;i<n;i++){a=e[i];if(t.call(a,i,a)===false){break}}}}return e};var hr=function(e,t){var n=[];dr(e,function(e,r){if(t(r,e)){n.push(r)}});return n};var vr=function(e){if(!e){return Vn}if(e.nodeType===9){return e}return e.ownerDocument};ur.fn=ur.prototype={constructor:ur,selector:"",context:null,length:0,init:function(e,t){var n=this;var r,i;if(!e){return n}if(e.nodeType){n.context=n[0]=e;n.length=1;return n}if(t&&t.nodeType){n.context=t}else{if(t){return ur(e).attr(t)}n.context=t=document}if(Xn(e)){n.selector=e;if(e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3){r=[null,e,null]}else{r=Yn.exec(e)}if(r){if(r[1]){i=Jn(e,vr(t)).firstChild;while(i){Wn.call(n,i);i=i.nextSibling}}else{i=vr(t).getElementById(r[2]);if(!i){return n}if(i.id!==r[2]){return n.find(e)}n.length=1;n[0]=i}}else{return ur(t).find(e)}}else{this.add(e,false)}return n},toArray:function(){return Un.toArray(this)},add:function(e,t){var n=this;var r,i;if(Xn(e)){return n.add(ur(e))}if(t!==false){r=ur.unique(n.toArray().concat(ur.makeArray(e)));n.length=r.length;for(i=0;i<r.length;i++){n[i]=r[i]}}else{Wn.apply(n,ur.makeArray(e))}return n},attr:function(e,t){var n=this;var r;if(typeof e==="object"){dr(e,function(e,t){n.attr(e,t)})}else if(Gn(t)){this.each(function(){var n;if(this.nodeType===1){n=or[e];if(n&&n.set){n.set(this,t);return}if(t===null){this.removeAttribute(e,2)}else{this.setAttribute(e,t,2)}}})}else{if(n[0]&&n[0].nodeType===1){r=or[e];if(r&&r.get){return r.get(n[0],e)}if(rr[e]){return n.prop(e)?e:undefined}t=n[0].getAttribute(e,2);if(t===null){t=undefined}}return t}return n},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;e=ir[e]||e;if(typeof e==="object"){dr(e,function(e,t){n.prop(e,t)})}else if(Gn(t)){this.each(function(){if(this.nodeType===1){this[e]=t}})}else{if(n[0]&&n[0].nodeType&&e in n[0]){return n[0][e]}return t}return n},css:function(e,t){var n=this;var r,i;var a=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})};var o=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if(typeof e==="object"){dr(e,function(e,t){n.css(e,t)})}else{if(Gn(t)){e=a(e);if(typeof t==="number"&&!nr[e]){t=t.toString()+"px"}n.each(function(){var n=this.style;i=sr[e];if(i&&i.set){i.set(this,t);return}try{this.style[ar[e]||e]=t}catch(e){}if(t===null||t===""){if(n.removeProperty){n.removeProperty(o(e))}else{n.removeAttribute(e)}}})}else{r=n[0];i=sr[e];if(i&&i.get){return i.get(r)}if(r.ownerDocument.defaultView){try{return r.ownerDocument.defaultView.getComputedStyle(r,null).getPropertyValue(o(e))}catch(e){return undefined}}else if(r.currentStyle){return r.currentStyle[a(e)]}}}return n},remove:function(){var e=this;var t,n=this.length;while(n--){t=e[n];Kn.clean(t);if(t.parentNode){t.parentNode.removeChild(t)}}return this},empty:function(){var e=this;var t,n=this.length;while(n--){t=e[n];while(t.firstChild){t.removeChild(t.firstChild)}}return this},html:function(e){var t=this;var n;if(Gn(e)){n=t.length;try{while(n--){t[n].innerHTML=e}}catch(r){ur(t[n]).empty().append(e)}return t}return t[0]?t[0].innerHTML:""},text:function(e){var t=this;var n;if(Gn(e)){n=t.length;while(n--){if("innerText"in t[n]){t[n].innerText=e}else{t[0].textContent=e}}return t}return t[0]?t[0].innerText||t[0].textContent:""},append:function(){return Qn(this,arguments,function(e){if(this.nodeType===1||this.host&&this.host.nodeType===1){this.appendChild(e)}})},prepend:function(){return Qn(this,arguments,function(e){if(this.nodeType===1||this.host&&this.host.nodeType===1){this.insertBefore(e,this.firstChild)}},true)},before:function(){var e=this;if(e[0]&&e[0].parentNode){return Qn(e,arguments,function(e){this.parentNode.insertBefore(e,this)})}return e},after:function(){var e=this;if(e[0]&&e[0].parentNode){return Qn(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},true)}return e},appendTo:function(e){ur(e).append(this);return this},prependTo:function(e){ur(e).prepend(this);return this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return tr(this,e)},wrapAll:function(e){return tr(this,e,true)},wrapInner:function(e){this.each(function(){ur(this).contents().wrapAll(e)});return this},unwrap:function(){return this.parent().each(function(){ur(this).replaceWith(this.childNodes)})},clone:function(){var e=[];this.each(function(){e.push(this.cloneNode(true))});return ur(e)},addClass:function(e){return this.toggleClass(e,true)},removeClass:function(e){return this.toggleClass(e,false)},toggleClass:function(e,t){var n=this;if(typeof e!=="string"){return n}if(e.indexOf(" ")!==-1){dr(e.split(" "),function(){n.toggleClass(this,t)})}else{n.each(function(n,r){var i,a;a=er(r,e);if(a!==t){i=r.className;if(a){r.className=fr((" "+i+" ").replace(" "+e+" "," "))}else{r.className+=i?" "+e:e}}})}return n},hasClass:function(e){return er(this[0],e)},each:function(e){return dr(this,e)},on:function(e,t){return this.each(function(){Kn.bind(this,e,t)})},off:function(e,t){return this.each(function(){Kn.unbind(this,e,t)})},trigger:function(e){return this.each(function(){if(typeof e==="object"){Kn.fire(this,e.type,e)}else{Kn.fire(this,e)}})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new ur(qn.apply(this,arguments))},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n;var r=[];for(t=0,n=this.length;t<n;t++){ur.find(e,this[t],r)}return ur(r)},filter:function(e){if(typeof e==="function"){return ur(hr(this.toArray(),function(t,n){return e(n,t)}))}return ur(ur.filter(e,this.toArray()))},closest:function(e){var t=[];if(e instanceof ur){e=e[0]}this.each(function(n,r){while(r){if(typeof e==="string"&&ur(r).is(e)){t.push(r);break}else if(r===e){t.push(r);break}r=r.parentNode}});return ur(t)},offset:function(e){var t,n,r;var i=0,a=0,o;if(!e){t=this[0];if(t){n=t.ownerDocument;r=n.documentElement;if(t.getBoundingClientRect){o=t.getBoundingClientRect();i=o.left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft;a=o.top+(r.scrollTop||n.body.scrollTop)-r.clientTop}}return{left:i,top:a}}return this.css(e)},push:Wn,sort:[].sort,splice:[].splice};Un.extend(ur,{extend:Un.extend,makeArray:function(e){if(Zn(e)||e.nodeType){return[e]}return Un.toArray(e)},inArray:lr,isArray:Un.isArray,each:dr,trim:fr,grep:hr,find:tn,expr:tn.selectors,unique:tn.uniqueSort,text:tn.getText,contains:tn.contains,filter:function(e,t,n){var r=t.length;if(n){e=":not("+e+")"}while(r--){if(t[r].nodeType!==1){t.splice(r,1)}}if(t.length===1){t=ur.find.matchesSelector(t[0],e)?[t[0]]:[]}else{t=ur.find.matches(e,t)}return t}});var pr=function(e,t,n){var r=[];var i=e[t];if(typeof n!=="string"&&n instanceof ur){n=n[0]}while(i&&i.nodeType!==9){if(n!==undefined){if(i===n){break}if(typeof n==="string"&&ur(i).is(n)){break}}if(i.nodeType===1){r.push(i)}i=i[t]}return r};var gr=function(e,t,n,r){var i=[];if(r instanceof ur){r=r[0]}for(;e;e=e[t]){if(n&&e.nodeType!==n){continue}if(r!==undefined){if(e===r){break}if(typeof r==="string"&&ur(e).is(r)){break}}i.push(e)}return i};var mr=function(e,t,n){for(e=e[t];e;e=e[t]){if(e.nodeType===n){return e}}return null};dr({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return pr(e,"parentNode")},next:function(e){return mr(e,"nextSibling",1)},prev:function(e){return mr(e,"previousSibling",1)},children:function(e){return gr(e.firstChild,"nextSibling",1)},contents:function(e){return Un.toArray((e.nodeName==="iframe"?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){ur.fn[e]=function(n){var r=this;var i=[];r.each(function(){var e=t.call(i,this,n,i);if(e){if(ur.isArray(e)){i.push.apply(i,e)}else{i.push(e)}}});if(this.length>1){if(!$n[e]){i=ur.unique(i)}if(e.indexOf("parents")===0){i=i.reverse()}}i=ur(i);if(n){return i.filter(n)}return i}});dr({parentsUntil:function(e,t){return pr(e,"parentNode",t)},nextUntil:function(e,t){return gr(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return gr(e,"previousSibling",1,t).slice(1)}},function(e,t){ur.fn[e]=function(n,r){var i=this;var a=[];i.each(function(){var e=t.call(a,this,n,a);if(e){if(ur.isArray(e)){a.push.apply(a,e)}else{a.push(e)}}});if(this.length>1){a=ur.unique(a);if(e.indexOf("parents")===0||e==="prevUntil"){a=a.reverse()}}a=ur(a);if(r){return a.filter(r)}return a}});ur.fn.is=function(e){return!!e&&this.filter(e).length>0};ur.fn.init.prototype=ur.fn;ur.overrideDefaults=function(e){var t;var n=function(r,i){t=t||e();if(arguments.length===0){r=t.element}if(!i){i=t.context}return new n.fn.init(r,i)};ur.extend(n,this);return n};var yr=function(e,t,n){dr(n,function(n,r){e[n]=e[n]||{};e[n][t]=r})};if(Me.ie&&Me.ie<8){yr(or,"get",{maxlength:function(e){var t=e.maxLength;if(t===2147483647){return undefined}return t},size:function(e){var t=e.size;if(t===20){return undefined}return t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;if(t.length===0){return undefined}return t}});yr(or,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})}if(Me.ie&&Me.ie<9){ar.float="styleFloat";yr(sr,"set",{opacity:function(e,t){var n=e.style;if(t===null||t===""){n.removeAttribute("filter")}else{n.zoom=1;n.filter="alpha(opacity="+t*100+")"}}})}ur.attrHooks=or;ur.cssHooks=sr;var br=function(e){var t=false;var n;return function(){if(!t){t=true;n=e.apply(null,arguments)}return n}};var _r={cached:br};var wr=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t)){return r}}return undefined};var xr=function(e,t){var n=wr(e,t);if(!n){return{major:0,minor:0}}var r=function(e){return Number(t.replace(n,"$"+e))};return kr(r(1),r(2))};var Tr=function(e,t){var n=String(t).toLowerCase();if(e.length===0){return Cr()}return xr(e,n)};var Cr=function(){return kr(0,0)};var kr=function(e,t){return{major:e,minor:t}};var Sr={nu:kr,detect:Tr,unknown:Cr};var Er="Edge";var Pr="Chrome";var Or="IE";var Mr="Opera";var Ar="Firefox";var Nr="Safari";var Rr=function(e,t){return function(){return t===e}};var Dr=function(){return Lr({current:undefined,version:Sr.unknown()})};var Lr=function(e){var t=e.current;var n=e.version;return{current:t,version:n,isEdge:Rr(Er,t),isChrome:Rr(Pr,t),isIE:Rr(Or,t),isOpera:Rr(Mr,t),isFirefox:Rr(Ar,t),isSafari:Rr(Nr,t)}};var Ir={unknown:Dr,nu:Lr,edge:v.constant(Er),chrome:v.constant(Pr),ie:v.constant(Or),opera:v.constant(Mr),firefox:v.constant(Ar),safari:v.constant(Nr)};var Br="Windows";var jr="iOS";var Fr="Android";var Hr="Linux";var zr="OSX";var Ur="Solaris";var Vr="FreeBSD";var Wr=function(e,t){return function(){return t===e}};var qr=function(){return Yr({current:undefined,version:Sr.unknown()})};var Yr=function(e){var t=e.current;var n=e.version;return{current:t,version:n,isWindows:Wr(Br,t),isiOS:Wr(jr,t),isAndroid:Wr(Fr,t),isOSX:Wr(zr,t),isLinux:Wr(Hr,t),isSolaris:Wr(Ur,t),isFreeBSD:Wr(Vr,t)}};var Kr={unknown:qr,nu:Yr,windows:v.constant(Br),ios:v.constant(jr),android:v.constant(Fr),linux:v.constant(Hr),osx:v.constant(zr),solaris:v.constant(Ur),freebsd:v.constant(Vr)};function $r(e,t,n){var r=e.isiOS()&&/ipad/i.test(n)===true;var i=e.isiOS()&&!r;var a=e.isAndroid()&&e.version.major===3;var o=e.isAndroid()&&e.version.major===4;var s=r||a||o&&/mobile/i.test(n)===true;var u=e.isiOS()||e.isAndroid();var l=u&&!s;var c=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===false;return{isiPad:v.constant(r),isiPhone:v.constant(i),isTablet:v.constant(s),isPhone:v.constant(l),isTouch:v.constant(u),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:v.constant(c)}}var Gr=function(e,t){var n=String(t).toLowerCase();return J.find(e,function(e){return e.search(n)})};var Xr=function(e,t){return Gr(e,t).map(function(e){var n=Sr.detect(e.versionRegexes,t);return{current:e.name,version:n}})};var Zr=function(e,t){return Gr(e,t).map(function(e){var n=Sr.detect(e.versionRegexes,t);return{current:e.name,version:n}})};var Jr={detectBrowser:Xr,detectOs:Zr};var Qr=function(e,t){return t+e};var ei=function(e,t){return e+t};var ti=function(e,t){return e.substring(t)};var ni=function(e,t){return e.substring(0,e.length-t)};var ri={addToStart:Qr,addToEnd:ei,removeFromStart:ti,removeFromEnd:ni};var ii=function(e,t){return e.substr(0,t)};var ai=function(e,t){return e.substr(e.length-t,e.length)};var oi=function(e){return e===""?w.none():w.some(e.substr(0,1))};var si=function(e){return e===""?w.none():w.some(e.substring(1))};var ui={first:ii,last:ai,head:oi,tail:si};var li=function(e,t,n){if(t===""){return true}if(e.length<t.length){return false}var r=e.substr(n,n+t.length);return r===t};var ci=function(e,t){var n=function(e){var t=typeof e;return t==="string"||t==="number"};return e.replace(/\${([^{}]*)}/g,function(e,r){var i=t[r];return n(i)?i:e})};var fi=function(e,t){return mi(e,t)?ri.removeFromStart(e,t.length):e};var di=function(e,t){return yi(e,t)?ri.removeFromEnd(e,t.length):e};var hi=function(e,t){return mi(e,t)?e:ri.addToStart(e,t)};var vi=function(e,t){return yi(e,t)?e:ri.addToEnd(e,t)};var pi=function(e,t){return e.indexOf(t)!==-1};var gi=function(e){return ui.head(e).bind(function(t){return ui.tail(e).map(function(e){return t.toUpperCase()+e})}).getOr(e)};var mi=function(e,t){return li(e,t,0)};var yi=function(e,t){return li(e,t,e.length-t.length)};var bi=function(e){return e.replace(/^\s+|\s+$/g,"")};var _i=function(e){return e.replace(/^\s+/g,"")};var wi=function(e){return e.replace(/\s+$/g,"")};var xi={supplant:ci,startsWith:mi,removeLeading:fi,removeTrailing:di,ensureLeading:hi,ensureTrailing:vi,endsWith:yi,contains:pi,trim:bi,lTrim:_i,rTrim:wi,capitalize:gi};var Ti=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/;var Ci=function(e){return function(t){return xi.contains(t,e)}};var ki=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){var t=xi.contains(e,"edge/")&&xi.contains(e,"chrome")&&xi.contains(e,"safari")&&xi.contains(e,"applewebkit");return t}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ti],search:function(e){return xi.contains(e,"chrome")&&!xi.contains(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return xi.contains(e,"msie")||xi.contains(e,"trident")}},{name:"Opera",versionRegexes:[Ti,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ci("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ci("firefox")},{name:"Safari",versionRegexes:[Ti,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(xi.contains(e,"safari")||xi.contains(e,"mobile/"))&&xi.contains(e,"applewebkit")}}];var Si=[{name:"Windows",search:Ci("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return xi.contains(e,"iphone")||xi.contains(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ci("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Ci("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ci("linux"),versionRegexes:[]},{name:"Solaris",search:Ci("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ci("freebsd"),versionRegexes:[]}];var Ei={browsers:v.constant(ki),oses:v.constant(Si)};var Pi=function(e){var t=Ei.browsers();var n=Ei.oses();var r=Jr.detectBrowser(t,e).fold(Ir.unknown,Ir.nu);var i=Jr.detectOs(n,e).fold(Kr.unknown,Kr.nu);var a=$r(i,r,e);return{browser:r,os:i,deviceType:a}};var Oi={detect:Pi};var Mi=_r.cached(function(){var e=navigator.userAgent;return Oi.detect(e)});var Ai={detect:Mi};var Ni=function(e,t){var n=t||document;var r=n.createElement("div");r.innerHTML=e;if(!r.hasChildNodes()||r.childNodes.length>1){console.error("HTML does not have a single root node",e);throw"HTML must have a single root node"}return Li(r.childNodes[0])};var Ri=function(e,t){var n=t||document;var r=n.createElement(e);return Li(r)};var Di=function(e,t){var n=t||document;var r=n.createTextNode(e);return Li(r)};var Li=function(e){if(e===null||e===undefined){throw new Error("Node cannot be null or undefined")}return{dom:v.constant(e)}};var Ii=function(e,t,n){return w.from(e.dom().elementFromPoint(t,n)).map(Li)};var Bi={fromHtml:Ni,fromTag:Ri,fromText:Di,fromDom:Li,fromPoint:Ii};var ji={ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12};var Fi=function(e){var t=e.dom().nodeName;return t.toLowerCase()};var Hi=function(e){return e.dom().nodeType};var zi=function(e){return e.dom().nodeValue};var Ui=function(e){return function(t){return Hi(t)===e}};var Vi=function(e){return Hi(e)===ji.COMMENT||Fi(e)==="#comment"};var Wi=Ui(ji.ELEMENT);var qi=Ui(ji.TEXT);var Yi=Ui(ji.DOCUMENT);var Ki={name:Fi,type:Hi,value:zi,isElement:Wi,isText:qi,isDocument:Yi,isComment:Vi};var $i=function(e){if(e===null){return"null"}var t=typeof e;if(t==="object"&&Array.prototype.isPrototypeOf(e)){return"array"}if(t==="object"&&String.prototype.isPrototypeOf(e)){return"string"}return t};var Gi=function(e){return function(t){return $i(t)===e}};var Xi={isString:Gi("string"),isObject:Gi("object"),isArray:Gi("array"),isNull:Gi("null"),isBoolean:Gi("boolean"),isUndefined:Gi("undefined"),isFunction:Gi("function"),isNumber:Gi("number")};var Zi=function(){var e=Object.keys;var t=function(e){var t=[];for(var n in e){if(e.hasOwnProperty(n)){t.push(n)}}return t};return e===undefined?t:e}();var Ji=function(e,t){var n=Zi(e);for(var r=0,i=n.length;r<i;r++){var a=n[r];var o=e[a];t(o,a,e)}};var Qi=function(e,t){return ea(e,function(e,n,r){return{k:n,v:t(e,n,r)}})};var ea=function(e,t){var n={};Ji(e,function(r,i){var a=t(r,i,e);n[a.k]=a.v});return n};var ta=function(e,t){var n={};var r={};Ji(e,function(e,i){var a=t(e,i)?n:r;a[i]=e});return{t:n,f:r}};var na=function(e,t){var n=[];Ji(e,function(e,r){n.push(t(e,r))});return n};var ra=function(e,t){var n=Zi(e);for(var r=0,i=n.length;r<i;r++){var a=n[r];var o=e[a];if(t(o,a,e)){return w.some(o)}}return w.none()};var ia=function(e){return na(e,function(e){return e})};var aa=function(e){return ia(e).length};var oa={bifilter:ta,each:Ji,map:Qi,mapToArray:na,tupleMap:ea,find:ra,keys:Zi,values:ia,size:aa};var sa=function(e,t,n){if(Xi.isString(n)||Xi.isBoolean(n)||Xi.isNumber(n)){e.setAttribute(t,n+"")}else{console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e);throw new Error("Attribute value was not simple")}};var ua=function(e,t,n){sa(e.dom(),t,n)};var la=function(e,t){var n=e.dom();oa.each(t,function(e,t){sa(n,t,e)})};var ca=function(e,t){var n=e.dom().getAttribute(t);return n===null?undefined:n};var fa=function(e,t){var n=e.dom();return n&&n.hasAttribute?n.hasAttribute(t):false};var da=function(e,t){e.dom().removeAttribute(t)};var ha=function(e){var t=e.dom().attributes;return t===undefined||t===null||t.length===0};var va=function(e){return J.foldl(e.dom().attributes,function(e,t){e[t.name]=t.value;return e},{})};var pa=function(e,t,n){if(fa(e,n)&&!fa(t,n)){ua(t,n,ca(e,n))}};var ga=function(e,t,n){if(!Ki.isElement(e)||!Ki.isElement(t)){return}J.each(n,function(n){pa(e,t,n)})};var ma={clone:va,set:ua,setAll:la,get:ca,has:fa,remove:da,hasNone:ha,transfer:ga};var ya=function(e){var t=Ki.isText(e)?e.dom().parentNode:e.dom();return t!==undefined&&t!==null&&t.ownerDocument.body.contains(t)};var ba=_r.cached(function(){return _a(Bi.fromDom(document))});var _a=function(e){var t=e.dom().body;if(t===null||t===undefined){throw"Body is not available yet"}return Bi.fromDom(t)};var wa={body:ba,getBody:_a,inBody:ya};var xa=function(e){return e.style!==undefined};var Ta={isSupported:xa};var Ca=function(e,t,n){if(!Xi.isString(n)){console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e);throw new Error("CSS value must be a string: "+n)}if(Ta.isSupported(e)){e.style.setProperty(t,n)}};var ka=function(e,t){if(Ta.isSupported(e)){e.style.removeProperty(t)}};var Sa=function(e,t,n){var r=e.dom();Ca(r,t,n)};var Ea=function(e,t){var n=e.dom();oa.each(t,function(e,t){Ca(n,t,e)})};var Pa=function(e,t){var n=e.dom();oa.each(t,function(e,t){e.fold(function(){ka(n,t)},function(e){Ca(n,t,e)})})};var Oa=function(e,t){var n=e.dom();var r=window.getComputedStyle(n);var i=r.getPropertyValue(t);var a=i===""&&!wa.inBody(e)?Ma(n,t):i;return a===null?undefined:a};var Ma=function(e,t){return Ta.isSupported(e)?e.style.getPropertyValue(t):""};var Aa=function(e,t){var n=e.dom();var r=Ma(n,t);return w.from(r).filter(function(e){return e.length>0})};var Na=function(e){var t={};var n=e.dom();if(Ta.isSupported(n)){for(var r=0;r<n.style.length;r++){var i=n.style.item(r);t[i]=n.style[i]}}return t};var Ra=function(e,t,n){var r=Bi.fromTag(e);Sa(r,t,n);var i=Aa(r,t);return i.isSome()};var Da=function(e,t){var n=e.dom();ka(n,t);if(ma.has(e,"style")&&xi.trim(ma.get(e,"style"))===""){ma.remove(e,"style")}};var La=function(e,t){var n=ma.get(e,"style");var r=t(e);var i=n===undefined?ma.remove:ma.set;i(e,"style",n);return r};var Ia=function(e,t){var n=e.dom();var r=t.dom();if(Ta.isSupported(n)&&Ta.isSupported(r)){r.style.cssText=n.style.cssText}};var Ba=function(e){return e.dom().offsetWidth};var ja=function(e,t,n){Aa(e,n).each(function(e){if(Aa(t,n).isNone()){Sa(t,n,e)}})};var Fa=function(e,t,n){if(!Ki.isElement(e)||!Ki.isElement(t)){return}J.each(n,function(n){ja(e,t,n)})};var Ha={copy:Ia,set:Sa,preserve:La,setAll:Ea,setOptions:Pa,remove:Da,get:Oa,getRaw:Aa,getAllRaw:Na,isValidValue:Ra,reflow:Ba,transfer:Fa};function za(){var e=arguments;return function(){var t=new Array(arguments.length);for(var n=0;n<t.length;n++){t[n]=arguments[n]}if(e.length!==t.length){throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments")}var r={};J.each(e,function(e,n){r[e]=v.constant(t[n])});return r}}var Ua=function(e){return e.slice(0).sort()};var Va=function(e,t){throw new Error("All required keys ("+Ua(e).join(", ")+") were not specified. Specified keys were: "+Ua(t).join(", ")+".")};var Wa=function(e){throw new Error("Unsupported keys for object: "+Ua(e).join(", "))};var qa=function(e,t){if(!Xi.isArray(t)){throw new Error("The "+e+" fields must be an array. Was: "+t+".")}J.each(t,function(t){if(!Xi.isString(t)){throw new Error("The value "+t+" in the "+e+" fields was not a string.")}})};var Ya=function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+Ua(e).join(", ")+") were not.")};var Ka=function(e){var t=Ua(e);var n=J.find(t,function(e,n){return n<t.length-1&&e===t[n+1]});n.each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})};var $a={sort:Ua,reqMessage:Va,unsuppMessage:Wa,validateStrArr:qa,invalidTypeMessage:Ya,checkDupes:Ka};function Ga(e,t){var n=e.concat(t);if(n.length===0){throw new Error("You must specify at least one required or optional field.")}$a.validateStrArr("required",e);$a.validateStrArr("optional",t);$a.checkDupes(n);return function(r){var i=oa.keys(r);var a=J.forall(e,function(e){return J.contains(i,e)});if(!a){$a.reqMessage(e,i)}var o=J.filter(i,function(e){return!J.contains(n,e)});if(o.length>0){$a.unsuppMessage(o)}var s={};J.each(e,function(e){s[e]=v.constant(r[e])});J.each(t,function(e){s[e]=v.constant(Object.prototype.hasOwnProperty.call(r,e)?w.some(r[e]):w.none())});return s}}var Xa={immutable:za,immutableBag:Ga};var Za=function(e,t){var n=[];var r=function(e){n.push(e);return t(e)};var i=t(e);do{i=i.bind(r)}while(i.isSome());return n};var Ja={toArray:Za};var Qa=function(){var e=ue.getOrDie("Node");return e};var eo=function(e,t,n){return(e.compareDocumentPosition(t)&n)!==0};var to=function(e,t){return eo(e,t,Qa().DOCUMENT_POSITION_PRECEDING)};var no=function(e,t){return eo(e,t,Qa().DOCUMENT_POSITION_CONTAINED_BY)};var ro={documentPositionPreceding:to,documentPositionContainedBy:no};var io=ji.ELEMENT;var ao=ji.DOCUMENT;var oo=function(e,t){var n=e.dom();if(n.nodeType!==io){return false}else if(n.matches!==undefined){return n.matches(t)}else if(n.msMatchesSelector!==undefined){return n.msMatchesSelector(t)}else if(n.webkitMatchesSelector!==undefined){return n.webkitMatchesSelector(t)}else if(n.mozMatchesSelector!==undefined){return n.mozMatchesSelector(t)}else{throw new Error("Browser lacks native selectors")}};var so=function(e){return e.nodeType!==io&&e.nodeType!==ao||e.childElementCount===0};var uo=function(e,t){var n=t===undefined?document:t.dom();return so(n)?[]:J.map(n.querySelectorAll(e),Bi.fromDom)};var lo=function(e,t){var n=t===undefined?document:t.dom();return so(n)?w.none():w.from(n.querySelector(e)).map(Bi.fromDom)};var co={all:uo,is:oo,one:lo};var fo=function(e,t){return e.dom()===t.dom()};var ho=function(e,t){return e.dom().isEqualNode(t.dom())};var vo=function(e,t){return J.exists(t,v.curry(fo,e))};var po=function(e,t){var n=e.dom(),r=t.dom();return n===r?false:n.contains(r)};var go=function(e,t){return ro.documentPositionContainedBy(e.dom(),t.dom())};var mo=Ai.detect().browser;var yo=mo.isIE()?go:po;var bo={eq:fo,isEqualNode:ho,member:vo,contains:yo,is:co.is};var _o=function(e){return Bi.fromDom(e.dom().ownerDocument)};var wo=function(e){var t=_o(e);return Bi.fromDom(t.dom().documentElement)};var xo=function(e){var t=e.dom();var n=t.ownerDocument.defaultView;return Bi.fromDom(n)};var To=function(e){var t=e.dom();return w.from(t.parentNode).map(Bi.fromDom)};var Co=function(e){return To(e).bind(function(t){var n=No(t);return J.findIndex(n,function(t){return bo.eq(e,t)})})};var ko=function(e,t){var n=Xi.isFunction(t)?t:v.constant(false);var r=e.dom();var i=[];while(r.parentNode!==null&&r.parentNode!==undefined){var a=r.parentNode;var o=Bi.fromDom(a);i.push(o);if(n(o)===true){break}else{r=a}}return i};var So=function(e){var t=function(t){return J.filter(t,function(t){return!bo.eq(e,t)})};return To(e).map(No).map(t).getOr([])};var Eo=function(e){var t=e.dom();return w.from(t.offsetParent).map(Bi.fromDom)};var Po=function(e){var t=e.dom();return w.from(t.previousSibling).map(Bi.fromDom)};var Oo=function(e){var t=e.dom();return w.from(t.nextSibling).map(Bi.fromDom)};var Mo=function(e){return J.reverse(Ja.toArray(e,Po))};var Ao=function(e){return Ja.toArray(e,Oo)};var No=function(e){var t=e.dom();return J.map(t.childNodes,Bi.fromDom)};var Ro=function(e,t){var n=e.dom().childNodes;return w.from(n[t]).map(Bi.fromDom)};var Do=function(e){return Ro(e,0)};var Lo=function(e){return Ro(e,e.dom().childNodes.length-1)};var Io=function(e){return e.dom().childNodes.length};var Bo=function(e){return e.dom().hasChildNodes()};var jo=Xa.immutable("element","offset");var Fo=function(e,t){var n=No(e);return n.length>0&&t<n.length?jo(n[t],0):jo(e,t)};var Ho={owner:_o,defaultView:xo,documentElement:wo,parent:To,findIndex:Co,parents:ko,siblings:So,prevSibling:Po,offsetParent:Eo,prevSiblings:Mo,nextSibling:Oo,nextSiblings:Ao,children:No,child:Ro,firstChild:Do,lastChild:Lo,childNodesCount:Io,hasChildNodes:Bo,leaf:Fo};var zo=Ai.detect().browser;var Uo=function(e){return J.find(e,Ki.isElement)};var Vo=function(e){if(zo.isFirefox()&&Ki.name(e)==="table"){return Uo(Ho.children(e)).filter(function(e){return Ki.name(e)==="caption"}).bind(function(e){return Uo(Ho.nextSiblings(e)).map(function(t){var n=t.dom().offsetTop;var r=e.dom().offsetTop;var i=e.dom().offsetHeight;return n<=r?-i:0})}).getOr(0)}else{return 0}};var Wo=function(e,t,n){var r=0,i=0,a;var o=e.ownerDocument;var s;n=n?n:e;if(t){if(n===e&&t.getBoundingClientRect&&Ha.get(Bi.fromDom(e),"position")==="static"){s=t.getBoundingClientRect();r=s.left+(o.documentElement.scrollLeft||e.scrollLeft)-o.documentElement.clientLeft;i=s.top+(o.documentElement.scrollTop||e.scrollTop)-o.documentElement.clientTop;return{x:r,y:i}}a=t;while(a&&a!==n&&a.nodeType){r+=a.offsetLeft||0;i+=a.offsetTop||0;a=a.offsetParent}a=t.parentNode;while(a&&a!==n&&a.nodeType){r-=a.scrollLeft||0;i-=a.scrollTop||0;a=a.parentNode}i+=Vo(Bi.fromDom(t))}return{x:r,y:i}};var qo={getPos:Wo};var Yo=function(e){var t=w.none();var n=[];var r=function(e){return Yo(function(t){i(function(n){t(e(n))})})};var i=function(e){if(o()){u(e)}else{n.push(e)}};var a=function(e){t=w.some(e);s(n);n=[]};var o=function(){return t.isSome()};var s=function(e){J.each(e,u)};var u=function(e){t.each(function(t){setTimeout(function(){e(t)},0)})};e(a);return{get:i,map:r,isReady:o}};var Ko=function(e){return Yo(function(t){t(e)})};var $o={nu:Yo,pure:Ko};var Go=function(e){return function(){var t=Array.prototype.slice.call(arguments);var n=this;setTimeout(function(){e.apply(n,t)},0)}};var Xo={bounce:Go};var Zo=function(e){var t=function(t){e(Xo.bounce(t))};var n=function(e){return Zo(function(n){t(function(t){var r=e(t);n(r)})})};var r=function(e){return Zo(function(n){t(function(t){e(t).get(n)})})};var i=function(e){return Zo(function(n){t(function(t){e.get(n)})})};var a=function(){return $o.nu(t)};return{map:n,bind:r,anonBind:i,toLazy:a,get:t}};var Jo=function(e){return Zo(function(t){t(e)})};var Qo={nu:Zo,pure:Jo};var es=function(e,t){return t(function(t){var n=[];var r=0;var i=function(i){return function(a){n[i]=a;r++;if(r>=e.length){t(n)}}};if(e.length===0){t([])}else{J.each(e,function(e,t){e.get(i(t))})}})};var ts={par:es};var ns=function(e){return ts.par(e,Qo.nu)};var rs=function(e,t){var n=J.map(e,t);return ns(n)};var is=function(e,t){return function(n){return t(n).bind(e)}};var as={par:ns,mapM:rs,compose:is};var os=function(e){var t=function(t){return e===t};var n=function(t){return os(e)};var r=function(t){return os(e)};var i=function(t){return os(t(e))};var a=function(t){t(e)};var o=function(t){return t(e)};var s=function(t,n){return n(e)};var u=function(t){return t(e)};var l=function(t){return t(e)};var c=function(){return w.some(e)};return{is:t,isValue:v.always,isError:v.never,getOr:v.constant(e),getOrThunk:v.constant(e),getOrDie:v.constant(e),or:n,orThunk:r,fold:s,map:i,each:a,bind:o,exists:u,forall:l,toOption:c}};var ss=function(e){var t=function(e){return e()};var n=function(){return v.die(e)()};var r=function(e){return e};var i=function(e){return e()};var a=function(t){return ss(e)};var o=function(t){return ss(e)};var s=function(t,n){return t(e)};return{is:v.never,isValue:v.never,isError:v.always,getOr:v.identity,getOrThunk:t,getOrDie:n,or:r,orThunk:i,fold:s,map:a,each:v.noop,bind:o,exists:v.never,forall:v.always,toOption:w.none}};var us={value:os,error:ss};function ls(e,t){var n=0;var r={};var i;t=t||{};i=t.maxLoadTime||5e3;var a=function(t){e.getElementsByTagName("head")[0].appendChild(t)};var o=function(t,o,s){var u,l,c,f;var d=function(){var e=f.passed;var t=e.length;while(t--){e[t]()}f.status=2;f.passed=[];f.failed=[]};var h=function(){var e=f.failed;var t=e.length;while(t--){e[t]()}f.status=3;f.passed=[];f.failed=[]};var v=function(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&parseInt(e[1],10)<536)};var p=function(e,t){if(!e()){if((new Date).getTime()-c<i){He.setTimeout(t)}else{h()}}};var g=function(){p(function(){var t=e.styleSheets;var n,r=t.length,i;while(r--){n=t[r];i=n.ownerNode?n.ownerNode:n.owningElement;if(i&&i.id===u.id){d();return true}}},g)};var m=function(){p(function(){try{var e=l.sheet.cssRules;d();return!!e}catch(e){}},m)};t=Un._addCacheSuffix(t);if(!r[t]){f={passed:[],failed:[]};r[t]=f}else{f=r[t]}if(o){f.passed.push(o)}if(s){f.failed.push(s)}if(f.status===1){return}if(f.status===2){d();return}if(f.status===3){h();return}f.status=1;u=e.createElement("link");u.rel="stylesheet";u.type="text/css";u.id="u"+n++;u.async=false;u.defer=false;c=(new Date).getTime();if("onload"in u&&!v()){u.onload=g;u.onerror=h}else{if(navigator.userAgent.indexOf("Firefox")>0){l=e.createElement("style");l.textContent='@import "'+t+'"';m();a(l);return}g()}a(u);u.href=t};var s=function(e){return Qo.nu(function(t){o(e,v.compose(t,v.constant(us.value(e))),v.compose(t,v.constant(us.error(e))))})};var u=function(e){return e.fold(v.identity,v.identity)};var l=function(e,t,n){as.par(J.map(e,s)).get(function(e){var r=J.partition(e,function(e){return e.isValue()});if(r.fail.length>0){n(r.fail.map(u))}else{t(r.pass.map(u))}})};return{load:o,loadAll:l}}function cs(e,t){var n=e;var r=function(e,n,r,i){var a,o;if(e){if(!i&&e[n]){return e[n]}if(e!==t){a=e[r];if(a){return a}for(o=e.parentNode;o&&o!==t;o=o.parentNode){a=o[r];if(a){return a}}}}};var i=function(e,n,r,i){var a,o,s;if(e){a=e[r];if(t&&a===t){return}if(a){if(!i){for(s=a[n];s;s=s[n]){if(!s[n]){return s}}}return a}o=e.parentNode;if(o&&o!==t){return o}}};this.current=function(){return n};this.next=function(e){n=r(n,"firstChild","nextSibling",e);return n};this.prev=function(e){n=r(n,"lastChild","previousSibling",e);return n};this.prev2=function(e){n=i(n,"lastChild","previousSibling",e);return n}}var fs=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"];var ds=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"];var hs=["td","th"];var vs=["thead","tbody","tfoot"];var ps=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"];var gs=["h1","h2","h3","h4","h5","h6"];var ms=["li","dd","dt"];var ys=["ul","ol","dl"];var bs=function(e){var t;return function(n){t=t?t:J.mapToObject(e,v.constant(true));return t.hasOwnProperty(Ki.name(n))}};var _s=bs(gs);var ws=bs(fs);var xs=function(e){return Ki.isElement(e)&&!ws(e)};var Ts=function(e){return Ki.isElement(e)&&Ki.name(e)==="br"};var Cs=bs(ps);var ks=bs(ys);var Ss=bs(ms);var Es=bs(ds);var Ps=bs(vs);var Os=bs(hs);var Ms=function(e){return function(t){return!!t&&t.nodeType===e}};var As=Ms(1);var Ns=function(e){var t=e.toLowerCase().split(" ");return function(e){var n,r;if(e&&e.nodeType){r=e.nodeName.toLowerCase();for(n=0;n<t.length;n++){if(r===t[n]){return true}}}return false}};var Rs=function(e,t){var n=t.toLowerCase().split(" ");return function(t){var r,i;if(As(t)){for(r=0;r<n.length;r++){i=t.ownerDocument.defaultView.getComputedStyle(t,null).getPropertyValue(e);if(i===n[r]){return true}}}return false}};var Ds=function(e,t){return function(n){return As(n)&&n[e]===t}};var Ls=function(e,t){return function(t){return As(t)&&t.hasAttribute(e)}};var Is=function(e,t){return function(n){return As(n)&&n.getAttribute(e)===t}};var Bs=function(e){return As(e)&&e.hasAttribute("data-mce-bogus")};var js=function(e){return As(e)&&e.getAttribute("data-mce-bogus")==="all"};var Fs=function(e){return As(e)&&e.tagName==="TABLE"};var Hs=function(e){return function(t){if(As(t)){if(t.contentEditable===e){return true}if(t.getAttribute("data-mce-contenteditable")===e){return true}}return false}};var zs=Ms(3);var Us=Ms(8);var Vs=Ms(9);var Ws=Ns("br");var qs=Hs("true");var Ys=Hs("false");var Ks={isText:zs,isElement:As,isComment:Us,isDocument:Vs,isBr:Ws,isContentEditableTrue:qs,isContentEditableFalse:Ys,matchNodeNames:Ns,hasPropValue:Ds,hasAttribute:Ls,hasAttributeValue:Is,matchStyleValues:Rs,isBogus:Bs,isBogusAll:js,isTable:Fs};var $s=function(e){var t=e.previousSibling&&e.previousSibling.nodeName==="SPAN";var n=e.nextSibling&&e.nextSibling.nodeName==="SPAN";return t&&n};var Gs=function(e){return e&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark"};var Xs=function(e,t){var n,r=t.childNodes;if(Ks.isElement(t)&&Gs(t)){return}for(n=r.length-1;n>=0;n--){Xs(e,r[n])}if(Ks.isDocument(t)===false){if(Ks.isText(t)&&t.nodeValue.length>0){var i=Un.trim(t.nodeValue).length;if(e.isBlock(t.parentNode)||i>0){return}if(i===0&&$s(t)){return}}else if(Ks.isElement(t)){r=t.childNodes;if(r.length===1&&Gs(r[0])){t.parentNode.insertBefore(r[0],t)}if(r.length||Es(Bi.fromDom(t))){return}}e.remove(t)}return t};var Zs={trimNode:Xs};var Js=Un.makeMap;var Qs;var eu;var tu;var nu=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g;var ru=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g;var iu=/[<>&\"\']/g;var au=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi;var ou={128:"‚Ç¨",130:"‚Äö",131:"∆í",132:"‚Äû",133:"‚Ä¶",134:"‚Ä†",135:"‚Ä°",136:"ÀÜ",137:"‚Ä∞",138:"≈†",139:"‚Äπ",140:"≈í",142:"≈Ω",145:"‚Äò",146:"‚Äô",147:"‚Äú",148:"‚Äù",149:"‚Ä¢",150:"‚Äì",151:"‚Äî",152:"Àú",153:"‚Ñ¢",154:"≈°",155:"‚Ä∫",156:"≈ì",158:"≈æ",159:"≈∏"};eu={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"};tu={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var su=function(e){var t;t=Bi.fromTag("div").dom();t.innerHTML=e;return t.textContent||t.innerText||e};var uu=function(e,t){var n,r,i;var a={};if(e){e=e.split(",");t=t||10;for(n=0;n<e.length;n+=2){r=String.fromCharCode(parseInt(e[n],t));if(!eu[r]){i="&"+e[n+1]+";";a[r]=i;a[i]=r}}return a}};Qs=uu("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,"+"5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,"+"5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,"+"5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,"+"68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,"+"6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,"+"6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,"+"75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,"+"7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,"+"7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,"+"sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,"+"st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,"+"t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,"+"tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,"+"u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,"+"81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,"+"8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,"+"8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,"+"8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,"+"8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,"+"nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,"+"rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,"+"Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,"+"80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,"+"811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var lu=function(e,t){return e.replace(t?nu:ru,function(e){return eu[e]||e})};var cu=function(e){return(""+e).replace(iu,function(e){return eu[e]||e})};var fu=function(e,t){return e.replace(t?nu:ru,function(e){if(e.length>1){return"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";"}return eu[e]||"&#"+e.charCodeAt(0)+";"})};var du=function(e,t,n){n=n||Qs;return e.replace(t?nu:ru,function(e){return eu[e]||n[e]||e})};var hu=function(e,t){var n=uu(t)||Qs;var r=function(e,t){return e.replace(t?nu:ru,function(e){if(eu[e]!==undefined){return eu[e]}if(n[e]!==undefined){return n[e]}if(e.length>1){return"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";"}return"&#"+e.charCodeAt(0)+";"})};var i=function(e,t){return du(e,t,n)};var a=Js(e.replace(/\+/g,","));if(a.named&&a.numeric){return r}if(a.named){if(t){return i}return du}if(a.numeric){return fu}return lu};var vu=function(e){return e.replace(au,function(e,t){if(t){if(t.charAt(0).toLowerCase()==="x"){t=parseInt(t.substr(1),16)}else{t=parseInt(t,10)}if(t>65535){t-=65536;return String.fromCharCode(55296+(t>>10),56320+(t&1023))}return ou[t]||String.fromCharCode(t)}return tu[e]||Qs[e]||su(e)})};var pu={encodeRaw:lu,encodeAllRaw:cu,encodeNumeric:fu,encodeNamed:du,getEncodeFunc:hu,decode:vu};var gu={};var mu={};var yu=Un.makeMap;var bu=Un.each;var _u=Un.extend;var wu=Un.explode;var xu=Un.inArray;var Tu=function(e,t){e=Un.trim(e);return e?e.split(t||" "):[]};var Cu=function(e){var t={};var n,r;var i,a,o,s;var u=function(e,r,i){var a,o,s;var u=function(e,t){var n={};var r,i;for(r=0,i=e.length;r<i;r++){n[e[r]]=t||{}}return n};i=i||[];r=r||"";if(typeof i==="string"){i=Tu(i)}e=Tu(e);a=e.length;while(a--){o=Tu([n,r].join(" "));s={attributes:u(o),attributesOrder:o,children:u(i,mu)};t[e[a]]=s}};var l=function(e,n){var r,i,a,o;e=Tu(e);r=e.length;n=Tu(n);while(r--){i=t[e[r]];for(a=0,o=n.length;a<o;a++){i.attributes[n[a]]={};i.attributesOrder.push(n[a])}}};if(gu[e]){return gu[e]}n="id accesskey class dir lang style tabindex title role";r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul";i="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd "+"label map noscript object q s samp script select small span strong sub sup "+"textarea u var #text #comment";if(e!=="html4"){n+=" contenteditable contextmenu draggable dropzone "+"hidden spellcheck translate";r+=" article aside details dialog figure header footer hgroup section nav";i+=" audio canvas command datalist mark meter output picture "+"progress time wbr video ruby bdi keygen"}if(e!=="html5-strict"){n+=" xml:lang";s="acronym applet basefont big font strike tt";i=[i,s].join(" ");bu(Tu(s),function(e){u(e,"",i)});o="center dir isindex noframes";r=[r,o].join(" ");a=[r,i].join(" ");bu(Tu(o),function(e){u(e,"",a)})}a=a||[r,i].join(" ");u("html","manifest","head body");u("head","","base command link meta noscript script style title");u("title hr noscript br");u("base","href target");u("link","href rel media hreflang type sizes hreflang");u("meta","name http-equiv content charset");u("style","media type scoped");u("script","src async defer type charset");u("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus "+"onhashchange onload onmessage onoffline ononline onpagehide onpageshow "+"onpopstate onresize onscroll onstorage onunload",a);u("address dt dd div caption","",a);u("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",i);u("blockquote","cite",a);u("ol","reversed start type","li");u("ul","","li");u("li","value",a);u("dl","","dt dd");u("a","href target rel media hreflang type",i);u("q","cite",i);u("ins del","cite datetime",a);u("img","src sizes srcset alt usemap ismap width height");u("iframe","src name width height",a);u("embed","src type width height");u("object","data type typemustmatch name usemap form width height",[a,"param"].join(" "));u("param","name value");u("map","name",[a,"area"].join(" "));u("area","alt coords shape href target rel media hreflang type");u("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":""));u("colgroup","span","col");u("col","span");u("tbody thead tfoot","","tr");u("tr","","td th");u("td","colspan rowspan headers",a);u("th","colspan rowspan headers scope abbr",a);u("form","accept-charset action autocomplete enctype method name novalidate target",a);u("fieldset","disabled form name",[a,"legend"].join(" "));u("label","form for",i);u("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate "+"formtarget height list max maxlength min multiple name pattern readonly required size src step type value width");u("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?a:i);u("select","disabled form multiple name required size","option optgroup");u("optgroup","disabled label","option");u("option","disabled label selected value");u("textarea","cols dirname disabled form maxlength name readonly required rows wrap");u("menu","type label",[a,"li"].join(" "));u("noscript","",a);if(e!=="html4"){u("wbr");u("ruby","",[i,"rt rp"].join(" "));u("figcaption","",a);u("mark rt rp summary bdi","",i);u("canvas","width height",a);u("video","src crossorigin poster preload autoplay mediagroup loop "+"muted controls width height buffered",[a,"track source"].join(" "));u("audio","src crossorigin preload autoplay mediagroup loop muted controls "+"buffered volume",[a,"track source"].join(" "));u("picture","","img source");u("source","src srcset type media sizes");u("track","kind src srclang label default");u("datalist","",[i,"option"].join(" "));u("article section nav aside header footer","",a);u("hgroup","","h1 h2 h3 h4 h5 h6");u("figure","",[a,"figcaption"].join(" "));u("time","datetime",i);u("dialog","open",a);u("command","type label icon disabled checked radiogroup command");u("output","for form name",i);u("progress","value max",i);u("meter","value min max low high optimum",i);u("details","open",[a,"summary"].join(" "));u("keygen","autofocus challenge disabled form keytype name")}if(e!=="html5-strict"){l("script","language xml:space");l("style","xml:space");l("object","declare classid code codebase codetype archive standby align border hspace vspace");l("embed","align name hspace vspace");l("param","valuetype type");l("a","charset name rev shape coords");l("br","clear");l("applet","codebase archive code object alt name width height align hspace vspace");l("img","name longdesc align border hspace vspace");l("iframe","longdesc frameborder marginwidth marginheight scrolling align");l("font basefont","size color face");l("input","usemap align");l("select","onchange");l("textarea");l("h1 h2 h3 h4 h5 h6 div p legend caption","align");l("ul","type compact");l("li","type");l("ol dl menu dir","compact");l("pre","width xml:space");l("hr","align noshade size width");l("isindex","prompt");l("table","summary width frame rules cellspacing cellpadding align bgcolor");l("col","width align char charoff valign");l("colgroup","width align char charoff valign");l("thead","align char charoff valign");l("tr","align char charoff valign bgcolor");l("th","axis align char charoff valign nowrap bgcolor width height");l("form","accept");l("td","abbr axis scope align char charoff valign nowrap bgcolor width height");l("tfoot","align char charoff valign");l("tbody","align char charoff valign");l("area","nohref");l("body","background bgcolor text link vlink alink")}if(e!=="html4"){l("input button select textarea","autofocus");l("input textarea","placeholder");l("a","download");l("link script img","crossorigin");l("iframe","sandbox seamless allowfullscreen")}bu(Tu("a form meter progress dfn"),function(e){if(t[e]){delete t[e].children[e]}});delete t.caption.children.table;delete t.script;gu[e]=t;return t};var ku=function(e,t){var n;if(e){n={};if(typeof e==="string"){e={"*":e}}bu(e,function(e,r){n[r]=n[r.toUpperCase()]=t==="map"?yu(e,/[, ]/):wu(e,/[, ]/)})}return n};function Su(e){var t={};var n={};var r=[];var i;var a;var o;var s,u,l,c,f;var d,h,v,p,g;var m={},y={};var b=function(t,n,r){var i=e[t];if(!i){i=gu[t];if(!i){i=yu(n," ",yu(n.toUpperCase()," "));i=_u(i,r);gu[t]=i}}else{i=yu(i,/[, ]/,yu(i.toUpperCase(),/[, ]/))}return i};e=e||{};o=Cu(e.schema);if(e.verify_html===false){e.valid_elements="*[*]"}i=ku(e.valid_styles);a=ku(e.invalid_styles,"map");f=ku(e.valid_classes,"map");s=b("whitespace_elements","pre script noscript style textarea video audio iframe object code");u=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");l=b("short_ended_elements","area base basefont br col frame hr img input isindex link "+"meta param embed source wbr track");c=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize "+"noshade nowrap readonly selected autoplay loop controls");h=b("non_empty_elements","td th iframe video audio object "+"script pre code",l);v=b("move_caret_before_on_enter_elements","table",h);p=b("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form "+"blockquote center dir fieldset header footer article section hgroup aside nav figure");d=b("block_elements","hr table tbody thead tfoot "+"th tr td li ol ul caption dl dt dd noscript menu isindex option "+"datalist select optgroup figcaption",p);g=b("text_inline_elements","span strong b em i font strike u var cite "+"dfn code mark q sup sub samp");bu((e.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){y[e]=new RegExp("</"+e+"[^>]*>","gi")});var _=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")};var w=function(e){var n,i,a,o,s,u,l,c,f,d,h,v,p,g,m,y,b,w,x;var T=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,C=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,k=/[*?+]/;if(e){e=Tu(e,",");if(t["@"]){y=t["@"].attributes;b=t["@"].attributesOrder}for(n=0,i=e.length;n<i;n++){s=T.exec(e[n]);if(s){g=s[1];f=s[2];m=s[3];c=s[5];v={};p=[];u={attributes:v,attributesOrder:p};if(g==="#"){u.paddEmpty=true}if(g==="-"){u.removeEmpty=true}if(s[4]==="!"){u.removeEmptyAttrs=true}if(y){for(w in y){v[w]=y[w]}p.push.apply(p,b)}if(c){c=Tu(c,"|");for(a=0,o=c.length;a<o;a++){s=C.exec(c[a]);if(s){l={};h=s[1];d=s[2].replace(/[\\:]:/g,":");g=s[3];x=s[4];if(h==="!"){u.attributesRequired=u.attributesRequired||[];u.attributesRequired.push(d);l.required=true}if(h==="-"){delete v[d];p.splice(xu(p,d),1);continue}if(g){if(g==="="){u.attributesDefault=u.attributesDefault||[];u.attributesDefault.push({name:d,value:x});l.defaultValue=x}if(g===":"){u.attributesForced=u.attributesForced||[];u.attributesForced.push({name:d,value:x});l.forcedValue=x}if(g==="<"){l.validValues=yu(x,"?")}}if(k.test(d)){u.attributePatterns=u.attributePatterns||[];l.pattern=_(d);u.attributePatterns.push(l)}else{if(!v[d]){p.push(d)}v[d]=l}}}}if(!y&&f==="@"){y=v;b=p}if(m){u.outputName=f;t[m]=u}if(k.test(f)){u.pattern=_(f);r.push(u)}else{t[f]=u}}}}};var x=function(e){t={};r=[];w(e);bu(o,function(e,t){n[t]=e.children})};var T=function(e){var r=/^(~)?(.+)$/;if(e){gu.text_block_elements=gu.block_elements=null;bu(Tu(e,","),function(e){var i=r.exec(e),a=i[1]==="~",o=a?"span":"div",s=i[2];n[s]=n[o];m[s]=o;if(!a){d[s.toUpperCase()]={};d[s]={}}if(!t[s]){var u=t[o];u=_u({},u);delete u.removeEmptyAttrs;delete u.removeEmpty;t[s]=u}bu(n,function(e,t){if(e[o]){n[t]=e=_u({},n[t]);e[s]=e[o]}})})}};var C=function(t){var r=/^([+\-]?)(\w+)\[([^\]]+)\]$/;gu[e.schema]=null;if(t){bu(Tu(t,","),function(e){var t=r.exec(e);var i,a;if(t){a=t[1];if(a){i=n[t[2]]}else{i=n[t[2]]={"#comment":{}}}i=n[t[2]];bu(Tu(t[3],"|"),function(e){if(a==="-"){delete i[e]}else{i[e]={}}})}})}};var k=function(e){var n=t[e],i;if(n){return n}i=r.length;while(i--){n=r[i];if(n.pattern.test(e)){return n}}};if(!e.valid_elements){bu(o,function(e,r){t[r]={attributes:e.attributes,attributesOrder:e.attributesOrder};n[r]=e.children});if(e.schema!=="html5"){bu(Tu("strong/b em/i"),function(e){e=Tu(e,"/");t[e[1]].outputName=e[0]})}bu(Tu("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){if(t[e]){t[e].removeEmpty=true}});bu(Tu("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){t[e].paddEmpty=true});bu(Tu("span"),function(e){t[e].removeEmptyAttrs=true})}else{x(e.valid_elements)}T(e.custom_elements);C(e.valid_children);w(e.extended_valid_elements);C("+ol[ul|ol],+ul[ul|ol]");bu({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,n){if(t[n]){t[n].parentsRequired=Tu(e)}});if(e.invalid_elements){bu(wu(e.invalid_elements),function(e){if(t[e]){delete t[e]}})}if(!k("span")){w("span[!data-mce-type|*]")}var S=function(){return i};var E=function(){return a};var P=function(){return f};var O=function(){return c};var M=function(){return d};var A=function(){return p};var N=function(){return g};var R=function(){return l};var D=function(){return u};var L=function(){return h};var I=function(){return v};var B=function(){return s};var j=function(){return y};var F=function(e,t){var r=n[e.toLowerCase()];return!!(r&&r[t.toLowerCase()])};var H=function(e,t){var n,r;var i=k(e);if(i){if(t){if(i.attributes[t]){return true}n=i.attributePatterns;if(n){r=n.length;while(r--){if(n[r].pattern.test(e)){return true}}}}else{return true}}return false};var z=function(){return m};return{children:n,elements:t,getValidStyles:S,getValidClasses:P,getBlockElements:M,getInvalidStyles:E,getShortEndedElements:R,getTextBlockElements:A,getTextInlineElements:N,getBoolAttrs:O,getElementRule:k,getSelfClosingElements:D,getNonEmptyElements:L,getMoveCaretBeforeOnEnterElements:I,getWhiteSpaceElements:B,getSpecialElements:j,isValidChild:F,isValid:H,getCustomElements:z,addValidElements:w,setValidElements:x,addCustomElements:T,addValidChildren:C}}var Eu=function(e,t,n,r){var i=function(e){e=parseInt(e,10).toString(16);return e.length>1?e:"0"+e};return"#"+i(t)+i(n)+i(r)};function Pu(e,t){var n=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi;var r=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi;var i=/\s*([^:]+):\s*([^;]+);?/g;var a=/\s+$/;var o;var s={};var u;var l;var c;var f="\ufeff";e=e||{};if(t){l=t.getValidStyles();c=t.getInvalidStyles()}u=("\\\" \\' \\; \\: ; : "+f).split(" ");for(o=0;o<u.length;o++){s[u[o]]=f+o;s[f+o]=u[o]}return{toHex:function(e){return e.replace(n,Eu)},parse:function(t){var u={};var l,c,d,h;var v=e.url_converter;var p=e.url_converter_scope||this;var g=function(e,t,n){var r,i,a,s;r=u[e+"-top"+t];if(!r){return}i=u[e+"-right"+t];if(!i){return}a=u[e+"-bottom"+t];if(!a){return}s=u[e+"-left"+t];if(!s){return}var l=[r,i,a,s];o=l.length-1;while(o--){if(l[o]!==l[o+1]){break}}if(o>-1&&n){return}u[e+t]=o===-1?l[0]:l.join(" ");delete u[e+"-top"+t];delete u[e+"-right"+t];delete u[e+"-bottom"+t];delete u[e+"-left"+t]};var m=function(e){var t=u[e],n;if(!t){return}t=t.split(" ");n=t.length;while(n--){if(t[n]!==t[0]){return false}}u[e]=t[0];return true};var y=function(e,t,n,r){if(!m(t)){return}if(!m(n)){return}if(!m(r)){return}u[e]=u[t]+" "+u[n]+" "+u[r];delete u[t];delete u[n];delete u[r]};var b=function(e){h=true;return s[e]};var _=function(e,t){if(h){e=e.replace(/\uFEFF[0-9]/g,function(e){return s[e]})}if(!t){e=e.replace(/\\([\'\";:])/g,"$1")}return e};var w=function(e){return String.fromCharCode(parseInt(e.slice(1),16))};var x=function(e){return e.replace(/\\[0-9a-f]+/gi,w)};var T=function(t,n,r,i,a,o){a=a||o;if(a){a=_(a);return"'"+a.replace(/\'/g,"\\'")+"'"}n=_(n||r||i);if(!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s)){return""}if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s)){return""}}if(v){n=v.call(p,n,"style")}return"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){t=t.replace(/[\u0000-\u001F]/g,"");t=t.replace(/\\[\"\';:\uFEFF]/g,b).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,b)});while(l=i.exec(t)){i.lastIndex=l.index+l[0].length;c=l[1].replace(a,"").toLowerCase();d=l[2].replace(a,"");if(c&&d){c=x(c);d=x(d);if(c.indexOf(f)!==-1||c.indexOf('"')!==-1){continue}if(!e.allow_script_urls&&(c==="behavior"||/expression\s*\(|\/\*|\*\//.test(d))){continue}if(c==="font-weight"&&d==="700"){d="bold"}else if(c==="color"||c==="background-color"){d=d.toLowerCase()}d=d.replace(n,Eu);d=d.replace(r,T);u[c]=h?_(d,true):d}}g("border","",true);g("border","-width");g("border","-color");g("border","-style");g("padding","");g("margin","");y("border","border-width","border-style","border-color");if(u.border==="medium none"){delete u.border}if(u["border-image"]==="none"){delete u["border-image"]}}return u},serialize:function(e,t){var n="",r,i;var a=function(t){var r,i,a,o;r=l[t];if(r){for(i=0,a=r.length;i<a;i++){t=r[i];o=e[t];if(o){n+=(n.length>0?" ":"")+t+": "+o+";"}}}};var o=function(e,t){var n;n=c["*"];if(n&&n[e]){return false}n=c[t];if(n&&n[e]){return false}return true};if(t&&l){a("*");a(t)}else{for(r in e){i=e[r];if(i&&(!c||o(r,t))){n+=(n.length>0?" ":"")+r+": "+i+";"}}}return n}}}var Ou=Un.each;var Mu=Un.is;var Au=Un.grep;var Nu=Me.ie;var Ru=/^([a-z0-9],?)+$/i;var Du=/^[ \t\r\n]*$/;var Lu=function(e,t){var n={};var r=t.keep_values;var i;i={set:function(n,r,i){if(t.url_converter){r=t.url_converter.call(t.url_converter_scope||e,r,i,n[0])}n.attr("data-mce-"+i,r).attr(i,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}};n={style:{set:function(e,t){if(t!==null&&typeof t==="object"){e.css(t);return}if(r){e.attr("data-mce-style",t)}e.attr("style",t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");n=e.serializeStyle(e.parseStyle(n),t[0].nodeName);return n}}};if(r){n.href=n.src=i}return n};var Iu=function(e,t){var n=t.attr("style");n=e.serializeStyle(e.parseStyle(n),t[0].nodeName);if(!n){n=null}t.attr("data-mce-style",n)};var Bu=function(e,t){var n=0,r,i;if(e){for(r=e.nodeType,e=e.previousSibling;e;e=e.previousSibling){i=e.nodeType;if(t&&i===3){if(i===r||!e.nodeValue.length){continue}}n++;r=i}}return n};var ju=function(e,t){var n=this;var r;n.doc=e;n.win=window;n.files={};n.counter=0;n.stdMode=!Nu||e.documentMode>=8;n.boxModel=!Nu||e.compatMode==="CSS1Compat"||n.stdMode;n.styleSheetLoader=ls(e);n.boundEvents=[];n.settings=t=t||{};n.schema=t.schema?t.schema:Su({});n.styles=Pu({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema);n.fixDoc(e);n.events=t.ownEvents?new Je(t.proxy):Je.Event;n.attrHooks=Lu(n,t);r=n.schema.getBlockElements();n.$=ur.overrideDefaults(function(){return{context:e,element:n.getRoot()}});n.isBlock=function(e){if(!e){return false}var t=e.nodeType;if(t){return!!(t===1&&r[e.nodeName])}return!!r[e]}};ju.prototype={$$:function(e){if(typeof e==="string"){e=this.get(e)}return this.$(e)},root:null,fixDoc:function(e){},clone:function(e,t){var n=this;var r,i;if(!Nu||e.nodeType!==1||t){return e.cloneNode(t)}i=n.doc;if(!t){r=i.createElement(e.nodeName);Ou(n.getAttribs(e),function(t){n.setAttrib(r,t.nodeName,n.getAttrib(e,t.nodeName))});return r}return r.firstChild},getRoot:function(){var e=this;return e.settings.root_element||e.doc.body},getViewPort:function(e){var t,n;e=!e?this.win:e;t=e.document;n=this.boxModel?t.documentElement:t.body;return{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t=this;var n,r;e=t.get(e);n=t.getPos(e);r=t.getSize(e);return{x:n.x,y:n.y,w:r.w,h:r.h}},getSize:function(e){var t=this;var n,r;e=t.get(e);n=t.getStyle(e,"width");r=t.getStyle(e,"height");if(n.indexOf("px")===-1){n=0}if(r.indexOf("px")===-1){r=0}return{w:parseInt(n,10)||e.offsetWidth||e.clientWidth,h:parseInt(r,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,false)},getParents:function(e,t,n,r){var i=this;var a;var o=[];e=i.get(e);r=r===undefined;n=n||(i.getRoot().nodeName!=="BODY"?i.getRoot().parentNode:null);if(Mu(t,"string")){a=t;if(t==="*"){t=function(e){return e.nodeType===1}}else{t=function(e){return i.is(e,a)}}}while(e){if(e===n||!e.nodeType||e.nodeType===9){break}if(!t||t(e)){if(r){o.push(e)}else{return e}}e=e.parentNode}return r?o:null},get:function(e){var t;if(e&&this.doc&&typeof e==="string"){t=e;e=this.doc.getElementById(e);if(e&&e.id!==t){return this.doc.getElementsByName(t)[1]}}return e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(e,t){var n=this;return tn(e,n.get(t)||n.settings.root_element||n.doc,[])},is:function(e,t){var n;if(!e){return false}if(e.length===undefined){if(t==="*"){return e.nodeType===1}if(Ru.test(t)){t=t.toLowerCase().split(/,/);e=e.nodeName.toLowerCase();for(n=t.length-1;n>=0;n--){if(t[n]===e){return true}}return false}}if(e.nodeType&&e.nodeType!==1){return false}var r=e.nodeType?[e]:e;return tn(t,r[0].ownerDocument||r[0],null,r).length>0},add:function(e,t,n,r,i){var a=this;return this.run(e,function(e){var o;o=Mu(t,"string")?a.doc.createElement(t):t;a.setAttribs(o,n);if(r){if(r.nodeType){o.appendChild(r)}else{a.setHTML(o,r)}}return!i?e.appendChild(o):o})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r="",i;r+="<"+e;for(i in t){if(t.hasOwnProperty(i)&&t[i]!==null&&typeof t[i]!=="undefined"){r+=" "+i+'="'+this.encode(t[i])+'"'}}if(typeof n!=="undefined"){return r+">"+n+"</"+e+">"}return r+" />"},createFragment:function(e){var t,n;var r=this.doc;var i;i=r.createElement("div");t=r.createDocumentFragment();if(e){i.innerHTML=e}while(n=i.firstChild){t.appendChild(n)}return t},remove:function(e,t){e=this.$$(e);if(t){e.each(function(){var e;while(e=this.firstChild){if(e.nodeType===3&&e.data.length===0){this.removeChild(e)}else{this.parentNode.insertBefore(e,this)}}}).remove()}else{e.remove()}return e.length>1?e.toArray():e[0]},setStyle:function(e,t,n){e=this.$$(e).css(t,n);if(this.settings.update_styles){Iu(this,e)}},getStyle:function(e,t,n){e=this.$$(e);if(n){return e.css(t)}t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()});if(t==="float"){t=Me.ie&&Me.ie<12?"styleFloat":"cssFloat"}return e[0]&&e[0].style?e[0].style[t]:undefined},setStyles:function(e,t){e=this.$$(e).css(t);if(this.settings.update_styles){Iu(this,e)}},removeAllAttribs:function(e){return this.run(e,function(e){var t;var n=e.attributes;for(t=n.length-1;t>=0;t--){e.removeAttributeNode(n.item(t))}})},setAttrib:function(e,t,n){var r=this;var i,a;var o=r.settings;if(n===""){n=null}e=r.$$(e);i=e.attr(t);if(!e.length){return}a=r.attrHooks[t];if(a&&a.set){a.set(e,n,t)}else{e.attr(t,n)}if(i!==n&&o.onSetAttrib){o.onSetAttrib({attrElm:e,attrName:t,attrValue:n})}},setAttribs:function(e,t){var n=this;n.$$(e).each(function(e,r){Ou(t,function(e,t){n.setAttrib(r,t,e)})})},getAttrib:function(e,t,n){var r=this;var i,a;e=r.$$(e);if(e.length){i=r.attrHooks[t];if(i&&i.get){a=i.get(e,t)}else{a=e.attr(t)}}if(typeof a==="undefined"){a=n||""}return a},getPos:function(e,t){return qo.getPos(this.doc.body,this.get(e),t)},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t=this;var n=t.doc;var r,i;if(t!==ju.DOM&&n===document){var a=ju.DOM.addedStyles;a=a||[];if(a[e]){return}a[e]=true;ju.DOM.addedStyles=a}i=n.getElementById("mceDefaultStyles");if(!i){i=n.createElement("style");i.id="mceDefaultStyles";i.type="text/css";r=n.getElementsByTagName("head")[0];if(r.firstChild){r.insertBefore(i,r.firstChild)}else{r.appendChild(i)}}if(i.styleSheet){i.styleSheet.cssText+=e}else{i.appendChild(n.createTextNode(e))}},loadCSS:function(e){var t=this;var n=t.doc;var r;if(t!==ju.DOM&&n===document){ju.DOM.loadCSS(e);return}if(!e){e=""}r=n.getElementsByTagName("head")[0];Ou(e.split(","),function(e){var i;e=Un._addCacheSuffix(e);if(t.files[e]){return}t.files[e]=true;i=t.create("link",{rel:"stylesheet",href:e});if(Nu&&n.documentMode&&n.recalc){i.onload=function(){if(n.recalc){n.recalc()}i.onload=null}}r.appendChild(i)})},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,false)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(e,t,n){this.$$(e).toggleClass(t,n).each(function(){if(this.className===""){ur(this).attr("class",null)}})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return this.$$(e).css("display")==="none"},uniqueId:function(e){return(!e?"mce_":e)+this.counter++},setHTML:function(e,t){e=this.$$(e);if(Nu){e.each(function(e,n){if(n.canHaveHTML===false){return}while(n.firstChild){n.removeChild(n.firstChild)}try{n.innerHTML="<br>"+t;n.removeChild(n.firstChild)}catch(e){ur("<div></div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t})}else{e.html(t)}},getOuterHTML:function(e){e=this.get(e);return e.nodeType===1&&"outerHTML"in e?e.outerHTML:ur("<div></div>").append(ur(e).clone()).html()},setOuterHTML:function(e,t){var n=this;n.$$(e).each(function(){try{if("outerHTML"in this){this.outerHTML=t;return}}catch(e){}n.remove(ur(this).html(t),true)})},decode:pu.decode,encode:pu.encodeAllRaw,insertAfter:function(e,t){t=this.get(t);return this.run(e,function(e){var n,r;n=t.parentNode;r=t.nextSibling;if(r){n.insertBefore(e,r)}else{n.appendChild(e)}return e})},replace:function(e,t,n){var r=this;return r.run(t,function(t){if(Mu(t,"array")){e=e.cloneNode(true)}if(n){Ou(Au(t.childNodes),function(t){e.appendChild(t)})}return t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n=this;var r;if(e.nodeName!==t.toUpperCase()){r=n.create(t);Ou(n.getAttribs(e),function(t){n.setAttrib(r,t.nodeName,n.getAttrib(e,t.nodeName))});n.replace(r,e,1)}return r||e},findCommonAncestor:function(e,t){var n=e,r;while(n){r=t;while(r&&n!==r){r=r.parentNode}if(n===r){break}n=n.parentNode}if(!n&&e.ownerDocument){return e.ownerDocument.documentElement}return n},toHex:function(e){return this.styles.toHex(Un.trim(e))},run:function(e,t,n){var r=this;var i;if(typeof e==="string"){e=r.get(e)}if(!e){return false}n=n||this;if(!e.nodeType&&(e.length||e.length===0)){i=[];Ou(e,function(e,a){if(e){if(typeof e==="string"){e=r.get(e)}i.push(t.call(n,e,a))}});return i}return t.call(n,e)},getAttribs:function(e){var t;e=this.get(e);if(!e){return[]}if(Nu){t=[];if(e.nodeName==="OBJECT"){return e.attributes}if(e.nodeName==="OPTION"&&this.getAttrib(e,"selected")){t.push({specified:1,nodeName:"selected"})}var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;e.cloneNode(false).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})});return t}return e.attributes},isEmpty:function(e,t){var n=this;var r,i,a,o,s,u,l=0;e=e.firstChild;if(e){s=new cs(e,e.parentNode);t=t||(n.schema?n.schema.getNonEmptyElements():null);o=n.schema?n.schema.getWhiteSpaceElements():{};do{a=e.nodeType;if(a===1){var c=e.getAttribute("data-mce-bogus");if(c){e=s.next(c==="all");continue}u=e.nodeName.toLowerCase();if(t&&t[u]){if(u==="br"){l++;e=s.next();continue}return false}i=n.getAttribs(e);r=i.length;while(r--){u=i[r].nodeName;if(u==="name"||u==="data-mce-bookmark"){return false}}}if(a===8){return false}if(a===3&&!Du.test(e.nodeValue)){return false}if(a===3&&e.parentNode&&o[e.parentNode.nodeName]&&Du.test(e.nodeValue)){return false}e=s.next()}while(e)}return l<=1},createRng:function(){return this.doc.createRange()},nodeIndex:Bu,split:function(e,t,n){var r=this;var i=r.createRng(),a,o,s;if(e&&t){i.setStart(e.parentNode,r.nodeIndex(e));i.setEnd(t.parentNode,r.nodeIndex(t));a=i.extractContents();i=r.createRng();i.setStart(t.parentNode,r.nodeIndex(t)+1);i.setEnd(e.parentNode,r.nodeIndex(e)+1);o=i.extractContents();s=e.parentNode;s.insertBefore(Zs.trimNode(r,a),e);if(n){s.insertBefore(n,e)}else{s.insertBefore(t,e)}s.insertBefore(Zs.trimNode(r,o),e);r.remove(e);return n||t}},bind:function(e,t,n,r){var i=this;if(Un.isArray(e)){var a=e.length;while(a--){e[a]=i.bind(e[a],t,n,r)}return e}if(i.settings.collect&&(e===i.doc||e===i.win)){i.boundEvents.push([e,t,n,r])}return i.events.bind(e,t,n,r||i)},unbind:function(e,t,n){var r=this;var i;if(Un.isArray(e)){i=e.length;while(i--){e[i]=r.unbind(e[i],t,n)}return e}if(r.boundEvents&&(e===r.doc||e===r.win)){i=r.boundEvents.length;while(i--){var a=r.boundEvents[i];if(e===a[0]&&(!t||t===a[1])&&(!n||n===a[2])){this.events.unbind(a[0],a[1],a[2])}}}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;if(!e||e.nodeType!==1){return null}t=e.getAttribute("data-mce-contenteditable");if(t&&t!=="inherit"){return t}return e.contentEditable!=="inherit"?e.contentEditable:null},getContentEditableParent:function(e){var t=this.getRoot();var n=null;for(;e&&e!==t;e=e.parentNode){n=this.getContentEditable(e);if(n!==null){break}}return n},destroy:function(){var e=this;if(e.boundEvents){var t=e.boundEvents.length;while(t--){var n=e.boundEvents[t];this.events.unbind(n[0],n[1],n[2])}e.boundEvents=null}if(tn.setDocument){tn.setDocument()}e.win=e.doc=e.root=e.events=e.frag=null},isChildOf:function(e,t){while(e){if(t===e){return true}e=e.parentNode}return false},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var r=this;var i=t;if(e){if(typeof i==="string"){i=function(e){return r.is(e,t)}}for(e=e[n];e;e=e[n]){if(i(e)){return e}}}return null}};ju.DOM=new ju(document);ju.nodeIndex=Bu;var Fu=ju.DOM;var Hu=Un.each;var zu=Un.grep;var Uu=function(e){return typeof e==="function"};var Vu=function(){var e=0;var t=1;var n=2;var r=3;var i={};var a=[];var o={};var s=[];var u=0;var l=function(e,t,n){var r=Fu;var i,a;var o=function(){r.remove(a);if(i){i.onreadystatechange=i.onload=i=null}t()};var s=function(){if(Uu(n)){n()}else{if(typeof console!=="undefined"&&console.log){console.log("Failed to load script: "+e)}}};a=r.uniqueId();i=document.createElement("script");i.id=a;i.type="text/javascript";i.src=Un._addCacheSuffix(e);if("onreadystatechange"in i){i.onreadystatechange=function(){if(/loaded|complete/.test(i.readyState)){o()}}}else{i.onload=o}i.onerror=s;(document.getElementsByTagName("head")[0]||document.body).appendChild(i)};this.isDone=function(e){return i[e]===n};this.markDone=function(e){i[e]=n};this.add=this.load=function(t,n,r,s){var u=i[t];if(u===undefined){a.push(t);i[t]=e}if(n){if(!o[t]){o[t]=[]}o[t].push({success:n,failure:s,scope:r||this})}};this.remove=function(e){delete i[e];delete o[e]};this.loadQueue=function(e,t,n){this.loadScripts(a,e,t,n)};this.loadScripts=function(e,a,c,f){var d;var h=[];var v=function(e,t){Hu(o[t],function(t){if(Uu(t[e])){t[e].call(t.scope)}});o[t]=undefined};s.push({success:a,failure:f,scope:c||this});d=function(){var a=zu(e);e.length=0;Hu(a,function(e){if(i[e]===n){v("success",e);return}if(i[e]===r){v("failure",e);return}if(i[e]!==t){i[e]=t;u++;l(e,function(){i[e]=n;u--;v("success",e);d()},function(){i[e]=r;u--;h.push(e);v("failure",e);d()})}});if(!u){var o=s.slice(0);s.length=0;Hu(o,function(e){if(h.length===0){if(Uu(e.success)){e.success.call(e.scope)}}else{if(Uu(e.failure)){e.failure.call(e.scope,h)}}})}};d()}};Vu.ScriptLoader=new Vu;var Wu=Un.each;var qu=function(){var e=this;e.items=[];e.urls={};e.lookup={};e._listeners=[]};qu.prototype={get:function(e){if(this.lookup[e]){return this.lookup[e].instance}return undefined},dependencies:function(e){var t;if(this.lookup[e]){t=this.lookup[e].dependencies}return t||[]},requireLangPack:function(e,t){var n=qu.language;if(n&&qu.languageLoad!==false){if(t){t=","+t+",";if(t.indexOf(","+n.substr(0,2)+",")!==-1){n=n.substr(0,2)}else if(t.indexOf(","+n+",")===-1){return}}Vu.ScriptLoader.add(this.urls[e]+"/langs/"+n+".js")}},add:function(e,t,n){this.items.push(t);this.lookup[e]={instance:t,dependencies:n};var r=J.partition(this._listeners,function(t){return t.name===e});this._listeners=r.fail;Wu(r.pass,function(e){e.callback()});return t},remove:function(e){delete this.urls[e];delete this.lookup[e]},createUrl:function(e,t){if(typeof t==="object"){return t}return{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(e,t){var n=this.urls[e];Wu(t,function(e){Vu.ScriptLoader.add(n+"/"+e)})},load:function(e,t,n,r,i){var a=this;var o=t;var s=function(){var i=a.dependencies(e);Wu(i,function(e){var n=a.createUrl(t,e);a.load(n.resource,n,undefined,undefined)});if(n){if(r){n.call(r)}else{n.call(Vu)}}};if(a.urls[e]){return}if(typeof t==="object"){o=t.prefix+t.resource+t.suffix}if(o.indexOf("/")!==0&&o.indexOf("://")===-1){o=qu.baseURL+"/"+o}a.urls[e]=o.substring(0,o.lastIndexOf("/"));if(a.lookup[e]){s()}else{Vu.ScriptLoader.add(o,s,r,i)}},waitFor:function(e,t){if(this.lookup.hasOwnProperty(e)){t()}else{this._listeners.push({name:e,callback:t})}}};qu.PluginManager=new qu;qu.ThemeManager=new qu;var Yu="\ufeff";var Ku=function(e){return e===Yu};var $u=function(e){return e.replace(new RegExp(Yu,"g"),"")};var Gu={isZwsp:Ku,ZWSP:Yu,trim:$u};var Xu=Ks.isElement;var Zu=Ks.isText;var Ju=function(e){if(Zu(e)){e=e.parentNode}return Xu(e)&&e.hasAttribute("data-mce-caret")};var Qu=function(e){return Zu(e)&&Gu.isZwsp(e.data)};var el=function(e){return Ju(e)||Qu(e)};var tl=function(e){return e.firstChild!==e.lastChild||!Ks.isBr(e.firstChild)};var nl=function(e,t){var n,r,i,a;n=e.ownerDocument;i=n.createTextNode(Gu.ZWSP);a=e.parentNode;if(!t){r=e.nextSibling;if(Zu(r)){if(el(r)){return r}if(sl(r)){r.splitText(1);return r}}if(e.nextSibling){a.insertBefore(i,e.nextSibling)}else{a.appendChild(i)}}else{r=e.previousSibling;if(Zu(r)){if(el(r)){return r}if(ul(r)){return r.splitText(r.data.length-1)}}a.insertBefore(i,e)}return i};var rl=function(e){var t=e.container();return e&&Ks.isText(t)&&t.data.charAt(e.offset())===Gu.ZWSP};var il=function(e){var t=e.container();return e&&Ks.isText(t)&&t.data.charAt(e.offset()-1)===Gu.ZWSP};var al=function(){var e=document.createElement("br");e.setAttribute("data-mce-bogus","1");return e};var ol=function(e,t,n){var r,i,a;r=t.ownerDocument;i=r.createElement(e);i.setAttribute("data-mce-caret",n?"before":"after");i.setAttribute("data-mce-bogus","all");i.appendChild(al());a=t.parentNode;if(!n){if(t.nextSibling){a.insertBefore(i,t.nextSibling)}else{a.appendChild(i)}}else{a.insertBefore(i,t)}return i};var sl=function(e){return Zu(e)&&e.data[0]===Gu.ZWSP};var ul=function(e){return Zu(e)&&e.data[e.data.length-1]===Gu.ZWSP};var ll=function(e){var t=e.getElementsByTagName("br");var n=t[t.length-1];if(Ks.isBogus(n)){n.parentNode.removeChild(n)}};var cl=function(e){if(e&&e.hasAttribute("data-mce-caret")){ll(e);e.removeAttribute("data-mce-caret");e.removeAttribute("data-mce-bogus");e.removeAttribute("style");e.removeAttribute("_moz_abspos");return e}return null};var fl=function(e){return Ju(e.startContainer)};var dl=Ks.isContentEditableTrue;var hl=Ks.isContentEditableFalse;var vl=Ks.isBr;var pl=Ks.isText;var gl=Ks.matchNodeNames("script style textarea");var ml=Ks.matchNodeNames("img input textarea hr iframe video audio object");var yl=Ks.matchNodeNames("table");var bl=el;var _l=function(e){if(bl(e)){return false}if(pl(e)){if(gl(e.parentNode)){return false}return true}return ml(e)||vl(e)||yl(e)||hl(e)};var wl=function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(hl(e)){return false}if(dl(e)){return true}}return true};var xl=function(e){if(!hl(e)){return false}return On.reduce(e.getElementsByTagName("*"),function(e,t){return e||dl(t)},false)!==true};var Tl=function(e){return ml(e)||xl(e)};var Cl=function(e,t){return _l(e)&&wl(e,t)};var kl=Math.round;var Sl=function(e){if(!e){return{left:0,top:0,bottom:0,right:0,width:0,height:0}}return{left:kl(e.left),top:kl(e.top),bottom:kl(e.bottom),right:kl(e.right),width:kl(e.width),height:kl(e.height)}};var El=function(e,t){e=Sl(e);if(t){e.right=e.left}else{e.left=e.left+e.width;e.right=e.left}e.width=0;return e};var Pl=function(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right};var Ol=function(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2};var Ml=function(e,t){if(e.bottom-e.height/2<t.top){return true}if(e.top>t.bottom){return false}return Ol(t.top-e.bottom,e,t)};var Al=function(e,t){if(e.top>t.bottom){return true}if(e.bottom<t.top){return false}return Ol(t.bottom-e.top,e,t)};var Nl=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom};var Rl=function(e){var t=e.startContainer,n=e.startOffset;if(t.hasChildNodes()&&e.endOffset===n+1){return t.childNodes[n]}return null};var Dl=function(e,t){if(e.nodeType===1&&e.hasChildNodes()){if(t>=e.childNodes.length){t=e.childNodes.length-1}e=e.childNodes[t]}return e};var Ll=new RegExp("[ÃÄ-ÕØ“É-“á“à-“â÷ë-÷Ω÷ø◊Å-◊Ç◊Ñ-◊Ö◊áÿê-ÿö"+"Ÿã-ŸüŸ∞€ñ-€ú€ü-€§€ß-€®€™-€≠‹ë‹∞-›äﬁ¶-ﬁ∞"+"ﬂ´-ﬂ≥‡†ñ-‡†ô‡†õ-‡†£‡†•-‡†ß‡†©-‡†≠‡°ô-‡°õ‡££-‡§Ç‡§∫‡§º"+"‡•Å-‡•à‡•ç‡•ë-‡•ó‡•¢-‡•£‡¶Å‡¶º‡¶æ‡ßÅ-‡ßÑ‡ßç‡ßó‡ß¢-‡ß£"+"‡®Å-‡®Ç‡®º‡©Å-‡©Ç‡©á-‡©à‡©ã-‡©ç‡©ë‡©∞-‡©±‡©µ‡™Å-‡™Ç‡™º"+"‡´Å-‡´Ö‡´á-‡´à‡´ç‡´¢-‡´£‡¨Å‡¨º‡¨æ‡¨ø‡≠Å-‡≠Ñ‡≠ç‡≠ñ‡≠ó"+"‡≠¢-‡≠£‡ÆÇ‡Ææ‡ØÄ‡Øç‡Øó‡∞Ä‡∞æ-‡±Ä‡±Ü-‡±à‡±ä-‡±ç‡±ï-‡±ñ"+"‡±¢-‡±£‡≤Å‡≤º‡≤ø‡≥Ç‡≥Ü‡≥å-‡≥ç‡≥ï-‡≥ñ‡≥¢-‡≥£‡¥Å‡¥æ‡µÅ-‡µÑ"+"‡µç‡µó‡µ¢-‡µ£‡∑ä‡∑è‡∑í-‡∑î‡∑ñ‡∑ü‡∏±‡∏¥-‡∏∫‡πá-‡πé‡∫±‡∫¥-‡∫π"+"‡∫ª-‡∫º‡ªà-‡ªç‡ºò-‡ºô‡ºµ‡º∑‡ºπ‡Ω±-‡Ωæ‡æÄ-‡æÑ‡æÜ-‡æá‡æç-‡æó"+"‡æô-‡æº‡øÜ·Ä≠-·Ä∞·Ä≤-·Ä∑·Äπ-·Ä∫·ÄΩ-·Äæ·Åò-·Åô·Åû-·Å†·Å±-·Å¥"+"·ÇÇ·ÇÖ-·ÇÜ·Çç·Çù·çù-·çü·úí-·úî·ú≤-·ú¥·ùí-·ùì·ù≤-·ù≥·û¥-·ûµ"+"·û∑-·ûΩ·üÜ·üâ-·üì·üù·†ã-·†ç·¢©·§†-·§¢·§ß-·§®·§≤·§π-·§ª·®ó-·®ò"+"·®õ·©ñ·©ò-·©û·©†·©¢·©•-·©¨·©≥-·©º·©ø·™∞-·™Ω·™æ·¨Ä-·¨É·¨¥"+"·¨∂-·¨∫·¨º·≠Ç·≠´-·≠≥·ÆÄ-·ÆÅ·Æ¢-·Æ•·Æ®-·Æ©·Æ´-·Æ≠·Ø¶·Ø®-·Ø©"+"·Ø≠·ØØ-·Ø±·∞¨-·∞≥·∞∂-·∞∑·≥ê-·≥í·≥î-·≥†·≥¢-·≥®·≥≠·≥¥·≥∏-·≥π"+"·∑Ä-·∑µ·∑º-·∑ø‚Äå-‚Äç‚Éê-‚Éú‚Éù-‚É†‚É°‚É¢-‚É§‚É•-‚É∞‚≥Ø-‚≥±"+"‚µø‚∑†-‚∑ø„Ä™-„Ä≠„ÄÆ-„ÄØ„Çô-„ÇöÍôØÍô∞-Íô≤Íô¥-ÍôΩÍöû-ÍöüÍõ∞-Íõ±"+"Í†ÇÍ†ÜÍ†ãÍ†•-Í†¶Í£ÑÍ£†-Í£±Í§¶-Í§≠Í•á-Í•ëÍ¶Ä-Í¶ÇÍ¶≥Í¶∂-Í¶πÍ¶º"+"Íß•Í®©-Í®ÆÍ®±-Í®≤Í®µ-Í®∂Í©ÉÍ©åÍ©ºÍ™∞Í™≤-Í™¥Í™∑-Í™∏Í™æ-Í™øÍ´Å"+"Í´¨-Í´≠Í´∂ÍØ•ÍØ®ÍØ≠Ô¨ûÔ∏Ä-Ô∏èÔ∏†-Ô∏ØÔæû-Ôæü]");var Il=function(e){return typeof e==="string"&&e.charCodeAt(0)>=768&&Ll.test(e)};var Bl=[].slice;var jl=function(e){return function(){return e}};var Fl=function(e){return function(t){return!e(t)}};var Hl=function(e,t){return function(n){return e(t(n))}};var zl=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var n=Bl.call(arguments);return function(e){for(var t=0;t<n.length;t++){if(n[t](e)){return true}}return false}};var Ul=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var n=Bl.call(arguments);return function(e){for(var t=0;t<n.length;t++){if(!n[t](e)){return false}}return true}};var Vl=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var r=Bl.call(arguments);if(r.length-1>=e.length){return e.apply(this,r.slice(1))}return function(){var e=r.concat([].slice.call(arguments));return Vl.apply(this,e)}};var Wl=function(){};var ql={constant:jl,negate:Fl,and:Ul,or:zl,curry:Vl,compose:Hl,noop:Wl};var Yl=Ks.isElement;var Kl=_l;var $l=Ks.matchStyleValues("display","block table");var Gl=Ks.matchStyleValues("float","left right");var Xl=ql.and(Yl,Kl,ql.negate(Gl));var Zl=ql.negate(Ks.matchStyleValues("white-space","pre pre-line pre-wrap"));var Jl=Ks.isText;var Ql=Ks.isBr;var ec=ju.nodeIndex;var tc=Dl;var nc=function(e){return"createRange"in e?e.createRange():ju.DOM.createRng()};var rc=function(e){return e&&/[\r\n\t ]/.test(e)};var ic=function(e){return!!e.setStart&&!!e.setEnd};var ac=function(e){var t=e.startContainer;var n=e.startOffset;var r;if(rc(e.toString())&&Zl(t.parentNode)&&Ks.isText(t)){r=t.data;if(rc(r[n-1])||rc(r[n+1])){return true}}return false};var oc=function(e){var t=e.ownerDocument;var n=nc(t);var r=t.createTextNode("¬†");var i=e.parentNode;var a;i.insertBefore(r,e);n.setStart(r,0);n.setEnd(r,1);a=Sl(n.getBoundingClientRect());i.removeChild(r);return a};var sc=function(e){var t=e.startContainer;var n=e.endContainer;var r=e.startOffset;var i=e.endOffset;if(t===n&&Ks.isText(n)&&r===0&&i===1){var a=e.cloneRange();a.setEndAfter(n);return lc(a)}else{return null}};var uc=function(e){return e.left===0&&e.right===0&&e.top===0&&e.bottom===0};var lc=function(e){var t,n;n=e.getClientRects();if(n.length>0){t=Sl(n[0])}else{t=Sl(e.getBoundingClientRect())}if(!ic(e)&&Ql(e)&&uc(t)){return oc(e)}if(uc(t)&&ic(e)){return sc(e)}return t};var cc=function(e,t){var n=El(e,t);n.width=1;n.right=n.left+1;return n};var fc=function(e){var t=[];var n,r;var i=function(e){if(e.height===0){return}if(t.length>0){if(Pl(e,t[t.length-1])){return}}t.push(e)};var a=function(e,n){var r=nc(e.ownerDocument);if(n<e.data.length){if(Il(e.data[n])){return t}if(Il(e.data[n-1])){r.setStart(e,n);r.setEnd(e,n+1);if(!ac(r)){i(cc(lc(r),false));return t}}}if(n>0){r.setStart(e,n-1);r.setEnd(e,n);if(!ac(r)){i(cc(lc(r),false))}}if(n<e.data.length){r.setStart(e,n);r.setEnd(e,n+1);if(!ac(r)){i(cc(lc(r),true))}}};if(Jl(e.container())){a(e.container(),e.offset());return t}if(Yl(e.container())){if(e.isAtEnd()){r=tc(e.container(),e.offset());if(Jl(r)){a(r,r.data.length)}if(Xl(r)&&!Ql(r)){i(cc(lc(r),false))}}else{r=tc(e.container(),e.offset());if(Jl(r)){a(r,0)}if(Xl(r)&&e.isAtEnd()){i(cc(lc(r),false));return t}n=tc(e.container(),e.offset()-1);if(Xl(n)&&!Ql(n)){if($l(n)||$l(r)||!Xl(r)){i(cc(lc(n),false))}}if(Xl(r)){i(cc(lc(r),true))}}}return t};function dc(e,t,n){var r=function(){if(Jl(e)){return t===0}return t===0};var i=function(){if(Jl(e)){return t>=e.data.length}return t>=e.childNodes.length};var a=function(){var n;n=nc(e.ownerDocument);n.setStart(e,t);n.setEnd(e,t);return n};var o=function(){if(!n){n=fc(dc(e,t))}return n};var s=function(){return o().length>0};var u=function(n){return n&&e===n.container()&&t===n.offset()};var l=function(n){return tc(e,n?t-1:t)};return{container:ql.constant(e),offset:ql.constant(t),toRange:a,getClientRects:o,isVisible:s,isAtStart:r,isAtEnd:i,isEqual:u,getNode:l}}(function(e){e.fromRangeStart=function(t){return e(t.startContainer,t.startOffset)};e.fromRangeEnd=function(t){return e(t.endContainer,t.endOffset)};e.after=function(t){return e(t.parentNode,ec(t)+1)};e.before=function(t){return e(t.parentNode,ec(t))};e.isAtStart=function(e){return e?e.isAtStart():false};e.isAtEnd=function(e){return e?e.isAtEnd():false};e.isTextPosition=function(e){return e?Ks.isText(e.container()):false}})(dc||(dc={}));var hc=dc;var vc=Ks.isElement;var pc=Ks.isText;var gc=function(e){var t=e.parentNode;if(t){t.removeChild(e)}};var mc=function(e){try{return e.nodeValue}catch(e){return""}};var yc=function(e,t){if(t.length===0){gc(e)}else{e.nodeValue=t}};var bc=function(e){var t=Gu.trim(e);return{count:e.length-t.length,text:t}};var _c=function(e,t){Sc(e);return t};var wc=function(e,t){var n=bc(e.data.substr(0,t.offset()));var r=bc(e.data.substr(t.offset()));var i=n.text+r.text;if(i.length>0){yc(e,i);return hc(e,t.offset()-n.count)}else{return t}};var xc=function(e,t){var n=t.container();var r=J.indexOf(n.childNodes,e).map(function(e){return e<t.offset()?hc(n,t.offset()-1):t}).getOr(t);Sc(e);return r};var Tc=function(e,t){return pc(e)&&t.container()===e?wc(e,t):_c(e,t)};var Cc=function(e,t){return t.container()===e.parentNode?xc(e,t):_c(e,t)};var kc=function(e,t){return hc.isTextPosition(t)?Tc(e,t):Cc(e,t)};var Sc=function(e){if(vc(e)&&el(e)){if(tl(e)){e.removeAttribute("data-mce-caret")}else{gc(e)}}if(pc(e)){var t=Gu.trim(mc(e));yc(e,t)}};var Ec={removeAndReposition:kc,remove:Sc};var Pc=function(e,t,n){var r=e?hc.before(n):hc.after(n);return Lc(e,t,r)};var Oc=function(e){return Ks.isBr(e)?hc.before(e):hc.after(e)};var Mc=function(e){if(hc.isTextPosition(e)){return e.offset()===0}else{return _l(e.getNode())}};var Ac=function(e){if(hc.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}else{return _l(e.getNode(true))}};var Nc=function(e,t){return!hc.isTextPosition(e)&&!hc.isTextPosition(t)&&e.getNode()===t.getNode(true)};var Rc=function(e){return!hc.isTextPosition(e)&&Ks.isBr(e.getNode())};var Dc=function(e,t,n){if(e){return!Nc(t,n)&&!Rc(t)&&Ac(t)&&Mc(n)}else{return!Nc(n,t)&&Mc(t)&&Ac(n)}};var Lc=function(e,t,n){var r=Ud(t);return w.from(e?r.next(n):r.prev(n))};var Ic=function(e,t,n){return Lc(e,t,n).bind(function(r){if(hd(n,r,t)&&Dc(e,n,r)){return Lc(e,t,r)}else{return w.some(r)}})};var Bc=function(e,t){var n=e?t.firstChild:t.lastChild;if(Ks.isText(n)){return w.some(hc(n,e?0:n.data.length))}else if(n){if(_l(n)){return w.some(e?hc.before(n):Oc(n))}else{return Pc(e,t,n)}}else{return w.none()}};var jc={fromPosition:Lc,nextPosition:v.curry(Lc,true),prevPosition:v.curry(Lc,false),navigate:Ic,positionIn:Bc,firstPositionIn:v.curry(Bc,true),lastPositionIn:v.curry(Bc,false)};var Fc=Ks.isContentEditableTrue;var Hc=Ks.isContentEditableFalse;var zc=function(e,t,n,r,i){return t._selectionOverrides.showCaret(e,n,r,i)};var Uc=function(e){var t=e.ownerDocument.createRange();t.selectNode(e);return t};var Vc=function(e,t){var n;n=e.fire("BeforeObjectSelected",{target:t});if(n.isDefaultPrevented()){return null}return Uc(t)};var Wc=function(e,t,n){var r,i;t=_d(1,e.getBody(),t);r=hc.fromRangeStart(t);if(Hc(r.getNode())){return zc(1,e,r.getNode(),!r.isAtEnd(),false)}if(Hc(r.getNode(true))){return zc(1,e,r.getNode(true),false,false)}i=e.dom.getParent(r.getNode(),function(e){return Hc(e)||Fc(e)});if(Hc(i)){return zc(1,e,i,false,n)}return null};var qc=function(e,t,n){var r;if(!t||!t.collapsed){return t}r=Wc(e,t,n);if(r){return r}return t};var Yc=function(e){var t=[];var n=function(e){t.push(e)};for(var r=0;r<e.length;r++){e[r].each(n)}return t};var Kc=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome()){return r}}return w.none()};var $c=function(e,t){var n=[];for(var r=0;r<e.length;r++){var i=e[r];if(i.isSome()){n.push(i.getOrDie())}else{return w.none()}}return w.some(t.apply(null,n))};var Gc={cat:Yc,findMap:Kc,liftN:$c};var Xc;(function(e){e[e["Br"]=0]="Br";e[e["Block"]=1]="Block";e[e["Wrap"]=2]="Wrap";e[e["Eol"]=3]="Eol"})(Xc||(Xc={}));var Zc=function(e,t){return Gc.liftN([J.head(t.getClientRects()),J.last(e.getClientRects())],Ml).getOr(false)};var Jc=function(e,t){return Gc.liftN([J.last(t.getClientRects()),J.head(e.getClientRects())],function(e,t){return Al(e,t)}).getOr(false)};var Qc=function(e,t){return e===Od.Backwards?t.reverse():t};var ef=function(e,t,n){return e===Od.Forwards?t.next(n):t.prev(n)};var tf=function(e,t,n,r){if(Ks.isBr(r.getNode(t===Od.Forwards))){return Xc.Br}else if(hd(n,r)===false){return Xc.Block}else{return Xc.Wrap}};var nf=function(e,t,n,r){var i=Ud(n);var a=r,o;var s=[];while(a){o=ef(t,i,a);if(!o){break}if(Ks.isBr(o.getNode(false))){if(t===Od.Forwards){return{positions:Qc(t,s).concat([o]),breakType:Xc.Br,breakAt:w.some(o)}}else{return{positions:Qc(t,s),breakType:Xc.Br,breakAt:w.some(o)}}}if(!o.isVisible()){a=o;continue}if(e(a,o)){var u=tf(n,t,a,o);return{positions:Qc(t,s),breakType:u,breakAt:w.some(o)}}s.push(o);a=o}return{positions:Qc(t,s),breakType:Xc.Eol,breakAt:w.none()}};var rf=function(e,t,n,r){return t(n,r).breakAt.map(function(r){var i=t(n,r).positions;return e===Od.Backwards?i.concat(r):[r].concat(i)}).getOr([])};var af=function(e,t){return J.foldl(e,function(e,n){return e.fold(function(){return w.some(n)},function(r){return Gc.liftN([J.head(r.getClientRects()),J.head(n.getClientRects())],function(e,i){var a=Math.abs(t-e.left);var o=Math.abs(t-i.left);return o<=a?n:r}).or(e)})},w.none())};var of=function(e,t){return J.head(t.getClientRects()).bind(function(t){return af(e,t.left)})};var sf=v.curry(nf,Zc,-1);var uf=v.curry(nf,Jc,1);var lf=v.curry(rf,-1,sf);var cf=v.curry(rf,1,uf);var ff=function(e){return jc.firstPositionIn(e).map(function(t){return[t].concat(uf(e,t).positions)}).getOr([])};var df=function(e){return jc.lastPositionIn(e).map(function(t){return sf(e,t).positions.concat(t)}).getOr([])};var hf=function(e){return mf(wa.body(),e)};var vf=function(e,t,n){return J.filter(Ho.parents(e,n),t)};var pf=function(e,t){return J.filter(Ho.siblings(e),t)};var gf=function(e,t){return J.filter(Ho.children(e),t)};var mf=function(e,t){var n=[];J.each(Ho.children(e),function(e){if(t(e)){n=n.concat([e])}n=n.concat(mf(e,t))});return n};var yf={all:hf,ancestors:vf,siblings:pf,children:gf,descendants:mf};var bf=function(e){return co.all(e)};var _f=function(e,t,n){return yf.ancestors(e,function(e){return co.is(e,t)},n)};var wf=function(e,t){return yf.siblings(e,function(e){return co.is(e,t)})};var xf=function(e,t){return yf.children(e,function(e){return co.is(e,t)})};var Tf=function(e,t){return co.all(t,e)};var Cf={all:bf,ancestors:_f,siblings:wf,children:xf,descendants:Tf};var kf=function(e,t){return{left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}};var Sf=function(e,t){return J.bind(t,function(t){var n=kf(t.getBoundingClientRect(),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]})};var Ef=function(e,t,n){return J.foldl(e,function(e,r){return e.fold(function(){return w.some(r)},function(e){var i=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n));var a=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n));return w.some(a<i?r:e)})},w.none())};var Pf=function(e,t,n,r,i){var a=Cf.descendants(Bi.fromDom(n),"td,th").map(function(e){return e.dom()});var o=J.filter(Sf(e,a),function(e){return t(e,i)});return Ef(o,r,i).map(function(e){return e.cell})};var Of=function(e){return e.bottom};var Mf=function(e){return e.top};var Af=function(e,t){return e.y<t};var Nf=function(e,t){return e.y>t};var Rf=v.curry(Pf,Of,Af);var Df=v.curry(Pf,Mf,Nf);var Lf=function(e,t){return J.head(t.getClientRects()).bind(function(t){return Rf(e,t.left,t.top)}).bind(function(e){return of(df(e),t)})};var If=function(e,t){return J.last(t.getClientRects()).bind(function(t){return Df(e,t.left,t.top)}).bind(function(e){return of(ff(e),t)})};var Bf=Ai.detect().browser;var jf=function(){return Bf.isIE()||Bf.isEdge()||Bf.isFirefox()};var Ff=function(e,t,n){var r=e(t,n);if(r.breakType===Xc.Wrap&&r.positions.length===0){return r.breakAt.map(function(n){return e(t,n).breakAt.isNone()}).getOr(true)}else{return r.breakAt.isNone()}};var Hf=ql.curry(Ff,sf);var zf=ql.curry(Ff,uf);var Uf=function(e,t,n){var r=hc.fromRangeStart(t);return jc.positionIn(!e,n).map(function(e){return e.isEqual(r)}).getOr(false)};var Vf=function(e,t,n,r){var i=e.selection.getRng();var a=t?1:-1;if(jf()&&Uf(t,i,n)){var o=zc(a,e,n,!t,true);e.selection.setRng(o);return true}return false};var Wf=function(e,t,n){return Lf(t,n).orThunk(function(){return J.head(n.getClientRects()).bind(function(n){return af(lf(e,hc.before(t)),n.left)})}).getOr(hc.before(t))};var qf=function(e,t,n){return If(t,n).orThunk(function(){return J.head(n.getClientRects()).bind(function(n){return af(cf(e,hc.after(t)),n.left)})}).getOr(hc.after(t))};var Yf=function(e,t,n,r){var i=e.selection.getRng();var a=hc.fromRangeStart(i);var o=e.getBody();if(!t&&Hf(r,a)){var s=Wf(o,n,a);e.selection.setRng(s.toRange());return true}else if(t&&zf(r,a)){var s=qf(o,n,a);e.selection.setRng(s.toRange());return true}else{return false}};var Kf=function(e,t){return function(){return w.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return w.from(e.dom.getParent(n,"table")).map(function(r){return Vf(e,t,r,n)})}).getOr(false)}};var $f=function(e,t){return function(){return w.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return w.from(e.dom.getParent(n,"table")).map(function(r){return Yf(e,t,r,n)})}).getOr(false)}};var Gf=Ks.isContentEditableFalse;var Xf=function(e){return Ks.isElement(e)&&/^(TD|TH)$/i.test(e.tagName)};var Zf=function(e,t,n){var r=El(t.getBoundingClientRect(),n);var i,a,o,s,u;if(e.tagName==="BODY"){i=e.ownerDocument.documentElement;a=e.scrollLeft||i.scrollLeft;o=e.scrollTop||i.scrollTop}else{u=e.getBoundingClientRect();a=e.scrollLeft-u.left;o=e.scrollTop-u.top}r.left+=a;r.right+=a;r.top+=o;r.bottom+=o;r.width=1;s=t.offsetWidth-t.clientWidth;if(s>0){if(n){s*=-1}r.left+=s;r.right+=s}return r};var Jf=function(e){var t,n,r,i,a;t=ur("*[contentEditable=false]",e);for(i=0;i<t.length;i++){n=t[i];r=n.previousSibling;if(ul(r)){a=r.data;if(a.length===1){r.parentNode.removeChild(r)}else{r.deleteData(a.length-1,1)}}r=n.nextSibling;if(sl(r)){a=r.data;if(a.length===1){r.parentNode.removeChild(r)}else{r.deleteData(0,1)}}}};var Qf=function(e,t,n){var r,i=null,a;var o=function(n,r){var o,l;s();if(Xf(r)){return null}if(t(r)){a=ol("p",r,n);o=Zf(e,r,n);ur(a).css("top",o.top);i=ur('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(o).appendTo(e);if(n){i.addClass("mce-visual-caret-before")}u();l=r.ownerDocument.createRange();l.setStart(a,0);l.setEnd(a,0)}else{a=nl(r,n);l=r.ownerDocument.createRange();if(Gf(a.nextSibling)){l.setStart(a,0);l.setEnd(a,0)}else{l.setStart(a,1);l.setEnd(a,1)}return l}return l};var s=function(){Jf(e);if(a){Ec.remove(a);a=null}if(i){i.remove();i=null}clearInterval(r)};var u=function(){r=He.setInterval(function(){if(n()){ur("div.mce-visual-caret",e).toggleClass("mce-visual-caret-hidden")}else{ur("div.mce-visual-caret",e).addClass("mce-visual-caret-hidden")}},500)};var l=function(){return He.clearInterval(r)};var c=function(){return".mce-visual-caret {"+"position: absolute;"+"background-color: black;"+"background-color: currentcolor;"+"}"+".mce-visual-caret-hidden {"+"display: none;"+"}"+"*[data-mce-caret] {"+"position: absolute;"+"left: -1000px;"+"right: auto;"+"top: 0;"+"margin: 0;"+"padding: 0;"+"}"};return{show:o,hide:s,getCss:c,destroy:l}};var ed=function(e){return Gf(e)||Ks.isTable(e)&&jf()};var td=Ks.isContentEditableFalse;var nd=Ks.matchStyleValues("display","block table table-cell table-caption list-item");var rd=el;var id=Ju;var ad=ql.curry;var od=Ks.isElement;var sd=_l;var ud=function(e){return e>0};var ld=function(e){return e<0};var cd=function(e,t){var n;while(n=e(t)){if(!id(n)){return n}}return null};var fd=function(e,t,n,r,i){var a=new cs(e,r);if(ld(t)){if(td(e)||id(e)){e=cd(a.prev,true);if(n(e)){return e}}while(e=cd(a.prev,i)){if(n(e)){return e}}}if(ud(t)){if(td(e)||id(e)){e=cd(a.next,true);if(n(e)){return e}}while(e=cd(a.next,i)){if(n(e)){return e}}}return null};var dd=function(e,t){while(e&&e!==t){if(nd(e)){return e}e=e.parentNode}return null};var hd=function(e,t,n){return dd(e.container(),n)===dd(t.container(),n)};var vd=function(e,t){var n,r;if(!t){return null}n=t.container();r=t.offset();if(!od(n)){return null}return n.childNodes[r+e]};var pd=function(e,t){var n=t.ownerDocument.createRange();if(e){n.setStartBefore(t);n.setEndBefore(t)}else{n.setStartAfter(t);n.setEndAfter(t)}return n};var gd=function(e,t,n){return dd(t,e)===dd(n,e)};var md=function(e,t,n){var r,i;if(e){i="previousSibling"}else{i="nextSibling"}while(n&&n!==t){r=n[i];if(rd(r)){r=r[i]}if(td(r)){if(gd(t,r,n)){return r}break}if(sd(r)){break}n=n.parentNode}return null};var yd=ad(pd,true);var bd=ad(pd,false);var _d=function(e,t,n){var r,i,a,o;var s=ad(md,true,t);var u=ad(md,false,t);i=n.startContainer;a=n.startOffset;if(Ju(i)){if(!od(i)){i=i.parentNode}o=i.getAttribute("data-mce-caret");if(o==="before"){r=i.nextSibling;if(ed(r)){return yd(r)}}if(o==="after"){r=i.previousSibling;if(ed(r)){return bd(r)}}}if(!n.collapsed){return n}if(Ks.isText(i)){if(rd(i)){if(e===1){r=u(i);if(r){return yd(r)}r=s(i);if(r){return bd(r)}}if(e===-1){r=s(i);if(r){return bd(r)}r=u(i);if(r){return yd(r)}}return n}if(ul(i)&&a>=i.data.length-1){if(e===1){r=u(i);if(r){return yd(r)}}return n}if(sl(i)&&a<=1){if(e===-1){r=s(i);if(r){return bd(r)}}return n}if(a===i.data.length){r=u(i);if(r){return yd(r)}return n}if(a===0){r=s(i);if(r){return bd(r)}return n}}return n};var wd=function(e,t){var n=vd(e,t);return td(n)&&!Ks.isBogusAll(n)};var xd=function(e,t){return Ks.isTable(vd(e,t))};var Td=function(e,t){return w.from(vd(e?0:-1,t)).filter(td)};var Cd=function(e,t,n){var r=_d(e,t,n);if(e===-1){return dc.fromRangeStart(r)}return dc.fromRangeEnd(r)};var kd=ad(wd,0);var Sd=ad(wd,-1);var Ed=ad(xd,0);var Pd=ad(xd,-1);var Od;(function(e){e[e["Backwards"]=-1]="Backwards";e[e["Forwards"]=1]="Forwards"})(Od||(Od={}));var Md=Ks.isContentEditableFalse;var Ad=Ks.isText;var Nd=Ks.isElement;var Rd=Ks.isBr;var Dd=_l;var Ld=Tl;var Id=Cl;var Bd=function(e,t){var n=[];while(e&&e!==t){n.push(e);e=e.parentNode}return n};var jd=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){return e.childNodes[t]}return null};var Fd=function(e,t){if(ud(e)){if(Dd(t.previousSibling)&&!Ad(t.previousSibling)){return hc.before(t)}if(Ad(t)){return hc(t,0)}}if(ld(e)){if(Dd(t.nextSibling)&&!Ad(t.nextSibling)){return hc.after(t)}if(Ad(t)){return hc(t,t.data.length)}}if(ld(e)){if(Rd(t)){return hc.before(t)}return hc.after(t)}return hc.before(t)};var Hd=function(e,t){var n;if(!Ks.isBr(e)){return false}n=zd(1,hc.after(e),t);if(!n){return false}return!hd(hc.before(e),hc.before(n),t)};var zd=function(e,t,n){var r,i,a;var o,s;if(!Nd(n)||!t){return null}if(t.isEqual(hc.after(n))&&n.lastChild){s=hc.after(n.lastChild);if(ld(e)&&Dd(n.lastChild)&&Nd(n.lastChild)){return Rd(n.lastChild)?hc.before(n.lastChild):s}}else{s=t}var u=s.container();var l=s.offset();if(Ad(u)){if(ld(e)&&l>0){return hc(u,--l)}if(ud(e)&&l<u.length){return hc(u,++l)}r=u}else{if(ld(e)&&l>0){i=jd(u,l-1);if(Dd(i)){if(!Ld(i)){a=fd(i,e,Id,i);if(a){if(Ad(a)){return hc(a,a.data.length)}return hc.after(a)}}if(Ad(i)){return hc(i,i.data.length)}return hc.before(i)}}if(ud(e)&&l<u.childNodes.length){i=jd(u,l);if(Dd(i)){if(Hd(i,n)){return zd(e,hc.after(i),n)}if(!Ld(i)){a=fd(i,e,Id,i);if(a){if(Ad(a)){return hc(a,0)}return hc.before(a)}}if(Ad(i)){return hc(i,0)}return hc.after(i)}}r=i?i:s.getNode()}if(ud(e)&&s.isAtEnd()||ld(e)&&s.isAtStart()){r=fd(r,e,ql.constant(true),n,true);if(Id(r,n)){return Fd(e,r)}}i=fd(r,e,Id,n);o=On.last(On.filter(Bd(u,n),Md));if(o&&(!i||!o.contains(i))){if(ud(e)){s=hc.after(o)}else{s=hc.before(o)}return s}if(i){return Fd(e,i)}return null};var Ud=function(e){return{next:function(t){return zd(Od.Forwards,t,e)},prev:function(t){return zd(Od.Backwards,t,e)}}};var Vd=function(e){return e.firstChild&&e.firstChild===e.lastChild};var Wd=function(e){return e.name==="br"||e.value==="¬†"};var qd=function(e,t){var n=e.getBlockElements();return n[t.name]&&Vd(t)&&Wd(t.firstChild)};var Yd=function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||qd(e,t))};var Kd=function(e,t){var n=t.firstChild;var r=t.lastChild;if(n&&n.name==="meta"){n=n.next}if(r&&r.attr("id")==="mce_marker"){r=r.prev}if(Yd(e,r)){r=r.prev}if(!n||n!==r){return false}return n.name==="ul"||n.name==="ol"};var $d=function(e){var t=e.firstChild;var n=e.lastChild;if(t&&t.nodeName==="META"){t.parentNode.removeChild(t)}if(n&&n.id==="mce_marker"){n.parentNode.removeChild(n)}return e};var Gd=function(e,t,n){var r=t.serialize(n);var i=e.createFragment(r);return $d(i)};var Xd=function(e){return Un.grep(e.childNodes,function(e){return e.nodeName==="LI"})};var Zd=function(e){return e.data==="¬†"||Ks.isBr(e)};var Jd=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&Zd(e.firstChild)};var Qd=function(e){return!e.firstChild||Jd(e)};var eh=function(e){return e.length>0&&Qd(e[e.length-1])?e.slice(0,-1):e};var th=function(e,t){var n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null};var nh=function(e,t){return!!th(e,t)};var rh=function(e,t){var n=t.cloneRange();var r=t.cloneRange();n.setStartBefore(e);r.setEndAfter(e);return[n.cloneContents(),r.cloneContents()]};var ih=function(e,t){var n=hc.before(e);var r=Ud(t);var i=r.next(n);return i?i.toRange():null};var ah=function(e,t){var n=hc.after(e);var r=Ud(t);var i=r.prev(n);return i?i.toRange():null};var oh=function(e,t,n,r){var i=rh(e,r);var a=e.parentNode;a.insertBefore(i[0],e);Un.each(t,function(t){a.insertBefore(t,e)});a.insertBefore(i[1],e);a.removeChild(e);return ah(t[t.length-1],n)};var sh=function(e,t,n){var r=e.parentNode;Un.each(t,function(t){r.insertBefore(t,e)});return ih(e,n)};var uh=function(e,t,n,r){r.insertAfter(t.reverse(),e);return ah(t[0],n)};var lh=function(e,t,n,r){var i=Gd(t,e,r);var a=th(t,n.startContainer);var o=eh(Xd(i.firstChild));var s=1,u=2;var l=t.getRoot();var c=function(e){var r=hc.fromRangeStart(n);var i=Ud(t.getRoot());var o=e===s?i.prev(r):i.next(r);return o?th(t,o.getNode())!==a:true};if(c(s)){return sh(a,o,l)}else if(c(u)){return uh(a,o,l,t)}return oh(a,o,l,n)};var ch={isListFragment:Kd,insertAtCaret:lh,isParentBlockLi:nh,trimListItems:eh,listItems:Xd};var fh=Ks.isText;var dh=Ks.isBogus;var hh=ju.nodeIndex;var vh=function(e){var t=e.parentNode;if(dh(t)){return vh(t)}return t};var ph=function(e){if(!e){return[]}return On.reduce(e.childNodes,function(e,t){if(dh(t)&&t.nodeName!=="BR"){e=e.concat(ph(t))}else{e.push(t)}return e},[])};var gh=function(e,t){while(e=e.previousSibling){if(!fh(e)){break}t+=e.data.length}return t};var mh=function(e){return function(t){return e===t}};var yh=function(e){var t,n,r;t=ph(vh(e));n=On.findIndex(t,mh(e),e);t=t.slice(0,n+1);r=On.reduce(t,function(e,n,r){if(fh(n)&&fh(t[r-1])){e++}return e},0);t=On.filter(t,Ks.matchNodeNames(e.nodeName));n=On.findIndex(t,mh(e),e);return n-r};var bh=function(e){var t;if(fh(e)){t="text()"}else{t=e.nodeName.toLowerCase()}return t+"["+yh(e)+"]"};var _h=function(e,t,n){var r=[];for(t=t.parentNode;t!==e;t=t.parentNode){if(n&&n(t)){break}r.push(t)}return r};var wh=function(e,t){var n,r,i=[],a,o,s;n=t.container();r=t.offset();if(fh(n)){a=gh(n,r)}else{o=n.childNodes;if(r>=o.length){a="after";r=o.length-1}else{a="before"}n=o[r]}i.push(bh(n));s=_h(e,n);s=On.filter(s,ql.negate(Ks.isBogus));i=i.concat(On.map(s,function(e){return bh(e)}));return i.reverse().join("/")+","+a};var xh=function(e,t,n){var r=ph(e);r=On.filter(r,function(e,t){return!fh(e)||!fh(r[t-1])});r=On.filter(r,Ks.matchNodeNames(t));return r[n]};var Th=function(e,t){var n=e,r=0,i;while(fh(n)){i=n.data.length;if(t>=r&&t<=r+i){e=n;t=t-r;break}if(!fh(n.nextSibling)){e=n;t=i;break}r+=i;n=n.nextSibling}if(fh(e)&&t>e.data.length){t=e.data.length}return hc(e,t)};var Ch=function(e,t){var n,r,i;if(!t){return null}n=t.split(",");t=n[0].split("/");i=n.length>1?n[1]:"before";r=On.reduce(t,function(e,t){t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);if(!t){return null}if(t[1]==="text()"){t[1]="#text"}return xh(e,t[1],parseInt(t[2],10))},e);if(!r){return null}if(!fh(r)){if(i==="after"){i=hh(r)+1}else{i=hh(r)}return hc(r.parentNode,i)}return Th(r,parseInt(i,10))};var kh=Ks.isContentEditableFalse;var Sh=function(e,t,n){var r,i;i=e(t.data.slice(0,n)).length;for(r=t.previousSibling;r&&Ks.isText(r);r=r.previousSibling){i+=e(r.data).length}return i};var Eh=function(e,t,n,r,i){var a=r[i?"startContainer":"endContainer"];var o=r[i?"startOffset":"endOffset"];var s=[];var u,l=0;var c=e.getRoot();if(Ks.isText(a)){s.push(n?Sh(t,a,o):o)}else{u=a.childNodes;if(o>=u.length&&u.length){l=1;o=Math.max(0,u.length-1)}s.push(e.nodeIndex(u[o],n)+l)}for(;a&&a!==c;a=a.parentNode){s.push(e.nodeIndex(a,n))}return s};var Ph=function(e,t,n,r){var i=t.dom,a={};a.start=Eh(i,e,n,r,true);if(!t.isCollapsed()){a.end=Eh(i,e,n,r,false)}return a};var Oh=function(e){if(Ks.isText(e)&&e.data.length===0){e.parentNode.removeChild(e)}};var Mh=function(e,t,n){var r=0;Un.each(e.select(t),function(e){if(e.getAttribute("data-mce-bogus")==="all"){return}if(e===n){return false}r++});return r};var Ah=function(e,t){var n,r,i;var a=t?"start":"end";n=e[a+"Container"];r=e[a+"Offset"];if(Ks.isElement(n)&&n.nodeName==="TR"){i=n.childNodes;n=i[Math.min(t?r:r-1,i.length-1)];if(n){r=t?0:n.childNodes.length;e["set"+(t?"Start":"End")](n,r)}}};var Nh=function(e){Ah(e,true);Ah(e,false);return e};var Rh=function(e,t){var n;if(Ks.isElement(e)){e=Dl(e,t);if(kh(e)){return e}}if(el(e)){if(Ks.isText(e)&&Ju(e)){e=e.parentNode}n=e.previousSibling;if(kh(n)){return n}n=e.nextSibling;if(kh(n)){return n}}};var Dh=function(e){return Rh(e.startContainer,e.startOffset)||Rh(e.endContainer,e.endOffset)};var Lh=function(e,t,n){var r=n.getNode();var i=r?r.nodeName:null;var a=n.getRng();if(kh(r)||i==="IMG"){return{name:i,index:Mh(n.dom,i,r)}}r=Dh(a);if(r){i=r.tagName;return{name:i,index:Mh(n.dom,i,r)}}return Ph(e,n,t,a)};var Ih=function(e){var t=e.getRng();return{start:wh(e.dom.getRoot(),hc.fromRangeStart(t)),end:wh(e.dom.getRoot(),hc.fromRangeEnd(t))}};var Bh=function(e){return{rng:e.getRng()}};var jh=function(e){var t=e.dom;var n=e.getRng();var r=t.uniqueId();var i=e.isCollapsed();var a="overflow:hidden;line-height:0px";var o=e.getNode();var s=o.nodeName;var u="&#xFEFF;";if(s==="IMG"){return{name:s,index:Mh(t,s,o)}}var l=Nh(n.cloneRange());if(!i){l.collapse(false);var c=t.create("span",{"data-mce-type":"bookmark",id:r+"_end",style:a},u);l.insertNode(c);Oh(c.nextSibling)}n=Nh(n);n.collapse(true);var f=t.create("span",{"data-mce-type":"bookmark",id:r+"_start",style:a},u);n.insertNode(f);Oh(f.previousSibling);e.moveToBookmark({id:r,keep:1});return{id:r}};var Fh=function(e,t,n){if(t===2){return Lh(Gu.trim,n,e)}else if(t===3){return Ih(e)}else if(t){return Bh(e)}else{return jh(e)}};var Hh={getBookmark:Fh,getUndoBookmark:v.curry(Lh,v.identity,true)};var zh=function(e,t){if(e.isBlock(t)&&!t.innerHTML&&!Me.ie){t.innerHTML='<br data-mce-bogus="1" />'}return t};var Uh=function(e,t){var n,r;n=e.createRng();r=Ch(e.getRoot(),t.start);n.setStart(r.container(),r.offset());r=Ch(e.getRoot(),t.end);n.setEnd(r.container(),r.offset());return n};var Vh=function(e,t,n,r){var i=n[t?"start":"end"];var a,o,s,u;var l=e.getRoot();if(i){s=i[0];for(o=l,a=i.length-1;a>=1;a--){u=o.childNodes;if(i[a]>u.length-1){return}o=u[i[a]]}if(o.nodeType===3){s=Math.min(i[0],o.nodeValue.length)}if(o.nodeType===1){s=Math.min(i[0],o.childNodes.length)}if(t){r.setStart(o,s)}else{r.setEnd(o,s)}}return true};var Wh=function(e,t,n){var r=e.get(n.id+"_"+t),i,a,o,s;var u=n.keep;var l,c;if(r){i=r.parentNode;if(t==="start"){if(!u){a=e.nodeIndex(r)}else{i=r.firstChild;a=1}l=i;c=a}else{if(!u){a=e.nodeIndex(r)}else{i=r.firstChild;a=1}l=i;c=a}if(!u){s=r.previousSibling;o=r.nextSibling;Un.each(Un.grep(r.childNodes),function(e){if(Ks.isText(e)){e.nodeValue=e.nodeValue.replace(/\uFEFF/g,"")}});while(r=e.get(n.id+"_"+t)){e.remove(r,1)}if(s&&o&&s.nodeType===o.nodeType&&Ks.isText(s)&&!Me.opera){a=s.nodeValue.length;s.appendData(o.nodeValue);e.remove(o);if(t==="start"){l=s;c=a}else{l=s;c=a}}}return w.some(hc(l,c))}else{return w.none()}};var qh=function(e,t){return e.isSome()?e:t};var Yh=function(e,t){var n=e.createRng();if(Vh(e,true,t,n)&&Vh(e,false,t,n)){return w.some(n)}else{return w.none()}};var Kh=function(e,t){var n=Wh(e,"start",t);var r=Wh(e,"end",t);return Gc.liftN([n,qh(r,n)],function(t,n){var r=e.createRng();r.setStart(zh(e,t.container()),t.offset());r.setEnd(zh(e,n.container()),n.offset());return r})};var $h=function(e,t){return w.from(e.select(t.name)[t.index]).map(function(t){var n=e.createRng();n.selectNode(t);return n})};var Gh=function(e,t){var n=e.dom;if(t){if(Un.isArray(t.start)){return Yh(n,t)}else if(typeof t.start==="string"){return w.some(Uh(n,t))}else if(t.id){return Kh(n,t)}else if(t.name){return $h(n,t)}else if(t.rng){return w.some(t.rng)}}return w.none()};var Xh={resolve:Gh};var Zh=function(e,t,n){return Hh.getBookmark(e,t,n)};var Jh=function(e,t){Xh.resolve(e,t).each(function(t){e.setRng(t)})};var Qh=function(e){return Ks.isElement(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark"};var ev={getBookmark:Zh,moveToBookmark:Jh,isBookmarkNode:Qh};var tv=Un.each;var nv=function(e){this.compare=function(t,n){if(t.nodeName!==n.nodeName){return false}var r=function(t){var n={};tv(e.getAttribs(t),function(r){var i=r.nodeName.toLowerCase();if(i.indexOf("_")!==0&&i!=="style"&&i.indexOf("data-")!==0){n[i]=e.getAttrib(t,i)}});return n};var i=function(e,t){var n,r;for(r in e){if(e.hasOwnProperty(r)){n=t[r];if(typeof n==="undefined"){return false}if(e[r]!==n){return false}delete t[r]}}for(r in t){if(t.hasOwnProperty(r)){return false}}return true};if(!i(r(t),r(n))){return false}if(!i(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))){return false}return!ev.isBookmarkNode(t)&&!ev.isBookmarkNode(n)}};var rv=function(e,t){var n=Ho.parent(e);n.each(function(n){n.dom().insertBefore(t.dom(),e.dom())})};var iv=function(e,t){var n=Ho.nextSibling(e);n.fold(function(){var n=Ho.parent(e);n.each(function(e){ov(e,t)})},function(e){rv(e,t)})};var av=function(e,t){var n=Ho.firstChild(e);n.fold(function(){ov(e,t)},function(n){e.dom().insertBefore(t.dom(),n.dom())})};var ov=function(e,t){e.dom().appendChild(t.dom())};var sv=function(e,t,n){Ho.child(e,n).fold(function(){ov(e,t)},function(e){rv(e,t)})};var uv=function(e,t){rv(e,t);ov(t,e)};var lv={before:rv,after:iv,prepend:av,append:ov,appendAt:sv,wrap:uv};var cv=function(e,t){J.each(t,function(t){lv.before(e,t)})};var fv=function(e,t){J.each(t,function(n,r){var i=r===0?e:t[r-1];lv.after(i,n)})};var dv=function(e,t){J.each(t.slice().reverse(),function(t){lv.prepend(e,t)})};var hv=function(e,t){J.each(t,function(t){lv.append(e,t)})};var vv={before:cv,after:fv,prepend:dv,append:hv};var pv=function(e){e.dom().textContent="";J.each(Ho.children(e),function(e){gv(e)})};var gv=function(e){var t=e.dom();if(t.parentNode!==null){t.parentNode.removeChild(t)}};var mv=function(e){var t=Ho.children(e);if(t.length>0){vv.before(e,t)}gv(e)};var yv={empty:pv,remove:gv,unwrap:mv};function bv(e,t){var n=function(n){if(!e(n)){throw new Error("Can only get "+t+" value of a "+t+" node")}return o(n).getOr("")};var r=function(e){try{return i(e)}catch(e){return w.none()}};var i=function(t){return e(t)?w.from(t.dom().nodeValue):w.none()};var a=Ai.detect().browser;var o=a.isIE()&&a.version.major===10?r:i;var s=function(n,r){if(!e(n)){throw new Error("Can only set raw "+t+" value of a "+t+" node")}n.dom().nodeValue=r};return{get:n,getOption:o,set:s}}var _v=bv(Ki.isText,"text");var wv=function(e){return _v.get(e)};var xv=function(e){return _v.getOption(e)};var Tv=function(e,t){_v.set(e,t)};var Cv={get:wv,getOption:xv,set:Tv};var kv=function(e){var t=[];var n=e.dom();while(n){t.push(Bi.fromDom(n));n=n.lastChild}return t};var Sv=function(e){var t=Cf.descendants(e,"br");var n=J.filter(kv(e).slice(-1),Ts);if(t.length===n.length){J.each(n,yv.remove)}};var Ev=function(e){yv.empty(e);lv.append(e,Bi.fromHtml('<br data-mce-bogus="1">'))};var Pv=function(e){return Ki.isText(e)?Cv.get(e)==="¬†":Ts(e)};var Ov=function(e){return J.filter(Ho.children(e),Pv).length===1};var Mv=function(e){Ho.lastChild(e).each(function(t){Ho.prevSibling(t).each(function(n){if(ws(e)&&Ts(t)&&ws(n)){yv.remove(t)}})})};var Av={removeTrailingBr:Sv,fillWithPaddingBr:Ev,isPaddedElement:Ov,trimBlockTrailingBr:Mv};var Nv=Un.makeMap;function Rv(e){var t=[];var n,r,i,a,o;e=e||{};n=e.indent;r=Nv(e.indent_before||"");i=Nv(e.indent_after||"");a=pu.getEncodeFunc(e.entity_encoding||"raw",e.entities);o=e.element_format==="html";return{start:function(e,s,u){var l,c,f,d;if(n&&r[e]&&t.length>0){d=t[t.length-1];if(d.length>0&&d!=="\n"){t.push("\n")}}t.push("<",e);if(s){for(l=0,c=s.length;l<c;l++){f=s[l];t.push(" ",f.name,'="',a(f.value,true),'"')}}if(!u||o){t[t.length]=">"}else{t[t.length]=" />"}if(u&&n&&i[e]&&t.length>0){d=t[t.length-1];if(d.length>0&&d!=="\n"){t.push("\n")}}},end:function(e){var r;t.push("</",e,">");if(n&&i[e]&&t.length>0){r=t[t.length-1];if(r.length>0&&r!=="\n"){t.push("\n")}}},text:function(e,n){if(e.length>0){t[t.length]=n?e:a(e)}},cdata:function(e){t.push("<![CDATA[",e,"]]>")},comment:function(e){t.push("\x3c!--",e,"--\x3e")},pi:function(e,r){if(r){t.push("<?",e," ",a(r),"?>")}else{t.push("<?",e,"?>")}if(n){t.push("\n")}},doctype:function(e){t.push("<!DOCTYPE",e,">",n?"\n":"")},reset:function(){t.length=0},getContent:function(){return t.join("").replace(/\n$/,"")}}}function Dv(e,t){if(t===void 0){t=Su()}var n=Rv(e);e=e||{};e.validate="validate"in e?e.validate:true;var r=function(r){var i,a;a=e.validate;i={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:function(e){n.pi(e.name,e.value)},10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:function(e){if(e=e.firstChild){do{o(e)}while(e=e.next)}}};n.reset();var o=function(e){var r=i[e.type];var s,u,l,c,f,d,h,v,p;if(!r){s=e.name;u=e.shortEnded;l=e.attributes;if(a&&l&&l.length>1){d=[];d.map={};p=t.getElementRule(e.name);if(p){for(h=0,v=p.attributesOrder.length;h<v;h++){c=p.attributesOrder[h];if(c in l.map){f=l.map[c];d.map[c]=f;d.push({name:c,value:f})}}for(h=0,v=l.length;h<v;h++){c=l[h].name;if(!(c in d.map)){f=l.map[c];d.map[c]=f;d.push({name:c,value:f})}}l=d}}n.start(e.name,l,u);if(!u){if(e=e.firstChild){do{o(e)}while(e=e.next)}n.end(s)}}else{r(e)}};if(r.type===1&&!e.inner){o(r)}else{i[11](r)}return n.getContent()};return{serialize:r}}var Lv=function(e,t,n,r){var i=document.createRange();i.setStart(e,t);i.setEnd(n,r);return i};var Iv=function(e){var t=hc.fromRangeStart(e);var n=hc.fromRangeEnd(e);var r=e.commonAncestorContainer;return jc.fromPosition(false,r,n).map(function(i){if(!hd(t,n,r)&&hd(t,i,r)){return Lv(t.container(),t.offset(),i.container(),i.offset())}else{return e}}).getOr(e)};var Bv=function(e){return e.collapsed?e:Iv(e)};var jv=function(e){return Bv(e)};var Fv={normalize:jv};var Hv=Ks.matchNodeNames("td th");var zv=function(e,t,n){if(n.getAttribute("data-mce-bogus")==="all"){n.parentNode.insertBefore(e.dom.createFragment(t),n)}else{var r=n.firstChild;var i=n.lastChild;if(!r||r===i&&r.nodeName==="BR"){e.dom.setHTML(n,t)}else{e.selection.setContent(t)}}};var Uv=function(e,t){w.from(e.getParent(t,"td,th")).map(Bi.fromDom).each(Av.trimBlockTrailingBr)};var Vv=function(e,t,n){var r,i,a,o,s,u;var l,c,f,d,h,v;var p=e.schema.getTextInlineElements();var g=e.selection,m=e.dom;var y=function(e){var t,n,r;t=g.getRng();n=t.startContainer;r=t.startOffset;var i=function(e){return n[e]&&n[e].nodeType===3};if(n.nodeType===3){if(r>0){e=e.replace(/^&nbsp;/," ")}else if(!i("previousSibling")){e=e.replace(/^ /,"&nbsp;")}if(r<n.length){e=e.replace(/&nbsp;(<br>|)$/," ")}else if(!i("nextSibling")){e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;")}}return e};var b=function(){var e,n,r;e=g.getRng();n=e.startContainer;r=e.startOffset;if(n.nodeType===3&&e.collapsed){if(n.data[r]==="¬†"){n.deleteData(r,1);if(!/[\u00a0| ]$/.test(t)){t+=" "}}else if(n.data[r-1]==="¬†"){n.deleteData(r-1,1);if(!/[\u00a0| ]$/.test(t)){t=" "+t}}}};var _=function(){if(v){var t=e.getBody(),n=new nv(m);Un.each(m.select("*[data-mce-fragment]"),function(e){for(var r=e.parentNode;r&&r!==t;r=r.parentNode){if(p[e.nodeName.toLowerCase()]&&n.compare(r,e)){m.remove(e,true)}}})}};var w=function(e){var t=e;while(t=t.walk()){if(t.type===1){t.attr("data-mce-fragment","1")}}};var x=function(e){Un.each(e.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")})};var T=function(e){return!!e.getAttribute("data-mce-fragment")};var C=function(t){return t&&!e.schema.getShortEndedElements()[t.nodeName]};var k=function(t){var n,r,i;var a=function(t){var n=e.getBody();for(;t&&t!==n;t=t.parentNode){if(e.dom.getContentEditable(t)==="false"){return t}}return null};if(!t){return}g.scrollIntoView(t);n=a(t);if(n){m.remove(t);g.select(n);return}c=m.createRng();f=t.previousSibling;if(f&&f.nodeType===3){c.setStart(f,f.nodeValue.length);if(!Me.ie){d=t.nextSibling;if(d&&d.nodeType===3){f.appendData(d.data);d.parentNode.removeChild(d)}}}else{c.setStartBefore(t);c.setEndBefore(t)}var o=function(t){var n=hc.fromRangeStart(t);var r=Ud(e.getBody());n=r.next(n);if(n){return n.toRange()}};r=m.getParent(t,m.isBlock);m.remove(t);if(r&&m.isEmpty(r)){e.$(r).empty();c.setStart(r,0);c.setEnd(r,0);if(!Hv(r)&&!T(r)&&(i=o(c))){c=i;m.remove(r)}else{m.add(r,m.create("br",{"data-mce-bogus":"1"}))}}g.setRng(c)};if(/^ | $/.test(t)){t=y(t)}r=e.parser;v=n.merge;i=Dv({validate:e.settings.validate},e.schema);h='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>';u={content:t,format:"html",selection:true,paste:n.paste};u=e.fire("BeforeSetContent",u);if(u.isDefaultPrevented()){e.fire("SetContent",{content:u.content,format:"html",selection:true,paste:n.paste});return}t=u.content;if(t.indexOf("{$caret}")===-1){t+="{$caret}"}t=t.replace(/\{\$caret\}/,h);c=g.getRng();var S=c.startContainer||(c.parentElement?c.parentElement():null);var E=e.getBody();if(S===E&&g.isCollapsed()){if(m.isBlock(E.firstChild)&&C(E.firstChild)&&m.isEmpty(E.firstChild)){c=m.createRng();c.setStart(E.firstChild,0);c.setEnd(E.firstChild,0);g.setRng(c)}}if(!g.isCollapsed()){e.selection.setRng(Fv.normalize(e.selection.getRng()));e.getDoc().execCommand("Delete",false,null);b()}a=g.getNode();var P={context:a.nodeName.toLowerCase(),data:n.data,insert:true};s=r.parse(t,P);if(n.paste===true&&ch.isListFragment(e.schema,s)&&ch.isParentBlockLi(m,a)){c=ch.insertAtCaret(i,m,e.selection.getRng(true),s);e.selection.setRng(c);e.fire("SetContent",u);return}w(s);f=s.lastChild;if(f.attr("id")==="mce_marker"){l=f;for(f=f.prev;f;f=f.walk(true)){if(f.type===3||!m.isBlock(f.name)){if(e.schema.isValidChild(f.parent.name,"span")){f.parent.insert(l,f,f.name==="br")}break}}}e._selectionOverrides.showBlockCaretContainer(a);if(!P.invalid){t=i.serialize(s);zv(e,t,a)}else{g.setContent(h);a=g.getNode();o=e.getBody();if(a.nodeType===9){a=f=o}else{f=a}while(f!==o){a=f;f=f.parentNode}t=a===o?o.innerHTML:m.getOuterHTML(a);t=i.serialize(r.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return i.serialize(s)})));if(a===o){m.setHTML(o,t)}else{m.setOuterHTML(a,t)}}_();k(m.get("mce_marker"));x(e.getBody());Uv(e.dom,e.selection.getStart());e.fire("SetContent",u);e.addVisual()};var Wv=function(e){var t;if(typeof e!=="string"){t=Un.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}};var qv=function(e,t){var n=Wv(t);Vv(e,n.content,n.details)};var Yv={insertAtCaret:qv};function Kv(e,t,n,r,i){return e(n,r)?w.some(n):Xi.isFunction(i)&&i(n)?w.none():t(n,r,i)}var $v=function(e){return Qv(wa.body(),e)};var Gv=function(e,t,n){var r=e.dom();var i=Xi.isFunction(n)?n:v.constant(false);while(r.parentNode){r=r.parentNode;var a=Bi.fromDom(r);if(t(a)){return w.some(a)}else if(i(a)){break}}return w.none()};var Xv=function(e,t,n){var r=function(e){return t(e)};return Kv(r,Gv,e,t,n)};var Zv=function(e,t){var n=e.dom();if(!n.parentNode){return w.none()}return Jv(Bi.fromDom(n.parentNode),function(n){return!bo.eq(e,n)&&t(n)})};var Jv=function(e,t){var n=J.find(e.dom().childNodes,v.compose(t,Bi.fromDom));return n.map(Bi.fromDom)};var Qv=function(e,t){var n=function(e){for(var r=0;r<e.childNodes.length;r++){if(t(Bi.fromDom(e.childNodes[r]))){return w.some(Bi.fromDom(e.childNodes[r]))}var i=n(e.childNodes[r]);if(i.isSome()){return i}}return w.none()};return n(e.dom())};var ep={first:$v,ancestor:Gv,closest:Xv,sibling:Zv,child:Jv,descendant:Qv};var tp=Xa.immutable("sections","settings");var np=Ai.detect();var rp=np.deviceType.isTouch();var ip=["lists","autolink","autosave"];var ap={theme:"mobile"};var op=function(e){var t=Xi.isArray(e)?e.join(" "):e;var n=J.map(Xi.isString(t)?t.split(" "):[],xi.trim);return J.filter(n,function(e){return e.length>0})};var sp=function(e){return J.filter(e,v.curry(J.contains,ip))};var up=function(e,t){var n=oa.bifilter(t,function(t,n){return J.contains(e,n)});return tp(n.t,n.f)};var lp=function(e,t,n){var r=e.sections();var i=r.hasOwnProperty(t)?r[t]:{};return Un.extend({},n,i)};var cp=function(e,t){return e.sections().hasOwnProperty(t)};var fp=function(e,t,n){return{id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:t,add_form_submit_trigger:true,submit_patch:true,add_unload_trigger:true,convert_urls:true,relative_urls:true,remove_script_host:true,object_resizing:true,doctype:"<!DOCTYPE html>",visual:true,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:true,padd_empty_editor:true,render_ui:true,indentation:"30px",inline_styles:true,convert_fonts_to_spans:true,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,"+"tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,"+"tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:n.convertURL,url_converter_scope:n,ie7_compat:true}};var dp=function(e,t){var n=t.external_plugins?t.external_plugins:{};if(e&&e.external_plugins){return Un.extend({},e.external_plugins,n)}else{return n}};var hp=function(e,t){return[].concat(op(e)).concat(op(t))};var vp=function(e,t,n,r){var i=op(n.forced_plugins);var a=op(r.plugins);var o=e&&cp(t,"mobile")?sp(a):a;var s=hp(i,o);return Un.extend(r,{plugins:s.join(" ")})};var pp=function(e,t){var n=t.settings().inline;return e&&cp(t,"mobile")&&!n};var gp=function(e,t,n,r){var i=up(["mobile"],r);var a=Un.extend(t,n,i.settings(),pp(e,i)?lp(i,"mobile",ap):{},{validate:true,content_editable:i.settings().inline,external_plugins:dp(n,i.settings())});return vp(e,i,n,a)};var mp=function(e,t,n,r,i){var a=fp(t,n,e);return gp(rp,a,r,i)};var yp=function(e,t,n){return w.from(t.settings[n]).filter(e)};var bp=v.curry(yp,Xi.isString);var _p=function(e){var t={};if(typeof e==="string"){J.each(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(e){e=e.split("=");if(e.length>1){t[Un.trim(e[0])]=Un.trim(e[1])}else{t[Un.trim(e[0])]=Un.trim(e)}})}else{t=e}return t};var wp=function(e,t,n,r){var i=t in e.settings?e.settings[t]:n;if(r==="hash"){return _p(i)}else if(r==="string"){return yp(Xi.isString,e,t).getOr(n)}else if(r==="number"){return yp(Xi.isNumber,e,t).getOr(n)}else if(r==="boolean"){return yp(Xi.isBoolean,e,t).getOr(n)}else if(r==="object"){return yp(Xi.isObject,e,t).getOr(n)}else if(r==="array"){return yp(Xi.isArray,e,t).getOr(n)}else if(r==="function"){return yp(Xi.isFunction,e,t).getOr(n)}else{return i}};var xp=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/;var Tp=function(e){return xp.test(e)};var Cp=function(e,t){var n=bp(e,"inline_boundaries_selector").getOr("a[href],code");return co.is(Bi.fromDom(t),n)};var kp=function(e){return ju.DOM.getStyle(e,"direction",true)==="rtl"||Tp(e.textContent)};var Sp=function(e,t,n){return J.filter(ju.DOM.getParents(n.container(),"*",t),e)};var Ep=function(e,t,n){var r=Sp(e,t,n);return w.from(r[r.length-1])};var Pp=function(e,t,n){var r=dd(t,e);var i=dd(n,e);return r&&r===i};var Op=function(e){return rl(e)||il(e)};var Mp=function(e,t){var n=t.container(),r=t.offset();if(e){if(Qu(n)){if(Ks.isText(n.nextSibling)){return hc(n.nextSibling,0)}else{return hc.after(n)}}else{return rl(t)?hc(n,r+1):t}}else{if(Qu(n)){if(Ks.isText(n.previousSibling)){return hc(n.previousSibling,n.previousSibling.data.length)}else{return hc.before(n)}}else{return il(t)?hc(n,r-1):t}}};var Ap=v.curry(Mp,true);var Np=v.curry(Mp,false);var Rp={isInlineTarget:Cp,findRootInline:Ep,isRtl:kp,isAtZwsp:Op,normalizePosition:Mp,normalizeForwards:Ap,normalizeBackwards:Np,hasSameParentBlock:Pp};var Dp=function(e){return function(t){return bo.eq(e,Bi.fromDom(t.dom().parentNode))}};var Lp=function(e,t){return bo.contains(e,t)?ep.closest(t,function(e){return Cs(e)||Ss(e)},Dp(e)):w.none()};var Ip=function(e){var t=e.getBody();var n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)};var Bp=function(e){if(e.dom.isEmpty(e.getBody())){e.setContent("");Ip(e)}};var jp=function(e,t,n){return Gc.liftN([jc.firstPositionIn(n),jc.lastPositionIn(n)],function(r,i){var a=Rp.normalizePosition(true,r);var o=Rp.normalizePosition(false,i);var s=Rp.normalizePosition(false,t);if(e){return jc.nextPosition(n,s).map(function(e){return e.isEqual(o)&&t.isEqual(a)}).getOr(false)}else{return jc.prevPosition(n,s).map(function(e){return e.isEqual(a)&&t.isEqual(o)}).getOr(false)}}).getOr(true)};var Fp={getParentBlock:Lp,paddEmptyBody:Bp,willDeleteLastPositionInElement:jp};var Hp=function(e){return co.one(e)};var zp=function(e,t,n){return ep.ancestor(e,function(e){return co.is(e,t)},n)};var Up=function(e,t){return ep.sibling(e,function(e){return co.is(e,t)})};var Vp=function(e,t){return ep.child(e,function(e){return co.is(e,t)})};var Wp=function(e,t){return co.one(t,e)};var qp=function(e,t,n){return Kv(co.is,zp,e,t,n)};var Yp={first:Hp,ancestor:zp,sibling:Up,child:Vp,descendant:Wp,closest:qp};var Kp=function(e){return Yp.first(e).isSome()};var $p=function(e,t,n){return Yp.ancestor(e,t,n).isSome()};var Gp=function(e,t){return Yp.sibling(e,t).isSome()};var Xp=function(e,t){return Yp.child(e,t).isSome()};var Zp=function(e,t){return Yp.descendant(e,t).isSome()};var Jp=function(e,t,n){return Yp.closest(e,t,n).isSome()};var Qp={any:Kp,ancestor:$p,sibling:Gp,child:Xp,descendant:Zp,closest:Jp};var eg=function(e,t){var n=Bi.fromDom(e);var r=Bi.fromDom(t);return Qp.ancestor(r,"pre,code",v.curry(bo.eq,n))};var tg=function(e,t){return Ks.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&eg(e,t)===false};var ng=function(e){return Ks.isElement(e)&&e.nodeName==="A"&&e.hasAttribute("name")};var rg=function(e,t){return _l(t)&&tg(e,t)===false||ng(t)||ig(t)};var ig=Ks.hasAttribute("data-mce-bookmark");var ag=Ks.hasAttribute("data-mce-bogus");var og=Ks.hasAttributeValue("data-mce-bogus","all");var sg=function(e){var t,n,r=0;if(rg(e,e)){return false}else{n=e.firstChild;if(!n){return true}t=new cs(n,e);do{if(og(n)){n=t.next(true);continue}if(ag(n)){n=t.next();continue}if(Ks.isBr(n)){r++;n=t.next();continue}if(rg(e,n)){return false}n=t.next()}while(n);return r<=1}};var ug=function(e){return sg(e.dom())};var lg={isEmpty:ug};var cg=Xa.immutable("block","position");var fg=Xa.immutable("from","to");var dg=function(e,t){var n=Bi.fromDom(e);var r=Bi.fromDom(t.container());return Fp.getParentBlock(n,r).map(function(e){return cg(e,t)})};var hg=function(e){return bo.eq(e.from().block(),e.to().block())===false};var vg=function(e){return Ho.parent(e.from().block()).bind(function(t){return Ho.parent(e.to().block()).filter(function(e){return bo.eq(t,e)})}).isSome()};var pg=function(e){return Ks.isContentEditableFalse(e.from().block())===false&&Ks.isContentEditableFalse(e.to().block())===false};var gg=function(e,t,n){if(Ks.isBr(n.position().getNode())&&lg.isEmpty(n.block())===false){return jc.positionIn(false,n.block().dom()).bind(function(r){if(r.isEqual(n.position())){return jc.fromPosition(t,e,r).bind(function(t){return dg(e,t)})}else{return w.some(n)}}).getOr(n)}else{return n}};var mg=function(e,t,n){var r=dg(e,hc.fromRangeStart(n));var i=r.bind(function(n){return jc.fromPosition(t,e,n.position()).bind(function(n){return dg(e,n).map(function(n){return gg(e,t,n)})})});return Gc.liftN([r,i],fg).filter(function(e){return hg(e)&&vg(e)&&pg(e)})};var yg=function(e,t,n){return n.collapsed?mg(e,t,n):w.none()};var bg={read:yg};var _g=function(e){return e.slice(0,-1)};var wg=function(e,t,n){if(bo.contains(t,e)){return _g(Ho.parents(e,function(e){return n(e)||bo.eq(e,t)}))}else{return[]}};var xg=function(e,t){return wg(e,t,v.constant(false))};var Tg=function(e,t){return[e].concat(xg(e,t))};var Cg={parentsUntil:wg,parents:xg,parentsAndSelf:Tg};var kg=function(e){var t=Ho.children(e);return J.findIndex(t,ws).fold(function(){return t},function(e){return t.slice(0,e)})};var Sg=function(e){var t=kg(e);J.each(t,function(e){yv.remove(e)});return t};var Eg=function(e,t){jc.positionIn(e,t.dom()).each(function(e){var t=e.getNode();if(Ks.isBr(t)){yv.remove(Bi.fromDom(t))}})};var Pg=function(e,t){var n=Cg.parentsAndSelf(t,e);return J.find(n.reverse(),lg.isEmpty).each(yv.remove)};var Og=function(e,t){var n=Ho.parents(t,function(t){return bo.eq(t,e)});return w.from(n[n.length-2])};var Mg=function(e,t){if(bo.contains(t,e)){return Ho.parent(e).bind(function(n){return bo.eq(n,t)?w.some(e):Og(t,e)})}else{return w.none()}};var Ag=function(e,t,n){if(lg.isEmpty(n)){yv.remove(n);if(lg.isEmpty(t)){Av.fillWithPaddingBr(t)}return jc.firstPositionIn(t.dom())}else{Eg(true,t);Eg(false,n);var r=Sg(t);return Mg(t,n).fold(function(){Pg(e,t);var i=jc.lastPositionIn(n.dom());J.each(r,function(e){lv.append(n,e)});return i},function(i){var a=jc.prevPosition(n.dom(),hc.before(i.dom()));J.each(r,function(e){lv.before(i,e)});Pg(e,t);return a})}};var Ng=function(e,t,n,r){return t?Ag(e,r,n):Ag(e,n,r)};var Rg={mergeBlocks:Ng};var Dg=function(e,t){var n;var r=Bi.fromDom(e.getBody());n=bg.read(r.dom(),t,e.selection.getRng()).bind(function(e){return Rg.mergeBlocks(r,t,e.from().block(),e.to().block())});n.each(function(t){e.selection.setRng(t.toRange())});return n.isSome()};var Lg={backspaceDelete:Dg};var Ig=function(e,t){var n=t.getRng();return Gc.liftN([Fp.getParentBlock(e,Bi.fromDom(n.startContainer)),Fp.getParentBlock(e,Bi.fromDom(n.endContainer))],function(r,i){if(bo.eq(r,i)===false){n.deleteContents();Rg.mergeBlocks(e,true,r,i).each(function(e){t.setRng(e.toRange())});return true}else{return false}}).getOr(false)};var Bg=function(e,t){var n=Bi.fromDom(t);var r=v.curry(bo.eq,e);return ep.ancestor(n,Os,r).isSome()};var jg=function(e,t){return Bg(e,t.startContainer)||Bg(e,t.endContainer)};var Fg=function(e,t){var n=jc.prevPosition(e.dom(),hc.fromRangeStart(t)).isNone();var r=jc.nextPosition(e.dom(),hc.fromRangeEnd(t)).isNone();return!jg(e,t)&&n&&r};var Hg=function(e){e.setContent("");e.selection.setCursorLocation();return true};var zg=function(e){var t=Bi.fromDom(e.getBody());var n=e.selection.getRng();return Fg(t,n)?Hg(e):Ig(t,e.selection)};var Ug=function(e,t){return e.selection.isCollapsed()?false:zg(e)};var Vg={backspaceDelete:Ug};var Wg=function(e){if(!Xi.isArray(e)){throw new Error("cases must be an array")}if(e.length===0){throw new Error("there must be at least one case")}var t=[];var n={};J.each(e,function(r,i){var a=oa.keys(r);if(a.length!==1){throw new Error("one and only one name per case")}var o=a[0];var s=r[o];if(n[o]!==undefined){throw new Error("duplicate key detected:"+o)}else if(o==="cata"){throw new Error("cannot have a case named cata (sorry)")}else if(!Xi.isArray(s)){throw new Error("case arguments must be an array")}t.push(o);n[o]=function(){var n=arguments.length;if(n!==s.length){throw new Error("Wrong number of arguments to case "+o+". Expected "+s.length+" ("+s+"), got "+n)}var r=new Array(n);for(var a=0;a<r.length;a++){r[a]=arguments[a]}var u=function(e){var n=oa.keys(e);if(t.length!==n.length){throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","))}var i=J.forall(t,function(e){return J.contains(n,e)});if(!i){throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "))}return e[o].apply(null,r)};return{fold:function(){if(arguments.length!==e.length){throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length)}var t=arguments[i];return t.apply(null,r)},match:u,log:function(e){console.log(e,{constructors:t,constructor:o,params:r})}}}});return n};var qg={generate:Wg};var Yg=function(e){return Os(Bi.fromDom(e))||Ss(Bi.fromDom(e))};var Kg=qg.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]);var $g=function(e,t){var n=t.getNode(e===false);var r=e?"after":"before";return Ks.isElement(n)&&n.getAttribute("data-mce-caret")===r};var Gg=function(e,t,n,r){var i=function(t){return xs(Bi.fromDom(t))&&!hd(n,r,e)};return Td(!t,n).fold(function(){return Td(t,r).fold(v.constant(false),i)},i)};var Xg=function(e,t,n,r){var i=r.getNode(t===false);return Fp.getParentBlock(Bi.fromDom(e),Bi.fromDom(n.getNode())).map(function(e){return lg.isEmpty(e)?Kg.remove(e.dom()):Kg.moveToElement(i)}).orThunk(function(){return w.some(Kg.moveToElement(i))})};var Zg=function(e,t,n){return jc.fromPosition(t,e,n).bind(function(r){if(Yg(r.getNode())){return w.none()}else if(Gg(e,t,n,r)){return w.none()}else if(t&&Ks.isContentEditableFalse(r.getNode())){return Xg(e,t,n,r)}else if(t===false&&Ks.isContentEditableFalse(r.getNode(true))){return Xg(e,t,n,r)}else if(t&&Sd(n)){return w.some(Kg.moveToPosition(r))}else if(t===false&&kd(n)){return w.some(Kg.moveToPosition(r))}else{return w.none()}})};var Jg=function(e,t){if(e&&Ks.isContentEditableFalse(t.nextSibling)){return w.some(Kg.moveToElement(t.nextSibling))}else if(e===false&&Ks.isContentEditableFalse(t.previousSibling)){return w.some(Kg.moveToElement(t.previousSibling))}else{return w.none()}};var Qg=function(e,t,n){return n.fold(function(e){return w.some(Kg.remove(e))},function(e){return w.some(Kg.moveToElement(e))},function(n){if(hd(t,n,e)){return w.none()}else{return w.some(Kg.moveToPosition(n))}})};var em=function(e,t,n){if($g(t,n)){return Jg(t,n.getNode(t===false)).fold(function(){return Zg(e,t,n)},w.some)}else{return Zg(e,t,n).bind(function(t){return Qg(e,n,t)})}};var tm=function(e,t,n){var r=_d(t?1:-1,e,n);var i=hc.fromRangeStart(r);if(t===false&&Sd(i)){return w.some(Kg.remove(i.getNode(true)))}else if(t&&kd(i)){return w.some(Kg.remove(i.getNode()))}else{return em(e,t,i)}};var nm=function(e,t){var n=e.container();var r=e.offset();return hc.isTextPosition(e)===false&&n===t.parentNode&&r>hc.before(t).offset()};var rm=function(e,t){return nm(t,e)?hc(t.container(),t.offset()-1):t};var im=function(e){return Ks.isText(e)?hc(e,0):hc.before(e)};var am=function(e){return Ks.isText(e)?hc(e,e.data.length):hc.after(e)};var om=function(e){if(_l(e.previousSibling)){return w.some(am(e.previousSibling))}else{return e.previousSibling?jc.lastPositionIn(e.previousSibling):w.none()}};var sm=function(e){if(_l(e.nextSibling)){return w.some(im(e.nextSibling))}else{return e.nextSibling?jc.firstPositionIn(e.nextSibling):w.none()}};var um=function(e,t){var n=hc.before(t.previousSibling?t.previousSibling:t.parentNode);return jc.prevPosition(e,n).fold(function(){return jc.nextPosition(e,hc.after(t))},w.some)};var lm=function(e,t){return jc.nextPosition(e,hc.after(t)).fold(function(){return jc.prevPosition(e,hc.before(t))},w.some)};var cm=function(e,t){return om(t).orThunk(function(){return sm(t)}).orThunk(function(){return um(e,t)})};var fm=function(e,t){return sm(t).orThunk(function(){return om(t)}).orThunk(function(){return lm(e,t)})};var dm=function(e,t,n){return e?fm(t,n):cm(t,n)};var hm=function(e,t,n){return dm(e,t,n).map(v.curry(rm,n))};var vm=function(e,t,n){n.fold(function(){e.focus()},function(n){e.selection.setRng(n.toRange(),t)})};var pm=function(e){return function(t){return t.dom()===e}};var gm=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(Ki.name(t))};var mm=function(e){if(lg.isEmpty(e)){var t=Bi.fromHtml('<br data-mce-bogus="1">');yv.empty(e);lv.append(e,t);return w.some(hc.before(t.dom()))}else{return w.none()}};var ym=function(e,t){return Gc.liftN([Ho.prevSibling(e),Ho.nextSibling(e),t],function(t,n,r){var i;var a=t.dom();var o=n.dom();if(Ks.isText(a)&&Ks.isText(o)){i=a.data.length;a.appendData(o.data);yv.remove(n);yv.remove(e);if(r.container()===o){return hc(a,i)}else{return r}}else{yv.remove(e);return r}}).orThunk(function(){yv.remove(e);return t})};var bm=function(e,t,n){var r=hm(t,e.getBody(),n.dom());var i=ep.ancestor(n,v.curry(gm,e),pm(e.getBody()));var a=ym(n,r);if(e.dom.isEmpty(e.getBody())){e.setContent("");e.selection.setCursorLocation()}else{i.bind(mm).fold(function(){vm(e,t,a)},function(n){vm(e,t,w.some(n))})}};var _m={deleteElement:bm};var wm=function(e,t){return function(n){e._selectionOverrides.hideFakeCaret();_m.deleteElement(e,t,Bi.fromDom(n));return true}};var xm=function(e,t){return function(n){var r=t?hc.before(n):hc.after(n);e.selection.setRng(r.toRange());return true}};var Tm=function(e){return function(t){e.selection.setRng(t.toRange());return true}};var Cm=function(e,t){var n=tm(e.getBody(),t,e.selection.getRng()).map(function(n){return n.fold(wm(e,t),xm(e,t),Tm(e))});return n.getOr(false)};var km=function(e){J.each(Cf.descendants(e,".mce-offscreen-selection"),yv.remove)};var Sm=function(e,t){var n=e.selection.getNode();if(Ks.isContentEditableFalse(n)){km(Bi.fromDom(e.getBody()));_m.deleteElement(e,t,Bi.fromDom(e.selection.getNode()));Fp.paddEmptyBody(e);return true}else{return false}};var Em=function(e,t){while(t&&t!==e){if(Ks.isContentEditableTrue(t)||Ks.isContentEditableFalse(t)){return t}t=t.parentNode}return null};var Pm=function(e){var t;var n=Em(e.getBody(),e.selection.getNode());if(Ks.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)){t=e.dom.create("br",{"data-mce-bogus":"1"});e.dom.setHTML(n,"");n.appendChild(t);e.selection.setRng(hc.before(t).toRange())}return true};var Om=function(e,t){if(e.selection.isCollapsed()){return Cm(e,t)}else{return Sm(e,t)}};var Mm={backspaceDelete:Om,paddEmptyElement:Pm};var Am=Ks.isText;var Nm=function(e){return Am(e)&&e.data[0]===Gu.ZWSP};var Rm=function(e){return Am(e)&&e.data[e.data.length-1]===Gu.ZWSP};var Dm=function(e){return e.ownerDocument.createTextNode(Gu.ZWSP)};var Lm=function(e){if(Am(e.previousSibling)){if(Rm(e.previousSibling)){return e.previousSibling}else{e.previousSibling.appendData(Gu.ZWSP);return e.previousSibling}}else if(Am(e)){if(Nm(e)){return e}else{e.insertData(0,Gu.ZWSP);return e}}else{var t=Dm(e);e.parentNode.insertBefore(t,e);return t}};var Im=function(e){if(Am(e.nextSibling)){if(Nm(e.nextSibling)){return e.nextSibling}else{e.nextSibling.insertData(0,Gu.ZWSP);return e.nextSibling}}else if(Am(e)){if(Rm(e)){return e}else{e.appendData(Gu.ZWSP);return e}}else{var t=Dm(e);if(e.nextSibling){e.parentNode.insertBefore(t,e.nextSibling)}else{e.parentNode.appendChild(t)}return t}};var Bm=function(e,t){return e?Lm(t):Im(t)};var jm=v.curry(Bm,true);var Fm=v.curry(Bm,false);var Hm=function(e,t){if(Ks.isText(e.container())){return Bm(t,e.container())}else{return Bm(t,e.getNode())}};var zm=function(e,t){var n=t.get();return n&&e.container()===n&&Qu(n)};var Um=function(e,t){return t.fold(function(t){Ec.remove(e.get());var n=jm(t);e.set(n);return w.some(hc(n,n.length-1))},function(t){return jc.firstPositionIn(t).map(function(t){if(!zm(t,e)){Ec.remove(e.get());var n=Hm(t,true);e.set(n);return hc(n,1)}else{return hc(e.get(),1)}})},function(t){return jc.lastPositionIn(t).map(function(t){if(!zm(t,e)){Ec.remove(e.get());var n=Hm(t,false);e.set(n);return hc(n,n.length-1)}else{return hc(e.get(),e.get().length-1)}})},function(t){Ec.remove(e.get());var n=Fm(t);e.set(n);return w.some(hc(n,1))})};var Vm={renderCaret:Um};var Wm=function(e){return e&&/^(IMG)$/.test(e.nodeName)};var qm=function(e,t,n){var r=n.startContainer,i=n.startOffset,a,o,s;if(n.startContainer===n.endContainer){if(Wm(n.startContainer.childNodes[n.startOffset])){return}}if(r.nodeType===3&&i>=r.nodeValue.length){i=e.nodeIndex(r);r=r.parentNode}if(r.nodeType===1){s=r.childNodes;if(i<s.length){r=s[i];a=new cs(r,e.getParent(r,e.isBlock))}else{r=s[s.length-1];a=new cs(r,e.getParent(r,e.isBlock));a.next(true)}for(o=a.current();o;o=a.next()){if(o.nodeType===3&&!Gm(o)){n.setStart(o,0);t.setRng(n);return}}}};var Ym=function(e,t,n){if(e){t=t?"nextSibling":"previousSibling";for(e=n?e:e[t];e;e=e[t]){if(e.nodeType===1||!Gm(e)){return e}}}};var Km=function(e,t){if(t.nodeType){t=t.nodeName}return!!e.schema.getTextBlockElements()[t.toLowerCase()]};var $m=function(e,t,n){return e.schema.isValidChild(t,n)};var Gm=function(e){return e&&e.nodeType===3&&/^([\t \r\n]+|)$/.test(e.nodeValue)};var Xm=function(e,t){if(typeof e!=="string"){e=e(t)}else if(t){e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})}return e};var Zm=function(e,t){e=e||"";t=t||"";e=""+(e.nodeName||e);t=""+(t.nodeName||t);return e.toLowerCase()===t.toLowerCase()};var Jm=function(e,t,n){if(n==="color"||n==="backgroundColor"){t=e.toHex(t)}if(n==="fontWeight"&&t===700){t="bold"}if(n==="fontFamily"){t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")}return""+t};var Qm=function(e,t,n){return Jm(e,e.getStyle(t,n),n)};var ey=function(e,t){var n;e.getParent(t,function(t){n=e.getStyle(t,"text-decoration");return n&&n!=="none"});return n};var ty=function(e,t,n){return e.getParents(t,n,e.getRoot())};var ny={isInlineBlock:Wm,moveStart:qm,getNonWhiteSpaceSibling:Ym,isTextBlock:Km,isValid:$m,isWhiteSpaceNode:Gm,replaceVars:Xm,isEq:Zm,normalizeStyleValue:Jm,getStyle:Qm,getTextDecoration:ey,getParents:ty};var ry=ev.isBookmarkNode;var iy=ny.getParents;var ay=ny.isWhiteSpaceNode;var oy=ny.isTextBlock;var sy=function(e,t){if(typeof t==="undefined"){t=e.nodeType===3?e.length:e.childNodes.length}while(e&&e.hasChildNodes()){e=e.childNodes[t];if(e){t=e.nodeType===3?e.length:e.childNodes.length}}return{node:e,offset:t}};var uy=function(e,t){var n=sy(e,t);if(n.node){while(n.node&&n.offset===0&&n.node.previousSibling){n=sy(n.node.previousSibling)}if(n.node&&n.offset>0&&n.node.nodeType===3&&n.node.nodeValue.charAt(n.offset-1)===" "){if(n.offset>1){e=n.node;e.splitText(n.offset-1)}}}return e};var ly=function(e){return e.nodeName==="BR"&&e.getAttribute("data-mce-bogus")&&!e.nextSibling};var cy=function(e,t){var n=t;while(n){if(n.nodeType===1&&e.getContentEditable(n)){return e.getContentEditable(n)==="false"?n:t}n=n.parentNode}return t};var fy=function(e,t,n,r){var i,a;var o=n.nodeValue;if(typeof r==="undefined"){r=e?o.length:0}if(e){i=o.lastIndexOf(" ",r);a=o.lastIndexOf("¬†",r);i=i>a?i:a;if(i!==-1&&!t){i++}}else{i=o.indexOf(" ",r);a=o.indexOf("¬†",r);i=i!==-1&&(a===-1||i<a)?i:a}return i};var dy=function(e,t,n,r,i,a){var o,s,u,l;if(n.nodeType===3){u=fy(i,a,n,r);if(u!==-1){return{container:n,offset:u}}l=n}o=new cs(n,e.getParent(n,e.isBlock)||t);while(s=o[i?"prev":"next"]()){if(s.nodeType===3){l=s;u=fy(i,a,s);if(u!==-1){return{container:s,offset:u}}}else if(e.isBlock(s)){break}}if(l){if(i){r=0}else{r=l.length}return{container:l,offset:r}}};var hy=function(e,t,n,r,i){var a,o,s,u;if(r.nodeType===3&&r.nodeValue.length===0&&r[i]){r=r[i]}a=iy(e,r);for(o=0;o<a.length;o++){for(s=0;s<t.length;s++){u=t[s];if("collapsed"in u&&u.collapsed!==n.collapsed){continue}if(e.is(a[o],u.selector)){return a[o]}}}return r};var vy=function(e,t,n,r){var i;var a=e.dom;var o=a.getRoot();if(!t[0].wrapper){i=a.getParent(n,t[0].block,o)}if(!i){var s=a.getParent(n,"LI,TD,TH");i=a.getParent(n.nodeType===3?n.parentNode:n,function(t){return t!==o&&oy(e,t)},s)}if(i&&t[0].wrapper){i=iy(a,i,"ul,ol").reverse()[0]||i}if(!i){i=n;while(i[r]&&!a.isBlock(i[r])){i=i[r];if(ny.isEq(i,"br")){break}}}return i||n};var py=function(e,t,n,r,i,a,o){var s,u,l,c,f;s=u=o?n:i;c=o?"previousSibling":"nextSibling";f=e.getRoot();if(s.nodeType===3&&!ay(s)){if(o?r>0:a<s.nodeValue.length){return s}}while(true){if(!t[0].block_expand&&e.isBlock(u)){return u}for(l=u[c];l;l=l[c]){if(!ry(l)&&!ay(l)&&!ly(l)){return u}}if(u===f||u.parentNode===f){s=u;break}u=u.parentNode}return s};var gy=function(e,t,n,r){var i,a=t.startContainer,o=t.startOffset,s=t.endContainer,u=t.endOffset;var l=e.dom;if(a.nodeType===1&&a.hasChildNodes()){a=Dl(a,o);if(a.nodeType===3){o=0}}if(s.nodeType===1&&s.hasChildNodes()){s=Dl(s,t.collapsed?u:u-1);if(s.nodeType===3){u=s.nodeValue.length}}a=cy(l,a);s=cy(l,s);if(ry(a.parentNode)||ry(a)){a=ry(a)?a:a.parentNode;a=a.nextSibling||a;if(a.nodeType===3){o=0}}if(ry(s.parentNode)||ry(s)){s=ry(s)?s:s.parentNode;s=s.previousSibling||s;if(s.nodeType===3){u=s.length}}if(n[0].inline){if(t.collapsed){i=dy(l,e.getBody(),a,o,true,r);if(i){a=i.container;o=i.offset}i=dy(l,e.getBody(),s,u,false,r);if(i){s=i.container;u=i.offset}}s=r?s:uy(s,u)}if(n[0].inline||n[0].block_expand){if(!n[0].inline||(a.nodeType!==3||o===0)){a=py(l,n,a,o,s,u,true)}if(!n[0].inline||(s.nodeType!==3||u===s.nodeValue.length)){s=py(l,n,a,o,s,u,false)}}if(n[0].selector&&n[0].expand!==false&&!n[0].inline){a=hy(l,n,t,a,"previousSibling");s=hy(l,n,t,s,"nextSibling")}if(n[0].block||n[0].selector){a=vy(e,n,a,"previousSibling");s=vy(e,n,s,"nextSibling");if(n[0].block){if(!l.isBlock(a)){a=py(l,n,a,o,s,u,true)}if(!l.isBlock(s)){s=py(l,n,a,o,s,u,false)}}}if(a.nodeType===1){o=l.nodeIndex(a);a=a.parentNode}if(s.nodeType===1){u=l.nodeIndex(s)+1;s=s.parentNode}return{startContainer:a,startOffset:o,endContainer:s,endOffset:u}};var my={expandRng:gy};var yy=ny.isEq;var by=function(e,t,n){var r=e.formatter.get(n);if(r){for(var i=0;i<r.length;i++){if(r[i].inherit===false&&e.dom.is(t,r[i].selector)){return true}}}return false};var _y=function(e,t,n,r){var i=e.dom.getRoot();if(t===i){return false}t=e.dom.getParent(t,function(t){if(by(e,t,n)){return true}return t.parentNode===i||!!Ty(e,t,n,r,true)});return Ty(e,t,n,r)};var wy=function(e,t,n){if(yy(t,n.inline)){return true}if(yy(t,n.block)){return true}if(n.selector){return t.nodeType===1&&e.is(t,n.selector)}};var xy=function(e,t,n,r,i,a){var o,s;var u=n[r];var l;if(n.onmatch){return n.onmatch(t,n,r)}if(u){if(typeof u.length==="undefined"){for(o in u){if(u.hasOwnProperty(o)){if(r==="attributes"){s=e.getAttrib(t,o)}else{s=ny.getStyle(e,t,o)}if(i&&!s&&!n.exact){return}if((!i||n.exact)&&!yy(s,ny.normalizeStyleValue(e,ny.replaceVars(u[o],a),o))){return}}}}else{for(l=0;l<u.length;l++){if(r==="attributes"?e.getAttrib(t,u[l]):ny.getStyle(e,t,u[l])){return n}}}}return n};var Ty=function(e,t,n,r,i){var a=e.formatter.get(n);var o,s,u,l;var c=e.dom;if(a&&t){for(s=0;s<a.length;s++){o=a[s];if(wy(e.dom,t,o)&&xy(c,t,o,"attributes",i,r)&&xy(c,t,o,"styles",i,r)){if(l=o.classes){for(u=0;u<l.length;u++){if(!e.dom.hasClass(t,l[u])){return}}}return o}}}};var Cy=function(e,t,n,r){var i;if(r){return _y(e,r,t,n)}r=e.selection.getNode();if(_y(e,r,t,n)){return true}i=e.selection.getStart();if(i!==r){if(_y(e,i,t,n)){return true}}return false};var ky=function(e,t,n){var r;var i=[];var a={};r=e.selection.getStart();e.dom.getParent(r,function(r){var o,s;for(o=0;o<t.length;o++){s=t[o];if(!a[s]&&Ty(e,r,s,n)){a[s]=true;i.push(s)}}},e.dom.getRoot());return i};var Sy=function(e,t){var n=e.formatter.get(t);var r,i,a,o,s;var u=e.dom;if(n){r=e.selection.getStart();i=ny.getParents(u,r);for(o=n.length-1;o>=0;o--){s=n[o].selector;if(!s||n[o].defaultBlock){return true}for(a=i.length-1;a>=0;a--){if(u.is(i[a],s)){return true}}}}return false};var Ey={matchNode:Ty,matchName:wy,match:Cy,matchAll:ky,canApply:Sy,matchesUnInheritedFormatSelector:by};var Py=function(e,t){return e.splitText(t)};var Oy=function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset;if(t===r&&Ks.isText(t)){if(n>0&&n<t.nodeValue.length){r=Py(t,n);t=r.previousSibling;if(i>n){i=i-n;t=r=Py(r,i).previousSibling;i=r.nodeValue.length;n=0}else{i=0}}}else{if(Ks.isText(t)&&n>0&&n<t.nodeValue.length){t=Py(t,n);n=0}if(Ks.isText(r)&&i>0&&i<r.nodeValue.length){r=Py(r,i).previousSibling;i=r.nodeValue.length}}return{startContainer:t,startOffset:n,endContainer:r,endOffset:i}};var My={split:Oy};var Ay=Gu.ZWSP;var Ny="_mce_caret";var Ry=function(e,t){return e.importNode(t,true)};var Dy=function(e){return e.nodeType===1&&e.id===Ny};var Ly=function(e){var t=[];while(e){if(e.nodeType===3&&e.nodeValue!==Ay||e.childNodes.length>1){return[]}if(e.nodeType===1){t.push(e)}e=e.firstChild}return t};var Iy=function(e){return Ly(e).length>0};var By=function(e){var t;if(e){t=new cs(e,e);for(e=t.current();e;e=t.next()){if(e.nodeType===3){return e}}}return null};var jy=function(e){var t=Bi.fromTag("span");ma.setAll(t,{id:Ny,"data-mce-bogus":"1","data-mce-type":"format-caret"});if(e){lv.append(t,Bi.fromText(Ay))}return t};var Fy=function(e,t){while(t&&t!==e){if(t.id===Ny){return t}t=t.parentNode}return null};var Hy=function(e){var t=By(e);if(t&&t.nodeValue.charAt(0)===Ay){t.deleteData(0,1)}return t};var zy=function(e,t,n,r){var i,a,o;i=t.getRng(true);a=e.getParent(n,e.isBlock);if(Iy(n)){if(r!==false){i.setStartBefore(n);i.setEndBefore(n)}e.remove(n)}else{o=Hy(n);if(i.startContainer===o&&i.startOffset>0){i.setStart(o,i.startOffset-1)}if(i.endContainer===o&&i.endOffset>0){i.setEnd(o,i.endOffset-1)}e.remove(n,true)}if(a&&e.isEmpty(a)){Av.fillWithPaddingBr(Bi.fromDom(a))}t.setRng(i)};var Uy=function(e,t,n,r,i){if(!r){r=Fy(e,n.getStart());if(!r){while(r=t.get(Ny)){zy(t,n,r,false)}}}else{zy(t,n,r,i)}};var Vy=function(e,t,n){var r=e.dom,i=r.getParent(n,ql.curry(ny.isTextBlock,e));if(i&&r.isEmpty(i)){n.parentNode.replaceChild(t,n)}else{Av.removeTrailingBr(Bi.fromDom(n));if(r.isEmpty(n)){n.parentNode.replaceChild(t,n)}else{r.insertAfter(t,n)}}};var Wy=function(e,t){e.appendChild(t);return t};var qy=function(e,t){var n=J.foldr(e,function(e,t){return Wy(e,t.cloneNode(false))},t);return Wy(n,n.ownerDocument.createTextNode(Ay))};var Yy=function(e,t,n){var r,i,a,o,s,u,l;var c=e.selection;r=c.getRng(true);o=r.startOffset;u=r.startContainer;l=u.nodeValue;i=Fy(e.getBody(),c.getStart());if(i){a=By(i)}var f=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(l&&o>0&&o<l.length&&f.test(l.charAt(o))&&f.test(l.charAt(o-1))){s=c.getBookmark();r.collapse(true);r=my.expandRng(e,r,e.formatter.get(t));r=My.split(r);e.formatter.apply(t,n,r);c.moveToBookmark(s)}else{if(!i||a.nodeValue!==Ay){i=Ry(e.getDoc(),jy(true).dom());a=i.firstChild;r.insertNode(i);o=1;e.formatter.apply(t,n,i)}else{e.formatter.apply(t,n,i)}c.setCursorLocation(a,o)}};var Ky=function(e,t,n,r){var i=e.dom,a=e.selection;var o,s,u;var l,c,f;var d=[],h=a.getRng();var v;o=h.startContainer;s=h.startOffset;c=o;if(o.nodeType===3){if(s!==o.nodeValue.length){l=true}c=c.parentNode}while(c){if(Ey.matchNode(e,c,t,n,r)){f=c;break}if(c.nextSibling){l=true}d.push(c);c=c.parentNode}if(!f){return}if(l){u=a.getBookmark();h.collapse(true);var p=my.expandRng(e,h,e.formatter.get(t),true);p=My.split(p);e.formatter.remove(t,n,p);a.moveToBookmark(u)}else{v=Fy(e.getBody(),f);var g=jy(false).dom();var m=qy(d,g);if(v){Vy(e,g,v)}else{Vy(e,g,f)}zy(i,a,v,false);a.setCursorLocation(m,1);if(i.isEmpty(f)){i.remove(f)}}};var $y=function(e,t,n,r){Uy(e,t,n,null,false);if(r===8&&n.isCollapsed()&&n.getStart().innerHTML===Ay){Uy(e,t,n,Fy(e,n.getStart()))}if(r===37||r===39){Uy(e,t,n,Fy(e,n.getStart()))}};var Gy=function(e){var t=e.dom,n=e.selection;var r=e.getBody();e.on("mouseup keydown",function(e){$y(r,t,n,e.keyCode)})};var Xy=function(e,t){var n=jy(false);var r=qy(t,n.dom());lv.before(Bi.fromDom(e),n);yv.remove(Bi.fromDom(e));return hc(r,0)};var Zy=function(e,t){var n=e.schema.getTextInlineElements();return n.hasOwnProperty(Ki.name(t))&&!Dy(t.dom())&&!Ks.isBogus(t.dom())};var Jy={setup:Gy,applyCaretFormat:Yy,removeCaretFormat:Ky,isCaretNode:Dy,getParentCaretContainer:Fy,replaceWithCaretFormat:Xy,isFormatElement:Zy};var Qy=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].apply(null,t);if(r.isSome()){return r}}return w.none()};var eb={evaluateUntil:Qy};var tb=qg.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]);var nb=function(e,t){var n=dd(t,e);return n?n:e};var rb=function(e,t,n){var r=Rp.normalizeForwards(n);var i=nb(t,r.container());return Rp.findRootInline(e,i,r).fold(function(){return jc.nextPosition(i,r).bind(v.curry(Rp.findRootInline,e,i)).map(function(e){return tb.before(e)})},w.none)};var ib=function(e,t){return Jy.getParentCaretContainer(e,t)===null};var ab=function(e,t,n){return Rp.findRootInline(e,t,n).filter(v.curry(ib,t))};var ob=function(e,t,n){var r=Rp.normalizeBackwards(n);return ab(e,t,r).bind(function(e){var t=jc.prevPosition(e,r);return t.isNone()?w.some(tb.start(e)):w.none()})};var sb=function(e,t,n){var r=Rp.normalizeForwards(n);return ab(e,t,r).bind(function(e){var t=jc.nextPosition(e,r);return t.isNone()?w.some(tb.end(e)):w.none()})};var ub=function(e,t,n){var r=Rp.normalizeBackwards(n);var i=nb(t,r.container());return Rp.findRootInline(e,i,r).fold(function(){return jc.prevPosition(i,r).bind(v.curry(Rp.findRootInline,e,i)).map(function(e){return tb.after(e)})},w.none)};var lb=function(e){return Rp.isRtl(fb(e))===false};var cb=function(e,t,n){var r=eb.evaluateUntil([rb,ob,sb,ub],[e,t,n]);return r.filter(lb)};var fb=function(e){return e.fold(v.identity,v.identity,v.identity,v.identity)};var db=function(e){return e.fold(v.constant("before"),v.constant("start"),v.constant("end"),v.constant("after"))};var hb=function(e){return e.fold(tb.before,tb.before,tb.after,tb.after)};var vb=function(e){return e.fold(tb.start,tb.start,tb.end,tb.end)};var pb=function(e,t){return db(e)===db(t)&&fb(e)===fb(t)};var gb=function(e,t,n,r,i,a){return Gc.liftN([Rp.findRootInline(t,n,r),Rp.findRootInline(t,n,i)],function(t,r){if(t!==r&&Rp.hasSameParentBlock(n,t,r)){return tb.after(e?t:r)}else{return a}}).getOr(a)};var mb=function(e,t){return e.fold(v.constant(true),function(e){return!pb(e,t)})};var yb=function(e,t,n,r,i){var a=Rp.normalizePosition(e,i);var o=jc.fromPosition(e,n,a).map(v.curry(Rp.normalizePosition,e));var s=o.fold(function(){return r.map(hb)},function(i){return cb(t,n,i).map(v.curry(gb,e,t,n,a,i)).filter(v.curry(mb,r))});return s.filter(lb)};var bb=function(e,t){if(e){return t.fold(v.compose(w.some,tb.start),w.none,v.compose(w.some,tb.after),w.none)}else{return t.fold(w.none,v.compose(w.some,tb.before),w.none,v.compose(w.some,tb.end))}};var _b=function(e,t,n,r){var i=Rp.normalizePosition(e,r);var a=cb(t,n,i);return cb(t,n,i).bind(v.curry(bb,e)).orThunk(function(){return yb(e,t,n,a,r)})};var wb={readLocation:cb,findLocation:_b,prevLocation:v.curry(_b,false),nextLocation:v.curry(_b,true),getElement:fb,outside:hb,inside:vb};var xb=function(e){var t=e;var n=function(){return t};var r=function(e){t=e};var i=function(){return xb(n())};return{get:n,set:r,clone:i}};var Tb=function(e){return Xi.isFunction(e.selection.getSel().modify)};var Cb=function(e,t,n){var r=e?1:-1;t.setRng(hc(n.container(),n.offset()+r).toRange());t.getSel().modify("move",e?"forward":"backward","word");return true};var kb=function(e,t){var n=t.selection.getRng();var r=e?hc.fromRangeEnd(n):hc.fromRangeStart(n);if(!Tb(t)){return false}else if(e&&rl(r)){return Cb(true,t.selection,r)}else if(!e&&il(r)){return Cb(false,t.selection,r)}else{return false}};var Sb={hasSelectionModifyApi:Tb,moveByWord:kb};var Eb=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset());n.setEnd(t.container(),t.offset());e.selection.setRng(n)};var Pb=function(e){return e.settings.inline_boundaries!==false};var Ob=function(e,t){if(e){t.setAttribute("data-mce-selected","inline-boundary")}else{t.removeAttribute("data-mce-selected")}};var Mb=function(e,t,n){return Vm.renderCaret(t,n).map(function(t){Eb(e,t);return n})};var Ab=function(e,t,n){var r=e.getBody();var i=hc.fromRangeStart(e.selection.getRng());var a=v.curry(Rp.isInlineTarget,e);var o=wb.findLocation(n,a,r,i);return o.bind(function(n){return Mb(e,t,n)})};var Nb=function(e,t,n){var r=J.filter(t.select('*[data-mce-selected="inline-boundary"]'),e);var i=J.filter(n,e);J.each(J.difference(r,i),v.curry(Ob,false));J.each(J.difference(i,r),v.curry(Ob,true))};var Rb=function(e,t){if(e.selection.isCollapsed()&&e.composing!==true&&t.get()){var n=hc.fromRangeStart(e.selection.getRng());if(hc.isTextPosition(n)&&Rp.isAtZwsp(n)===false){Eb(e,Ec.removeAndReposition(t.get(),n));t.set(null)}}};var Db=function(e,t,n,r){if(t.selection.isCollapsed()){var i=J.filter(r,e);J.each(i,function(r){var i=hc.fromRangeStart(t.selection.getRng());wb.readLocation(e,t.getBody(),i).bind(function(e){return Mb(t,n,e)})})}};var Lb=function(e,t,n){return function(){return Pb(e)?Ab(e,t,n).isSome():false}};var Ib=function(e,t,n){return function(){return Pb(t)?Sb.moveByWord(e,t):false}};var Bb=function(e){var t=xb(null);var n=v.curry(Rp.isInlineTarget,e);e.on("NodeChange",function(r){if(Pb(e)){Nb(n,e.dom,r.parents);Rb(e,t);Db(n,e,t,r.parents)}});return t};var jb={move:Lb,moveNextWord:v.curry(Ib,true),movePrevWord:v.curry(Ib,false),setupSelectedState:Bb,setCaretPosition:Eb};var Fb=function(e){return e.settings.inline_boundaries!==false};var Hb=function(e,t){var n=document.createRange();n.setStart(e.container(),e.offset());n.setEnd(t.container(),t.offset());return n};var zb=function(e){return Gc.liftN([jc.firstPositionIn(e),jc.lastPositionIn(e)],function(t,n){var r=Rp.normalizePosition(true,t);var i=Rp.normalizePosition(false,n);return jc.nextPosition(e,r).map(function(e){return e.isEqual(i)}).getOr(true)}).getOr(true)};var Ub=function(e,t){return function(n){return Vm.renderCaret(t,n).map(function(t){jb.setCaretPosition(e,t);return true}).getOr(false)}};var Vb=function(e,t,n,r){var i=e.getBody();var a=v.curry(Rp.isInlineTarget,e);e.undoManager.ignore(function(){e.selection.setRng(Hb(n,r));e.execCommand("Delete");wb.readLocation(a,i,hc.fromRangeStart(e.selection.getRng())).map(wb.inside).map(Ub(e,t))});e.nodeChanged()};var Wb=function(e,t){var n=dd(t,e);return n?n:e};var qb=function(e,t,n,r){var i=Wb(e.getBody(),r.container());var a=v.curry(Rp.isInlineTarget,e);var o=wb.readLocation(a,i,r);return o.bind(function(e){if(n){return e.fold(v.constant(w.some(wb.inside(e))),w.none,v.constant(w.some(wb.outside(e))),w.none)}else{return e.fold(w.none,v.constant(w.some(wb.outside(e))),w.none,v.constant(w.some(wb.inside(e))))}}).map(Ub(e,t)).getOrThunk(function(){var s=jc.navigate(n,i,r);var u=s.bind(function(e){return wb.readLocation(a,i,e)});if(o.isSome()&&u.isSome()){return Rp.findRootInline(a,i,r).map(function(t){if(zb(t)){_m.deleteElement(e,n,Bi.fromDom(t));return true}else{return false}}).getOr(false)}else{return u.bind(function(i){return s.map(function(i){if(n){Vb(e,t,r,i)}else{Vb(e,t,i,r)}return true})}).getOr(false)}})};var Yb=function(e,t,n){if(e.selection.isCollapsed()&&Fb(e)){var r=hc.fromRangeStart(e.selection.getRng());return qb(e,t,n,r)}return false};var Kb={backspaceDelete:Yb};var $b=Xa.immutable("start","end");var Gb=Xa.immutable("rng","table","cells");var Xb=qg.generate([{removeTable:["element"]},{emptyCells:["cells"]}]);var Zb=function(e){return v.curry(bo.eq,e)};var Jb=function(e,t){return Yp.closest(Bi.fromDom(e),"td,th",t)};var Qb=function(e,t){return Yp.ancestor(e,"table",t)};var e_=function(e){return bo.eq(e.start(),e.end())===false};var t_=function(e,t){return Qb(e.start(),t).bind(function(n){return Qb(e.end(),t).bind(function(e){return bo.eq(n,e)?w.some(n):w.none()})})};var n_=function(e){return Cf.descendants(e,"td,th")};var r_=function(e,t){return Qb(e.start(),t).bind(function(t){return J.last(n_(t)).map(function(t){return $b(e.start(),t)})})};var i_=function(e,t){var n=Jb(t.startContainer,e);var r=Jb(t.endContainer,e);return t.collapsed?w.none():Gc.liftN([n,r],$b).fold(function(){return n.fold(function(){return r.bind(function(t){return Qb(t,e).bind(function(e){return J.head(n_(e)).map(function(e){return $b(e,t)})})})},function(t){return Qb(t,e).bind(function(e){return J.last(n_(e)).map(function(e){return $b(t,e)})})})},function(t){return a_(e,t)?w.none():r_(t,e)})};var a_=function(e,t){return t_(t,e).isSome()};var o_=function(e,t){var n=Jb(e.startContainer,t);var r=Jb(e.endContainer,t);return Gc.liftN([n,r],$b).filter(e_).filter(function(e){return a_(t,e)}).orThunk(function(){return i_(t,e)})};var s_=function(e,t){return t_(e,t).map(function(t){return Gb(e,t,n_(t))})};var u_=function(e,t){var n=Zb(e);return o_(t,n).bind(function(e){return s_(e,n)})};var l_=function(e,t){return J.findIndex(e,function(e){return bo.eq(e,t)})};var c_=function(e){return Gc.liftN([l_(e.cells(),e.rng().start()),l_(e.cells(),e.rng().end())],function(t,n){return e.cells().slice(t,n+1)})};var f_=function(e){return c_(e).map(function(t){var n=e.cells();return t.length===n.length?Xb.removeTable(e.table()):Xb.emptyCells(t)})};var d_=function(e){return Xb.emptyCells(e)};var h_=function(e,t){return u_(e,t).bind(f_)};var v_={getActionFromRange:h_,getActionFromCells:d_};var p_=function(e){var t=[];if(e){for(var n=0;n<e.rangeCount;n++){t.push(e.getRangeAt(n))}}return t};var g_=function(e){return J.bind(e,function(e){var t=Rl(e);return t?[Bi.fromDom(t)]:[]})};var m_=function(e){return p_(e).length>1};var y_={getRanges:p_,getSelectedNodes:g_,hasMultipleRanges:m_};var b_=function(e){return J.filter(y_.getSelectedNodes(e),Os)};var __=function(e){var t=Cf.descendants(e,"td[data-mce-selected],th[data-mce-selected]");return t};var w_=function(e,t){var n=__(t);var r=b_(e);return n.length>0?n:r};var x_=function(e){return w_(y_.getRanges(e.selection.getSel()),Bi.fromDom(e.getBody()))};var T_={getCellsFromRanges:b_,getCellsFromElement:__,getCellsFromElementOrRanges:w_,getCellsFromEditor:x_};var C_=function(e,t){J.each(t,Av.fillWithPaddingBr);e.selection.setCursorLocation(t[0].dom(),0);return true};var k_=function(e,t){_m.deleteElement(e,false,t);return true};var S_=function(e,t,n){return v_.getActionFromRange(t,n).map(function(t){return t.fold(v.curry(k_,e),v.curry(C_,e))})};var E_=function(e,t){return R_(e,t)};var P_=function(e,t,n,r){return A_(t,r).fold(function(){return S_(e,t,n)},function(t){return E_(e,t)}).getOr(false)};var O_=function(e,t){var n=Bi.fromDom(e.getBody());var r=e.selection.getRng();var i=T_.getCellsFromEditor(e);return i.length!==0?C_(e,i):P_(e,n,r,t)};var M_=function(e,t){return J.find(Cg.parentsAndSelf(t,e),Os)};var A_=function(e,t){return J.find(Cg.parentsAndSelf(t,e),function(e){return Ki.name(e)==="caption"})};var N_=function(e,t,n,r,i){return jc.navigate(n,e.getBody(),i).bind(function(e){return M_(t,Bi.fromDom(e.getNode())).map(function(e){return bo.eq(e,r)===false})})};var R_=function(e,t){Av.fillWithPaddingBr(t);e.selection.setCursorLocation(t.dom(),0);return w.some(true)};var D_=function(e,t,n,r){return jc.firstPositionIn(e.dom()).bind(function(i){return jc.lastPositionIn(e.dom()).map(function(e){return t?n.isEqual(i)&&r.isEqual(e):n.isEqual(e)&&r.isEqual(i)})}).getOr(true)};var L_=function(e,t){return R_(e,t)};var I_=function(e,t,n){return A_(e,Bi.fromDom(n.getNode())).map(function(e){return bo.eq(e,t)===false})};var B_=function(e,t,n,r,i){return jc.navigate(n,e.getBody(),i).bind(function(a){return D_(r,n,i,a)?L_(e,r):I_(t,r,a)}).or(w.some(true))};var j_=function(e,t,n,r){var i=hc.fromRangeStart(e.selection.getRng());return M_(n,r).bind(function(r){return lg.isEmpty(r)?R_(e,r):N_(e,n,t,r,i)})};var F_=function(e,t,n,r){var i=hc.fromRangeStart(e.selection.getRng());return lg.isEmpty(r)?R_(e,r):B_(e,n,t,r,i)};var H_=function(e,t,n){var r=Bi.fromDom(e.getBody());return A_(r,n).fold(function(){return j_(e,t,r,n)},function(n){return F_(e,t,r,n)}).getOr(false)};var z_=function(e,t){var n=Bi.fromDom(e.selection.getStart(true));var r=T_.getCellsFromEditor(e);return e.selection.isCollapsed()&&r.length===0?H_(e,t,n):O_(e,n)};var U_={backspaceDelete:z_};var V_=function(e,t){e.getDoc().execCommand(t,false,null)};var W_=function(e){if(Mm.backspaceDelete(e,false)){return}else if(Kb.backspaceDelete(e,false)){return}else if(Lg.backspaceDelete(e,false)){return}else if(U_.backspaceDelete(e)){return}else if(Vg.backspaceDelete(e,false)){return}else{V_(e,"Delete");Fp.paddEmptyBody(e)}};var q_=function(e){if(Mm.backspaceDelete(e,true)){return}else if(Kb.backspaceDelete(e,true)){return}else if(Lg.backspaceDelete(e,true)){return}else if(U_.backspaceDelete(e)){return}else if(Vg.backspaceDelete(e,true)){return}else{V_(e,"ForwardDelete")}};var Y_={deleteCommand:W_,forwardDeleteCommand:q_};var K_=function(e,t){return e&&t&&(e.startContainer===t.startContainer&&e.startOffset===t.startOffset)&&(e.endContainer===t.endContainer&&e.endOffset===t.endOffset)};var $_={isEq:K_};var G_=Xa.immutable("container","offset");var X_=function(e,t,n){while(e&&e!==t){if(n(e)){return e}e=e.parentNode}return null};var Z_=function(e,t,n){return X_(e,t,n)!==null};var J_=function(e,t,n){return Z_(e,t,function(e){return e.nodeName===n})};var Q_=function(e){return e&&e.nodeName==="TABLE"};var ew=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)};var tw=function(e,t){return el(e)&&Z_(e,t,Jy.isCaretNode)===false};var nw=function(e,t,n){var r=new cs(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());while(t=r[n?"prev":"next"]()){if(Ks.isBr(t)){return true}}};var rw=function(e,t){return e.previousSibling&&e.previousSibling.nodeName===t};var iw=function(e,t){while(t&&t!==e){if(Ks.isContentEditableFalse(t)){return true}t=t.parentNode}return false};var aw=function(e,t,n,r,i){var a,o,s;var u=e.getRoot();var l;var c=e.schema.getNonEmptyElements();s=e.getParent(i.parentNode,e.isBlock)||u;if(r&&Ks.isBr(i)&&t&&e.isEmpty(s)){return w.some(G_(i.parentNode,e.nodeIndex(i)))}a=new cs(i,s);while(l=a[r?"prev":"next"]()){if(e.getContentEditableParent(l)==="false"||tw(l,u)){return w.none()}if(Ks.isText(l)&&l.nodeValue.length>0){if(J_(l,u,"A")===false){return w.some(G_(l,r?l.nodeValue.length:0))}return w.none()}if(e.isBlock(l)||c[l.nodeName.toLowerCase()]){return w.none()}o=l}if(n&&o){return w.some(G_(o,0))}return w.none()};var ow=function(e,t,n,r){var i,a,o;var s=e.getRoot();var u,l;var c,f,d=false;i=r[(n?"start":"end")+"Container"];a=r[(n?"start":"end")+"Offset"];f=Ks.isElement(i)&&a===i.childNodes.length;l=e.schema.getNonEmptyElements();c=n;if(el(i)){return w.none()}if(Ks.isElement(i)&&a>i.childNodes.length-1){c=false}if(Ks.isDocument(i)){i=s;a=0}if(i===s){if(c){u=i.childNodes[a>0?a-1:0];if(u){if(el(u)){return w.none()}if(l[u.nodeName]||Q_(u)){return w.none()}}}if(i.hasChildNodes()){a=Math.min(!c&&a>0?a-1:a,i.childNodes.length-1);i=i.childNodes[a];a=Ks.isText(i)&&f?i.data.length:0;if(!t&&i===s.lastChild&&Q_(i)){return w.none()}if(iw(s,i)||el(i)){return w.none()}if(i.hasChildNodes()&&Q_(i)===false){u=i;o=new cs(i,s);do{if(Ks.isContentEditableFalse(u)||el(u)){d=false;break}if(Ks.isText(u)&&u.nodeValue.length>0){a=c?0:u.nodeValue.length;i=u;d=true;break}if(l[u.nodeName.toLowerCase()]&&!ew(u)){a=e.nodeIndex(u);i=u.parentNode;if((u.nodeName==="IMG"||u.nodeName==="PRE")&&!c){a++}d=true;break}}while(u=c?o.next():o.prev())}}}if(t){if(Ks.isText(i)&&a===0){aw(e,f,t,true,i).each(function(e){i=e.container();a=e.offset();d=true})}if(Ks.isElement(i)){u=i.childNodes[a];if(!u){u=i.childNodes[a-1]}if(u&&Ks.isBr(u)&&!rw(u,"A")&&!nw(e,u,false)&&!nw(e,u,true)){aw(e,f,t,true,u).each(function(e){i=e.container();a=e.offset();d=true})}}}if(c&&!t&&Ks.isText(i)&&a===i.nodeValue.length){aw(e,f,t,false,i).each(function(e){i=e.container();a=e.offset();d=true})}return d?w.some(G_(i,a)):w.none()};var sw=function(e,t){var n=t.collapsed,r=t.cloneRange();ow(e,n,true,r).each(function(e){r.setStart(e.container(),e.offset())});if(!n){ow(e,n,false,r).each(function(e){r.setEnd(e.container(),e.offset())})}if(n){r.collapse(true)}return $_.isEq(t,r)?w.none():w.some(r)};var uw={normalize:sw};var lw=function(e,t,n){var r=new cs(t,n);var i;var a=e.getNonEmptyElements();while(i=r.next()){if(a[i.nodeName.toLowerCase()]||i.length>0){return true}}};var cw=function(e,t,n){var r=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(r,n);t.scrollIntoView(r);e.remove(r)};var fw=function(e,t,n,r){var i=e.createRng();if(!r){i.setStartAfter(n);i.setEndAfter(n)}else{i.setStartBefore(n);i.setEndBefore(n)}t.setRng(i)};var dw=function(e,t){var n=e.selection,r=e.dom;var i,a;var o=n.getRng();uw.normalize(r,o).each(function(e){o.setStart(e.startContainer,e.startOffset);o.setEnd(e.endContainer,e.endOffset)});var s=o.startOffset;var u=o.startContainer;if(u.nodeType===1&&u.hasChildNodes()){var l=s>u.childNodes.length-1;u=u.childNodes[Math.min(s,u.childNodes.length-1)]||u;if(l&&u.nodeType===3){s=u.nodeValue.length}else{s=0}}var c=r.getParent(u,r.isBlock);var f=c?r.getParent(c.parentNode,r.isBlock):null;var d=f?f.nodeName.toUpperCase():"";var h=t&&t.ctrlKey;if(d==="LI"&&!h){c=f}if(u&&u.nodeType===3&&s>=u.nodeValue.length){if(!lw(e.schema,u,c)){i=r.create("br");o.insertNode(i);o.setStartAfter(i);o.setEndAfter(i);a=true}}i=r.create("br");o.insertNode(i);cw(r,n,i);fw(r,n,i,a);e.undoManager.add()};var hw=function(e,t){var n=Bi.fromTag("br");lv.before(Bi.fromDom(t),n);e.undoManager.add()};var vw=function(e,t){if(!gw(e.getBody(),t)){lv.after(Bi.fromDom(t),Bi.fromTag("br"))}var n=Bi.fromTag("br");lv.after(Bi.fromDom(t),n);cw(e.dom,e.selection,n.dom());fw(e.dom,e.selection,n.dom(),false);e.undoManager.add()};var pw=function(e){return Ks.isBr(e.getNode())};var gw=function(e,t){if(pw(hc.after(t))){return true}else{return jc.nextPosition(e,hc.after(t)).map(function(e){return Ks.isBr(e.getNode())}).getOr(false)}};var mw=function(e){return e&&e.nodeName==="A"&&"href"in e};var yw=function(e){return e.fold(v.constant(false),mw,mw,v.constant(false))};var bw=function(e){var t=v.curry(Rp.isInlineTarget,e);var n=hc.fromRangeStart(e.selection.getRng());return wb.readLocation(t,e.getBody(),n).filter(yw)};var _w=function(e,t){t.fold(v.noop,v.curry(hw,e),v.curry(vw,e),v.noop)};var ww=function(e,t){var n=bw(e);if(n.isSome()){n.each(v.curry(_w,e))}else{dw(e,t)}};var xw={insert:ww};var Tw=qg.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]);var Cw=function(e,t,n,r){return e.fold(t,n,r)};var kw=function(e){return e.fold(v.identity,v.identity,v.identity)};var Sw={before:Tw.before,on:Tw.on,after:Tw.after,cata:Cw,getStart:kw};var Ew=qg.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]);var Pw=Xa.immutable("start","soffset","finish","foffset");var Ow=function(e){return Ew.exact(e.start(),e.soffset(),e.finish(),e.foffset())};var Mw=function(e){return e.match({domRange:function(e){return Bi.fromDom(e.startContainer)},relative:function(e,t){return Sw.getStart(e)},exact:function(e,t,n,r){return e}})};var Aw=function(e){var t=Mw(e);return Ho.defaultView(t)};var Nw={domRange:Ew.domRange,relative:Ew.relative,exact:Ew.exact,exactFromRange:Ow,range:Pw,getWin:Aw};var Rw=Ai.detect().browser;var Dw=function(e,t){var n=Ki.isText(t)?Cv.get(t).length:Ho.children(t).length+1;if(e>n){return n}else if(e<0){return 0}return e};var Lw=function(e){return Nw.range(e.start(),Dw(e.soffset(),e.start()),e.finish(),Dw(e.foffset(),e.finish()))};var Iw=function(e,t){return bo.contains(e,t)||bo.eq(e,t)};var Bw=function(e){return function(t){return Iw(e,t.start())&&Iw(e,t.finish())}};var jw=function(e){return e.inline===true||Rw.isIE()};var Fw=function(e){return Nw.range(Bi.fromDom(e.startContainer),e.startOffset,Bi.fromDom(e.endContainer),e.endOffset)};var Hw=function(e){var t=e.getSelection();var n=!t||t.rangeCount===0?w.none():w.from(t.getRangeAt(0));return n.map(Fw)};var zw=function(e){var t=Ho.defaultView(e);return Hw(t.dom()).filter(Bw(e))};var Uw=function(e,t){return w.from(t).filter(Bw(e)).map(Lw)};var Vw=function(e){var t=document.createRange();t.setStart(e.start().dom(),e.soffset());t.setEnd(e.finish().dom(),e.foffset());return w.some(t)};var Ww=function(e){var t=jw(e)?zw(Bi.fromDom(e.getBody())):w.none();e.bookmark=t.isSome()?t:e.bookmark};var qw=function(e,t){var n=Bi.fromDom(e.getBody());var r=jw(e)?w.from(t):w.none();var i=r.map(Fw).filter(Bw(n));e.bookmark=i.isSome()?i:e.bookmark};var Yw=function(e){var t=e.bookmark?e.bookmark:w.none();return t.bind(v.curry(Uw,Bi.fromDom(e.getBody()))).bind(Vw)};var Kw=function(e){Yw(e).each(function(t){e.selection.setRng(t)})};var $w={store:Ww,storeNative:qw,readRange:Hw,restore:Kw,getRng:Yw,getBookmark:zw,validate:Uw};var Gw=function(e,t,n,r,i,a){if(e.getContentEditable(a)==="false"){return}if(a.nodeName!=="LI"){var o=n?"margin":"padding";o=a.nodeName==="TABLE"?"margin":o;o+=e.getStyle(a,"direction",true)==="rtl"?"Right":"Left";if(t==="outdent"){var s=Math.max(0,parseInt(a.style[o]||0,10)-r);e.setStyle(a,o,s?s+i:"")}else{var s=parseInt(a.style[o]||0,10)+r+i;e.setStyle(a,o,s)}}};var Xw=function(e,t){var n=e.settings,r=e.dom,i=e.selection,a=e.formatter;var o=/[a-z%]+$/i.exec(n.indentation)[0];var s=parseInt(n.indentation,10);var u=e.getParam("indent_use_margin",false);if(!e.queryCommandState("InsertUnorderedList")&&!e.queryCommandState("InsertOrderedList")){if(!n.forced_root_block&&!r.getParent(i.getNode(),r.isBlock)){a.apply("div")}J.each(i.getSelectedBlocks(),function(e){return Gw(r,t,u,s,o,e)})}};var Zw=Un.each;var Jw=Un.extend;var Qw=Un.map;var ex=Un.inArray;var tx=Un.explode;var nx=true;var rx=false;function ix(e){var t,n,r;var i={state:{},exec:{},value:{}};var a=e.settings,o;e.on("PreInit",function(){t=e.dom;n=e.selection;a=e.settings;r=e.formatter});var s=function(t,n,r,a){var o,s,u=false;if(e.removed){return}if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)&&(!a||!a.skip_focus)){e.focus()}else{$w.restore(e)}a=e.fire("BeforeExecCommand",{command:t,ui:n,value:r});if(a.isDefaultPrevented()){return false}s=t.toLowerCase();if(o=i.exec[s]){o(s,n,r);e.fire("ExecCommand",{command:t,ui:n,value:r});return true}Zw(e.plugins,function(i){if(i.execCommand&&i.execCommand(t,n,r)){e.fire("ExecCommand",{command:t,ui:n,value:r});u=true;return false}});if(u){return u}if(e.theme&&e.theme.execCommand&&e.theme.execCommand(t,n,r)){e.fire("ExecCommand",{command:t,ui:n,value:r});return true}try{u=e.getDoc().execCommand(t,n,r)}catch(e){}if(u){e.fire("ExecCommand",{command:t,ui:n,value:r});return true}return false};var u=function(t){var n;if(e.quirks.isHidden()||e.removed){return}t=t.toLowerCase();if(n=i.state[t]){return n(t)}try{return e.getDoc().queryCommandState(t)}catch(e){}return false};var l=function(t){var n;if(e.quirks.isHidden()||e.removed){return}t=t.toLowerCase();if(n=i.value[t]){return n(t)}try{return e.getDoc().queryCommandValue(t)}catch(e){}};var c=function(e,t){t=t||"exec";Zw(e,function(e,n){Zw(n.toLowerCase().split(","),function(n){i[t][n]=e})})};var f=function(t,n,r){t=t.toLowerCase();i.exec[t]=function(t,i,a,o){return n.call(r||e,i,a,o)}};var d=function(t){t=t.toLowerCase();if(i.exec[t]){return true}try{return e.getDoc().queryCommandSupported(t)}catch(e){}return false};var h=function(t,n,r){t=t.toLowerCase();i.state[t]=function(){return n.call(r||e)}};var v=function(t,n,r){t=t.toLowerCase();i.value[t]=function(){return n.call(r||e)}};var p=function(e){e=e.toLowerCase();return!!i.exec[e]};Jw(this,{execCommand:s,queryCommandState:u,queryCommandValue:l,queryCommandSupported:d,addCommands:c,addCommand:f,addQueryStateHandler:h,addQueryValueHandler:v,hasCustomCommand:p});var g=function(t,n,r){if(n===undefined){n=rx}if(r===undefined){r=null}return e.getDoc().execCommand(t,n,r)};var m=function(e){return r.match(e)};var y=function(t,n){r.toggle(t,n?{value:n}:undefined);e.nodeChanged()};var b=function(e){o=n.getBookmark(e)};var _=function(){n.moveToBookmark(o)};c({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(t){var n=e.getDoc();var r;try{g(t)}catch(e){r=nx}if(t==="paste"&&!n.queryCommandEnabled(t)){r=true}if(r||!n.queryCommandSupported(t)){var i=e.translate("Your browser doesn't support direct access to the clipboard. "+"Please use the Ctrl+X/C/V keyboard shortcuts instead.");if(Me.mac){i=i.replace(/Ctrl\+/g,"‚åò+")}e.notificationManager.open({text:i,type:"error"})}},unlink:function(){if(n.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");if(t){e.dom.remove(t,true)}return}r.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);if(t==="full"){t="justify"}Zw("left,center,right,justify".split(","),function(e){if(t!==e){r.remove("align"+e)}});if(t!=="none"){y("align"+t)}},"InsertUnorderedList,InsertOrderedList":function(e){var r,i;g(e);r=t.getParent(n.getNode(),"ol,ul");if(r){i=r.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(i.nodeName)){b();t.split(i,r);_()}}},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){y(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){y(e,n)},FontSize:function(e,t,n){var r,i;if(n>=1&&n<=7){i=tx(a.font_size_style_values);r=tx(a.font_size_classes);if(r){n=r[n-1]||n}else{n=i[n-1]||n}}y(e,n)},RemoveFormat:function(e){r.remove(e)},mceBlockQuote:function(){y("blockquote")},FormatBlock:function(e,t,n){return y(n||"p")},mceCleanup:function(){var t=n.getBookmark();e.setContent(e.getContent({cleanup:nx}),{cleanup:nx});n.moveToBookmark(t)},mceRemoveNode:function(t,r,i){var a=i||n.getNode();if(a!==e.getBody()){b();e.dom.remove(a,nx);_()}},mceSelectNodeDepth:function(r,i,a){var o=0;t.getParent(n.getNode(),function(e){if(e.nodeType===1&&o++===a){n.select(e);return rx}},e.getBody())},mceSelectNode:function(e,t,r){n.select(r)},mceInsertContent:function(t,n,r){Yv.insertAtCaret(e,r)},mceInsertRawHTML:function(t,r,i){n.setContent("tiny_mce_marker");e.setContent(e.getContent().replace(/tiny_mce_marker/g,function(){return i}))},mceToggleFormat:function(e,t,n){y(n)},mceSetContent:function(t,n,r){e.setContent(r)},"Indent,Outdent":function(t){Xw(e,t)},mceRepaint:function(){},InsertHorizontalRule:function(){e.execCommand("mceInsertContent",false,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual;e.addVisual()},mceReplaceContent:function(t,r,i){e.execCommand("mceInsertContent",false,i.replace(/\{\$selection\}/g,n.getContent({format:"text"})))},mceInsertLink:function(e,i,a){var o;if(typeof a==="string"){a={href:a}}o=t.getParent(n.getNode(),"a");a.href=a.href.replace(" ","%20");if(!o||!a.href){r.remove("link")}if(a.href){r.apply("link",a,o)}},selectAll:function(){var e=t.getParent(n.getStart(),Ks.isContentEditableTrue);if(e){var r=t.createRng();r.selectNodeContents(e);n.setRng(r)}},delete:function(){Y_.deleteCommand(e)},forwardDelete:function(){Y_.forwardDeleteCommand(e)},mceNewDocument:function(){e.setContent("")},InsertLineBreak:function(t,n,r){xw.insert(e,r);return true}});c({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var i="align"+e.substring(7);var a=n.isCollapsed()?[t.getParent(n.getNode(),t.isBlock)]:n.getSelectedBlocks();var o=Qw(a,function(e){return!!r.matchNode(e,i)});return ex(o,nx)!==-1},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return m(e)},mceBlockQuote:function(){return m("blockquote")},Outdent:function(){var e;if(a.inline_styles){if((e=t.getParent(n.getStart(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0){return nx}if((e=t.getParent(n.getEnd(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0){return nx}}return u("InsertUnorderedList")||u("InsertOrderedList")||!a.inline_styles&&!!t.getParent(n.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var r=t.getParent(n.getNode(),"ul,ol");return r&&(e==="insertunorderedlist"&&r.tagName==="UL"||e==="insertorderedlist"&&r.tagName==="OL")}},"state");c({"FontSize,FontName":function(e){var r=0,i;if(i=t.getParent(n.getNode(),"span")){if(e==="fontsize"){r=i.style.fontSize}else{r=i.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()}}return r}},"value");c({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}})}var ax=Un.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange "+"mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover "+"draggesture dragdrop drop drag submit "+"compositionstart compositionend compositionupdate touchstart touchmove touchend"," ");var ox=function(e){var t=this;var n,r={},i;var a=function(){return false};var o=function(){return true};e=e||{};n=e.scope||t;i=e.toggleEvent||a;var s=function(t,i){var s,u,c,f;t=t.toLowerCase();i=i||{};i.type=t;if(!i.target){i.target=n}if(!i.preventDefault){i.preventDefault=function(){i.isDefaultPrevented=o};i.stopPropagation=function(){i.isPropagationStopped=o};i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=o};i.isDefaultPrevented=a;i.isPropagationStopped=a;i.isImmediatePropagationStopped=a}if(e.beforeFire){e.beforeFire(i)}s=r[t];if(s){for(u=0,c=s.length;u<c;u++){f=s[u];if(f.once){l(t,f.func)}if(i.isImmediatePropagationStopped()){i.stopPropagation();return i}if(f.func.call(n,i)===false){i.preventDefault();return i}}}return i};var u=function(e,n,o,s){var u,l,c;if(n===false){n=a}if(n){n={func:n};if(s){Un.extend(n,s)}l=e.toLowerCase().split(" ");c=l.length;while(c--){e=l[c];u=r[e];if(!u){u=r[e]=[];i(e,true)}if(o){u.unshift(n)}else{u.push(n)}}}return t};var l=function(e,n){var a,o,s,u,l;if(e){u=e.toLowerCase().split(" ");a=u.length;while(a--){e=u[a];o=r[e];if(!e){for(s in r){i(s,false);delete r[s]}return t}if(o){if(!n){o.length=0}else{l=o.length;while(l--){if(o[l].func===n){o=o.slice(0,l).concat(o.slice(l+1));r[e]=o}}}if(!o.length){i(e,false);delete r[e]}}}}else{for(e in r){i(e,false)}r={}}return t};var c=function(e,t,n){return u(e,t,n,{once:true})};var f=function(e){e=e.toLowerCase();return!(!r[e]||r[e].length===0)};t.fire=s;t.on=u;t.off=l;t.once=c;t.has=f};ox.isNative=function(e){return!!ax[e.toLowerCase()]};var sx=function(e){if(!e._eventDispatcher){e._eventDispatcher=new ox({scope:e,toggleEvent:function(t,n){if(ox.isNative(t)&&e.toggleNativeEvent){e.toggleNativeEvent(t,n)}}})}return e._eventDispatcher};var ux={fire:function(e,t,n){var r=this;if(r.removed&&e!=="remove"){return t}t=sx(r).fire(e,t,n);if(n!==false&&r.parent){var i=r.parent();while(i&&!t.isPropagationStopped()){i.fire(e,t,false);i=i.parent()}}return t},on:function(e,t,n){return sx(this).on(e,t,n)},off:function(e,t){return sx(this).off(e,t)},once:function(e,t){return sx(this).once(e,t)},hasEventListeners:function(e){return sx(this).has(e)}};var lx=ju.DOM;var cx;var fx=function(e,t){if(t==="selectionchange"){return e.getDoc()}if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)){return e.getDoc().documentElement}if(e.settings.event_root){if(!e.eventRoot){e.eventRoot=lx.select(e.settings.event_root)[0]}return e.eventRoot}return e.getBody()};var dx=function(e,t){var n,r;var i=function(e){return!e.hidden&&!e.readonly};if(!e.delegates){e.delegates={}}if(e.delegates[t]||e.removed){return}n=fx(e,t);if(e.settings.event_root){if(!cx){cx={};e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor){if(cx){for(t in cx){e.dom.unbind(fx(e,t))}cx=null}}})}if(cx[t]){return}r=function(n){var r=n.target;var a=e.editorManager.get();var o=a.length;while(o--){var s=a[o].getBody();if(s===r||lx.isChildOf(r,s)){if(i(a[o])){a[o].fire(t,n)}}}};cx[t]=r;lx.bind(n,t,r)}else{r=function(n){if(i(e)){e.fire(t,n)}};lx.bind(n,t,r);e.delegates[t]=r}};var hx={bindPendingEventDelegates:function(){var e=this;Un.each(e._pendingNativeEvents,function(t){dx(e,t)})},toggleNativeEvent:function(e,t){var n=this;if(e==="focus"||e==="blur"){return}if(t){if(n.initialized){dx(n,e)}else{if(!n._pendingNativeEvents){n._pendingNativeEvents=[e]}else{n._pendingNativeEvents.push(e)}}}else if(n.initialized){n.dom.unbind(fx(n,e),e,n.delegates[e]);delete n.delegates[e]}},unbindAllNativeEvents:function(){var e=this;var t=e.getBody();var n=e.dom;var r;if(e.delegates){for(r in e.delegates){e.dom.unbind(fx(e,r),r,e.delegates[r])}delete e.delegates}if(!e.inline&&t&&n){t.onload=null;n.unbind(e.getWin());n.unbind(e.getDoc())}if(n){n.unbind(t);n.unbind(e.getContainer())}}};hx=Un.extend({},ux,hx);var vx=hx;var px=function(e,t,n){try{e.getDoc().execCommand(t,false,n)}catch(e){}};var gx=function(e){var t,n;t=e.getBody();n=function(t){if(e.dom.getParents(t.target,"a").length>0){t.preventDefault()}};e.dom.bind(t,"click",n);return{unbind:function(){e.dom.unbind(t,"click",n)}}};var mx=function(e,t){if(e._clickBlocker){e._clickBlocker.unbind();e._clickBlocker=null}if(t){e._clickBlocker=gx(e);e.selection.controlSelection.hideResizeRect();e.readonly=true;e.getBody().contentEditable=false}else{e.readonly=false;e.getBody().contentEditable=true;px(e,"StyleWithCSS",false);px(e,"enableInlineTableEditing",false);px(e,"enableObjectResizing",false);e.focus();e.nodeChanged()}};var yx=function(e,t){var n=e.readonly?"readonly":"design";if(t===n){return}if(e.initialized){mx(e,t==="readonly")}else{e.on("init",function(){mx(e,t==="readonly")})}e.fire("SwitchMode",{mode:t})};var bx={setMode:yx};var _x=Un.each;var wx=Un.explode;var xx={f9:120,f10:121,f11:122};var Tx=Un.makeMap("alt,ctrl,shift,meta,access");function Cx(e){var t=this;var n={};var r=[];var i=function(e){var t,n;var r={};_x(wx(e,"+"),function(e){if(e in Tx){r[e]=true}else{if(/^[0-9]{2,}$/.test(e)){r.keyCode=parseInt(e,10)}else{r.charCode=e.charCodeAt(0);r.keyCode=xx[e]||e.toUpperCase().charCodeAt(0)}}});t=[r.keyCode];for(n in Tx){if(r[n]){t.push(n)}else{r[n]=false}}r.id=t.join(",");if(r.access){r.alt=true;if(Me.mac){r.ctrl=true}else{r.shift=true}}if(r.meta){if(Me.mac){r.meta=true}else{r.ctrl=true;r.meta=false}}return r};var a=function(t,n,r,a){var o;o=Un.map(wx(t,">"),i);o[o.length-1]=Un.extend(o[o.length-1],{func:r,scope:a||e});return Un.extend(o[0],{desc:e.translate(n),subpatterns:o.slice(1)})};var o=function(e){return e.altKey||e.ctrlKey||e.metaKey};var s=function(e){return e.type==="keydown"&&e.keyCode>=112&&e.keyCode<=123};var u=function(e,t){if(!t){return false}if(t.ctrl!==e.ctrlKey||t.meta!==e.metaKey){return false}if(t.alt!==e.altKey||t.shift!==e.shiftKey){return false}if(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode){e.preventDefault();return true}return false};var l=function(e){return e.func?e.func.call(e.scope):null};e.on("keyup keypress keydown",function(e){if((o(e)||s(e))&&!e.isDefaultPrevented()){_x(n,function(t){if(u(e,t)){r=t.subpatterns.slice(0);if(e.type==="keydown"){l(t)}return true}});if(u(e,r[0])){if(r.length===1){if(e.type==="keydown"){l(r[0])}}r.shift()}}});t.add=function(t,r,i,o){var s;s=i;if(typeof i==="string"){i=function(){e.execCommand(s,false,null)}}else if(Un.isArray(s)){i=function(){e.execCommand(s[0],s[1],s[2])}}_x(wx(Un.trim(t.toLowerCase())),function(e){var t=a(e,r,i,o);n[t.id]=t});return true};t.remove=function(e){var t=a(e);if(n[t.id]){delete n[t.id];return true}return false}}var kx=function(e){return ep.first(e).isSome()};var Sx=function(e,t,n){return ep.ancestor(e,t,n).isSome()};var Ex=function(e,t,n){return ep.closest(e,t,n).isSome()};var Px=function(e,t){return ep.sibling(e,t).isSome()};var Ox=function(e,t){return ep.child(e,t).isSome()};var Mx=function(e,t){return ep.descendant(e,t).isSome()};var Ax={any:kx,ancestor:Sx,closest:Ex,sibling:Px,child:Ox,descendant:Mx};var Nx=function(e){e.dom().focus()};var Rx=function(e){e.dom().blur()};var Dx=function(e){var t=Ho.owner(e).dom();return e.dom()===t.activeElement};var Lx=function(e){var t=e!==undefined?e.dom():document;return w.from(t.activeElement).map(Bi.fromDom)};var Ix=function(e){var t=Ho.owner(e);var n=Lx(t).filter(function(t){return Ax.closest(t,v.curry(bo.eq,e))});n.fold(function(){Nx(e)},v.noop)};var Bx=function(e){return Lx(Ho.owner(e)).filter(function(t){return e.dom().contains(t.dom())})};var jx={hasFocus:Dx,focus:Nx,blur:Rx,active:Lx,search:Bx,focusInside:Ix};var Fx=function(e,t){return e.dom.getParent(t,function(t){return e.dom.getContentEditable(t)==="true"})};var Hx=function(e){return e.collapsed?w.from(Dl(e.startContainer,e.startOffset)).map(Bi.fromDom):w.none()};var zx=function(e,t){return Hx(t).bind(function(t){if(Ps(t)){return w.some(t)}else if(bo.contains(e,t)===false){return w.some(e)}else{return w.none()}})};var Ux=function(e,t){zx(Bi.fromDom(e.getBody()),t).bind(function(e){return jc.firstPositionIn(e.dom())}).fold(function(){return e.selection.normalize()},function(t){return e.selection.setRng(t.toRange())})};var Vx=function(e){if(e.setActive){try{e.setActive()}catch(t){e.focus()}}else{e.focus()}};var Wx=function(e){return jx.hasFocus(e)||jx.search(e).isSome()};var qx=function(e){return e.iframeElement&&jx.hasFocus(Bi.fromDom(e.iframeElement))};var Yx=function(e){var t=e.getBody();return t&&Wx(Bi.fromDom(t))};var Kx=function(e){return e.inline?Yx(e):qx(e)};var $x=function(e){var t=e.selection,n=e.settings.content_editable;var r=e.getBody();var i,a=t.getRng();e.quirks.refreshContentEditable();i=Fx(e,t.getNode());if(e.$.contains(r,i)){Vx(i);Ux(e,a);Gx(e);return}if(e.bookmark!==undefined&&Kx(e)===false){$w.getRng(e).each(function(t){e.selection.setRng(t);a=t})}if(!n){if(!Me.opera){Vx(r)}e.getWin().focus()}if(Me.gecko||n){Vx(r);Ux(e,a)}Gx(e)};var Gx=function(e){e.editorManager.setActive(e)};var Xx=function(e,t){if(e.removed){return}t?Gx(e):$x(e)};var Zx={focus:Xx,hasFocus:Kx};var Jx=function(e,t){var n=t.dom();return n[e]};var Qx=function(e,t){return parseInt(Ha.get(t,e),10)};var eT=v.curry(Jx,"clientWidth");var tT=v.curry(Jx,"clientHeight");var nT=v.curry(Qx,"margin-top");var rT=v.curry(Qx,"margin-left");var iT=function(e){return e.dom().getBoundingClientRect()};var aT=function(e,t,n){var r=eT(e);var i=tT(e);return t>=0&&n>=0&&t<=r&&n<=i};var oT=function(e,t,n,r){var i=iT(t);var a=e?i.left+t.dom().clientLeft+rT(t):0;var o=e?i.top+t.dom().clientTop+nT(t):0;var s=n-a;var u=r-o;return{x:s,y:u}};var sT=function(e,t,n){var r=Bi.fromDom(e.getBody());var i=e.inline?r:Ho.documentElement(r);var a=oT(e.inline,i,t,n);return aT(i,a.x,a.y)};var uT=function(e){return w.from(e).map(Bi.fromDom)};var lT=function(e){var t=e.inline?e.getBody():e.getContentAreaContainer();return uT(t).map(function(e){return bo.contains(Ho.owner(e),e)}).getOr(false)};var cT={isXYInContentArea:sT,isEditorAttachedToDom:lT};function fT(){var e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,reposition:e,getArgs:e}}function dT(e){var t=[];var n=function(){var t=e.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():fT()};var r=function(){return w.from(t[0])};var i=function(e,t){return e.type===t.type&&e.text===t.text&&!e.progressBar&&!e.timeout&&!t.progressBar&&!t.timeout};var a=function(){if(t.length>0){n().reposition(t)}};var o=function(e){t.push(e)};var s=function(e){J.findIndex(t,function(t){return t===e}).each(function(e){t.splice(e,1)})};var u=function(r){if(e.removed||!cT.isEditorAttachedToDom(e)){return}return J.find(t,function(e){return i(n().getArgs(e),r)}).getOrThunk(function(){e.editorManager.setActive(e);var t=n().open(r,function(){s(t);a()});o(t);a();return t})};var l=function(){r().each(function(e){n().close(e);s(e);a()})};var c=function(){return t};var f=function(e){e.on("SkinLoaded",function(){var t=e.settings.service_message;if(t){u({text:t,type:"warning",timeout:0,icon:""})}});e.on("ResizeEditor ResizeWindow",function(){He.requestAnimationFrame(a)});e.on("remove",function(){J.each(t,function(e){n().close(e)})})};f(e);return{open:u,close:l,getNotifications:c}}function hT(){var e=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}}function vT(e){var t=[];var n=function(){var t=e.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():hT()};var r=function(e,t){return function(){return t?t.apply(e,arguments):undefined}};var i=function(t){e.fire("OpenWindow",{win:t})};var a=function(t){e.fire("CloseWindow",{win:t})};var o=function(e){t.push(e);i(e)};var s=function(n){J.findIndex(t,function(e){return e===n}).each(function(r){t.splice(r,1);a(n);if(t.length===0){e.focus()}})};var u=function(){return w.from(t[t.length-1])};var l=function(t,r){e.editorManager.setActive(e);$w.store(e);var i=n().open(t,r,s);o(i);return i};var c=function(e,t,i){var a=n().alert(e,r(i?i:this,t),s);o(a)};var f=function(e,t,i){var a=n().confirm(e,r(i?i:this,t),s);o(a)};var d=function(){u().each(function(e){n().close(e);s(e)})};var h=function(){return u().map(n().getParams).getOr(null)};var v=function(e){u().each(function(t){n().setParams(t,e)})};var p=function(){return t};e.on("remove",function(){J.each(t.slice(0),function(e){n().close(e)})});return{windows:t,open:l,alert:c,confirm:f,close:d,getParams:h,setParams:v,getWindows:p}}var pT=qu.PluginManager;var gT=function(e,t){for(var n in pT.urls){var r=pT.urls[n]+"/plugin"+t+".js";if(r===e){return n}}return null};var mT=function(e,t){var n=gT(t,e.suffix);return n?"Failed to load plugin: "+n+" from url "+t:"Failed to load plugin url: "+t};var yT=function(e,t){e.notificationManager.open({type:"error",text:t})};var bT=function(e,t){if(e._skinLoaded){yT(e,t)}else{e.on("SkinLoaded",function(){yT(e,t)})}};var _T=function(e,t){bT(e,"Failed to upload image: "+t)};var wT=function(e,t){bT(e,mT(e,t))};var xT=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var r=window.console;if(r){if(r.error){r.error.apply(r,arguments)}else{r.log.apply(r,arguments)}}};var TT={pluginLoadError:wT,uploadError:_T,displayError:bT,initError:xT};var CT=qu.PluginManager;var kT=qu.ThemeManager;function ST(){var e=ue.getOrDie("XMLHttpRequest");return new e}function ET(e,t){var n={};var r=function(e,t){if(e){return e.replace(/\/$/,"")+"/"+t.replace(/^\//,"")}return t};var i=function(e,n,i,a){var o,s;o=new ST;o.open("POST",t.url);o.withCredentials=t.credentials;o.upload.onprogress=function(e){a(e.loaded/e.total*100)};o.onerror=function(){i("Image upload failed due to a XHR Transport error. Code: "+o.status)};o.onload=function(){var e;if(o.status<200||o.status>=300){i("HTTP Error: "+o.status);return}e=JSON.parse(o.responseText);if(!e||typeof e.location!=="string"){i("Invalid JSON: "+o.responseText);return}n(r(t.basePath,e.location))};s=new FormData;s.append("file",e.blob(),e.filename());o.send(s)};var a=function(){return new Ne(function(e){e([])})};var o=function(e,t){return{url:t,blobInfo:e,status:true}};var s=function(e,t){return{url:"",blobInfo:e,status:false,error:t}};var u=function(e,t){Un.each(n[e],function(e){e(t)});delete n[e]};var l=function(t,n,r){e.markPending(t.blobUri());return new Ne(function(i){var a,l;var c=function(){};try{var f=function(){if(a){a.close();l=c}};var d=function(n){f();e.markUploaded(t.blobUri(),n);u(t.blobUri(),o(t,n));i(o(t,n))};var h=function(n){f();e.removeFailed(t.blobUri());u(t.blobUri(),s(t,n));i(s(t,n))};l=function(e){if(e<0||e>100){return}if(!a){a=r()}a.progressBar.value(e)};n(t,d,h,l)}catch(e){i(s(t,e.message))}})};var c=function(e){return e===i};var f=function(e){var t=e.blobUri();return new Ne(function(e){n[t]=n[t]||[];n[t].push(e)})};var d=function(n,r){n=Un.grep(n,function(t){return!e.isUploaded(t.blobUri())});return Ne.all(Un.map(n,function(n){return e.isPending(n.blobUri())?f(n):l(n,t.handler,r)}))};var h=function(e,n){return!t.url&&c(t.handler)?a():d(e,n)};t=Un.extend({credentials:false,handler:i},t);return{upload:h}}function PT(e,t){var n=ue.getOrDie("Blob");return new n(e,t)}function OT(){var e=ue.getOrDie("FileReader");return new e}function MT(e){var t=ue.getOrDie("Uint8Array");return new t(e)}var AT=function(e){var t=ue.getOrDie("requestAnimationFrame");t(e)};var NT=function(e){var t=ue.getOrDie("atob");return t(e)};var RT={atob:NT,requestAnimationFrame:AT};var DT=function(e){return new Ne(function(t,n){var r=function(){n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var i=new ST;i.open("GET",e,true);i.responseType="blob";i.onload=function(){if(this.status===200){t(this.response)}else{r()}};i.onerror=r;i.send()}catch(e){r()}})};var LT=function(e){var t,n;e=decodeURIComponent(e).split(",");n=/data:([^;]+)/.exec(e[0]);if(n){t=n[1]}return{type:t,data:e[1]}};var IT=function(e){return new Ne(function(t){var n,r,i;e=LT(e);try{n=RT.atob(e.data)}catch(e){t(new PT([]));return}r=new MT(n.length);for(i=0;i<r.length;i++){r[i]=n.charCodeAt(i)}t(new PT([r],{type:e.type}))})};var BT=function(e){if(e.indexOf("blob:")===0){return DT(e)}if(e.indexOf("data:")===0){return IT(e)}return null};var jT=function(e){return new Ne(function(t){var n=new OT;n.onloadend=function(){t(n.result)};n.readAsDataURL(e)})};var FT={uriToBlob:BT,blobToDataUri:jT,parseDataUri:LT};var HT=0;var zT=function(e){return(e||"blobid")+HT++};var UT=function(e,t,n,r){var i,a;if(t.src.indexOf("blob:")===0){a=e.getByUri(t.src);if(a){n({image:t,blobInfo:a})}else{FT.uriToBlob(t.src).then(function(r){FT.blobToDataUri(r).then(function(o){i=FT.parseDataUri(o).data;a=e.create(zT(),r,i);e.add(a);n({image:t,blobInfo:a})})},function(e){r(e)})}return}i=FT.parseDataUri(t.src).data;a=e.findFirst(function(e){return e.base64()===i});if(a){n({image:t,blobInfo:a})}else{FT.uriToBlob(t.src).then(function(r){a=e.create(zT(),r,i);e.add(a);n({image:t,blobInfo:a})},function(e){r(e)})}};var VT=function(e){return e?e.getElementsByTagName("img"):[]};function WT(e,t){var n={};var r=function(r,i){var a;if(!i){i=ql.constant(true)}a=On.filter(VT(r),function(t){var n=t.src;if(!Me.fileApi){return false}if(t.hasAttribute("data-mce-bogus")){return false}if(t.hasAttribute("data-mce-placeholder")){return false}if(!n||n===Me.transparentSrc){return false}if(n.indexOf("blob:")===0){return!e.isUploaded(n)}if(n.indexOf("data:")===0){return i(t)}return false});var o=On.map(a,function(e){if(n[e.src]){return new Ne(function(t){n[e.src].then(function(n){if(typeof n==="string"){return n}t({image:e,blobInfo:n.blobInfo})})})}var r=new Ne(function(n,r){UT(t,e,n,r)}).then(function(e){delete n[e.image.src];return e}).catch(function(t){delete n[e.src];return t});n[e.src]=r;return r});return Ne.all(o)};return{findAll:r}}var qT=0;var YT=function(){var e=function(){return Math.round(Math.random()*4294967295).toString(36)};var t=(new Date).getTime();return"s"+t.toString(36)+e()+e()+e()};var KT=function(e){return e+qT+++YT()};var $T={uuid:KT};function GT(){var e=[];var t=ql.constant;var n=function(e){var t={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"};return t[e.toLowerCase()]||"dat"};var r=function(e,t,n,r){return typeof e==="object"?i(e):i({id:e,name:r,blob:t,base64:n})};var i=function(e){var r,i;if(!e.blob||!e.base64){throw new Error("blob and base64 representations of the image are required for BlobInfo to be created")}r=e.id||$T.uuid("blobid");i=e.name||r;return{id:t(r),name:t(i),filename:t(i+"."+n(e.blob.type)),blob:t(e.blob),base64:t(e.base64),blobUri:t(e.blobUri||de.createObjectURL(e.blob)),uri:t(e.uri)}};var a=function(t){if(!o(t.id())){e.push(t)}};var o=function(e){return s(function(t){return t.id()===e})};var s=function(t){return On.filter(e,t)[0]};var u=function(e){return s(function(t){return t.blobUri()===e})};var l=function(t){e=On.filter(e,function(e){if(e.blobUri()===t){de.revokeObjectURL(e.blobUri());return false}return true})};var c=function(){On.each(e,function(e){de.revokeObjectURL(e.blobUri())});e=[]};return{create:r,add:a,get:o,getByUri:u,findFirst:s,removeByUri:l,destroy:c}}function XT(){var e=1,t=2;var n={};var r=function(e,t){return{status:e,resultUri:t}};var i=function(e){return e in n};var a=function(e){var t=n[e];return t?t.resultUri:null};var o=function(t){return i(t)?n[t].status===e:false};var s=function(e){return i(e)?n[e].status===t:false};var u=function(t){n[t]=r(e,null)};var l=function(e,i){n[e]=r(t,i)};var c=function(e){delete n[e]};var f=function(){n={}};return{hasBlobUri:i,getResultUri:a,isPending:o,isUploaded:s,markPending:u,markUploaded:l,removeFailed:c,destroy:f}}function ZT(e){var t=GT();var n,r;var i=e.settings;var a=XT();var o=function(t){return function(n){if(e.selection){return t(n)}return[]}};var s=function(){return"?"+(new Date).getTime()};var u=function(e,t,n){var r=0;do{r=e.indexOf(t,r);if(r!==-1){e=e.substring(0,r)+n+e.substr(r+t.length);r+=n.length-t.length+1}}while(r!==-1);return e};var l=function(e,t,n){e=u(e,'src="'+t+'"','src="'+n+'"');e=u(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"');return e};var c=function(t,n){On.each(e.undoManager.data,function(e){if(e.type==="fragmented"){e.fragments=On.map(e.fragments,function(e){return l(e,t,n)})}else{e.content=l(e.content,t,n)}})};var f=function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:true})};var d=function(n,r){t.removeByUri(n.src);c(n.src,r);e.$(n).attr({src:i.images_reuse_filename?r+s():r,"data-mce-src":e.convertURL(r,"src")})};var h=function(t){if(!n){n=ET(a,{url:i.images_upload_url,basePath:i.images_upload_base_path,credentials:i.images_upload_credentials,handler:i.images_upload_handler})}return g().then(o(function(r){var i;i=On.map(r,function(e){return e.blobInfo});return n.upload(i,f).then(o(function(n){var i=On.map(n,function(t,n){var i=r[n].image;if(t.status&&e.settings.images_replace_blob_uris!==false){d(i,t.url)}else if(t.error){TT.uploadError(e,t.error)}return{element:i,status:t.status}});if(t){t(i)}return i}))}))};var v=function(e){if(i.automatic_uploads!==false){return h(e)}};var p=function(e){return i.images_dataimg_filter?i.images_dataimg_filter(e):true};var g=function(){if(!r){r=WT(a,t)}return r.findAll(e.getBody(),p).then(o(function(t){t=On.filter(t,function(t){if(typeof t==="string"){TT.displayError(e,t);return false}return true});On.each(t,function(e){c(e.image.src,e.blobInfo.blobUri());e.image.src=e.blobInfo.blobUri();e.image.removeAttribute("data-mce-src")});return t}))};var m=function(){t.destroy();a.destroy();r=n=null};var y=function(n){return n.replace(/src="(blob:[^"]+)"/g,function(n,r){var i=a.getResultUri(r);if(i){return'src="'+i+'"'}var o=t.getByUri(r);if(!o){o=On.reduce(e.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(r)},null)}if(o){return'src="data:'+o.blob().type+";base64,"+o.base64()+'"'}return n})};e.on("setContent",function(){if(e.settings.automatic_uploads!==false){v()}else{g()}});e.on("RawSaveContent",function(e){e.content=y(e.content)});e.on("getContent",function(e){if(e.source_view||e.format==="raw"){return}e.content=y(e.content)});e.on("PostRender",function(){e.parser.addNodeFilter("img",function(e){On.each(e,function(e){var n=e.attr("src");if(t.getByUri(n)){return}var r=a.getResultUri(n);if(r){e.attr("src",r)}})})});return{blobCache:t,uploadImages:h,uploadImagesAuto:v,scanForImages:g,destroy:m}}var JT=function(e,t){return e.hasOwnProperty(t.nodeName)};var QT=function(e,t){if(Ks.isText(t)){return true}else if(Ks.isElement(t)){return!JT(e,t)&&!ev.isBookmarkNode(t)}else{return false}};var eC=function(e,t,n){return J.exists(Cg.parents(Bi.fromDom(n),Bi.fromDom(t)),function(t){return JT(e,t.dom())})};var tC=function(e,t){if(Ks.isText(t)){if(t.nodeValue.length===0){return true}else if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||JT(e,t.nextSibling))){return true}}return false};var nC=function(e){var t=e.settings,n=e.dom,r=e.selection;var i=e.schema,a=i.getBlockElements();var o=r.getStart();var s=e.getBody();var u;var l,c,f,d,h;var v,p,g;var m,y;y=t.forced_root_block;if(!o||!Ks.isElement(o)||!y){return}m=s.nodeName.toLowerCase();if(!i.isValidChild(m,y.toLowerCase())||eC(a,s,o)){return}u=r.getRng();l=u.startContainer;c=u.startOffset;f=u.endContainer;d=u.endOffset;g=Zx.hasFocus(e);o=s.firstChild;while(o){if(QT(a,o)){if(tC(a,o)){v=o;o=o.nextSibling;n.remove(v);continue}if(!h){h=n.create(y,e.settings.forced_root_block_attrs);o.parentNode.insertBefore(h,o);p=true}v=o;o=o.nextSibling;h.appendChild(v)}else{h=null;o=o.nextSibling}}if(p&&g){u.setStart(l,c);u.setEnd(f,d);r.setRng(u);e.nodeChanged()}};var rC=function(e){if(e.settings.forced_root_block){e.on("NodeChange",v.curry(nC,e))}};var iC={setup:rC};function aC(e){var t,n=[];var r=function(t){var r,i;i=e.$(t).parentsUntil(e.getBody()).add(t);if(i.length===n.length){for(r=i.length;r>=0;r--){if(i[r]!==n[r]){break}}if(r===-1){n=i;return true}}n=i;return false};if(!("onselectionchange"in e.getDoc())){e.on("NodeChange Click MouseUp KeyUp Focus",function(n){var r,i;r=e.selection.getRng();i={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};if(n.type==="nodechange"||!$_.isEq(i,t)){e.fire("SelectionChange")}t=i})}e.on("contextmenu",function(){e.fire("SelectionChange")});e.on("SelectionChange",function(){var t=e.selection.getStart(true);if(!t||!Me.range&&e.selection.isCollapsed()){return}if(!r(t)&&e.dom.isChildOf(t,e.getBody())){e.nodeChanged({selectionChange:true})}});e.on("MouseUp",function(t){if(!t.isDefaultPrevented()){if(e.selection.getNode().nodeName==="IMG"){He.setEditorTimeout(e,function(){e.nodeChanged()})}else{e.nodeChanged()}}});this.nodeChanged=function(t){var n=e.selection;var r,i,a;if(e.initialized&&n&&!e.settings.disable_nodechange&&!e.readonly){a=e.getBody();r=n.getStart(true)||a;if(r.ownerDocument!==e.getDoc()||!e.dom.isChildOf(r,a)){r=a}i=[];e.dom.getParent(r,function(e){if(e===a){return true}i.push(e)});t=t||{};t.element=r;t.parents=i;e.fire("NodeChange",t)}}}var oC=function(e){var t,n,r,i;i=e.getBoundingClientRect();t=e.ownerDocument;n=t.documentElement;r=t.defaultView;return{top:i.top+r.pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}};var sC=function(e){return e.inline?oC(e.getBody()):{left:0,top:0}};var uC=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}};var lC=function(e){var t=e.getBody(),n=e.getDoc().documentElement;var r={left:t.scrollLeft,top:t.scrollTop};var i={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:i};var cC=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=oC(e.getContentAreaContainer());var r=lC(e);return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}return{left:t.pageX,top:t.pageY}};var fC=function(e,t,n){return{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}};var dC=function(e,t){return fC(sC(e),uC(e),cC(e,t))};var hC={calc:dC};var vC=Ks.isContentEditableFalse;var pC=Ks.isContentEditableTrue;var gC=function(e,t){return vC(t)&&t!==e};var mC=function(e,t,n){if(t===n||e.dom.isChildOf(t,n)){return false}if(vC(t)){return false}return true};var yC=function(e){var t=e.cloneNode(true);t.removeAttribute("data-mce-selected");return t};var bC=function(e,t,n,r){var i=t.cloneNode(true);e.dom.setStyles(i,{width:n,height:r});e.dom.setAttrib(i,"data-mce-selected",null);var a=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});e.dom.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r});e.dom.setStyles(i,{margin:0,boxSizing:"border-box"});a.appendChild(i);return a};var _C=function(e,t){if(e.parentNode!==t){t.appendChild(e)}};var wC=function(e,t,n,r,i,a){var o=0,s=0;e.style.left=t.pageX+"px";e.style.top=t.pageY+"px";if(t.pageX+n>i){o=t.pageX+n-i}if(t.pageY+r>a){s=t.pageY+r-a}e.style.width=n-o+"px";e.style.height=r-s+"px"};var xC=function(e){if(e&&e.parentNode){e.parentNode.removeChild(e)}};var TC=function(e){return e.button===0};var CC=function(e){return e.element};var kC=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}};var SC=function(e,t){return function(n){if(TC(n)){var r=On.find(t.dom.getParents(n.target),ql.or(vC,pC));if(gC(t.getBody(),r)){var i=t.dom.getPos(r);var a=t.getBody();var o=t.getDoc().documentElement;e.element=r;e.screenX=n.screenX;e.screenY=n.screenY;e.maxX=(t.inline?a.scrollWidth:o.offsetWidth)-2;e.maxY=(t.inline?a.scrollHeight:o.offsetHeight)-2;e.relX=n.pageX-i.x;e.relY=n.pageY-i.y;e.width=r.offsetWidth;e.height=r.offsetHeight;e.ghost=bC(t,r,e.width,e.height)}}}};var EC=function(e,t){var n=He.throttle(function(e,n){t._selectionOverrides.hideFakeCaret();t.selection.placeCaretAt(e,n)},0);return function(r){var i=Math.max(Math.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if(CC(e)&&!e.dragging&&i>10){var a=t.fire("dragstart",{target:e.element});if(a.isDefaultPrevented()){return}e.dragging=true;t.focus()}if(e.dragging){var o=kC(e,hC.calc(t,r));_C(e.ghost,t.getBody());wC(e.ghost,o,e.width,e.height,e.maxX,e.maxY);n(r.clientX,r.clientY)}}};var PC=function(e){var t=e.getSel().getRangeAt(0);var n=t.startContainer;return n.nodeType===3?n.parentNode:n};var OC=function(e,t){return function(n){if(e.dragging){if(mC(t,PC(t.selection),e.element)){var r=yC(e.element);var i=t.fire("drop",{targetClone:r,clientX:n.clientX,clientY:n.clientY});if(!i.isDefaultPrevented()){r=i.targetClone;t.undoManager.transact(function(){xC(e.element);t.insertContent(t.dom.getOuterHTML(r));t._selectionOverrides.hideFakeCaret()})}}}AC(e)}};var MC=function(e,t){return function(){AC(e);if(e.dragging){t.fire("dragend")}}};var AC=function(e){e.dragging=false;e.element=null;xC(e.ghost)};var NC=function(e){var t={};var n,r,i,a,o,s;n=ju.DOM;s=document;r=SC(t,e);i=EC(t,e);a=OC(t,e);o=MC(t,e);e.on("mousedown",r);e.on("mousemove",i);e.on("mouseup",a);n.bind(s,"mousemove",i);n.bind(s,"mouseup",o);e.on("remove",function(){n.unbind(s,"mousemove",i);n.unbind(s,"mouseup",o)})};var RC=function(e){e.on("drop",function(t){var n=typeof t.clientX!=="undefined"?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;if(vC(n)||vC(e.dom.getContentEditableParent(n))){t.preventDefault()}})};var DC=function(e){NC(e);RC(e)};var LC={init:DC};var IC=function(e){var t=function(t){return On.map(t,function(t){t=Sl(t);t.node=e;return t})};if(Ks.isElement(e)){return t(e.getClientRects())}if(Ks.isText(e)){var n=e.ownerDocument.createRange();n.setStart(e,0);n.setEnd(e,e.data.length);return t(n.getClientRects())}};var BC=function(e){return On.reduce(e,function(e,t){return e.concat(IC(t))},[])};var jC;(function(e){e[e["Up"]=-1]="Up";e[e["Down"]=1]="Down"})(jC||(jC={}));var FC=function(e,t,n,r){while(r=fd(r,e,Cl,t)){if(n(r)){return}}};var HC=function(e,t,n,r,i,a){var o=0,s;var u=[];var l;var c=function(r){var a,s,c;c=BC([r]);if(e===-1){c=c.reverse()}for(a=0;a<c.length;a++){s=c[a];if(n(s,l)){continue}if(u.length>0&&t(s,On.last(u))){o++}s.line=o;if(i(s)){return true}u.push(s)}};l=On.last(a.getClientRects());if(!l){return u}s=a.getNode();c(s);FC(e,r,c,s);return u};var zC=function(e,t){return t.line>e};var UC=function(e,t){return t.line===e};var VC=v.curry(HC,jC.Up,Ml,Al);var WC=v.curry(HC,jC.Down,Al,Ml);var qC=function(e,t,n,r){var i=Ud(t);var a,o,s,u;var l=[];var c=0,f,d;var h=function(t){if(e===1){return On.last(t.getClientRects())}return On.last(t.getClientRects())};if(e===1){a=i.next;o=Al;s=Ml;u=hc.after(r)}else{a=i.prev;o=Ml;s=Al;u=hc.before(r)}d=h(u);do{if(!u.isVisible()){continue}f=h(u);if(s(f,d)){continue}if(l.length>0&&o(f,On.last(l))){c++}f=Sl(f);f.position=u;f.line=c;if(n(f)){return l}l.push(f)}while(u=a(u));return l};var YC=function(e){return function(t){return zC(e,t)}};var KC=function(e){return function(t){return UC(e,t)}};var $C=Ks.isContentEditableFalse;var GC=fd;var XC=function(e,t){return Math.abs(e.left-t)};var ZC=function(e,t){return Math.abs(e.right-t)};var JC=function(e,t){return e>=t.left&&e<=t.right};var QC=function(e,t){return On.reduce(e,function(e,n){var r,i;r=Math.min(XC(e,t),ZC(e,t));i=Math.min(XC(n,t),ZC(n,t));if(JC(t,n)){return n}if(JC(t,e)){return e}if(i===r&&$C(n.node)){return n}if(i<r){return n}return e})};var ek=function(e,t,n,r){while(r=GC(r,e,Cl,t)){if(n(r)){return}}};var tk=function(e,t){var n=[];var r=function(e,r){var i;i=On.filter(BC([r]),function(n){return!e(n,t)});n=n.concat(i);return i.length===0};n.push(t);ek(jC.Up,e,v.curry(r,Ml),t.node);ek(jC.Down,e,v.curry(r,Al),t.node);return n};var nk=function(e){return On.filter(On.toArray(e.getElementsByTagName("*")),ed)};var rk=function(e,t){return{node:e.node,before:XC(e,t)<ZC(e,t)}};var ik=function(e,t,n){var r;var i=BC(nk(e));var a=On.filter(i,function(e){return n>=e.top&&n<=e.bottom});r=QC(a,t);if(r){r=QC(tk(e,r),t);if(r&&ed(r.node)){return rk(r,t)}}return null};var ak=function(e,t,n){if(n.collapsed){return false}return J.foldl(n.getClientRects(),function(n,r){return n||Nl(r,e,t)},false)};var ok={isXYWithinRange:ak};var sk=function(e,t){var n=null;var r=null;var i=function(){if(n!==null){clearTimeout(n);n=null;r=null}};var a=function(){r=arguments;if(n===null){n=setTimeout(function(){e.apply(null,r);n=null;r=null},t)}};return{cancel:i,throttle:a}};var uk=function(e,t){var n=null;var r=function(){if(n!==null){clearTimeout(n);n=null}};var i=function(){var r=arguments;if(n===null){n=setTimeout(function(){e.apply(null,r);n=null;r=null},t)}};return{cancel:r,throttle:i}};var lk=function(e,t){var n=null;var r=function(){if(n!==null){clearTimeout(n);n=null}};var i=function(){var r=arguments;if(n!==null){clearTimeout(n)}n=setTimeout(function(){e.apply(null,r);n=null;r=null},t)};return{cancel:r,throttle:i}};var ck={adaptable:sk,first:uk,last:lk};var fk=function(e){var t=ck.first(function(){if(!e.removed){var t=e.selection.getRng();if(t.collapsed){var n=qc(e,e.selection.getRng(),false);e.selection.setRng(n)}}},0);e.on("focus",function(){t.throttle()});e.on("blur",function(){t.cancel()})};var dk={setup:fk};var hk={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return Me.mac?e.metaKey:e.ctrlKey&&!e.altKey}};var vk=Ks.isContentEditableTrue;var pk=Ks.isContentEditableFalse;var gk=Sd;var mk=kd;var yk=function(e){var t=function(t){return e.dom.isBlock(t)};var n=e.getBody();var r=Qf(e.getBody(),t,function(){return Zx.hasFocus(e)});var i="sel-"+e.dom.uniqueId();var a;var o=function(t){return e.dom.hasClass(t,"mce-offscreen-selection")};var s=function(){var t=e.dom.get(i);return t?t.getElementsByTagName("*")[0]:t};var u=function(t){if(t){e.selection.setRng(t)}};var l=function(){return e.selection.getRng()};var c=function(t,n,i,a){if(a===void 0){a=true}var o;o=e.fire("ShowCaret",{target:n,direction:t,before:i});if(o.isDefaultPrevented()){return null}if(a){e.selection.scrollIntoView(n,t===-1)}return r.show(i,n)};var f=function(e,t){t=_d(e,n,t);if(e===-1){return hc.fromRangeStart(t)}return hc.fromRangeEnd(t)};var d=function(t){if(t.hasAttribute("data-mce-caret")){cl(t);u(l());e.selection.scrollIntoView(t[0])}};var h=function(){var t=function(t){var n=e.getBody();while(t&&t!==n){if(vk(t)||pk(t)){return t}t=t.parentNode}return null};e.on("mouseup",function(t){var n=l();if(n.collapsed&&cT.isXYInContentArea(e,t.clientX,t.clientY)){u(Wc(e,n,false))}});e.on("click",function(n){var r;r=t(n.target);if(r){if(pk(r)){n.preventDefault();e.focus()}if(vk(r)){if(e.dom.isChildOf(r,e.selection.getNode())){y()}}}});e.on("blur NewBlock",function(){y()});var r=function(e){var n=false;e.on("touchstart",function(){n=false});e.on("touchmove",function(){n=true});e.on("touchend",function(r){var i=t(r.target);if(pk(i)){if(!n){r.preventDefault();m(Vc(e,i))}}})};var i=function(e){var t=Ud(e);if(!e.firstChild){return false}var n=hc.before(e.firstChild);var r=t.next(n);return r&&!mk(r)&&!gk(r)};var f=function(t,n){var r=e.dom.getParent(t,e.dom.isBlock);var i=e.dom.getParent(n,e.dom.isBlock);return r===i};var d=function(t,n){var r=e.dom.getParent(t,e.dom.isBlock);var a=e.dom.getParent(n,e.dom.isBlock);return r&&!f(r,a)&&i(r)};r(e);e.on("mousedown",function(r){var i;var a=r.target;if(a!==n&&a.nodeName!=="HTML"&&!e.dom.isChildOf(a,n)){return}if(cT.isXYInContentArea(e,r.clientX,r.clientY)===false){return}i=t(a);if(i){if(pk(i)){r.preventDefault();m(Vc(e,i))}else{y();if(!(vk(i)&&r.shiftKey)&&!ok.isXYWithinRange(r.clientX,r.clientY,e.selection.getRng())){e.selection.placeCaretAt(r.clientX,r.clientY)}}}else if(ed(a)===false){y();_();var o=ik(n,r.clientX,r.clientY);if(o){if(!d(r.target,o.node)){r.preventDefault();var s=c(1,o.node,o.before,false);e.getBody().focus();u(s)}}}});e.on("keypress",function(t){if(hk.modifierPressed(t)){return}switch(t.keyCode){default:if(pk(e.selection.getNode())){t.preventDefault()}break}});e.on("getSelectionRange",function(e){var t=e.range;if(a){if(!a.parentNode){a=null;return}t=t.cloneRange();t.selectNode(a);e.range=t}});e.on("setSelectionRange",function(e){var t;t=m(e.range,e.forward);if(t){e.range=t}});e.on("AfterSetSelectionRange",function(e){var t=e.range;if(!g(t)){_()}if(!o(t.startContainer.parentNode)){y()}});e.on("copy",function(e){var t=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!Me.ie){var n=s();if(n){e.preventDefault();t.clearData();t.setData("text/html",n.outerHTML);t.setData("text/plain",n.outerText)}}});LC.init(e);dk.setup(e)};var v=function(){var t=e.contentStyles,n=".mce-content-body";t.push(r.getCss());t.push(n+" .mce-offscreen-selection {"+"position: absolute;"+"left: -9999999999px;"+"max-width: 1000000px;"+"}"+n+" *[contentEditable=false] {"+"cursor: default;"+"}"+n+" *[contentEditable=true] {"+"cursor: text;"+"}")};var p=function(e){return el(e)||sl(e)||ul(e)};var g=function(e){return p(e.startContainer)||p(e.endContainer)};var m=function(t,n){var r;var o=e.$;var s=e.dom;var u,l,d,h,v,p,m,y,b;if(!t){return null}if(t.collapsed){if(!g(t)){if(n===false){m=f(-1,t);if(ed(m.getNode(true))){return c(-1,m.getNode(true),false,false)}if(ed(m.getNode())){return c(-1,m.getNode(),!m.isAtEnd(),false)}}else{m=f(1,t);if(ed(m.getNode())){return c(1,m.getNode(),!m.isAtEnd(),false)}if(ed(m.getNode(true))){return c(1,m.getNode(true),false,false)}}}return null}d=t.startContainer;h=t.startOffset;v=t.endOffset;if(d.nodeType===3&&h===0&&pk(d.parentNode)){d=d.parentNode;h=s.nodeIndex(d);d=d.parentNode}if(d.nodeType!==1){return null}if(v===h+1){r=d.childNodes[h]}if(!pk(r)){return null}y=b=r.cloneNode(true);p=e.fire("ObjectSelected",{target:r,targetClone:y});if(p.isDefaultPrevented()){return null}u=Yp.descendant(Bi.fromDom(e.getBody()),"#"+i).fold(function(){return o([])},function(e){return o([e.dom()])});y=p.targetClone;if(u.length===0){u=o('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",i);u.appendTo(e.getBody())}t=e.dom.createRng();if(y===b&&Me.ie){u.empty().append('<p style="font-size: 0" data-mce-bogus="all">¬†</p>').append(y);t.setStartAfter(u[0].firstChild.firstChild);t.setEndAfter(y)}else{u.empty().append("¬†").append(y).append("¬†");t.setStart(u[0].firstChild,1);t.setEnd(u[0].lastChild,0)}u.css({top:s.getPos(r,e.getBody()).y});u[0].focus();l=e.selection.getSel();l.removeAllRanges();l.addRange(t);J.each(Cf.descendants(Bi.fromDom(e.getBody()),"*[data-mce-selected]"),function(e){ma.remove(e,"data-mce-selected")});r.setAttribute("data-mce-selected","1");a=r;_();return t};var y=function(){if(a){a.removeAttribute("data-mce-selected");Yp.descendant(Bi.fromDom(e.getBody()),"#"+i).each(yv.remove);a=null}};var b=function(){r.destroy();a=null};var _=function(){r.hide()};if(Me.ceFalse){h();v()}return{showCaret:c,showBlockCaretContainer:d,hideFakeCaret:_,destroy:b}};var bk=Un.each;var _k=function(e){return e.indexOf("data-")===0||e.indexOf("aria-")===0};var wk=function(e){return e.replace(/<!--|-->/g,"")};var xk=function(e,t,n){var r=1,i,a,o,s;s=e.getShortEndedElements();o=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g;o.lastIndex=i=n;while(a=o.exec(t)){i=o.lastIndex;if(a[1]==="/"){r--}else if(!a[1]){if(a[2]in s){continue}r++}if(r===0){break}}return i};function Tk(e,t){if(t===void 0){t=Su()}var n=function(){};e=e||{};if(e.fix_self_closing!==false){e.fix_self_closing=true}bk("comment cdata text start end pi doctype".split(" "),function(t){if(t){self[t]=e[t]||n}});var r=e.comment?e.comment:n;var i=e.cdata?e.cdata:n;var a=e.text?e.text:n;var o=e.start?e.start:n;var s=e.end?e.end:n;var u=e.pi?e.pi:n;var l=e.doctype?e.doctype:n;var c=function(n){var c,f=0,d,h;var v=[];var p,g,m,y;var b,_,w,x,T;var C,k,S,E,P,O,M;var A,N,R,D;var L,I,B,j,F,H,z=0;var U=pu.decode;var V;var W=Un.makeMap("src,href,data,background,formaction,poster");var q=/((java|vb)script|mhtml):/i,Y=/^data:/i;var K=function(e){var t,n;t=v.length;while(t--){if(v[t].name===e){break}}if(t>=0){for(n=v.length-1;n>=t;n--){e=v[n];if(e.valid){s(e.name)}}v.length=t}};var $=function(t,n,r,i,a){var o,s;var u=/[\s\u0000-\u001F]+/g;n=n.toLowerCase();r=n in x?n:U(r||i||a||"");if(C&&!b&&_k(n)===false){o=O[n];if(!o&&M){s=M.length;while(s--){o=M[s];if(o.pattern.test(n)){break}}if(s===-1){o=null}}if(!o){return}if(o.validValues&&!(r in o.validValues)){return}}if(W[n]&&!e.allow_script_urls){var l=r.replace(u,"");try{l=decodeURIComponent(l)}catch(e){l=unescape(l)}if(q.test(l)){return}if(!e.allow_html_data_urls&&Y.test(l)&&!/^data:image\//i.test(l)){return}}if(b&&(n in W||n.indexOf("on")===0)){return}p.map[n]=r;p.push({name:n,value:r})};B=new RegExp("<(?:"+"(?:!--([\\w\\W]*?)--\x3e)|"+"(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|"+"(?:!DOCTYPE([\\w\\W]*?)>)|"+"(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|"+"(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|"+"(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>)"+")","g");j=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g;w=t.getShortEndedElements();I=e.self_closing_elements||t.getSelfClosingElements();x=t.getBoolAttrs();C=e.validate;_=e.remove_internals;V=e.fix_self_closing;F=t.getSpecialElements();D=n+">";while(c=B.exec(D)){if(f<c.index){a(U(n.substr(f,c.index-f)))}if(d=c[6]){d=d.toLowerCase();if(d.charAt(0)===":"){d=d.substr(1)}K(d)}else if(d=c[7]){if(c.index+c[0].length>n.length){a(U(n.substr(c.index)));f=c.index+c[0].length;continue}d=d.toLowerCase();if(d.charAt(0)===":"){d=d.substr(1)}T=d in w;if(V&&I[d]&&v.length>0&&v[v.length-1].name===d){K(d)}if(!C||(k=t.getElementRule(d))){S=true;if(C){O=k.attributes;M=k.attributePatterns}if(P=c[8]){b=P.indexOf("data-mce-type")!==-1;if(b&&_){S=false}p=[];p.map={};P.replace(j,$)}else{p=[];p.map={}}if(C&&!b){A=k.attributesRequired;N=k.attributesDefault;R=k.attributesForced;L=k.removeEmptyAttrs;if(L&&!p.length){S=false}if(R){g=R.length;while(g--){E=R[g];y=E.name;H=E.value;if(H==="{$uid}"){H="mce_"+z++}p.map[y]=H;p.push({name:y,value:H})}}if(N){g=N.length;while(g--){E=N[g];y=E.name;if(!(y in p.map)){H=E.value;if(H==="{$uid}"){H="mce_"+z++}p.map[y]=H;p.push({name:y,value:H})}}}if(A){g=A.length;while(g--){if(A[g]in p.map){break}}if(g===-1){S=false}}if(E=p.map["data-mce-bogus"]){if(E==="all"){f=xk(t,n,B.lastIndex);B.lastIndex=f;continue}S=false}}if(S){o(d,p,T)}}else{S=false}if(h=F[d]){h.lastIndex=f=c.index+c[0].length;if(c=h.exec(n)){if(S){m=n.substr(f,c.index-f)}f=c.index+c[0].length}else{m=n.substr(f);f=n.length}if(S){if(m.length>0){a(m,true)}s(d)}B.lastIndex=f;continue}if(!T){if(!P||P.indexOf("/")!==P.length-1){v.push({name:d,valid:S})}else if(S){s(d)}}}else if(d=c[1]){if(d.charAt(0)===">"){d=" "+d}if(!e.allow_conditional_comments&&d.substr(0,3).toLowerCase()==="[if"){d=" "+d}r(d)}else if(d=c[2]){i(wk(d))}else if(d=c[3]){l(d)}else if(d=c[4]){u(d,c[5])}f=c.index+c[0].length}if(f<n.length){a(U(n.substr(f)))}for(g=v.length-1;g>=0;g--){d=v[g];if(d.valid){s(d.name)}}};return{parse:c}}(function(e){e.findEndTag=xk})(Tk||(Tk={}));var Ck=Tk;var kk=function(e,t){var n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")};var Sk=function(e,t){var n=t;var r=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g;var i,a,o,s,u;var l=e.schema;n=kk(e.getTempAttrs(),n);u=l.getShortEndedElements();while(s=r.exec(n)){a=r.lastIndex;o=s[0].length;if(u[s[1]]){i=a}else{i=Ck.findEndTag(l,n,a)}n=n.substring(0,a-o)+n.substring(i);r.lastIndex=a-o}return n};var Ek=function(e,t){return Gu.trim(Sk(e,t))};var Pk={trimExternal:Ek,trimInternal:Sk};var Ok=0;var Mk=1;var Ak=2;var Nk=function(e,t){var n=e.length+t.length+2;var r=new Array(n);var i=new Array(n);var a=function(e,t,n){return{start:e,end:t,diag:n}};var o=function(n,r,i,a,s){var l=u(n,r,i,a);if(l===null||l.start===r&&l.diag===r-a||l.end===n&&l.diag===n-i){var c=n;var f=i;while(c<r||f<a){if(c<r&&f<a&&e[c]===t[f]){s.push([Ok,e[c]]);++c;++f}else{if(r-n>a-i){s.push([Ak,e[c]]);++c}else{s.push([Mk,t[f]]);++f}}}}else{o(n,l.start,i,l.start-l.diag,s);for(var d=l.start;d<l.end;++d){s.push([Ok,e[d]])}o(l.end,r,l.end-l.diag,a,s)}};var s=function(n,r,i,o){var s=n;while(s-r<o&&s<i&&e[s]===t[s-r]){++s}return a(n,s,r)};var u=function(n,a,o,u){var l=a-n;var c=u-o;if(l===0||c===0){return null}var f=l-c;var d=c+l;var h=(d%2===0?d:d+1)/2;r[1+h]=n;i[1+h]=a+1;var v,p,g,m,y;for(v=0;v<=h;++v){for(p=-v;p<=v;p+=2){g=p+h;if(p===-v||p!==v&&r[g-1]<r[g+1]){r[g]=r[g+1]}else{r[g]=r[g-1]+1}m=r[g];y=m-n+o-p;while(m<a&&y<u&&e[m]===t[y]){r[g]=++m;++y}if(f%2!==0&&f-v<=p&&p<=f+v){if(i[g-f]<=r[g]){return s(i[g-f],p+n-o,a,u)}}}for(p=f-v;p<=f+v;p+=2){g=p+h-f;if(p===f-v||p!==f+v&&i[g+1]<=i[g-1]){i[g]=i[g+1]-1}else{i[g]=i[g-1]}m=i[g]-1;y=m-n+o-p;while(m>=n&&y>=o&&e[m]===t[y]){i[g]=m--;y--}if(f%2===0&&-v<=p&&p<=v){if(i[g]<=r[g+f]){return s(i[g],p+n-o,a,u)}}}}};var l=[];o(0,e.length,0,t.length,l);return l};var Rk={KEEP:Ok,DELETE:Ak,INSERT:Mk,diff:Nk};var Dk=function(e){if(e.nodeType===1){return e.outerHTML}else if(e.nodeType===3){return pu.encodeRaw(e.data,false)}else if(e.nodeType===8){return"\x3c!--"+e.data+"--\x3e"}return""};var Lk=function(e){var t,n,r;r=document.createElement("div");t=document.createDocumentFragment();if(e){r.innerHTML=e}while(n=r.firstChild){t.appendChild(n)}return t};var Ik=function(e,t,n){var r=Lk(t);if(e.hasChildNodes()&&n<e.childNodes.length){var i=e.childNodes[n];i.parentNode.insertBefore(r,i)}else{e.appendChild(r)}};var Bk=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}};var jk=function(e,t){var n=0;On.each(e,function(e){if(e[0]===Rk.KEEP){n++}else if(e[0]===Rk.INSERT){Ik(t,e[1],n);n++}else if(e[0]===Rk.DELETE){Bk(t,n)}})};var Fk=function(e){return On.filter(On.map(e.childNodes,Dk),function(e){return e.length>0})};var Hk=function(e,t){var n=On.map(t.childNodes,Dk);jk(Rk.diff(n,e),t);return t};var zk={read:Fk,write:Hk};var Uk=function(e){return e.indexOf("</iframe>")!==-1};var Vk=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}};var Wk=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}};var qk=function(e){var t,n,r;t=zk.read(e.getBody());r=J.bind(t,function(t){var n=Pk.trimInternal(e.serializer,t);return n.length>0?[n]:[]});n=r.join("");return Uk(n)?Vk(r):Wk(n)};var Yk=function(e,t,n){if(t.type==="fragmented"){zk.write(t.fragments,e.getBody())}else{e.setContent(t.content,{format:"raw"})}e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)};var Kk=function(e){return e.type==="fragmented"?e.fragments.join(""):e.content};var $k=function(e,t){return!!e&&!!t&&Kk(e)===Kk(t)};var Gk={createFragmentedLevel:Vk,createCompleteLevel:Wk,createFromEditor:qk,applyToEditor:Yk,isEq:$k};function Xk(e){var t=this,n=0,r=[],i,a,o=0;var s=function(){return o===0};var u=function(e){if(s()){t.typing=e}};var l=function(t){e.setDirty(t)};var c=function(e){u(false);t.add({},e)};var f=function(){if(t.typing){u(false);t.add()}};e.on("init",function(){t.add()});e.on("BeforeExecCommand",function(e){var n=e.command;if(n!=="Undo"&&n!=="Redo"&&n!=="mceRepaint"){f();t.beforeChange()}});e.on("ExecCommand",function(e){var t=e.command;if(t!=="Undo"&&t!=="Redo"&&t!=="mceRepaint"){c(e)}});e.on("ObjectResizeStart Cut",function(){t.beforeChange()});e.on("SaveContent ObjectResized blur",c);e.on("DragEnd",c);e.on("KeyUp",function(n){var i=n.keyCode;if(n.isDefaultPrevented()){return}if(i>=33&&i<=36||i>=37&&i<=40||i===45||n.ctrlKey){c();e.nodeChanged()}if(i===46||i===8){e.nodeChanged()}if(a&&t.typing&&Gk.isEq(Gk.createFromEditor(e),r[0])===false){if(e.isDirty()===false){l(true);e.fire("change",{level:r[0],lastLevel:null})}e.fire("TypingUndo");a=false;e.nodeChanged()}});e.on("KeyDown",function(e){var n=e.keyCode;if(e.isDefaultPrevented()){return}if(n>=33&&n<=36||n>=37&&n<=40||n===45){if(t.typing){c(e)}return}var r=e.ctrlKey&&!e.altKey||e.metaKey;if((n<16||n>20)&&n!==224&&n!==91&&!t.typing&&!r){t.beforeChange();u(true);t.add({},e);a=true}});e.on("MouseDown",function(e){if(t.typing){c(e)}});var d=function(e){return e.inputType==="insertReplacementText"};var h=function(e){return e.inputType==="insertText"&&e.data===null};e.on("input",function(e){if(e.inputType&&(d(e)||h(e))){c(e)}});e.addShortcut("meta+z","","Undo");e.addShortcut("meta+y,meta+shift+z","","Redo");e.on("AddUndo Undo Redo ClearUndos",function(t){if(!t.isDefaultPrevented()){e.nodeChanged()}});t={data:r,typing:false,beforeChange:function(){if(s()){i=Hh.getUndoBookmark(e.selection)}},add:function(t,a){var o;var u=e.settings;var c,f;f=Gk.createFromEditor(e);t=t||{};t=Un.extend(t,f);if(s()===false||e.removed){return null}c=r[n];if(e.fire("BeforeAddUndo",{level:t,lastLevel:c,originalEvent:a}).isDefaultPrevented()){return null}if(c&&Gk.isEq(c,t)){return null}if(r[n]){r[n].beforeBookmark=i}if(u.custom_undo_redo_levels){if(r.length>u.custom_undo_redo_levels){for(o=0;o<r.length-1;o++){r[o]=r[o+1]}r.length--;n=r.length}}t.bookmark=Hh.getUndoBookmark(e.selection);if(n<r.length-1){r.length=n+1}r.push(t);n=r.length-1;var d={level:t,lastLevel:c,originalEvent:a};e.fire("AddUndo",d);if(n>0){l(true);e.fire("change",d)}return t},undo:function(){var i;if(t.typing){t.add();t.typing=false;u(false)}if(n>0){i=r[--n];Gk.applyToEditor(e,i,true);l(true);e.fire("undo",{level:i})}return i},redo:function(){var t;if(n<r.length-1){t=r[++n];Gk.applyToEditor(e,t,false);l(true);e.fire("redo",{level:t})}return t},clear:function(){r=[];n=0;t.typing=false;t.data=r;e.fire("ClearUndos")},hasUndo:function(){return n>0||t.typing&&r[0]&&!Gk.isEq(Gk.createFromEditor(e),r[0])},hasRedo:function(){return n<r.length-1&&!t.typing},transact:function(e){f();t.beforeChange();t.ignore(e);return t.add()},ignore:function(e){try{o++;e()}finally{o--}},extra:function(i,a){var o,s;if(t.transact(i)){s=r[n].bookmark;o=r[n-1];Gk.applyToEditor(e,o,true);if(t.transact(a)){r[n-1].beforeBookmark=s}}}};return t}var Zk={};var Jk=On.filter;var Qk=On.each;var eS=function(e,t){var n=Zk[e];if(!n){Zk[e]=n=[]}Zk[e].push(t)};var tS=function(e,t){Qk(Zk[e],function(e){e(t)})};eS("pre",function(e){var t=e.selection.getRng();var n,r;var i=function(e){return n(e.previousSibling)&&On.indexOf(r,e.previousSibling)!==-1};var a=function(e,t){ur(t).remove();ur(e).append("<br><br>").append(t.childNodes)};n=Ks.matchNodeNames("pre");if(!t.collapsed){r=e.selection.getSelectedBlocks();Qk(Jk(Jk(r,n),i),function(e){a(e.previousSibling,e)})}});var nS={postProcess:tS};var rS=Un.each;var iS=function(e,t){var n=e.childNodes;t--;if(t>n.length-1){t=n.length-1}else if(t<0){t=0}return n[t]||e};var aS=function(e,t,n){var r=t.startContainer;var i=t.startOffset;var a=t.endContainer;var o=t.endOffset;var s;var u;var l;var c;var f;var d;var h;h=e.select("td[data-mce-selected],th[data-mce-selected]");if(h.length>0){rS(h,function(e){n([e])});return}var v=function(e){var t;t=e[0];if(t.nodeType===3&&t===r&&i>=t.nodeValue.length){e.splice(0,1)}t=e[e.length-1];if(o===0&&e.length>0&&t===a&&t.nodeType===3){e.splice(e.length-1,1)}return e};var p=function(e,t,n){var r=[];for(;e&&e!==n;e=e[t]){r.push(e)}return r};var g=function(e,t){do{if(e.parentNode===t){return e}e=e.parentNode}while(e)};var m=function(e,t,r){var i=r?"nextSibling":"previousSibling";for(c=e,f=c.parentNode;c&&c!==t;c=f){f=c.parentNode;d=p(c===e?c:c[i],i);if(d.length){if(!r){d.reverse()}n(v(d))}}};if(r.nodeType===1&&r.hasChildNodes()){r=r.childNodes[i]}if(a.nodeType===1&&a.hasChildNodes()){a=iS(a,o)}if(r===a){return n(v([r]))}s=e.findCommonAncestor(r,a);for(c=r;c;c=c.parentNode){if(c===a){return m(r,s,true)}if(c===s){break}}for(c=a;c;c=c.parentNode){if(c===r){return m(a,s)}if(c===s){break}}u=g(r,s)||r;l=g(a,s)||a;m(r,u,true);d=p(u===r?u:u.nextSibling,"nextSibling",l===a?l.nextSibling:l);if(d.length){n(v(d))}m(a,l)};var oS={walk:aS};var sS=/^(src|href|style)$/;var uS=Un.each;var lS=ny.isEq;var cS=function(e){return/^(TH|TD)$/.test(e.nodeName)};var fS=function(e,t,n){var r,i,a;r=t[n?"startContainer":"endContainer"];i=t[n?"startOffset":"endOffset"];if(Ks.isElement(r)){a=r.childNodes.length-1;if(!n&&i){i--}r=r.childNodes[i>a?a:i]}if(Ks.isText(r)&&n&&i>=r.nodeValue.length){r=new cs(r,e.getBody()).next()||r}if(Ks.isText(r)&&!n&&i===0){r=new cs(r,e.getBody()).prev()||r}return r};var dS=function(e,t,n,r){var i=e.create(n,r);t.parentNode.insertBefore(i,t);i.appendChild(t);return i};var hS=function(e,t,n){if(lS(t,n.inline)){return true}if(lS(t,n.block)){return true}if(n.selector){return Ks.isElement(t)&&e.is(t,n.selector)}};var vS=function(e,t){return t.links&&e.tagName==="A"};var pS=function(e,t,n,r){t=ny.getNonWhiteSpaceSibling(t,n,r);return!t||(t.nodeName==="BR"||e.isBlock(t))};var gS=function(e,t,n){var r=t.parentNode;var i;var a=e.dom,o=e.settings.forced_root_block;if(n.block){if(!o){if(a.isBlock(t)&&!a.isBlock(r)){if(!pS(a,t,false)&&!pS(a,t.firstChild,true,1)){t.insertBefore(a.create("br"),t.firstChild)}if(!pS(a,t,true)&&!pS(a,t.lastChild,false,1)){t.appendChild(a.create("br"))}}}else{if(r===a.getRoot()){if(!n.list_block||!lS(t,n.list_block)){uS(Un.grep(t.childNodes),function(t){if(ny.isValid(e,o,t.nodeName.toLowerCase())){if(!i){i=dS(a,t,o);a.setAttribs(i,e.settings.forced_root_block_attrs)}else{i.appendChild(t)}}else{i=0}})}}}}if(n.selector&&n.inline&&!lS(n.inline,t)){return}a.remove(t,1)};var mS=function(e,t,n,r,i){var a,o,s;var u=e.dom;if(!hS(u,r,t)&&!vS(r,t)){return false}if(t.remove!=="all"){uS(t.styles,function(e,a){e=ny.normalizeStyleValue(u,ny.replaceVars(e,n),a);if(typeof a==="number"){a=e;i=0}if(t.remove_similar||(!i||lS(ny.getStyle(u,i,a),e))){u.setStyle(r,a,"")}s=1});if(s&&u.getAttrib(r,"style")===""){r.removeAttribute("style");r.removeAttribute("data-mce-style")}uS(t.attributes,function(e,t){var a;e=ny.replaceVars(e,n);if(typeof t==="number"){t=e;i=0}if(!i||lS(u.getAttrib(i,t),e)){if(t==="class"){e=u.getAttrib(r,t);if(e){a="";uS(e.split(/\s+/),function(e){if(/mce\-\w+/.test(e)){a+=(a?" ":"")+e}});if(a){u.setAttrib(r,t,a);return}}}if(t==="class"){r.removeAttribute("className")}if(sS.test(t)){r.removeAttribute("data-mce-"+t)}r.removeAttribute(t)}});uS(t.classes,function(e){e=ny.replaceVars(e,n);if(!i||u.hasClass(i,e)){u.removeClass(r,e)}});o=u.getAttribs(r);for(a=0;a<o.length;a++){var l=o[a].nodeName;if(l.indexOf("_")!==0&&l.indexOf("data-")!==0){return false}}}if(t.remove!=="none"){gS(e,r,t);return true}};var yS=function(e,t,n,r,i){var a;uS(ny.getParents(e.dom,t.parentNode).reverse(),function(t){var o;if(!a&&t.id!=="_start"&&t.id!=="_end"){o=Ey.matchNode(e,t,n,r,i);if(o&&o.split!==false){a=t}}});return a};var bS=function(e,t,n,r,i,a,o,s){var u,l,c,f,d,h;var v=e.dom;if(n){h=n.parentNode;for(u=r.parentNode;u&&u!==h;u=u.parentNode){l=v.clone(u,false);for(d=0;d<t.length;d++){if(mS(e,t[d],s,l,l)){l=0;break}}if(l){if(c){l.appendChild(c)}if(!f){f=l}c=l}}if(a&&(!o.mixed||!v.isBlock(n))){r=v.split(n,r)}if(c){i.parentNode.insertBefore(c,i);f.appendChild(i)}}return r};var _S=function(e,t,n,r,i){var a=e.formatter.get(t),o=a[0];var s,u,l=true;var c=e.dom;var f=e.selection;var d=function(r){var s=yS(e,r,t,n,i);return bS(e,a,s,r,r,true,o,n)};var h=function(t){var r,i,s,u,f;if(Ks.isElement(t)&&c.getContentEditable(t)){u=l;l=c.getContentEditable(t)==="true";f=true}r=Un.grep(t.childNodes);if(l&&!f){for(i=0,s=a.length;i<s;i++){if(mS(e,a[i],n,t,t)){break}}}if(o.deep){if(r.length){for(i=0,s=r.length;i<s;i++){h(r[i])}if(f){l=u}}}};var v=function(e){var t=c.get(e?"_start":"_end");var n=t[e?"firstChild":"lastChild"];if(ev.isBookmarkNode(n)){n=n[e?"firstChild":"lastChild"]}if(Ks.isText(n)&&n.data.length===0){n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling}c.remove(t,true);return n};var p=function(t){var n,r;var i=t.commonAncestorContainer;t=my.expandRng(e,t,a,true);if(o.split){n=fS(e,t,true);r=fS(e,t);if(n!==r){if(/^(TR|TH|TD)$/.test(n.nodeName)&&n.firstChild){if(n.nodeName==="TR"){n=n.firstChild.firstChild||n}else{n=n.firstChild||n}}if(i&&/^T(HEAD|BODY|FOOT|R)$/.test(i.nodeName)&&cS(r)&&r.firstChild){r=r.firstChild||r}if(c.isChildOf(n,r)&&n!==r&&!c.isBlock(r)&&!cS(n)&&!cS(r)){n=dS(c,n,"span",{id:"_start","data-mce-type":"bookmark"});d(n);n=v(true);return}n=dS(c,n,"span",{id:"_start","data-mce-type":"bookmark"});r=dS(c,r,"span",{id:"_end","data-mce-type":"bookmark"});d(n);d(r);n=v(true);r=v()}else{n=r=d(n)}t.startContainer=n.parentNode?n.parentNode:n;t.startOffset=c.nodeIndex(n);t.endContainer=r.parentNode?r.parentNode:r;t.endOffset=c.nodeIndex(r)+1}oS.walk(c,t,function(t){uS(t,function(t){h(t);if(Ks.isElement(t)&&e.dom.getStyle(t,"text-decoration")==="underline"&&t.parentNode&&ny.getTextDecoration(c,t.parentNode)==="underline"){mS(e,{deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},null,t)}})})};if(r){if(r.nodeType){u=c.createRng();u.setStartBefore(r);u.setEndAfter(r);p(u)}else{p(r)}return}if(c.getContentEditable(f.getNode())==="false"){r=f.getNode();for(var g=0,m=a.length;g<m;g++){if(a[g].ceFalseOverride){if(mS(e,a[g],n,r,r)){break}}}return}if(!f.isCollapsed()||!o.inline||c.select("td[data-mce-selected],th[data-mce-selected]").length){s=f.getBookmark();p(f.getRng());f.moveToBookmark(s);if(o.inline&&Ey.match(e,t,n,f.getStart())){ny.moveStart(c,f,f.getRng())}e.nodeChanged()}else{Jy.removeCaretFormat(e,t,n,i)}};var wS={removeFormat:mS,remove:_S};var xS=Un.each;var TS=function(e){return e&&e.nodeType===1&&!ev.isBookmarkNode(e)&&!Jy.isCaretNode(e)&&!Ks.isBogus(e)};var CS=function(e,t){var n;for(n=e;n;n=n[t]){if(n.nodeType===3&&n.nodeValue.length!==0){return e}if(n.nodeType===1&&!ev.isBookmarkNode(n)){return n}}return e};var kS=function(e,t,n){var r,i;var a=new nv(e);if(t&&n){t=CS(t,"previousSibling");n=CS(n,"nextSibling");if(a.compare(t,n)){for(r=t.nextSibling;r&&r!==n;){i=r;r=r.nextSibling;t.appendChild(i)}e.remove(n);Un.each(Un.grep(n.childNodes),function(e){t.appendChild(e)});return t}}return n};var SS=function(e,t,n){xS(e.childNodes,function(e){if(TS(e)){if(t(e)){n(e)}if(e.hasChildNodes()){SS(e,t,n)}}})};var ES=function(e,t){return v.curry(function(t,n){return!!(n&&ny.getStyle(e,n,t))},t)};var PS=function(e,t,n){return v.curry(function(t,n,r){e.setStyle(r,t,n);if(r.getAttribute("style")===""){r.removeAttribute("style")}OS(e,r)},t,n)};var OS=function(e,t){if(t.nodeName==="SPAN"&&e.getAttribs(t).length===0){e.remove(t,true)}};var MS=function(e,t){var n;if(t.nodeType===1&&t.parentNode&&t.parentNode.nodeType===1){n=ny.getTextDecoration(e,t.parentNode);if(e.getStyle(t,"color")&&n){e.setStyle(t,"text-decoration",n)}else if(e.getStyle(t,"text-decoration")===n){e.setStyle(t,"text-decoration",null)}}};var AS=function(e,t,n,r){if(t.styles.color||t.styles.textDecoration){Un.walk(r,v.curry(MS,e),"childNodes");MS(e,r)}};var NS=function(e,t,n,r){if(t.styles&&t.styles.backgroundColor){SS(r,ES(e,"fontSize"),PS(e,"backgroundColor",ny.replaceVars(t.styles.backgroundColor,n)))}};var RS=function(e,t,n,r){if(t.inline==="sub"||t.inline==="sup"){SS(r,ES(e,"fontSize"),PS(e,"fontSize",""));e.remove(e.select(t.inline==="sup"?"sub":"sup",r),true)}};var DS=function(e,t,n,r){if(r&&t.merge_siblings!==false){r=kS(e,ny.getNonWhiteSpaceSibling(r),r);r=kS(e,r,ny.getNonWhiteSpaceSibling(r,true))}};var LS=function(e,t,n){if(t.clear_child_styles){var r=t.links?"*:not(a)":"*";xS(e.select(r,n),function(n){if(TS(n)){xS(t.styles,function(t,r){e.setStyle(n,r,"")})}})}};var IS=function(e,t,n,r){xS(t,function(t){xS(e.dom.select(t.inline,r),function(r){if(!TS(r)){return}wS.removeFormat(e,t,n,r,t.exact?r:null)});LS(e.dom,t,r)})};var BS=function(e,t,n,r,i){if(Ey.matchNode(e,i.parentNode,n,r)){if(wS.removeFormat(e,t,r,i)){return}}if(t.merge_with_parents){e.dom.getParent(i.parentNode,function(a){if(Ey.matchNode(e,a,n,r)){wS.removeFormat(e,t,r,i);return true}})}};var jS={mergeWithChildren:IS,mergeUnderlineAndColor:AS,mergeBackgroundColorAndFontSize:NS,mergeSubSup:RS,mergeSiblings:DS,mergeWithParents:BS};var FS=Un.each;var HS=function(e){return e&&e.nodeType===1&&!ev.isBookmarkNode(e)&&!Jy.isCaretNode(e)&&!Ks.isBogus(e)};var zS=function(e,t,n,r){var i=e.formatter.get(t);var a=i[0];var o,s;var u=!r&&e.selection.isCollapsed();var l=e.dom,c=e.selection;var f=function(e,t){t=t||a;if(e){if(t.onformat){t.onformat(e,t,n,r)}FS(t.styles,function(t,r){l.setStyle(e,r,ny.replaceVars(t,n))});if(t.styles){var i=l.getAttrib(e,"style");if(i){e.setAttribute("data-mce-style",i)}}FS(t.attributes,function(t,r){l.setAttrib(e,r,ny.replaceVars(t,n))});FS(t.classes,function(t){t=ny.replaceVars(t,n);if(!l.hasClass(e,t)){l.addClass(e,t)}})}};var d=function(e,t){var n=false;if(!a.selector){return false}FS(e,function(e){if("collapsed"in e&&e.collapsed!==u){return}if(l.is(t,e.selector)&&!Jy.isCaretNode(t)){f(t,e);n=true;return false}});return n};var h=function(r,o,s,u){var l=[];var c,h,v=true;c=a.inline||a.block;h=r.create(c);f(h);oS.walk(r,o,function(o){var s;var p=function(o){var g,m,y,b;b=v;g=o.nodeName.toLowerCase();m=o.parentNode.nodeName.toLowerCase();if(o.nodeType===1&&r.getContentEditable(o)){b=v;v=r.getContentEditable(o)==="true";y=true}if(ny.isEq(g,"br")){s=0;if(a.block){r.remove(o)}return}if(a.wrapper&&Ey.matchNode(e,o,t,n)){s=0;return}if(v&&!y&&a.block&&!a.wrapper&&ny.isTextBlock(e,g)&&ny.isValid(e,m,c)){o=r.rename(o,c);f(o);l.push(o);s=0;return}if(a.selector){var _=d(i,o);if(!a.inline||_){s=0;return}}if(v&&!y&&ny.isValid(e,c,g)&&ny.isValid(e,m,c)&&!(!u&&o.nodeType===3&&o.nodeValue.length===1&&o.nodeValue.charCodeAt(0)===65279)&&!Jy.isCaretNode(o)&&(!a.inline||!r.isBlock(o))){if(!s){s=r.clone(h,false);o.parentNode.insertBefore(s,o);l.push(s)}s.appendChild(o)}else{s=0;FS(Un.grep(o.childNodes),p);if(y){v=b}s=0}};FS(o,p)});if(a.links===true){FS(l,function(e){var t=function(e){if(e.nodeName==="A"){f(e,a)}FS(Un.grep(e.childNodes),t)};t(e)})}FS(l,function(o){var s;var u=function(e){var t=0;FS(e.childNodes,function(e){if(!ny.isWhiteSpaceNode(e)&&!ev.isBookmarkNode(e)){t++}});return t};var c=function(e){var t=false;FS(e.childNodes,function(e){if(HS(e)){t=e;return false}});return t};var d=function(e){var t,n;t=c(e);if(t&&!ev.isBookmarkNode(t)&&Ey.matchName(r,t,a)){n=r.clone(t,false);f(n);r.replace(n,e,true);r.remove(t,1)}return n||e};s=u(o);if((l.length>1||!r.isBlock(o))&&s===0){r.remove(o,1);return}if(a.inline||a.wrapper){if(!a.exact&&s===1){o=d(o)}jS.mergeWithChildren(e,i,n,o);jS.mergeWithParents(e,a,t,n,o);jS.mergeBackgroundColorAndFontSize(r,a,n,o);jS.mergeSubSup(r,a,n,o);jS.mergeSiblings(r,a,n,o)}})};if(l.getContentEditable(c.getNode())==="false"){r=c.getNode();for(var v=0,p=i.length;v<p;v++){if(i[v].ceFalseOverride&&l.is(r,i[v].selector)){f(r,i[v]);return}}return}if(a){if(r){if(r.nodeType){if(!d(i,r)){s=l.createRng();s.setStartBefore(r);s.setEndAfter(r);h(l,my.expandRng(e,s,i),null,true)}}else{h(l,r,null,true)}}else{if(!u||!a.inline||l.select("td[data-mce-selected],th[data-mce-selected]").length){var g=e.selection.getNode();if(!e.settings.forced_root_block&&i[0].defaultBlock&&!l.getParent(g,l.isBlock)){zS(e,i[0].defaultBlock)}e.selection.setRng(Fv.normalize(e.selection.getRng()));o=c.getBookmark();h(l,my.expandRng(e,c.getRng(),i),o);if(a.styles){jS.mergeUnderlineAndColor(l,a,n,g)}c.moveToBookmark(o);ny.moveStart(l,c,c.getRng());e.nodeChanged()}else{Jy.applyCaretFormat(e,t,n)}}nS.postProcess(t,e)}};var US={applyFormat:zS};var VS=Un.each;var WS=function(e,t){var n={};e.set({});t.on("NodeChange",function(r){var i=ny.getParents(t.dom,r.element);var a={};i=Un.grep(i,function(e){return e.nodeType===1&&!e.getAttribute("data-mce-bogus")});VS(e.get(),function(e,r){VS(i,function(o){if(t.formatter.matchNode(o,r,{},e.similar)){if(!n[r]){VS(e,function(e){e(true,{node:o,format:r,parents:i})});n[r]=e}a[r]=e;return false}if(Ey.matchesUnInheritedFormatSelector(t,o,r)){return false}})});VS(n,function(e,t){if(!a[t]){delete n[t];VS(e,function(e){e(false,{node:r.element,format:t,parents:i})})}})})};var qS=function(e,t,n,r){var i=e.get();VS(t.split(","),function(e){if(!i[e]){i[e]=[];i[e].similar=r}i[e].push(n)});e.set(i)};var YS=function(e,t,n,r,i){if(t.get()===null){WS(t,e)}qS(t,n,r,i)};var KS={formatChanged:YS};var $S=function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:false,classes:"align-left",ceFalseOverride:true,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:false,preview:false,defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:false,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:false,classes:"align-center",ceFalseOverride:true,preview:"font-family font-size"},{selector:"img",collapsed:false,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:false},{selector:"table",collapsed:false,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:false,classes:"align-right",ceFalseOverride:true,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:false,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:false,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:true,remove_similar:true,clear_child_styles:true},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:true,remove_similar:true,clear_child_styles:true},fontname:{inline:"span",toggle:false,styles:{fontFamily:"%value"},clear_child_styles:true},fontsize:{inline:"span",toggle:false,styles:{fontSize:"%value"},clear_child_styles:true},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:true,deep:true,onmatch:function(){return true},onformat:function(t,n,r){Un.each(r,function(n,r){e.setAttrib(t,r,n)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]};Un.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}});return t};var GS={get:$S};function XS(e){var t={};var n=function(e){return e?t[e]:t};var r=function(e,n){if(e){if(typeof e!=="string"){Un.each(e,function(e,t){r(t,e)})}else{n=n.length?n:[n];Un.each(n,function(e){if(typeof e.deep==="undefined"){e.deep=!e.selector}if(typeof e.split==="undefined"){e.split=!e.selector||e.inline}if(typeof e.remove==="undefined"&&e.selector&&!e.inline){e.remove="none"}if(e.selector&&e.inline){e.mixed=true;e.block_expand=true}if(typeof e.classes==="string"){e.classes=e.classes.split(/\s+/)}});t[e]=n}}};var i=function(e){if(e&&t[e]){delete t[e]}return t};r(GS.get(e.dom));r(e.settings.formats);return{get:n,register:r,unregister:i}}var ZS=Un.each;var JS=ju.DOM;var QS=function(e,t){var n,r,i;var a=t&&t.schema||Su({});var o=function(e,t){if(t.classes.length){JS.addClass(e,t.classes.join(" "))}JS.setAttribs(e,t.attrs)};var s=function(e){var t;r=typeof e==="string"?{name:e,classes:[],attrs:{}}:e;t=JS.create(r.name);o(t,r);return t};var u=function(e,t){var n=typeof e!=="string"?e.nodeName.toLowerCase():e;var r=a.getElementRule(n);var i=r&&r.parentsRequired;if(i&&i.length){return t&&Un.inArray(i,t)!==-1?t:i[0]}else{return false}};var l=function(e,t,n){var r,i,a;var o=t.length>0&&t[0];var c=o&&o.name;a=u(e,c);if(a){if(c===a){i=t[0];t=t.slice(1)}else{i=a}}else if(o){i=t[0];t=t.slice(1)}else if(!n){return e}if(i){r=s(i);r.appendChild(e)}if(n){if(!r){r=JS.create("div");r.appendChild(e)}Un.each(n,function(t){var n=s(t);r.insertBefore(n,e)})}return l(r,t,i&&i.siblings)};if(e&&e.length){r=e[0];n=s(r);i=JS.create("div");i.appendChild(l(n,e.slice(1),r.siblings));return i}else{return""}};var eE=function(e,t){return QS(nE(e),t)};var tE=function(e){var t;var n={classes:[],attrs:{}};e=n.selector=Un.trim(e);if(e!=="*"){t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,r,i,a){switch(t){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":if(Un.inArray("checked disabled enabled read-only required".split(" "),r)!==-1){n.attrs[r]=r}break}if(i==="["){var o=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);if(o){n.attrs[o[1]]=o[2]}}return""})}n.name=t||"div";return n};var nE=function(e){if(!e||typeof e!=="string"){return[]}e=e.split(/\s*,\s*/)[0];e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1");return Un.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var t=Un.map(e.split(/(?:~\+|~|\+)/),tE);var n=t.pop();if(t.length){n.siblings=t}return n}).reverse()};var rE=function(e,t){var n,r,i,a;var o="",s,u;u=e.settings.preview_styles;if(u===false){return""}if(typeof u!=="string"){u="font-family font-size font-weight font-style text-decoration "+"text-transform color background-color border border-radius outline text-shadow"}var l=function(e){return e.replace(/%(\w+)/g,"")};if(typeof t==="string"){t=e.formatter.get(t);if(!t){return}t=t[0]}if("preview"in t){u=t.preview;if(u===false){return""}}n=t.block||t.inline||"span";a=nE(t.selector);if(a.length){if(!a[0].name){a[0].name=n}n=t.selector;r=QS(a,e)}else{r=QS([n],e)}i=JS.select(n,r)[0]||r.firstChild;ZS(t.styles,function(e,t){e=l(e);if(e){JS.setStyle(i,t,e)}});ZS(t.attributes,function(e,t){e=l(e);if(e){JS.setAttrib(i,t,e)}});ZS(t.classes,function(e){e=l(e);if(!JS.hasClass(i,e)){JS.addClass(i,e)}});e.fire("PreviewFormats");JS.setStyles(r,{position:"absolute",left:-65535});e.getBody().appendChild(r);s=JS.getStyle(e.getBody(),"fontSize",true);s=/px$/.test(s)?parseInt(s,10):0;ZS(u.split(" "),function(t){var n=JS.getStyle(i,t,true);if(t==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)){n=JS.getStyle(e.getBody(),t,true);if(JS.toHex(n).toLowerCase()==="#ffffff"){return}}if(t==="color"){if(JS.toHex(n).toLowerCase()==="#000000"){return}}if(t==="font-size"){if(/em|%$/.test(n)){if(s===0){return}n=parseFloat(n)/(/%$/.test(n)?100:1);n=n*s+"px"}}if(t==="border"&&n){o+="padding:0 2px;"}o+=t+":"+n+";"});e.fire("AfterPreviewFormats");JS.remove(r);return o};var iE={getCssText:rE,parseSelector:nE,selectorToHtml:eE};var aE=function(e,t,n,r,i){var a=t.get(n);if(Ey.match(e,n,r,i)&&(!("toggle"in a[0])||a[0].toggle)){wS.remove(e,n,r,i)}else{US.applyFormat(e,n,r,i)}};var oE={toggle:aE};var sE=function(e){e.addShortcut("meta+b","","Bold");e.addShortcut("meta+i","","Italic");e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++){e.addShortcut("access+"+t,"",["FormatBlock",false,"h"+t])}e.addShortcut("access+7","",["FormatBlock",false,"p"]);e.addShortcut("access+8","",["FormatBlock",false,"div"]);e.addShortcut("access+9","",["FormatBlock",false,"address"])};var uE={setup:sE};function lE(e){var t=XS(e);var n=xb(null);uE.setup(e);Jy.setup(e);return{get:t.get,register:t.register,unregister:t.unregister,apply:v.curry(US.applyFormat,e),remove:v.curry(wS.remove,e),toggle:v.curry(oE.toggle,e,t),match:v.curry(Ey.match,e),matchAll:v.curry(Ey.matchAll,e),matchNode:v.curry(Ey.matchNode,e),canApply:v.curry(Ey.canApply,e),formatChanged:v.curry(KS.formatChanged,e,n),getCssText:v.curry(iE.getCssText,e)}}var cE=function(e,t){return t};var fE=function(e,t){var n=Xi.isObject(e)&&Xi.isObject(t);return n?hE(e,t):t};var dE=function(e){return function(){var t=new Array(arguments.length);for(var n=0;n<t.length;n++){t[n]=arguments[n]}if(t.length===0){throw new Error("Can't merge zero objects")}var r={};for(var i=0;i<t.length;i++){var a=t[i];for(var o in a){if(a.hasOwnProperty(o)){r[o]=e(r[o],a[o])}}}return r}};var hE=dE(fE);var vE=dE(cE);var pE={deepMerge:hE,merge:vE};var gE=function(e,t){return e.fire("PreProcess",t)};var mE=function(e,t){return e.fire("PostProcess",t)};var yE=function(e){return e.fire("remove")};var bE={firePreProcess:gE,firePostProcess:mE,fireRemove:yE};var _E=function(e,t,n){e.addAttributeFilter("data-mce-tabindex",function(e,t){var n=e.length,r;while(n--){r=e[n];r.attr("tabindex",r.attributes.map["data-mce-tabindex"]);r.attr(t,null)}});e.addAttributeFilter("src,href,style",function(e,r){var i=e.length,a,o;var s="data-mce-"+r;var u=t.url_converter;var l=t.url_converter_scope;while(i--){a=e[i];o=a.attributes.map[s];if(o!==undefined){a.attr(r,o.length>0?o:null);a.attr(s,null)}else{o=a.attributes.map[r];if(r==="style"){o=n.serializeStyle(n.parseStyle(o),a.name)}else if(u){o=u.call(l,o,r,a.name)}a.attr(r,o.length>0?o:null)}}});e.addAttributeFilter("class",function(e){var t=e.length,n,r;while(t--){n=e[t];r=n.attr("class");if(r){r=n.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,"");n.attr("class",r.length>0?r:null)}}});e.addAttributeFilter("data-mce-type",function(e,t,n){var r=e.length,i;while(r--){i=e[r];if(i.attributes.map["data-mce-type"]==="bookmark"&&!n.cleanup){i.remove()}}});e.addNodeFilter("noscript",function(e){var t=e.length,n;while(t--){n=e[t].firstChild;if(n){n.value=pu.decode(n.value)}}});e.addNodeFilter("script,style",function(e,n){var r=e.length,i,a,o;var s=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};while(r--){i=e[r];a=i.firstChild?i.firstChild.value:"";if(n==="script"){o=i.attr("type");if(o){i.attr("type",o==="mce-no/type"?null:o.replace(/^mce\-/,""))}if(t.element_format==="xhtml"&&a.length>0){i.firstChild.value="// <![CDATA[\n"+s(a)+"\n// ]]>"}}else{if(t.element_format==="xhtml"&&a.length>0){i.firstChild.value="\x3c!--\n"+s(a)+"\n--\x3e"}}}});e.addNodeFilter("#comment",function(e){var t=e.length,n;while(t--){n=e[t];if(n.value.indexOf("[CDATA[")===0){n.name="#cdata";n.type=4;n.value=n.value.replace(/^\[CDATA\[|\]\]$/g,"")}else if(n.value.indexOf("mce:protected ")===0){n.name="#text";n.type=3;n.raw=true;n.value=unescape(n.value).substr(14)}}});e.addNodeFilter("xml:namespace,input",function(e,t){var n=e.length,r;while(n--){r=e[n];if(r.type===7){r.remove()}else if(r.type===1){if(t==="input"&&!("type"in r.attributes.map)){r.attr("type","text")}}}});e.addAttributeFilter("data-mce-type",function(t){J.each(t,function(t){if(t.attr("data-mce-type")==="format-caret"){if(t.isEmpty(e.schema.getNonEmptyElements())){t.remove()}else{t.unwrap()}}})});e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,"+"data-mce-selected,data-mce-expando,"+"data-mce-type,data-mce-resize",function(e,t){var n=e.length;while(n--){e[n].attr(t,null)}})};var wE=function(e){var t,n;var r=function(e){return e&&e.name==="br"};t=e.lastChild;if(r(t)){n=t.prev;if(r(n)){t.remove();n.remove()}}};var xE={register:_E,trimTrailingBr:wE};var TE=function(e,t,n){var r,i,a;var o=e.dom;t=t.cloneNode(true);r=document.implementation;if(r.createHTMLDocument){i=r.createHTMLDocument("");Un.each(t.nodeName==="BODY"?t.childNodes:[t],function(e){i.body.appendChild(i.importNode(e,true))});if(t.nodeName!=="BODY"){t=i.body.firstChild}else{t=i.body}a=o.doc;o.doc=i}bE.firePreProcess(e,pE.merge(n,{node:t}));if(a){o.doc=a}return t};var CE=function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events};var kE=function(e,t,n){return CE(e,n)?TE(e,t,n):t};var SE={process:kE};var EE=function(e,t){J.each(t,function(t){e.attr(t,null)})};var PE=function(e,t,n){e.addNodeFilter("font",function(e){J.each(e,function(e){var r=t.parse(e.attr("style"));var i=e.attr("color");var a=e.attr("face");var o=e.attr("size");if(i){r.color=i}if(a){r["font-family"]=a}if(o){r["font-size"]=n[parseInt(e.attr("size"),10)-1]}e.name="span";e.attr("style",t.serialize(r));EE(e,["color","face","size"])})})};var OE=function(e,t){e.addNodeFilter("strike",function(e){J.each(e,function(e){var n=t.parse(e.attr("style"));n["text-decoration"]="line-through";e.name="span";e.attr("style",t.serialize(n))})})};var ME=function(e,t){var n=Pu();if(t.convert_fonts_to_spans){PE(e,n,Un.explode(t.font_size_legacy_values))}OE(e,n)};var AE=function(e,t){if(t.inline_styles){ME(e,t)}};var NE={register:AE};var RE=/^[ \t\r\n]*$/;var DE={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};var LE=function(e,t,n){var r;var i;var a=n?"lastChild":"firstChild";var o=n?"prev":"next";if(e[a]){return e[a]}if(e!==t){r=e[o];if(r){return r}for(i=e.parent;i&&i!==t;i=i.parent){r=i[o];if(r){return r}}}};var IE=function(){function e(e,t){this.name=e;this.type=t;if(t===1){this.attributes=[];this.attributes.map={}}}e.create=function(t,n){var r,i;r=new e(t,DE[t]||1);if(n){for(i in n){r.attr(i,n[i])}}return r};e.prototype.replace=function(e){var t=this;if(e.parent){e.remove()}t.insert(e,t);t.remove();return t};e.prototype.attr=function(e,t){var n=this;var r,i;if(typeof e!=="string"){for(i in e){n.attr(i,e[i])}return n}if(r=n.attributes){if(t!==undefined){if(t===null){if(e in r.map){delete r.map[e];i=r.length;while(i--){if(r[i].name===e){r=r.splice(i,1);return n}}}return n}if(e in r.map){i=r.length;while(i--){if(r[i].name===e){r[i].value=t;break}}}else{r.push({name:e,value:t})}r.map[e]=t;return n}return r.map[e]}};e.prototype.clone=function(){var t=this;var n=new e(t.name,t.type);var r,i,a,o,s;if(a=t.attributes){s=[];s.map={};for(r=0,i=a.length;r<i;r++){o=a[r];if(o.name!=="id"){s[s.length]={name:o.name,value:o.value};s.map[o.name]=o.value}}n.attributes=s}n.value=t.value;n.shortEnded=t.shortEnded;return n};e.prototype.wrap=function(e){var t=this;t.parent.insert(e,t);e.append(t);return t};e.prototype.unwrap=function(){var e=this;var t,n;for(t=e.firstChild;t;){n=t.next;e.insert(t,e,true);t=n}e.remove()};e.prototype.remove=function(){var e=this,t=e.parent,n=e.next,r=e.prev;if(t){if(t.firstChild===e){t.firstChild=n;if(n){n.prev=null}}else{r.next=n}if(t.lastChild===e){t.lastChild=r;if(r){r.next=null}}else{n.prev=r}e.parent=e.next=e.prev=null}return e};e.prototype.append=function(e){var t=this;var n;if(e.parent){e.remove()}n=t.lastChild;if(n){n.next=e;e.prev=n;t.lastChild=e}else{t.lastChild=t.firstChild=e}e.parent=t;return e};e.prototype.insert=function(e,t,n){var r;if(e.parent){e.remove()}r=t.parent||this;if(n){if(t===r.firstChild){r.firstChild=e}else{t.prev.next=e}e.prev=t.prev;e.next=t;t.prev=e}else{if(t===r.lastChild){r.lastChild=e}else{t.next.prev=e}e.next=t.next;e.prev=t;t.next=e}e.parent=r;return e};e.prototype.getAll=function(e){var t=this;var n;var r=[];for(n=t.firstChild;n;n=LE(n,t)){if(n.name===e){r.push(n)}}return r};e.prototype.empty=function(){var e=this;var t,n,r;if(e.firstChild){t=[];for(r=e.firstChild;r;r=LE(r,e)){t.push(r)}n=t.length;while(n--){r=t[n];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}e.firstChild=e.lastChild=null;return e};e.prototype.isEmpty=function(e,t,n){var r=this;var i=r.firstChild,a,o;t=t||{};if(i){do{if(i.type===1){if(i.attributes.map["data-mce-bogus"]){continue}if(e[i.name]){return false}a=i.attributes.length;while(a--){o=i.attributes[a].name;if(o==="name"||o.indexOf("data-mce-bookmark")===0){return false}}}if(i.type===8){return false}if(i.type===3&&!RE.test(i.value)){return false}if(i.type===3&&i.parent&&t[i.parent.name]&&RE.test(i.value)){return false}if(n&&n(i)){return false}}while(i=LE(i,r))}return true};e.prototype.walk=function(e){return LE(this,null,e)};return e}();var BE=function(e,t,n,r){var i=e.padd_empty_with_br||t.insert;if(i&&n[r.name]){r.empty().append(new IE("br",1)).shortEnded=true}else{r.empty().append(new IE("#text",3)).value="¬†"}};var jE=function(e){return FE(e,"#text")&&e.firstChild.value==="¬†"};var FE=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t};var HE=function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty};var zE=function(e,t,n,r){return r.isEmpty(t,n,function(t){return HE(e,t)})};var UE=function(e,t){return e&&(t[e.name]||e.name==="br")};var VE=function(e,t){var n=e.schema;if(t.remove_trailing_brs){e.addNodeFilter("br",function(e,r,i){var a;var o=e.length;var s;var u=Un.extend({},n.getBlockElements());var l=n.getNonEmptyElements();var c,f,d,h;var v=n.getNonEmptyElements();var p,g;u.body=1;for(a=0;a<o;a++){s=e[a];c=s.parent;if(u[s.parent.name]&&s===c.lastChild){d=s.prev;while(d){h=d.name;if(h!=="span"||d.attr("data-mce-type")!=="bookmark"){if(h!=="br"){break}if(h==="br"){s=null;break}}d=d.prev}if(s){s.remove();if(zE(n,l,v,c)){p=n.getElementRule(c.name);if(p){if(p.removeEmpty){c.remove()}else if(p.paddEmpty){BE(t,i,u,c)}}}}}else{f=s;while(c&&c.firstChild===f&&c.lastChild===f){f=c;if(u[c.name]){break}c=c.parent}if(f===c&&t.padd_empty_with_br!==true){g=new IE("#text",3);g.value="¬†";s.replace(g)}}}})}e.addAttributeFilter("href",function(e){var n=e.length,r;var i=function(e){var t=e.split(" ").filter(function(e){return e.length>0});return t.concat(["noopener"]).sort().join(" ")};var a=function(e){var t=e?Un.trim(e):"";if(!/\b(noopener)\b/g.test(t)){return i(t)}else{return t}};if(!t.allow_unsafe_link_target){while(n--){r=e[n];if(r.name==="a"&&r.attr("target")==="_blank"){r.attr("rel",a(r.attr("rel")))}}}});if(!t.allow_html_in_named_anchor){e.addAttributeFilter("id,name",function(e){var t=e.length,n,r,i,a;while(t--){a=e[t];if(a.name==="a"&&a.firstChild&&!a.attr("href")){i=a.parent;n=a.lastChild;do{r=n.prev;i.insert(n,a);n=r}while(n)}}})}if(t.fix_list_elements){e.addNodeFilter("ul,ol",function(e){var t=e.length,n,r;while(t--){n=e[t];r=n.parent;if(r.name==="ul"||r.name==="ol"){if(n.prev&&n.prev.name==="li"){n.prev.append(n)}else{var i=new IE("li",1);i.attr("style","list-style-type: none");n.wrap(i)}}}})}if(t.validate&&n.getValidClasses()){e.addAttributeFilter("class",function(e){var t=e.length,r,i,a,o,s;var u=n.getValidClasses();var l,c;while(t--){r=e[t];i=r.attr("class").split(" ");s="";for(a=0;a<i.length;a++){o=i[a];c=false;l=u["*"];if(l&&l[o]){c=true}l=u[r.name];if(!c&&l&&l[o]){c=true}if(c){if(s){s+=" "}s+=o}}if(!s.length){s=null}r.attr("class",s)}})}};var WE=Un.makeMap;var qE=Un.each;var YE=Un.explode;var KE=Un.extend;function $E(e,t){if(t===void 0){t=Su()}var n={};var r=[];var i={};var a={};e=e||{};e.validate="validate"in e?e.validate:true;e.root_name=e.root_name||"body";var o=function(e){var n,r,i,a,o,u,l,c,f;var d,h,v,p,g,m,y;v=WE("tr,td,th,tbody,thead,tfoot,table");d=t.getNonEmptyElements();h=t.getWhiteSpaceElements();p=t.getTextBlockElements();g=t.getSpecialElements();for(n=0;n<e.length;n++){r=e[n];if(!r.parent||r.fixed){continue}if(p[r.name]&&r.parent.name==="li"){m=r.next;while(m){if(p[m.name]){m.name="li";m.fixed=true;r.parent.insert(m,r.parent)}else{break}m=m.next}r.unwrap(r);continue}a=[r];for(i=r.parent;i&&!t.isValidChild(i.name,r.name)&&!v[i.name];i=i.parent){a.push(i)}if(i&&a.length>1){a.reverse();o=u=s(a[0].clone());for(f=0;f<a.length-1;f++){if(t.isValidChild(u.name,a[f].name)){l=s(a[f].clone());u.append(l)}else{l=u}for(c=a[f].firstChild;c&&c!==a[f+1];){y=c.next;l.append(c);c=y}u=l}if(!zE(t,d,h,o)){i.insert(o,a[0],true);i.insert(r,o)}else{i.insert(r,a[0],true)}i=a[0];if(zE(t,d,h,i)||FE(i,"br")){i.empty().remove()}}else if(r.parent){if(r.name==="li"){m=r.prev;if(m&&(m.name==="ul"||m.name==="ul")){m.append(r);continue}m=r.next;if(m&&(m.name==="ul"||m.name==="ul")){m.insert(r,m.firstChild,true);continue}r.wrap(s(new IE("ul",1)));continue}if(t.isValidChild(r.parent.name,"div")&&t.isValidChild("div",r.name)){r.wrap(s(new IE("div",1)))}else{if(g[r.name]){r.empty().remove()}else{r.unwrap()}}}}};var s=function(e){var t,o,s;if(o in n){s=i[o];if(s){s.push(e)}else{i[o]=[e]}}t=r.length;while(t--){o=r[t].name;if(o in e.attributes.map){s=a[o];if(s){s.push(e)}else{a[o]=[e]}}}return e};var u=function(e,t){qE(YE(e),function(e){var r=n[e];if(!r){n[e]=r=[]}r.push(t)})};var l=function(){var e=[];for(var t in n){if(n.hasOwnProperty(t)){e.push({name:t,callbacks:n[t]})}}return e};var c=function(e,t){qE(YE(e),function(e){var n;for(n=0;n<r.length;n++){if(r[n].name===e){r[n].callbacks.push(t);return}}r.push({name:e,callbacks:[t]})})};var f=function(){return[].concat(r)};var d=function(s,u){var l,c,f,d,h,v,p,g;var m;var y=[];var b;var _;u=u||{};i={};a={};m=KE(WE("script,style,head,html,body,title,meta,param"),t.getBlockElements());var w=t.getNonEmptyElements();var x=t.children;var T=e.validate;var C="forced_root_block"in u?u.forced_root_block:e.forced_root_block;var k=t.getWhiteSpaceElements();var S=/^[ \t\r\n]+/;var E=/[ \t\r\n]+$/;var P=/[ \t\r\n]+/g;var O=/^[ \t\r\n]+$/;var M=function(){var n=D.firstChild,r,i;var a=function(e){if(e){n=e.firstChild;if(n&&n.type===3){n.value=n.value.replace(S,"")}n=e.lastChild;if(n&&n.type===3){n.value=n.value.replace(E,"")}}};if(!t.isValidChild(D.name,C.toLowerCase())){return}while(n){r=n.next;if(n.type===3||n.type===1&&n.name!=="p"&&!m[n.name]&&!n.attr("data-mce-type")){if(!i){i=A(C,1);i.attr(e.forced_root_block_attrs);D.insert(i,n);i.append(n)}else{i.append(n)}}else{a(i);i=null}n=r}a(i)};var A=function(e,t){var r=new IE(e,t);var a;if(e in n){a=i[e];if(a){a.push(r)}else{i[e]=[r]}}return r};var N=function(e){var n,r,i,a;var o=t.getBlockElements();for(n=e.prev;n&&n.type===3;){i=n.value.replace(E,"");if(i.length>0){n.value=i;return}r=n.next;if(r){if(r.type===3&&r.value.length){n=n.prev;continue}if(!o[r.name]&&r.name!=="script"&&r.name!=="style"){n=n.prev;continue}}a=n.prev;n.remove();n=a}};var R=function(e){var t;var n={};for(t in e){if(t!=="li"&&t!=="p"){n[t]=e[t]}}return n};l=Ck({validate:T,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,self_closing_elements:R(t.getSelfClosingElements()),cdata:function(e){_.append(A("#cdata",4)).value=e},text:function(e,t){var n;if(!b){e=e.replace(P," ");if(UE(_.lastChild,m)){e=e.replace(S,"")}}if(e.length!==0){n=A("#text",3);n.raw=!!t;_.append(n).value=e}},comment:function(e){_.append(A("#comment",8)).value=e},pi:function(e,t){_.append(A(e,7)).value=t;N(_)},doctype:function(e){var t;t=_.append(A("#doctype",10));t.value=e;N(_)},start:function(e,n,i){var o,s,u,l,c;u=T?t.getElementRule(e):{};if(u){o=A(u.outputName||e,1);o.attributes=n;o.shortEnded=i;_.append(o);c=x[_.name];if(c&&x[o.name]&&!c[o.name]){y.push(o)}s=r.length;while(s--){l=r[s].name;if(l in n.map){p=a[l];if(p){p.push(o)}else{a[l]=[o]}}}if(m[e]){N(o)}if(!i){_=o}if(!b&&k[e]){b=true}}},end:function(n){var r,i,a,o,s;i=T?t.getElementRule(n):{};if(i){if(m[n]){if(!b){r=_.firstChild;if(r&&r.type===3){a=r.value.replace(S,"");if(a.length>0){r.value=a;r=r.next}else{o=r.next;r.remove();r=o;while(r&&r.type===3){a=r.value;o=r.next;if(a.length===0||O.test(a)){r.remove();r=o}r=o}}}r=_.lastChild;if(r&&r.type===3){a=r.value.replace(E,"");if(a.length>0){r.value=a;r=r.prev}else{o=r.prev;r.remove();r=o;while(r&&r.type===3){a=r.value;o=r.prev;if(a.length===0||O.test(a)){r.remove();r=o}r=o}}}}}if(b&&k[n]){b=false}if(i.removeEmpty&&zE(t,w,k,_)){if(!_.attributes.map.name&&!_.attr("id")){s=_.parent;if(m[_.name]){_.empty().remove()}else{_.unwrap()}_=s;return}}if(i.paddEmpty&&(jE(_)||zE(t,w,k,_))){BE(e,u,m,_)}_=_.parent}}},t);var D=_=new IE(u.context||e.root_name,11);l.parse(s);if(T&&y.length){if(!u.context){o(y)}else{u.invalid=true}}if(C&&(D.name==="body"||u.isRootContent)){M()}if(!u.invalid){for(g in i){p=n[g];c=i[g];h=c.length;while(h--){if(!c[h].parent){c.splice(h,1)}}for(f=0,d=p.length;f<d;f++){p[f](c,g,u)}}for(f=0,d=r.length;f<d;f++){p=r[f];if(p.name in a){c=a[p.name];h=c.length;while(h--){if(!c[h].parent){c.splice(h,1)}}for(h=0,v=p.callbacks.length;h<v;h++){p.callbacks[h](c,p.name,u)}}}}return D};var h={schema:t,addAttributeFilter:c,getAttributeFilters:f,addNodeFilter:u,getNodeFilters:l,filterNode:s,parse:d};VE(h,e);NE.register(h,e);return h}var GE=function(e,t,n){if(Un.inArray(t,n)===-1){e.addAttributeFilter(n,function(e,t){var n=e.length;while(n--){e[n].attr(t,null)}});t.push(n)}};var XE=function(e,t,n){if(!t.no_events&&e){var r=bE.firePostProcess(e,pE.merge(t,{content:n}));return r.content}else{return n}};var ZE=function(e,t,n){var r=Gu.trim(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection?r:Un.trim(r)};var JE=function(e,t,n,r){var i=r.selection?pE.merge({forced_root_block:false},r):r;var a=e.parse(n,i);xE.trimTrailingBr(a);return a};var QE=function(e,t,n){var r=Dv(e,t);return r.serialize(n)};var eP=function(e,t,n,r,i){var a=QE(t,n,r);return XE(e,i,a)};function tP(e,t){var n,r,i;var a=["data-mce-selected"];n=t&&t.dom?t.dom:ju.DOM;r=t&&t.schema?t.schema:Su(e);e.entity_encoding=e.entity_encoding||"named";e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:true;i=$E(e,r);xE.register(i,e,n);var o=function(a,o){var s=pE.merge({format:"html"},o?o:{});var u=SE.process(t,a,s);var l=ZE(n,u,s);var c=JE(i,n,l,s);return s.format==="tree"?c:eP(t,e,r,c,s)};return{schema:r,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:o,addRules:function(e){r.addValidElements(e)},setRules:function(e){r.setValidElements(e)},addTempAttr:v.curry(GE,i,a),getTempAttrs:function(){return a}}}function nP(e,t){var n=tP(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs}}var rP=function(e){return Yp.descendant(Bi.fromDom(e.getBody()),"*[data-mce-caret]").fold(v.constant(null),function(e){return e.dom()})};var iP=function(e){e.selection.setRng(e.selection.getRng())};var aP=function(e,t){if(t.hasAttribute("data-mce-caret")){cl(t);iP(e);e.selection.scrollIntoView(t)}};var oP=function(e,t){var n=rP(e);if(!n){return}if(t.type==="compositionstart"){t.preventDefault();t.stopPropagation();aP(e,n);return}if(tl(n)){aP(e,n)}};var sP=function(e){e.on("keyup compositionstart",v.curry(oP,e))};var uP={setup:sP};function lP(e){return{getBookmark:v.curry(ev.getBookmark,e),moveToBookmark:v.curry(ev.moveToBookmark,e)}}(function(e){e.isBookmarkNode=ev.isBookmarkNode})(lP||(lP={}));var cP=lP;var fP=Ks.isContentEditableFalse;var dP=Ks.isContentEditableTrue;var hP=function(e,t){while(t&&t!==e){if(dP(t)||fP(t)){return t}t=t.parentNode}return null};var vP=function(e,t){var n=t.dom,r=Un.each;var i,a,o,s,u;var l,c,f,d,h,v,p,g;var m,y;var b=t.getDoc(),_=document;var w=Math.abs,x=Math.round,T=t.getBody();var C,k;s={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var S=".mce-content-body";t.contentStyles.push(S+" div.mce-resizehandle {"+"position: absolute;"+"border: 1px solid black;"+"box-sizing: content-box;"+"background: #FFF;"+"width: 7px;"+"height: 7px;"+"z-index: 10000"+"}"+S+" .mce-resizehandle:hover {"+"background: #000"+"}"+S+" img[data-mce-selected],"+S+" hr[data-mce-selected] {"+"outline: 1px solid black;"+"resize: none"+"}"+S+" .mce-clonedresizable {"+"position: absolute;"+(Me.gecko?"":"outline: 1px dashed black;")+"opacity: .5;"+"filter: alpha(opacity=50);"+"z-index: 10000"+"}"+S+" .mce-resize-helper {"+"background: #555;"+"background: rgba(0,0,0,0.75);"+"border-radius: 3px;"+"border: 1px;"+"color: white;"+"display: none;"+"font-family: sans-serif;"+"font-size: 12px;"+"white-space: nowrap;"+"line-height: 14px;"+"margin: 5px 10px;"+"padding: 5px;"+"position: absolute;"+"z-index: 10001"+"}");var E=function(e){return e&&(e.nodeName==="IMG"||t.dom.is(e,"figure.image"))};var P=function(e,t){return E(e.target)&&!ok.isXYWithinRange(e.clientX,e.clientY,t)};var O=function(e){var n=e.target;if(P(e,t.selection.getRng())&&!e.isDefaultPrevented()){e.preventDefault();t.selection.select(n)}};var M=function(e){return t.dom.is(e,"figure.image")?e.querySelector("img"):e};var A=function(e){var n=t.settings.object_resizing;if(n===false||Me.iOS){return false}if(typeof n!=="string"){n="table,img,figure.image,div"}if(e.getAttribute("data-mce-resize")==="false"){return false}if(e===t.getBody()){return false}return co.is(Bi.fromDom(e),n)};var N=function(e){var r,s,b;var _,S;r=e.screenX-l;s=e.screenY-c;m=r*u[2]+h;y=s*u[3]+v;m=m<5?5:m;y=y<5?5:y;if(E(i)&&t.settings.resize_img_proportional!==false){b=!hk.modifierPressed(e)}else{b=hk.modifierPressed(e)||E(i)&&u[2]*u[3]!==0}if(b){if(w(r)>w(s)){y=x(m*p);m=x(y/p)}else{m=x(y/p);y=x(m*p)}}n.setStyles(M(a),{width:m,height:y});_=u.startPos.x+r;S=u.startPos.y+s;_=_>0?_:0;S=S>0?S:0;n.setStyles(o,{left:_,top:S,display:"block"});o.innerHTML=m+" &times; "+y;if(u[2]<0&&a.clientWidth<=m){n.setStyle(a,"left",f+(h-m))}if(u[3]<0&&a.clientHeight<=y){n.setStyle(a,"top",d+(v-y))}r=T.scrollWidth-C;s=T.scrollHeight-k;if(r+s!==0){n.setStyles(o,{left:_-r,top:S-s})}if(!g){t.fire("ObjectResizeStart",{target:i,width:h,height:v});g=true}};var R=function(){g=false;var e=function(e,r){if(r){if(i.style[e]||!t.schema.isValid(i.nodeName.toLowerCase(),e)){n.setStyle(M(i),e,r)}else{n.setAttrib(M(i),e,r)}}};e("width",m);e("height",y);n.unbind(b,"mousemove",N);n.unbind(b,"mouseup",R);if(_!==b){n.unbind(_,"mousemove",N);n.unbind(_,"mouseup",R)}n.remove(a);n.remove(o);D(i);t.fire("ObjectResized",{target:i,width:m,height:y});n.setAttrib(i,"style",n.getAttrib(i,"style"));t.nodeChanged()};var D=function(e){var g,w,x,S,E;L();j();g=n.getPos(e,T);f=g.x;d=g.y;E=e.getBoundingClientRect();w=E.width||E.right-E.left;x=E.height||E.bottom-E.top;if(i!==e){i=e;m=y=0}S=t.fire("ObjectSelected",{target:e});if(A(e)&&!S.isDefaultPrevented()){r(s,function(e,t){var r;var s=function(t){l=t.screenX;c=t.screenY;h=M(i).clientWidth;v=M(i).clientHeight;p=v/h;u=e;e.startPos={x:w*e[0]+f,y:x*e[1]+d};C=T.scrollWidth;k=T.scrollHeight;a=i.cloneNode(true);n.addClass(a,"mce-clonedresizable");n.setAttrib(a,"data-mce-bogus","all");a.contentEditable=false;a.unSelectabe=true;n.setStyles(a,{left:f,top:d,margin:0});a.removeAttribute("data-mce-selected");T.appendChild(a);n.bind(b,"mousemove",N);n.bind(b,"mouseup",R);if(_!==b){n.bind(_,"mousemove",N);n.bind(_,"mouseup",R)}o=n.add(T,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},h+" &times; "+v)};r=n.get("mceResizeHandle"+t);if(r){n.remove(r)}r=n.add(T,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:true,style:"cursor:"+t+"-resize; margin:0; padding:0"});if(Me.ie){r.contentEditable=false}n.bind(r,"mousedown",function(e){e.stopImmediatePropagation();e.preventDefault();s(e)});e.elm=r;n.setStyles(r,{left:w*e[0]+f-r.offsetWidth/2,top:x*e[1]+d-r.offsetHeight/2})})}else{L()}i.setAttribute("data-mce-selected","1")};var L=function(){var e,t;j();if(i){i.removeAttribute("data-mce-selected")}for(e in s){t=n.get("mceResizeHandle"+e);if(t){n.unbind(t);n.remove(t)}}};var I=function(i){var a,o;var s=function(e,t){if(e){do{if(e===t){return true}}while(e=e.parentNode)}};if(g||t.removed){return}r(n.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")});o=i.type==="mousedown"?i.target:e.getNode();o=n.$(o).closest("table,img,figure.image,hr")[0];if(s(o,T)){F();a=e.getStart(true);if(s(a,o)&&s(e.getEnd(true),o)){D(o);return}}L()};var B=function(e){return fP(hP(t.getBody(),e))};var j=function(){for(var e in s){var t=s[e];if(t.elm){n.unbind(t.elm);delete t.elm}}};var F=function(){try{t.getDoc().execCommand("enableObjectResizing",false,false)}catch(e){}};t.on("init",function(){F();if(Me.ie&&Me.ie>=11){t.on("mousedown click",function(e){var n=e.target,r=n.nodeName;if(!g&&/^(TABLE|IMG|HR)$/.test(r)&&!B(n)){if(e.button!==2){t.selection.select(n,r==="TABLE")}if(e.type==="mousedown"){t.nodeChanged()}}});t.dom.bind(T,"mscontrolselect",function(e){var n=function(e){He.setEditorTimeout(t,function(){t.selection.select(e)})};if(B(e.target)){e.preventDefault();n(e.target);return}if(/^(TABLE|IMG|HR)$/.test(e.target.nodeName)){e.preventDefault();if(e.target.tagName==="IMG"){n(e.target)}}})}var e=He.throttle(function(e){if(!t.composing){I(e)}});t.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",e);t.on("keyup compositionend",function(t){if(i&&i.nodeName==="TABLE"){e(t)}});t.on("hide blur",L);t.on("contextmenu",O)});t.on("remove",j);var H=function(){i=a=null};return{isResizable:A,showResizeRect:D,hideResizeRect:L,updateResizeRect:I,destroy:H}};var pP=function(e){var t=0,n=0;var r=e;while(r&&r.nodeType){t+=r.offsetLeft||0;n+=r.offsetTop||0;r=r.offsetParent}return{x:t,y:n}};var gP=function(e,t,n){var r={elm:t,alignToTop:n};e.fire("scrollIntoView",r);return r.isDefaultPrevented()};var mP=function(e,t,n){var r,i;var a=e.dom;var o=a.getRoot();var s,u,l=0;if(gP(e,t,n)){return}if(!Ks.isElement(t)){return}if(n===false){l=t.offsetHeight}if(o.nodeName!=="BODY"){var c=e.selection.getScrollContainer();if(c){r=pP(t).y-pP(c).y+l;u=c.clientHeight;s=c.scrollTop;if(r<s||r+25>s+u){c.scrollTop=r<s?r:r-u+25}return}}i=a.getViewPort(e.getWin());r=a.getPos(t).y+l;s=i.y;u=i.h;if(r<i.y||r+25>s+u){e.getWin().scrollTo(0,r<s?r:r-u+25)}};var yP={scrollIntoView:mP};var bP=function(e){return Ks.isContentEditableTrue(e)||Ks.isContentEditableFalse(e)};var _P=function(e,t,n){while(e&&e!==t){if(n(e)){return e}e=e.parentNode}return null};var wP=function(e,t,n){var r,i,a;r=n.elementFromPoint(e,t);i=n.body.createTextRange();if(!r||r.tagName==="HTML"){r=n.body}i.moveToElementText(r);a=Un.toArray(i.getClientRects());a=a.sort(function(e,n){e=Math.abs(Math.max(e.top-t,e.bottom-t));n=Math.abs(Math.max(n.top-t,n.bottom-t));return e-n});if(a.length>0){t=(a[0].bottom+a[0].top)/2;try{i.moveToPoint(e,t);i.collapse(true);return i}catch(e){}}return null};var xP=function(e,t){var n=e&&e.parentElement?e.parentElement():null;return Ks.isContentEditableFalse(_P(n,t,bP))?null:e};var TP=function(e,t,n){var r,i;var a=n;if(a.caretPositionFromPoint){i=a.caretPositionFromPoint(e,t);if(i){r=n.createRange();r.setStart(i.offsetNode,i.offset);r.collapse(true)}}else if(n.caretRangeFromPoint){r=n.caretRangeFromPoint(e,t)}else if(a.body.createTextRange){r=a.body.createTextRange();try{r.moveToPoint(e,t);r.collapse(true)}catch(i){r=wP(e,t,n)}return xP(r,n.body)}return r};var CP={fromPoint:TP};var kP=function(e,t){return J.map(t,function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t})};var SP={processRanges:kP};var EP=function(e,t){return Bi.fromDom(e.dom().cloneNode(t))};var PP=function(e){return EP(e,false)};var OP=function(e){return EP(e,true)};var MP=function(e,t){var n=Bi.fromTag(t);var r=ma.clone(e);ma.setAll(n,r);return n};var AP=function(e,t){var n=MP(e,t);var r=Ho.children(OP(e));vv.append(n,r);return n};var NP=function(e,t){var n=MP(e,t);lv.before(e,n);var r=Ho.children(e);vv.append(n,r);yv.remove(e);return n};var RP={shallow:PP,shallowAs:MP,deep:OP,copy:AP,mutate:NP};var DP=function(e,t){var n=t||document;var r=n.createDocumentFragment();J.each(e,function(e){r.appendChild(e.dom())});return Bi.fromDom(r)};var LP={fromElements:DP};var IP=function(e){var t=e.startContainer,n=e.startOffset;if(Ks.isText(t)){return n===0?w.some(Bi.fromDom(t)):w.none()}else{return w.from(t.childNodes[n]).map(Bi.fromDom)}};var BP=function(e){var t=e.endContainer,n=e.endOffset;if(Ks.isText(t)){return n===t.data.length?w.some(Bi.fromDom(t)):w.none()}else{return w.from(t.childNodes[n-1]).map(Bi.fromDom)}};var jP=function(e){return Ho.firstChild(e).fold(v.constant([e]),function(t){return[e].concat(jP(t))})};var FP=function(e){return Ho.lastChild(e).fold(v.constant([e]),function(t){if(Ki.name(t)==="br"){return Ho.prevSibling(t).map(function(t){return[e].concat(FP(t))}).getOr([])}else{return[e].concat(FP(t))}})};var HP=function(e,t){return Gc.liftN([IP(t),BP(t)],function(t,n){var r=J.find(jP(e),v.curry(bo.eq,t));var i=J.find(FP(e),v.curry(bo.eq,n));return r.isSome()&&i.isSome()}).getOr(false)};var zP=function(e,t,n,r){var i=n,a=new cs(n,i);var o=e.schema.getNonEmptyElements();do{if(n.nodeType===3&&Un.trim(n.nodeValue).length!==0){if(r){t.setStart(n,0)}else{t.setEnd(n,n.nodeValue.length)}return}if(o[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName)){if(r){t.setStartBefore(n)}else{if(n.nodeName==="BR"){t.setEndBefore(n)}else{t.setEndAfter(n)}}return}if(Me.ie&&Me.ie<11&&e.isBlock(n)&&e.isEmpty(n)){if(r){t.setStart(n,0)}else{t.setEnd(n,0)}return}}while(n=r?a.next():a.prev());if(i.nodeName==="BODY"){if(r){t.setStart(i,0)}else{t.setEnd(i,i.childNodes.length)}}};var UP=Xa.immutable("element","width","rows");var VP=Xa.immutable("element","cells");var WP=Xa.immutable("x","y");var qP=function(e,t){var n=parseInt(ma.get(e,t),10);return isNaN(n)?1:n};var YP=function(e,t,n,r,i){var a=qP(i,"rowspan");var o=qP(i,"colspan");var s=e.rows();for(var u=n;u<n+a;u++){if(!s[u]){s[u]=VP(RP.deep(r),[])}for(var l=t;l<t+o;l++){var c=s[u].cells();c[l]=u===n&&l===t?i:RP.shallow(i)}}};var KP=function(e,t,n){var r=e.rows();var i=r[n]?r[n].cells():[];return!!i[t]};var $P=function(e,t,n){while(KP(e,t,n)){t++}return t};var GP=function(e){return J.foldl(e,function(e,t){return t.cells().length>e?t.cells().length:e},0)};var XP=function(e,t){var n=e.rows();for(var r=0;r<n.length;r++){var i=n[r].cells();for(var a=0;a<i.length;a++){if(bo.eq(i[a],t)){return w.some(WP(a,r))}}}return w.none()};var ZP=function(e,t,n,r,i){var a=[];var o=e.rows();for(var s=n;s<=i;s++){var u=o[s].cells();var l=t<r?u.slice(t,r+1):u.slice(r,t+1);a.push(VP(o[s].element(),l))}return a};var JP=function(e,t,n){var r=t.x(),i=t.y();var a=n.x(),o=n.y();var s=i<o?ZP(e,r,i,a,o):ZP(e,r,o,a,i);return UP(e.element(),GP(s),s)};var QP=function(e,t){var n=RP.shallow(e.element());var r=Bi.fromTag("tbody");vv.append(r,t);lv.append(n,r);return n};var eO=function(e){return J.map(e.rows(),function(e){var t=J.map(e.cells(),function(e){var t=RP.deep(e);ma.remove(t,"colspan");ma.remove(t,"rowspan");return t});var n=RP.shallow(e.element());vv.append(n,t);return n})};var tO=function(e){var t=UP(RP.shallow(e),0,[]);J.each(Cf.descendants(e,"tr"),function(e,n){J.each(Cf.descendants(e,"td,th"),function(r,i){YP(t,$P(t,i,n),n,e,r)})});return UP(t.element(),GP(t.rows()),t.rows())};var nO=function(e){return QP(e,eO(e))};var rO=function(e,t,n){return XP(e,t).bind(function(t){return XP(e,n).map(function(n){return JP(e,t,n)})})};var iO={fromDom:tO,toDom:nO,subsection:rO};var aO=function(e){return J.find(e,function(e){return Ki.name(e)==="ul"||Ki.name(e)==="ol"})};var oO=function(e,t){return J.find(e,function(e){return Ki.name(e)==="li"&&HP(e,t)}).fold(v.constant([]),function(t){return aO(e).map(function(e){return[Bi.fromTag("li"),Bi.fromTag(Ki.name(e))]}).getOr([])})};var sO=function(e,t){var n=J.foldl(t,function(e,t){lv.append(t,e);return t},e);return t.length>0?LP.fromElements([n]):n};var uO=function(e){if(Ss(e)){return Ho.parent(e).filter(ks).fold(v.constant([]),function(t){return[e,t]})}else{return ks(e)?[e]:[]}};var lO=function(e,t){var n=Bi.fromDom(t.commonAncestorContainer);var r=Cg.parentsAndSelf(n,e);var i=J.filter(r,function(e){return xs(e)||_s(e)});var a=oO(r,t);var o=i.concat(a.length?a:uO(n));return J.map(o,RP.shallow)};var cO=function(){return LP.fromElements([])};var fO=function(e,t){return sO(Bi.fromDom(t.cloneContents()),lO(e,t))};var dO=function(e,t){return Yp.ancestor(t,"table",v.curry(bo.eq,e))};var hO=function(e,t){return dO(e,t[0]).bind(function(e){var n=t[0];var r=t[t.length-1];var i=iO.fromDom(e);return iO.subsection(i,n,r).map(function(e){return LP.fromElements([iO.toDom(e)])})}).getOrThunk(cO)};var vO=function(e,t){return t.length>0&&t[0].collapsed?cO():fO(e,t[0])};var pO=function(e,t){var n=T_.getCellsFromElementOrRanges(t,e);return n.length>0?hO(e,n):vO(e,t)};var gO={read:pO};var mO=function(e,t){var n=e.selection.getRng(),r=e.dom.create("body");var i=e.selection.getSel();var a;var o=SP.processRanges(e,y_.getRanges(i));t=t||{};t.get=true;t.format=t.format||"html";t.selection=true;t=e.fire("BeforeGetContent",t);if(t.isDefaultPrevented()){e.fire("GetContent",t);return t.content}if(t.format==="text"){return e.selection.isCollapsed()?"":Gu.trim(n.text||(i.toString?i.toString():""))}if(n.cloneContents){a=t.contextual?gO.read(Bi.fromDom(e.getBody()),o).dom():n.cloneContents();if(a){r.appendChild(a)}}else if(n.item!==undefined||n.htmlText!==undefined){r.innerHTML="<br>"+(n.item?n.item(0).outerHTML:n.htmlText);r.removeChild(r.firstChild)}else{r.innerHTML=n.toString()}t.getInner=true;var s=e.selection.serializer.serialize(r,t);if(t.format==="tree"){return s}t.content=e.selection.isCollapsed()?"":s;e.fire("GetContent",t);return t.content};var yO={getContent:mO};var bO=function(e,t,n){var r=e.selection.getRng(),i;var a=e.getDoc();var o,s;n=n||{format:"html"};n.set=true;n.selection=true;n.content=t;if(!n.no_events){n=e.fire("BeforeSetContent",n);if(n.isDefaultPrevented()){e.fire("SetContent",n);return}}t=n.content;if(r.insertNode){t+='<span id="__caret">_</span>';if(r.startContainer===a&&r.endContainer===a){a.body.innerHTML=t}else{r.deleteContents();if(a.body.childNodes.length===0){a.body.innerHTML=t}else{if(r.createContextualFragment){r.insertNode(r.createContextualFragment(t))}else{o=a.createDocumentFragment();s=a.createElement("div");o.appendChild(s);s.outerHTML=t;r.insertNode(o)}}}i=e.dom.get("__caret");r=a.createRange();r.setStartBefore(i);r.setEndBefore(i);e.selection.setRng(r);e.dom.remove("__caret");try{e.selection.setRng(r)}catch(e){}}else{if(r.item){a.execCommand("Delete",false,null);r=e.getRng()}if(/^\s+/.test(t)){r.pasteHTML('<span id="__mce_tmp">_</span>'+t);e.dom.remove("__mce_tmp")}else{r.pasteHTML(t)}}if(!n.no_events){e.fire("SetContent",n)}};var _O={setContent:bO};var wO=function(e,t,n,r,i){var a=n?t.startContainer:t.endContainer;var o=n?t.startOffset:t.endOffset;return w.from(a).map(Bi.fromDom).map(function(e){return!r||!t.collapsed?Ho.child(e,i(e,o)).getOr(e):e}).bind(function(e){return Ki.isElement(e)?w.some(e):Ho.parent(e)}).map(function(e){return e.dom()}).getOr(e)};var xO=function(e,t,n){return wO(e,t,true,n,function(e,t){return Math.min(Ho.childNodesCount(e),t)})};var TO=function(e,t,n){return wO(e,t,false,n,function(e,t){return t>0?t-1:t})};var CO=function(e,t){var n=e;while(e&&Ks.isText(e)&&e.length===0){e=t?e.nextSibling:e.previousSibling}return e||n};var kO=function(e,t){var n,r,i,a,o;if(!t){return e}r=t.startContainer;i=t.endContainer;a=t.startOffset;o=t.endOffset;n=t.commonAncestorContainer;if(!t.collapsed){if(r===i){if(o-a<2){if(r.hasChildNodes()){n=r.childNodes[a]}}}if(r.nodeType===3&&i.nodeType===3){if(r.length===a){r=CO(r.nextSibling,true)}else{r=r.parentNode}if(o===0){i=CO(i.previousSibling,false)}else{i=i.parentNode}if(r&&r===i){return r}}}if(n&&n.nodeType===3){return n.parentNode}return n};var SO=function(e,t,n,r){var i,a;var o=[];a=e.getRoot();n=e.getParent(n||xO(a,t,false),e.isBlock);r=e.getParent(r||TO(a,t,false),e.isBlock);if(n&&n!==a){o.push(n)}if(n&&r&&n!==r){i=n;var s=new cs(n,a);while((i=s.next())&&i!==r){if(e.isBlock(i)){o.push(i)}}}if(r&&n!==r&&r!==a){o.push(r)}return o};var EO=function(e,t,n){return w.from(t).map(function(t){var r=e.nodeIndex(t);var i=e.createRng();i.setStart(t.parentNode,r);i.setEnd(t.parentNode,r+1);if(n){zP(e,i,t,true);zP(e,i,t,false)}return i})};var PO=Un.each;var OO=function(e){return!!e.select};var MO=function(e){return!!(e&&e.ownerDocument)&&bo.contains(Bi.fromDom(e.ownerDocument),Bi.fromDom(e))};var AO=function(e){if(!e){return false}else if(OO(e)){return true}else{return MO(e.startContainer)&&MO(e.endContainer)}};var NO=function(e,t,n,r){var i,a;var o,s,u;var l=function(t,n){var i=e.createRng();if(!t){zP(e,i,r.getBody(),true);w(i)}else{i.setStart(t,n);i.setEnd(t,n);w(i);y(false)}};var c=function(e){return yO.getContent(r,e)};var f=function(e,t){return _O.setContent(r,e,t)};var d=function(e){return xO(r.getBody(),_(),e)};var h=function(e){return TO(r.getBody(),_(),e)};var v=function(e,t){return i.getBookmark(e,t)};var p=function(e){return i.moveToBookmark(e)};var g=function(t,n){EO(e,t,n).each(w);return t};var m=function(){var e=_(),t=b();if(!e||e.item){return false}if(e.compareEndPoints){return e.compareEndPoints("StartToEnd",e)===0}return!t||e.collapsed};var y=function(e){var t=_();t.collapse(!!e);w(t)};var b=function(){return t.getSelection?t.getSelection():t.document.selection};var _=function(){var n,i,a,u;var l=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};if(!t){return null}u=t.document;if(typeof u==="undefined"||u===null){return null}if(r.bookmark!==undefined&&Zx.hasFocus(r)===false){var c=$w.getRng(r);if(c.isSome()){return c.map(function(e){return SP.processRanges(r,[e])[0]}).getOr(u.createRange())}}try{if(n=b()){if(n.rangeCount>0){i=n.getRangeAt(0)}else{i=n.createRange?n.createRange():u.createRange()}}}catch(e){}i=SP.processRanges(r,[i])[0];if(!i){i=u.createRange?u.createRange():u.body.createTextRange()}if(i.setStart&&i.startContainer.nodeType===9&&i.collapsed){a=e.getRoot();i.setStart(a,0);i.setEnd(a,0)}if(o&&s){if(l(i.START_TO_START,i,o)===0&&l(i.END_TO_END,i,o)===0){i=s}else{o=null;s=null}}return i};var w=function(e,t){var n,i,a;if(!AO(e)){return}var u=OO(e)?e:null;if(u){s=null;try{u.select()}catch(e){}return}n=b();a=r.fire("SetSelectionRange",{range:e,forward:t});e=a.range;if(n){s=e;try{n.removeAllRanges();n.addRange(e)}catch(e){}if(t===false&&n.extend){n.collapse(e.endContainer,e.endOffset);n.extend(e.startContainer,e.startOffset)}o=n.rangeCount>0?n.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&n.setBaseAndExtent&&!Me.ie){if(e.endOffset-e.startOffset<2){if(e.startContainer.hasChildNodes()){i=e.startContainer.childNodes[e.startOffset];if(i&&i.tagName==="IMG"){n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset);if(n.anchorNode!==e.startContainer||n.focusNode!==e.endContainer){n.setBaseAndExtent(i,0,i,1)}}}}}r.fire("AfterSetSelectionRange",{range:e,forward:t})};var x=function(t){f(e.getOuterHTML(t));return t};var T=function(){return kO(r.getBody(),_())};var C=function(t,n){return SO(e,_(),t,n)};var k=function(){var t=b();var n,r;if(!t||!t.anchorNode||!t.focusNode){return true}n=e.createRng();n.setStart(t.anchorNode,t.anchorOffset);n.collapse(true);r=e.createRng();r.setStart(t.focusNode,t.focusOffset);r.collapse(true);return n.compareBoundaryPoints(n.START_TO_START,r)<=0};var S=function(){var t=_();if(!y_.hasMultipleRanges(b())){var n=uw.normalize(e,t);n.each(function(e){w(e,k())});return n.getOr(t)}return t};var E=function(t,n){var i;if(!u){u={};i={};r.on("NodeChange",function(t){var n=t.element,r=e.getParents(n,null,e.getRoot()),a={};PO(u,function(t,n){PO(r,function(o){if(e.is(o,n)){if(!i[n]){PO(t,function(e){e(true,{node:o,selector:n,parents:r})});i[n]=t}a[n]=t;return false}})});PO(i,function(e,t){if(!a[t]){delete i[t];PO(e,function(e){e(false,{node:n,selector:t,parents:r})})}})})}if(!u[t]){u[t]=[]}u[t].push(n);return R};var P=function(){var t,n=e.getRoot();while(n&&n.nodeName!=="BODY"){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t};var O=function(e,t){return yP.scrollIntoView(r,e,t)};var M=function(e,t){return w(CP.fromPoint(e,t,r.getDoc()))};var A=function(){var e=_();return e.collapsed?hc.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()};var N=function(){t=o=s=null;a.destroy()};var R={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:r,collapse:y,setCursorLocation:l,getContent:c,setContent:f,getBookmark:v,moveToBookmark:p,select:g,isCollapsed:m,isForward:k,setNode:x,getNode:T,getSel:b,setRng:w,getRng:_,getStart:d,getEnd:h,getSelectedBlocks:C,normalize:S,selectorChanged:E,getScrollContainer:P,scrollIntoView:O,placeCaretAt:M,getBoundingClientRect:A,destroy:N};i=cP(R);a=vP(R,r);R.bookmarkManager=i;R.controlSelection=a;return R};var RO=Ks.isContentEditableFalse;var DO=Rl;var LO=Sd;var IO=kd;var BO=function(e,t){while(t=e(t)){if(t.isVisible()){return t}}return t};var jO=function(e,t){var n=hd(e,t);if(!n&&Ks.isBr(e.getNode())){return true}return n};var FO=function(e,t,n,r){var i,a,o,s;var u=e===Od.Forwards;var l=u?IO:LO;if(!r.collapsed){i=DO(r);if(RO(i)){return zc(e,t,i,e===Od.Backwards,true)}}s=fl(r);a=Cd(e,t.getBody(),r);if(l(a)){return Vc(t,a.getNode(!u))}a=n(a);if(!a){if(s){return r}return null}if(l(a)){return zc(e,t,a.getNode(!u),u,true)}o=n(a);if(l(o)){if(jO(a,o)){return zc(e,t,o.getNode(!u),u,true)}}if(s){return qc(t,a.toRange(),true)}return null};var HO=function(e,t,n,r){var i,a,o;var s,u,l;var c,f,d;d=DO(r);i=Cd(e,t.getBody(),r);a=n(t.getBody(),YC(1),i);o=On.filter(a,KC(1));u=On.last(i.getClientRects());if(IO(i)||Ed(i)){d=i.getNode()}if(LO(i)||Pd(i)){d=i.getNode(true)}if(!u){return null}l=u.left;s=QC(o,l);if(s){if(RO(s.node)){c=Math.abs(l-s.left);f=Math.abs(l-s.right);return zc(e,t,s.node,c<f,true)}}if(d){var h=qC(e,t.getBody(),YC(1),d);s=QC(On.filter(h,KC(1)),l);if(s){return qc(t,s.position.toRange(),true)}s=On.last(On.filter(h,KC(0)));if(s){return qc(t,s.position.toRange(),true)}}};var zO=function(e){var t=e.dom.create(e.settings.forced_root_block);if(!Me.ie||Me.ie>=11){t.innerHTML='<br data-mce-bogus="1">'}return t};var UO=function(e,t,n){var r,i,a;var o=Ud(e.getBody());var s=ql.curry(BO,o.next);var u=ql.curry(BO,o.prev);if(n.collapsed&&e.settings.forced_root_block){r=e.dom.getParent(n.startContainer,"PRE");if(!r){return}if(t===1){i=s(hc.fromRangeStart(n))}else{i=u(hc.fromRangeStart(n))}if(!i){a=zO(e);if(t===1){e.$(r).after(a)}else{e.$(r).before(a)}e.selection.select(a,true);e.selection.collapse()}}};var VO=function(e,t){var n=Ud(e.getBody());var r=ql.curry(BO,n.next);var i=ql.curry(BO,n.prev);var a;var o=t?Od.Forwards:Od.Backwards;var s=t?r:i;var u=e.selection.getRng();a=FO(o,e,s,u);if(a){return a}a=UO(e,o,u);if(a){return a}return null};var WO=function(e,t){var n;var r=t?1:-1;var i=t?WC:VC;var a=e.selection.getRng();n=HO(r,e,i,a);if(n){return n}n=UO(e,r,a);if(n){return n}return null};var qO=function(e,t){return function(){var n=VO(e,t);if(n){e.selection.setRng(n);return true}else{return false}}};var YO=function(e,t){return function(){var n=WO(e,t);if(n){e.selection.setRng(n);return true}else{return false}}};var KO=function(e){return J.map(e,function(e){return pE.merge({shiftKey:false,altKey:false,ctrlKey:false,metaKey:false,keyCode:0,action:v.noop},e)})};var $O=function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey};var GO=function(e,t){return J.bind(KO(e),function(e){return $O(e,t)?[e]:[]})};var XO=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var r=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,r)}};var ZO=function(e,t){return J.find(GO(e,t),function(e){return e.action()})};var JO={match:GO,action:XO,execute:ZO};var QO=function(e,t,n){var r=Ai.detect().os;JO.execute([{keyCode:hk.RIGHT,action:qO(e,true)},{keyCode:hk.LEFT,action:qO(e,false)},{keyCode:hk.UP,action:YO(e,false)},{keyCode:hk.DOWN,action:YO(e,true)},{keyCode:hk.RIGHT,action:Kf(e,true)},{keyCode:hk.LEFT,action:Kf(e,false)},{keyCode:hk.UP,action:$f(e,false)},{keyCode:hk.DOWN,action:$f(e,true)},{keyCode:hk.RIGHT,action:jb.move(e,t,true)},{keyCode:hk.LEFT,action:jb.move(e,t,false)},{keyCode:hk.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:jb.moveNextWord(e,t)},{keyCode:hk.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:jb.movePrevWord(e,t)}],n).each(function(e){n.preventDefault()})};var eM=function(e,t){e.on("keydown",function(n){if(n.isDefaultPrevented()===false){QO(e,t,n)}})};var tM={setup:eM};var nM=function(e,t){var n=Cg.parentsAndSelf(t,e);return J.findIndex(n,ws).fold(v.constant(n),function(e){return n.slice(0,e)})};var rM=function(e){return Ho.children(e).length===1};var iM=function(e,t,n,r){var i=v.curry(Jy.isFormatElement,t);var a=J.map(J.filter(r,i),function(e){return e.dom()});if(a.length===0){_m.deleteElement(t,e,n)}else{var o=Jy.replaceWithCaretFormat(n.dom(),a);t.selection.setRng(o.toRange())}};var aM=function(e,t){var n=Bi.fromDom(e.getBody());var r=Bi.fromDom(e.selection.getStart());var i=J.filter(nM(n,r),rM);return J.last(i).map(function(n){var r=hc.fromRangeStart(e.selection.getRng());if(Fp.willDeleteLastPositionInElement(t,r,n.dom())){iM(t,e,n,i);return true}else{return false}}).getOr(false)};var oM=function(e,t){return e.selection.isCollapsed()?aM(e,t):false};var sM={backspaceDelete:oM};var uM=function(e,t,n){JO.execute([{keyCode:hk.BACKSPACE,action:JO.action(Mm.backspaceDelete,e,false)},{keyCode:hk.DELETE,action:JO.action(Mm.backspaceDelete,e,true)},{keyCode:hk.BACKSPACE,action:JO.action(Kb.backspaceDelete,e,t,false)},{keyCode:hk.DELETE,action:JO.action(Kb.backspaceDelete,e,t,true)},{keyCode:hk.BACKSPACE,action:JO.action(Vg.backspaceDelete,e,false)},{keyCode:hk.DELETE,action:JO.action(Vg.backspaceDelete,e,true)},{keyCode:hk.BACKSPACE,action:JO.action(Lg.backspaceDelete,e,false)},{keyCode:hk.DELETE,action:JO.action(Lg.backspaceDelete,e,true)},{keyCode:hk.BACKSPACE,action:JO.action(U_.backspaceDelete,e,false)},{keyCode:hk.DELETE,action:JO.action(U_.backspaceDelete,e,true)},{keyCode:hk.BACKSPACE,action:JO.action(sM.backspaceDelete,e,false)},{keyCode:hk.DELETE,action:JO.action(sM.backspaceDelete,e,true)}],n).each(function(e){n.preventDefault()})};var lM=function(e,t){JO.execute([{keyCode:hk.BACKSPACE,action:JO.action(Mm.paddEmptyElement,e)},{keyCode:hk.DELETE,action:JO.action(Mm.paddEmptyElement,e)}],t)};var cM=function(e,t){e.on("keydown",function(n){if(n.isDefaultPrevented()===false){uM(e,t,n)}});e.on("keyup",function(t){if(t.isDefaultPrevented()===false){lM(e,t)}})};var fM={setup:cM};var dM=function(e,t,n){var r=e.getParam(t,n);if(r.indexOf("=")!==-1){var i=e.getParam(t,"","hash");return i.hasOwnProperty(e.id)?i[e.id]:n}else{return r}};var hM=function(e){return e.getParam("iframe_attrs",{})};var vM=function(e){return e.getParam("doctype","<!DOCTYPE html>")};var pM=function(e){return e.getParam("document_base_url","")};var gM=function(e){return dM(e,"body_id","tinymce")};var mM=function(e){return dM(e,"body_class","")};var yM=function(e){return e.getParam("content_security_policy","")};var bM=function(e){return e.getParam("br_in_pre",true)};var _M=function(e){if(e.getParam("force_p_newlines",false)){return"p"}var t=e.getParam("forced_root_block","p");return t===false?"":t};var wM=function(e){return e.getParam("forced_root_block_attrs",{})};var xM=function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")};var TM=function(e){return e.getParam("no_newline_selector","")};var CM=function(e){return e.getParam("keep_styles",true)};var kM=function(e){return e.getParam("end_container_on_empty_block",false)};var SM={getIframeAttrs:hM,getDocType:vM,getDocumentBaseUrl:pM,getBodyId:gM,getBodyClass:mM,getContentSecurityPolicy:yM,shouldPutBrInPre:bM,getForcedRootBlock:_M,getForcedRootBlockAttrs:wM,getBrNewLineSelector:xM,getNoNewLineSelector:TM,shouldKeepStyles:CM,shouldEndContainerOnEmtpyBlock:kM};var EM=function(e){while(e){if(e.nodeType===1||e.nodeType===3&&e.data&&/[\r\n\s]/.test(e.data)){return e}e=e.nextSibling}};var PM=function(e,t){var n,r,i,a=t,o;var s=e.dom;var u=e.schema.getMoveCaretBeforeOnEnterElements();if(!t){return}if(/^(LI|DT|DD)$/.test(t.nodeName)){var l=EM(t.firstChild);if(l&&/^(UL|OL|DL)$/.test(l.nodeName)){t.insertBefore(s.doc.createTextNode("¬†"),t.firstChild)}}i=s.createRng();t.normalize();if(t.hasChildNodes()){n=new cs(t,t);while(r=n.current()){if(Ks.isText(r)){i.setStart(r,0);i.setEnd(r,0);break}if(u[r.nodeName.toLowerCase()]){i.setStartBefore(r);i.setEndBefore(r);break}a=r;r=n.next()}if(!r){i.setStart(a,0);i.setEnd(a,0)}}else{if(Ks.isBr(t)){if(t.nextSibling&&s.isBlock(t.nextSibling)){i.setStartBefore(t);i.setEndBefore(t)}else{i.setStartAfter(t);i.setEndAfter(t)}}else{i.setStart(t,0);i.setEnd(t,0)}}e.selection.setRng(i);s.remove(o);e.selection.scrollIntoView(t)};var OM=function(e,t){var n=e.getRoot();var r,i;r=t;while(r!==n&&e.getContentEditable(r)!=="false"){if(e.getContentEditable(r)==="true"){i=r}r=r.parentNode}return r!==n?i:n};var MM=function(e){return w.from(e.dom.getParent(e.selection.getStart(true),e.dom.isBlock))};var AM=function(e){return MM(e).fold(v.constant(""),function(e){return e.nodeName.toUpperCase()})};var NM=function(e){return MM(e).filter(function(e){return Ss(Bi.fromDom(e))}).isSome()};var RM={moveToCaretPosition:PM,getEditableRoot:OM,getParentBlock:MM,getParentBlockName:AM,isListItemParentBlock:NM};var DM=function(e,t){return e.firstChild&&e.firstChild.nodeName===t};var LM=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t};var IM=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)};var BM=function(e){return IM(e)&&IM(e.parentNode)};var jM=function(e){var t=e.parentNode;if(/^(LI|DT|DD)$/.test(t.nodeName)){return t}return e};var FM=function(e,t,n){var r=e[n?"firstChild":"lastChild"];while(r){if(Ks.isElement(r)){break}r=r[n?"nextSibling":"previousSibling"]}return r===t};var HM=function(e,t,n,r,i){var a=e.dom;var o=e.selection.getRng();if(n===e.getBody()){return}if(BM(n)){i="LI"}var s=i?t(i):a.create("BR");if(FM(n,r,true)&&FM(n,r,false)){if(LM(n,"LI")){a.insertAfter(s,jM(n))}else{a.replace(s,n)}}else if(FM(n,r,true)){if(LM(n,"LI")){a.insertAfter(s,jM(n));s.appendChild(a.doc.createTextNode(" "));s.appendChild(n)}else{n.parentNode.insertBefore(s,n)}}else if(FM(n,r,false)){a.insertAfter(s,jM(n))}else{n=jM(n);var u=o.cloneRange();u.setStartAfter(r);u.setEndAfter(n);var l=u.extractContents();if(i==="LI"&&DM(l,"LI")){s=l.firstChild;a.insertAfter(l,n)}else{a.insertAfter(l,n);a.insertAfter(s,n)}}a.remove(r);RM.moveToCaretPosition(e,s)};var zM={insert:HM};var UM=function(e){return e&&e.nodeName==="A"&&Un.trim(Gu.trim(e.innerText||e.textContent)).length===0};var VM=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)};var WM=function(e){e.innerHTML='<br data-mce-bogus="1">'};var qM=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t};var YM=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.getContentEditable(t)!=="true"};var KM=function(e,t,n){var r=n;var i=[];var a;if(!r){return}while(r=r.firstChild){if(e.isBlock(r)){return}if(Ks.isElement(r)&&!t[r.nodeName.toLowerCase()]){i.push(r)}}a=i.length;while(a--){r=i[a];if(!r.hasChildNodes()||r.firstChild===r.lastChild&&r.firstChild.nodeValue===""){e.remove(r)}else{if(UM(r)){e.remove(r)}}}};var $M=function(e,t,n){if(Ks.isText(t)===false){return n}else if(e){return n===1&&t.data.charAt(n-1)===Gu.ZWSP?0:n}else{return n===t.data.length-1&&t.data.charAt(n)===Gu.ZWSP?t.data.length:n}};var GM=function(e){var t=e.cloneRange();t.setStart(e.startContainer,$M(true,e.startContainer,e.startOffset));t.setEnd(e.endContainer,$M(false,e.endContainer,e.endOffset));return t};var XM=function(e){do{if(Ks.isText(e)){e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")}e=e.firstChild}while(e)};var ZM=function(e,t){var n=e.getRoot();var r,i;r=t;while(r!==n&&e.getContentEditable(r)!=="false"){if(e.getContentEditable(r)==="true"){i=r}r=r.parentNode}return r!==n?i:n};var JM=function(e,t){var n=SM.getForcedRootBlock(e);if(n&&n.toLowerCase()===t.tagName.toLowerCase()){e.dom.setAttribs(t,SM.getForcedRootBlockAttrs(e))}};var QM=function(e,t,n,r,i){var a,o,s,u,l,c;var f=t||"P";var d=e.dom,h=ZM(d,r);o=d.getParent(r,d.isBlock);if(!o||!YM(d,o)){o=o||h;if(o===e.getBody()||VM(o)){c=o.nodeName.toLowerCase()}else{c=o.parentNode.nodeName.toLowerCase()}if(!o.hasChildNodes()){a=d.create(f);JM(e,a);o.appendChild(a);n.setStart(a,0);n.setEnd(a,0);return a}u=r;while(u.parentNode!==o){u=u.parentNode}while(u&&!d.isBlock(u)){s=u;u=u.previousSibling}if(s&&e.schema.isValidChild(c,f.toLowerCase())){a=d.create(f);JM(e,a);s.parentNode.insertBefore(a,s);u=s;while(u&&!d.isBlock(u)){l=u.nextSibling;a.appendChild(u);u=l}n.setStart(r,i);n.setEnd(r,i)}}return r};var eA=function(e,t){var n;t.normalize();n=t.lastChild;if(!n||/^(left|right)$/gi.test(e.getStyle(n,"float",true))){e.add(t,"br")}};var tA=function(e,t){var n,r,i,a,o,s;var u,l,c,f,d,h,v;var p=e.dom;var g=e.schema,m=g.getNonEmptyElements();var y=e.selection.getRng();var b=function(t){var n=i,a,s,u;var l=g.getTextInlineElements();if(t||f==="TABLE"||f==="HR"){a=p.create(t||h);JM(e,a)}else{a=o.cloneNode(false)}u=a;if(SM.shouldKeepStyles(e)===false){p.setAttrib(a,"style",null);p.setAttrib(a,"class",null)}else{do{if(l[n.nodeName]){if(Jy.isCaretNode(n)){continue}s=n.cloneNode(false);p.setAttrib(s,"id","");if(a.hasChildNodes()){s.appendChild(a.firstChild);a.appendChild(s)}else{u=s;a.appendChild(s)}}}while((n=n.parentNode)&&n!==r)}WM(u);return a};var _=function(e){var t,n,r,s;s=$M(e,i,a);if(Ks.isText(i)&&(e?s>0:s<i.nodeValue.length)){return false}if(i.parentNode===o&&v&&!e){return true}if(e&&Ks.isElement(i)&&i===o.firstChild){return true}if(qM(i,"TABLE")||qM(i,"HR")){return v&&!e||!v&&e}t=new cs(i,o);if(Ks.isText(i)){if(e&&s===0){t.prev()}else if(!e&&s===i.nodeValue.length){t.next()}}while(n=t.current()){if(Ks.isElement(n)){if(!n.getAttribute("data-mce-bogus")){r=n.nodeName.toLowerCase();if(m[r]&&r!=="br"){return false}}}else if(Ks.isText(n)&&!/^[ \t\r\n]*$/.test(n.nodeValue)){return false}if(e){t.prev()}else{t.next()}}return true};var w=function(){if(/^(H[1-6]|PRE|FIGURE)$/.test(f)&&d!=="HGROUP"){u=b(h)}else{u=b()}if(SM.shouldEndContainerOnEmtpyBlock(e)&&YM(p,c)&&p.isEmpty(o)){u=p.split(c,o)}else{p.insertAfter(u,o)}RM.moveToCaretPosition(e,u)};uw.normalize(p,y).each(function(e){y.setStart(e.startContainer,e.startOffset);y.setEnd(e.endContainer,e.endOffset)});i=y.startContainer;a=y.startOffset;h=SM.getForcedRootBlock(e);s=t.shiftKey;if(Ks.isElement(i)&&i.hasChildNodes()){v=a>i.childNodes.length-1;i=i.childNodes[Math.min(a,i.childNodes.length-1)]||i;if(v&&Ks.isText(i)){a=i.nodeValue.length}else{a=0}}r=ZM(p,i);if(!r){return}if(h&&!s||!h&&s){i=QM(e,h,y,i,a)}o=p.getParent(i,p.isBlock);c=o?p.getParent(o.parentNode,p.isBlock):null;f=o?o.nodeName.toUpperCase():"";d=c?c.nodeName.toUpperCase():"";if(d==="LI"&&!t.ctrlKey){o=c;c=c.parentNode;f=d}if(/^(LI|DT|DD)$/.test(f)){if(p.isEmpty(o)){zM.insert(e,b,c,o,h);return}}if(h&&o===e.getBody()){return}h=h||"P";if(Ju(o)){u=cl(o);if(p.isEmpty(o)){WM(o)}RM.moveToCaretPosition(e,u)}else if(_()){w()}else if(_(true)){u=o.parentNode.insertBefore(b(),o);RM.moveToCaretPosition(e,qM(o,"HR")?u:o)}else{n=GM(y).cloneRange();n.setEndAfter(o);l=n.extractContents();XM(l);u=l.firstChild;p.insertAfter(l,o);KM(p,m,u);eA(p,o);if(p.isEmpty(o)){WM(o)}u.normalize();if(p.isEmpty(u)){p.remove(u);w()}else{RM.moveToCaretPosition(e,u)}}p.setAttrib(u,"id","");e.fire("NewBlock",{newBlock:u})};var nA={insert:tA};var rA=function(e,t){return RM.getParentBlock(e).filter(function(e){return t.length>0&&co.is(Bi.fromDom(e),t)}).isSome()};var iA=function(e){return rA(e,SM.getBrNewLineSelector(e))};var aA=function(e){return rA(e,SM.getNoNewLineSelector(e))};var oA={shouldInsertBr:iA,shouldBlockNewLine:aA};var sA=qg.generate([{br:[]},{block:[]},{none:[]}]);var uA=function(e,t){return oA.shouldBlockNewLine(e)};var lA=function(e){return function(t,n){var r=SM.getForcedRootBlock(t)==="";return r===e}};var cA=function(e){return function(t,n){return RM.isListItemParentBlock(t)===e}};var fA=function(e){return function(t,n){var r=RM.getParentBlockName(t)==="PRE";return r===e}};var dA=function(e){return function(t,n){return SM.shouldPutBrInPre(t)===e}};var hA=function(e,t){return oA.shouldInsertBr(e)};var vA=function(e,t){return t};var pA=function(e){var t=SM.getForcedRootBlock(e);var n=RM.getEditableRoot(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t?t:"P")};var gA=function(e,t){return function(n,r){var i=J.foldl(e,function(e,t){return e&&t(n,r)},true);return i?w.some(t):w.none()}};var mA=function(e,t){return eb.evaluateUntil([gA([uA],sA.none()),gA([fA(true),dA(false),vA],sA.br()),gA([fA(true),dA(false)],sA.block()),gA([fA(true),dA(true),vA],sA.block()),gA([fA(true),dA(true)],sA.br()),gA([cA(true),vA],sA.br()),gA([cA(true)],sA.block()),gA([lA(true),vA,pA],sA.block()),gA([lA(true)],sA.br()),gA([hA],sA.br()),gA([lA(false),vA],sA.br()),gA([pA],sA.block())],[e,t.shiftKey]).getOr(sA.none())};var yA={getAction:mA};var bA=function(e,t){yA.getAction(e,t).fold(function(){xw.insert(e,t)},function(){nA.insert(e,t)},v.noop)};var _A={insert:bA};var wA=function(e){if(e.typing){e.typing=false;e.add()}};var xA=function(e,t){if(t.isDefaultPrevented()){return}t.preventDefault();wA(e.undoManager);e.undoManager.transact(function(){if(e.selection.isCollapsed()===false){e.execCommand("Delete")}_A.insert(e,t)})};var TA=function(e){e.on("keydown",function(t){if(t.keyCode===hk.ENTER){xA(e,t)}})};var CA={setup:TA};var kA=function(e,t){return OA(e)&&Ks.isText(t.container())};var SA=function(e,t){var n=t.container();var r=t.offset();n.insertData(r,"¬†");e.selection.setCursorLocation(n,r+1)};var EA=function(e,t,n){if(kA(n,t)){SA(e,t);return true}else{return false}};var PA=function(e){var t=v.curry(Rp.isInlineTarget,e);var n=hc.fromRangeStart(e.selection.getRng());var r=wb.readLocation(t,e.getBody(),n);return r.map(v.curry(EA,e,n)).getOr(false)};var OA=function(e){return e.fold(v.constant(false),v.constant(true),v.constant(true),v.constant(false))};var MA=function(e){return e.selection.isCollapsed()?PA(e):false};var AA={insertAtSelection:MA};var NA=function(e,t){JO.execute([{keyCode:hk.SPACEBAR,action:JO.action(AA.insertAtSelection,e)}],t).each(function(e){t.preventDefault()})};var RA=function(e){e.on("keydown",function(t){if(t.isDefaultPrevented()===false){NA(e,t)}})};var DA={setup:RA};var LA=function(e){var t=jb.setupSelectedState(e);tM.setup(e,t);fM.setup(e,t);CA.setup(e);DA.setup(e)};var IA={setup:LA};function BA(e){var t=Un.each;var n=hk.BACKSPACE,r=hk.DELETE,i=e.dom,a=e.selection,o=e.settings,s=e.parser;var u=Me.gecko,l=Me.ie,c=Me.webkit;var f="data:text/mce-internal,";var d=l?"Text":"URL";var h=function(t,n){try{e.getDoc().execCommand(t,false,n)}catch(e){}};var v=function(e){return e.isDefaultPrevented()};var p=function(t){var n,r;if(t.dataTransfer){if(e.selection.isCollapsed()&&t.target.tagName==="IMG"){a.select(t.target)}n=e.selection.getContent();if(n.length>0){r=f+escape(e.id)+","+escape(n);t.dataTransfer.setData(d,r)}}};var g=function(e){var t;if(e.dataTransfer){t=e.dataTransfer.getData(d);if(t&&t.indexOf(f)>=0){t=t.substr(f.length).split(",");return{id:unescape(t[0]),html:unescape(t[1])}}}return null};var m=function(t,n){if(e.queryCommandSupported("mceInsertClipboardContent")){e.execCommand("mceInsertClipboardContent",false,{content:t,internal:n})}else{e.execCommand("mceInsertContent",false,t)}};var y=function(){var t=function(e){var t=i.create("body");var n=e.cloneContents();t.appendChild(n);return a.serializer.serialize(t,{format:"html"})};var o=function(n){var r=t(n);var a=i.createRng();a.selectNode(e.getBody());var o=t(a);return r===o};e.on("keydown",function(t){var a=t.keyCode;var s,u;if(!v(t)&&(a===r||a===n)){s=e.selection.isCollapsed();u=e.getBody();if(s&&!i.isEmpty(u)){return}if(!s&&!o(e.selection.getRng())){return}t.preventDefault();e.setContent("");if(u.firstChild&&i.isBlock(u.firstChild)){e.selection.setCursorLocation(u.firstChild,0)}else{e.selection.setCursorLocation(u,0)}e.nodeChanged()}})};var b=function(){e.shortcuts.add("meta+a",null,"SelectAll")};var _=function(){if(!e.settings.content_editable){i.bind(e.getDoc(),"mousedown mouseup",function(t){var n;if(t.target===e.getDoc().documentElement){n=a.getRng();e.getBody().focus();if(t.type==="mousedown"){if(el(n.startContainer)){return}a.placeCaretAt(t.clientX,t.clientY)}else{a.setRng(n)}}})}};var w=function(){e.on("keydown",function(t){if(!v(t)&&t.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length){return}if(a.isCollapsed()&&a.getRng().startOffset===0){var r=a.getNode();var o=r.previousSibling;if(r.nodeName==="HR"){i.remove(r);t.preventDefault();return}if(o&&o.nodeName&&o.nodeName.toLowerCase()==="hr"){i.remove(o);t.preventDefault()}}}})};var x=function(){if(!Range.prototype.getClientRects){e.on("mousedown",function(t){if(!v(t)&&t.target.nodeName==="HTML"){var n=e.getBody();n.blur();He.setEditorTimeout(e,function(){n.focus()})}})}};var T=function(){e.on("click",function(t){var n=t.target;if(/^(IMG|HR)$/.test(n.nodeName)&&i.getContentEditableParent(n)!=="false"){t.preventDefault();e.selection.select(n);e.nodeChanged()}if(n.nodeName==="A"&&i.hasClass(n,"mce-item-anchor")){t.preventDefault();a.select(n)}})};var C=function(){var n=function(){var n=i.getAttribs(a.getStart().cloneNode(false));return function(){var r=a.getStart();if(r!==e.getBody()){i.setAttrib(r,"style",null);t(n,function(e){r.setAttributeNode(e.cloneNode(true))})}}};var r=function(){return!a.isCollapsed()&&i.getParent(a.getStart(),i.isBlock)!==i.getParent(a.getEnd(),i.isBlock)};e.on("keypress",function(t){var i;if(!v(t)&&(t.keyCode===8||t.keyCode===46)&&r()){i=n();e.getDoc().execCommand("delete",false,null);i();t.preventDefault();return false}});i.bind(e.getDoc(),"cut",function(t){var i;if(!v(t)&&r()){i=n();He.setEditorTimeout(e,function(){i()})}})};var k=function(){e.on("keydown",function(e){if(!v(e)&&e.keyCode===n){if(a.isCollapsed()&&a.getRng().startOffset===0){var t=a.getNode().previousSibling;if(t&&t.nodeName&&t.nodeName.toLowerCase()==="table"){e.preventDefault();return false}}}})};var S=function(){e.on("keydown",function(t){var n,r,o,s,u;if(v(t)||t.keyCode!==hk.BACKSPACE){return}n=a.getRng();r=n.startContainer;o=n.startOffset;s=i.getRoot();u=r;if(!n.collapsed||o!==0){return}while(u&&u.parentNode&&u.parentNode.firstChild===u&&u.parentNode!==s){u=u.parentNode}if(u.tagName==="BLOCKQUOTE"){e.formatter.toggle("blockquote",null,u);n=i.createRng();n.setStart(r,0);n.setEnd(r,0);a.setRng(n)}})};var E=function(){var t=function(){h("StyleWithCSS",false);h("enableInlineTableEditing",false);if(!o.object_resizing){h("enableObjectResizing",false)}};if(!o.readonly){e.on("BeforeExecCommand MouseDown",t)}};var P=function(){var n=function(){t(i.select("a"),function(e){var t=e.parentNode;var n=i.getRoot();if(t.lastChild===e){while(t&&!i.isBlock(t)){if(t.parentNode.lastChild!==t||t===n){return}t=t.parentNode}i.add(t,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",function(e){if(e.type==="setcontent"||e.command==="mceInsertLink"){n()}})};var O=function(){if(o.forced_root_block){e.on("init",function(){h("DefaultParagraphSeparator",o.forced_root_block)})}};var M=function(){e.on("keyup focusin mouseup",function(e){if(!hk.modifierPressed(e)){a.normalize()}},true)};var A=function(){e.contentStyles.push("img:-moz-broken {"+"-moz-force-broken-image-icon:1;"+"min-width:24px;"+"min-height:24px"+"}")};var N=function(){if(!e.inline){e.on("keydown",function(){if(document.activeElement===document.body){e.getWin().focus()}})}};var R=function(){if(!e.inline){e.contentStyles.push("body {min-height: 150px}");e.on("click",function(t){var n;if(t.target.nodeName==="HTML"){if(Me.ie>11){e.getBody().focus();return}n=e.selection.getRng();e.getBody().focus();e.selection.setRng(n);e.selection.normalize();e.nodeChanged()}})}};var D=function(){if(Me.mac){e.on("keydown",function(t){if(hk.metaKeyPressed(t)&&!t.shiftKey&&(t.keyCode===37||t.keyCode===39)){t.preventDefault();e.selection.getSel().modify("move",t.keyCode===37?"backward":"forward","lineboundary")}})}};var L=function(){h("AutoUrlDetect",false)};var I=function(){e.on("click",function(e){var t=e.target;do{if(t.tagName==="A"){e.preventDefault();return}}while(t=t.parentNode)});e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")};var B=function(){e.on("init",function(){e.dom.bind(e.getBody(),"submit",function(e){e.preventDefault()})})};var j=function(){s.addNodeFilter("br",function(e){var t=e.length;while(t--){if(e[t].attr("class")==="Apple-interchange-newline"){e[t].remove()}}})};var F=function(){e.on("dragstart",function(e){p(e)});e.on("drop",function(t){if(!v(t)){var n=g(t);if(n&&n.id!==e.id){t.preventDefault();var r=CP.fromPoint(t.x,t.y,e.getDoc());a.setRng(r);m(n.html,true)}}})};var H=function(){};var z=function(){var t;if(!u||e.removed){return 0}t=e.selection.getSel();return!t||!t.rangeCount||t.rangeCount===0};S();y();if(!Me.windowsPhone){M()}if(c){_();T();O();B();k();j();if(Me.iOS){N();R();I()}else{b()}}if(Me.ie>=11){R();k()}if(Me.ie){b();L();F()}if(u){w();x();C();E();P();A();D();k()}return{refreshContentEditable:H,isHidden:z}}var jA=ju.DOM;var FA=function(e,t){var n=Bi.fromDom(e.getDoc().head);var r=Bi.fromTag("style");ma.set(r,"type","text/css");lv.append(r,Bi.fromText(t));lv.append(n,r)};var HA=function(e){var t=$E(e.settings,e.schema);t.addAttributeFilter("src,href,style,tabindex",function(t,n){var r=t.length,i;var a=e.dom;var o,s;while(r--){i=t[r];o=i.attr(n);s="data-mce-"+n;if(!i.attributes.map[s]){if(o.indexOf("data:")===0||o.indexOf("blob:")===0){continue}if(n==="style"){o=a.serializeStyle(a.parseStyle(o),i.name);if(!o.length){o=null}i.attr(s,o);i.attr(n,o)}else if(n==="tabindex"){i.attr(s,o);i.attr(n,null)}else{i.attr(s,e.convertURL(o,n,i.name))}}}});t.addNodeFilter("script",function(e){var t=e.length,n,r;while(t--){n=e[t];r=n.attr("type")||"no/type";if(r.indexOf("mce-")!==0){n.attr("type","mce-"+r)}}});t.addNodeFilter("#cdata",function(e){var t=e.length,n;while(t--){n=e[t];n.type=8;n.name="#comment";n.value="[CDATA["+n.value+"]]"}});t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){var n=t.length,r;var i=e.schema.getNonEmptyElements();while(n--){r=t[n];if(r.isEmpty(i)&&r.getAll("br").length===0){r.append(new IE("br",1)).shortEnded=true}}});return t};var zA=function(e){if(e.settings.auto_focus){He.setEditorTimeout(e,function(){var t;if(e.settings.auto_focus===true){t=e}else{t=e.editorManager.get(e.settings.auto_focus)}if(!t.destroyed){t.focus()}},100)}};var UA=function(e){e.bindPendingEventDelegates();e.initialized=true;e.fire("init");e.focus(true);e.nodeChanged({initial:true});e.execCallback("init_instance_callback",e);zA(e)};var VA=function(e){return e.inline?jA.styleSheetLoader:e.dom.styleSheetLoader};var WA=function(e,t){var n=e.settings;var r=e.getElement();var i=e.getDoc(),a,o;if(!n.inline){e.getElement().style.visibility=e.orgVisibility}if(!t&&!n.content_editable){i.open();i.write(e.iframeHTML);i.close()}if(n.content_editable){e.on("remove",function(){var e=this.getBody();jA.removeClass(e,"mce-content-body");jA.removeClass(e,"mce-edit-focus");jA.setAttrib(e,"contentEditable",null)});jA.addClass(r,"mce-content-body");e.contentDocument=i=n.content_document||document;e.contentWindow=n.content_window||window;e.bodyElement=r;n.content_document=n.content_window=null;n.root_name=r.nodeName.toLowerCase()}a=e.getBody();a.disabled=true;e.readonly=n.readonly;if(!e.readonly){if(e.inline&&jA.getStyle(a,"position",true)==="static"){a.style.position="relative"}a.contentEditable=e.getParam("content_editable_state",true)}a.disabled=false;e.editorUpload=ZT(e);e.schema=Su(n);e.dom=new ju(i,{keep_values:true,url_converter:e.convertURL,url_converter_scope:e,hex_colors:n.force_hex_style_colors,class_filter:n.class_filter,update_styles:true,root_element:e.inline?e.getBody():null,collect:n.content_editable,schema:e.schema,onSetAttrib:function(t){e.fire("SetAttrib",t)}});e.parser=HA(e);e.serializer=nP(n,e);e.selection=NO(e.dom,e.getWin(),e.serializer,e);e.formatter=lE(e);e.undoManager=Xk(e);e._nodeChangeDispatcher=new aC(e);e._selectionOverrides=yk(e);uP.setup(e);IA.setup(e);iC.setup(e);e.fire("PreInit");if(!n.browser_spellcheck&&!n.gecko_spellcheck){i.body.spellcheck=false;jA.setAttrib(a,"spellcheck","false")}e.quirks=BA(e);e.fire("PostRender");if(n.directionality){a.dir=n.directionality}if(n.nowrap){a.style.whiteSpace="nowrap"}if(n.protect){e.on("BeforeSetContent",function(e){Un.each(n.protect,function(t){e.content=e.content.replace(t,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})})}e.on("SetContent",function(){e.addVisual(e.getBody())});if(n.padd_empty_editor){e.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})}e.load({initial:true,format:"html"});e.startContent=e.getContent({format:"raw"});e.on("compositionstart compositionend",function(t){e.composing=t.type==="compositionstart"});if(e.contentStyles.length>0){o="";Un.each(e.contentStyles,function(e){o+=e+"\r\n"});e.dom.addStyle(o)}VA(e).loadAll(e.contentCSS,function(t){UA(e)},function(t){UA(e)});if(n.content_style){FA(e,n.content_style)}};var qA={initContentBody:WA};var YA=ju.DOM;var KA=function(e,t){if(document.domain!==window.location.hostname&&Me.ie&&Me.ie<12){var n=$T.uuid("mce");e[n]=function(){qA.initContentBody(e)};var r="javascript:(function(){"+'document.open();document.domain="'+document.domain+'";'+'var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);'+"document.close();ed."+n+"(true);})()";YA.setAttrib(t,"src",r);return true}return false};var $A=function(e){var t=typeof e==="number"?e+"px":e;return t?t:""};var GA=function(e,t,n,r){var i=Bi.fromTag("iframe");ma.setAll(i,r);ma.setAll(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t});Ha.setAll(i,{width:"100%",height:$A(n),display:"block"});return i};var XA=function(e){var t,n,r;r=SM.getDocType(e)+"<html><head>";if(SM.getDocumentBaseUrl(e)!==e.documentBaseUrl){r+='<base href="'+e.documentBaseURI.getURI()+'" />'}r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';t=SM.getBodyId(e);n=SM.getBodyClass(e);if(SM.getContentSecurityPolicy(e)){r+='<meta http-equiv="Content-Security-Policy" content="'+SM.getContentSecurityPolicy(e)+'" />'}r+='</head><body id="'+t+'" class="mce-content-body '+n+'" data-id="'+e.id+'"><br></body></html>';return r};var ZA=function(e,t){var n=e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. "+"Press ALT-F10 for toolbar. Press ALT-0 for help");var r=GA(e.id,n,t.height,SM.getIframeAttrs(e)).dom();r.onload=function(){r.onload=null;e.fire("load")};var i=KA(e,r);e.contentAreaContainer=t.iframeContainer;e.iframeElement=r;e.iframeHTML=XA(e);YA.add(t.iframeContainer,r);return i};var JA=function(e,t){var n=ZA(e,t);if(t.editorContainer){YA.get(t.editorContainer).style.display=e.orgDisplay;e.hidden=YA.isHidden(t.editorContainer)}e.getElement().style.display="none";YA.setAttrib(e.id,"aria-hidden",true);if(!n){qA.initContentBody(e)}};var QA={init:JA};var eN=ju.DOM;var tN=function(e,t,n){var r=CT.get(n);var i,a;i=CT.urls[n]||e.documentBaseUrl.replace(/\/$/,"");n=Un.trim(n);if(r&&Un.inArray(t,n)===-1){Un.each(CT.dependencies(n),function(n){tN(e,t,n)});if(e.plugins[n]){return}a=new r(e,i,e.$);e.plugins[n]=a;if(a.init){a.init(e,i);t.push(n)}}};var nN=function(e){return e.replace(/^\-/,"")};var rN=function(e){var t=[];Un.each(e.settings.plugins.split(/[ ,]/),function(n){tN(e,t,nN(n))})};var iN=function(e){var t;var n=e.settings.theme;if(Xi.isString(n)){e.settings.theme=nN(n);t=kT.get(n);e.theme=new t(e,kT.urls[n]);if(e.theme.init){e.theme.init(e,kT.urls[n]||e.documentBaseUrl.replace(/\/$/,""),e.$)}}else{e.theme={}}};var aN=function(e){var t,n,r,i,a;var o=e.settings;var s=e.getElement();t=o.width||eN.getStyle(s,"width")||"100%";n=o.height||eN.getStyle(s,"height")||s.offsetHeight;r=o.min_height||100;i=/^[0-9\.]+(|px)$/i;if(i.test(""+t)){t=Math.max(parseInt(t,10),100)}if(i.test(""+n)){n=Math.max(parseInt(n,10),r)}a=e.theme.renderUI({targetNode:s,width:t,height:n,deltaWidth:o.delta_width,deltaHeight:o.delta_height});if(!o.content_editable){n=(a.iframeHeight||n)+(typeof n==="number"?a.deltaHeight||0:"");if(n<r){n=r}}a.height=n;return a};var oN=function(e){var t;var n=e.getElement();t=e.settings.theme(e,n);if(t.editorContainer.nodeType){t.editorContainer.id=t.editorContainer.id||e.id+"_parent"}if(t.iframeContainer&&t.iframeContainer.nodeType){t.iframeContainer.id=t.iframeContainer.id||e.id+"_iframecontainer"}t.height=t.iframeHeight?t.iframeHeight:n.offsetHeight;return t};var sN=function(e){return{editorContainer:e,iframeContainer:e}};var uN=function(e){var t=eN.create("div");eN.insertAfter(t,e);return sN(t)};var lN=function(e){var t=e.getElement();return e.inline?sN(null):uN(t)};var cN=function(e){var t=e.settings,n=e.getElement();e.orgDisplay=n.style.display;if(Xi.isString(t.theme)){return aN(e)}else if(Xi.isFunction(t.theme)){return oN(e)}else{return lN(e)}};var fN=function(e){var t=e.settings;var n=e.getElement();var r;e.rtl=t.rtl_ui||e.editorManager.i18n.rtl;e.editorManager.i18n.setCode(t.language);t.aria_label=t.aria_label||eN.getAttrib(n,"aria-label",e.getLang("aria.rich_text_area"));e.fire("ScriptsLoaded");iN(e);rN(e);r=cN(e);e.editorContainer=r.editorContainer?r.editorContainer:null;if(t.content_css){Un.each(Un.explode(t.content_css),function(t){e.contentCSS.push(e.documentBaseURI.toAbsolute(t))})}if(t.content_editable){return qA.initContentBody(e)}else{return QA.init(e,r)}};var dN={init:fN};var hN=ju.DOM;var vN=function(e){return e.charAt(0)==="-"};var pN=function(e,t){var n=t.settings;if(n.language&&n.language!=="en"&&!n.language_url){n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js"}if(n.language_url&&!t.editorManager.i18n.data[n.language]){e.add(n.language_url)}};var gN=function(e,t,n,r){var i=t.settings,a=i.theme;if(Xi.isString(a)){if(!vN(a)&&!kT.urls.hasOwnProperty(a)){var o=i.theme_url;if(o){kT.load(a,t.documentBaseURI.toAbsolute(o))}else{kT.load(a,"themes/"+a+"/theme"+n+".js")}}e.loadQueue(function(){kT.waitFor(a,r)})}else{r()}};var mN=function(e,t){if(Un.isArray(e.plugins)){e.plugins=e.plugins.join(" ")}Un.each(e.external_plugins,function(t,n){CT.load(n,t);e.plugins+=" "+n});Un.each(e.plugins.split(/[ ,]/),function(e){e=Un.trim(e);if(e&&!CT.urls[e]){if(vN(e)){e=e.substr(1,e.length);var n=CT.dependencies(e);Un.each(n,function(e){var n={prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"};e=CT.createUrl(n,e);CT.load(e.resource,e)})}else{CT.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"})}}})};var yN=function(e,t){var n=Vu.ScriptLoader;gN(n,e,t,function(){pN(n,e);mN(e.settings,t);n.loadQueue(function(){if(!e.removed){dN.init(e)}},e,function(t){TT.pluginLoadError(e,t[0]);if(!e.removed){dN.init(e)}})})};var bN=function(e){var t=e.settings,n=e.id;var r=function(){hN.unbind(window,"ready",r);e.render()};if(!Je.Event.domLoaded){hN.bind(window,"ready",r);return}if(!e.getElement()){return}if(!Me.contentEditable){return}if(!t.inline){e.orgVisibility=e.getElement().style.visibility;e.getElement().style.visibility="hidden"}else{e.inline=true}var i=e.getElement().form||hN.getParent(n,"form");if(i){e.formElement=i;if(t.hidden_input&&!/TEXTAREA|INPUT/i.test(e.getElement().nodeName)){hN.insertAfter(hN.create("input",{type:"hidden",name:n}),n);e.hasHiddenInput=true}e.formEventDelegate=function(t){e.fire(t.type,t)};hN.bind(i,"submit reset",e.formEventDelegate);e.on("reset",function(){e.setContent(e.startContent,{format:"raw"})});if(t.submit_patch&&!i.submit.nodeType&&!i.submit.length&&!i._mceOldSubmit){i._mceOldSubmit=i.submit;i.submit=function(){e.editorManager.triggerSave();e.setDirty(false);return i._mceOldSubmit(i)}}}e.windowManager=vT(e);e.notificationManager=dT(e);if(t.encoding==="xml"){e.on("GetContent",function(e){if(e.save){e.content=hN.encode(e.content)}})}if(t.add_form_submit_trigger){e.on("submit",function(){if(e.initialized){e.save()}})}if(t.add_unload_trigger){e._beforeUnload=function(){if(e.initialized&&!e.destroyed&&!e.isHidden()){e.save({format:"raw",no_events:true,set_dirty:false})}};e.editorManager.on("BeforeUnload",e._beforeUnload)}e.editorManager.add(e);yN(e,e.suffix)};var _N={render:bN};var wN=function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n});e.sidebars=r};var xN={add:wN};var TN=Un.each;var CN=Un.trim;var kN="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");var SN={ftp:21,http:80,https:443,mailto:25};var EN=function(e,t){var n=this;var r,i;e=CN(e);t=n.settings=t||{};r=t.base_uri;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)){n.source=e;return}var a=e.indexOf("//")===0;if(e.indexOf("/")===0&&!a){e=(r?r.protocol||"http":"http")+"://mce_host"+e}if(!/^[\w\-]*:?\/\//.test(e)){i=t.base_uri?t.base_uri.path:new EN(document.location.href).directory;if(t.base_uri.protocol==""){e="//mce_host"+n.toAbsPath(i,e)}else{e=/([^#?]*)([#?]?.*)/.exec(e);e=(r&&r.protocol||"http")+"://mce_host"+n.toAbsPath(i,e[1])+e[2]}}e=e.replace(/@@/g,"(mce_at)");e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);TN(kN,function(t,r){var i=e[r];if(i){i=i.replace(/\(mce_at\)/g,"@@")}n[t]=i});if(r){if(!n.protocol){n.protocol=r.protocol}if(!n.userInfo){n.userInfo=r.userInfo}if(!n.port&&n.host==="mce_host"){n.port=r.port}if(!n.host||n.host==="mce_host"){n.host=r.host}n.source=""}if(a){n.protocol=""}};EN.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e);t.path=e[0];t.directory=e[1];t.file=e[2];t.source="";t.getURI()},toRelative:function(e){var t=this;var n;if(e==="./"){return e}e=new EN(e,{base_uri:t});if(e.host!=="mce_host"&&t.host!==e.host&&e.host||t.port!==e.port||t.protocol!==e.protocol&&e.protocol!==""){return e.getURI()}var r=t.getURI(),i=e.getURI();if(r===i||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===i){return r}n=t.toRelPath(t.path,e.path);if(e.query){n+="?"+e.query}if(e.anchor){n+="#"+e.anchor}return n},toAbsolute:function(e,t){e=new EN(e,{base_uri:this});return e.getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port){return true}var t=SN[this.protocol];if(t&&(this.port||t)==(e.port||t)){return true}}return false},toRelPath:function(e,t){var n,r=0,i="",a,o;e=e.substring(0,e.lastIndexOf("/"));e=e.split("/");n=t.split("/");if(e.length>=n.length){for(a=0,o=e.length;a<o;a++){if(a>=n.length||e[a]!==n[a]){r=a+1;break}}}if(e.length<n.length){for(a=0,o=n.length;a<o;a++){if(a>=e.length||e[a]!==n[a]){r=a+1;break}}}if(r===1){return t}for(a=0,o=e.length-(r-1);a<o;a++){i+="../"}for(a=r-1,o=n.length;a<o;a++){if(a!==r-1){i+="/"+n[a]}else{i+=n[a]}}return i},toAbsPath:function(e,t){var n,r=0,i=[],a,o;a=/\/$/.test(t)?"/":"";e=e.split("/");t=t.split("/");TN(e,function(e){if(e){i.push(e)}});e=i;for(n=t.length-1,i=[];n>=0;n--){if(t[n].length===0||t[n]==="."){continue}if(t[n]===".."){r++;continue}if(r>0){r--;continue}i.push(t[n])}n=e.length-r;if(n<=0){o=i.reverse().join("/")}else{o=e.slice(0,n).join("/")+"/"+i.reverse().join("/")}if(o.indexOf("/")!==0){o="/"+o}if(a&&o.lastIndexOf("/")!==o.length-1){o+=a}return o},getURI:function(e){var t;var n=this;if(!n.source||e){t="";if(!e){if(n.protocol){t+=n.protocol+"://"}else{t+="//"}if(n.userInfo){t+=n.userInfo+"@"}if(n.host){t+=n.host}if(n.port){t+=":"+n.port}}if(n.path){t+=n.path}if(n.query){t+="?"+n.query}if(n.anchor){t+="#"+n.anchor}n.source=t}return n.source}};EN.parseDataUri=function(e){var t,n;e=decodeURIComponent(e).split(",");n=/data:([^;]+)/.exec(e[0]);if(n){t=n[1]}return{type:t,data:e[1]}};EN.getDocumentBaseUrl=function(e){var t;if(e.protocol.indexOf("http")!==0&&e.protocol!=="file:"){t=e.href}else{t=e.protocol+"//"+e.host+e.pathname}if(/^[^:]+:\/\/\/?[^\/]+\//.test(t)){t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(t)){t+="/"}}return t};var PN=function(e,t){t(e);if(e.firstChild){PN(e.firstChild,t)}if(e.next){PN(e.next,t)}};var ON=function(e,t,n){var r={};var i={};var a=[];if(n.firstChild){PN(n.firstChild,function(n){J.each(e,function(e){if(e.name===n.name){if(r[e.name]){r[e.name].nodes.push(n)}else{r[e.name]={filter:e,nodes:[n]}}}});J.each(t,function(e){if(typeof n.attr(e.name)==="string"){if(i[e.name]){i[e.name].nodes.push(n)}else{i[e.name]={filter:e,nodes:[n]}}}})})}for(var o in r){if(r.hasOwnProperty(o)){a.push(r[o])}}for(var s in i){if(i.hasOwnProperty(s)){a.push(i[s])}}return a};var MN=function(e,t,n){var r=ON(e,t,n);J.each(r,function(e){J.each(e.filter.callbacks,function(t){t(e.nodes,e.filter.name,{})})})};var AN="html";var NN=function(e){return e instanceof IE};var RN=function(e,t,n){var r=e.getBody();var i,a;if(t.length===0||/^\s+$/.test(t)){a='<br data-mce-bogus="1">';if(r.nodeName==="TABLE"){t="<tr><td>"+a+"</td></tr>"}else if(/^(UL|OL)$/.test(r.nodeName)){t="<li>"+a+"</li>"}i=e.settings.forced_root_block;if(i&&e.schema.isValidChild(r.nodeName.toLowerCase(),i.toLowerCase())){t=a;t=e.dom.createHTML(i,e.settings.forced_root_block_attrs,t)}else if(!t){t='<br data-mce-bogus="1">'}e.dom.setHTML(r,t);e.fire("SetContent",n)}else{if(n.format!=="raw"){t=Dv({validate:e.validate},e.schema).serialize(e.parser.parse(t,{isRootContent:true,insert:true}))}n.content=Un.trim(t);e.dom.setHTML(r,n.content);if(!n.no_events){e.fire("SetContent",n)}}return n.content};var DN=function(e,t,n){MN(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),t);var r=Dv({validate:e.validate},e.schema).serialize(t);n.content=Un.trim(r);e.dom.setHTML(e.getBody(),n.content);if(!n.no_events){e.fire("SetContent",n)}return t};var LN=function(e,t,n){if(n===void 0){n={}}n.format=n.format?n.format:AN;n.set=true;n.content=NN(t)?"":t;if(!NN(t)&&!n.no_events){e.fire("BeforeSetContent",n);t=n.content}return NN(t)?DN(e,t,n):RN(e,t,n)};var IN=function(e,t){if(t===void 0){t={}}var n;var r=e.getBody();if(e.removed){return""}t.format=t.format?t.format:AN;t.get=true;t.getInner=true;if(!t.no_events){e.fire("BeforeGetContent",t)}if(t.format==="raw"){n=Un.trim(Pk.trimExternal(e.serializer,r.innerHTML))}else if(t.format==="text"){n=r.innerText||r.textContent}else if(t.format==="tree"){return e.serializer.serialize(r,t)}else{n=e.serializer.serialize(r,t)}if(t.format!=="text"){t.content=Un.trim(n)}else{t.content=n}if(!t.no_events){e.fire("GetContent",t)}return t.content};var BN=ju.DOM;var jN=function(e){BN.setStyle(e.id,"display",e.orgDisplay)};var FN=function(e){return w.from(e).each(function(e){return e.destroy()})};var HN=function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null;e.bodyElement=e.contentDocument=e.contentWindow=null;e.iframeElement=e.targetElm=null;if(e.selection){e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null}};var zN=function(e){var t=e.formElement;if(t){if(t._mceOldSubmit){t.submit=t._mceOldSubmit;t._mceOldSubmit=null}BN.unbind(t,"submit reset",e.formEventDelegate)}};var UN=function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload;var r=e.getBody();var i=e.getElement();if(r){e.save()}e.removed=1;e.unbindAllNativeEvents();if(e.hasHiddenInput&&i){BN.remove(i.nextSibling)}if(!e.inline&&r){jN(e)}bE.fireRemove(e);e.editorManager.remove(e);BN.remove(e.getContainer());FN(t);FN(n);e.destroy()}};var VN=function(e,t){var n=e.selection,r=e.dom;if(e.destroyed){return}if(!t&&!e.removed){e.remove();return}if(!t){e.editorManager.off("beforeunload",e._beforeUnload);if(e.theme&&e.theme.destroy){e.theme.destroy()}FN(n);FN(r)}zN(e);HN(e);e.destroyed=1};var WN=ju.DOM;var qN=Un.extend;var YN=Un.each;var KN=Un.resolve;var $N=Me.ie;var GN=function(e,t,n){var r=this;var i,a;i=r.documentBaseUrl=n.documentBaseURL;a=n.baseURI;t=mp(r,e,i,n.defaultSettings,t);r.settings=t;qu.language=t.language||"en";qu.languageLoad=t.language_load;qu.baseURL=n.baseURL;r.id=e;r.setDirty(false);r.plugins={};r.documentBaseURI=new EN(t.document_base_url,{base_uri:a});r.baseURI=a;r.contentCSS=[];r.contentStyles=[];r.shortcuts=new Cx(r);r.loadedCSS={};r.editorCommands=new ix(r);r.suffix=n.suffix;r.editorManager=n;r.inline=t.inline;r.buttons={};r.menuItems={};if(t.cache_suffix){Me.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")}if(t.override_viewport===false){Me.overrideViewPort=false}n.fire("SetupEditor",{editor:r});r.execCallback("setup",r);r.$=ur.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})};GN.prototype={render:function(){_N.render(this)},focus:function(e){Zx.focus(this,e)},execCallback:function(e){var t=this;var n=t.settings[e],r;if(!n){return}if(t.callbackLookup&&(r=t.callbackLookup[e])){n=r.func;r=r.scope}if(typeof n==="string"){r=n.replace(/\.\w+$/,"");r=r?KN(r):0;n=KN(n);t.callbackLookup=t.callbackLookup||{};t.callbackLookup[e]={func:n,scope:r}}return n.apply(r||t,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&Un.is(e,"string")){var t=this.settings.language||"en",n=this.editorManager.i18n;e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n.data[t+"."+r]||"{#"+r+"}"})}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(t!==undefined?t:"{#"+e+"}")},getParam:function(e,t,n){return wp(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;if(t.cmd){t.onclick=function(){n.execCommand(t.cmd)}}if(t.stateSelector&&typeof t.active==="undefined"){t.active=false}if(!t.text&&!t.icon){t.icon=e}n.buttons=n.buttons;t.tooltip=t.tooltip||t.title;n.buttons[e]=t},addSidebar:function(e,t){return xN.add(this,e,t)},addMenuItem:function(e,t){var n=this;if(t.cmd){t.onclick=function(){n.execCommand(t.cmd)}}n.menuItems=n.menuItems;n.menuItems[e]=t},addContextToolbar:function(e,t){var n=this;var r;n.contextToolbars=n.contextToolbars||[];if(typeof e==="string"){r=e;e=function(e){return n.dom.is(e,r)}}n.contextToolbars.push({id:$T.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;if(e.hidden){e.hidden=false;if(e.inline){e.getBody().contentEditable=true}else{WN.show(e.getContainer());WN.hide(e.id)}e.load();e.fire("show")}},hide:function(){var e=this,t=e.getDoc();if(!e.hidden){if($N&&t&&!e.inline){t.execCommand("SelectAll")}e.save();if(e.inline){e.getBody().contentEditable=false;if(e===e.editorManager.focusedEditor){e.editorManager.focusedEditor=null}}else{WN.hide(e.getContainer());WN.setStyle(e.id,"display",e.orgDisplay)}e.hidden=true;e.fire("hide")}},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t=this;var n=t.getElement(),r;if(t.removed){return""}if(n){e=e||{};e.load=true;r=t.setContent(n.value!==undefined?n.value:n.innerHTML,e);e.element=n;if(!e.no_events){t.fire("LoadContent",e)}e.element=n=null;return r}},save:function(e){var t=this;var n=t.getElement(),r,i;if(!n||!t.initialized||t.removed){return}e=e||{};e.save=true;e.element=n;r=e.content=t.getContent(e);if(!e.no_events){t.fire("SaveContent",e)}if(e.format==="raw"){t.fire("RawSaveContent",e)}r=e.content;if(!/TEXTAREA|INPUT/i.test(n.nodeName)){if(!t.inline){n.innerHTML=r}if(i=WN.getParent(t.id,"form")){YN(i.elements,function(e){if(e.name===t.id){e.value=r;return false}})}}else{n.value=r}e.element=n=null;if(e.set_dirty!==false){t.setDirty(false)}return r},setContent:function(e,t){return LN(this,e,t)},getContent:function(e){return IN(this,e)},insertContent:function(e,t){if(t){e=qN({content:e},t)}this.execCommand("mceInsertContent",false,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e;if(e&&e!==t){this.fire("dirty")}},setMode:function(e){bx.setMode(this,e)},getContainer:function(){var e=this;if(!e.container){e.container=WN.get(e.editorContainer||e.id+"_parent")}return e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){if(!this.targetElm){this.targetElm=WN.get(this.id)}return this.targetElm},getWin:function(){var e=this;var t;if(!e.contentWindow){t=e.iframeElement;if(t){e.contentWindow=t.contentWindow}}return e.contentWindow},getDoc:function(){var e=this;var t;if(!e.contentDocument){t=e.getWin();if(t){e.contentDocument=t.document}}return e.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this,i=r.settings;if(i.urlconverter_callback){return r.execCallback("urlconverter_callback",e,n,true,t)}if(!i.convert_urls||n&&n.nodeName==="LINK"||e.indexOf("file:")===0||e.length===0){return e}if(i.relative_urls){return r.documentBaseURI.toRelative(e)}e=r.documentBaseURI.toAbsolute(e,i.remove_script_host);return e},addVisual:function(e){var t=this;var n=t.settings;var r=t.dom;var i;e=e||t.getBody();if(t.hasVisual===undefined){t.hasVisual=n.visual}YN(r.select("table,a",e),function(e){var a;switch(e.nodeName){case"TABLE":i=n.visual_table_class||"mce-item-table";a=r.getAttrib(e,"border");if((!a||a==="0")&&t.hasVisual){r.addClass(e,i)}else{r.removeClass(e,i)}return;case"A":if(!r.getAttrib(e,"href",false)){a=r.getAttrib(e,"name")||e.id;i=n.visual_anchor_class||"mce-item-anchor";if(a&&t.hasVisual){r.addClass(e,i)}else{r.removeClass(e,i)}}return}});t.fire("VisualAid",{element:e,hasVisual:t.hasVisual})},remove:function(){UN(this)},destroy:function(e){VN(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}};qN(GN.prototype,vx);var XN=function(e){return e.className.toString().indexOf("mce-")!==-1};var ZN={isEditorUIElement:XN};var JN=function(e){return e.type==="nodechange"&&e.selectionChange};var QN=function(e,t){var n=function(){t.throttle()};ju.DOM.bind(document,"mouseup",n);e.on("remove",function(){ju.DOM.unbind(document,"mouseup",n)})};var eR=function(e){e.on("focusout",function(){$w.store(e)})};var tR=function(e,t){e.on("mouseup touchend",function(e){t.throttle()})};var nR=function(e,t){var n=Ai.detect().browser;if(n.isIE()||n.isEdge()){eR(e)}else{tR(e,t)}e.on("keyup nodechange",function(t){if(!JN(t)){$w.store(e)}})};var rR=function(e){var t=ck.first(function(){$w.store(e)},0);if(e.inline){QN(e,t)}e.on("init",function(){nR(e,t)});e.on("remove",function(){t.cancel()})};var iR={register:rR};var aR;var oR=ju.DOM;var sR=function(e){return ZN.isEditorUIElement(e)};var uR=function(e,t){var n=e?e.settings.custom_ui_selector:"";var r=oR.getParent(t,function(t){return sR(t)||(n?e.dom.is(t,n):false)});return r!==null};var lR=function(){try{return document.activeElement}catch(e){return document.body}};var cR=function(e,t){var n=t.editor;iR.register(n);n.on("focusin",function(){var t=this;var n=e.focusedEditor;if(n!==t){if(n){n.fire("blur",{focusedEditor:t})}e.setActive(t);e.focusedEditor=t;t.fire("focus",{blurredEditor:n});t.focus(true)}});n.on("focusout",function(){var t=this;He.setEditorTimeout(t,function(){var n=e.focusedEditor;if(!uR(t,lR())&&n===t){t.fire("blur",{focusedEditor:null});e.focusedEditor=null}})});if(!aR){aR=function(t){var n=e.activeEditor;var r;r=t.target;if(n&&r.ownerDocument===document){if(r!==document.body&&!uR(n,r)&&e.focusedEditor===n){n.fire("blur",{focusedEditor:null});e.focusedEditor=null}}};oR.bind(document,"focusin",aR)}};var fR=function(e,t){if(e.focusedEditor===t.editor){e.focusedEditor=null}if(!e.activeEditor){oR.unbind(document,"focusin",aR);aR=null}};var dR=function(e){e.on("AddEditor",v.curry(cR,e));e.on("RemoveEditor",v.curry(fR,e))};var hR={setup:dR,isEditorUIElement:sR,isUIElement:uR};var vR={};var pR="en";var gR={setCode:function(e){if(e){pR=e;this.rtl=this.data[e]?this.data[e]._dir==="rtl":false}},getCode:function(){return pR},rtl:false,add:function(e,t){var n=vR[e];if(!n){vR[e]=n={}}for(var r in t){n[r]=t[r]}this.setCode(e)},translate:function(e){var t=vR[pR]||{};var n=function(e){if(Un.is(e,"function")){return Object.prototype.toString.call(e)}return!r(e)?""+e:""};var r=function(e){return e===""||e===null||Un.is(e,"undefined")};var i=function(e){e=n(e);return Un.hasOwn(t,e)?n(t[e]):e};if(r(e)){return""}if(Un.is(e,"object")&&Un.hasOwn(e,"raw")){return n(e.raw)}if(Un.is(e,"array")){var a=e.slice(1);e=i(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return Un.hasOwn(a,t)?n(a[t]):e})}return i(e).replace(/{context:\w+}$/,"")},data:vR};var mR=ju.DOM;var yR=Un.explode;var bR=Un.each;var _R=Un.extend;var wR=0;var xR;var TR;var CR=false;var kR=[];var SR=[];var ER=function(e){return e!=="length"};var PR=function(e){bR(TR.get(),function(t){if(e.type==="scroll"){t.fire("ScrollWindow",e)}else{t.fire("ResizeWindow",e)}})};var OR=function(e){if(e!==CR){if(e){ur(window).on("resize scroll",PR)}else{ur(window).off("resize scroll",PR)}CR=e}};var MR=function(e){var t=SR;delete kR[e.id];for(var n=0;n<kR.length;n++){if(kR[n]===e){kR.splice(n,1);break}}SR=J.filter(SR,function(t){return e!==t});if(TR.activeEditor===e){TR.activeEditor=SR.length>0?SR[0]:null}if(TR.focusedEditor===e){TR.focusedEditor=null}return t.length!==SR.length};var AR=function(e){if(e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode){MR(e);e.unbindAllNativeEvents();e.destroy(true);e.removed=true;e=null}return e};TR={defaultSettings:{},$:ur,majorVersion:"4",minorVersion:"7.9",releaseDate:"2018-02-27",editors:kR,i18n:gR,activeEditor:null,settings:{},setup:function(){var e=this;var t,n,r="",i,a;n=EN.getDocumentBaseUrl(document.location);if(/^[^:]+:\/\/\/?[^\/]+\//.test(n)){n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(n)){n+="/"}}i=window.tinymce||window.tinyMCEPreInit;if(i){t=i.base||i.baseURL;r=i.suffix}else{var o=document.getElementsByTagName("script");for(var s=0;s<o.length;s++){a=o[s].src;var u=a.substring(a.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(a)){if(u.indexOf(".min")!==-1){r=".min"}t=a.substring(0,a.lastIndexOf("/"));break}}if(!t&&document.currentScript){a=document.currentScript.src;if(a.indexOf(".min")!==-1){r=".min"}t=a.substring(0,a.lastIndexOf("/"))}}e.baseURL=new EN(n).toAbsolute(t);e.documentBaseURL=n;e.baseURI=new EN(e.baseURL);e.suffix=r;hR.setup(e)},overrideDefaults:function(e){var t,n;t=e.base_url;if(t){this.baseURL=new EN(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,""));this.baseURI=new EN(this.baseURL)}n=e.suffix;if(e.suffix){this.suffix=n}this.defaultSettings=e;var r=e.plugin_base_urls;for(var i in r){qu.PluginManager.urls[i]=r[i]}},init:function(e){var t=this;var n,r;r=Un.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track "+"colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var i=function(e,t){return e.inline&&t.tagName.toLowerCase()in r};var a=function(e){var t=e.id;if(!t){t=e.name;if(t&&!mR.get(t)){t=e.name}else{t=mR.uniqueId()}e.setAttribute("id",t)}return t};var o=function(n){var r=e[n];if(!r){return}return r.apply(t,Array.prototype.slice.call(arguments,2))};var s=function(e,t){return t.constructor===RegExp?t.test(e.className):mR.hasClass(e,t)};var u=function(e){var t,n=[];if(Me.ie&&Me.ie<11){TT.initError("TinyMCE does not support the browser you are using. For a list of supported"+" browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/");return[]}if(e.types){bR(e.types,function(e){n=n.concat(mR.select(e.selector))});return n}else if(e.selector){return mR.select(e.selector)}else if(e.target){return[e.target]}switch(e.mode){case"exact":t=e.elements||"";if(t.length>0){bR(yR(t),function(e){var t;if(t=mR.get(e)){n.push(t)}else{bR(document.forms,function(t){bR(t.elements,function(t){if(t.name===e){e="mce_editor_"+wR++;mR.setAttrib(t,"id",e);n.push(t)}})})}})}break;case"textareas":case"specific_textareas":bR(mR.select("textarea"),function(t){if(e.editor_deselector&&s(t,e.editor_deselector)){return}if(!e.editor_selector||s(t,e.editor_selector)){n.push(t)}});break}return n};var l=function(e){n=e};var c=function(){var n=0;var r=[];var s;var f=function(e,i,a){var o=new GN(e,i,t);r.push(o);o.on("init",function(){if(++n===s.length){l(r)}});o.targetElm=o.targetElm||a;o.render()};mR.unbind(window,"ready",c);o("onpageload");s=ur.unique(u(e));if(e.types){bR(e.types,function(t){Un.each(s,function(n){if(mR.is(n,t.selector)){f(a(n),_R({},e,t),n);return false}return true})});return}Un.each(s,function(e){AR(t.get(e.id))});s=Un.grep(s,function(e){return!t.get(e.id)});if(s.length===0){l([])}else{bR(s,function(t){if(i(e,t)){TT.initError("Could not initialize inline editor on invalid inline target element",t)}else{f(a(t),e,t)}})}};t.settings=e;mR.bind(window,"ready",c);return new Ne(function(e){if(n){e(n)}else{l=function(t){e(t)}}})},get:function(e){if(arguments.length===0){return SR.slice(0)}else if(Xi.isString(e)){return J.find(SR,function(t){return t.id===e}).getOr(null)}else if(Xi.isNumber(e)){return SR[e]?SR[e]:null}else{return null}},add:function(e){var t=this;var n;n=kR[e.id];if(n===e){return e}if(t.get(e.id)===null){if(ER(e.id)){kR[e.id]=e}kR.push(e);SR.push(e)}OR(true);t.activeEditor=e;t.fire("AddEditor",{editor:e});if(!xR){xR=function(){t.fire("BeforeUnload")};mR.bind(window,"beforeunload",xR)}return e},createEditor:function(e,t){return this.add(new GN(e,t,this))},remove:function(e){var t=this;var n,r;if(!e){for(n=SR.length-1;n>=0;n--){t.remove(SR[n])}return}if(Xi.isString(e)){e=e.selector||e;bR(mR.select(e),function(e){r=t.get(e.id);if(r){t.remove(r)}});return}r=e;if(Xi.isNull(t.get(r.id))){return null}if(MR(r)){t.fire("RemoveEditor",{editor:r})}if(SR.length===0){mR.unbind(window,"beforeunload",xR)}r.remove();OR(SR.length>0);return r},execCommand:function(e,t,n){var r=this,i=r.get(n);switch(e){case"mceAddEditor":if(!r.get(n)){new GN(n,r.settings,r).render()}return true;case"mceRemoveEditor":if(i){i.remove()}return true;case"mceToggleEditor":if(!i){r.execCommand("mceAddEditor",0,n);return true}if(i.isHidden()){i.show()}else{i.hide()}return true}if(r.activeEditor){return r.activeEditor.execCommand(e,t,n)}return false},triggerSave:function(){bR(SR,function(e){e.save()})},addI18n:function(e,t){gR.add(e,t)},translate:function(e){return gR.translate(e)},setActive:function(e){var t=this.activeEditor;if(this.activeEditor!==e){if(t){t.fire("deactivate",{relatedTarget:e})}e.fire("activate",{relatedTarget:t})}this.activeEditor=e}};_R(TR,ux);TR.setup();var NR=TR;function RR(e){var t=function(t,n){return oS.walk(e,t,n)};var n=My.split;var r=function(t){return uw.normalize(e,t).fold(v.constant(false),function(e){t.setStart(e.startContainer,e.startOffset);t.setEnd(e.endContainer,e.endOffset);return true})};return{walk:t,split:n,normalize:r}}(function(e){e.compareRanges=$_.isEq;e.getCaretRangeFromPoint=CP.fromPoint;e.getSelectedNode=Rl;e.getNode=Dl})(RR||(RR={}));var DR=RR;var LR=Math.min;var IR=Math.max;var BR=Math.round;var jR=function(e,t,n){var r,i,a,o,s,u;r=t.x;i=t.y;a=e.w;o=e.h;s=t.w;u=t.h;n=(n||"").split("");if(n[0]==="b"){i+=u}if(n[1]==="r"){r+=s}if(n[0]==="c"){i+=BR(u/2)}if(n[1]==="c"){r+=BR(s/2)}if(n[3]==="b"){i-=o}if(n[4]==="r"){r-=a}if(n[3]==="c"){i-=BR(o/2)}if(n[4]==="c"){r-=BR(a/2)}return VR(r,i,a,o)};var FR=function(e,t,n,r){var i,a;for(a=0;a<r.length;a++){i=jR(e,t,r[a]);if(i.x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y){return r[a]}}return null};var HR=function(e,t,n){return VR(e.x-t,e.y-n,e.w+t*2,e.h+n*2)};var zR=function(e,t){var n,r,i,a;n=IR(e.x,t.x);r=IR(e.y,t.y);i=LR(e.x+e.w,t.x+t.w);a=LR(e.y+e.h,t.y+t.h);if(i-n<0||a-r<0){return null}return VR(n,r,i-n,a-r)};var UR=function(e,t,n){var r,i,a,o,s,u,l,c,f,d;s=e.x;u=e.y;l=e.x+e.w;c=e.y+e.h;f=t.x+t.w;d=t.y+t.h;r=IR(0,t.x-s);i=IR(0,t.y-u);a=IR(0,l-f);o=IR(0,c-d);s+=r;u+=i;if(n){l+=r;c+=i;s-=a;u-=o}l-=a;c-=o;return VR(s,u,l-s,c-u)};var VR=function(e,t,n,r){return{x:e,y:t,w:n,h:r}};var WR=function(e){return VR(e.left,e.top,e.width,e.height)};var qR={inflate:HR,relativePosition:jR,findBestRelativePosition:FR,intersect:zR,clamp:UR,create:VR,fromClientRect:WR};var YR={};var KR={add:function(e,t){YR[e.toLowerCase()]=t},has:function(e){return!!YR[e.toLowerCase()]},get:function(e){var t=e.toLowerCase();var n=YR.hasOwnProperty(t)?YR[t]:null;if(n===null){throw new Error("Could not find module for type: "+e)}return n},create:function(e,t){var n;if(typeof e==="string"){t=t||{};t.type=e}else{t=e;e=t.type}e=e.toLowerCase();n=YR[e];if(!n){throw new Error("Could not find control by type: "+e)}n=new n(t);n.type=e;return n}};var $R=Un.each;var GR=Un.extend;var XR;var ZR;var JR=function(){};JR.extend=XR=function(e){var t=this;var n=t.prototype;var r,i,a;var o=function(){var e,t,n;var r=this;if(!ZR){if(r.init){r.init.apply(r,arguments)}t=r.Mixins;if(t){e=t.length;while(e--){n=t[e];if(n.init){n.init.apply(r,arguments)}}}}};var s=function(){return this};var u=function(e,t){return function(){var r=this;var i=r._super;var a;r._super=n[e];a=t.apply(r,arguments);r._super=i;return a}};ZR=true;r=new t;ZR=false;if(e.Mixins){$R(e.Mixins,function(t){for(var n in t){if(n!=="init"){e[n]=t[n]}}});if(n.Mixins){e.Mixins=n.Mixins.concat(e.Mixins)}}if(e.Methods){$R(e.Methods.split(","),function(t){e[t]=s})}if(e.Properties){$R(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t=this;if(e!==undefined){t[n]=e;return t}return t[n]}})}if(e.Statics){$R(e.Statics,function(e,t){o[t]=e})}if(e.Defaults&&n.Defaults){e.Defaults=GR({},n.Defaults,e.Defaults)}for(i in e){a=e[i];if(typeof a==="function"&&n[i]){r[i]=u(i,a)}else{r[i]=a}}o.prototype=r;o.constructor=o;o.extend=XR;return o};var QR=Math.min;var eD=Math.max;var tD=Math.round;var nD=function(e){var t={};var n=0,r=0,i=0;var a=function(e,t,n){var r,i,a,o,s,u;r=0;i=0;a=0;e=e/255;t=t/255;n=n/255;s=QR(e,QR(t,n));u=eD(e,eD(t,n));if(s===u){a=s;return{h:0,s:0,v:a*100}}o=e===s?t-n:n===s?e-t:n-e;r=e===s?3:n===s?1:5;r=60*(r-o/(u-s));i=(u-s)/u;a=u;return{h:tD(r),s:tD(i*100),v:tD(a*100)}};var o=function(e,t,a){var o,s,u,l;e=(parseInt(e,10)||0)%360;t=parseInt(t,10)/100;a=parseInt(a,10)/100;t=eD(0,QR(t,1));a=eD(0,QR(a,1));if(t===0){n=r=i=tD(255*a);return}o=e/60;s=a*t;u=s*(1-Math.abs(o%2-1));l=a-s;switch(Math.floor(o)){case 0:n=s;r=u;i=0;break;case 1:n=u;r=s;i=0;break;case 2:n=0;r=s;i=u;break;case 3:n=0;r=u;i=s;break;case 4:n=u;r=0;i=s;break;case 5:n=s;r=0;i=u;break;default:n=r=i=0}n=tD(255*(n+l));r=tD(255*(r+l));i=tD(255*(i+l))};var s=function(){var e=function(e){e=parseInt(e,10).toString(16);return e.length>1?e:"0"+e};return"#"+e(n)+e(r)+e(i)};var u=function(){return{r:n,g:r,b:i}};var l=function(){return a(n,r,i)};var c=function(e){var a;if(typeof e==="object"){if("r"in e){n=e.r;r=e.g;i=e.b}else if("v"in e){o(e.h,e.s,e.v)}}else{if(a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e)){n=parseInt(a[1],10);r=parseInt(a[2],10);i=parseInt(a[3],10)}else if(a=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e)){n=parseInt(a[1],16);r=parseInt(a[2],16);i=parseInt(a[3],16)}else if(a=/#([0-F])([0-F])([0-F])/gi.exec(e)){n=parseInt(a[1]+a[1],16);r=parseInt(a[2]+a[2],16);i=parseInt(a[3]+a[3],16)}}n=n<0?0:n>255?255:n;r=r<0?0:r>255?255:r;i=i<0?0:i>255?255:i;return t};if(e){c(e)}t.toRgb=u;t.toHsv=l;t.toHex=s;t.parse=c;return t};var rD=function(e,t){var n,r,i,a;t=t||'"';if(e===null){return"null"}i=typeof e;if(i==="string"){r="\bb\tt\nn\ff\rr\"\"''\\\\";return t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,i){if(t==='"'&&e==="'"){return e}n=r.indexOf(i);if(n+1){return"\\"+r.charAt(n+1)}e=i.charCodeAt().toString(16);return"\\u"+"0000".substring(e.length)+e})+t}if(i==="object"){if(e.hasOwnProperty&&Object.prototype.toString.call(e)==="[object Array]"){for(n=0,r="[";n<e.length;n++){r+=(n>0?",":"")+rD(e[n],t)}return r+"]"}r="{";for(a in e){if(e.hasOwnProperty(a)){r+=typeof e[a]!=="function"?(r.length>1?","+t:t)+a+t+":"+rD(e[a],t):""}}return r+"}"}return""+e};var iD={serialize:rD,parse:function(e){try{return JSON.parse(e)}catch(e){}}};var aD={callbacks:{},count:0,send:function(e){var t=this,n=ju.DOM,r=e.count!==undefined?e.count:t.count;var i="tinymce_jsonp_"+r;t.callbacks[r]=function(a){n.remove(i);delete t.callbacks[r];e.callback(a)};n.add(n.doc.body,"script",{id:i,src:e.url,type:"text/javascript"});t.count++}};var oD={send:function(e){var t,n=0;var r=function(){if(!e.async||t.readyState===4||n++>1e4){if(e.success&&n<1e4&&t.status===200){e.success.call(e.success_scope,""+t.responseText,t,e)}else if(e.error){e.error.call(e.error_scope,n>1e4?"TIMED_OUT":"GENERAL",t,e)}t=null}else{setTimeout(r,10)}};e.scope=e.scope||this;e.success_scope=e.success_scope||e.scope;e.error_scope=e.error_scope||e.scope;e.async=e.async===false?false:true;e.data=e.data||"";oD.fire("beforeInitialize",{settings:e});t=new ST;if(t){if(t.overrideMimeType){t.overrideMimeType(e.content_type)}t.open(e.type||(e.data?"POST":"GET"),e.url,e.async);if(e.crossDomain){t.withCredentials=true}if(e.content_type){t.setRequestHeader("Content-Type",e.content_type)}if(e.requestheaders){Un.each(e.requestheaders,function(e){t.setRequestHeader(e.key,e.value)})}t.setRequestHeader("X-Requested-With","XMLHttpRequest");t=oD.fire("beforeSend",{xhr:t,settings:e}).xhr;t.send(e.data);if(!e.async){return r()}setTimeout(r,10)}}};Un.extend(oD,ux);var sD=Un.extend;var uD=function(e){this.settings=sD({},e);this.count=0};uD.sendRPC=function(e){return(new uD).send(e)};uD.prototype={send:function(e){var t=e.error,n=e.success;e=sD(this.settings,e);e.success=function(r,i){r=iD.parse(r);if(typeof r==="undefined"){r={error:"JSON Parse error."}}if(r.error){t.call(e.error_scope||e.scope,r.error,i)}else{n.call(e.success_scope||e.scope,r.result)}};e.error=function(n,r){if(t){t.call(e.error_scope||e.scope,n,r)}};e.data=iD.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params});e.content_type="application/json";oD.send(e)}};var lD=window.localStorage;var cD=NR;var fD={geom:{Rect:qR},util:{Promise:Ne,Delay:He,Tools:Un,VK:hk,URI:EN,Class:JR,EventDispatcher:ox,Observable:ux,I18n:gR,XHR:oD,JSON:iD,JSONRequest:uD,JSONP:aD,LocalStorage:lD,Color:nD},dom:{EventUtils:Je,Sizzle:tn,DomQuery:ur,TreeWalker:cs,DOMUtils:ju,ScriptLoader:Vu,RangeUtils:DR,Serializer:nP,ControlSelection:vP,BookmarkManager:cP,Selection:NO,Event:Je.Event},html:{Styles:Pu,Entities:pu,Node:IE,Schema:Su,SaxParser:Ck,DomParser:$E,Writer:Rv,Serializer:Dv},ui:{Factory:KR},Env:Me,AddOnManager:qu,Formatter:lE,UndoManager:Xk,EditorCommands:ix,WindowManager:vT,NotificationManager:dT,EditorObservable:vx,Shortcuts:Cx,Editor:GN,FocusManager:ZN,EditorManager:NR,DOM:ju.DOM,ScriptLoader:Vu.ScriptLoader,PluginManager:qu.PluginManager,ThemeManager:qu.ThemeManager,trim:Un.trim,isArray:Un.isArray,is:Un.is,toArray:Un.toArray,makeMap:Un.makeMap,each:Un.each,map:Un.map,grep:Un.grep,inArray:Un.inArray,extend:Un.extend,create:Un.create,walk:Un.walk,createNS:Un.createNS,resolve:Un.resolve,explode:Un.explode,_addCacheSuffix:Un._addCacheSuffix,isOpera:Me.opera,isWebKit:Me.webkit,isIE:Me.ie,isGecko:Me.gecko,isMac:Me.mac};cD=Un.extend(cD,fD);var dD=cD;var hD=function(t){{try{e.exports=t}catch(e){}}};var vD=function(e){window.tinymce=e;window.tinyMCE=e};vD(dD);hD(dD)})()})()});(function(){var e=function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");var t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var n=function(e){return e.getParam("code_dialog_width",600)};var r=function(e){return e.getParam("code_dialog_height",Math.min(t.DOM.getViewPort().h-200,500))};var i={getMinWidth:n,getMinHeight:r};var a=function(e,t){e.focus();e.undoManager.transact(function(){e.setContent(t)});e.selection.setCursorLocation();e.nodeChanged()};var o=function(e){return e.getContent({source_view:true})};var s={setContent:a,getContent:o};var u=function(e){var t=i.getMinWidth(e);var n=i.getMinHeight(e);var r=e.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:true,minWidth:t,minHeight:n,spellcheck:false,style:"direction: ltr; text-align: left"},onSubmit:function(t){s.setContent(e,t.data.code)}});r.find("#code").value(s.getContent(e))};var l={open:u};var c=function(e){e.addCommand("mceCodeEditor",function(){l.open(e)})};var f={register:c};var d=function(e){e.addButton("code",{icon:"code",tooltip:"Source code",onclick:function(){l.open(e)}});e.addMenuItem("code",{icon:"code",text:"Source code",onclick:function(){l.open(e)}})};var h={register:d};e.add("code",function(e){f.register(e);h.register(e);return{}});function v(){}return v}()})();(function(){var e=function(){"use strict";var e=function(t){var n=t;var r=function(){return n};var i=function(e){n=e};var a=function(){return e(r())};return{get:r,set:i,clone:a}};var t=tinymce.util.Tools.resolve("tinymce.PluginManager");var n=function(e){return{isFullscreen:function(){return e.get()!==null}}};var r={get:n};var i=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var a=function(e,t){e.fire("FullscreenStateChanged",{state:t})};var o={fireFullscreenStateChanged:a};var s=i.DOM;var u=function(){var e;var t;var n=window;var r=document;var i=r.body;if(i.offsetWidth){e=i.offsetWidth;t=i.offsetHeight}if(n.innerWidth&&n.innerHeight){e=n.innerWidth;t=n.innerHeight}return{w:e,h:t}};var l=function(){var e=s.getViewPort();return{x:e.x,y:e.y}};var c=function(e){window.scrollTo(e.x,e.y)};var f=function(e,t){var n=document.body;var r=document.documentElement;var i;var a,f,d;var h=t.get();var v=function(){s.setStyle(f,"height",u().h-(a.clientHeight-f.clientHeight))};var p=function(){s.unbind(window,"resize",v)};a=e.getContainer();i=a.style;f=e.getContentAreaContainer().firstChild;d=f.style;if(!h){var g={scrollPos:l(),containerWidth:i.width,containerHeight:i.height,iframeWidth:d.width,iframeHeight:d.height,resizeHandler:v,removeHandler:p};d.width=d.height="100%";i.width=i.height="";s.addClass(n,"mce-fullscreen");s.addClass(r,"mce-fullscreen");s.addClass(a,"mce-fullscreen");s.bind(window,"resize",v);e.on("remove",p);v();t.set(g);o.fireFullscreenStateChanged(e,true)}else{d.width=h.iframeWidth;d.height=h.iframeHeight;if(h.containerWidth){i.width=h.containerWidth}if(h.containerHeight){i.height=h.containerHeight}s.removeClass(n,"mce-fullscreen");s.removeClass(r,"mce-fullscreen");s.removeClass(a,"mce-fullscreen");c(h.scrollPos);s.unbind(window,"resize",h.resizeHandler);e.off("remove",h.removeHandler);t.set(null);o.fireFullscreenStateChanged(e,false)}};var d={toggleFullscreen:f};var h=function(e,t){e.addCommand("mceFullScreen",function(){d.toggleFullscreen(e,t)})};var v={register:h};var p=function(e){return function(t){var n=t.control;e.on("FullscreenStateChanged",function(e){n.active(e.state)})}};var g=function(e){e.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:true,cmd:"mceFullScreen",onPostRender:p(e),context:"view"});e.addButton("fullscreen",{active:false,tooltip:"Fullscreen",cmd:"mceFullScreen",onPostRender:p(e)})};var m={register:g};t.add("fullscreen",function(t){var n=e(null);if(t.settings.inline){return r.get(n)}v.register(t,n);m.register(t);t.addShortcut("Ctrl+Shift+F","","mceFullScreen");return r.get(n)});function y(){}return y}()})();(function(){var e=function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");var t=function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",false,"<hr />")})};var n={register:t};var r=function(e){e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"});e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})};var i={register:r};e.add("hr",function(e){n.register(e);i.register(e)});function a(){}return a}()})();(function(){var e=function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");var t=tinymce.util.Tools.resolve("tinymce.util.Tools");var n=function(e){return e.settings.image_dimensions===false?false:true};var r=function(e){return e.settings.image_advtab===true?true:false};var i=function(e){return e.getParam("image_prepend_url","")};var a=function(e){return e.getParam("image_class_list")};var o=function(e){return e.settings.image_description===false?false:true};var s=function(e){return e.settings.image_title===true?true:false};var u=function(e){return e.settings.image_caption===true?true:false};var l=function(e){return e.getParam("image_list",false)};var c=function(e){return e.getParam("images_upload_url",false)};var f=function(e){return e.getParam("images_upload_handler",false)};var d=function(e){return e.getParam("images_upload_url")};var h=function(e){return e.getParam("images_upload_handler")};var v=function(e){return e.getParam("images_upload_base_path")};var p=function(e){return e.getParam("images_upload_credentials")};var g={hasDimensions:n,hasAdvTab:r,getPrependUrl:i,getClassList:a,hasDescription:o,hasImageTitle:s,hasImageCaption:u,getImageList:l,hasUploadUrl:c,hasUploadHandler:f,getUploadUrl:d,getUploadHandler:h,getUploadBasePath:v,getUploadCredentials:p};var m=typeof window!=="undefined"?window:Function("return this;")();var y=function(e,t){var n=t!==undefined&&t!==null?t:m;for(var r=0;r<e.length&&n!==undefined&&n!==null;++r){n=n[e[r]]}return n};var b=function(e,t){var n=e.split(".");return y(n,t)};var _=function(e,t){if(e[t]===undefined||e[t]===null){e[t]={}}return e[t]};var w=function(e,t){var n=t!==undefined?t:m;for(var r=0;r<e.length;++r){n=_(n,e[r])}return n};var x=function(e,t){var n=e.split(".");return w(n,t)};var T={path:y,resolve:b,forge:w,namespace:x};var C=function(e,t){return T.resolve(e,t)};var k=function(e,t){var n=C(e,t);if(n===undefined||n===null){throw e+" not available on this browser"}return n};var S={getOrDie:k};function E(){var e=S.getOrDie("FileReader");return new e}var P=tinymce.util.Tools.resolve("tinymce.util.Promise");var O=tinymce.util.Tools.resolve("tinymce.util.XHR");var M=function(e,t){return Math.max(parseInt(e,10),parseInt(t,10))};var A=function(e,t){var n=document.createElement("img");function r(e,r){if(n.parentNode){n.parentNode.removeChild(n)}t({width:e,height:r})}n.onload=function(){var e=M(n.width,n.clientWidth);var t=M(n.height,n.clientHeight);r(e,t)};n.onerror=function(){r(0,0)};var i=n.style;i.visibility="hidden";i.position="fixed";i.bottom=i.left="0px";i.width=i.height="auto";document.body.appendChild(n);n.src=e};var N=function(e,n,r){function i(e,r){r=r||[];t.each(e,function(e){var t={text:e.text||e.title};if(e.menu){t.menu=i(e.menu)}else{t.value=e.value;n(t)}r.push(t)});return r}return i(e,r||[])};var R=function(e){if(e){e=e.replace(/px$/,"")}return e};var D=function(e){if(e.length>0&&/^[0-9]+$/.test(e)){e+="px"}return e};var L=function(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0];e["margin-right"]=e["margin-right"]||t[0];e["margin-bottom"]=e["margin-bottom"]||t[0];e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0];e["margin-right"]=e["margin-right"]||t[1];e["margin-bottom"]=e["margin-bottom"]||t[0];e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0];e["margin-right"]=e["margin-right"]||t[1];e["margin-bottom"]=e["margin-bottom"]||t[2];e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0];e["margin-right"]=e["margin-right"]||t[1];e["margin-bottom"]=e["margin-bottom"]||t[2];e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e};var I=function(e,t){var n=g.getImageList(e);if(typeof n==="string"){O.send({url:n,success:function(e){t(JSON.parse(e))}})}else if(typeof n==="function"){n(t)}else{t(n)}};var B=function(e,t,n){function r(){n.onload=n.onerror=null;if(e.selection){e.selection.select(n);e.nodeChanged()}}n.onload=function(){if(!t.width&&!t.height&&g.hasDimensions(e)){e.dom.setAttribs(n,{width:n.clientWidth,height:n.clientHeight})}r()};n.onerror=r};var j=function(e){return new P(function(t,n){var r=new E;r.onload=function(){t(r.result)};r.onerror=function(){n(E.error.message)};r.readAsDataURL(e)})};var F={getImageSize:A,buildListItems:N,removePixelSuffix:R,addPixelSuffix:D,mergeMargins:L,createImageList:I,waitLoadImage:B,blobToDataUri:j};var H=function(e){return function(t){var n=e.dom;var r=t.control.rootControl;if(!g.hasAdvTab(e)){return}var i=r.toJSON();var a=n.parseStyle(i.style);r.find("#vspace").value("");r.find("#hspace").value("");a=F.mergeMargins(a);if(a["margin-top"]&&a["margin-bottom"]||a["margin-right"]&&a["margin-left"]){if(a["margin-top"]===a["margin-bottom"]){r.find("#vspace").value(F.removePixelSuffix(a["margin-top"]))}else{r.find("#vspace").value("")}if(a["margin-right"]===a["margin-left"]){r.find("#hspace").value(F.removePixelSuffix(a["margin-right"]))}else{r.find("#hspace").value("")}}if(a["border-width"]){r.find("#border").value(F.removePixelSuffix(a["border-width"]))}r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(a))))}};var z=function(e,t){return{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:H(e)},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,defaults:{type:"textbox",maxWidth:50,onchange:function(n){t(e,n.control.rootControl)}},items:[{label:"Vertical space",name:"vspace"},{label:"Border width",name:"border"},{label:"Horizontal space",name:"hspace"},{label:"Border style",type:"listbox",name:"borderStyle",width:90,maxWidth:90,onselect:function(n){t(e,n.control.rootControl)},values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}};var U={makeTab:z};var V=function(e,t){e.state.set("oldVal",e.value());t.state.set("oldVal",t.value())};var W=function(e,t){var n=e.find("#width")[0];var r=e.find("#height")[0];var i=e.find("#constrain")[0];if(n&&r&&i){t(n,r,i.checked())}};var q=function(e,t,n){var r=e.state.get("oldVal");var i=t.state.get("oldVal");var a=e.value();var o=t.value();if(n&&r&&i&&a&&o){if(a!==r){o=Math.round(a/r*o);if(!isNaN(o)){t.value(o)}}else{a=Math.round(o/i*a);if(!isNaN(a)){e.value(a)}}}V(e,t)};var Y=function(e){W(e,V)};var K=function(e){W(e,q)};var $=function(){var e=function(e){K(e.control.rootControl)};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:true,text:"Constrain proportions"}]}};var G={createUi:$,syncSize:Y,updateSize:K};var X=function(e,n){var r,i,a;var o=e.meta||{};var s=e.control;var u=s.rootControl;var l=u.find("#image-list")[0];if(l){l.value(n.convertURL(s.value(),"src"))}t.each(o,function(e,t){u.find("#"+t).value(e)});if(!o.width&&!o.height){r=n.convertURL(s.value(),"src");i=g.getPrependUrl(n);a=new RegExp("^(?:[a-z]+:)?//","i");if(i&&!a.test(r)&&r.substring(0,i.length)!==i){r=i+r}s.value(r);F.getImageSize(n.documentBaseURI.toAbsolute(s.value()),function(e){if(e.width&&e.height&&g.hasDimensions(n)){u.find("#width").value(e.width);u.find("#height").value(e.height);G.updateSize(u)}})}};var Z=function(e){e.meta=e.control.rootControl.toJSON()};var J=function(e,t){var n=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:true,onchange:function(t){X(t,e)},onbeforecall:Z},t];if(g.hasDescription(e)){n.push({name:"alt",type:"textbox",label:"Image description"})}if(g.hasImageTitle(e)){n.push({name:"title",type:"textbox",label:"Image Title"})}if(g.hasDimensions(e)){n.push(G.createUi())}if(g.getClassList(e)){n.push({name:"class",type:"listbox",label:"Class",values:F.buildListItems(g.getClassList(e),function(t){if(t.value){t.textStyle=function(){return e.formatter.getCssText({inline:"img",classes:[t.value]})}}})})}if(g.hasImageCaption(e)){n.push({name:"caption",type:"checkbox",label:"Caption"})}return n};var Q=function(e,t){return{title:"General",type:"form",items:J(e,t)}};var ee={makeTab:Q,getGeneralItems:J};var te=function(){return S.getOrDie("URL")};var ne=function(e){return te().createObjectURL(e)};var re=function(e){te().revokeObjectURL(e)};var ie={createObjectURL:ne,revokeObjectURL:re};var ae=tinymce.util.Tools.resolve("tinymce.ui.Factory");function oe(){var e=S.getOrDie("XMLHttpRequest");return new e}var se=function(){};var ue=function(e,t){if(e){return e.replace(/\/$/,"")+"/"+t.replace(/^\//,"")}return t};function le(e){var n=function(t,n,r,i){var a,o;a=new oe;a.open("POST",e.url);a.withCredentials=e.credentials;a.upload.onprogress=function(e){i(e.loaded/e.total*100)};a.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+a.status)};a.onload=function(){var t;if(a.status<200||a.status>=300){r("HTTP Error: "+a.status);return}t=JSON.parse(a.responseText);if(!t||typeof t.location!=="string"){r("Invalid JSON: "+a.responseText);return}n(ue(e.basePath,t.location))};o=new FormData;o.append("file",t.blob(),t.filename());a.send(o)};var r=function(e,t){return new P(function(n,r){try{t(e,n,r,se)}catch(e){r(e.message)}})};var i=function(e){return e===n};var a=function(t){return!e.url&&i(e.handler)?P.reject("Upload url missing from the settings."):r(t,e.handler)};e=t.extend({credentials:false,handler:n},e);return{upload:a}}var ce=function(e){return function(t){var n=ae.get("Throbber");var r=t.control.rootControl;var i=new n(r.getEl());var a=t.control.value();var o=ie.createObjectURL(a);var s=le({url:g.getUploadUrl(e),basePath:g.getUploadBasePath(e),credentials:g.getUploadCredentials(e),handler:g.getUploadHandler(e)});var u=function(){i.hide();ie.revokeObjectURL(o)};i.show();return F.blobToDataUri(a).then(function(t){var n=e.editorUpload.blobCache.create({blob:a,blobUri:o,name:a.name?a.name.replace(/\.[^\.]+$/,""):null,base64:t.split(",")[1]});return s.upload(n).then(function(e){var t=r.find("#src");t.value(e);r.find("tabpanel")[0].activateTab(0);t.fire("change");u();return e})}).catch(function(t){e.windowManager.alert(t);u()})}};var fe=".jpg,.jpeg,.png,.gif";var de=function(e){return{title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:fe,onchange:ce(e)},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:fe,height:100,onchange:ce(e)}]}};var he={makeTab:de};function ve(e){var n=function(e,t){if(!g.hasAdvTab(e)){return}var n=e.dom;var r=t.toJSON();var i=n.parseStyle(r.style);i=F.mergeMargins(i);if(r.vspace){i["margin-top"]=i["margin-bottom"]=F.addPixelSuffix(r.vspace)}if(r.hspace){i["margin-left"]=i["margin-right"]=F.addPixelSuffix(r.hspace)}if(r.border){i["border-width"]=F.addPixelSuffix(r.border)}if(r.borderStyle){i["border-style"]=r.borderStyle}t.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(i))))};function r(r){var i,a={},o,s;var u=e.dom;var l;function c(){var r,s;G.updateSize(i);n(e,i);a=t.extend(a,i.toJSON());if(!a.alt){a.alt=""}if(!a.title){a.title=""}if(a.width===""){a.width=null}if(a.height===""){a.height=null}if(!a.style){a.style=null}a={src:a.src,alt:a.alt,title:a.title,width:a.width,height:a.height,style:a.style,caption:a.caption,class:a.class};e.undoManager.transact(function(){if(!a.src){if(o){var t=u.is(o.parentNode,"figure.image")?o.parentNode:o;u.remove(t);e.focus();e.nodeChanged();if(u.isEmpty(e.getBody())){e.setContent("");e.selection.setCursorLocation()}}return}if(a.title===""){a.title=null}if(!o){a.id="__mcenew";e.focus();e.selection.setContent(u.createHTML("img",a));o=u.get("__mcenew");u.setAttrib(o,"id",null)}else{u.setAttribs(o,a)}e.editorUpload.uploadImagesAuto();if(a.caption===false){if(u.is(o.parentNode,"figure.image")){r=o.parentNode;u.insertAfter(o,r);u.remove(r)}}if(a.caption===true){if(!u.is(o.parentNode,"figure.image")){s=o;o=o.cloneNode(true);r=u.create("figure",{class:"image"});r.appendChild(o);r.appendChild(u.create("figcaption",{contentEditable:true},"Caption"));r.contentEditable=false;var n=u.getParent(s,function(t){return e.schema.getTextBlockElements()[t.nodeName]});if(n){u.split(n,s,r)}else{u.replace(r,s)}e.selection.select(r)}return}F.waitLoadImage(e,a,o)})}o=e.selection.getNode();s=u.getParent(o,"figure.image");if(s){o=u.select("img",s)[0]}if(o&&(o.nodeName!=="IMG"||o.getAttribute("data-mce-object")||o.getAttribute("data-mce-placeholder"))){o=null}if(o){a={src:u.getAttrib(o,"src"),alt:u.getAttrib(o,"alt"),title:u.getAttrib(o,"title"),class:u.getAttrib(o,"class"),width:u.getAttrib(o,"width"),height:u.getAttrib(o,"height"),caption:!!s}}if(r){l={type:"listbox",label:"Image list",name:"image-list",values:F.buildListItems(r,function(t){t.value=e.convertURL(t.value||t.url,"src")},[{text:"None",value:""}]),value:a.src&&e.convertURL(a.src,"src"),onselect:function(e){var t=i.find("#alt");if(!t.value()||e.lastControl&&t.value()===e.lastControl.text()){t.value(e.control.text())}i.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){l=this}}}if(g.hasAdvTab(e)||g.hasUploadUrl(e)||g.hasUploadHandler(e)){var f=[ee.makeTab(e,l)];if(g.hasAdvTab(e)){if(o){if(o.style.marginLeft&&o.style.marginRight&&o.style.marginLeft===o.style.marginRight){a.hspace=F.removePixelSuffix(o.style.marginLeft)}if(o.style.marginTop&&o.style.marginBottom&&o.style.marginTop===o.style.marginBottom){a.vspace=F.removePixelSuffix(o.style.marginTop)}if(o.style.borderWidth){a.border=F.removePixelSuffix(o.style.borderWidth)}a.borderStyle=o.style.borderStyle;a.style=e.dom.serializeStyle(e.dom.parseStyle(e.dom.getAttrib(o,"style")))}f.push(U.makeTab(e,n))}if(g.hasUploadUrl(e)||g.hasUploadHandler(e)){f.push(he.makeTab(e))}i=e.windowManager.open({title:"Insert/edit image",data:a,bodyType:"tabpanel",body:f,onSubmit:c})}else{i=e.windowManager.open({title:"Insert/edit image",data:a,body:ee.getGeneralItems(e,l),onSubmit:c})}G.syncSize(i)}function i(){F.createImageList(e,r)}return{open:i}}var pe=function(e){e.addCommand("mceImage",ve(e).open)};var ge={register:pe};var me=function(e){var t=e.attr("class");return t&&/\bimage\b/.test(t)};var ye=function(e){return function(n){var r=n.length,i;var a=function(t){t.attr("contenteditable",e?"true":null)};while(r--){i=n[r];if(me(i)){i.attr("contenteditable",e?"false":null);t.each(i.getAll("figcaption"),a)}}}};var be=function(e){e.on("preInit",function(){e.parser.addNodeFilter("figure",ye(true));e.serializer.addNodeFilter("figure",ye(false))})};var _e={setup:be};var we=function(e){e.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:ve(e).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"});e.addMenuItem("image",{icon:"image",text:"Image",onclick:ve(e).open,context:"insert",prependToContext:true})};var xe={register:we};e.add("image",function(e){_e.setup(e);xe.register(e);ge.register(e)});function Te(){}return Te}()})();(function(){var e=function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");var t=tinymce.util.Tools.resolve("tinymce.util.VK");var n=function(e){return typeof e.link_assume_external_targets==="boolean"?e.link_assume_external_targets:false};var r=function(e){return typeof e.link_context_toolbar==="boolean"?e.link_context_toolbar:false};var i=function(e){return e.link_list};var a=function(e){return typeof e.default_link_target==="string"};var o=function(e){return e.default_link_target};var s=function(e){return e.target_list};var u=function(e,t){e.settings.target_list=t};var l=function(e){return s(e)!==false};var c=function(e){return e.rel_list};var f=function(e){return c(e)!==undefined};var d=function(e){return e.link_class_list};var h=function(e){return d(e)!==undefined};var v=function(e){return e.link_title!==false};var p=function(e){return typeof e.allow_unsafe_link_target==="boolean"?e.allow_unsafe_link_target:false};var g={assumeExternalTargets:n,hasContextToolbar:r,getLinkList:i,hasDefaultLinkTarget:a,getDefaultLinkTarget:o,getTargetList:s,setTargetList:u,shouldShowTargetList:l,getRelList:c,hasRelList:f,getLinkClassList:d,hasLinkClassList:h,shouldShowLinkTitle:v,allowUnsafeLinkTarget:p};var m=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var y=tinymce.util.Tools.resolve("tinymce.Env");var b=function(e,t){document.body.appendChild(e);e.dispatchEvent(t);document.body.removeChild(e)};var _=function(e){if(!y.ie||y.ie>10){var t=document.createElement("a");t.target="_blank";t.href=e;t.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);b(t,n)}else{var r=window.open("","_blank");if(r){r.opener=null;var i=r.document;i.open();i.write('<meta http-equiv="refresh" content="0; url='+m.DOM.encode(e)+'">');i.close()}}};var w={open:_};var x=tinymce.util.Tools.resolve("tinymce.util.Tools");var T=function(e,t){var n=["noopener"];var r=e?e.split(/\s+/):[];var i=function(e){return x.trim(e.sort().join(" "))};var a=function(e){e=o(e);return e.length?e.concat(n):n};var o=function(e){return e.filter(function(e){return x.inArray(n,e)===-1})};r=t?a(r):o(r);return r.length?i(r):null};var C=function(e){return e.replace(/\uFEFF/g,"")};var k=function(e,t){t=t||e.selection.getNode();if(M(t)){return e.dom.select("a[href]",t)[0]}else{return e.dom.getParent(t,"a[href]")}};var S=function(e,t){var n=t?t.innerText||t.textContent:e.getContent({format:"text"});return C(n)};var E=function(e){return e&&e.nodeName==="A"&&e.href};var P=function(e){return x.grep(e,E).length>0};var O=function(e){if(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||e.indexOf("href=")===-1)){return false}return true};var M=function(e){return e&&e.nodeName==="FIGURE"&&/\bimage\b/i.test(e.className)};var A=function(e,t){return function(n){e.undoManager.transact(function(){var r=e.selection.getNode();var i=k(e,r);var a={href:n.href,target:n.target?n.target:null,rel:n.rel?n.rel:null,class:n.class?n.class:null,title:n.title?n.title:null};if(!g.hasRelList(e.settings)&&g.allowUnsafeLinkTarget(e.settings)===false){a.rel=T(a.rel,a.target==="_blank")}if(n.href===t.href){t.attach();t={}}if(i){e.focus();if(n.hasOwnProperty("text")){if("innerText"in i){i.innerText=n.text}else{i.textContent=n.text}}e.dom.setAttribs(i,a);e.selection.select(i);e.undoManager.add()}else{if(M(r)){D(e,r,a)}else if(n.hasOwnProperty("text")){e.insertContent(e.dom.createHTML("a",a,e.dom.encode(n.text)))}else{e.execCommand("mceInsertLink",false,a)}}})}};var N=function(e){return function(){e.undoManager.transact(function(){var t=e.selection.getNode();if(M(t)){R(e,t)}else{e.execCommand("unlink")}})}};var R=function(e,t){var n,r;r=e.dom.select("img",t)[0];if(r){n=e.dom.getParents(r,"a[href]",t)[0];if(n){n.parentNode.insertBefore(r,n);e.dom.remove(n)}}};var D=function(e,t,n){var r,i;i=e.dom.select("img",t)[0];if(i){r=e.dom.create("a",n);i.parentNode.insertBefore(r,i);r.appendChild(i)}};var L={link:A,unlink:N,isLink:E,hasLinks:P,isOnlyTextSelected:O,getAnchorElement:k,getAnchorText:S,toggleTargetRules:T};var I=tinymce.util.Tools.resolve("tinymce.util.Delay");var B=tinymce.util.Tools.resolve("tinymce.util.XHR");var j={};var F=function(e,t){var n=g.getLinkList(e.settings);if(typeof n==="string"){B.send({url:n,success:function(n){t(e,JSON.parse(n))}})}else if(typeof n==="function"){n(function(n){t(e,n)})}else{t(e,n)}};var H=function(e,t,n){var r=function(e,n){n=n||[];x.each(e,function(e){var i={text:e.text||e.title};if(e.menu){i.menu=r(e.menu)}else{i.value=e.value;if(t){t(i)}}n.push(i)});return n};return r(e,n||[])};var z=function(e,t,n){var r=e.selection.getRng();I.setEditorTimeout(e,function(){e.windowManager.confirm(t,function(t){e.selection.setRng(r);n(t)})})};var U=function(e,t){var n={};var r=e.selection;var i=e.dom;var a,o;var s,u,l,c,f,d,h,v,p;var m=function(e){var t=s.find("#text");if(!t.value()||e.lastControl&&t.value()===e.lastControl.text()){t.value(e.control.text())}s.find("#href").value(e.control.value())};var y=function(t){var n=[];x.each(e.dom.select("a:not([href])"),function(e){var r=e.name||e.id;if(r){n.push({text:r,value:"#"+r,selected:t.indexOf("#"+r)!==-1})}});if(n.length){n.unshift({text:"None",value:""});return{name:"anchor",type:"listbox",label:"Anchors",values:n,onselect:m}}};var b=function(){if(!o&&u&&!n.text){this.parent().parent().find("#text")[0].value(this.value())}};var _=function(t){var r=t.meta||{};if(c){c.value(e.convertURL(this.value(),"href"))}x.each(t.meta,function(e,t){var r=s.find("#"+t);if(t==="text"){if(o.length===0){r.value(e);n.text=e}}else{r.value(e)}});if(r.attach){j={href:this.value(),attach:r.attach}}if(!r.text){b.call(this)}};var w=function(e){e.meta=s.toJSON()};u=L.isOnlyTextSelected(r.getContent());a=L.getAnchorElement(e);n.text=o=L.getAnchorText(e.selection,a);n.href=a?i.getAttrib(a,"href"):"";if(a){n.target=i.getAttrib(a,"target")}else if(g.hasDefaultLinkTarget(e.settings)){n.target=g.getDefaultLinkTarget(e.settings)}if(p=i.getAttrib(a,"rel")){n.rel=p}if(p=i.getAttrib(a,"class")){n.class=p}if(p=i.getAttrib(a,"title")){n.title=p}if(u){l={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){n.text=this.value()}}}if(t){c={type:"listbox",label:"Link list",values:H(t,function(t){t.value=e.convertURL(t.value||t.url,"href")},[{text:"None",value:""}]),onselect:m,value:e.convertURL(n.href,"href"),onPostRender:function(){c=this}}}if(g.shouldShowTargetList(e.settings)){if(g.getTargetList(e.settings)===undefined){g.setTargetList(e,[{text:"None",value:""},{text:"New window",value:"_blank"}])}d={name:"target",type:"listbox",label:"Target",values:H(g.getTargetList(e.settings))}}if(g.hasRelList(e.settings)){f={name:"rel",type:"listbox",label:"Rel",values:H(g.getRelList(e.settings),function(t){if(g.allowUnsafeLinkTarget(e.settings)===false){t.value=L.toggleTargetRules(t.value,n.target==="_blank")}})}}if(g.hasLinkClassList(e.settings)){h={name:"class",type:"listbox",label:"Class",values:H(g.getLinkClassList(e.settings),function(t){if(t.value){t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})}}})}}if(g.shouldShowLinkTitle(e.settings)){v={name:"title",type:"textbox",label:"Title",value:n.title}}s=e.windowManager.open({title:"Insert link",data:n,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:true,label:"Url",onchange:_,onkeyup:b,onpaste:b,onbeforecall:w},l,v,y(n.href),c,f,d,h],onSubmit:function(t){var r=g.assumeExternalTargets(e.settings);var i=L.link(e,j);var a=L.unlink(e);var s=x.extend({},n,t.data);var l=s.href;if(!l){a();return}if(!u||s.text===o){delete s.text}if(l.indexOf("@")>0&&l.indexOf("//")===-1&&l.indexOf("mailto:")===-1){z(e,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){if(e){s.href="mailto:"+l}i(s)});return}if(r===true&&!/^\w+:/i.test(l)||r===false&&/^\s*www[\.|\d\.]/i.test(l)){z(e,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){if(e){s.href="http://"+l}i(s)});return}i(s)}})};var V=function(e){F(e,U)};var W={open:V};var q=function(e,t){return e.dom.getParent(t,"a[href]")};var Y=function(e){return q(e,e.selection.getStart())};var K=function(e){var t=e.getAttribute("data-mce-href");return t?t:e.getAttribute("href")};var $=function(e){var t=e.plugins.contextmenu;return t?t.isContextMenuVisible():false};var G=function(e){return e.altKey===true&&e.shiftKey===false&&e.ctrlKey===false&&e.metaKey===false};var X=function(e,t){if(t){var n=K(t);if(/^#/.test(n)){var r=e.$(n);if(r.length){e.selection.scrollIntoView(r[0],true)}}else{w.open(t.href)}}};var Z=function(e){return function(){W.open(e)}};var J=function(e){return function(){X(e,Y(e))}};var Q=function(e){return function(t){var n,r,i;if(g.hasContextToolbar(e.settings)&&!$(e)&&L.isLink(t)){n=e.selection;r=n.getRng();i=r.startContainer;if(i.nodeType===3&&n.isCollapsed()&&r.startOffset>0&&r.startOffset<i.data.length){return true}}return false}};var ee=function(e){e.on("click",function(n){var r=q(e,n.target);if(r&&t.metaKeyPressed(n)){n.preventDefault();X(e,r)}});e.on("keydown",function(t){var n=Y(e);if(n&&t.keyCode===13&&G(t)){t.preventDefault();X(e,n)}})};var te=function(e){return function(){var t=this;e.on("nodechange",function(n){t.active(!e.readonly&&!!L.getAnchorElement(e,n.element))})}};var ne=function(e){return function(){var t=this;var n=function(e){if(L.hasLinks(e.parents)){t.show()}else{t.hide()}};if(!L.hasLinks(e.dom.getParents(e.selection.getStart()))){t.hide()}e.on("nodechange",n);t.on("remove",function(){e.off("nodechange",n)})}};var re={openDialog:Z,gotoSelectedLink:J,leftClickedOnAHref:Q,setupGotoLinks:ee,toggleActiveState:te,toggleViewLinkState:ne};var ie=function(e){e.addCommand("mceLink",re.openDialog(e))};var ae={register:ie};var oe=function(e){e.addShortcut("Meta+K","",re.openDialog(e))};var se={setup:oe};var ue=function(e){e.addButton("link",{active:false,icon:"link",tooltip:"Insert/edit link",onclick:re.openDialog(e),onpostrender:re.toggleActiveState(e)});e.addButton("unlink",{active:false,icon:"unlink",tooltip:"Remove link",onclick:L.unlink(e),onpostrender:re.toggleActiveState(e)});if(e.addContextToolbar){e.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:re.gotoSelectedLink(e)})}};var le=function(e){e.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:re.gotoSelectedLink(e),onPostRender:re.toggleViewLinkState(e),prependToContext:true});e.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:re.openDialog(e),stateSelector:"a[href]",context:"insert",prependToContext:true})};var ce=function(e){if(e.addContextToolbar){e.addContextToolbar(re.leftClickedOnAHref(e),"openlink | link unlink")}};var fe={setupButtons:ue,setupMenuItems:le,setupContextToolbars:ce};e.add("link",function(e){fe.setupButtons(e);fe.setupMenuItems(e);fe.setupContextToolbars(e);re.setupGotoLinks(e);ae.register(e);se.setup(e)});function de(){}return de}()})();(function(){var e=function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");var t=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils");var n=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");var r=tinymce.util.Tools.resolve("tinymce.util.VK");var i=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");var a=tinymce.util.Tools.resolve("tinymce.util.Tools");var o=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var s=function(e){return e&&e.nodeType===3};var u=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)};var l=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)};var c=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)};var f=function(e){return e&&e.nodeName==="BR"};var d=function(e){return e.parentNode.firstChild===e};var h=function(e){return e.parentNode.lastChild===e};var v=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]};var p=function(e,t){return e&&e.nodeName in t};var g=function(e,t){if(!f(t)){return false}if(e.isBlock(t.nextSibling)&&!f(t.previousSibling)){return true}return false};var m=function(e,t,n){var r=e.isEmpty(t);if(n&&e.select("span[data-mce-type=bookmark]",t).length>0){return false}return r};var y=function(e,t){return e.isChildOf(t,e.getRoot())};var b={isTextNode:s,isListNode:u,isListItemNode:l,isTableCellNode:c,isBr:f,isFirstChild:d,isLastChild:h,isTextBlock:v,isBlock:p,isBogusBr:g,isEmpty:m,isChildOfBody:y};var _=function(e,n){var r=t.getNode(e,n);if(b.isListItemNode(e)&&b.isTextNode(r)){var i=n>=e.childNodes.length?r.data.length:0;return{container:r,offset:i}}return{container:e,offset:n}};var w=function(e){var t=e.cloneRange();var n=_(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);var r=_(e.endContainer,e.endOffset);t.setEnd(r.container,r.offset);return t};var x={getNormalizedEndPoint:_,normalizeRange:w};var T=o.DOM;var C=function(e){var t={};var n=function(n){var r,i,a;i=e[n?"startContainer":"endContainer"];a=e[n?"startOffset":"endOffset"];if(i.nodeType===1){r=T.create("span",{"data-mce-type":"bookmark"});if(i.hasChildNodes()){a=Math.min(a,i.childNodes.length-1);if(n){i.insertBefore(r,i.childNodes[a])}else{T.insertAfter(r,i.childNodes[a])}}else{i.appendChild(r)}i=r;a=0}t[n?"startContainer":"endContainer"]=i;t[n?"startOffset":"endOffset"]=a};n(true);if(!e.collapsed){n()}return t};var k=function(e){function t(t){var n,r,i;var a=function(e){var t=e.parentNode.firstChild,n=0;while(t){if(t===e){return n}if(t.nodeType!==1||t.getAttribute("data-mce-type")!=="bookmark"){n++}t=t.nextSibling}return-1};n=i=e[t?"startContainer":"endContainer"];r=e[t?"startOffset":"endOffset"];if(!n){return}if(n.nodeType===1){r=a(n);n=n.parentNode;T.remove(i);if(!n.hasChildNodes()&&T.isBlock(n)){n.appendChild(T.create("br"))}}e[t?"startContainer":"endContainer"]=n;e[t?"startOffset":"endOffset"]=r}t(true);t();var n=T.createRng();n.setStart(e.startContainer,e.startOffset);if(e.endContainer){n.setEnd(e.endContainer,e.endOffset)}return x.normalizeRange(n)};var S={createBookmark:C,resolveBookmark:k};var E=o.DOM;var P=function(e,t){var n;var r=t.parentNode;if(r.nodeName==="LI"&&r.firstChild===t){n=r.previousSibling;if(n&&n.nodeName==="LI"){n.appendChild(t);if(b.isEmpty(e,r)){E.remove(r)}}else{E.setStyle(r,"listStyleType","none")}}if(b.isListNode(r)){n=r.previousSibling;if(n&&n.nodeName==="LI"){n.appendChild(t)}}};var O=function(e,t){a.each(a.grep(e.select("ol,ul",t)),function(t){P(e,t)})};var M={normalizeList:P,normalizeLists:O};var A=tinymce.util.Tools.resolve("tinymce.dom.DomQuery");var N=function(e){var t=e.selection.getStart(true);return e.dom.getParent(t,"OL,UL,DL",j(e,t))};var R=function(e,t){return e&&t.length===1&&t[0]===e};var D=function(e){return a.grep(e.querySelectorAll("ol,ul,dl"),function(e){return b.isListNode(e)})};var L=function(e){var t=N(e);var n=e.selection.getSelectedBlocks();if(R(t,n)){return D(t)}else{return a.grep(n,function(e){return b.isListNode(e)&&t!==e})}};var I=function(e,t){var n=a.map(t,function(t){var n=e.dom.getParent(t,"li,dd,dt",j(e,t));return n?n:t});return A.unique(n)};var B=function(e){var t=e.selection.getSelectedBlocks();return a.grep(I(e,t),function(e){return b.isListItemNode(e)})};var j=function(e,t){var n=e.dom.getParents(t,"TD,TH");var r=n.length>0?n[0]:e.getBody();return r};var F={getParentList:N,getSelectedSubLists:L,getSelectedListItems:B,getClosestListRootElm:j};var H=tinymce.util.Tools.resolve("tinymce.Env");var z=o.DOM;var U=function(e,t,n){var r,i;var a=z.createFragment();var o;var s=e.schema.getBlockElements();if(e.settings.forced_root_block){n=n||e.settings.forced_root_block}if(n){i=z.create(n);if(i.tagName===e.settings.forced_root_block){z.setAttribs(i,e.settings.forced_root_block_attrs)}if(!b.isBlock(t.firstChild,s)){a.appendChild(i)}}if(t){while(r=t.firstChild){var u=r.nodeName;if(!o&&(u!=="SPAN"||r.getAttribute("data-mce-type")!=="bookmark")){o=true}if(b.isBlock(r,s)){a.appendChild(r);i=null}else{if(n){if(!i){i=z.create(n);a.appendChild(i)}i.appendChild(r)}else{a.appendChild(r)}}}}if(!e.settings.forced_root_block){a.appendChild(z.create("br"))}else{if(!o&&(!H.ie||H.ie>10)){i.appendChild(z.create("br",{"data-mce-bogus":"1"}))}}return a};var V={createNewTextBlock:U};var W=o.DOM;var q=function(e,t,n,r){var i,o,s,u;var l=function(e){a.each(s,function(t){e.parentNode.insertBefore(t,n.parentNode)});W.remove(e)};s=W.select('span[data-mce-type="bookmark"]',t);r=r||V.createNewTextBlock(e,n);i=W.createRng();i.setStartAfter(n);i.setEndAfter(t);o=i.extractContents();for(u=o.firstChild;u;u=u.firstChild){if(u.nodeName==="LI"&&e.dom.isEmpty(u)){W.remove(u);break}}if(!e.dom.isEmpty(o)){W.insertAfter(o,t)}W.insertAfter(r,t);if(b.isEmpty(e.dom,n.parentNode)){l(n.parentNode)}W.remove(n);if(b.isEmpty(e.dom,t)){W.remove(t)}};var Y={splitList:q};var K=o.DOM;var $=function(e,t){if(b.isEmpty(e,t)){K.remove(t)}};var G=function(e,t){var n=t.parentNode;var r=n.parentNode;var i;if(n===e.getBody()){return true}if(t.nodeName==="DD"){K.rename(t,"DT");return true}if(b.isFirstChild(t)&&b.isLastChild(t)){if(r.nodeName==="LI"){K.insertAfter(t,r);$(e.dom,r);K.remove(n)}else if(b.isListNode(r)){K.remove(n,true)}else{r.insertBefore(V.createNewTextBlock(e,t),n);K.remove(n)}return true}else if(b.isFirstChild(t)){if(r.nodeName==="LI"){K.insertAfter(t,r);t.appendChild(n);$(e.dom,r)}else if(b.isListNode(r)){r.insertBefore(t,n)}else{r.insertBefore(V.createNewTextBlock(e,t),n);K.remove(t)}return true}else if(b.isLastChild(t)){if(r.nodeName==="LI"){K.insertAfter(t,r)}else if(b.isListNode(r)){K.insertAfter(t,n)}else{K.insertAfter(V.createNewTextBlock(e,t),n);K.remove(t)}return true}if(r.nodeName==="LI"){n=r;i=V.createNewTextBlock(e,t,"LI")}else if(b.isListNode(r)){i=V.createNewTextBlock(e,t,"LI")}else{i=V.createNewTextBlock(e,t)}Y.splitList(e,n,t,i);M.normalizeLists(e.dom,n.parentNode);return true};var X=function(e){var t=F.getSelectedListItems(e);if(t.length){var n=S.createBookmark(e.selection.getRng(true));var r=void 0,i=void 0;var a=F.getClosestListRootElm(e,e.selection.getStart(true));r=t.length;while(r--){var o=t[r].parentNode;while(o&&o!==a){i=t.length;while(i--){if(t[i]===o){t.splice(r,1);break}}o=o.parentNode}}for(r=0;r<t.length;r++){if(!G(e,t[r])&&r===0){break}}e.selection.setRng(S.resolveBookmark(n));e.nodeChanged();return true}};var Z={outdent:G,outdentSelection:X};var J=function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)};var Q=function(e,t){a.each(t,function(t,n){e.setAttribute(n,t)})};var ee=function(e,t,n){Q(t,n["list-attributes"]);a.each(e.select("li",t),function(e){Q(e,n["list-item-attributes"])})};var te=function(e,t,n){J(e,t,n);ee(e,t,n)};var ne=function(e,t,n){a.each(n,function(n){return e.setStyle(t,(r={},r[n]="",r));var r})};var re=function(e,t,n,r){var i,a;i=t[n?"startContainer":"endContainer"];a=t[n?"startOffset":"endOffset"];if(i.nodeType===1){i=i.childNodes[Math.min(a,i.childNodes.length-1)]||i}if(!n&&b.isBr(i.nextSibling)){i=i.nextSibling}while(i.parentNode!==r){if(b.isTextBlock(e,i)){return i}if(/^(TD|TH)$/.test(i.parentNode.nodeName)){return i}i=i.parentNode}return i};var ie=function(e,t,n){var r=[],o=e.dom;var s=re(e,t,true,n);var u=re(e,t,false,n);var l;var c=[];for(var f=s;f;f=f.nextSibling){c.push(f);if(f===u){break}}a.each(c,function(t){if(b.isTextBlock(e,t)){r.push(t);l=null;return}if(o.isBlock(t)||b.isBr(t)){if(b.isBr(t)){o.remove(t)}l=null;return}var a=t.nextSibling;if(i.isBookmarkNode(t)){if(b.isTextBlock(e,a)||!a&&t.parentNode===n){l=null;return}}if(!l){l=o.create("p");t.parentNode.insertBefore(l,t);r.push(l)}l.appendChild(t)});return r};var ae=function(e,t,n){var r=e.getStyle(t,"list-style-type");var i=n?n["list-style-type"]:"";i=i===null?"":i;return r===i};var oe=function(e,t,n){if(n===void 0){n={}}var r=e.selection.getRng(true);var i;var o="LI";var s=F.getClosestListRootElm(e,e.selection.getStart(true));var u=e.dom;if(u.getContentEditable(e.selection.getNode())==="false"){return}t=t.toUpperCase();if(t==="DL"){o="DT"}i=S.createBookmark(r);a.each(ie(e,r,s),function(r){var i,a;a=r.previousSibling;if(a&&b.isListNode(a)&&a.nodeName===t&&ae(u,a,n)){i=a;r=u.rename(r,o);a.appendChild(r)}else{i=u.create(t);r.parentNode.insertBefore(i,r);i.appendChild(r);r=u.rename(r,o)}ne(u,r,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]);te(u,i,n);de(e.dom,i)});e.selection.setRng(S.resolveBookmark(i))};var se=function(e){var t=S.createBookmark(e.selection.getRng(true));var n=F.getClosestListRootElm(e,e.selection.getStart(true));var r=F.getSelectedListItems(e);var i=a.grep(r,function(t){return e.dom.isEmpty(t)});r=a.grep(r,function(t){return!e.dom.isEmpty(t)});a.each(i,function(t){if(b.isEmpty(e.dom,t)){Z.outdent(e,t);return}});a.each(r,function(t){var r,i;if(t.parentNode===e.getBody()){return}for(r=t;r&&r!==n;r=r.parentNode){if(b.isListNode(r)){i=r}}Y.splitList(e,i,t);M.normalizeLists(e.dom,i.parentNode)});e.selection.setRng(S.resolveBookmark(t))};var ue=function(e,t){return e&&t&&b.isListNode(e)&&e.nodeName===t.nodeName};var le=function(e,t,n){var r=e.getStyle(t,"list-style-type",true);var i=e.getStyle(n,"list-style-type",true);return r===i};var ce=function(e,t){return e.className===t.className};var fe=function(e,t,n){return ue(t,n)&&le(e,t,n)&&ce(t,n)};var de=function(e,t){var n,r;n=t.nextSibling;if(fe(e,t,n)){while(r=n.firstChild){t.appendChild(r)}e.remove(n)}n=t.previousSibling;if(fe(e,t,n)){while(r=n.lastChild){t.insertBefore(r,t.firstChild)}e.remove(n)}};var he=function(e,t,n,r){if(t.nodeName!==n){var i=e.rename(t,n);te(e,i,r)}else{te(e,t,r)}};var ve=function(e,t,n,r,i){if(t.nodeName===r&&!pe(i)){se(e)}else{var o=S.createBookmark(e.selection.getRng(true));a.each([t].concat(n),function(t){he(e.dom,t,r,i)});e.selection.setRng(S.resolveBookmark(o))}};var pe=function(e){return"list-style-type"in e};var ge=function(e,t,n,r){if(t===e.getBody()){return}if(t){if(t.nodeName===n&&!pe(r)){se(e)}else{var i=S.createBookmark(e.selection.getRng(true));te(e.dom,t,r);de(e.dom,e.dom.rename(t,n));e.selection.setRng(S.resolveBookmark(i))}}else{oe(e,n,r)}};var me=function(e,t,n){var r=F.getParentList(e);var i=F.getSelectedSubLists(e);n=n?n:{};if(r&&i.length>0){ve(e,r,i,t,n)}else{ge(e,r,t,n)}};var ye={toggleList:me,removeList:se,mergeWithAdjacentLists:de};var be=function(e,r,i,a){var o=r.startContainer;var s=r.startOffset;var u,l;if(o.nodeType===3&&(i?s<o.data.length:s>0)){return o}u=e.schema.getNonEmptyElements();if(o.nodeType===1){o=t.getNode(o,s)}l=new n(o,a);if(i){if(b.isBogusBr(e.dom,o)){l.next()}}while(o=l[i?"next":"prev2"]()){if(o.nodeName==="LI"&&!o.hasChildNodes()){return o}if(u[o.nodeName]){return o}if(o.nodeType===3&&o.data.length>0){return o}}};var _e=function(e,t){var n=t.childNodes;return n.length===1&&!b.isListNode(n[0])&&e.isBlock(n[0])};var we=function(e,t){if(_e(e,t)){e.remove(t.firstChild,true)}};var xe=function(e,t,n){var r,i;i=_e(e,n)?n.firstChild:n;we(e,t);if(!b.isEmpty(e,t,true)){while(r=t.firstChild){i.appendChild(r)}}};var Te=function(e,t,n){var r,i;var a=t.parentNode;if(!b.isChildOfBody(e,t)||!b.isChildOfBody(e,n)){return}if(b.isListNode(n.lastChild)){i=n.lastChild}if(a===n.lastChild){if(b.isBr(a.previousSibling)){e.remove(a.previousSibling)}}r=n.lastChild;if(r&&b.isBr(r)&&t.hasChildNodes()){e.remove(r)}if(b.isEmpty(e,n,true)){e.$(n).empty()}xe(e,t,n);if(i){n.appendChild(i)}e.remove(t);if(b.isEmpty(e,a)&&a!==e.getRoot()){e.remove(a)}};var Ce=function(e,t,n){e.dom.$(n).empty();Te(e.dom,t,n);e.selection.setCursorLocation(n)};var ke=function(e,t,n,r){var i=e.dom;if(i.isEmpty(r)){Ce(e,n,r)}else{var a=S.createBookmark(t);Te(i,n,r);e.selection.setRng(S.resolveBookmark(a))}};var Se=function(e,t,n,r){var i=S.createBookmark(t);Te(e.dom,n,r);var a=S.resolveBookmark(i);e.selection.setRng(a)};var Ee=function(e,t){var n=e.dom,r=e.selection;var i=r.getStart();var a=F.getClosestListRootElm(e,i);var o=n.getParent(r.getStart(),"LI",a);var s,u,l;if(o){s=o.parentNode;if(s===e.getBody()&&b.isEmpty(n,s)){return true}u=x.normalizeRange(r.getRng(true));l=n.getParent(be(e,u,t,a),"LI",a);if(l&&l!==o){if(t){ke(e,u,l,o)}else{Se(e,u,o,l)}return true}else if(!l){if(!t&&ye.removeList(e)){return true}}}return false};var Pe=function(e,t,n){var r=e.getParent(t.parentNode,e.isBlock,n);e.remove(t);if(r&&e.isEmpty(r)){e.remove(r)}};var Oe=function(e,t){var n=e.dom;var r=e.selection.getStart();var i=F.getClosestListRootElm(e,r);var a=n.getParent(r,n.isBlock,i);if(a&&n.isEmpty(a)){var o=x.normalizeRange(e.selection.getRng(true));var s=n.getParent(be(e,o,t,i),"LI",i);if(s){e.undoManager.transact(function(){Pe(n,a,i);ye.mergeWithAdjacentLists(n,s.parentNode);e.selection.select(s,true);e.selection.collapse(t)});return true}}return false};var Me=function(e,t){return Ee(e,t)||Oe(e,t)};var Ae=function(e){var t=e.selection.getStart();var n=F.getClosestListRootElm(e,t);var r=e.dom.getParent(t,"LI,DT,DD",n);if(r||F.getSelectedListItems(e).length>0){e.undoManager.transact(function(){e.execCommand("Delete");M.normalizeLists(e.dom,e.getBody())});return true}return false};var Ne=function(e,t){return e.selection.isCollapsed()?Me(e,t):Ae(e)};var Re=function(e){e.on("keydown",function(t){if(t.keyCode===r.BACKSPACE){if(Ne(e,false)){t.preventDefault()}}else if(t.keyCode===r.DELETE){if(Ne(e,true)){t.preventDefault()}}})};var De={setup:Re,backspaceDelete:Ne};var Le=function(e){return{backspaceDelete:function(t){De.backspaceDelete(e,t)}}};var Ie={get:Le};var Be=o.DOM;var je=function(e,t){var n;if(b.isListNode(e)){while(n=e.firstChild){t.appendChild(n)}Be.remove(e)}};var Fe=function(e){var t,n,r;if(e.nodeName==="DT"){Be.rename(e,"DD");return true}t=e.previousSibling;if(t&&b.isListNode(t)){t.appendChild(e);return true}if(t&&t.nodeName==="LI"&&b.isListNode(t.lastChild)){t.lastChild.appendChild(e);je(e.lastChild,t.lastChild);return true}t=e.nextSibling;if(t&&b.isListNode(t)){t.insertBefore(e,t.firstChild);return true}t=e.previousSibling;if(t&&t.nodeName==="LI"){n=Be.create(e.parentNode.nodeName);r=Be.getStyle(e.parentNode,"listStyleType");if(r){Be.setStyle(n,"listStyleType",r)}t.appendChild(n);n.appendChild(e);je(e.lastChild,n);return true}return false};var He=function(e){var t=F.getSelectedListItems(e);if(t.length){var n=S.createBookmark(e.selection.getRng(true));for(var r=0;r<t.length;r++){if(!Fe(t[r])&&r===0){break}}e.selection.setRng(S.resolveBookmark(n));e.nodeChanged();return true}};var ze={indentSelection:He};var Ue=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}};var Ve=function(e){e.on("BeforeExecCommand",function(t){var n=t.command.toLowerCase();var r;if(n==="indent"){if(ze.indentSelection(e)){r=true}}else if(n==="outdent"){if(Z.outdentSelection(e)){r=true}}if(r){e.fire("ExecCommand",{command:t.command});t.preventDefault();return true}});e.addCommand("InsertUnorderedList",function(t,n){ye.toggleList(e,"UL",n)});e.addCommand("InsertOrderedList",function(t,n){ye.toggleList(e,"OL",n)});e.addCommand("InsertDefinitionList",function(t,n){ye.toggleList(e,"DL",n)});e.addQueryStateHandler("InsertUnorderedList",Ue(e,"UL"));e.addQueryStateHandler("InsertOrderedList",Ue(e,"OL"));e.addQueryStateHandler("InsertDefinitionList",Ue(e,"DL"))};var We={register:Ve};var qe=function(e){return e.getParam("lists_indent_on_tab",true)};var Ye={shouldIndentOnTab:qe};var Ke=function(e){e.on("keydown",function(t){if(t.keyCode!==r.TAB||r.metaKeyPressed(t)){return}if(e.dom.getParent(e.selection.getStart(),"LI,DT,DD")){t.preventDefault();if(t.shiftKey){Z.outdentSelection(e)}else{ze.indentSelection(e)}}})};var $e=function(e){if(Ye.shouldIndentOnTab(e)){Ke(e)}De.setup(e)};var Ge={setup:$e};var Xe=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t(r)){return n}}return-1};var Ze=function(e,t){return function(n){var r=n.control;e.on("NodeChange",function(e){var n=Xe(e.parents,b.isTableCellNode);var i=n!==-1?e.parents.slice(0,n):e.parents;var o=a.grep(i,b.isListNode);r.active(o.length>0&&o[0].nodeName===t)})}};var Je=function(e){return function(t){var n=t.control;e.on("nodechange",function(){var t=F.getSelectedListItems(e);var r=t.length>0&&b.isFirstChild(t[0]);n.disabled(r)})}};var Qe=function(e){var t=function(e,t){var n=e.settings.plugins?e.settings.plugins:"";return a.inArray(n.split(/[ ,]/),t)!==-1};if(!t(e,"advlist")){e.addButton("numlist",{active:false,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:Ze(e,"OL")});e.addButton("bullist",{active:false,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:Ze(e,"UL")})}e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:Je(e)})};var et={register:Qe};e.add("lists",function(e){Ge.setup(e);et.register(e);We.register(e);return Ie.get(e)});function tt(){}return tt}()})();(function(){var e=function(){"use strict";var e=function(t){var n=t;var r=function(){return n};var i=function(e){n=e};var a=function(){return e(r())};return{get:r,set:i,clone:a}};var t=tinymce.util.Tools.resolve("tinymce.PluginManager");var n=function(e){if(/(^|[ ,])powerpaste([, ]|$)/.test(e.settings.plugins)&&t.get("powerpaste")){if(typeof window.console!=="undefined"&&window.console.log){window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option.")}return true}else{return false}};var r={hasProPlugin:n};var i=function(e,t){return{clipboard:e,quirks:t}};var a={get:i};var o=function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})};var s=function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})};var u=function(e,t){return e.fire("PastePlainTextToggle",{state:t})};var l=function(e,t){return e.fire("paste",{ieFake:t})};var c={firePastePreProcess:o,firePastePostProcess:s,firePastePlainTextToggle:u,firePaste:l};var f=function(e){return e.getParam("paste_plaintext_inform",true)};var d=function(e){return e.getParam("paste_block_drop",false)};var h=function(e){return e.getParam("paste_data_images",false)};var v=function(e){return e.getParam("paste_filter_drop",true)};var p=function(e){return e.getParam("paste_preprocess")};var g=function(e){return e.getParam("paste_postprocess")};var m=function(e){return e.getParam("paste_webkit_styles")};var y=function(e){return e.getParam("paste_remove_styles_if_webkit",true)};var b=function(e){return e.getParam("paste_merge_formats",true)};var _=function(e){return e.getParam("smart_paste",true)};var w=function(e){return e.getParam("paste_as_text",false)};var x=function(e){return e.getParam("paste_retain_style_properties")};var T=function(e){var t="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,"+"-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,"+"td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody";return e.getParam("paste_word_valid_elements",t)};var C=function(e){return e.getParam("paste_convert_word_fake_lists",true)};var k=function(e){return e.getParam("paste_enable_default_filters",true)};var S={shouldPlainTextInform:f,shouldBlockDrop:d,shouldPasteDataImages:h,shouldFilterDrop:v,getPreProcess:p,getPostProcess:g,getWebkitStyles:m,shouldRemoveWebKitStyles:y,shouldMergeFormats:b,isSmartPasteEnabled:_,isPasteAsTextEnabled:w,getRetainStyleProps:x,getWordValidElements:T,shouldConvertWordFakeLists:C,shouldUseDefaultFilters:k};var E=function(e,t){return t.get()===false&&S.shouldPlainTextInform(e)};var P=function(e,t){e.notificationManager.open({text:e.translate(t),type:"info"})};var O=function(e,t,n){if(t.pasteFormat.get()==="text"){t.pasteFormat.set("html");c.firePastePlainTextToggle(e,false)}else{t.pasteFormat.set("text");c.firePastePlainTextToggle(e,true);if(E(e,n)){P(e,"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.");n.set(true)}}e.focus()};var M={togglePlainTextPaste:O};var A=function(e,t,n){e.addCommand("mceTogglePlainTextPaste",function(){M.togglePlainTextPaste(e,t,n)});e.addCommand("mceInsertClipboardContent",function(e,n){if(n.content){t.pasteHtml(n.content,n.internal)}if(n.text){t.pasteText(n.text)}})};var N={register:A};var R=tinymce.util.Tools.resolve("tinymce.Env");var D=tinymce.util.Tools.resolve("tinymce.util.Delay");var L=tinymce.util.Tools.resolve("tinymce.util.Tools");var I=tinymce.util.Tools.resolve("tinymce.util.VK");var B="x-tinymce/html";var j="\x3c!-- "+B+" --\x3e";var F=function(e){return j+e};var H=function(e){return e.replace(j,"")};var z=function(e){return e.indexOf(j)!==-1};var U={mark:F,unmark:H,isMarked:z,internalHtmlMime:function(){return B}};var V=tinymce.util.Tools.resolve("tinymce.html.Entities");var W=function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)};var q=function(e){return e.replace(/\r?\n/g,"<br>")};var Y=function(e,t){var n;var r=[];var i="<"+e;if(typeof t==="object"){for(n in t){if(t.hasOwnProperty(n)){r.push(n+'="'+V.encodeAllRaw(t[n])+'"')}}if(r.length){i+=" "+r.join(" ")}}return i+">"};var K=function(e,t,n){var r=e.split(/\n\n/);var i=Y(t,n);var a="</"+t+">";var o=L.map(r,function(e){return e.split(/\n/).join("<br />")});var s=function(e){return i+e+a};return o.length===1?o[0]:L.map(o,s).join("")};var $=function(e,t,n){return t?K(e,t,n):q(e)};var G={isPlainText:W,convert:$,toBRs:q,toBlockElements:K};var X=tinymce.util.Tools.resolve("tinymce.html.DomParser");var Z=tinymce.util.Tools.resolve("tinymce.html.Node");var J=tinymce.util.Tools.resolve("tinymce.html.Schema");var Q=tinymce.util.Tools.resolve("tinymce.html.Serializer");function ee(e,t){L.each(t,function(t){if(t.constructor===RegExp){e=e.replace(t,"")}else{e=e.replace(t[0],t[1])}});return e}function te(e){var t=J();var n=X({},t);var r="";var i=t.getShortEndedElements();var a=L.makeMap("script noscript style textarea video audio iframe object"," ");var o=t.getBlockElements();function s(e){var t=e.name,n=e;if(t==="br"){r+="\n";return}if(i[t]){r+=" "}if(a[t]){r+=" ";return}if(e.type===3){r+=e.value}if(!e.shortEnded){if(e=e.firstChild){do{s(e)}while(e=e.next)}}if(o[t]&&n.next){r+="\n";if(t==="p"){r+="\n"}}}e=ee(e,[/<!\[[^\]]+\]>/g]);s(n.parse(e));return r}function ne(e){function t(e,t,n){if(!t&&!n){return" "}return"¬†"}e=ee(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br class="Apple-interchange-newline">/g,/<br>$/i]);return e}function re(e){var t=0;return function(){return e+t++}}var ie=function(){return navigator.userAgent.indexOf(" Edge/")!==-1};var ae={filter:ee,innerText:te,trimHtml:ne,createIdGenerator:re,isMsEdge:ie};function oe(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function se(e){var t,n;n=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/];e=e.replace(/^[\u00a0 ]+/,"");L.each(n,function(n){if(n.test(e)){t=true;return false}});return t}function ue(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)}function le(e){var t,n,r=1;function i(e){var t="";if(e.type===3){return e.value}if(e=e.firstChild){do{t+=i(e)}while(e=e.next)}return t}function a(e,t){if(e.type===3){if(t.test(e.value)){e.value=e.value.replace(t,"");return false}}if(e=e.firstChild){do{if(!a(e,t)){return false}}while(e=e.next)}return true}function o(e){if(e._listIgnore){e.remove();return}if(e=e.firstChild){do{o(e)}while(e=e.next)}}function s(e,i,s){var u=e._listLevel||r;if(u!==r){if(u<r){if(t){t=t.parent.parent}}else{n=t;t=null}}if(!t||t.name!==i){n=n||t;t=new Z(i,1);if(s>1){t.attr("start",""+s)}e.wrap(t)}else{t.append(e)}e.name="li";if(u>r&&n){n.lastChild.append(t)}r=u;o(e);a(e,/^\u00a0+/);a(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/);a(e,/^\u00a0+/)}var u=[];var l=e.firstChild;while(typeof l!=="undefined"&&l!==null){u.push(l);l=l.walk();if(l!==null){while(typeof l!=="undefined"&&l.parent!==e){l=l.walk()}}}for(var c=0;c<u.length;c++){e=u[c];if(e.name==="p"&&e.firstChild){var f=i(e);if(ue(f)){s(e,"ul");continue}if(se(f)){var d=/([0-9]+)\./.exec(f);var h=1;if(d){h=parseInt(d[1],10)}s(e,"ol",h);continue}if(e._listLevel){s(e,"ul",1);continue}t=null}else{n=t;t=null}}}function ce(e,t,n,r){var i={},a;var o=e.dom.parseStyle(r);L.each(o,function(o,s){switch(s){case"mso-list":a=/\w+ \w+([0-9]+)/i.exec(r);if(a){n._listLevel=parseInt(a[1],10)}if(/Ignore/i.test(o)&&n.firstChild){n._listIgnore=true;n.firstChild._listIgnore=true}break;case"horiz-align":s="text-align";break;case"vert-align":s="vertical-align";break;case"font-color":case"mso-foreground":s="color";break;case"mso-background":case"mso-highlight":s="background";break;case"font-weight":case"font-style":if(o!=="normal"){i[s]=o}return;case"mso-element":if(/^(comment|comment-list)$/i.test(o)){n.remove();return}break}if(s.indexOf("mso-comment")===0){n.remove();return}if(s.indexOf("mso-")===0){return}if(S.getRetainStyleProps(e)==="all"||t&&t[s]){i[s]=o}});if(/(bold)/i.test(i["font-weight"])){delete i["font-weight"];n.wrap(new Z("b",1))}if(/(italic)/i.test(i["font-style"])){delete i["font-style"];n.wrap(new Z("i",1))}i=e.dom.serializeStyle(i,n.name);if(i){return i}return null}var fe=function(e,t){var n,r;n=S.getRetainStyleProps(e);if(n){r=L.makeMap(n.split(/[, ]/))}t=ae.filter(t,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"¬†"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join("¬†"):""}]]);var i=S.getWordValidElements(e);var a=J({valid_elements:i,valid_children:"-li[p]"});L.each(a.elements,function(e){if(!e.attributes.class){e.attributes.class={};e.attributesOrder.push("class")}if(!e.attributes.style){e.attributes.style={};e.attributesOrder.push("style")}});var o=X({},a);o.addAttributeFilter("style",function(t){var n=t.length,i;while(n--){i=t[n];i.attr("style",ce(e,r,i,i.attr("style")));if(i.name==="span"&&i.parent&&!i.attributes.length){i.unwrap()}}});o.addAttributeFilter("class",function(e){var t=e.length,n,r;while(t--){n=e[t];r=n.attr("class");if(/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(r)){n.remove()}n.attr("class",null)}});o.addNodeFilter("del",function(e){var t=e.length;while(t--){e[t].remove()}});o.addNodeFilter("a",function(e){var t=e.length,n,r,i;while(t--){n=e[t];r=n.attr("href");i=n.attr("name");if(r&&r.indexOf("#_msocom_")!==-1){n.remove();continue}if(r&&r.indexOf("file://")===0){r=r.split("#")[1];if(r){r="#"+r}}if(!r&&!i){n.unwrap()}else{if(i&&!/^_?(?:toc|edn|ftn)/i.test(i)){n.unwrap();continue}n.attr({href:r,name:i})}}});var s=o.parse(t);if(S.shouldConvertWordFakeLists(e)){le(s)}t=Q({validate:e.settings.validate},a).serialize(s);return t};var de=function(e,t){return S.shouldUseDefaultFilters(e)?fe(e,t):t};var he={preProcess:de,isWordContent:oe};var ve=function(e,t){return{content:e,cancelled:t}};var pe=function(e,t,n,r){var i=e.dom.create("div",{style:"display:none"},t);var a=c.firePastePostProcess(e,i,n,r);return ve(a.node.innerHTML,a.isDefaultPrevented())};var ge=function(e,t,n,r){var i=c.firePastePreProcess(e,t,n,r);if(e.hasEventListeners("PastePostProcess")&&!i.isDefaultPrevented()){return pe(e,i.content,n,r)}else{return ve(i.content,i.isDefaultPrevented())}};var me=function(e,t,n){var r=he.isWordContent(t);var i=r?he.preProcess(e,t):t;return ge(e,i,n,r)};var ye={process:me};var be=function(e,t){e.insertContent(t,{merge:S.shouldMergeFormats(e),paste:true});return true};var _e=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)};var we=function(e){return _e(e)&&/.(gif|jpe?g|png)$/.test(e)};var xe=function(e,t,n){e.undoManager.extra(function(){n(e,t)},function(){e.insertContent('<img src="'+t+'">')});return true};var Te=function(e,t,n){e.undoManager.extra(function(){n(e,t)},function(){e.execCommand("mceInsertLink",false,t)});return true};var Ce=function(e,t,n){return e.selection.isCollapsed()===false&&_e(t)?Te(e,t,n):false};var ke=function(e,t,n){return we(t)?xe(e,t,n):false};var Se=function(e,t){L.each([Ce,ke,be],function(n){return n(e,t,be)!==true})};var Ee=function(e,t){if(S.isSmartPasteEnabled(e)===false){be(e,t)}else{Se(e,t)}};var Pe={isImageUrl:we,isAbsoluteUrl:_e,insertContent:Ee};var Oe=function(e,t,n){var r=n?n:U.isMarked(t);var i=ye.process(e,U.unmark(t),r);if(i.cancelled===false){Pe.insertContent(e,i.content)}};var Me=function(e,t){t=e.dom.encode(t).replace(/\r\n/g,"\n");t=G.convert(t,e.settings.forced_root_block,e.settings.forced_root_block_attrs);Oe(e,t,false)};var Ae=function(e){var t={};var n="data:text/mce-internal,";if(e){if(e.getData){var r=e.getData("Text");if(r&&r.length>0){if(r.indexOf(n)===-1){t["text/plain"]=r}}}if(e.types){for(var i=0;i<e.types.length;i++){var a=e.types[i];try{t[a]=e.getData(a)}catch(e){t[a]=""}}}}return t};var Ne=function(e,t){var n=Ae(t.clipboardData||e.getDoc().dataTransfer);return ae.isMsEdge()?L.extend(n,{"text/html":""}):n};var Re=function(e,t){return t in e&&e[t].length>0};var De=function(e){return Re(e,"text/html")||Re(e,"text/plain")};var Le=function(e){var t;t=e.indexOf(",");if(t!==-1){return e.substr(t+1)}return null};var Ie=function(e,t){return e.images_dataimg_filter?e.images_dataimg_filter(t):true};var Be=function(e,t){var n=t.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i);return n?e.dom.encode(n[1]):null};var je=function(e,t,n,r){var i=ae.createIdGenerator("mceclip");if(t){e.selection.setRng(t);t=null}var a=n.result;var o=Le(a);var s=i();var u=e.settings.images_reuse_filename&&r.name?Be(e,r.name):s;var l=new Image;l.src=a;if(Ie(e.settings,l)){var c=e.editorUpload.blobCache;var f=void 0,d=void 0;d=c.findFirst(function(e){return e.base64()===o});if(!d){f=c.create(s,r,o,u);c.add(f)}else{f=d}Oe(e,'<img src="'+f.blobUri()+'">',false)}else{Oe(e,'<img src="'+a+'">',false)}};var Fe=function(e){return e.type==="paste"};var He=function(e,t,n){var r=Fe(t)?t.clipboardData:t.dataTransfer;function i(r){var i,a,o,s=false;if(r){for(i=0;i<r.length;i++){a=r[i];if(/^image\/(jpeg|png|gif|bmp)$/.test(a.type)){var u=a.getAsFile?a.getAsFile():a;o=new window.FileReader;o.onload=je.bind(null,e,n,o,u);o.readAsDataURL(u);t.preventDefault();s=true}}}return s}if(e.settings.paste_data_images&&r){return i(r.items)||i(r.files)}};var ze=function(e){var t=e.clipboardData;return navigator.userAgent.indexOf("Android")!==-1&&t&&t.items&&t.items.length===0};var Ue=function(e){return I.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45};var Ve=function(e,t,n){var r=0;var i;e.on("keydown",function(n){function a(e){if(Ue(e)&&!e.isDefaultPrevented()){t.remove()}}if(Ue(n)&&!n.isDefaultPrevented()){i=n.shiftKey&&n.keyCode===86;if(i&&R.webkit&&navigator.userAgent.indexOf("Version/")!==-1){return}n.stopImmediatePropagation();r=(new Date).getTime();if(R.ie&&i){n.preventDefault();c.firePaste(e,true);return}t.remove();t.create();e.once("keyup",a);e.once("paste",function(){e.off("keyup",a)})}});function a(n,r,i,a){var o,s;if(Re(n,"text/html")){o=n["text/html"]}else{o=t.getHtml();a=a?a:U.isMarked(o);if(t.isDefaultContent(o)){i=true}}o=ae.trimHtml(o);t.remove();s=a===false&&G.isPlainText(o);if(!o.length||s){i=true}if(i){if(Re(n,"text/plain")&&s){o=n["text/plain"]}else{o=ae.innerText(o)}}if(t.isDefaultContent(o)){if(!r){e.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")}return}if(i){Me(e,o)}else{Oe(e,o,a)}}var o=function(){return t.getLastRng()||e.selection.getRng()};e.on("paste",function(s){var u=(new Date).getTime();var l=Ne(e,s);var c=(new Date).getTime()-u;var f=(new Date).getTime()-r-c<1e3;var d=n.get()==="text"||i;var h=Re(l,U.internalHtmlMime());i=false;if(s.isDefaultPrevented()||ze(s)){t.remove();return}if(!De(l)&&He(e,s,o())){t.remove();return}if(!f){s.preventDefault()}if(R.ie&&(!f||s.ieFake)&&!Re(l,"text/html")){t.create();e.dom.bind(t.getEl(),"paste",function(e){e.stopPropagation()});e.getDoc().execCommand("Paste",false,null);l["text/html"]=t.getHtml()}if(Re(l,"text/html")){s.preventDefault();if(!h){h=U.isMarked(l["text/html"])}a(l,f,d,h)}else{D.setEditorTimeout(e,function(){a(l,f,d,h)},0)}})};var We=function(e,t,n){Ve(e,t,n);var r;e.parser.addNodeFilter("img",function(t,n,i){var a=function(e){return e.data&&e.data.paste===true};var o=function(e){if(!e.attr("data-mce-object")&&r!==R.transparentSrc){e.remove()}};var s=function(e){return e.indexOf("webkit-fake-url")===0};var u=function(e){return e.indexOf("data:")===0};if(!e.settings.paste_data_images&&a(i)){var l=t.length;while(l--){r=t[l].attributes.map.src;if(!r){continue}if(s(r)){o(t[l])}else if(!e.settings.allow_html_data_urls&&u(r)){o(t[l])}}}})};var qe=function(e,t,n){var r=e.dom,i=e.getBody();var a=e.dom.getViewPort(e.getWin());var o=a.y,s=20;var u;var l;t.set(e.selection.getRng());var c=t.get();if(e.inline){l=e.selection.getScrollContainer();if(l&&l.scrollTop>0){o=l.scrollTop}}function f(e){var t,n,i;var a=e.startContainer;t=e.getClientRects();if(t.length){return t[0]}if(!e.collapsed||a.nodeType!==1){return}i=a.childNodes[c.startOffset];while(i&&i.nodeType===3&&!i.data.length){i=i.nextSibling}if(!i){return}if(i.tagName==="BR"){n=r.doc.createTextNode("\ufeff");i.parentNode.insertBefore(n,i);e=r.createRng();e.setStartBefore(n);e.setEndAfter(n);t=e.getClientRects();r.remove(n)}if(t.length){return t[0]}}if(c.getClientRects){var d=f(c);if(d){s=o+(d.top-r.getPos(i).y)}else{s=o;var h=c.startContainer;if(h){if(h.nodeType===3&&h.parentNode!==i){h=h.parentNode}if(h.nodeType===1){s=r.getPos(h,l||i).y}}}}u=e.dom.add(e.getBody(),"div",{id:"mcepastebin",contentEditable:true,"data-mce-bogus":"all",style:"position: absolute; top: "+s+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n);if(R.ie||R.gecko){r.setStyle(u,"left",r.getStyle(i,"direction",true)==="rtl"?65535:-65535)}r.bind(u,"beforedeactivate focusin focusout",function(e){e.stopPropagation()});u.focus();e.selection.select(u,true)};var Ye=function(e,t){if(Ke(e)){var n=void 0;var r=t.get();while(n=e.dom.get("mcepastebin")){e.dom.remove(n);e.dom.unbind(n)}if(r){e.selection.setRng(r)}}t.set(null)};var Ke=function(e){return e.dom.get("mcepastebin")};var $e=function(e){var t,n,r,i,a;var o=function(t,n){t.appendChild(n);e.dom.remove(n,true)};n=L.grep(e.getBody().childNodes,function(e){return e.id==="mcepastebin"});t=n.shift();L.each(n,function(e){o(t,e)});i=e.dom.select("div[id=mcepastebin]",t);for(r=i.length-1;r>=0;r--){a=e.dom.create("div");t.insertBefore(a,i[r]);o(a,i[r])}return t?t.innerHTML:""};var Ge=function(e){return e.get()};var Xe=function(e,t){return t===e};var Ze=function(e){return e&&e.id==="mcepastebin"};var Je=function(e,t){var n=Ke(e);return Ze(n)&&Xe(t,n.innerHTML)};var Qe=function(t){var n=e(null);var r="%MCEPASTEBIN%";return{create:function(){return qe(t,n,r)},remove:function(){return Ye(t,n)},getEl:function(){return Ke(t)},getHtml:function(){return $e(t)},getLastRng:function(){return Ge(n)},isDefault:function(){return Je(t,r)},isDefaultContent:function(e){return Xe(r,e)}}};var et=function(e,t){var n=Qe(e);e.on("preInit",function(){return We(e,n,t)});return{pasteFormat:t,pasteHtml:function(t,n){return Oe(e,t,n)},pasteText:function(t){return Me(e,t)},pasteImageData:function(t,n){return He(e,t,n)},getDataTransferItems:Ae,hasHtmlOrText:De,hasContentType:Re}};var tt=function(){};var nt=function(e){return R.iOS===false&&e!==undefined&&typeof e.setData==="function"&&ae.isMsEdge()!==true};var rt=function(e,t,n){if(nt(e)){try{e.clearData();e.setData("text/html",t);e.setData("text/plain",n);e.setData(U.internalHtmlMime(),t);return true}catch(e){return false}}else{return false}};var it=function(e,t,n,r){if(rt(e.clipboardData,t.html,t.text)){e.preventDefault();r()}else{n(t.html,r)}};var at=function(e){return function(t,n){var r=U.mark(t);var i=e.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"});var a=e.dom.create("div",{contenteditable:"true"},r);e.dom.setStyles(i,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"});i.appendChild(a);e.dom.add(e.getBody(),i);var o=e.selection.getRng();a.focus();var s=e.dom.createRng();s.selectNodeContents(a);e.selection.setRng(s);setTimeout(function(){e.selection.setRng(o);i.parentNode.removeChild(i);n()},0)}};var ot=function(e){return{html:e.selection.getContent({contextual:true}),text:e.selection.getContent({format:"text"})}};var st=function(e){return function(t){if(e.selection.isCollapsed()===false){it(t,ot(e),at(e),function(){setTimeout(function(){e.execCommand("Delete")},0)})}}};var ut=function(e){return function(t){if(e.selection.isCollapsed()===false){it(t,ot(e),at(e),tt)}}};var lt=function(e){e.on("cut",st(e));e.on("copy",ut(e))};var ct={register:lt};var ft=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils");var dt=function(e,t){return ft.getCaretRangeFromPoint(t.clientX,t.clientY,e.getDoc())};var ht=function(e){var t=e["text/plain"];return t?t.indexOf("file://")===0:false};var vt=function(e,t){e.focus();e.selection.setRng(t)};var pt=function(e,t,n){if(S.shouldBlockDrop(e)){e.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault();e.stopPropagation()})}if(!S.shouldPasteDataImages(e)){e.on("drop",function(e){var t=e.dataTransfer;if(t&&t.files&&t.files.length>0){e.preventDefault()}})}e.on("drop",function(r){var i,a;a=dt(e,r);if(r.isDefaultPrevented()||n.get()){return}i=t.getDataTransferItems(r.dataTransfer);var o=t.hasContentType(i,U.internalHtmlMime());if((!t.hasHtmlOrText(i)||ht(i))&&t.pasteImageData(r,a)){return}if(a&&S.shouldFilterDrop(e)){var s=i["mce-internal"]||i["text/html"]||i["text/plain"];if(s){r.preventDefault();D.setEditorTimeout(e,function(){e.undoManager.transact(function(){if(i["mce-internal"]){e.execCommand("Delete")}vt(e,a);s=ae.trimHtml(s);if(!i["text/html"]){t.pasteText(s)}else{t.pasteHtml(s,o)}})})}}});e.on("dragstart",function(e){n.set(true)});e.on("dragover dragend",function(t){if(S.shouldPasteDataImages(e)&&n.get()===false){t.preventDefault();vt(e,dt(e,t))}if(t.type==="dragend"){n.set(false)}})};var gt={setup:pt};var mt=function(e){var t=e.plugins.paste;var n=S.getPreProcess(e);if(n){e.on("PastePreProcess",function(e){n.call(t,t,e)})}var r=S.getPostProcess(e);if(r){e.on("PastePostProcess",function(e){r.call(t,t,e)})}};var yt={setup:mt};function bt(e,t){e.on("PastePreProcess",function(n){n.content=t(e,n.content,n.internal,n.wordContent)})}function _t(e,t){e.on("PastePostProcess",function(n){t(e,n.node)})}function wt(e,t){if(!he.isWordContent(t)){return t}var n=[];L.each(e.schema.getBlockElements(),function(e,t){n.push(t)});var r=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+n.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");t=ae.filter(t,[[r,"$1"]]);t=ae.filter(t,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]);return t}function xt(e,t,n,r){if(r||n){return t}var i=S.getWebkitStyles(e);var a;if(S.shouldRemoveWebKitStyles(e)===false||i==="all"){return t}if(i){a=i.split(/[, ]/)}if(a){var o=e.dom,s=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,t,n,r){var i=o.parseStyle(o.decode(n),"span");var u={};if(a==="none"){return t+r}for(var l=0;l<a.length;l++){var c=i[a[l]],f=o.getStyle(s,a[l],true);if(/color/.test(a[l])){c=o.toHex(c);f=o.toHex(f)}if(f!==c){u[a[l]]=c}}u=o.serializeStyle(u,"span");if(u){return t+' style="'+u+'"'+r}return t+r})}else{t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3")}t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r});return t}function Tt(e,t){e.$("a",t).find("font,u").each(function(t,n){e.dom.remove(n,true)})}var Ct=function(e){if(R.webkit){bt(e,xt)}if(R.ie){bt(e,wt);_t(e,Tt)}};var kt={setup:Ct};var St=function(){};var Et=function(e){return function(){return e()}};var Pt=function(e,t){return function(){return e(t.apply(null,arguments))}};var Ot=function(e){return function(){return e}};var Mt=function(e){return e};var At=function(e,t){return e===t};var Nt=function(e){var t=new Array(arguments.length-1);for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}return function(){var n=new Array(arguments.length);for(var r=0;r<n.length;r++){n[r]=arguments[r]}var i=t.concat(n);return e.apply(null,i)}};var Rt=function(e){return function(){return!e.apply(null,arguments)}};var Dt=function(e){return function(){throw new Error(e)}};var Lt=function(e){return e()};var It=function(e){e()};var Bt=Ot(false);var jt=Ot(true);var Ft={noop:St,noarg:Et,compose:Pt,constant:Ot,identity:Mt,tripleEquals:At,curry:Nt,not:Rt,die:Dt,apply:Lt,call:It,never:Bt,always:jt};var Ht=function(e,t,n){var r=n.control;r.active(t.pasteFormat.get()==="text");e.on("PastePlainTextToggle",function(e){r.active(e.state)})};var zt=function(e,t){var n=Ft.curry(Ht,e,t);e.addButton("pastetext",{active:false,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:n});e.addMenuItem("pastetext",{text:"Paste as text",selectable:true,active:t.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:n})};var Ut={register:zt};t.add("paste",function(t){if(r.hasProPlugin(t)===false){var n=e(false);var i=e(false);var o=e(S.isPasteAsTextEnabled(t)?"text":"html");var s=et(t,o);var u=kt.setup(t);Ut.register(t,s);N.register(t,s,n);yt.setup(t);ct.register(t);gt.setup(t,s,i);return a.get(s,u)}});function Vt(){}return Vt}()})();(function(){var e=function(){"use strict";var e=function(t){var n=t;var r=function(){return n};var i=function(e){n=e};var a=function(){return e(r())};return{get:r,set:i,clone:a}};var t=tinymce.util.Tools.resolve("tinymce.PluginManager");var n=tinymce.util.Tools.resolve("tinymce.util.Tools");function r(e){return e&&e.nodeType===1&&e.contentEditable==="false"}function i(e,t,n,i,a){var o;var s=[];var u,l=0,c;var f,d,h;c=t.ownerDocument;f=a.getBlockElements();d=a.getWhiteSpaceElements();h=a.getShortEndedElements();function v(e,t){t=t||0;if(!e[0]){throw new Error("findAndReplaceDOMText cannot handle zero-length matches")}var n=e.index;if(t>0){var r=e[t];if(!r){throw new Error("Invalid capture group")}n+=e[0].indexOf(r);e[0]=r}return[n,n+e[0].length,[e[0]]]}function p(e){var t;if(e.nodeType===3){return e.data}if(d[e.nodeName]&&!f[e.nodeName]){return""}t="";if(r(e)){return"\n"}if(f[e.nodeName]||h[e.nodeName]){t+="\n"}if(e=e.firstChild){do{t+=p(e)}while(e=e.nextSibling)}return t}function g(e,t,n){var i,a,o,s,u=[],l=0,c=e,v=t.shift(),p=0;e:while(true){if(f[c.nodeName]||h[c.nodeName]||r(c)){l++}if(c.nodeType===3){if(!a&&c.length+l>=v[1]){a=c;s=v[1]-l}else if(i){u.push(c)}if(!i&&c.length+l>v[0]){i=c;o=v[0]-l}l+=c.length}if(i&&a){c=n({startNode:i,startNodeIndex:o,endNode:a,endNodeIndex:s,innerNodes:u,match:v[2],matchIndex:p});l-=a.length-s;i=null;a=null;u=[];v=t.shift();p++;if(!v){break}}else if((!d[c.nodeName]||f[c.nodeName])&&c.firstChild){if(!r(c)){c=c.firstChild;continue}}else if(c.nextSibling){c=c.nextSibling;continue}while(true){if(c.nextSibling){c=c.nextSibling;break}else if(c.parentNode!==e){c=c.parentNode}else{break e}}}}function m(e){var t;if(typeof e!=="function"){var n=e.nodeType?e:c.createElement(e);t=function(e,t){var r=n.cloneNode(false);r.setAttribute("data-mce-index",t);if(e){r.appendChild(c.createTextNode(e))}return r}}else{t=e}return function(e){var n;var r;var i;var a=e.startNode;var o=e.endNode;var s=e.matchIndex;if(a===o){var u=a;i=u.parentNode;if(e.startNodeIndex>0){n=c.createTextNode(u.data.substring(0,e.startNodeIndex));i.insertBefore(n,u)}var l=t(e.match[0],s);i.insertBefore(l,u);if(e.endNodeIndex<u.length){r=c.createTextNode(u.data.substring(e.endNodeIndex));i.insertBefore(r,u)}u.parentNode.removeChild(u);return l}n=c.createTextNode(a.data.substring(0,e.startNodeIndex));r=c.createTextNode(o.data.substring(e.endNodeIndex));var f=t(a.data.substring(e.startNodeIndex),s);var d=[];for(var h=0,v=e.innerNodes.length;h<v;++h){var p=e.innerNodes[h];var g=t(p.data,s);p.parentNode.replaceChild(g,p);d.push(g)}var m=t(o.data.substring(0,e.endNodeIndex),s);i=a.parentNode;i.insertBefore(n,a);i.insertBefore(f,a);i.removeChild(a);i=o.parentNode;i.insertBefore(m,o);i.insertBefore(r,o);i.removeChild(o);return m}}u=p(t);if(!u){return}if(e.global){while(o=e.exec(u)){s.push(v(o,i))}}else{o=u.match(e);s.push(v(o,i))}if(s.length){l=s.length;g(t,s,m(n))}return l}var a={findAndReplaceDOMText:i};var o=function(e){var t=e.getAttribute("data-mce-index");if(typeof t==="number"){return""+t}return t};var s=function(e,t,n){var r,i;i=e.dom.create("span",{"data-mce-bogus":1});i.className="mce-match-marker";r=e.getBody();m(e,t,false);return a.findAndReplaceDOMText(n,r,i,false,e.schema)};var u=function(e){var t=e.parentNode;if(e.firstChild){t.insertBefore(e.firstChild,e)}e.parentNode.removeChild(e)};var l=function(e,t){var r;var i=[];r=n.toArray(e.getBody().getElementsByTagName("span"));if(r.length){for(var a=0;a<r.length;a++){var s=o(r[a]);if(s===null||!s.length){continue}if(s===t.toString()){i.push(r[a])}}}return i};var c=function(e,t,n){var r=t.get();var i=e.dom;n=n!==false;if(n){r++}else{r--}i.removeClass(l(e,t.get()),"mce-match-marker-selected");var a=l(e,r);if(a.length){i.addClass(l(e,r),"mce-match-marker-selected");e.selection.scrollIntoView(a[0]);return r}return-1};var f=function(e,t){var n=t.parentNode;e.remove(t);if(e.isEmpty(n)){e.remove(n)}};var d=function(e,t,n,r,i){n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");n=n.replace(/\s/g,"\\s");n=i?"\\b"+n+"\\b":n;var a=s(e,t,new RegExp(n,r?"g":"gi"));if(a){t.set(-1);t.set(c(e,t,true))}return a};var h=function(e,t){var n=c(e,t,true);if(n!==-1){t.set(n)}};var v=function(e,t){var n=c(e,t,false);if(n!==-1){t.set(n)}};var p=function(e){var t=o(e);return t!==null&&t.length>0};var g=function(e,t,r,i,a){var s,l,c,d,g,m=t.get(),_;i=i!==false;c=e.getBody();l=n.grep(n.toArray(c.getElementsByTagName("span")),p);for(s=0;s<l.length;s++){var w=o(l[s]);d=g=parseInt(w,10);if(a||d===t.get()){if(r.length){l[s].firstChild.nodeValue=r;u(l[s])}else{f(e.dom,l[s])}while(l[++s]){d=parseInt(o(l[s]),10);if(d===g){f(e.dom,l[s])}else{s--;break}}if(i){m--}}else if(g>t.get()){l[s].setAttribute("data-mce-index",g-1)}}t.set(m);if(i){_=y(e,t);h(e,t)}else{_=b(e,t);v(e,t)}return!a&&_};var m=function(e,t,r){var i,a,s,l;a=n.toArray(e.getBody().getElementsByTagName("span"));for(i=0;i<a.length;i++){var c=o(a[i]);if(c!==null&&c.length){if(c===t.get().toString()){if(!s){s=a[i].firstChild}l=a[i].firstChild}u(a[i])}}if(s&&l){var f=e.dom.createRng();f.setStart(s,0);f.setEnd(l,l.data.length);if(r!==false){e.selection.setRng(f)}return f}};var y=function(e,t){return l(e,t.get()+1).length>0};var b=function(e,t){return l(e,t.get()-1).length>0};var _={done:m,find:d,next:h,prev:v,replace:g,hasNext:y,hasPrev:b};var w=function(e,t){var n=function(n){return _.done(e,t,n)};var r=function(n,r,i){return _.find(e,t,n,r,i)};var i=function(){return _.next(e,t)};var a=function(){return _.prev(e,t)};var o=function(n,r,i){return _.replace(e,t,n,r,i)};return{done:n,find:r,next:i,prev:a,replace:o}};var x={get:w};var T=function(e,t){var r={},i;e.undoManager.add();i=n.trim(e.selection.getContent({format:"text"}));function a(){s.statusbar.find("#next").disabled(_.hasNext(e,t)===false);s.statusbar.find("#prev").disabled(_.hasPrev(e,t)===false)}function o(){e.windowManager.alert("Could not find the specified string.",function(){s.find("#find")[0].focus()})}var s=e.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){e.focus();_.done(e,t);e.undoManager.add()},onSubmit:function(n){var i,u,l,c;n.preventDefault();u=s.find("#case").checked();c=s.find("#words").checked();l=s.find("#find").value();if(!l.length){_.done(e,t,false);s.statusbar.items().slice(1).disabled(true);return}if(r.text===l&&r.caseState===u&&r.wholeWord===c){if(!_.hasNext(e,t)){o();return}_.next(e,t);a();return}i=_.find(e,t,l,u,c);if(!i){o()}s.statusbar.items().slice(1).disabled(i===0);a();r={text:l,caseState:u,wholeWord:c}},buttons:[{text:"Find",subtype:"primary",onclick:function(){s.submit()}},{text:"Replace",disabled:true,onclick:function(){if(!_.replace(e,t,s.find("#replace").value())){s.statusbar.items().slice(1).disabled(true);t.set(-1);r={}}}},{text:"Replace all",disabled:true,onclick:function(){_.replace(e,t,s.find("#replace").value(),true,true);s.statusbar.items().slice(1).disabled(true);r={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:true,onclick:function(){_.prev(e,t);a()}},{text:"Next",name:"next",disabled:true,onclick:function(){_.next(e,t);a()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:i},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})};var C={open:T};var k=function(e,t){e.addCommand("SearchReplace",function(){C.open(e,t)})};var S={register:k};var E=function(e,t){return function(){C.open(e,t)}};var P=function(e,t){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:E(e,t),separator:"before",context:"edit"});e.addButton("searchreplace",{tooltip:"Find and replace",onclick:E(e,t)});e.shortcuts.add("Meta+F","",E(e,t))};var O={register:P};t.add("searchreplace",function(t){var n=e(-1);S.register(t,n);O.register(t,n);return x.get(t,n)});function M(){}return M}()})();(function(){var e=function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");var t=function(){};var n=function(e){return function(){return e()}};var r=function(e,t){return function(){return e(t.apply(null,arguments))}};var i=function(e){return function(){return e}};var a=function(e){return e};var o=function(e,t){return e===t};var s=function(e){var t=new Array(arguments.length-1);for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}return function(){var n=new Array(arguments.length);for(var r=0;r<n.length;r++){n[r]=arguments[r]}var i=t.concat(n);return e.apply(null,i)}};var u=function(e){return function(){return!e.apply(null,arguments)}};var l=function(e){return function(){throw new Error(e)}};var c=function(e){return e()};var f=function(e){e()};var d=i(false);var h=i(true);var v={noop:t,noarg:n,compose:r,constant:i,identity:a,tripleEquals:o,curry:s,not:u,die:l,apply:c,call:f,never:d,always:h};var p=v.never;var g=v.always;var m=function(){return y};var y=function(){var e=function(e){return e.isNone()};var t=function(e){return e()};var n=function(e){return e};var r=function(){};var i={fold:function(e,t){return e()},is:p,isSome:p,isNone:g,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:n,orThunk:t,map:m,ap:m,each:r,bind:m,flatten:m,exists:p,forall:g,filter:m,equals:e,equals_:e,toArray:function(){return[]},toString:v.constant("none()")};if(Object.freeze){Object.freeze(i)}return i}();var b=function(e){var t=function(){return e};var n=function(){return a};var r=function(t){return b(t(e))};var i=function(t){return t(e)};var a={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:g,isNone:p,getOr:t,getOrThunk:t,getOrDie:t,or:n,orThunk:n,map:r,ap:function(t){return t.fold(m,function(t){return b(t(e))})},each:function(t){t(e)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(e)?a:y},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(p,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return a};var _=function(e){return e===null||e===undefined?y:b(e)};var w={some:b,none:m,from:_};var x=function(){var e=Array.prototype.indexOf;var t=function(t,n){return e.call(t,n)};var n=function(e,t){return j(e,t)};return e===undefined?n:t}();var T=function(e,t){var n=x(e,t);return n===-1?w.none():w.some(n)};var C=function(e,t){return x(e,t)>-1};var k=function(e,t){return B(e,t).isSome()};var S=function(e,t){var n=[];for(var r=0;r<e;r++){n.push(t(r))}return n};var E=function(e,t){var n=[];for(var r=0;r<e.length;r+=t){var i=e.slice(r,r+t);n.push(i)}return n};var P=function(e,t){var n=e.length;var r=new Array(n);for(var i=0;i<n;i++){var a=e[i];r[i]=t(a,i,e)}return r};var O=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];t(i,n,e)}};var M=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];t(r,n,e)}};var A=function(e,t){var n=[];var r=[];for(var i=0,a=e.length;i<a;i++){var o=e[i];var s=t(o,i,e)?n:r;s.push(o)}return{pass:n,fail:r}};var N=function(e,t){var n=[];for(var r=0,i=e.length;r<i;r++){var a=e[r];if(t(a,r,e)){n.push(a)}}return n};var R=function(e,t){if(e.length===0){return[]}else{var n=t(e[0]);var r=[];var i=[];for(var a=0,o=e.length;a<o;a++){var s=e[a];var u=t(s);if(u!==n){r.push(i);i=[]}n=u;i.push(s)}if(i.length!==0){r.push(i)}return r}};var D=function(e,t,n){M(e,function(e){n=t(n,e)});return n};var L=function(e,t,n){O(e,function(e){n=t(n,e)});return n};var I=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e)){return w.some(i)}}return w.none()};var B=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e)){return w.some(n)}}return w.none()};var j=function(e,t){for(var n=0,r=e.length;n<r;++n){if(e[n]===t){return n}}return-1};var F=Array.prototype.push;var H=function(e){var t=[];for(var n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n])){throw new Error("Arr.flatten item "+n+" was not an array, input: "+e)}F.apply(t,e[n])}return t};var z=function(e,t){var n=P(e,t);return H(n)};var U=function(e,t){for(var n=0,r=e.length;n<r;++n){var i=e[n];if(t(i,n,e)!==true){return false}}return true};var V=function(e,t){return e.length===t.length&&U(e,function(e,n){return e===t[n]})};var W=Array.prototype.slice;var q=function(e){var t=W.call(e,0);t.reverse();return t};var Y=function(e,t){return N(e,function(e){return!C(t,e)})};var K=function(e,t){var n={};for(var r=0,i=e.length;r<i;r++){var a=e[r];n[String(a)]=t(a,r)}return n};var $=function(e){return[e]};var G=function(e,t){var n=W.call(e,0);n.sort(t);return n};var X=function(e){return e.length===0?w.none():w.some(e[0])};var Z=function(e){return e.length===0?w.none():w.some(e[e.length-1])};var J={map:P,each:O,eachr:M,partition:A,filter:N,groupBy:R,indexOf:T,foldr:D,foldl:L,find:I,findIndex:B,flatten:H,bind:z,forall:U,exists:k,contains:C,equal:V,reverse:q,chunk:E,difference:Y,mapToObject:K,pure:$,sort:G,range:S,head:X,last:Z};var Q=function(){var e=Object.keys;var t=function(e){var t=[];for(var n in e){if(e.hasOwnProperty(n)){t.push(n)}}return t};return e===undefined?t:e}();var ee=function(e,t){var n=Q(e);for(var r=0,i=n.length;r<i;r++){var a=n[r];var o=e[a];t(o,a,e)}};var te=function(e,t){return ne(e,function(e,n,r){return{k:n,v:t(e,n,r)}})};var ne=function(e,t){var n={};ee(e,function(r,i){var a=t(r,i,e);n[a.k]=a.v});return n};var re=function(e,t){var n={};var r={};ee(e,function(e,i){var a=t(e,i)?n:r;a[i]=e});return{t:n,f:r}};var ie=function(e,t){var n=[];ee(e,function(e,r){n.push(t(e,r))});return n};var ae=function(e,t){var n=Q(e);for(var r=0,i=n.length;r<i;r++){var a=n[r];var o=e[a];if(t(o,a,e)){return w.some(o)}}return w.none()};var oe=function(e){return ie(e,function(e){return e})};var se=function(e){return oe(e).length};var ue={bifilter:re,each:ee,map:te,mapToArray:ie,tupleMap:ne,find:ae,keys:Q,values:oe,size:se};function le(){var e=arguments;return function(){var t=new Array(arguments.length);for(var n=0;n<t.length;n++){t[n]=arguments[n]}if(e.length!==t.length){throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments")}var r={};J.each(e,function(e,n){r[e]=v.constant(t[n])});return r}}var ce=function(e){if(e===null){return"null"}var t=typeof e;if(t==="object"&&Array.prototype.isPrototypeOf(e)){return"array"}if(t==="object"&&String.prototype.isPrototypeOf(e)){return"string"}return t};var fe=function(e){return function(t){return ce(t)===e}};var de={isString:fe("string"),isObject:fe("object"),isArray:fe("array"),isNull:fe("null"),isBoolean:fe("boolean"),isUndefined:fe("undefined"),isFunction:fe("function"),isNumber:fe("number")};var he=function(e){return e.slice(0).sort()};var ve=function(e,t){throw new Error("All required keys ("+he(e).join(", ")+") were not specified. Specified keys were: "+he(t).join(", ")+".")};var pe=function(e){throw new Error("Unsupported keys for object: "+he(e).join(", "))};var ge=function(e,t){if(!de.isArray(t)){throw new Error("The "+e+" fields must be an array. Was: "+t+".")}J.each(t,function(t){if(!de.isString(t)){throw new Error("The value "+t+" in the "+e+" fields was not a string.")}})};var me=function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+he(e).join(", ")+") were not.")};var ye=function(e){var t=he(e);var n=J.find(t,function(e,n){return n<t.length-1&&e===t[n+1]});n.each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})};var be={sort:he,reqMessage:ve,unsuppMessage:pe,validateStrArr:ge,invalidTypeMessage:me,checkDupes:ye};function _e(e,t){var n=e.concat(t);if(n.length===0){throw new Error("You must specify at least one required or optional field.")}be.validateStrArr("required",e);be.validateStrArr("optional",t);be.checkDupes(n);return function(r){var i=ue.keys(r);var a=J.forall(e,function(e){return J.contains(i,e)});if(!a){be.reqMessage(e,i)}var o=J.filter(i,function(e){return!J.contains(n,e)});if(o.length>0){be.unsuppMessage(o)}var s={};J.each(e,function(e){s[e]=v.constant(r[e])});J.each(t,function(e){s[e]=v.constant(Object.prototype.hasOwnProperty.call(r,e)?w.some(r[e]):w.none())});return s}}var we={immutable:le,immutableBag:_e};var xe=we.immutable("width","height");var Te=we.immutable("rows","columns");var Ce=we.immutable("row","column");var ke=we.immutable("x","y");var Se=we.immutable("element","rowspan","colspan");var Ee=we.immutable("element","rowspan","colspan","isNew");var Pe=we.immutable("element","rowspan","colspan","row","column");var Oe=we.immutable("element","cells","section");var Me=we.immutable("element","isNew");var Ae=we.immutable("element","cells","section","isNew");var Ne=we.immutable("cells","section");var Re=we.immutable("details","section");var De=we.immutable("startRow","startCol","finishRow","finishCol");var Le={dimensions:xe,grid:Te,address:Ce,coords:ke,extended:Pe,detail:Se,detailnew:Ee,rowdata:Oe,elementnew:Me,rowdatanew:Ae,rowcells:Ne,rowdetails:Re,bounds:De};var Ie=function(e,t){var n=t||document;var r=n.createElement("div");r.innerHTML=e;if(!r.hasChildNodes()||r.childNodes.length>1){console.error("HTML does not have a single root node",e);throw"HTML must have a single root node"}return Fe(r.childNodes[0])};var Be=function(e,t){var n=t||document;var r=n.createElement(e);return Fe(r)};var je=function(e,t){var n=t||document;var r=n.createTextNode(e);return Fe(r)};var Fe=function(e){if(e===null||e===undefined){throw new Error("Node cannot be null or undefined")}return{dom:v.constant(e)}};var He=function(e,t,n){return w.from(e.dom().elementFromPoint(t,n)).map(Fe)};var ze={fromHtml:Ie,fromTag:Be,fromText:je,fromDom:Fe,fromPoint:He};var Ue={ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12};var Ve=Ue.ELEMENT;var We=Ue.DOCUMENT;var qe=function(e,t){var n=e.dom();if(n.nodeType!==Ve){return false}else if(n.matches!==undefined){return n.matches(t)}else if(n.msMatchesSelector!==undefined){return n.msMatchesSelector(t)}else if(n.webkitMatchesSelector!==undefined){return n.webkitMatchesSelector(t)}else if(n.mozMatchesSelector!==undefined){return n.mozMatchesSelector(t)}else{throw new Error("Browser lacks native selectors")}};var Ye=function(e){return e.nodeType!==Ve&&e.nodeType!==We||e.childElementCount===0};var Ke=function(e,t){var n=t===undefined?document:t.dom();return Ye(n)?[]:J.map(n.querySelectorAll(e),ze.fromDom)};var $e=function(e,t){var n=t===undefined?document:t.dom();return Ye(n)?w.none():w.from(n.querySelector(e)).map(ze.fromDom)};var Ge={all:Ke,is:qe,one:$e};var Xe=function(e,t){var n=[];var r=function(e){n.push(e);return t(e)};var i=t(e);do{i=i.bind(r)}while(i.isSome());return n};var Ze={toArray:Xe};var Je=typeof window!=="undefined"?window:Function("return this;")();var Qe=function(e,t){var n=t!==undefined&&t!==null?t:Je;for(var r=0;r<e.length&&n!==undefined&&n!==null;++r){n=n[e[r]]}return n};var et=function(e,t){var n=e.split(".");return Qe(n,t)};var tt=function(e,t){if(e[t]===undefined||e[t]===null){e[t]={}}return e[t]};var nt=function(e,t){var n=t!==undefined?t:Je;for(var r=0;r<e.length;++r){n=tt(n,e[r])}return n};var rt=function(e,t){var n=e.split(".");return nt(n,t)};var it={path:Qe,resolve:et,forge:nt,namespace:rt};var at=function(e,t){return it.resolve(e,t)};var ot=function(e,t){var n=at(e,t);if(n===undefined||n===null){throw e+" not available on this browser"}return n};var st={getOrDie:ot};var ut=function(){var e=st.getOrDie("Node");return e};var lt=function(e,t,n){return(e.compareDocumentPosition(t)&n)!==0};var ct=function(e,t){return lt(e,t,ut().DOCUMENT_POSITION_PRECEDING)};var ft=function(e,t){return lt(e,t,ut().DOCUMENT_POSITION_CONTAINED_BY)};var dt={documentPositionPreceding:ct,documentPositionContainedBy:ft};var ht=function(e){var t=false;var n;return function(){if(!t){t=true;n=e.apply(null,arguments)}return n}};var vt={cached:ht};var pt=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t)){return r}}return undefined};var gt=function(e,t){var n=pt(e,t);if(!n){return{major:0,minor:0}}var r=function(e){return Number(t.replace(n,"$"+e))};return bt(r(1),r(2))};var mt=function(e,t){var n=String(t).toLowerCase();if(e.length===0){return yt()}return gt(e,n)};var yt=function(){return bt(0,0)};var bt=function(e,t){return{major:e,minor:t}};var _t={nu:bt,detect:mt,unknown:yt};var wt="Edge";var xt="Chrome";var Tt="IE";var Ct="Opera";var kt="Firefox";var St="Safari";var Et=function(e,t){return function(){return t===e}};var Pt=function(){return Ot({current:undefined,version:_t.unknown()})};var Ot=function(e){var t=e.current;var n=e.version;return{current:t,version:n,isEdge:Et(wt,t),isChrome:Et(xt,t),isIE:Et(Tt,t),isOpera:Et(Ct,t),isFirefox:Et(kt,t),isSafari:Et(St,t)}};var Mt={unknown:Pt,nu:Ot,edge:v.constant(wt),chrome:v.constant(xt),ie:v.constant(Tt),opera:v.constant(Ct),firefox:v.constant(kt),safari:v.constant(St)};var At="Windows";var Nt="iOS";var Rt="Android";var Dt="Linux";var Lt="OSX";var It="Solaris";var Bt="FreeBSD";var jt=function(e,t){return function(){return t===e}};var Ft=function(){return Ht({current:undefined,version:_t.unknown()})};var Ht=function(e){var t=e.current;var n=e.version;return{current:t,version:n,isWindows:jt(At,t),isiOS:jt(Nt,t),isAndroid:jt(Rt,t),isOSX:jt(Lt,t),isLinux:jt(Dt,t),isSolaris:jt(It,t),isFreeBSD:jt(Bt,t)}};var zt={unknown:Ft,nu:Ht,windows:v.constant(At),ios:v.constant(Nt),android:v.constant(Rt),linux:v.constant(Dt),osx:v.constant(Lt),solaris:v.constant(It),freebsd:v.constant(Bt)};function Ut(e,t,n){var r=e.isiOS()&&/ipad/i.test(n)===true;var i=e.isiOS()&&!r;var a=e.isAndroid()&&e.version.major===3;var o=e.isAndroid()&&e.version.major===4;var s=r||a||o&&/mobile/i.test(n)===true;var u=e.isiOS()||e.isAndroid();var l=u&&!s;var c=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===false;return{isiPad:v.constant(r),isiPhone:v.constant(i),isTablet:v.constant(s),isPhone:v.constant(l),isTouch:v.constant(u),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:v.constant(c)}}var Vt=function(e,t){var n=String(t).toLowerCase();return J.find(e,function(e){return e.search(n)})};var Wt=function(e,t){return Vt(e,t).map(function(e){var n=_t.detect(e.versionRegexes,t);return{current:e.name,version:n}})};var qt=function(e,t){return Vt(e,t).map(function(e){var n=_t.detect(e.versionRegexes,t);return{current:e.name,version:n}})};var Yt={detectBrowser:Wt,detectOs:qt};var Kt=function(e,t){return t+e};var $t=function(e,t){return e+t};var Gt=function(e,t){return e.substring(t)};var Xt=function(e,t){return e.substring(0,e.length-t)};var Zt={addToStart:Kt,addToEnd:$t,removeFromStart:Gt,removeFromEnd:Xt};var Jt=function(e,t){return e.substr(0,t)};var Qt=function(e,t){return e.substr(e.length-t,e.length)};var en=function(e){return e===""?w.none():w.some(e.substr(0,1))};var tn=function(e){return e===""?w.none():w.some(e.substring(1))};var nn={first:Jt,last:Qt,head:en,tail:tn};var rn=function(e,t,n){if(t===""){return true}if(e.length<t.length){return false}var r=e.substr(n,n+t.length);return r===t};var an=function(e,t){var n=function(e){var t=typeof e;return t==="string"||t==="number"};return e.replace(/\${([^{}]*)}/g,function(e,r){var i=t[r];return n(i)?i:e})};var on=function(e,t){return dn(e,t)?Zt.removeFromStart(e,t.length):e};var sn=function(e,t){return hn(e,t)?Zt.removeFromEnd(e,t.length):e};var un=function(e,t){return dn(e,t)?e:Zt.addToStart(e,t)};var ln=function(e,t){return hn(e,t)?e:Zt.addToEnd(e,t)};var cn=function(e,t){return e.indexOf(t)!==-1};var fn=function(e){return nn.head(e).bind(function(t){return nn.tail(e).map(function(e){return t.toUpperCase()+e})}).getOr(e)};var dn=function(e,t){return rn(e,t,0)};var hn=function(e,t){return rn(e,t,e.length-t.length)};var vn=function(e){return e.replace(/^\s+|\s+$/g,"")};var pn=function(e){return e.replace(/^\s+/g,"")};var gn=function(e){return e.replace(/\s+$/g,"")};var mn={supplant:an,startsWith:dn,removeLeading:on,removeTrailing:sn,ensureLeading:un,ensureTrailing:ln,endsWith:hn,contains:cn,trim:vn,lTrim:pn,rTrim:gn,capitalize:fn};var yn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/;var bn=function(e){return function(t){return mn.contains(t,e)}};var _n=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){var t=mn.contains(e,"edge/")&&mn.contains(e,"chrome")&&mn.contains(e,"safari")&&mn.contains(e,"applewebkit");return t}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,yn],search:function(e){return mn.contains(e,"chrome")&&!mn.contains(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return mn.contains(e,"msie")||mn.contains(e,"trident")}},{name:"Opera",versionRegexes:[yn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:bn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:bn("firefox")},{name:"Safari",versionRegexes:[yn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(mn.contains(e,"safari")||mn.contains(e,"mobile/"))&&mn.contains(e,"applewebkit")}}];var wn=[{name:"Windows",search:bn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return mn.contains(e,"iphone")||mn.contains(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:bn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:bn("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:bn("linux"),versionRegexes:[]},{name:"Solaris",search:bn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:bn("freebsd"),versionRegexes:[]}];var xn={browsers:v.constant(_n),oses:v.constant(wn)};var Tn=function(e){var t=xn.browsers();var n=xn.oses();var r=Yt.detectBrowser(t,e).fold(Mt.unknown,Mt.nu);var i=Yt.detectOs(n,e).fold(zt.unknown,zt.nu);var a=Ut(i,r,e);return{browser:r,os:i,deviceType:a}};var Cn={detect:Tn};var kn=vt.cached(function(){var e=navigator.userAgent;return Cn.detect(e)});var Sn={detect:kn};var En=function(e,t){return e.dom()===t.dom()};var Pn=function(e,t){return e.dom().isEqualNode(t.dom())};var On=function(e,t){return J.exists(t,v.curry(En,e))};var Mn=function(e,t){var n=e.dom(),r=t.dom();return n===r?false:n.contains(r)};var An=function(e,t){return dt.documentPositionContainedBy(e.dom(),t.dom())};var Nn=Sn.detect().browser;var Rn=Nn.isIE()?An:Mn;var Dn={eq:En,isEqualNode:Pn,member:On,contains:Rn,is:Ge.is};var Ln=function(e){return ze.fromDom(e.dom().ownerDocument)};var In=function(e){var t=Ln(e);return ze.fromDom(t.dom().documentElement)};var Bn=function(e){var t=e.dom();var n=t.ownerDocument.defaultView;return ze.fromDom(n)};var jn=function(e){var t=e.dom();return w.from(t.parentNode).map(ze.fromDom)};var Fn=function(e){return jn(e).bind(function(t){var n=Kn(t);return J.findIndex(n,function(t){return Dn.eq(e,t)})})};var Hn=function(e,t){var n=de.isFunction(t)?t:v.constant(false);var r=e.dom();var i=[];while(r.parentNode!==null&&r.parentNode!==undefined){var a=r.parentNode;var o=ze.fromDom(a);i.push(o);if(n(o)===true){break}else{r=a}}return i};var zn=function(e){var t=function(t){return J.filter(t,function(t){return!Dn.eq(e,t)})};return jn(e).map(Kn).map(t).getOr([])};var Un=function(e){var t=e.dom();return w.from(t.offsetParent).map(ze.fromDom)};var Vn=function(e){var t=e.dom();return w.from(t.previousSibling).map(ze.fromDom)};var Wn=function(e){var t=e.dom();return w.from(t.nextSibling).map(ze.fromDom)};var qn=function(e){return J.reverse(Ze.toArray(e,Vn))};var Yn=function(e){return Ze.toArray(e,Wn)};var Kn=function(e){var t=e.dom();return J.map(t.childNodes,ze.fromDom)};var $n=function(e,t){var n=e.dom().childNodes;return w.from(n[t]).map(ze.fromDom)};var Gn=function(e){return $n(e,0)};var Xn=function(e){return $n(e,e.dom().childNodes.length-1)};var Zn=function(e){return e.dom().childNodes.length};var Jn=function(e){return e.dom().hasChildNodes()};var Qn=we.immutable("element","offset");var er=function(e,t){var n=Kn(e);return n.length>0&&t<n.length?Qn(n[t],0):Qn(e,t)};var tr={owner:Ln,defaultView:Bn,documentElement:In,parent:jn,findIndex:Fn,parents:Hn,siblings:zn,prevSibling:Vn,offsetParent:Un,prevSiblings:qn,nextSibling:Wn,nextSiblings:Yn,children:Kn,child:$n,firstChild:Gn,lastChild:Xn,childNodesCount:Zn,hasChildNodes:Jn,leaf:er};var nr=function(e,t){return rr(e,t,v.constant(true))};var rr=function(e,t,n){return J.bind(tr.children(e),function(e){return Ge.is(e,t)?n(e)?[e]:[]:rr(e,t,n)})};var ir={firstLayer:nr,filterFirstLayer:rr};var ar=function(e){var t=e.dom().nodeName;return t.toLowerCase()};var or=function(e){return e.dom().nodeType};var sr=function(e){return e.dom().nodeValue};var ur=function(e){return function(t){return or(t)===e}};var lr=function(e){return or(e)===Ue.COMMENT||ar(e)==="#comment"};var cr=ur(Ue.ELEMENT);var fr=ur(Ue.TEXT);var dr=ur(Ue.DOCUMENT);var hr={name:ar,type:or,value:sr,isElement:cr,isText:fr,isDocument:dr,isComment:lr};var vr=function(e,t,n){if(de.isString(n)||de.isBoolean(n)||de.isNumber(n)){e.setAttribute(t,n+"")}else{console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e);throw new Error("Attribute value was not simple")}};var pr=function(e,t,n){vr(e.dom(),t,n)};var gr=function(e,t){var n=e.dom();ue.each(t,function(e,t){vr(n,t,e)})};var mr=function(e,t){var n=e.dom().getAttribute(t);return n===null?undefined:n};var yr=function(e,t){var n=e.dom();return n&&n.hasAttribute?n.hasAttribute(t):false};var br=function(e,t){e.dom().removeAttribute(t)};var _r=function(e){var t=e.dom().attributes;return t===undefined||t===null||t.length===0};var wr=function(e){return J.foldl(e.dom().attributes,function(e,t){e[t.name]=t.value;return e},{})};var xr=function(e,t,n){if(yr(e,n)&&!yr(t,n)){pr(t,n,mr(e,n))}};var Tr=function(e,t,n){if(!hr.isElement(e)||!hr.isElement(t)){return}J.each(n,function(n){xr(e,t,n)})};var Cr={clone:wr,set:pr,setAll:gr,get:mr,has:yr,remove:br,hasNone:_r,transfer:Tr};var kr=function(e){var t=hr.isText(e)?e.dom().parentNode:e.dom();return t!==undefined&&t!==null&&t.ownerDocument.body.contains(t)};var Sr=vt.cached(function(){return Er(ze.fromDom(document))});var Er=function(e){var t=e.dom().body;if(t===null||t===undefined){throw"Body is not available yet"}return ze.fromDom(t)};var Pr={body:Sr,getBody:Er,inBody:kr};var Or=function(e){return Rr(Pr.body(),e)};var Mr=function(e,t,n){return J.filter(tr.parents(e,n),t)};var Ar=function(e,t){return J.filter(tr.siblings(e),t)};var Nr=function(e,t){return J.filter(tr.children(e),t)};var Rr=function(e,t){var n=[];J.each(tr.children(e),function(e){if(t(e)){n=n.concat([e])}n=n.concat(Rr(e,t))});return n};var Dr={all:Or,ancestors:Mr,siblings:Ar,children:Nr,descendants:Rr};var Lr=function(e){return Ge.all(e)};var Ir=function(e,t,n){return Dr.ancestors(e,function(e){return Ge.is(e,t)},n)};var Br=function(e,t){return Dr.siblings(e,function(e){return Ge.is(e,t)})};var jr=function(e,t){return Dr.children(e,function(e){return Ge.is(e,t)})};var Fr=function(e,t){return Ge.all(t,e)};var Hr={all:Lr,ancestors:Ir,siblings:Br,children:jr,descendants:Fr};function zr(e,t,n,r,i){return e(n,r)?w.some(n):de.isFunction(i)&&i(n)?w.none():t(n,r,i)}var Ur=function(e){return Kr(Pr.body(),e)};var Vr=function(e,t,n){var r=e.dom();var i=de.isFunction(n)?n:v.constant(false);while(r.parentNode){r=r.parentNode;var a=ze.fromDom(r);if(t(a)){return w.some(a)}else if(i(a)){break}}return w.none()};var Wr=function(e,t,n){var r=function(e){return t(e)};return zr(r,Vr,e,t,n)};var qr=function(e,t){var n=e.dom();if(!n.parentNode){return w.none()}return Yr(ze.fromDom(n.parentNode),function(n){return!Dn.eq(e,n)&&t(n)})};var Yr=function(e,t){var n=J.find(e.dom().childNodes,v.compose(t,ze.fromDom));return n.map(ze.fromDom)};var Kr=function(e,t){var n=function(e){for(var r=0;r<e.childNodes.length;r++){if(t(ze.fromDom(e.childNodes[r]))){return w.some(ze.fromDom(e.childNodes[r]))}var i=n(e.childNodes[r]);if(i.isSome()){return i}}return w.none()};return n(e.dom())};var $r={first:Ur,ancestor:Vr,closest:Wr,sibling:qr,child:Yr,descendant:Kr};var Gr=function(e){return Ge.one(e)};var Xr=function(e,t,n){return $r.ancestor(e,function(e){return Ge.is(e,t)},n)};var Zr=function(e,t){return $r.sibling(e,function(e){return Ge.is(e,t)})};var Jr=function(e,t){return $r.child(e,function(e){return Ge.is(e,t)})};var Qr=function(e,t){return Ge.one(t,e)};var ei=function(e,t,n){return zr(Ge.is,Xr,e,t,n)};var ti={first:Gr,ancestor:Xr,sibling:Zr,child:Jr,descendant:Qr,closest:ei};var ni=function(e,t,n){var r=n!==undefined?n:v.constant(false);if(r(t)){return w.none()}if(J.contains(e,hr.name(t))){return w.some(t)}var i=function(e){return Ge.is(e,"table")||r(e)};return ti.ancestor(t,e.join(","),i)};var ri=function(e,t){return ni(["td","th"],e,t)};var ii=function(e){return ir.firstLayer(e,"th,td")};var ai=function(e,t){return ni(["caption","tr","tbody","tfoot","thead"],e,t)};var oi=function(e,t){return tr.parent(t).map(function(t){return Hr.children(t,e)})};var si=v.curry(oi,"th,td");var ui=v.curry(oi,"tr");var li=function(e){return ti.descendant(e,"th,td")};var ci=function(e,t){return ti.closest(e,"table",t)};var fi=function(e,t){return ni(["tr"],e,t)};var di=function(e){return ir.firstLayer(e,"tr")};var hi=function(e,t){return parseInt(Cr.get(e,t),10)};var vi=function(e,t,n){var r=hi(e,t);var i=hi(e,n);return Le.grid(r,i)};var pi={cell:ri,firstCell:li,cells:ii,neighbourCells:si,table:ci,row:fi,rows:di,notCell:ai,neighbourRows:ui,attr:hi,grid:vi};var gi=function(e){var t=pi.rows(e);return J.map(t,function(e){var t=e;var n=tr.parent(t);var r=n.bind(function(e){var t=hr.name(e);return t==="tfoot"||t==="thead"||t==="tbody"?t:"tbody"});var i=J.map(pi.cells(e),function(e){var t=Cr.has(e,"rowspan")?parseInt(Cr.get(e,"rowspan"),10):1;var n=Cr.has(e,"colspan")?parseInt(Cr.get(e,"colspan"),10):1;return Le.detail(e,t,n)});return Le.rowdata(t,i,r)})};var mi=function(e,t){return J.map(e,function(e){var n=J.map(pi.cells(e),function(e){var t=Cr.has(e,"rowspan")?parseInt(Cr.get(e,"rowspan"),10):1;var n=Cr.has(e,"colspan")?parseInt(Cr.get(e,"colspan"),10):1;return Le.detail(e,t,n)});return Le.rowdata(e,n,t.section())})};var yi={fromTable:gi,fromPastedRows:mi};var bi=function(e,t){return e+","+t};var _i=function(e,t,n){var r=e.access()[bi(t,n)];return r!==undefined?w.some(r):w.none()};var wi=function(e,t,n){var r=xi(e,function(e){return n(t,e.element())});return r.length>0?w.some(r[0]):w.none()};var xi=function(e,t){var n=J.bind(e.all(),function(e){return e.cells()});return J.filter(n,t)};var Ti=function(e){var t={};var n=[];var r=e.length;var i=0;J.each(e,function(e,r){var a=[];J.each(e.cells(),function(e,n){var o=0;while(t[bi(r,o)]!==undefined){o++}var s=Le.extended(e.element(),e.rowspan(),e.colspan(),r,o);for(var u=0;u<e.colspan();u++){for(var l=0;l<e.rowspan();l++){var c=r+l;var f=o+u;var d=bi(c,f);t[d]=s;i=Math.max(i,f+1)}}a.push(s)});n.push(Le.rowdata(e.element(),a,e.section()))});var a=Le.grid(r,i);return{grid:v.constant(a),access:v.constant(t),all:v.constant(n)}};var Ci=function(e){var t=J.map(e.all(),function(e){return e.cells()});return J.flatten(t)};var ki={generate:Ti,getAt:_i,findItem:wi,filterItems:xi,justCells:Ci};var Si=function(e){return e.style!==undefined};var Ei={isSupported:Si};var Pi=function(e,t,n){if(!de.isString(n)){console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e);throw new Error("CSS value must be a string: "+n)}if(Ei.isSupported(e)){e.style.setProperty(t,n)}};var Oi=function(e,t){if(Ei.isSupported(e)){e.style.removeProperty(t)}};var Mi=function(e,t,n){var r=e.dom();Pi(r,t,n)};var Ai=function(e,t){var n=e.dom();ue.each(t,function(e,t){Pi(n,t,e)})};var Ni=function(e,t){var n=e.dom();ue.each(t,function(e,t){e.fold(function(){Oi(n,t)},function(e){Pi(n,t,e)})})};var Ri=function(e,t){var n=e.dom();var r=window.getComputedStyle(n);var i=r.getPropertyValue(t);var a=i===""&&!Pr.inBody(e)?Di(n,t):i;return a===null?undefined:a};var Di=function(e,t){return Ei.isSupported(e)?e.style.getPropertyValue(t):""};var Li=function(e,t){var n=e.dom();var r=Di(n,t);return w.from(r).filter(function(e){return e.length>0})};var Ii=function(e){var t={};var n=e.dom();if(Ei.isSupported(n)){for(var r=0;r<n.style.length;r++){var i=n.style.item(r);t[i]=n.style[i]}}return t};var Bi=function(e,t,n){var r=ze.fromTag(e);Mi(r,t,n);var i=Li(r,t);return i.isSome()};var ji=function(e,t){var n=e.dom();Oi(n,t);if(Cr.has(e,"style")&&mn.trim(Cr.get(e,"style"))===""){Cr.remove(e,"style")}};var Fi=function(e,t){var n=Cr.get(e,"style");var r=t(e);var i=n===undefined?Cr.remove:Cr.set;i(e,"style",n);return r};var Hi=function(e,t){var n=e.dom();var r=t.dom();if(Ei.isSupported(n)&&Ei.isSupported(r)){r.style.cssText=n.style.cssText}};var zi=function(e){return e.dom().offsetWidth};var Ui=function(e,t,n){Li(e,n).each(function(e){if(Li(t,n).isNone()){Mi(t,n,e)}})};var Vi=function(e,t,n){if(!hr.isElement(e)||!hr.isElement(t)){return}J.each(n,function(n){Ui(e,t,n)})};var Wi={copy:Hi,set:Mi,preserve:Fi,setAll:Ai,setOptions:Ni,remove:ji,get:Ri,getRaw:Li,getAllRaw:Ii,isValidValue:Bi,reflow:zi,transfer:Vi};var qi=function(e,t){var n=tr.parent(e);n.each(function(n){n.dom().insertBefore(t.dom(),e.dom())})};var Yi=function(e,t){var n=tr.nextSibling(e);n.fold(function(){var n=tr.parent(e);n.each(function(e){$i(e,t)})},function(e){qi(e,t)})};var Ki=function(e,t){var n=tr.firstChild(e);n.fold(function(){$i(e,t)},function(n){e.dom().insertBefore(t.dom(),n.dom())})};var $i=function(e,t){e.dom().appendChild(t.dom())};var Gi=function(e,t,n){tr.child(e,n).fold(function(){$i(e,t)},function(e){qi(e,t)})};var Xi=function(e,t){qi(e,t);$i(t,e)};var Zi={before:qi,after:Yi,prepend:Ki,append:$i,appendAt:Gi,wrap:Xi};var Ji=function(e,t){J.each(t,function(t){Zi.before(e,t)})};var Qi=function(e,t){J.each(t,function(n,r){var i=r===0?e:t[r-1];Zi.after(i,n)})};var ea=function(e,t){J.each(t.slice().reverse(),function(t){Zi.prepend(e,t)})};var ta=function(e,t){J.each(t,function(t){Zi.append(e,t)})};var na={before:Ji,after:Qi,prepend:ea,append:ta};var ra=function(e){e.dom().textContent="";J.each(tr.children(e),function(e){ia(e)})};var ia=function(e){var t=e.dom();if(t.parentNode!==null){t.parentNode.removeChild(t)}};var aa=function(e){var t=tr.children(e);if(t.length>0){na.before(e,t)}ia(e)};var oa={empty:ra,remove:ia,unwrap:aa};var sa=we.immutable("minRow","minCol","maxRow","maxCol");var ua=function(e,t){var n=e.grid().columns();var r=e.grid().rows();var i=r;var a=n;var o=0;var s=0;ue.each(e.access(),function(e){if(t(e)){var n=e.row();var r=n+e.rowspan()-1;var u=e.column();var l=u+e.colspan()-1;if(n<i){i=n}else if(r>o){o=r}if(u<a){a=u}else if(l>s){s=l}}});return sa(i,a,o,s)};var la=function(e,t,n){var r=e[n].element();var i=ze.fromTag("td");Zi.append(i,ze.fromTag("br"));var a=t?Zi.append:Zi.prepend;a(r,i)};var ca=function(e,t,n,r){var i=t.grid().columns();var a=t.grid().rows();for(var o=0;o<a;o++){var s=false;for(var u=0;u<i;u++){if(!(o<n.minRow()||o>n.maxRow()||u<n.minCol()||u>n.maxCol())){var l=ki.getAt(t,o,u).filter(r).isNone();if(l){la(e,s,o)}else{s=true}}}}};var fa=function(e,t){var n=J.filter(ir.firstLayer(e,"tr"),function(e){return e.dom().childElementCount===0});J.each(n,oa.remove);if(t.minCol()===t.maxCol()||t.minRow()===t.maxRow()){J.each(ir.firstLayer(e,"th,td"),function(e){Cr.remove(e,"rowspan");Cr.remove(e,"colspan")})}Cr.remove(e,"width");Cr.remove(e,"height");Wi.remove(e,"width");Wi.remove(e,"height")};var da=function(e,t){var n=function(e){return Ge.is(e.element(),t)};var r=yi.fromTable(e);var i=ki.generate(r);var a=ua(i,n);var o="th:not("+t+")"+",td:not("+t+")";var s=ir.filterFirstLayer(e,"th,td",function(e){return Ge.is(e,o)});J.each(s,oa.remove);ca(r,i,a,n);fa(e,a);return e};var ha={extract:da};var va=function(e,t){return ze.fromDom(e.dom().cloneNode(t))};var pa=function(e){return va(e,false)};var ga=function(e){return va(e,true)};var ma=function(e,t){var n=ze.fromTag(t);var r=Cr.clone(e);Cr.setAll(n,r);return n};var ya=function(e,t){var n=ma(e,t);var r=tr.children(ga(e));na.append(n,r);return n};var ba=function(e,t){var n=ma(e,t);Zi.before(e,n);var r=tr.children(e);na.append(n,r);oa.remove(e);return n};var _a={shallow:pa,shallowAs:ma,deep:ga,copy:ya,mutate:ba};function wa(e,t){var n=function(n){if(!e(n)){throw new Error("Can only get "+t+" value of a "+t+" node")}return o(n).getOr("")};var r=function(e){try{return i(e)}catch(e){return w.none()}};var i=function(t){return e(t)?w.from(t.dom().nodeValue):w.none()};var a=Sn.detect().browser;var o=a.isIE()&&a.version.major===10?r:i;var s=function(n,r){if(!e(n)){throw new Error("Can only set raw "+t+" value of a "+t+" node")}n.dom().nodeValue=r};return{get:n,getOption:o,set:s}}var xa=wa(hr.isText,"text");var Ta=function(e){return xa.get(e)};var Ca=function(e){return xa.getOption(e)};var ka=function(e,t){xa.set(e,t)};var Sa={get:Ta,getOption:Ca,set:ka};var Ea=function(e){return hr.name(e)==="img"?1:Sa.getOption(e).fold(function(){return tr.children(e).length},function(e){return e.length})};var Pa=function(e,t){return Ea(e)===t};var Oa=function(e,t){return t===0};var Ma="¬†";var Aa=function(e){return Sa.getOption(e).filter(function(e){return e.trim().length!==0||e.indexOf(Ma)>-1}).isSome()};var Na=["img","br"];var Ra=function(e){var t=Aa(e);return t||J.contains(Na,hr.name(e))};var Da={getEnd:Ea,isEnd:Pa,isStart:Oa,isCursorPosition:Ra};var La=function(e){return $r.descendant(e,Da.isCursorPosition)};var Ia=function(e){return Ba(e,Da.isCursorPosition)};var Ba=function(e,t){var n=function(e){var r=tr.children(e);for(var i=r.length-1;i>=0;i--){var a=r[i];if(t(a)){return w.some(a)}var o=n(a);if(o.isSome()){return o}}return w.none()};return n(e)};var ja={first:La,last:Ia};var Fa=function(){var e=ze.fromTag("td");Zi.append(e,ze.fromTag("br"));return e};var Ha=function(e,t,n){var r=_a.copy(e,t);ue.each(n,function(e,t){if(e===null){Cr.remove(r,t)}else{Cr.set(r,t,e)}});return r};var za=function(e){return e};var Ua=function(e){return function(){return ze.fromTag("tr",e.dom())}};var Va=function(e,t,n){var r=ja.first(e);return r.map(function(r){var i=n.join(",");var a=Hr.ancestors(r,i,function(t){return Dn.eq(t,e)});return J.foldr(a,function(e,t){var n=_a.shallow(t);Zi.append(e,n);return n},t)}).getOr(t)};var Wa=function(e,t,n){var r=function(t){var r=tr.owner(t.element());var i=ze.fromTag(hr.name(t.element()),r.dom());var a=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]);var o=a.length>0?Va(t.element(),i,a):i;Zi.append(o,ze.fromTag("br"));Wi.copy(t.element(),i);Wi.remove(i,"height");if(t.colspan()!==1){Wi.remove(t.element(),"width")}e(t.element(),i);return i};return{row:Ua(t),cell:r,replace:Ha,gap:Fa}};var qa=function(e){return{row:Ua(e),cell:Fa,replace:za,gap:Fa}};var Ya={cellOperations:Wa,paste:qa};var Ka=function(e,t){var n=t||document;var r=n.createElement("div");r.innerHTML=e;return tr.children(ze.fromDom(r))};var $a=function(e,t){return J.map(e,function(e){return ze.fromTag(e,t)})};var Ga=function(e,t){return J.map(e,function(e){return ze.fromText(e,t)})};var Xa=function(e){return J.map(e,ze.fromDom)};var Za={fromHtml:Ka,fromTags:$a,fromText:Ga,fromDom:Xa};var Ja=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Qa(){var e=function(e){return ze.fromDom(e.dom().cloneNode(false))};var t=function(e){if(!hr.isElement(e)){return false}if(hr.name(e)==="body"){return true}return J.contains(Ja,hr.name(e))};var n=function(e){if(!hr.isElement(e)){return false}return J.contains(["br","img","hr","input"],hr.name(e))};var r=function(e,t){return e.dom().compareDocumentPosition(t.dom())};var i=function(e,t){var n=Cr.clone(e);Cr.setAll(t,n)};return{up:v.constant({selector:ti.ancestor,closest:ti.closest,predicate:$r.ancestor,all:tr.parents}),down:v.constant({selector:Hr.descendants,predicate:Dr.descendants}),styles:v.constant({get:Wi.get,getRaw:Wi.getRaw,set:Wi.set,remove:Wi.remove}),attrs:v.constant({get:Cr.get,set:Cr.set,remove:Cr.remove,copyTo:i}),insert:v.constant({before:Zi.before,after:Zi.after,afterAll:na.after,append:Zi.append,appendAll:na.append,prepend:Zi.prepend,wrap:Zi.wrap}),remove:v.constant({unwrap:oa.unwrap,remove:oa.remove}),create:v.constant({nu:ze.fromTag,clone:e,text:ze.fromText}),query:v.constant({comparePosition:r,prevSibling:tr.prevSibling,nextSibling:tr.nextSibling}),property:v.constant({children:tr.children,name:hr.name,parent:tr.parent,isText:hr.isText,isComment:hr.isComment,isElement:hr.isElement,getText:Sa.get,setText:Sa.set,isBoundary:t,isEmptyTag:n}),eq:Dn.eq,is:Dn.is}}var eo=we.immutable("left","right");var to=function(e,t,n){var r=e.property().children(t);var i=J.findIndex(r,v.curry(e.eq,n));return i.map(function(e){return{before:v.constant(r.slice(0,e)),after:v.constant(r.slice(e+1))}})};var no=function(e,t,n){return to(e,t,n).map(function(n){var r=e.create().clone(t);e.insert().appendAll(r,n.after());e.insert().after(t,r);return eo(t,r)})};var ro=function(e,t,n){return to(e,t,n).map(function(r){var i=e.create().clone(t);e.insert().appendAll(i,r.before().concat([n]));e.insert().appendAll(t,r.after());e.insert().before(t,i);return eo(i,t)})};var io=function(e,t,n,r){var i=we.immutable("first","second","splits");var a=function(t,o,s){var u=i(t,w.none(),s);if(n(t)){return i(t,o,s)}else{return e.property().parent(t).bind(function(i){return r(e,i,t).map(function(e){var t=[{first:e.left,second:e.right}];var r=n(i)?i:e.left();return a(r,w.some(e.right()),s.concat(t))}).getOr(u)})}};return a(t,w.none(),[])};var ao={breakToLeft:ro,breakToRight:no,breakPath:io};var oo=function(e,t,n,r){var i=n[0];var a=n.slice(1);return r(e,t,i,a)};var so=function(e,t,n){return n.length>0?oo(e,t,n,uo):w.none()};var uo=function(e,t,n,r){var i=t(e,n);return J.foldr(r,function(n,r){var i=t(e,r);return lo(e,n,i)},i)};var lo=function(e,t,n){return t.bind(function(t){return n.filter(v.curry(e.eq,t))})};var co={oneAll:so};var fo=function(e,t){return v.curry(e.eq,t)};var ho=function(e,t,n,r){var i=e.property().children(t);if(e.eq(t,n[0])){return w.some([n[0]])}if(e.eq(t,r[0])){return w.some([r[0]])}var a=function(n){var r=J.reverse(n);var a=J.findIndex(r,fo(e,t)).getOr(-1);var o=a<r.length-1?r[a+1]:r[a];return J.findIndex(i,fo(e,o))};var o=a(n);var s=a(r);return o.bind(function(e){return s.map(function(t){var n=Math.min(e,t);var r=Math.max(e,t);return i.slice(n,r+1)})})};var vo=function(e,t,n,r){var i=r!==undefined?r:v.constant(false);var a=[t].concat(e.up().all(t));var o=[n].concat(e.up().all(n));var s=function(e){var t=J.findIndex(e,i);return t.fold(function(){return e},function(t){return e.slice(0,t+1)})};var u=s(a);var l=s(o);var c=J.find(u,function(t){return J.exists(l,fo(e,t))});return{firstpath:v.constant(u),secondpath:v.constant(l),shared:v.constant(c)}};var po=function(e,t,n){var r=vo(e,t,n);return r.shared().bind(function(t){return ho(e,t,r.firstpath(),r.secondpath())})};var go={subset:po,ancestors:vo};var mo=function(e,t,n){return co.oneAll(e,t,n)};var yo=function(e,t,n){return go.subset(e,t,n)};var bo=function(e,t,n,r){return go.ancestors(e,t,n,r)};var _o=function(e,t,n){return ao.breakToLeft(e,t,n)};var wo=function(e,t,n){return ao.breakToRight(e,t,n)};var xo=function(e,t,n,r){return ao.breakPath(e,t,n,r)};var To={sharedOne:mo,subset:yo,ancestors:bo,breakToLeft:_o,breakToRight:wo,breakPath:xo};var Co=Qa();var ko=function(e,t){return To.sharedOne(Co,function(t,n){return e(n)},t)};var So=function(e,t){return To.subset(Co,e,t)};var Eo=function(e,t,n){return To.ancestors(Co,e,t,n)};var Po=function(e,t){return To.breakToLeft(Co,e,t)};var Oo=function(e,t){return To.breakToRight(Co,e,t)};var Mo=function(e,t,n){return To.breakPath(Co,e,t,function(e,t,r){return n(t,r)})};var Ao={sharedOne:ko,subset:So,ancestors:Eo,breakToLeft:Po,breakToRight:Oo,breakPath:Mo};var No=function(e,t){var n=t.column();var r=t.column()+t.colspan()-1;var i=t.row();var a=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&(i<=e.finishRow()&&a>=e.startRow())};var Ro=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()};var Do=function(e,t){var n=true;var r=v.curry(Ro,t);for(var i=t.startRow();i<=t.finishRow();i++){for(var a=t.startCol();a<=t.finishCol();a++){n=n&&ki.getAt(e,i,a).exists(r)}}return n?w.some(t):w.none()};var Lo={inSelection:No,isWithin:Ro,isRectangular:Do};var Io=function(e,t){return Le.bounds(Math.min(e.row(),t.row()),Math.min(e.column(),t.column()),Math.max(e.row()+e.rowspan()-1,t.row()+t.rowspan()-1),Math.max(e.column()+e.colspan()-1,t.column()+t.colspan()-1))};var Bo=function(e,t,n){var r=ki.findItem(e,t,Dn.eq);var i=ki.findItem(e,n,Dn.eq);return r.bind(function(e){return i.map(function(t){return Io(e,t)})})};var jo=function(e,t,n){return Bo(e,t,n).bind(function(t){return Lo.isRectangular(e,t)})};var Fo={getAnyBox:Bo,getBox:jo};var Ho=function(e,t,n,r){return ki.findItem(e,t,Dn.eq).bind(function(t){var i=n>0?t.row()+t.rowspan()-1:t.row();var a=r>0?t.column()+t.colspan()-1:t.column();var o=ki.getAt(e,i+n,a+r);return o.map(function(e){return e.element()})})};var zo=function(e,t,n){return Fo.getAnyBox(e,t,n).map(function(t){var n=ki.filterItems(e,v.curry(Lo.inSelection,t));return J.map(n,function(e){return e.element()})})};var Uo=function(e,t){var n=function(e,t){return Dn.contains(t,e)};return ki.findItem(e,t,n).bind(function(e){return e.element()})};var Vo={moveBy:Ho,intercepts:zo,parentCell:Uo};var Wo=function(e,t,n){return pi.table(e).bind(function(r){var i=$o(r);return Vo.moveBy(i,e,t,n)})};var qo=function(e,t,n){var r=$o(e);return Vo.intercepts(r,t,n)};var Yo=function(e,t,n,r,i){var a=$o(e);var o=Dn.eq(e,n)?t:Vo.parentCell(a,t);var s=Dn.eq(e,i)?r:Vo.parentCell(a,r);return Vo.intercepts(a,o,s)};var Ko=function(e,t,n){var r=$o(e);return Fo.getBox(r,t,n)};var $o=function(e){var t=yi.fromTable(e);return ki.generate(t)};var Go={moveBy:Wo,intercepts:qo,nestedIntercepts:Yo,getBox:Ko};var Xo=function(e,t){return ti.ancestor(e,"table")};var Zo=we.immutableBag(["boxes","start","finish"],[]);var Jo=function(e,t,n){var r=function(e){return function(t){return n(t)||Dn.eq(t,e)}};if(Dn.eq(e,t)){return w.some(Zo({boxes:w.some([e]),start:e,finish:t}))}else{return Xo(e,n).bind(function(i){return Xo(t,n).bind(function(a){if(Dn.eq(i,a)){return w.some(Zo({boxes:Go.intercepts(i,e,t),start:e,finish:t}))}else if(Dn.contains(i,a)){var o=Hr.ancestors(t,"td,th",r(i));var s=o.length>0?o[o.length-1]:t;return w.some(Zo({boxes:Go.nestedIntercepts(i,e,i,t,a),start:e,finish:s}))}else if(Dn.contains(a,i)){var o=Hr.ancestors(e,"td,th",r(a));var u=o.length>0?o[o.length-1]:e;return w.some(Zo({boxes:Go.nestedIntercepts(a,e,i,t,a),start:e,finish:u}))}else{return Ao.ancestors(e,t).shared().bind(function(o){return ti.closest(o,"table",n).bind(function(n){var o=Hr.ancestors(t,"td,th",r(n));var s=o.length>0?o[o.length-1]:t;var u=Hr.ancestors(e,"td,th",r(n));var l=u.length>0?u[u.length-1]:e;return w.some(Zo({boxes:Go.nestedIntercepts(n,e,i,t,a),start:l,finish:s}))})})}})})}};var Qo=function(e,t){var n=Hr.descendants(e,t);return n.length>0?w.some(n):w.none()};var es=function(e,t){return J.find(e,function(e){return Ge.is(e,t)})};var ts=function(e,t,n){return ti.descendant(e,t).bind(function(t){return ti.descendant(e,n).bind(function(e){return Ao.sharedOne(Xo,[t,e]).map(function(n){return{first:v.constant(t),last:v.constant(e),table:v.constant(n)}})})})};var ns=function(e,t){return ti.ancestor(e,"table").bind(function(n){return ti.descendant(n,t).bind(function(t){return Jo(t,e).bind(function(e){return e.boxes().map(function(t){return{boxes:v.constant(t),start:v.constant(e.start()),finish:v.constant(e.finish())}})})})})};var rs=function(e,t,n,r,i){return es(e,i).bind(function(e){return Go.moveBy(e,t,n).bind(function(e){return ns(e,r)})})};var is={identify:Jo,retrieve:Qo,shiftSelection:rs,getEdges:ts};var as=function(e,t){return is.retrieve(e,t)};var os=function(e,t,n){return is.getEdges(e,t,n).bind(function(t){var n=function(t){return Dn.eq(e,t)};var r=ti.ancestor(t.first(),"thead,tfoot,tbody,table",n);var i=ti.ancestor(t.last(),"thead,tfoot,tbody,table",n);return r.bind(function(e){return i.bind(function(n){return Dn.eq(e,n)?Go.getBox(t.table(),t.first(),t.last()):w.none()})})})};var ss={retrieve:as,retrieveBox:os};var us="data-mce-selected";var ls="td["+us+"],th["+us+"]";var cs="["+us+"]";var fs="data-mce-first-selected";var ds="td["+fs+"],th["+fs+"]";var hs="data-mce-last-selected";var vs="td["+hs+"],th["+hs+"]";var ps={selected:v.constant(us),selectedSelector:v.constant(ls),attributeSelector:v.constant(cs),firstSelected:v.constant(fs),firstSelectedSelector:v.constant(ds),lastSelected:v.constant(hs),lastSelectedSelector:v.constant(vs)};var gs=function(e){if(!de.isArray(e)){throw new Error("cases must be an array")}if(e.length===0){throw new Error("there must be at least one case")}var t=[];var n={};J.each(e,function(r,i){var a=ue.keys(r);if(a.length!==1){throw new Error("one and only one name per case")}var o=a[0];var s=r[o];if(n[o]!==undefined){throw new Error("duplicate key detected:"+o)}else if(o==="cata"){throw new Error("cannot have a case named cata (sorry)")}else if(!de.isArray(s)){throw new Error("case arguments must be an array")}t.push(o);n[o]=function(){var n=arguments.length;if(n!==s.length){throw new Error("Wrong number of arguments to case "+o+". Expected "+s.length+" ("+s+"), got "+n)}var r=new Array(n);for(var a=0;a<r.length;a++){r[a]=arguments[a]}var u=function(e){var n=ue.keys(e);if(t.length!==n.length){throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","))}var i=J.forall(t,function(e){return J.contains(n,e)});if(!i){throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "))}return e[o].apply(null,r)};return{fold:function(){if(arguments.length!==e.length){throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length)}var t=arguments[i];return t.apply(null,r)},match:u,log:function(e){console.log(e,{constructors:t,constructor:o,params:r})}}}});return n};var ms={generate:gs};var ys=ms.generate([{none:[]},{multiple:["elements"]},{single:["selection"]}]);var bs=function(e,t,n,r){return e.fold(t,n,r)};var _s={cata:bs,none:ys.none,multiple:ys.multiple,single:ys.single};var ws=function(e,t){return _s.cata(t.get(),v.constant([]),v.identity,v.constant([e]))};var xs=function(e,t){var n=function(e){return Cr.has(e,"rowspan")&&parseInt(Cr.get(e,"rowspan"),10)>1||Cr.has(e,"colspan")&&parseInt(Cr.get(e,"colspan"),10)>1};var r=ws(e,t);return r.length>0&&J.forall(r,n)?w.some(r):w.none()};var Ts=function(e,t){return _s.cata(t.get(),w.none,function(t,n){if(t.length===0){return w.none()}return ss.retrieveBox(e,ps.firstSelectedSelector(),ps.lastSelectedSelector()).bind(function(e){return t.length>1?w.some({bounds:v.constant(e),cells:v.constant(t)}):w.none()})},w.none)};var Cs={mergable:Ts,unmergable:xs,selection:ws};var ks=function(e){return{element:v.constant(e),mergable:w.none,unmergable:w.none,selection:v.constant([e])}};var Ss=function(e,t,n){return{element:v.constant(n),mergable:v.constant(Cs.mergable(t,e)),unmergable:v.constant(Cs.unmergable(n,e)),selection:v.constant(Cs.selection(n,e))}};var Es=function(e){return ks(e)};var Ps=we.immutable("element","clipboard","generators");var Os=function(e,t,n,r,i){return{element:v.constant(n),mergable:w.none,unmergable:w.none,selection:v.constant(Cs.selection(n,e)),clipboard:v.constant(r),generators:v.constant(i)}};var Ms={noMenu:ks,forMenu:Ss,notCell:Es,paste:Ps,pasteRows:Os};var As=function(e){return pi.table(e[0]).map(_a.deep).map(function(e){return[ha.extract(e,ps.attributeSelector())]})};var Ns=function(e,t){return e.selection.serializer.serialize(t.dom(),{})};var Rs=function(e,t,n,r){e.on("BeforeGetContent",function(n){var r=function(t){n.preventDefault();As(t).each(function(t){n.content=J.map(t,function(t){return Ns(e,t)}).join("")})};if(n.selection===true){_s.cata(t.get(),v.noop,r,v.noop)}});e.on("BeforeSetContent",function(t){if(t.selection===true&&t.paste===true){var i=w.from(e.dom.getParent(e.selection.getStart(),"th,td"));i.each(function(i){var a=ze.fromDom(i);var o=pi.table(a);o.bind(function(i){var o=J.filter(Za.fromHtml(t.content),function(e){return hr.name(e)!=="meta"});if(o.length===1&&hr.name(o[0])==="table"){t.preventDefault();var s=ze.fromDom(e.getDoc());var u=Ya.paste(s);var l=Ms.paste(a,o[0],u);n.pasteCells(i,l).each(function(t){e.selection.setRng(t);e.focus();r.clear(i)})}})})}})};var Ds={registerEvents:Rs};function Ls(e,t){var n=function(t,n){if(!de.isNumber(n)&&!n.match(/^[0-9]+$/)){throw e+".set accepts only positive integer values. Value was "+n}var r=t.dom();if(Ei.isSupported(r)){r.style[e]=n+"px"}};var r=function(n){var r=t(n);if(r<=0||r===null){var i=Wi.get(n,e);return parseFloat(i)||0}return r};var i=r;var a=function(e,t){return J.foldl(t,function(t,n){var r=Wi.get(e,n);var i=r===undefined?0:parseInt(r,10);return isNaN(i)?t:t+i},0)};var o=function(e,t,n){var r=a(e,n);var i=t>r?t-r:0;return i};return{set:n,get:r,getOuter:i,aggregate:a,max:o}}var Is=Ls("height",function(e){return Pr.inBody(e)?e.dom().getBoundingClientRect().height:e.dom().offsetHeight});var Bs=function(e,t){Is.set(e,t)};var js=function(e){return Is.get(e)};var Fs=function(e){return Is.getOuter(e)};var Hs=function(e,t){var n=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"];var r=Is.max(e,t,n);Wi.set(e,"max-height",r+"px")};var zs={set:Bs,get:js,getOuter:Fs,setMax:Hs};var Us=Ls("width",function(e){return e.dom().offsetWidth});var Vs=function(e,t){Us.set(e,t)};var Ws=function(e){return Us.get(e)};var qs=function(e){return Us.getOuter(e)};var Ys=function(e,t){var n=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"];var r=Us.max(e,t,n);Wi.set(e,"max-width",r+"px")};var Ks={set:Vs,get:Ws,getOuter:qs,setMax:Ys};var $s=Sn.detect();var Gs=function(){return $s.browser.isIE()||$s.browser.isEdge()};var Xs=function(e,t){var n=parseFloat(e);return isNaN(n)?t:n};var Zs=function(e,t,n){return Xs(Wi.get(e,t),n)};var Js=function(e){var t=Zs(e,"padding-top",0);var n=Zs(e,"padding-bottom",0);var r=Zs(e,"border-top-width",0);var i=Zs(e,"border-bottom-width",0);var a=e.dom().getBoundingClientRect().height;var o=Wi.get(e,"box-sizing");var s=r+i;return o==="border-box"?a:a-t-n-s};var Qs=function(e){return Zs(e,"width",Ks.get(e))};var eu=function(e){return Gs()?Js(e):Zs(e,"height",zs.get(e))};var tu={getWidth:Qs,getHeight:eu};var nu=/(\d+(\.\d+)?)(\w|%)*/;var ru=/(\d+(\.\d+)?)%/;var iu=/(\d+(\.\d+)?)px|em/;var au=function(e,t){Wi.set(e,"width",t+"px")};var ou=function(e,t){Wi.set(e,"width",t+"%")};var su=function(e,t){Wi.set(e,"height",t+"px")};var uu=function(e){return Wi.getRaw(e,"height").getOrThunk(function(){return tu.getHeight(e)+"px"})};var lu=function(e,t,n,r){var i=pi.table(e).map(function(e){var r=n(e);return Math.floor(t/100*r)}).getOr(t);r(e,i);return i};var cu=function(e,t,n,r){var i=parseInt(e,10);return mn.endsWith(e,"%")&&hr.name(t)!=="table"?lu(t,i,n,r):i};var fu=function(e){var t=uu(e);if(!t){return zs.get(e)}return cu(t,e,zs.get,su)};var du=function(e,t,n){var r=n(e);var i=hu(e,t);return r/i};var hu=function(e,t){return Cr.has(e,t)?parseInt(Cr.get(e,t),10):1};var vu=function(e){var t=Wi.getRaw(e,"width");return t.fold(function(){return w.from(Cr.get(e,"width"))},function(e){return w.some(e)})};var pu=function(e,t){return e/t.pixelWidth()*100};var gu=function(e,t,n){if(ru.test(t)){var r=ru.exec(t);return parseFloat(r[1])}else{var i=Ks.get(e);var a=parseInt(i,10);return pu(a,n)}};var mu=function(e,t){var n=vu(e);return n.fold(function(){var n=Ks.get(e);var r=parseInt(n,10);return pu(r,t)},function(n){return gu(e,n,t)})};var yu=function(e,t){return e/100*t.pixelWidth()};var bu=function(e,t,n){if(iu.test(t)){var r=iu.exec(t);return parseInt(r[1],10)}else if(ru.test(t)){var i=ru.exec(t);var a=parseFloat(i[1]);return yu(a,n)}else{var o=Ks.get(e);return parseInt(o,10)}};var _u=function(e,t){var n=vu(e);return n.fold(function(){var t=Ks.get(e);var n=parseInt(t,10);return n},function(n){return bu(e,n,t)})};var wu=function(e){return du(e,"rowspan",fu)};var xu=function(e){var t=vu(e);return t.bind(function(e){if(nu.test(e)){var t=nu.exec(e);return w.some({width:v.constant(t[1]),unit:v.constant(t[3])})}else{return w.none()}})};var Tu=function(e,t,n){Wi.set(e,"width",t+n)};var Cu={percentageBasedSizeRegex:v.constant(ru),pixelBasedSizeRegex:v.constant(iu),setPixelWidth:au,setPercentageWidth:ou,setHeight:su,getPixelWidth:_u,getPercentageWidth:mu,getGenericWidth:xu,setGenericWidth:Tu,getHeight:wu,getRawWidth:vu};var ku=function(e,t){var n=Cu.getGenericWidth(e);n.each(function(n){var r=n.width()/2;Cu.setGenericWidth(e,r,n.unit());Cu.setGenericWidth(t,r,n.unit())})};var Su={halve:ku};var Eu=function(e,t){var n=t||ze.fromDom(document.documentElement);return $r.ancestor(e,v.curry(Dn.eq,n)).isSome()};var Pu=function(e){var t=e.dom();if(t===t.window){return e}return hr.isDocument(e)?t.defaultView||t.parentWindow:null};var Ou={attached:Eu,windowOf:Pu};var Mu=function(e,t){var n=function(n,r){return Mu(e+n,t+r)};return{left:v.constant(e),top:v.constant(t),translate:n}};var Au=function(e){var t=e.getBoundingClientRect();return Mu(t.left,t.top)};var Nu=function(e,t){return e!==undefined?e:t!==undefined?t:0};var Ru=function(e){var t=e.dom().ownerDocument;var n=t.body;var r=Ou.windowOf(ze.fromDom(t));var i=t.documentElement;var a=Nu(r.pageYOffset,i.scrollTop);var o=Nu(r.pageXOffset,i.scrollLeft);var s=Nu(i.clientTop,n.clientTop);var u=Nu(i.clientLeft,n.clientLeft);return Lu(e).translate(o-u,a-s)};var Du=function(e){var t=e.dom();return Mu(t.offsetLeft,t.offsetTop)};var Lu=function(e){var t=e.dom();var n=t.ownerDocument;var r=n.body;var i=ze.fromDom(n.documentElement);if(r===t){return Mu(r.offsetLeft,r.offsetTop)}if(!Ou.attached(e,i)){return Mu(0,0)}return Au(t)};var Iu={absolute:Ru,relative:Du,viewport:Lu};var Bu=we.immutable("row","y");var ju=we.immutable("col","x");var Fu=function(e){var t=Iu.absolute(e);return t.left()+Ks.getOuter(e)};var Hu=function(e){return Iu.absolute(e).left()};var zu=function(e,t){return ju(e,Hu(t))};var Uu=function(e,t){return ju(e,Fu(t))};var Vu=function(e){return Iu.absolute(e).top()};var Wu=function(e,t){return Bu(e,Vu(t))};var qu=function(e,t){return Bu(e,Vu(t)+zs.getOuter(t))};var Yu=function(e,t,n){if(n.length===0){return[]}var r=J.map(n.slice(1),function(t,n){return t.map(function(t){return e(n,t)})});var i=n[n.length-1].map(function(e){return t(n.length-1,e)});return r.concat([i])};var Ku=function(e,t){return-e};var $u={delta:v.identity,positions:v.curry(Yu,Wu,qu),edge:Vu};var Gu={delta:v.identity,edge:Hu,positions:v.curry(Yu,zu,Uu)};var Xu={delta:Ku,edge:Fu,positions:v.curry(Yu,Uu,zu)};var Zu={height:$u,rtl:Xu,ltr:Gu};var Ju={ltr:Zu.ltr,rtl:Zu.rtl};function Qu(e){var t=function(t){return e(t).isRtl()?Ju.rtl:Ju.ltr};var n=function(e,n){return t(n).delta(e,n)};var r=function(e,n){return t(n).positions(e,n)};var i=function(e){return t(e).edge(e)};return{delta:n,edge:i,positions:r}}var el=function(e){var t=yi.fromTable(e);var n=ki.generate(t);return n.grid()};var tl={getGridSize:el};var nl=function(e){var t=e;var n=function(){return t};var r=function(e){t=e};var i=function(){return nl(n())};return{get:n,set:r,clone:i}};var rl=function(e,t){return il(e,t,{validate:de.isFunction,label:"function"})};var il=function(e,t,n){if(t.length===0){throw new Error("You must specify at least one required field.")}be.validateStrArr("required",t);be.checkDupes(t);return function(r){var i=ue.keys(r);var a=J.forall(t,function(e){return J.contains(i,e)});if(!a){be.reqMessage(t,i)}e(t,i);var o=J.filter(t,function(e){return!n.validate(r[e],e)});if(o.length>0){be.invalidTypeMessage(o,n.label)}return r}};var al=function(e,t){var n=J.filter(t,function(t){return!J.contains(e,t)});if(n.length>0){be.unsuppMessage(n)}};var ol=v.noop;var sl={exactly:v.curry(rl,al),ensure:v.curry(rl,ol),ensureWith:v.curry(il,ol)};var ul=function(e){var t=Cr.has(e,"colspan")?parseInt(Cr.get(e,"colspan"),10):1;var n=Cr.has(e,"rowspan")?parseInt(Cr.get(e,"rowspan"),10):1;return{element:v.constant(e),colspan:v.constant(t),rowspan:v.constant(n)}};var ll=function(e,t){dl(e);var n=nl(w.none());var r=t!==undefined?t:ul;var i=function(t){return e.cell(t)};var a=function(e){var t=r(e);return i(t)};var o=function(e){var t=a(e);if(n.get().isNone()){n.set(w.some(t))}s=w.some({item:e,replacement:t});return t};var s=w.none();var u=function(e,t){return s.fold(function(){return o(e)},function(n){return t(e,n.item)?n.replacement:o(e)})};return{getOrInit:u,cursor:n.get}};var cl=function(e,t){return function(n){var r=nl(w.none());dl(n);var i=[];var a=function(e,t){return J.find(i,function(n){return t(n.item,e)})};var o=function(a){var o=n.replace(a,t,{scope:e});i.push({item:a,sub:o});if(r.get().isNone()){r.set(w.some(o))}return o};var s=function(e,t){return a(e,t).fold(function(){return o(e)},function(n){return t(e,n.item)?n.sub:o(e)})};return{replaceOrInit:s,cursor:r.get}}};var fl=function(e){dl(e);var t=nl(w.none());var n=function(n){if(t.get().isNone()){t.set(w.some(n))}return function(){var t=e.cell({element:v.constant(n),colspan:v.constant(1),rowspan:v.constant(1)});Wi.remove(t,"width");Wi.remove(n,"width");return t}};return{combine:n,cursor:t.get}};var dl=sl.exactly(["cell","row","replace","gap"]);var hl={modification:ll,transform:cl,merging:fl};var vl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];var pl=function(e,t){var n=e.property().name(t);return J.contains(["ol","ul"],n)};var gl=function(e,t){var n=e.property().name(t);return J.contains(vl,n)};var ml=function(e,t){var n=e.property().name(t);return J.contains(["address","pre","p","h1","h2","h3","h4","h5","h6"],n)};var yl=function(e,t){var n=e.property().name(t);return J.contains(["h1","h2","h3","h4","h5","h6"],n)};var bl=function(e,t){return J.contains(["div","li","td","th","blockquote","body","caption"],e.property().name(t))};var _l=function(e,t){return J.contains(["br","img","hr","input"],e.property().name(t))};var wl=function(e,t){return e.property().name(t)==="iframe"};var xl=function(e,t){return!(gl(e,t)||_l(e,t))&&e.property().name(t)!=="li"};var Tl={isBlock:gl,isList:pl,isFormatting:ml,isHeading:yl,isContainer:bl,isEmptyTag:_l,isFrame:wl,isInline:xl};var Cl=Qa();var kl=function(e){return Tl.isBlock(Cl,e)};var Sl=function(e){return Tl.isList(Cl,e)};var El=function(e){return Tl.isFormatting(Cl,e)};var Pl=function(e){return Tl.isHeading(Cl,e)};var Ol=function(e){return Tl.isContainer(Cl,e)};var Ml=function(e){return Tl.isEmptyTag(Cl,e)};var Al=function(e){return Tl.isFrame(Cl,e)};var Nl=function(e){return Tl.isInline(Cl,e)};var Rl={isBlock:kl,isList:Sl,isFormatting:El,isHeading:Pl,isContainer:Ol,isEmptyTag:Ml,isFrame:Al,isInline:Nl};var Dl=function(e){var t=function(e){return hr.name(e)==="br"};var n=function(e){return J.forall(e,function(e){return t(e)||hr.isText(e)&&Sa.get(e).trim().length===0})};var r=function(e){return hr.name(e)==="li"||$r.ancestor(e,Rl.isList).isSome()};var i=function(e){return tr.nextSibling(e).map(function(e){if(Rl.isBlock(e)){return true}if(Rl.isEmptyTag(e)){return hr.name(e)==="img"?false:true}}).getOr(false)};var a=function(e){return ja.last(e).bind(function(n){var a=i(n);return tr.parent(n).map(function(i){return a===true||r(i)||t(n)||Rl.isBlock(i)&&!Dn.eq(e,i)?[]:[ze.fromTag("br")]})}).getOr([])};var o=function(){var t=J.bind(e,function(e){var t=tr.children(e);return n(t)?[]:t.concat(a(e))});return t.length===0?[ze.fromTag("br")]:t};var s=o();oa.empty(e[0]);na.append(e[0],s)};var Ll={merge:Dl};var Il=function(e,t){return t};var Bl=function(e,t){var n=de.isObject(e)&&de.isObject(t);return n?Fl(e,t):t};var jl=function(e){return function(){var t=new Array(arguments.length);for(var n=0;n<t.length;n++){t[n]=arguments[n]}if(t.length===0){throw new Error("Can't merge zero objects")}var r={};for(var i=0;i<t.length;i++){var a=t[i];for(var o in a){if(a.hasOwnProperty(o)){r[o]=e(r[o],a[o])}}}return r}};var Fl=jl(Bl);var Hl=jl(Il);var zl={deepMerge:Fl,merge:Hl};var Ul=function(e){var t=[];var n=function(e){t.push(e)};for(var r=0;r<e.length;r++){e[r].each(n)}return t};var Vl=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome()){return r}}return w.none()};var Wl=function(e,t){var n=[];for(var r=0;r<e.length;r++){var i=e[r];if(i.isSome()){n.push(i.getOrDie())}else{return w.none()}}return w.some(t.apply(null,n))};var ql={cat:Ul,findMap:Vl,liftN:Wl};var Yl=function(e,t,n){var r=e.cells();var i=r.slice(0,t);var a=r.slice(t);var o=i.concat([n]).concat(a);return $l(e,o)};var Kl=function(e,t,n){var r=e.cells();r[t]=n};var $l=function(e,t){return Le.rowcells(t,e.section())};var Gl=function(e,t){var n=e.cells();var r=J.map(n,t);return Le.rowcells(r,e.section())};var Xl=function(e,t){return e.cells()[t]};var Zl=function(e,t){return Xl(e,t).element()};var Jl=function(e){return e.cells().length};var Ql={addCell:Yl,setCells:$l,mutateCell:Kl,getCell:Xl,getCellElement:Zl,mapCells:Gl,cellLength:Jl};var ec=function(e,t){return J.map(e,function(e){return Ql.getCell(e,t)})};var tc=function(e,t){return e[t]};var nc=function(e,t){if(e.length===0){return 0}var n=e[0];var r=J.findIndex(e,function(e){return!t(n.element(),e.element())});return r.fold(function(){return e.length},function(e){return e})};var rc=function(e,t,n,r){var i=tc(e,t).cells().slice(n);var a=nc(i,r);var o=ec(e,n).slice(t);var s=nc(o,r);return{colspan:v.constant(a),rowspan:v.constant(s)}};var ic={subgrid:rc};var ac=function(e,t){var n=J.map(e,function(e,t){return J.map(e.cells(),function(e,t){return false})});var r=function(e,t,r,i){for(var a=e;a<e+r;a++){for(var o=t;o<t+i;o++){n[a][o]=true}}};return J.map(e,function(i,a){var o=J.bind(i.cells(),function(i,o){if(n[a][o]===false){var s=ic.subgrid(e,a,o,t);r(a,o,s.rowspan(),s.colspan());return[Le.detailnew(i.element(),s.rowspan(),s.colspan(),i.isNew())]}else{return[]}});return Le.rowdetails(o,i.section())})};var oc=function(e,t,n){var r=[];for(var i=0;i<e.grid().rows();i++){var a=[];for(var o=0;o<e.grid().columns();o++){var s=ki.getAt(e,i,o).map(function(e){return Le.elementnew(e.element(),n)}).getOrThunk(function(){return Le.elementnew(t.gap(),true)});a.push(s)}var u=Le.rowcells(a,e.all()[i].section());r.push(u)}return r};var sc={toDetails:ac,toGrid:oc};var uc=function(e,t,n,r){if(n===r){Cr.remove(e,t)}else{Cr.set(e,t,n)}};var lc=function(e,t){var n=[];var r=[];var i=function(t,i){var a=ti.child(e,i).getOrThunk(function(){var t=ze.fromTag(i,tr.owner(e).dom());Zi.append(e,t);return t});oa.empty(a);var o=J.map(t,function(e){if(e.isNew()){n.push(e.element())}var t=e.element();oa.empty(t);J.each(e.cells(),function(e){if(e.isNew()){r.push(e.element())}uc(e.element(),"colspan",e.colspan(),1);uc(e.element(),"rowspan",e.rowspan(),1);Zi.append(t,e.element())});return t});na.append(a,o)};var a=function(t){ti.child(e,t).bind(oa.remove)};var o=function(e,t){if(e.length>0){i(e,t)}else{a(t)}};var s=[];var u=[];var l=[];J.each(t,function(e){switch(e.section()){case"thead":s.push(e);break;case"tbody":u.push(e);break;case"tfoot":l.push(e);break}});o(s,"thead");o(u,"tbody");o(l,"tfoot");return{newRows:v.constant(n),newCells:v.constant(r)}};var cc=function(e){var t=J.map(e,function(e){var t=_a.shallow(e.element());J.each(e.cells(),function(e){var n=_a.deep(e.element());uc(n,"colspan",e.colspan(),1);uc(n,"rowspan",e.rowspan(),1);Zi.append(t,n)});return t});return t};var fc={render:lc,copy:cc};var dc=function(e,t){var n=[];for(var r=0;r<e;r++){n.push(t(r))}return n};var hc=function(e,t){var n=[];for(var r=e;r<t;r++){n.push(r)}return n};var vc=function(e,t){var n=[];J.each(e,function(r,i){if(i<e.length-1&&!t(r,e[i+1])){n.push(r)}else if(i===e.length-1){n.push(r)}});return n};var pc=function(e,t){if(t<0||t>=e.length-1){return w.none()}var n=e[t].fold(function(){var n=J.reverse(e.slice(0,t));return ql.findMap(n,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return w.some({value:e,delta:0})});var r=e[t+1].fold(function(){var n=e.slice(t+1);return ql.findMap(n,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return w.some({value:e,delta:1})});return n.bind(function(e){return r.map(function(t){var n=t.delta+e.delta;return Math.abs(t.value-e.value)/n})})};var gc={repeat:dc,range:hc,unique:vc,deduce:pc};var mc=function(e){var t=e.grid();var n=gc.range(0,t.columns());var r=gc.range(0,t.rows());return J.map(n,function(t){var n=function(){return J.bind(r,function(n){return ki.getAt(e,n,t).filter(function(e){return e.column()===t}).fold(v.constant([]),function(e){return[e]})})};var i=function(e){return e.colspan()===1};var a=function(){return ki.getAt(e,0,t)};return yc(n,i,a)})};var yc=function(e,t,n){var r=e();var i=J.find(r,t);var a=i.orThunk(function(){return w.from(r[0]).orThunk(n)});return a.map(function(e){return e.element()})};var bc=function(e){var t=e.grid();var n=gc.range(0,t.rows());var r=gc.range(0,t.columns());return J.map(n,function(t){var n=function(){return J.bind(r,function(n){return ki.getAt(e,t,n).filter(function(e){return e.row()===t}).fold(v.constant([]),function(e){return[e]})})};var i=function(e){return e.rowspan()===1};var a=function(){return ki.getAt(e,t,0)};return yc(n,i,a)})};var _c={columns:mc,rows:bc};var wc=function(e,t,n,r,i){var a=ze.fromTag("div");Wi.setAll(a,{position:"absolute",left:t-r/2+"px",top:n+"px",height:i+"px",width:r+"px"});Cr.setAll(a,{"data-column":e,role:"presentation"});return a};var xc=function(e,t,n,r,i){var a=ze.fromTag("div");Wi.setAll(a,{position:"absolute",left:t+"px",top:n-i/2+"px",height:i+"px",width:r+"px"});Cr.setAll(a,{"data-row":e,role:"presentation"});return a};var Tc={col:wc,row:xc};var Cc=function(e){var t=e.replace(/\./g,"-");var n=function(e){return t+"-"+e};return{resolve:n}};var kc={css:Cc};var Sc=kc.css("ephox-snooker");var Ec={resolve:Sc.resolve};function Pc(e,t,n){var r=n||false;var i=function(){t();r=true};var a=function(){e();r=false};var o=function(){var e=r?a:i;e()};var s=function(){return r};return{on:i,off:a,toggle:o,isOn:s}}var Oc=function(e,t){var n=Cr.get(e,t);return n===undefined||n===""?[]:n.split(" ")};var Mc=function(e,t,n){var r=Oc(e,t);var i=r.concat([n]);Cr.set(e,t,i.join(" "))};var Ac=function(e,t,n){var r=J.filter(Oc(e,t),function(e){return e!==n});if(r.length>0){Cr.set(e,t,r.join(" "))}else{Cr.remove(e,t)}};var Nc={read:Oc,add:Mc,remove:Ac};var Rc=function(e){return e.dom().classList!==undefined};var Dc=function(e){return Nc.read(e,"class")};var Lc=function(e,t){return Nc.add(e,"class",t)};var Ic=function(e,t){return Nc.remove(e,"class",t)};var Bc=function(e,t){if(J.contains(Dc(e),t)){Ic(e,t)}else{Lc(e,t)}};var jc={get:Dc,add:Lc,remove:Ic,toggle:Bc,supports:Rc};var Fc=function(e,t){if(jc.supports(e)){e.dom().classList.add(t)}else{jc.add(e,t)}};var Hc=function(e){var t=jc.supports(e)?e.dom().classList:jc.get(e);if(t.length===0){Cr.remove(e,"class")}};var zc=function(e,t){if(jc.supports(e)){var n=e.dom().classList;n.remove(t)}else{jc.remove(e,t)}Hc(e)};var Uc=function(e,t){return jc.supports(e)?e.dom().classList.toggle(t):jc.toggle(e,t)};var Vc=function(e,t){var n=jc.supports(e);var r=e.dom().classList;var i=function(){if(n){r.remove(t)}else{jc.remove(e,t)}};var a=function(){if(n){r.add(t)}else{jc.add(e,t)}};return Pc(i,a,Wc(e,t))};var Wc=function(e,t){return jc.supports(e)&&e.dom().classList.contains(t)};var qc={add:Fc,remove:zc,toggle:Uc,toggler:Vc,has:Wc};var Yc=Ec.resolve("resizer-bar");var Kc=Ec.resolve("resizer-rows");var $c=Ec.resolve("resizer-cols");var Gc=7;var Xc=function(e){var t=Hr.descendants(e.parent(),"."+Yc);J.each(t,oa.remove)};var Zc=function(e,t,n){var r=e.origin();J.each(t,function(t,i){t.each(function(t){var i=n(r,t);qc.add(i,Yc);Zi.append(e.parent(),i)})})};var Jc=function(e,t,n,r){Zc(e,t,function(e,t){var i=Tc.col(t.col(),t.x()-e.left(),n.top()-e.top(),Gc,r);qc.add(i,$c);return i})};var Qc=function(e,t,n,r){Zc(e,t,function(e,t){var i=Tc.row(t.row(),n.left()-e.left(),t.y()-e.top(),r,Gc);qc.add(i,Kc);return i})};var ef=function(e,t,n,r,i,a){var o=Iu.absolute(t);var s=n.length>0?i.positions(n,t):[];Qc(e,s,o,Ks.getOuter(t));var u=r.length>0?a.positions(r,t):[];Jc(e,u,o,zs.getOuter(t))};var tf=function(e,t,n,r){Xc(e);var i=yi.fromTable(t);var a=ki.generate(i);var o=_c.rows(a);var s=_c.columns(a);ef(e,t,o,s,n,r)};var nf=function(e,t){var n=Hr.descendants(e.parent(),"."+Yc);J.each(n,t)};var rf=function(e){nf(e,function(e){Wi.set(e,"display","none")})};var af=function(e){nf(e,function(e){Wi.set(e,"display","block")})};var of=function(e){return qc.has(e,Kc)};var sf=function(e){return qc.has(e,$c)};var uf={refresh:tf,hide:rf,show:af,destroy:Xc,isRowBar:of,isColBar:sf};var lf=function(e,t){return sc.toGrid(e,t,false)};var cf=function(e,t){var n=function(e){var n=ql.findMap(e,function(e){return tr.parent(e.element()).map(function(e){var t=tr.parent(e).isNone();return Le.elementnew(e,t)})});return n.getOrThunk(function(){return Le.elementnew(t.row(),true)})};return J.map(e,function(e){var t=n(e.details());return Le.rowdatanew(t.element(),e.details(),e.section(),t.isNew())})};var ff=function(e,t){var n=sc.toDetails(e,Dn.eq);return cf(n,t)};var df=function(e,t){var n=J.flatten(J.map(e.all(),function(e){return e.cells()}));return J.find(n,function(e){return Dn.eq(t,e.element())})};var hf=function(e,t,n,r,i){return function(a,o,s,u,l){var c=yi.fromTable(o);var f=ki.generate(c);var d=t(f,s).map(function(t){var n=lf(f,u);var r=e(n,t,Dn.eq,i(u));var a=ff(r.grid(),u);return{grid:v.constant(a),cursor:r.cursor}});return d.fold(function(){return w.none()},function(e){var t=fc.render(o,e.grid());n(o,e.grid(),l);r(o);uf.refresh(a,o,Zu.height,l);return w.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})}};var vf=function(e,t){return pi.cell(t.element()).bind(function(t){return df(e,t)})};var pf=function(e,t){return pi.cell(t.element()).bind(function(n){return df(e,n).map(function(e){return zl.merge(e,{generators:t.generators,clipboard:t.clipboard})})})};var gf=function(e,t){var n=J.map(t.selection(),function(t){return pi.cell(t).bind(function(t){return df(e,t)})});var r=ql.cat(n);return r.length>0?w.some(zl.merge({cells:r},{generators:t.generators,clipboard:t.clipboard})):w.none()};var mf=function(e,t){return t.mergable()};var yf=function(e,t){return t.unmergable()};var bf=function(e,t){var n=J.map(t.selection(),function(t){return pi.cell(t).bind(function(t){return df(e,t)})});var r=ql.cat(n);return r.length>0?w.some(r):w.none()};var _f={run:hf,toDetailList:ff,onCell:vf,onCells:bf,onPaste:pf,onPasteRows:gf,onMergable:mf,onUnmergable:yf};var wf=function(e){var t=function(t){return e===t};var n=function(t){return wf(e)};var r=function(t){return wf(e)};var i=function(t){return wf(t(e))};var a=function(t){t(e)};var o=function(t){return t(e)};var s=function(t,n){return n(e)};var u=function(t){return t(e)};var l=function(t){return t(e)};var c=function(){return w.some(e)};return{is:t,isValue:v.always,isError:v.never,getOr:v.constant(e),getOrThunk:v.constant(e),getOrDie:v.constant(e),or:n,orThunk:r,fold:s,map:i,each:a,bind:o,exists:u,forall:l,toOption:c}};var xf=function(e){var t=function(e){return e()};var n=function(){return v.die(e)()};var r=function(e){return e};var i=function(e){return e()};var a=function(t){return xf(e)};var o=function(t){return xf(e)};var s=function(t,n){return t(e)};return{is:v.never,isValue:v.never,isError:v.always,getOr:v.identity,getOrThunk:t,getOrDie:n,or:r,orThunk:i,fold:s,map:a,each:v.noop,bind:o,exists:v.never,forall:v.always,toOption:w.none}};var Tf={value:wf,error:xf};var Cf=function(e,t,n){if(e.row()>=t.length||e.column()>Ql.cellLength(t[0])){return Tf.error("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column())}var r=t.slice(e.row());var i=r[0].cells().slice(e.column());var a=Ql.cellLength(n[0]);var o=n.length;return Tf.value({rowDelta:v.constant(r.length-o),colDelta:v.constant(i.length-a)})};var kf=function(e,t){var n=Ql.cellLength(e[0]);var r=Ql.cellLength(t[0]);return{rowDelta:v.constant(0),colDelta:v.constant(n-r)}};var Sf=function(e,t){return J.map(e,function(){return Le.elementnew(t.cell(),true)})};var Ef=function(e,t,n){return e.concat(gc.repeat(t,function(t){return Ql.setCells(e[e.length-1],Sf(e[e.length-1].cells(),n))}))};var Pf=function(e,t,n){return J.map(e,function(e){return Ql.setCells(e,e.cells().concat(Sf(gc.range(0,t),n)))})};var Of=function(e,t,n){var r=t.colDelta()<0?Pf:v.identity;var i=t.rowDelta()<0?Ef:v.identity;var a=r(e,Math.abs(t.colDelta()),n);var o=i(a,Math.abs(t.rowDelta()),n);return o};var Mf={measure:Cf,measureWidth:kf,tailor:Of};var Af=function(e,t,n,r){if(e.length===0){return e}for(var i=t.startRow();i<=t.finishRow();i++){for(var a=t.startCol();a<=t.finishCol();a++){Ql.mutateCell(e[i],a,Le.elementnew(r(),false))}}return e};var Nf=function(e,t,n,r){var i=true;for(var a=0;a<e.length;a++){for(var o=0;o<Ql.cellLength(e[0]);o++){var s=Ql.getCellElement(e[a],o);var u=n(s,t);if(u===true&&i===false){Ql.mutateCell(e[a],o,Le.elementnew(r(),true))}else if(u===true){i=false}}}return e};var Rf=function(e,t){return J.foldl(e,function(e,n){return J.exists(e,function(e){return t(e.element(),n.element())})?e:e.concat([n])},[])};var Df=function(e,t,n,r){if(t>0&&t<e.length){var i=e[t-1].cells();var a=Rf(i,n);J.each(a,function(i){var a=w.none();for(var o=t;o<e.length;o++){for(var s=0;s<Ql.cellLength(e[0]);s++){var u=e[o].cells()[s];var l=n(u.element(),i.element());if(l){if(a.isNone()){a=w.some(r())}a.each(function(t){Ql.mutateCell(e[o],s,Le.elementnew(t,true))})}}}})}return e};var Lf={merge:Af,unmerge:Nf,splitRows:Df};var If=function(e,t,n,r){var i=Ql.getCell(e[t],n);var a=v.curry(r,i.element());var o=e[t];return e.length>1&&Ql.cellLength(o)>1&&(n>0&&a(Ql.getCellElement(o,n-1))||n<o.length-1&&a(Ql.getCellElement(o,n+1))||t>0&&a(Ql.getCellElement(e[t-1],n))||t<e.length-1&&a(Ql.getCellElement(e[t+1],n)))};var Bf=function(e,t,n,r,i){var a=e.row();var o=e.column();var s=n.length;var u=Ql.cellLength(n[0]);var l=a+s;var c=o+u;for(var f=a;f<l;f++){for(var d=o;d<c;d++){if(If(t,f,d,i)){Lf.unmerge(t,Ql.getCellElement(t[f],d),i,r.cell)}var h=Ql.getCellElement(n[f-a],d-o);var v=r.replace(h);Ql.mutateCell(t[f],d,Le.elementnew(v,true))}}return t};var jf=function(e,t,n,r,i){var a=Mf.measure(e,t,n);return a.map(function(a){var o=Mf.tailor(t,a,r);return Bf(e,o,n,r,i)})};var Ff=function(e,t,n,r,i){Lf.splitRows(t,e,i,r.cell);var a=Mf.measureWidth(n,t);var o=Mf.tailor(n,a,r);var s=Mf.measureWidth(t,o);var u=Mf.tailor(t,s,r);return u.slice(0,e).concat(o).concat(u.slice(e,u.length))};var Hf={merge:jf,insert:Ff};var zf=function(e,t,n,r,i){var a=e.slice(0,t);var o=e.slice(t);var s=Ql.mapCells(e[n],function(n,a){var o=t>0&&t<e.length&&r(Ql.getCellElement(e[t-1],a),Ql.getCellElement(e[t],a));var s=o?Ql.getCell(e[t],a):Le.elementnew(i(n.element(),r),true);return s});return a.concat([s]).concat(o)};var Uf=function(e,t,n,r,i){return J.map(e,function(e){var a=t>0&&t<Ql.cellLength(e)&&r(Ql.getCellElement(e,t-1),Ql.getCellElement(e,t));var o=a?Ql.getCell(e,t):Le.elementnew(i(Ql.getCellElement(e,n),r),true);return Ql.addCell(e,t,o)})};var Vf=function(e,t,n,r,i){var a=n+1;return J.map(e,function(e,o){var s=o===t;var u=s?Le.elementnew(i(Ql.getCellElement(e,n),r),true):Ql.getCell(e,n);return Ql.addCell(e,a,u)})};var Wf=function(e,t,n,r,i){var a=t+1;var o=e.slice(0,a);var s=e.slice(a);var u=Ql.mapCells(e[t],function(e,t){var a=t===n;return a?Le.elementnew(i(e.element(),r),true):e});return o.concat([u]).concat(s)};var qf=function(e,t,n){var r=J.map(e,function(e){var r=e.cells().slice(0,t).concat(e.cells().slice(n+1));return Le.rowcells(r,e.section())});return J.filter(r,function(e){return e.cells().length>0})};var Yf=function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))};var Kf={insertRowAt:zf,insertColumnAt:Uf,splitCellIntoColumns:Vf,splitCellIntoRows:Wf,deleteRowsAt:Yf,deleteColumnsAt:qf};var $f=function(e,t,n,r){var i=function(e){return J.exists(t,function(t){return n(e.element(),t.element())})};return J.map(e,function(e){return Ql.mapCells(e,function(e){return i(e)?Le.elementnew(r(e.element(),n),true):e})})};var Gf=function(e,t,n,r){return Ql.getCellElement(e[t],n)!==undefined&&(t>0&&r(Ql.getCellElement(e[t-1],n),Ql.getCellElement(e[t],n)))};var Xf=function(e,t,n){return t>0&&n(Ql.getCellElement(e,t-1),Ql.getCellElement(e,t))};var Zf=function(e,t,n,r){var i=J.bind(e,function(r,i){var a=Gf(e,i,t,n)||Xf(r,t,n);return a?[]:[Ql.getCell(r,t)]});return $f(e,i,n,r)};var Jf=function(e,t,n,r){var i=e[t];var a=J.bind(i.cells(),function(r,a){var o=Gf(e,t,a,n)||Xf(i,a,n);return o?[]:[r]});return $f(e,a,n,r)};var Qf={replaceColumn:Zf,replaceRow:Jf};var ed=function(){return ad(function(e,t,n,r,i){return e()})};var td=function(e){return ad(function(t,n,r,i,a){return n(e)})};var nd=function(e,t){return ad(function(n,r,i,a,o){return i(e,t)})};var rd=function(e,t,n){return ad(function(r,i,a,o,s){return o(e,t,n)})};var id=function(e,t){return ad(function(n,r,i,a,o){return o(e,t)})};var ad=function(e){return{fold:e}};var od={none:ed,only:td,left:nd,middle:rd,right:id};var sd=function(e,t){if(e.length===0){return od.none()}if(e.length===1){return od.only(0)}if(t===0){return od.left(0,1)}if(t===e.length-1){return od.right(t-1,t)}if(t>0&&t<e.length-1){return od.middle(t-1,t,t+1)}return od.none()};var ud=function(e,t,n,r){var i=e.slice(0);var a=sd(e,t);var o=function(e){return J.map(e,v.constant(0))};var s=v.constant(o(i));var u=function(e){return r.singleColumnWidth(i[e],n)};var l=function(e,t){if(n>=0){var a=Math.max(r.minCellWidth(),i[t]-n);return o(i.slice(0,e)).concat([n,a-i[t]]).concat(o(i.slice(t+1)))}else{var s=Math.max(r.minCellWidth(),i[e]+n);var u=i[e]-s;return o(i.slice(0,e)).concat([s-i[e],u]).concat(o(i.slice(t+1)))}};var c=l;var f=function(e,t,n){return l(t,n)};var d=function(e,t){if(n>=0){return o(i.slice(0,t)).concat([n])}else{var a=Math.max(r.minCellWidth(),i[t]+n);return o(i.slice(0,t)).concat([a-i[t]])}};return a.fold(s,u,c,f,d)};var ld={determine:ud};var cd=function(e,t){return Cr.has(e,t)&&parseInt(Cr.get(e,t),10)>1};var fd=function(e){return cd(e,"colspan")};var dd=function(e){return cd(e,"rowspan")};var hd=function(e,t){return parseInt(Wi.get(e,t),10)};var vd={hasColspan:fd,hasRowspan:dd,minWidth:v.constant(10),minHeight:v.constant(10),getInt:hd};var pd=function(e,t,n){return Wi.getRaw(e,t).fold(function(){return n(e)+"px"},function(e){return e})};var gd=function(e){return pd(e,"width",Cu.getPixelWidth)};var md=function(e){return pd(e,"height",Cu.getHeight)};var yd=function(e,t,n,r,i){var a=_c.columns(e);var o=J.map(a,function(e){return e.map(t.edge)});return J.map(a,function(e,t){var a=e.filter(v.not(vd.hasColspan));return a.fold(function(){var e=gc.deduce(o,t);return r(e)},function(e){return n(e,i)})})};var bd=function(e){return e.map(function(e){return e+"px"}).getOr("")};var _d=function(e,t){return yd(e,t,gd,bd)};var wd=function(e,t,n){return yd(e,t,Cu.getPercentageWidth,function(e){return e.fold(function(){return n.minCellWidth()},function(e){return e/n.pixelWidth()*100})},n)};var xd=function(e,t,n){return yd(e,t,Cu.getPixelWidth,function(e){return e.getOrThunk(n.minCellWidth)},n)};var Td=function(e,t,n,r){var i=_c.rows(e);var a=J.map(i,function(e){return e.map(t.edge)});return J.map(i,function(e,t){var i=e.filter(v.not(vd.hasRowspan));return i.fold(function(){var e=gc.deduce(a,t);return r(e)},function(e){return n(e)})})};var Cd=function(e,t){return Td(e,t,Cu.getHeight,function(e){return e.getOrThunk(vd.minHeight)})};var kd=function(e,t){return Td(e,t,md,bd)};var Sd={getRawWidths:_d,getPixelWidths:xd,getPercentageWidths:wd,getPixelHeights:Cd,getRawHeights:kd};var Ed=function(e,t,n){var r=0;for(var i=e;i<t;i++){r+=n[i]!==undefined?n[i]:0}return r};var Pd=function(e,t){var n=ki.justCells(e);return J.map(n,function(e){var n=Ed(e.column(),e.column()+e.colspan(),t);return{element:e.element,width:v.constant(n),colspan:e.colspan}})};var Od=function(e,t){var n=ki.justCells(e);return J.map(n,function(e){var n=Ed(e.row(),e.row()+e.rowspan(),t);return{element:e.element,height:v.constant(n),rowspan:e.rowspan}})};var Md=function(e,t){return J.map(e.all(),function(e,n){return{element:e.element,height:v.constant(t[n])}})};var Ad={recalculateWidth:Pd,recalculateHeight:Od,matchRowHeight:Md};var Nd=function(e,t){var n=parseFloat(e);var r=Ks.get(t);var i=function(e){return e/r*100};var a=function(e,t){return[100-e]};var o=function(){return vd.minWidth()/r*100};var s=function(e,t,r){var i=n+r;Cu.setPercentageWidth(e,i)};return{width:v.constant(n),pixelWidth:v.constant(r),getWidths:Sd.getPercentageWidths,getCellDelta:i,singleColumnWidth:a,minCellWidth:o,setElementWidth:Cu.setPercentageWidth,setTableWidth:s}};var Rd=function(e){var t=parseInt(e,10);var n=v.identity;var r=function(e,t){var n=Math.max(vd.minWidth(),e+t);return[n-e]};var i=function(e,t,n){var r=J.foldr(t,function(e,t){return e+t},0);Cu.setPixelWidth(e,r)};return{width:v.constant(t),pixelWidth:v.constant(t),getWidths:Sd.getPixelWidths,getCellDelta:n,singleColumnWidth:r,minCellWidth:vd.minWidth,setElementWidth:Cu.setPixelWidth,setTableWidth:i}};var Dd=function(e,t){if(Cu.percentageBasedSizeRegex().test(t)){var n=Cu.percentageBasedSizeRegex().exec(t);return Nd(n[1],e)}else if(Cu.pixelBasedSizeRegex().test(t)){var r=Cu.pixelBasedSizeRegex().exec(t);return Rd(r[1])}else{var i=Ks.get(e);return Rd(i)}};var Ld=function(e){var t=Cu.getRawWidth(e);return t.fold(function(){var t=Ks.get(e);return Rd(t)},function(t){return Dd(e,t)})};var Id={getTableSize:Ld};var Bd=function(e){return ki.generate(e)};var jd=function(e){return J.foldr(e,function(e,t){return e+t},0)};var Fd=function(e){var t=yi.fromTable(e);return Bd(t)};var Hd=function(e,t,n,r){var i=Id.getTableSize(e);var a=i.getCellDelta(t);var o=Fd(e);var s=i.getWidths(o,r,i);var u=ld.determine(s,n,a,i);var l=J.map(u,function(e,t){return e+s[t]});var c=Ad.recalculateWidth(o,l);J.each(c,function(e){i.setElementWidth(e.element(),e.width())});if(n===o.grid().columns()-1){i.setTableWidth(e,l,a)}};var zd=function(e,t,n,r){var i=Fd(e);var a=Sd.getPixelHeights(i,r);var o=J.map(a,function(e,r){return n===r?Math.max(t+e,vd.minHeight()):e});var s=Ad.recalculateHeight(i,o);var u=Ad.matchRowHeight(i,o);J.each(u,function(e){Cu.setHeight(e.element(),e.height())});J.each(s,function(e){Cu.setHeight(e.element(),e.height())});var l=jd(o);Cu.setHeight(e,l)};var Ud=function(e,t,n){var r=Id.getTableSize(e);var i=Bd(t);var a=r.getWidths(i,n,r);var o=Ad.recalculateWidth(i,a);J.each(o,function(e){r.setElementWidth(e.element(),e.width())});var s=J.foldr(a,function(e,t){return t+e},0);if(o.length>0){r.setElementWidth(e,s)}};var Vd={adjustWidth:Hd,adjustHeight:zd,adjustWidthTo:Ud};var Wd=function(e){var t=pi.cells(e);if(t.length===0){oa.remove(e)}};var qd=we.immutable("grid","cursor");var Yd=function(e,t,n){return Kd(e,t,n).orThunk(function(){return Kd(e,0,0)})};var Kd=function(e,t,n){return w.from(e[t]).bind(function(e){return w.from(e.cells()[n]).bind(function(e){return w.from(e.element())})})};var $d=function(e,t,n){return qd(e,Kd(e,t,n))};var Gd=function(e){return J.foldl(e,function(e,t){return J.exists(e,function(e){return e.row()===t.row()})?e:e.concat([t])},[]).sort(function(e,t){return e.row()-t.row()})};var Xd=function(e){return J.foldl(e,function(e,t){return J.exists(e,function(e){return e.column()===t.column()})?e:e.concat([t])},[]).sort(function(e,t){return e.column()-t.column()})};var Zd=function(e,t,n,r){var i=t.row();var a=t.row();var o=Kf.insertRowAt(e,a,i,n,r.getOrInit);return $d(o,a,t.column())};var Jd=function(e,t,n,r){var i=t[0].row();var a=t[0].row();var o=Gd(t);var s=J.foldl(o,function(e,t){return Kf.insertRowAt(e,a,i,n,r.getOrInit)},e);return $d(s,a,t[0].column())};var Qd=function(e,t,n,r){var i=t.row();var a=t.row()+t.rowspan();var o=Kf.insertRowAt(e,a,i,n,r.getOrInit);return $d(o,a,t.column())};var eh=function(e,t,n,r){var i=Gd(t);var a=i[i.length-1].row();var o=i[i.length-1].row()+i[i.length-1].rowspan();var s=J.foldl(i,function(e,t){return Kf.insertRowAt(e,o,a,n,r.getOrInit)},e);return $d(s,o,t[0].column())};var th=function(e,t,n,r){var i=t.column();var a=t.column();var o=Kf.insertColumnAt(e,a,i,n,r.getOrInit);return $d(o,t.row(),a)};var nh=function(e,t,n,r){var i=Xd(t);var a=i[0].column();var o=i[0].column();var s=J.foldl(i,function(e,t){return Kf.insertColumnAt(e,o,a,n,r.getOrInit)},e);return $d(s,t[0].row(),o)};var rh=function(e,t,n,r){var i=t.column();var a=t.column()+t.colspan();var o=Kf.insertColumnAt(e,a,i,n,r.getOrInit);return $d(o,t.row(),a)};var ih=function(e,t,n,r){var i=t[t.length-1].column();var a=t[t.length-1].column()+t[t.length-1].colspan();var o=Xd(t);var s=J.foldl(o,function(e,t){return Kf.insertColumnAt(e,a,i,n,r.getOrInit)},e);return $d(s,t[0].row(),a)};var ah=function(e,t,n,r){var i=Qf.replaceRow(e,t.row(),n,r.replaceOrInit);return $d(i,t.row(),t.column())};var oh=function(e,t,n,r){var i=Qf.replaceColumn(e,t.column(),n,r.replaceOrInit);return $d(i,t.row(),t.column())};var sh=function(e,t,n,r){var i=Qf.replaceRow(e,t.row(),n,r.replaceOrInit);return $d(i,t.row(),t.column())};var uh=function(e,t,n,r){var i=Qf.replaceColumn(e,t.column(),n,r.replaceOrInit);return $d(i,t.row(),t.column())};var lh=function(e,t,n,r){var i=Kf.splitCellIntoColumns(e,t.row(),t.column(),n,r.getOrInit);return $d(i,t.row(),t.column())};var ch=function(e,t,n,r){var i=Kf.splitCellIntoRows(e,t.row(),t.column(),n,r.getOrInit);return $d(i,t.row(),t.column())};var fh=function(e,t,n,r){var i=Xd(t);var a=Kf.deleteColumnsAt(e,i[0].column(),i[i.length-1].column());var o=Yd(a,t[0].row(),t[0].column());return qd(a,o)};var dh=function(e,t,n,r){var i=Gd(t);var a=Kf.deleteRowsAt(e,i[0].row(),i[i.length-1].row());var o=Yd(a,t[0].row(),t[0].column());return qd(a,o)};var hh=function(e,t,n,r){var i=t.cells();Ll.merge(i);var a=Lf.merge(e,t.bounds(),n,v.constant(i[0]));return qd(a,w.from(i[0]))};var vh=function(e,t,n,r){var i=J.foldr(t,function(e,t){return Lf.unmerge(e,t,n,r.combine(t))},e);return qd(i,w.from(t[0]))};var ph=function(e,t,n,r){var i=function(e,t){var n=yi.fromTable(e);var r=ki.generate(n);return sc.toGrid(r,t,true)};var a=i(t.clipboard(),t.generators());var o=Le.address(t.row(),t.column());var s=Hf.merge(o,e,a,t.generators(),n);return s.fold(function(){return qd(e,w.some(t.element()))},function(e){var n=Yd(e,t.row(),t.column());return qd(e,n)})};var gh=function(e,t,n){var r=yi.fromPastedRows(e,n);var i=ki.generate(r);return sc.toGrid(i,t,true)};var mh=function(e,t,n,r){var i=e[t.cells[0].row()];var a=t.cells[0].row();var o=gh(t.clipboard(),t.generators(),i);var s=Hf.insert(a,e,o,t.generators(),n);var u=Yd(s,t.cells[0].row(),t.cells[0].column());return qd(s,u)};var yh=function(e,t,n,r){var i=e[t.cells[0].row()];var a=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan();var o=gh(t.clipboard(),t.generators(),i);var s=Hf.insert(a,e,o,t.generators(),n);var u=Yd(s,t.cells[0].row(),t.cells[0].column());return qd(s,u)};var bh=Vd.adjustWidthTo;var _h={insertRowBefore:_f.run(Zd,_f.onCell,v.noop,v.noop,hl.modification),insertRowsBefore:_f.run(Jd,_f.onCells,v.noop,v.noop,hl.modification),insertRowAfter:_f.run(Qd,_f.onCell,v.noop,v.noop,hl.modification),insertRowsAfter:_f.run(eh,_f.onCells,v.noop,v.noop,hl.modification),insertColumnBefore:_f.run(th,_f.onCell,bh,v.noop,hl.modification),insertColumnsBefore:_f.run(nh,_f.onCells,bh,v.noop,hl.modification),insertColumnAfter:_f.run(rh,_f.onCell,bh,v.noop,hl.modification),insertColumnsAfter:_f.run(ih,_f.onCells,bh,v.noop,hl.modification),splitCellIntoColumns:_f.run(lh,_f.onCell,bh,v.noop,hl.modification),splitCellIntoRows:_f.run(ch,_f.onCell,v.noop,v.noop,hl.modification),eraseColumns:_f.run(fh,_f.onCells,bh,Wd,hl.modification),eraseRows:_f.run(dh,_f.onCells,v.noop,Wd,hl.modification),makeColumnHeader:_f.run(oh,_f.onCell,v.noop,v.noop,hl.transform("row","th")),unmakeColumnHeader:_f.run(uh,_f.onCell,v.noop,v.noop,hl.transform(null,"td")),makeRowHeader:_f.run(ah,_f.onCell,v.noop,v.noop,hl.transform("col","th")),unmakeRowHeader:_f.run(sh,_f.onCell,v.noop,v.noop,hl.transform(null,"td")),mergeCells:_f.run(hh,_f.onMergable,v.noop,v.noop,hl.merging),unmergeCells:_f.run(vh,_f.onUnmergable,bh,v.noop,hl.merging),pasteCells:_f.run(ph,_f.onPaste,bh,v.noop,hl.modification),pasteRowsBefore:_f.run(mh,_f.onPasteRows,v.noop,v.noop,hl.modification),pasteRowsAfter:_f.run(yh,_f.onPasteRows,v.noop,v.noop,hl.modification)};var wh=function(e){return ze.fromDom(e.getBody())};var xh=function(e){return function(t){return Dn.eq(t,wh(e))}};var Th=function(e){return e?e.replace(/px$/,""):""};var Ch=function(e){if(/^[0-9]+$/.test(e)){e+="px"}return e};var kh={getBody:wh,getIsRoot:xh,addSizeSuffix:Ch,removePxSuffix:Th};var Sh=function(e,t){return function(n){return Eh(n)==="rtl"?t:e}};var Eh=function(e){return Wi.get(e,"direction")==="rtl"?"rtl":"ltr"};var Ph={onDirection:Sh,getDirection:Eh};var Oh={isRtl:v.constant(false)};var Mh={isRtl:v.constant(true)};var Ah=function(e){var t=Ph.getDirection(e);return t==="rtl"?Mh:Oh};var Nh={directionAt:Ah};var Rh=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"];var Dh={"border-collapse":"collapse",width:"100%"};var Lh={border:"1"};var Ih=function(e){return e.getParam("table_default_attributes",Lh,"object")};var Bh=function(e){return e.getParam("table_default_styles",Dh,"object")};var jh=function(e){return e.getParam("table_resize_bars",true,"boolean")};var Fh=function(e){return e.getParam("table_tab_navigation",true,"boolean")};var Hh=function(e){return e.getParam("forced_root_block","p","string")};var zh=function(e){return e.getParam("table_cell_advtab",true,"boolean")};var Uh=function(e){return e.getParam("table_row_advtab",true,"boolean")};var Vh=function(e){return e.getParam("table_advtab",true,"boolean")};var Wh=function(e){return e.getParam("table_appearance_options",true,"boolean")};var qh=function(e){return e.getParam("table_grid",true,"boolean")};var Yh=function(e){return e.getParam("table_style_by_css",false,"boolean")};var Kh=function(e){return e.getParam("forced_block_attrs",{},"object")};var $h=function(e){return e.getParam("table_cell_class_list",[],"array")};var Gh=function(e){return e.getParam("table_row_class_list",[],"array")};var Xh=function(e){return e.getParam("table_class_list",[],"array")};var Zh=function(e){return e.getParam("color_picker_callback")};var Jh=function(e){return e.getParam("table_responsive_width")===false};var Qh=function(e){var t=e.getParam("table_clone_elements");if(de.isString(t)){return w.some(t.split(/[ ,]/))}else if(Array.isArray(t)){return w.some(t)}else{return w.none()}};var ev=function(e){var t=e.getParam("object_resizing",true);return t==="table"||t};var tv=function(e){var t=e.getParam("table_toolbar",Rh);if(t===""||t===false){return[]}else if(de.isString(t)){return t.split(/[ ,]/)}else if(de.isArray(t)){return t}else{return[]}};var nv=function(e,t){return e.fire("newrow",{node:t})};var rv=function(e,t){return e.fire("newcell",{node:t})};function iv(e,t){var n=function(e){return hr.name(kh.getBody(e))==="table"};var r=function(t){var r=tl.getGridSize(t);return n(e)===false||r.rows()>1};var i=function(t){var r=tl.getGridSize(t);return n(e)===false||r.columns()>1};var a=Qh(e);var o=function(t,n,r,i){return function(o,s){var u=Hr.descendants(o,"td[data-mce-style],th[data-mce-style]");J.each(u,function(e){Cr.remove(e,"data-mce-style")});var l=i();var c=ze.fromDom(e.getDoc());var f=Qu(Nh.directionAt);var d=Ya.cellOperations(r,c,a);return n(o)?t(l,o,s,d,f).bind(function(t){J.each(t.newRows(),function(t){nv(e,t.dom())});J.each(t.newCells(),function(t){rv(e,t.dom())});return t.cursor().map(function(t){var n=e.dom.createRng();n.setStart(t.dom(),0);n.setEnd(t.dom(),0);return n})}):w.none()}};var s=o(_h.eraseRows,r,v.noop,t);var u=o(_h.eraseColumns,i,v.noop,t);var l=o(_h.insertRowsBefore,v.always,v.noop,t);var c=o(_h.insertRowsAfter,v.always,v.noop,t);var f=o(_h.insertColumnsBefore,v.always,Su.halve,t);var d=o(_h.insertColumnsAfter,v.always,Su.halve,t);var h=o(_h.mergeCells,v.always,v.noop,t);var p=o(_h.unmergeCells,v.always,v.noop,t);var g=o(_h.pasteRowsBefore,v.always,v.noop,t);var m=o(_h.pasteRowsAfter,v.always,v.noop,t);var y=o(_h.pasteCells,v.always,v.noop,t);return{deleteRow:s,deleteColumn:u,insertRowsBefore:l,insertRowsAfter:c,insertColumnsBefore:f,insertColumnsAfter:d,mergeCells:h,unmergeCells:p,pasteRowsBefore:g,pasteRowsAfter:m,pasteCells:y}}var av=function(e,t,n){var r=yi.fromTable(e);var i=ki.generate(r);var a=_f.onCells(i,t);return a.map(function(e){var t=sc.toGrid(i,n,false);var r=t.slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan());var a=_f.toDetailList(r,n);return fc.copy(a)})};var ov={copyRows:av};var sv=tinymce.util.Tools.resolve("tinymce.util.Tools");var uv=function(e,t,n){var r=e.select("td,th",t);var i;var a=function(t,r){for(var i=0;i<r.length;i++){var a=e.getStyle(r[i],n);if(typeof t==="undefined"){t=a}if(t!==a){return""}}return t};i=a(i,r);return i};var lv=function(e,t,n){if(n){e.formatter.apply("align"+n,{},t)}};var cv=function(e,t,n){if(n){e.formatter.apply("valign"+n,{},t)}};var fv=function(e,t){sv.each("left center right".split(" "),function(n){e.formatter.remove("align"+n,{},t)})};var dv=function(e,t){sv.each("top middle bottom".split(" "),function(n){e.formatter.remove("valign"+n,{},t)})};var hv={applyAlign:lv,applyVAlign:cv,unApplyAlign:fv,unApplyVAlign:dv,getTDTHOverallStyle:uv};var vv=function(e,t,n){var r=function(e,n){n=n||[];sv.each(e,function(e){var i={text:e.text||e.title};if(e.menu){i.menu=r(e.menu)}else{i.value=e.value;if(t){t(i)}}n.push(i)});return n};return r(e,n||[])};var pv=function(e,t){var n=e.dom;var r=t.control.rootControl;var i=r.toJSON();var a=n.parseStyle(i.style);if(t.control.name()==="style"){r.find("#borderStyle").value(a["border-style"]||"")[0].fire("select");r.find("#borderColor").value(a["border-color"]||"")[0].fire("change");r.find("#backgroundColor").value(a["background-color"]||"")[0].fire("change");r.find("#width").value(a.width||"").fire("change");r.find("#height").value(a.height||"").fire("change")}else{a["border-style"]=i.borderStyle;a["border-color"]=i.borderColor;a["background-color"]=i.backgroundColor;a.width=i.width?kh.addSizeSuffix(i.width):"";a.height=i.height?kh.addSizeSuffix(i.height):""}r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(a))))};var gv=function(e,t){var n=e.parseStyle(e.getAttrib(t,"style"));var r={};if(n["border-style"]){r.borderStyle=n["border-style"]}if(n["border-color"]){r.borderColor=n["border-color"]}if(n["background-color"]){r.backgroundColor=n["background-color"]}r.style=e.serializeStyle(n);return r};var mv=function(e){var t=function(){var t=Zh(e);if(t){return function(n){return t.call(e,function(e){n.control.value(e).fire("change")},n.control.value())}}};return{title:"Advanced",type:"form",defaults:{onchange:v.curry(pv,e)},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:v.curry(pv,e),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:t()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:t()}]}]}};var yv={createStyleForm:mv,buildListItems:vv,updateStyleField:pv,extractAdvancedStyles:gv};var bv=function(e,t){e.style.cssText+=";"+t};var _v=function(e,t){var n=e.dom;var r={width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),scope:n.getAttrib(t,"scope"),class:n.getAttrib(t,"class")};r.type=t.nodeName.toLowerCase();sv.each("left center right".split(" "),function(n){if(e.formatter.matchNode(t,"align"+n)){r.align=n}});sv.each("top middle bottom".split(" "),function(n){if(e.formatter.matchNode(t,"valign"+n)){r.valign=n}});if(zh(e)){sv.extend(r,yv.extractAdvancedStyles(n,t))}return r};var wv=function(e,t,n){var r=e.dom;var i;function a(e,t,n){if(n){r.setAttrib(e,t,n)}}function o(e,t,n){if(n){r.setStyle(e,t,n)}}yv.updateStyleField(e,n);i=n.control.rootControl.toJSON();e.undoManager.transact(function(){sv.each(t,function(n){a(n,"scope",i.scope);if(t.length===1){a(n,"style",i.style)}else{bv(n,i.style)}a(n,"class",i.class);o(n,"width",kh.addSizeSuffix(i.width));o(n,"height",kh.addSizeSuffix(i.height));if(i.type&&n.nodeName.toLowerCase()!==i.type){n=r.rename(n,i.type)}if(t.length===1){hv.unApplyAlign(e,n);hv.unApplyVAlign(e,n)}if(i.align){hv.applyAlign(e,n,i.align)}if(i.valign){hv.applyVAlign(e,n,i.valign)}});e.focus()})};var xv=function(e){var t,n,r,i=[];i=e.dom.select("td[data-mce-selected],th[data-mce-selected]");t=e.dom.getParent(e.selection.getStart(),"td,th");if(!i.length&&t){i.push(t)}t=t||i[0];if(!t){return}if(i.length>1){n={width:"",height:"",scope:"",class:"",align:"",style:"",type:t.nodeName.toLowerCase()}}else{n=_v(e,t)}if($h(e).length>0){r={name:"class",type:"listbox",label:"Class",values:yv.buildListItems($h(e),function(t){if(t.value){t.textStyle=function(){return e.formatter.getCssText({block:"td",classes:[t.value]})}}})}}var a={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:false,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:v.curry(yv.updateStyleField,e)},{label:"Height",name:"height",onchange:v.curry(yv.updateStyleField,e)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},r]};if(zh(e)){e.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:n,body:[{title:"General",type:"form",items:a},yv.createStyleForm(e)],onsubmit:v.curry(wv,e,i)})}else{e.windowManager.open({title:"Cell properties",data:n,body:a,onsubmit:v.curry(wv,e,i)})}};var Tv={open:xv};var Cv=function(e,t){var n=e.dom;var r={height:n.getStyle(t,"height")||n.getAttrib(t,"height"),scope:n.getAttrib(t,"scope"),class:n.getAttrib(t,"class")};r.type=t.parentNode.nodeName.toLowerCase();sv.each("left center right".split(" "),function(n){if(e.formatter.matchNode(t,"align"+n)){r.align=n}});if(Uh(e)){sv.extend(r,yv.extractAdvancedStyles(n,t))}return r};var kv=function(e,t,n){var r=e.getParent(t,"table");var i=t.parentNode;var a=e.select(n,r)[0];if(!a){a=e.create(n);if(r.firstChild){if(r.firstChild.nodeName==="CAPTION"){e.insertAfter(a,r.firstChild)}else{r.insertBefore(a,r.firstChild)}}else{r.appendChild(a)}}a.appendChild(t);if(!i.hasChildNodes()){e.remove(i)}};function Sv(e,t,n){var r=e.dom;var i;function a(e,t,n){if(n){r.setAttrib(e,t,n)}}function o(e,t,n){if(n){r.setStyle(e,t,n)}}yv.updateStyleField(e,n);i=n.control.rootControl.toJSON();e.undoManager.transact(function(){sv.each(t,function(n){a(n,"scope",i.scope);a(n,"style",i.style);a(n,"class",i.class);o(n,"height",kh.addSizeSuffix(i.height));if(i.type!==n.parentNode.nodeName.toLowerCase()){kv(e.dom,n,i.type)}if(t.length===1){hv.unApplyAlign(e,n)}if(i.align){hv.applyAlign(e,n,i.align)}});e.focus()})}var Ev=function(e){var t=e.dom;var n,r,i,a,o;var s=[];var u;n=t.getParent(e.selection.getStart(),"table");r=t.getParent(e.selection.getStart(),"td,th");sv.each(n.rows,function(e){sv.each(e.cells,function(n){if(t.getAttrib(n,"data-mce-selected")||n===r){s.push(e);return false}})});i=s[0];if(!i){return}if(s.length>1){o={height:"",scope:"",class:"",align:"",type:i.parentNode.nodeName.toLowerCase()}}else{o=Cv(e,i)}if(Gh(e).length>0){a={name:"class",type:"listbox",label:"Class",values:yv.buildListItems(Gh(e),function(t){if(t.value){t.textStyle=function(){return e.formatter.getCssText({block:"tr",classes:[t.value]})}}})}}u={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},a]};if(Uh(e)){e.windowManager.open({title:"Row properties",data:o,bodyType:"tabpanel",body:[{title:"General",type:"form",items:u},yv.createStyleForm(e)],onsubmit:v.curry(Sv,e,s)})}else{e.windowManager.open({title:"Row properties",data:o,body:u,onsubmit:v.curry(Sv,e,s)})}};var Pv={open:Ev};var Ov=tinymce.util.Tools.resolve("tinymce.Env");var Mv={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:true};var Av=function(){return ze.fromTag("table")};var Nv=function(){return ze.fromTag("tbody")};var Rv=function(){return ze.fromTag("tr")};var Dv=function(){return ze.fromTag("th")};var Lv=function(){return ze.fromTag("td")};var Iv=function(e,t,n,r,i){if(i===void 0){i=Mv}var a=Av();Wi.setAll(a,i.styles);Cr.setAll(a,i.attributes);var o=Nv();Zi.append(a,o);var s=[];for(var u=0;u<e;u++){var l=Rv();for(var c=0;c<t;c++){var f=u<n||c<r?Dv():Lv();if(c<r){Cr.set(f,"scope","row")}if(u<n){Cr.set(f,"scope","col")}Zi.append(f,ze.fromTag("br"));if(i.percentages){Wi.set(f,"width",100/t+"%")}Zi.append(l,f)}s.push(l)}na.append(o,s);return a};var Bv=function(e){return e.dom().innerHTML};var jv=function(e,t){var n=tr.owner(e);var r=n.dom();var i=ze.fromDom(r.createDocumentFragment());var a=Za.fromHtml(t,r);na.append(i,a);oa.empty(e);Zi.append(e,i)};var Fv=function(e){var t=ze.fromTag("div");var n=ze.fromDom(e.dom().cloneNode(true));Zi.append(t,n);return Bv(t)};var Hv={get:Bv,set:jv,getOuter:Fv};var zv=function(e,t){e.selection.select(t.dom(),true);e.selection.collapse(true)};var Uv=function(e,t){ti.descendant(t,"td,th").each(v.curry(zv,e))};var Vv=function(e,t){J.each(Hr.descendants(t,"tr"),function(t){nv(e,t.dom());J.each(Hr.descendants(t,"th,td"),function(t){rv(e,t.dom())})})};var Wv=function(e){return de.isString(e)&&e.indexOf("%")!==-1};var qv=function(e,t,n){var r=Bh(e);var i={styles:r,attributes:Ih(e),percentages:Wv(r.width)&&!Jh(e)};var a=Iv(n,t,0,0,i);Cr.set(a,"data-mce-id","__mce");var o=Hv.getOuter(a);e.insertContent(o);return ti.descendant(kh.getBody(e),'table[data-mce-id="__mce"]').map(function(t){if(Jh(e)){Wi.set(t,"width",Wi.get(t,"width"))}Cr.remove(t,"data-mce-id");Vv(e,t);Uv(e,t);return t.dom()}).getOr(null)};var Yv={insert:qv};function Kv(e,t,n,r){if(t.tagName==="TD"||t.tagName==="TH"){e.setStyle(t,n,r)}else{if(t.children){for(var i=0;i<t.children.length;i++){Kv(e,t.children[i],n,r)}}}}var $v=function(e,t){var n=e.dom;var r={width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),cellspacing:n.getStyle(t,"border-spacing")||n.getAttrib(t,"cellspacing"),cellpadding:n.getAttrib(t,"data-mce-cell-padding")||n.getAttrib(t,"cellpadding")||hv.getTDTHOverallStyle(e.dom,t,"padding"),border:n.getAttrib(t,"data-mce-border")||n.getAttrib(t,"border")||hv.getTDTHOverallStyle(e.dom,t,"border"),borderColor:n.getAttrib(t,"data-mce-border-color"),caption:!!n.select("caption",t)[0],class:n.getAttrib(t,"class")};sv.each("left center right".split(" "),function(n){if(e.formatter.matchNode(t,"align"+n)){r.align=n}});if(Vh(e)){sv.extend(r,yv.extractAdvancedStyles(n,t))}return r};var Gv=function(e,t,n){var r=e.dom;var i={};var a={};i.class=n.class;a.height=kh.addSizeSuffix(n.height);if(r.getAttrib(t,"width")&&!Yh(e)){i.width=kh.removePxSuffix(n.width)}else{a.width=kh.addSizeSuffix(n.width)}if(Yh(e)){a["border-width"]=kh.addSizeSuffix(n.border);a["border-spacing"]=kh.addSizeSuffix(n.cellspacing);sv.extend(i,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})}else{sv.extend(i,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing})}if(Yh(e)){if(t.children){for(var o=0;o<t.children.length;o++){Kv(r,t.children[o],{"border-width":kh.addSizeSuffix(n.border),"border-color":n.borderColor,padding:kh.addSizeSuffix(n.cellpadding)})}}}if(n.style){sv.extend(a,r.parseStyle(n.style))}else{a=sv.extend({},r.parseStyle(r.getAttrib(t,"style")),a)}i.style=r.serializeStyle(a);r.setAttribs(t,i)};var Xv=function(e,t,n){var r=e.dom;var i;var a;yv.updateStyleField(e,n);a=n.control.rootControl.toJSON();if(a.class===false){delete a.class}e.undoManager.transact(function(){if(!t){t=Yv.insert(e,a.cols||1,a.rows||1)}Gv(e,t,a);i=r.select("caption",t)[0];if(i&&!a.caption){r.remove(i)}if(!i&&a.caption){i=r.create("caption");i.innerHTML=!Ov.ie?'<br data-mce-bogus="1"/>':"¬†";t.insertBefore(i,t.firstChild)}hv.unApplyAlign(e,t);if(a.align){hv.applyAlign(e,t,a.align)}e.focus();e.addVisual()})};var Zv=function(e,t){var n=e.dom;var r,i,a,o,s={},u;if(t===true){r=n.getParent(e.selection.getStart(),"table");if(r){s=$v(e,r)}}else{i={label:"Cols",name:"cols"};a={label:"Rows",name:"rows"}}if(Xh(e).length>0){if(s.class){s.class=s.class.replace(/\s*mce\-item\-table\s*/g,"")}o={name:"class",type:"listbox",label:"Class",values:yv.buildListItems(Xh(e),function(t){if(t.value){t.textStyle=function(){return e.formatter.getCssText({block:"table",classes:[t.value]})}}})}}u={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:false,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:Wh(e)?[i,a,{label:"Width",name:"width",onchange:v.curry(yv.updateStyleField,e)},{label:"Height",name:"height",onchange:v.curry(yv.updateStyleField,e)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[i,a,{label:"Width",name:"width",onchange:v.curry(yv.updateStyleField,e)},{label:"Height",name:"height",onchange:v.curry(yv.updateStyleField,e)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},o]};if(Vh(e)){e.windowManager.open({title:"Table properties",data:s,bodyType:"tabpanel",body:[{title:"General",type:"form",items:u},yv.createStyleForm(e)],onsubmit:v.curry(Xv,e,r)})}else{e.windowManager.open({title:"Table properties",data:s,body:u,onsubmit:v.curry(Xv,e,r)})}};var Jv={open:Zv};var Qv=sv.each;var ep=function(e,t,n,r,i){var a=kh.getIsRoot(e);var o=function(){var t=ze.fromDom(e.dom.getParent(e.selection.getStart(),"th,td"));var n=pi.table(t,a);n.filter(v.not(a)).each(function(t){var n=ze.fromText("");Zi.after(t,n);oa.remove(t);var r=e.dom.createRng();r.setStart(n.dom(),0);r.setEnd(n.dom(),0);e.selection.setRng(r)})};var s=function(){return ze.fromDom(e.dom.getParent(e.selection.getStart(),"th,td"))};var u=function(e){return pi.table(e,a)};var l=function(t){var i=s();var a=u(i);a.each(function(a){var o=Ms.forMenu(r,a,i);t(a,o).each(function(t){e.selection.setRng(t);e.focus();n.clear(a)})})};var c=function(t){var n=s();var i=u(n);return i.bind(function(t){var i=ze.fromDom(e.getDoc());var a=Ms.forMenu(r,t,n);var o=Ya.cellOperations(v.noop,i,w.none());return ov.copyRows(t,a,o)})};var f=function(t){i.get().each(function(i){var a=J.map(i,function(e){return _a.deep(e)});var o=s();var l=u(o);l.bind(function(i){var s=ze.fromDom(e.getDoc());var u=Ya.paste(s);var l=Ms.pasteRows(r,i,o,a,u);t(i,l).each(function(t){e.selection.setRng(t);e.focus();n.clear(i)})})})};Qv({mceTableSplitCells:function(){l(t.unmergeCells)},mceTableMergeCells:function(){l(t.mergeCells)},mceTableInsertRowBefore:function(){l(t.insertRowsBefore)},mceTableInsertRowAfter:function(){l(t.insertRowsAfter)},mceTableInsertColBefore:function(){l(t.insertColumnsBefore)},mceTableInsertColAfter:function(){l(t.insertColumnsAfter)},mceTableDeleteCol:function(){l(t.deleteColumn)},mceTableDeleteRow:function(){l(t.deleteRow)},mceTableCutRow:function(e){i.set(c());l(t.deleteRow)},mceTableCopyRow:function(e){i.set(c())},mceTablePasteRowBefore:function(e){f(t.pasteRowsBefore)},mceTablePasteRowAfter:function(e){f(t.pasteRowsAfter)},mceTableDelete:o},function(t,n){e.addCommand(n,t)});Qv({mceInsertTable:v.curry(Jv.open,e),mceTableProps:v.curry(Jv.open,e,true),mceTableRowProps:v.curry(Pv.open,e),mceTableCellProps:v.curry(Tv.open,e)},function(t,n){e.addCommand(n,function(e,n){t(n)})})};var tp={registerCommands:ep};var np=function(e){var t=w.from(e.dom().documentElement).map(ze.fromDom).getOr(e);return{parent:v.constant(t),view:v.constant(e),origin:v.constant(Mu(0,0))}};var rp=function(e,t){var n=v.curry(Iu.absolute,t);return{parent:v.constant(t),view:v.constant(e),origin:n}};var ip=function(e,t){return{parent:v.constant(t),view:v.constant(e),origin:v.constant(Mu(0,0))}};var ap={only:np,detached:rp,body:ip};function op(e){var t=we.immutable.apply(null,e);var n=[];var r=function(e){if(e===undefined){throw"Event bind error: undefined handler"}n.push(e)};var i=function(e){n=J.filter(n,function(t){return t!==e})};var a=function(){var e=t.apply(null,arguments);J.each(n,function(t){t(e)})};return{bind:r,unbind:i,trigger:a}}var sp=function(e){var t=ue.map(e,function(e){return{bind:e.bind,unbind:e.unbind}});var n=ue.map(e,function(e){return e.trigger});return{registry:t,trigger:n}};var up={create:sp};var lp=sl.exactly(["compare","extract","mutate","sink"]);var cp=sl.exactly(["element","start","stop","destroy"]);var fp=sl.exactly(["forceDrop","drop","move","delayDrop"]);var dp={mode:lp,sink:cp,api:fp};var hp=kc.css("ephox-dragster");var vp={resolve:hp.resolve};function pp(e){var t=zl.merge({layerClass:vp.resolve("blocker")},e);var n=ze.fromTag("div");Cr.set(n,"role","presentation");Wi.setAll(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"});qc.add(n,vp.resolve("blocker"));qc.add(n,t.layerClass);var r=function(){return n};var i=function(){oa.remove(n)};return{element:r,destroy:i}}var gp=function(e,t,n,r,i,a,o){return{target:v.constant(e),x:v.constant(t),y:v.constant(n),stop:r,prevent:i,kill:a,raw:v.constant(o)}};var mp=function(e,t){return function(n){if(!e(n)){return}var r=ze.fromDom(n.target);var i=function(){n.stopPropagation()};var a=function(){n.preventDefault()};var o=v.compose(a,i);var s=gp(r,n.clientX,n.clientY,i,a,o,n);t(s)}};var yp=function(e,t,n,r,i){var a=mp(n,r);e.dom().addEventListener(t,a,i);return{unbind:v.curry(wp,e,t,a,i)}};var bp=function(e,t,n,r){return yp(e,t,n,r,false)};var _p=function(e,t,n,r){return yp(e,t,n,r,true)};var wp=function(e,t,n,r){e.dom().removeEventListener(t,n,r)};var xp={bind:bp,capture:_p};var Tp=v.constant(true);var Cp=function(e,t,n){return xp.bind(e,t,Tp,n)};var kp=function(e,t,n){return xp.capture(e,t,Tp,n)};var Sp={bind:Cp,capture:kp};var Ep=function(e,t){return Mu(t.left()-e.left(),t.top()-e.top())};var Pp=function(e){return w.some(Mu(e.x(),e.y()))};var Op=function(e,t){e.mutate(t.left(),t.top())};var Mp=function(e,t){var n=pp(t);var r=Sp.bind(n.element(),"mousedown",e.forceDrop);var i=Sp.bind(n.element(),"mouseup",e.drop);var a=Sp.bind(n.element(),"mousemove",e.move);var o=Sp.bind(n.element(),"mouseout",e.delayDrop);var s=function(){n.destroy();i.unbind();a.unbind();o.unbind();r.unbind()};var u=function(e){Zi.append(e,n.element())};var l=function(){oa.remove(n.element())};return dp.sink({element:n.element,start:u,stop:l,destroy:s})};var Ap=dp.mode({compare:Ep,extract:Pp,sink:Mp,mutate:Op});function Np(){var e=w.none();var t=function(){e=w.none()};var n=function(t,n){var r=e.map(function(e){return t.compare(e,n)});e=w.some(n);return r};var r=function(e,t){var r=t.extract(e);r.each(function(e){var r=n(t,e);r.each(function(e){i.trigger.move(e)})})};var i=up.create({move:op(["info"])});return{onEvent:r,reset:t,events:i.registry}}function Rp(e){var t=function(e,t){};return{onEvent:t,reset:v.noop}}function Dp(){var e=Rp();var t=Np();var n=e;var r=function(){n.reset();n=t};var i=function(){n.reset();n=e};var a=function(e,t){n.onEvent(e,t)};var o=function(){return n===t};return{on:r,off:i,isOn:o,onEvent:a,events:t.events}}var Lp=function(e,t){var n=null;var r=null;var i=function(){if(n!==null){clearTimeout(n);n=null;r=null}};var a=function(){r=arguments;if(n===null){n=setTimeout(function(){e.apply(null,r);n=null;r=null},t)}};return{cancel:i,throttle:a}};var Ip=function(e,t){var n=null;var r=function(){if(n!==null){clearTimeout(n);n=null}};var i=function(){var r=arguments;if(n===null){n=setTimeout(function(){e.apply(null,r);n=null;r=null},t)}};return{cancel:r,throttle:i}};var Bp=function(e,t){var n=null;var r=function(){if(n!==null){clearTimeout(n);n=null}};var i=function(){var r=arguments;if(n!==null){clearTimeout(n)}n=setTimeout(function(){e.apply(null,r);n=null;r=null},t)};return{cancel:r,throttle:i}};var jp={adaptable:Lp,first:Ip,last:Bp};var Fp=function(e,t,n){var r=false;var i=up.create({start:op([]),stop:op([])});var a=Dp();var o=function(){h.stop();if(a.isOn()){a.off();i.trigger.stop()}};var s=jp.last(o,200);var u=function(e){h.start(e);a.on();i.trigger.start()};var l=function(e,n){s.cancel();a.onEvent(e,t)};a.events.move.bind(function(n){t.mutate(e,n.info())});var c=function(){r=true};var f=function(){r=false};var d=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);if(r){return e.apply(null,t)}}};var h=t.sink(dp.api({forceDrop:o,drop:d(o),move:d(l),delayDrop:d(s.throttle)}),n);var v=function(){h.destroy()};return{element:h.element,go:u,on:c,off:f,destroy:v,events:i.registry}};var Hp={setup:Fp};var zp=function(e,t){var n=t!==undefined?t:{};var r=n.mode!==undefined?n.mode:Ap;return Hp.setup(e,r,t)};var Up={transform:zp};function Vp(){var e=up.create({drag:op(["xDelta","yDelta"])});var t=function(t,n){e.trigger.drag(t,n)};return{mutate:t,events:e.registry}}function Wp(){var e=up.create({drag:op(["xDelta","yDelta","target"])});var t=w.none();var n=Vp();n.events.drag.bind(function(n){t.each(function(t){e.trigger.drag(n.xDelta(),n.yDelta(),t)})});var r=function(e){t=w.some(e)};var i=function(){return t};return{assign:r,get:i,mutate:n.mutate,events:e.registry}}var qp=function(e){return ti.first(e).isSome()};var Yp=function(e,t,n){return ti.ancestor(e,t,n).isSome()};var Kp=function(e,t){return ti.sibling(e,t).isSome()};var $p=function(e,t){return ti.child(e,t).isSome()};var Gp=function(e,t){return ti.descendant(e,t).isSome()};var Xp=function(e,t,n){return ti.closest(e,t,n).isSome()};var Zp={any:qp,ancestor:Yp,sibling:Kp,child:$p,descendant:Gp,closest:Xp};var Jp=Ec.resolve("resizer-bar-dragging");function Qp(e,t,n){var r=Wp();var i=Up.transform(r,{});var a=w.none();var o=function(e,t){return w.from(Cr.get(e,t))};r.events.drag.bind(function(e){o(e.target(),"data-row").each(function(t){var n=vd.getInt(e.target(),"top");Wi.set(e.target(),"top",n+e.yDelta()+"px")});o(e.target(),"data-column").each(function(t){var n=vd.getInt(e.target(),"left");Wi.set(e.target(),"left",n+e.xDelta()+"px")})});var s=function(e,t){var n=vd.getInt(e,t);var r=parseInt(Cr.get(e,"data-initial-"+t),10);return n-r};i.events.stop.bind(function(){r.get().each(function(r){a.each(function(i){o(r,"data-row").each(function(e){var t=s(r,"top");Cr.remove(r,"data-initial-top");p.trigger.adjustHeight(i,t,parseInt(e,10))});o(r,"data-column").each(function(e){var t=s(r,"left");Cr.remove(r,"data-initial-left");p.trigger.adjustWidth(i,t,parseInt(e,10))});uf.refresh(e,i,n,t)})})});var u=function(t,n){p.trigger.startAdjust();r.assign(t);Cr.set(t,"data-initial-"+n,parseInt(Wi.get(t,n),10));qc.add(t,Jp);Wi.set(t,"opacity","0.2");i.go(e.parent())};var l=Sp.bind(e.parent(),"mousedown",function(e){if(uf.isRowBar(e.target())){u(e.target(),"top")}if(uf.isColBar(e.target())){u(e.target(),"left")}});var c=function(t){return Dn.eq(t,e.view())};var f=Sp.bind(e.view(),"mouseover",function(r){if(hr.name(r.target())==="table"||Zp.ancestor(r.target(),"table",c)){a=hr.name(r.target())==="table"?w.some(r.target()):ti.ancestor(r.target(),"table",c);a.each(function(r){uf.refresh(e,r,n,t)})}else if(Pr.inBody(r.target())){uf.destroy(e)}});var d=function(){l.unbind();f.unbind();i.destroy();uf.destroy(e)};var h=function(r){uf.refresh(e,r,n,t)};var p=up.create({adjustHeight:op(["table","delta","row"]),adjustWidth:op(["table","delta","column"]),startAdjust:op([])});return{destroy:d,refresh:h,on:i.on,off:i.off,hideBars:v.curry(uf.hide,e),showBars:v.curry(uf.show,e),events:p.registry}}function eg(e,t){var n=Zu.height;var r=Qp(e,t,n);var i=up.create({beforeResize:op(["table"]),afterResize:op(["table"]),startDrag:op([])});r.events.adjustHeight.bind(function(e){i.trigger.beforeResize(e.table());var t=n.delta(e.delta(),e.table());Vd.adjustHeight(e.table(),t,e.row(),n);i.trigger.afterResize(e.table())});r.events.startAdjust.bind(function(e){i.trigger.startDrag()});r.events.adjustWidth.bind(function(e){i.trigger.beforeResize(e.table());var n=t.delta(e.delta(),e.table());Vd.adjustWidth(e.table(),n,e.column(),t);i.trigger.afterResize(e.table())});return{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:i.registry}}var tg=function(){var e=ze.fromTag("div");Wi.setAll(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"});Zi.append(Pr.body(),e);return e};var ng=function(e,t){return e.inline?ap.body(kh.getBody(e),tg()):ap.only(ze.fromDom(e.getDoc()))};var rg=function(e,t){if(e.inline){oa.remove(t.parent())}};var ig={get:ng,remove:rg};function ag(e){var t=w.none();var n=w.none();var r=w.none();var i=/(\d+(\.\d+)?)%/;var a,o;var s=function(e){return e.nodeName==="TABLE"};var u=function(t){return e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width")};var l=function(){return n};var c=function(){return r.getOr(ap.only(ze.fromDom(e.getBody())))};var f=function(){n.each(function(e){e.destroy()});r.each(function(t){ig.remove(e,t)})};e.on("init",function(){var i=Qu(Nh.directionAt);var a=ig.get(e);r=w.some(a);if(ev(e)&&jh(e)){var o=eg(a,i);o.on();o.events.startDrag.bind(function(n){t=w.some(e.selection.getRng())});o.events.afterResize.bind(function(n){var r=n.table();var i=Hr.descendants(r,"td[data-mce-style],th[data-mce-style]");J.each(i,function(e){Cr.remove(e,"data-mce-style")});t.each(function(t){e.selection.setRng(t);e.focus()});e.undoManager.add()});n=w.some(o)}});e.on("ObjectResizeStart",function(e){if(s(e.target)){a=e.width;o=u(e.target)}});e.on("ObjectResized",function(t){if(s(t.target)){var n=t.target;if(i.test(o)){var r=parseFloat(i.exec(o)[1]);var u=t.width*r/a;e.dom.setStyle(n,"width",u+"%")}else{var l=[];sv.each(n.rows,function(t){sv.each(t.cells,function(t){var n=e.dom.getStyle(t,"width",true);l.push({cell:t,width:n})})});sv.each(l,function(t){e.dom.setStyle(t.cell,"width",t.width);e.dom.setAttrib(t.cell,"width",null)})}}});return{lazyResize:l,lazyWire:c,destroy:f}}var og=function(e){return cg(function(t,n,r,i){return t(e)})};var sg=function(e){return cg(function(t,n,r,i){return n(e)})};var ug=function(e,t){return cg(function(n,r,i,a){return i(e,t)})};var lg=function(e){return cg(function(t,n,r,i){return i(e)})};var cg=function(e){return{fold:e}};var fg={none:og,first:sg,middle:ug,last:lg};var dg=function(e,t){return pi.table(e,t).bind(function(t){var n=pi.cells(t);var r=J.findIndex(n,function(t){return Dn.eq(e,t)});return r.map(function(e){return{index:v.constant(e),all:v.constant(n)}})})};var hg=function(e,t){var n=dg(e,t);return n.fold(function(){return fg.none(e)},function(t){return t.index()+1<t.all().length?fg.middle(e,t.all()[t.index()+1]):fg.last(e)})};var vg=function(e,t){var n=dg(e,t);return n.fold(function(){return fg.none()},function(t){return t.index()-1>=0?fg.middle(e,t.all()[t.index()-1]):fg.first(e)})};var pg={next:hg,prev:vg};var gg=ms.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]);var mg=function(e,t,n,r){return e.fold(t,n,r)};var yg=function(e){return e.fold(v.identity,v.identity,v.identity)};var bg={before:gg.before,on:gg.on,after:gg.after,cata:mg,getStart:yg};var _g=ms.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]);var wg=we.immutable("start","soffset","finish","foffset");var xg=function(e){return _g.exact(e.start(),e.soffset(),e.finish(),e.foffset())};var Tg=function(e){return e.match({domRange:function(e){return ze.fromDom(e.startContainer)},relative:function(e,t){return bg.getStart(e)},exact:function(e,t,n,r){return e}})};var Cg=function(e){var t=Tg(e);return tr.defaultView(t)};var kg={domRange:_g.domRange,relative:_g.relative,exact:_g.exact,exactFromRange:xg,range:wg,getWin:Cg};var Sg=function(e,t,n,r){var i=tr.owner(e);var a=i.dom().createRange();a.setStart(e.dom(),t);a.setEnd(n.dom(),r);return a};var Eg=function(e,t,n,r){var i=Sg(e,t,n,r);return ze.fromDom(i.commonAncestorContainer)};var Pg=function(e,t,n,r){var i=Sg(e,t,n,r);var a=Dn.eq(e,n)&&t===r;return i.collapsed&&!a};var Og={after:Pg,commonAncestorContainer:Eg};var Mg=function(e,t){var n=t||document;var r=n.createDocumentFragment();J.each(e,function(e){r.appendChild(e.dom())});return ze.fromDom(r)};var Ag={fromElements:Mg};var Ng=function(e,t){var n=e.document.createRange();Rg(n,t);return n};var Rg=function(e,t){e.selectNodeContents(t.dom())};var Dg=function(e,t){return t.compareBoundaryPoints(e.END_TO_START,e)<1&&t.compareBoundaryPoints(e.START_TO_END,e)>-1};var Lg=function(e){return e.document.createRange()};var Ig=function(e,t){t.fold(function(t){e.setStartBefore(t.dom())},function(t,n){e.setStart(t.dom(),n)},function(t){e.setStartAfter(t.dom())})};var Bg=function(e,t){t.fold(function(t){e.setEndBefore(t.dom())},function(t,n){e.setEnd(t.dom(),n)},function(t){e.setEndAfter(t.dom())})};var jg=function(e,t){zg(e);e.insertNode(t.dom())};var Fg=function(e,t,n){var r=e.document.createRange();Ig(r,t);Bg(r,n);return r};var Hg=function(e,t,n,r,i){var a=e.document.createRange();a.setStart(t.dom(),n);a.setEnd(r.dom(),i);return a};var zg=function(e){e.deleteContents()};var Ug=function(e){var t=e.cloneContents();return ze.fromDom(t)};var Vg=function(e){return{left:v.constant(e.left),top:v.constant(e.top),right:v.constant(e.right),bottom:v.constant(e.bottom),width:v.constant(e.width),height:v.constant(e.height)}};var Wg=function(e){var t=e.getClientRects();var n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?w.some(n).map(Vg):w.none()};var qg=function(e){var t=e.getBoundingClientRect();return t.width>0||t.height>0?w.some(t).map(Vg):w.none()};var Yg=function(e){return e.toString()};var Kg={create:Lg,replaceWith:jg,selectNodeContents:Ng,selectNodeContentsUsing:Rg,relativeToNative:Fg,exactToNative:Hg,deleteContents:zg,cloneFragment:Ug,getFirstRect:Wg,getBounds:qg,isWithin:Dg,toString:Yg};var $g=ms.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);var Gg=function(e,t,n){return t(ze.fromDom(n.startContainer),n.startOffset,ze.fromDom(n.endContainer),n.endOffset)};var Xg=function(e,t){return t.match({domRange:function(e){return{ltr:v.constant(e),rtl:w.none}},relative:function(t,n){return{ltr:vt.cached(function(){return Kg.relativeToNative(e,t,n)}),rtl:vt.cached(function(){return w.some(Kg.relativeToNative(e,n,t))})}},exact:function(t,n,r,i){return{ltr:vt.cached(function(){return Kg.exactToNative(e,t,n,r,i)}),rtl:vt.cached(function(){return w.some(Kg.exactToNative(e,r,i,t,n))})}}})};var Zg=function(e,t){var n=t.ltr();if(n.collapsed){var r=t.rtl().filter(function(e){return e.collapsed===false});return r.map(function(e){return $g.rtl(ze.fromDom(e.endContainer),e.endOffset,ze.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return Gg(e,$g.ltr,n)})}else{return Gg(e,$g.ltr,n)}};var Jg=function(e,t){var n=Xg(e,t);return Zg(e,n)};var Qg=function(e,t){var n=Jg(e,t);return n.match({ltr:function(t,n,r,i){var a=e.document.createRange();a.setStart(t.dom(),n);a.setEnd(r.dom(),i);return a},rtl:function(t,n,r,i){var a=e.document.createRange();a.setStart(r.dom(),i);a.setEnd(t.dom(),n);return a}})};var em={ltr:$g.ltr,rtl:$g.rtl,diagnose:Jg,asLtrRange:Qg};var tm=function(e,t,n,r,i){if(i===0){return 0}else if(t===r){return i-1}var a=r;for(var o=1;o<i;o++){var s=e(o);var u=Math.abs(t-s.left);if(n>s.bottom){}else if(n<s.top||u>a){return o-1}else{a=u}}return 0};var nm=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom};var rm={inRect:nm,searchForPoint:tm};var im=function(e,t,n,r,i){var a=function(n){var r=e.dom().createRange();r.setStart(t.dom(),n);r.collapse(true);return r};var o=function(e){var t=a(e);return t.getBoundingClientRect()};var s=Sa.get(t).length;var u=rm.searchForPoint(o,n,r,i.right,s);return a(u)};var am=function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var a=i.getClientRects();var o=ql.findMap(a,function(e){return rm.inRect(e,n,r)?w.some(e):w.none()});return o.map(function(i){return im(e,t,n,r,i)})};var om={locate:am};var sm=function(e,t,n,r){var i=e.dom().createRange();var a=tr.children(t);return ql.findMap(a,function(t){i.selectNode(t.dom());return rm.inRect(i.getBoundingClientRect(),n,r)?um(e,t,n,r):w.none()})};var um=function(e,t,n,r){var i=hr.isText(t)?om.locate:sm;return i(e,t,n,r)};var lm=function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var a=i.getBoundingClientRect();var o=Math.max(a.left,Math.min(a.right,n));var s=Math.max(a.top,Math.min(a.bottom,r));return um(e,t,o,s)};var cm={locate:lm};var fm=true;var dm=false;var hm=function(e,t){return t-e.left<e.right-t?fm:dm};var vm=function(e,t,n){var r=e.dom().createRange();r.selectNode(t.dom());r.collapse(n);return r};var pm=function(e,t,n){var r=e.dom().createRange();r.selectNode(t.dom());var i=r.getBoundingClientRect();var a=hm(i,n);var o=a===fm?ja.first:ja.last;return o(t).map(function(t){return vm(e,t,a)})};var gm=function(e,t,n){var r=t.dom().getBoundingClientRect();var i=hm(r,n);return w.some(vm(e,t,i))};var mm=function(e,t,n){var r=tr.children(t).length===0?gm:pm;return r(e,t,n)};var ym={search:mm};var bm=function(e,t,n){return w.from(e.dom().caretPositionFromPoint(t,n)).bind(function(t){if(t.offsetNode===null){return w.none()}var n=e.dom().createRange();n.setStart(t.offsetNode,t.offset);n.collapse();return w.some(n)})};var _m=function(e,t,n){return w.from(e.dom().caretRangeFromPoint(t,n))};var wm=function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var a=i.getBoundingClientRect();var o=Math.max(a.left,Math.min(a.right,n));var s=Math.max(a.top,Math.min(a.bottom,r));return cm.locate(e,t,o,s)};var xm=function(e,t,n){return ze.fromPoint(e,t,n).bind(function(r){var i=function(){return ym.search(e,r,t)};return tr.children(r).length===0?i():wm(e,r,t,n).orThunk(i)})};var Tm=document.caretPositionFromPoint?bm:document.caretRangeFromPoint?_m:xm;var Cm=function(e,t,n){var r=ze.fromDom(e.document);return Tm(r,t,n).map(function(e){return kg.range(ze.fromDom(e.startContainer),e.startOffset,ze.fromDom(e.endContainer),e.endOffset)})};var km={fromPoint:Cm};var Sm=function(e,t,n,r){var i=Kg.create(e);var a=Ge.is(t,r)?[t]:[];var o=a.concat(Hr.descendants(t,r));return J.filter(o,function(e){Kg.selectNodeContentsUsing(i,e);return Kg.isWithin(n,i)})};var Em=function(e,t,n){var r=em.asLtrRange(e,t);var i=ze.fromDom(r.commonAncestorContainer);return hr.isElement(i)?Sm(e,i,r,n):[]};var Pm={find:Em};var Om=function(e,t){var n=hr.name(e);if("input"===n){return bg.after(e)}else if(!J.contains(["br","img"],n)){return bg.on(e,t)}else{return t===0?bg.before(e):bg.after(e)}};var Mm=function(e,t){var n=e.fold(bg.before,Om,bg.after);var r=t.fold(bg.before,Om,bg.after);return kg.relative(n,r)};var Am=function(e,t,n,r){var i=Om(e,t);var a=Om(n,r);return kg.relative(i,a)};var Nm=function(e){return e.match({domRange:function(e){var t=ze.fromDom(e.startContainer);var n=ze.fromDom(e.endContainer);return Am(t,e.startOffset,n,e.endOffset)},relative:Mm,exact:Am})};var Rm={beforeSpecial:Om,preprocess:Nm,preprocessRelative:Mm,preprocessExact:Am};var Dm=function(e,t){w.from(e.getSelection()).each(function(e){e.removeAllRanges();e.addRange(t)})};var Lm=function(e,t,n,r,i){var a=Kg.exactToNative(e,t,n,r,i);Dm(e,a)};var Im=function(e,t,n){return Pm.find(e,t,n)};var Bm=function(e,t){return em.diagnose(e,t).match({ltr:function(t,n,r,i){Lm(e,t,n,r,i)},rtl:function(t,n,r,i){var a=e.getSelection();if(a.setBaseAndExtent){a.setBaseAndExtent(t.dom(),n,r.dom(),i)}else if(a.extend){a.collapse(t.dom(),n);a.extend(r.dom(),i)}else{Lm(e,r,i,t,n)}}})};var jm=function(e,t,n,r,i){var a=Rm.preprocessExact(t,n,r,i);Bm(e,a)};var Fm=function(e,t,n){var r=Rm.preprocessRelative(t,n);Bm(e,r)};var Hm=function(e){var t=kg.getWin(e).dom();var n=function(e,n,r,i){return Kg.exactToNative(t,e,n,r,i)};var r=Rm.preprocess(e);return em.diagnose(t,r).match({ltr:n,rtl:n})};var zm=function(e){if(e.rangeCount>0){var t=e.getRangeAt(0);var n=e.getRangeAt(e.rangeCount-1);return w.some(kg.range(ze.fromDom(t.startContainer),t.startOffset,ze.fromDom(n.endContainer),n.endOffset))}else{return w.none()}};var Um=function(e){var t=ze.fromDom(e.anchorNode);var n=ze.fromDom(e.focusNode);return Og.after(t,e.anchorOffset,n,e.focusOffset)?w.some(kg.range(ze.fromDom(e.anchorNode),e.anchorOffset,ze.fromDom(e.focusNode),e.focusOffset)):zm(e)};var Vm=function(e,t){var n=Kg.selectNodeContents(e,t);Dm(e,n)};var Wm=function(e,t){var n=Kg.selectNodeContents(e,t);return kg.range(ze.fromDom(n.startContainer),n.startOffset,ze.fromDom(n.endContainer),n.endOffset)};var qm=function(e){var t=e.getSelection();return t.rangeCount>0?Um(t):w.none()};var Ym=function(e){return qm(e).map(function(e){return kg.exact(e.start(),e.soffset(),e.finish(),e.foffset())})};var Km=function(e,t){var n=em.asLtrRange(e,t);return Kg.getFirstRect(n)};var $m=function(e,t){var n=em.asLtrRange(e,t);return Kg.getBounds(n)};var Gm=function(e,t,n){return km.fromPoint(e,t,n)};var Xm=function(e,t){var n=em.asLtrRange(e,t);return Kg.toString(n)};var Zm=function(e){var t=e.getSelection();t.removeAllRanges()};var Jm=function(e,t){var n=em.asLtrRange(e,t);return Kg.cloneFragment(n)};var Qm=function(e,t,n){var r=em.asLtrRange(e,t);var i=Ag.fromElements(n,e.document);Kg.replaceWith(r,i)};var ey=function(e,t){var n=em.asLtrRange(e,t);Kg.deleteContents(n)};var ty=function(e,t,n,r){return Dn.eq(e,n)&&t===r};var ny={setExact:jm,getExact:qm,get:Ym,setRelative:Fm,toNative:Hm,setToElement:Vm,clear:Zm,clone:Jm,replace:Qm,deleteAt:ey,forElement:Wm,getFirstRect:Km,getBounds:$m,getAtPoint:Gm,findWithin:Im,getAsString:Xm,isCollapsed:ty};var ry=tinymce.util.Tools.resolve("tinymce.util.VK");var iy=function(e,t,n,r){return uy(e,t,pg.next(n),r)};var ay=function(e,t,n,r){return uy(e,t,pg.prev(n),r)};var oy=function(e,t){var n=kg.exact(t,0,t,0);return ny.toNative(n)};var sy=function(e,t){var n=Hr.descendants(t,"tr");return J.last(n).bind(function(t){return ti.descendant(t,"td,th").map(function(t){return oy(e,t)})})};var uy=function(e,t,n,r,i){return n.fold(w.none,w.none,function(t,n){return ja.first(n).map(function(t){return oy(e,t)})},function(n){return pi.table(n,t).bind(function(t){var i=Ms.noMenu(n);e.undoManager.transact(function(){r.insertRowsAfter(t,i)});return sy(e,t)})})};var ly=["table","li","dl"];var cy=function(e,t,n,r){if(e.keyCode===ry.TAB){var i=kh.getBody(t);var a=function(e){var t=hr.name(e);return Dn.eq(e,i)||J.contains(ly,t)};var o=t.selection.getRng();if(o.collapsed){var s=ze.fromDom(o.startContainer);pi.cell(s,a).each(function(i){e.preventDefault();var o=e.shiftKey?ay:iy;var s=o(t,a,i,n,r);s.each(function(e){t.selection.setRng(e)})})}}};var fy={handle:cy};var dy=we.immutable("selection","kill");var hy={response:dy};var vy=function(e){return function(t){return t===e}};var py=vy(38);var gy=vy(40);var my=function(e){return e>=37&&e<=40};var yy={ltr:{isBackward:vy(37),isForward:vy(39)},rtl:{isBackward:vy(39),isForward:vy(37)},isUp:py,isDown:gy,isNavigation:my};var by=function(e,t){var n=em.asLtrRange(e,t);return{start:v.constant(ze.fromDom(n.startContainer)),soffset:v.constant(n.startOffset),finish:v.constant(ze.fromDom(n.endContainer)),foffset:v.constant(n.endOffset)}};var _y=function(e,t,n,r){return{start:v.constant(bg.on(e,t)),finish:v.constant(bg.on(n,r))}};var wy={convertToRange:by,makeSitus:_y};var xy=Sn.detect().browser.isSafari();var Ty=function(e){var t=e!==undefined?e.dom():document;var n=t.body.scrollLeft||t.documentElement.scrollLeft;var r=t.body.scrollTop||t.documentElement.scrollTop;return Mu(n,r)};var Cy=function(e,t,n){var r=n!==undefined?n.dom():document;var i=r.defaultView;i.scrollTo(e,t)};var ky=function(e,t,n){var r=n!==undefined?n.dom():document;var i=r.defaultView;i.scrollBy(e,t)};var Sy=function(e,t){var n=Iu.absolute(t);var r=ze.fromDom(e.document);Cy(n.left(),n.top(),r)};var Ey=function(e,t){var n=Ty(e);t();var r=Ty(e);if(n.top()!==r.top()||n.left()!==r.left()){Cy(n.left(),n.top(),e)}};var Py=function(e){var t=w.none();var n=function(){t=w.some(Ty(e))};var r=function(){t.each(function(t){Cy(t.left(),t.top(),e)})};n();return{save:n,restore:r}};var Oy=function(e,t){if(xy&&de.isFunction(e.dom().scrollIntoViewIfNeeded)){e.dom().scrollIntoViewIfNeeded(false)}else{e.dom().scrollIntoView(t)}};var My=function(e,t){var n=t.dom().getBoundingClientRect();var r=e.dom().getBoundingClientRect();if(r.top<n.top){Oy(e,true)}else if(r.bottom>n.bottom){Oy(e,false)}};var Ay=function(){var e=ze.fromHtml('<div style="width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px;"></div>');Zi.after(Pr.body(),e);var t=e.dom().offsetWidth-e.dom().clientWidth;oa.remove(e);return t};var Ny={get:Ty,to:Cy,by:ky,preserve:Ey,capture:Py,intoView:Oy,intoViewIfNeeded:My,setToElement:Sy,scrollBarWidth:Ay};function Ry(e){var t=function(t,n){return w.from(e.document.elementFromPoint(t,n)).map(ze.fromDom)};var n=function(e){return e.dom().getBoundingClientRect()};var r=function(t,n,r,i){var a=kg.exact(t,n,r,i);return ny.getFirstRect(e,a).map(function(e){return ue.map(e,v.apply)})};var i=function(){return ny.get(e).map(function(t){return wy.convertToRange(e,t)})};var a=function(t){var n=kg.relative(t.start(),t.finish());return wy.convertToRange(e,n)};var o=function(t,n){return ny.getAtPoint(e,t,n).map(function(e){return{start:v.constant(bg.on(e.start(),e.soffset())),finish:v.constant(bg.on(e.finish(),e.foffset()))}})};var s=function(){ny.clear(e)};var u=function(t){ny.setToElement(e,t)};var l=function(t){ny.setExact(e,t.start(),t.soffset(),t.finish(),t.foffset())};var c=function(t,n){ny.setRelative(e,t,n)};var f=function(){return e.innerHeight};var d=function(){var t=Ny.get(ze.fromDom(e.document));return t.top()};var h=function(t,n){Ny.by(t,n,ze.fromDom(e.document))};return{elementFromPoint:t,getRect:n,getRangedRect:r,getSelection:i,fromSitus:a,situsFromPoint:o,clearSelection:s,setSelection:l,setRelativeSelection:c,selectContents:u,getInnerHeight:f,getScrollY:d,scrollBy:h}}var Dy=function(e,t,n,r,i,a,o){if(!(Dn.eq(n,i)&&r===a)){return ti.closest(n,"td,th",t).bind(function(n){return ti.closest(i,"td,th",t).bind(function(r){return Ly(e,t,n,r,o)})})}else{return w.none()}};var Ly=function(e,t,n,r,i){if(!Dn.eq(n,r)){return is.identify(n,r,t).bind(function(t){var r=t.boxes().getOr([]);if(r.length>0){i(e,r,t.start(),t.finish());return w.some(hy.response(w.some(wy.makeSitus(n,0,n,Da.getEnd(n))),true))}else{return w.none()}})}else{return w.none()}};var Iy=function(e,t,n,r,i){var a=function(e){i.clear(n);i.selectRange(n,e.boxes(),e.start(),e.finish());return e.boxes()};return is.shiftSelection(r,e,t,i.firstSelectedSelector(),i.lastSelectedSelector()).map(a)};var By={sync:Dy,detect:Ly,update:Iy};var jy=we.immutableBag(["left","top","right","bottom"],[]);var Fy=function(e,t){return jy({left:e.left(),top:e.top()+t,right:e.right(),bottom:e.bottom()+t})};var Hy=function(e,t){return jy({left:e.left(),top:e.top()-t,right:e.right(),bottom:e.bottom()-t})};var zy=function(e,t){var n=e.bottom()-e.top();return jy({left:e.left(),top:t-n,right:e.right(),bottom:t})};var Uy=function(e,t){var n=e.bottom()-e.top();return jy({left:e.left(),top:t,right:e.right(),bottom:t+n})};var Vy=function(e,t,n){return jy({left:e.left()+t,top:e.top()+n,right:e.right()+t,bottom:e.bottom()+n})};var Wy=function(e){return e.top()};var qy=function(e){return e.bottom()};var Yy=function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"};var Ky={nu:jy,moveUp:Hy,moveDown:Fy,moveBottomTo:zy,moveTopTo:Uy,getTop:Wy,getBottom:qy,translate:Vy,toString:Yy};var $y=function(e,t,n){if(n>=0&&n<Da.getEnd(t)){return e.getRangedRect(t,n,t,n+1)}else if(n>0){return e.getRangedRect(t,n-1,t,n)}return w.none()};var Gy=function(e){return Ky.nu({left:e.left,top:e.top,right:e.right,bottom:e.bottom})};var Xy=function(e,t){return w.some(e.getRect(t))};var Zy=function(e,t,n){if(hr.isElement(t)){return Xy(e,t).map(Gy)}else if(hr.isText(t)){return $y(e,t,n).map(Gy)}else{return w.none()}};var Jy=function(e,t){if(hr.isElement(t)){return Xy(e,t).map(Gy)}else if(hr.isText(t)){return e.getRangedRect(t,0,t,Da.getEnd(t)).map(Gy)}else{return w.none()}};var Qy={getBoxAt:Zy,getEntireBox:Jy};var eb=we.immutable("item","mode");var tb=function(e,t,n,r){var i=r!==undefined?r:nb;return e.property().parent(t).map(function(e){return eb(e,i)})};var nb=function(e,t,n,r){var i=r!==undefined?r:rb;return n.sibling(e,t).map(function(e){return eb(e,i)})};var rb=function(e,t,n,r){var i=r!==undefined?r:rb;var a=e.property().children(t);var o=n.first(a);return o.map(function(e){return eb(e,i)})};var ib=[{current:tb,next:nb,fallback:w.none()},{current:nb,next:rb,fallback:w.some(tb)},{current:rb,next:rb,fallback:w.some(nb)}];var ab=function(e,t,n,r,i){var i=i!==undefined?i:ib;var a=J.find(i,function(e){return e.current===n});return a.bind(function(n){return n.current(e,t,r,n.next).orThunk(function(){return n.fallback.bind(function(n){return ab(e,t,n,r)})})})};var ob={backtrack:tb,sidestep:nb,advance:rb,go:ab};var sb=function(){var e=function(e,t){return e.query().prevSibling(t)};var t=function(e){return e.length>0?w.some(e[e.length-1]):w.none()};return{sibling:e,first:t}};var ub=function(){var e=function(e,t){return e.query().nextSibling(t)};var t=function(e){return e.length>0?w.some(e[0]):w.none()};return{sibling:e,first:t}};var lb={left:sb,right:ub};var cb=function(e,t,n,r,i,a){var o=ob.go(e,t,r,i);return o.bind(function(t){if(a(t.item())){return w.none()}else{return n(t.item())?w.some(t.item()):cb(e,t.item(),n,t.mode(),i,a)}})};var fb=function(e,t,n,r){return cb(e,t,n,ob.sidestep,lb.left(),r)};var db=function(e,t,n,r){return cb(e,t,n,ob.sidestep,lb.right(),r)};var hb={left:fb,right:db};var vb=function(e,t){return e.property().children(t).length===0};var pb=function(e,t,n){return mb(e,t,v.curry(vb,e),n)};var gb=function(e,t,n){return yb(e,t,v.curry(vb,e),n)};var mb=function(e,t,n,r){return hb.left(e,t,n,r)};var yb=function(e,t,n,r){return hb.right(e,t,n,r)};var bb=function(){return{left:lb.left,right:lb.right}};var _b=function(e,t,n,r,i){return ob.go(e,t,n,r,i)};var wb={before:pb,after:gb,seekLeft:mb,seekRight:yb,walkers:bb,walk:_b,backtrack:ob.backtrack,sidestep:ob.sidestep,advance:ob.advance};var xb=Qa();var Tb=function(e,t,n){return wb.gather(xb,e,t,n)};var Cb=function(e,t){return wb.before(xb,e,t)};var kb=function(e,t){return wb.after(xb,e,t)};var Sb=function(e,t,n){return wb.seekLeft(xb,e,t,n)};var Eb=function(e,t,n){return wb.seekRight(xb,e,t,n)};var Pb=function(){return wb.walkers()};var Ob=function(e,t,n,r){return wb.walk(xb,e,t,n,r)};var Mb={gather:Tb,before:Cb,after:kb,seekLeft:Sb,seekRight:Eb,walkers:Pb,walk:Ob};var Ab=5;var Nb=100;var Rb=ms.generate([{none:[]},{retry:["caret"]}]);var Db=function(e,t){return e.left()<t.left()||Math.abs(t.right()-e.left())<1||e.left()>t.right()};var Lb=function(e,t,n){return $r.closest(t,Rl.isBlock).fold(v.constant(false),function(t){return Qy.getEntireBox(e,t).exists(function(e){return Db(n,e)})})};var Ib=function(e,t,n,r,i){var a=Ky.moveDown(i,Ab);if(Math.abs(n.bottom()-r.bottom())<1){return Rb.retry(a)}else if(n.top()>i.bottom()){return Rb.retry(a)}else if(n.top()===i.bottom()){return Rb.retry(Ky.moveDown(i,1))}else{return Lb(e,t,i)?Rb.retry(Ky.translate(a,Ab,0)):Rb.none()}};var Bb=function(e,t,n,r,i){var a=Ky.moveUp(i,Ab);if(Math.abs(n.top()-r.top())<1){return Rb.retry(a)}else if(n.bottom()<i.top()){return Rb.retry(a)}else if(n.bottom()===i.top()){return Rb.retry(Ky.moveUp(i,1))}else{return Lb(e,t,i)?Rb.retry(Ky.translate(a,Ab,0)):Rb.none()}};var jb={point:Ky.getTop,adjuster:Bb,move:Ky.moveUp,gather:Mb.before};var Fb={point:Ky.getBottom,adjuster:Ib,move:Ky.moveDown,gather:Mb.after};var Hb=function(e,t,n){return e.elementFromPoint(t,n).filter(function(e){return hr.name(e)==="table"}).isSome()};var zb=function(e,t,n,r,i){return Ub(e,t,n,t.move(r,Ab),i)};var Ub=function(e,t,n,r,i){if(i===0){return w.some(r)}if(Hb(e,r.left(),t.point(r))){return zb(e,t,n,r,i-1)}return e.situsFromPoint(r.left(),t.point(r)).bind(function(a){return a.start().fold(w.none,function(a,o){return Qy.getEntireBox(e,a,o).bind(function(o){return t.adjuster(e,a,o,n,r).fold(w.none,function(r){return Ub(e,t,n,r,i-1)})}).orThunk(function(){return w.some(r)})},w.none)})};var Vb=function(e,t){return e.situsFromPoint(t.left(),t.bottom()+Ab)};var Wb=function(e,t){return e.situsFromPoint(t.left(),t.top()-Ab)};var qb=function(e,t,n){if(e.point(t)>n.getInnerHeight()){return w.some(e.point(t)-n.getInnerHeight())}else if(e.point(t)<0){return w.some(-e.point(t))}else{return w.none()}};var Yb=function(e,t,n){var r=e.move(n,Ab);var i=Ub(t,e,n,r,Nb).getOr(r);return qb(e,i,t).fold(function(){return t.situsFromPoint(i.left(),e.point(i))},function(n){t.scrollBy(0,n);return t.situsFromPoint(i.left(),e.point(i)-n)})};var Kb={tryUp:v.curry(Yb,jb),tryDown:v.curry(Yb,Fb),ieTryUp:Wb,ieTryDown:Vb,getJumpSize:v.constant(Ab)};var $b=ms.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]);var Gb=function(e,t,n){var r=e.getRect(t);var i=e.getRect(n);return i.right>r.left&&i.left<r.right};var Xb=function(e,t,n,r,i,a,o){return ti.closest(r,"td,th",o).bind(function(n){return ti.closest(t,"td,th",o).map(function(t){if(!Dn.eq(n,t)){return Ao.sharedOne(Zb,[n,t]).fold(function(){return Gb(e,t,n)?$b.success():a(t)},function(e){return a(t)})}else{return Dn.eq(r,n)&&Da.getEnd(n)===i?a(t):$b.none("in same cell")}})}).getOr($b.none("default"))};var Zb=function(e){return ti.closest(e,"tr")};var Jb=function(e,t,n,r,i){return e.fold(t,n,r,i)};var Qb={verify:Xb,cata:Jb,adt:$b};var e_=we.immutable("element","offset");var t_=we.immutable("element","deltaOffset");var n_=we.immutable("element","start","finish");var r_=we.immutable("begin","end");var i_=we.immutable("element","text");var a_={point:e_,delta:t_,range:n_,points:r_,text:i_};var o_=we.immutable("ancestor","descendants","element","index");var s_=we.immutable("parent","children","element","index");var u_=function(e,t){return $r.closest(e,function(e){return tr.parent(e).exists(function(e){return Dn.eq(e,t)})})};var l_=function(e){return tr.parent(e).bind(function(t){var n=tr.children(t);return c_(n,e).map(function(r){return s_(t,n,e,r)})})};var c_=function(e,t){return J.findIndex(e,v.curry(Dn.eq,t))};var f_=function(e,t){return tr.parent(e).bind(function(n){var r=Hr.children(n,t);return c_(r,e).map(function(t){return s_(n,r,e,t)})})};var d_=function(e,t,n){return ti.closest(e,t).bind(function(t){var r=Hr.descendants(t,n);return c_(r,e).map(function(n){return o_(t,r,e,n)})})};var h_={childOf:u_,indexOf:c_,indexInParent:l_,selectorsInParent:f_,descendantsInAncestor:d_};var v_=function(e){return hr.name(e)==="br"};var p_=function(e,t,n){return t(e,n).bind(function(e){return hr.isText(e)&&Sa.get(e).trim().length===0?p_(e,t,n):w.some(e)})};var g_=function(e,t,n){return n.traverse(t).orThunk(function(){return p_(t,n.gather,e)}).map(n.relative)};var m_=function(e,t){return tr.child(e,t).filter(v_).orThunk(function(){return tr.child(e,t-1).filter(v_)})};var y_=function(e,t,n,r){return m_(t,n).bind(function(t){return r.traverse(t).fold(function(){return p_(t,r.gather,e).map(r.relative)},function(e){return h_.indexInParent(e).map(function(e){return bg.on(e.parent(),e.index())})})})};var b_=function(e,t,n,r){var i=v_(t)?g_(e,t,r):y_(e,t,n,r);return i.map(function(e){return{start:v.constant(e),finish:v.constant(e)}})};var __=function(e){return Qb.cata(e,function(e){return w.none()},function(){return w.none()},function(e){return w.some(a_.point(e,0))},function(e){return w.some(a_.point(e,Da.getEnd(e)))})};var w_={tryBr:b_,process:__};var x_=20;var T_=Sn.detect();var C_=function(e,t,n){return e.getSelection().bind(function(r){return w_.tryBr(t,r.finish(),r.foffset(),n).fold(function(){return w.some(a_.point(r.finish(),r.foffset()))},function(i){var a=e.fromSitus(i);var o=Qb.verify(e,r.finish(),r.foffset(),a.finish(),a.foffset(),n.failure,t);return w_.process(o)})})};var k_=function(e,t,n,r,i,a){if(a===0){return w.none()}return P_(e,t,n,r,i).bind(function(o){var s=e.fromSitus(o);var u=Qb.verify(e,n,r,s.finish(),s.foffset(),i.failure,t);return Qb.cata(u,function(){return w.none()},function(){return w.some(o)},function(o){if(Dn.eq(n,o)&&r===0){return S_(e,n,r,Ky.moveUp,i)}else{return k_(e,t,o,0,i,a-1)}},function(o){if(Dn.eq(n,o)&&r===Da.getEnd(o)){return S_(e,n,r,Ky.moveDown,i)}else{return k_(e,t,o,Da.getEnd(o),i,a-1)}})})};var S_=function(e,t,n,r,i){return Qy.getBoxAt(e,t,n).bind(function(t){return E_(e,i,r(t,Kb.getJumpSize()))})};var E_=function(e,t,n){if(T_.browser.isChrome()||T_.browser.isSafari()||T_.browser.isFirefox()||T_.browser.isEdge()){return t.otherRetry(e,n)}else if(T_.browser.isIE()){return t.ieRetry(e,n)}else{return w.none()}};var P_=function(e,t,n,r,i){return Qy.getBoxAt(e,n,r).bind(function(t){return E_(e,i,t)})};var O_=function(e,t,n){return C_(e,t,n).bind(function(r){return k_(e,t,r.element(),r.offset(),n,x_).map(e.fromSitus)})};var M_={handle:O_};var A_=function(e){return $r.first(e).isSome()};var N_=function(e,t,n){return $r.ancestor(e,t,n).isSome()};var R_=function(e,t,n){return $r.closest(e,t,n).isSome()};var D_=function(e,t){return $r.sibling(e,t).isSome()};var L_=function(e,t){return $r.child(e,t).isSome()};var I_=function(e,t){return $r.descendant(e,t).isSome()};var B_={any:A_,ancestor:N_,closest:R_,sibling:D_,child:L_,descendant:I_};var j_=Sn.detect();var F_=function(e,t){return B_.ancestor(e,function(e){return tr.parent(e).exists(function(e){return Dn.eq(e,t)})})};var H_=function(e,t,n,r,i){return ti.closest(r,"td,th",t).bind(function(r){return ti.closest(r,"table",t).bind(function(a){if(!F_(i,a)){return w.none()}return M_.handle(e,t,n).bind(function(e){return ti.closest(e.finish(),"td,th",t).map(function(t){return{start:v.constant(r),finish:v.constant(t),range:v.constant(e)}})})})})};var z_=function(e,t,n,r,i,a){if(j_.browser.isIE()){return w.none()}else{return a(r,t).orThunk(function(){return H_(e,t,n,r,i).map(function(e){var t=e.range();return hy.response(w.some(wy.makeSitus(t.start(),t.soffset(),t.finish(),t.foffset())),true)})})}};var U_=function(e,t){return ti.closest(e,"tr",t).bind(function(e){return ti.closest(e,"table",t).bind(function(n){var r=Hr.descendants(n,"tr");if(Dn.eq(e,r[0])){return Mb.seekLeft(n,function(e){return ja.last(e).isSome()},t).map(function(e){var t=Da.getEnd(e);return hy.response(w.some(wy.makeSitus(e,t,e,t)),true)})}else{return w.none()}})})};var V_=function(e,t){return ti.closest(e,"tr",t).bind(function(e){return ti.closest(e,"table",t).bind(function(n){var r=Hr.descendants(n,"tr");if(Dn.eq(e,r[r.length-1])){return Mb.seekRight(n,function(e){return ja.first(e).isSome()},t).map(function(e){return hy.response(w.some(wy.makeSitus(e,0,e,0)),true)})}else{return w.none()}})})};var W_=function(e,t,n,r,i,a,o){return H_(e,n,r,i,a).bind(function(e){return By.detect(t,n,e.start(),e.finish(),o)})};var q_={navigate:z_,select:W_,firstUpCheck:U_,lastDownCheck:V_};var Y_=function(e,t){return ti.closest(e,"td,th",t)};function K_(e,t,n,r){var i=w.none();var a=function(){i=w.none()};var o=function(e){r.clear(t);i=Y_(e.target(),n)};var s=function(a){i.each(function(i){r.clear(t);Y_(a.target(),n).each(function(a){is.identify(i,a,n).each(function(n){var o=n.boxes().getOr([]);if(o.length>1||o.length===1&&!Dn.eq(i,a)){r.selectRange(t,o,n.start(),n.finish());e.selectContents(a)}})})})};var u=function(){i.each(a)};return{mousedown:o,mouseover:s,mouseup:u}}var $_={down:{traverse:tr.nextSibling,gather:Mb.after,relative:bg.before,otherRetry:Kb.tryDown,ieRetry:Kb.ieTryDown,failure:Qb.adt.failedDown},up:{traverse:tr.prevSibling,gather:Mb.before,relative:bg.before,otherRetry:Kb.tryUp,ieRetry:Kb.ieTryUp,failure:Qb.adt.failedUp}};var G_=we.immutable("rows","cols");var X_=function(e,t,n,r){var i=Ry(e);var a=K_(i,t,n,r);return{mousedown:a.mousedown,mouseover:a.mouseover,mouseup:a.mouseup}};var Z_=function(e,t,n,r){var i=Ry(e);var a=function(){r.clear(t);return w.none()};var o=function(e,o,s,u,l,c){var f=e.raw().which;var d=e.raw().shiftKey===true;var h=is.retrieve(t,r.selectedSelector()).fold(function(){if(yy.isDown(f)&&d){return v.curry(q_.select,i,t,n,$_.down,u,o,r.selectRange)}else if(yy.isUp(f)&&d){return v.curry(q_.select,i,t,n,$_.up,u,o,r.selectRange)}else if(yy.isDown(f)){return v.curry(q_.navigate,i,n,$_.down,u,o,q_.lastDownCheck)}else if(yy.isUp(f)){return v.curry(q_.navigate,i,n,$_.up,u,o,q_.firstUpCheck)}else{return w.none}},function(e){var n=function(n){return function(){var a=ql.findMap(n,function(n){return By.update(n.rows(),n.cols(),t,e,r)});return a.fold(function(){return is.getEdges(t,r.firstSelectedSelector(),r.lastSelectedSelector()).map(function(e){var n=yy.isDown(f)||c.isForward(f)?bg.after:bg.before;i.setRelativeSelection(bg.on(e.first(),0),n(e.table()));r.clear(t);return hy.response(w.none(),true)})},function(e){return w.some(hy.response(w.none(),true))})}};if(yy.isDown(f)&&d){return n([G_(+1,0)])}else if(yy.isUp(f)&&d){return n([G_(-1,0)])}else if(c.isBackward(f)&&d){return n([G_(0,-1),G_(-1,0)])}else if(c.isForward(f)&&d){return n([G_(0,+1),G_(+1,0)])}else if(yy.isNavigation(f)&&d===false){return a}else{return w.none}});return h()};var s=function(e,i,a,o,s){return is.retrieve(t,r.selectedSelector()).fold(function(){var u=e.raw().which;var l=e.raw().shiftKey===true;if(l===false){return w.none()}if(yy.isNavigation(u)){return By.sync(t,n,i,a,o,s,r.selectRange)}else{return w.none()}},w.none)};return{keydown:o,keyup:s}};var J_={mouse:X_,keyboard:Z_};var Q_=function(e,t){J.each(t,function(t){qc.add(e,t)})};var ew=function(e,t){J.each(t,function(t){qc.remove(e,t)})};var tw=function(e,t){J.each(t,function(t){qc.toggle(e,t)})};var nw=function(e,t){return J.forall(t,function(t){return qc.has(e,t)})};var rw=function(e,t){return J.exists(t,function(t){return qc.has(e,t)})};var iw=function(e){var t=e.dom().classList;var n=new Array(t.length);for(var r=0;r<t.length;r++){n[r]=t.item(r)}return n};var aw=function(e){return jc.supports(e)?iw(e):jc.get(e)};var ow={add:Q_,remove:ew,toggle:tw,hasAll:nw,hasAny:rw,get:aw};var sw=function(e){return function(t){qc.add(t,e)}};var uw=function(e){return function(t){qc.remove(t,e)}};var lw=function(e){return function(t){ow.remove(t,e)}};var cw=function(e){return function(t){return qc.has(t,e)}};var fw={addClass:sw,removeClass:uw,removeClasses:lw,hasClass:cw};var dw=function(e){var t=fw.addClass(e.selected());var n=fw.removeClasses([e.selected(),e.lastSelected(),e.firstSelected()]);var r=function(t){var r=Hr.descendants(t,e.selectedSelector());J.each(r,n)};var i=function(n,i,a,o){r(n);J.each(i,t);qc.add(a,e.firstSelected());qc.add(o,e.lastSelected())};return{clear:r,selectRange:i,selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}};var hw=function(e){var t=function(t){Cr.remove(t,e.selected());Cr.remove(t,e.firstSelected());Cr.remove(t,e.lastSelected())};var n=function(t){Cr.set(t,e.selected(),"1")};var r=function(n){var r=Hr.descendants(n,e.selectedSelector());J.each(r,t)};var i=function(t,i,a,o){r(t);J.each(i,n);Cr.set(a,e.firstSelected(),"1");Cr.set(o,e.lastSelected(),"1")};return{clear:r,selectRange:i,selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}};var vw={byClass:dw,byAttr:hw};function pw(e,t){var n=we.immutableBag(["mousedown","mouseover","mouseup","keyup","keydown"],[]);var r=w.none();var i=vw.byAttr(ps);e.on("init",function(a){var o=e.getWin();var s=kh.getBody(e);var u=kh.getIsRoot(e);var l=function(){var t=e.selection;var n=ze.fromDom(t.getStart());var r=ze.fromDom(t.getEnd());var a=pi.table(n);var o=pi.table(r);var u=a.bind(function(e){return o.bind(function(t){return Dn.eq(e,t)?w.some(true):w.none()})});u.fold(function(){i.clear(s)},v.noop)};var c=J_.mouse(o,s,u,i);var f=J_.keyboard(o,s,u,i);var d=function(e){return e.raw().shiftKey===true};var h=function(t,n){if(!d(t)){return}if(n.kill()){t.kill()}n.selection().each(function(t){var n=kg.relative(t.start(),t.finish());var r=em.asLtrRange(o,n);e.selection.setRng(r)})};var p=function(t){var n=b(t);if(n.raw().shiftKey&&yy.isNavigation(n.raw().which)){var r=e.selection.getRng();var i=ze.fromDom(r.startContainer);var a=ze.fromDom(r.endContainer);f.keyup(n,i,r.startOffset,a,r.endOffset).each(function(e){h(n,e)})}};var g=function(e){return!Cr.has(e,"data-mce-bogus")&&hr.name(e)!=="br"&&!(hr.isText(e)&&Sa.get(e).length===0)};var m=function(){var t=ze.fromDom(e.getBody());var n=tr.lastChild(t);var r=function(e){return tr.prevSibling(e).bind(function(e){return g(e)?w.some(e):r(e)})};return n.bind(function(e){return g(e)?w.some(e):r(e)})};var y=function(n){var r=b(n);t().each(function(e){e.hideBars()});if(n.which===40){m().each(function(t){if(hr.name(t)==="table"){if(Hh(e)){e.dom.add(e.getBody(),Hh(e),Kh(e),"<br/>")}else{e.dom.add(e.getBody(),"br")}}})}var i=e.selection.getRng();var a=ze.fromDom(e.selection.getStart());var o=ze.fromDom(i.startContainer);var s=ze.fromDom(i.endContainer);var u=Nh.directionAt(a).isRtl()?yy.rtl:yy.ltr;f.keydown(r,o,i.startOffset,s,i.endOffset,u).each(function(e){h(r,e)});t().each(function(e){e.showBars()})};var b=function(e){var t=ze.fromDom(e.target);var n=function(){e.stopPropagation()};var r=function(){e.preventDefault()};var i=v.compose(r,n);return{target:v.constant(t),x:v.constant(e.x),y:v.constant(e.y),stop:n,prevent:r,kill:i,raw:v.constant(e)}};var _=function(e){return e.button===0};var x=function(e){if(e.buttons===undefined){return true}return(e.buttons&1)!==0};var T=function(e){if(_(e)){c.mousedown(b(e))}};var C=function(e){if(x(e)){c.mouseover(b(e))}};var k=function(e){if(_){c.mouseup(b(e))}};e.on("mousedown",T);e.on("mouseover",C);e.on("mouseup",k);e.on("keyup",p);e.on("keydown",y);e.on("nodechange",l);r=w.some(n({mousedown:T,mouseover:C,mouseup:k,keyup:p,keydown:y}))});var a=function(){r.each(function(e){})};return{clear:i.clear,destroy:a}}function gw(e){var t=function(){var t=kh.getBody(e);return ss.retrieve(t,ps.selectedSelector()).fold(function(){if(e.selection.getStart()===undefined){return _s.none()}else{return _s.single(e.selection)}},function(e){return _s.multiple(e)})};return{get:t}}var mw=sv.each;var yw=function(e){var t=[];mw("inserttable tableprops deletetable | cell row column".split(" "),function(n){if(n==="|"){t.push({text:"-"})}else{t.push(e.menuItems[n])}});e.addButton("table",{type:"menubutton",title:"Table",menu:t});function n(t){return function(){e.execCommand(t)}}e.addButton("tableprops",{title:"Table properties",onclick:v.curry(Jv.open,e,true),icon:"table"});e.addButton("tabledelete",{title:"Delete table",onclick:n("mceTableDelete")});e.addButton("tablecellprops",{title:"Cell properties",onclick:n("mceTableCellProps")});e.addButton("tablemergecells",{title:"Merge cells",onclick:n("mceTableMergeCells")});e.addButton("tablesplitcells",{title:"Split cell",onclick:n("mceTableSplitCells")});e.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:n("mceTableInsertRowBefore")});e.addButton("tableinsertrowafter",{title:"Insert row after",onclick:n("mceTableInsertRowAfter")});e.addButton("tabledeleterow",{title:"Delete row",onclick:n("mceTableDeleteRow")});e.addButton("tablerowprops",{title:"Row properties",onclick:n("mceTableRowProps")});e.addButton("tablecutrow",{title:"Cut row",onclick:n("mceTableCutRow")});e.addButton("tablecopyrow",{title:"Copy row",onclick:n("mceTableCopyRow")});e.addButton("tablepasterowbefore",{title:"Paste row before",onclick:n("mceTablePasteRowBefore")});e.addButton("tablepasterowafter",{title:"Paste row after",onclick:n("mceTablePasteRowAfter")});e.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:n("mceTableInsertColBefore")});e.addButton("tableinsertcolafter",{title:"Insert column after",onclick:n("mceTableInsertColAfter")});e.addButton("tabledeletecol",{title:"Delete column",onclick:n("mceTableDeleteCol")})};var bw=function(e){var t=function(t){var n=e.dom.is(t,"table")&&e.getBody().contains(t);return n};var n=tv(e);if(n.length>0){e.addContextToolbar(t,n.join(" "))}};var _w={addButtons:yw,addToolbars:bw};var ww=function(e,t){var n=w.none();var r=[];var i=[];var a=[];var o=[];var s=function(e){e.disabled(true)};var u=function(e){e.disabled(false)};var l=function(){var e=this;r.push(e);n.fold(function(){s(e)},function(t){u(e)})};var c=function(){var e=this;i.push(e);n.fold(function(){s(e)},function(t){u(e)})};var f=function(){var e=this;a.push(e);n.fold(function(){s(e)},function(t){e.disabled(t.mergable().isNone())})};var d=function(){var e=this;o.push(e);n.fold(function(){s(e)},function(t){e.disabled(t.unmergable().isNone())})};var h=function(){n.fold(function(){J.each(r,s);J.each(i,s);J.each(a,s);J.each(o,s)},function(e){J.each(r,u);J.each(i,u);J.each(a,function(t){t.disabled(e.mergable().isNone())});J.each(o,function(t){t.disabled(e.unmergable().isNone())})})};e.on("init",function(){e.on("nodechange",function(r){var i=w.from(e.dom.getParent(e.selection.getStart(),"th,td"));n=i.bind(function(e){var n=ze.fromDom(e);var r=pi.table(n);return r.map(function(e){return Ms.forMenu(t,e,n)})});h()})});var p=function(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++){e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(t*10+n)+'" href="#" '+'data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>'}e+="</tr>"}e+="</table>";e+='<div class="mce-text-center" role="presentation">1 x 1</div>';return e};var g=function(e,t,n,r){var i=r.getEl().getElementsByTagName("table")[0];var a,o,s,u,l;var c=r.isRtl()||r.parent().rel==="tl-tr";i.nextSibling.innerHTML=t+1+" x "+(n+1);if(c){t=9-t}for(o=0;o<10;o++){for(a=0;a<10;a++){u=i.rows[o].childNodes[a].firstChild;l=(c?a>=t:a<=t)&&o<=n;e.dom.toggleClass(u,"mce-active",l);if(l){s=u}}}return s.parentNode};var m=qh(e)===false?{text:"Table",icon:"table",context:"table",onclick:v.curry(Jv.open,e)}:{text:"Table",icon:"table",context:"table",ariaHideMenu:true,onclick:function(t){if(t.aria){this.parent().hideAll();t.stopImmediatePropagation();Jv.open(e)}},onshow:function(){g(e,0,0,this.menu.items()[0])},onhide:function(){var t=this.menu.items()[0].getEl().getElementsByTagName("a");e.dom.removeClass(t,"mce-active");e.dom.addClass(t[0],"mce-active")},menu:[{type:"container",html:p(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(t){var n=t.target;var r,i;if(n.tagName.toUpperCase()==="A"){r=parseInt(n.getAttribute("data-mce-x"),10);i=parseInt(n.getAttribute("data-mce-y"),10);if(this.isRtl()||this.parent().rel==="tl-tr"){r=9-r}if(r!==this.lastX||i!==this.lastY){g(e,r,i,t.control);this.lastX=r;this.lastY=i}}},onclick:function(t){var n=this;if(t.target.tagName.toUpperCase()==="A"){t.preventDefault();t.stopPropagation();n.parent().cancel();e.undoManager.transact(function(){Yv.insert(e,n.lastX+1,n.lastY+1)});e.addVisual()}}}]};function y(t){return function(){e.execCommand(t)}}var b={text:"Table properties",context:"table",onPostRender:l,onclick:v.curry(Jv.open,e,true)};var _={text:"Delete table",context:"table",onPostRender:l,cmd:"mceTableDelete"};var x={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:y("mceTableInsertRowBefore"),onPostRender:c},{text:"Insert row after",onclick:y("mceTableInsertRowAfter"),onPostRender:c},{text:"Delete row",onclick:y("mceTableDeleteRow"),onPostRender:c},{text:"Row properties",onclick:y("mceTableRowProps"),onPostRender:c},{text:"-"},{text:"Cut row",onclick:y("mceTableCutRow"),onPostRender:c},{text:"Copy row",onclick:y("mceTableCopyRow"),onPostRender:c},{text:"Paste row before",onclick:y("mceTablePasteRowBefore"),onPostRender:c},{text:"Paste row after",onclick:y("mceTablePasteRowAfter"),onPostRender:c}]};var T={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:y("mceTableInsertColBefore"),onPostRender:c},{text:"Insert column after",onclick:y("mceTableInsertColAfter"),onPostRender:c},{text:"Delete column",onclick:y("mceTableDeleteCol"),onPostRender:c}]};var C={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:y("mceTableCellProps"),onPostRender:c},{text:"Merge cells",onclick:y("mceTableMergeCells"),onPostRender:f},{text:"Split cell",onclick:y("mceTableSplitCells"),onPostRender:d}]};e.addMenuItem("inserttable",m);e.addMenuItem("tableprops",b);e.addMenuItem("deletetable",_);e.addMenuItem("row",x);e.addMenuItem("column",T);e.addMenuItem("cell",C)};var xw={addMenuItems:ww};var Tw=function(e){return e.get().fold(function(){return},function(e){return J.map(e,function(e){return e.dom()})})};var Cw=function(e,t){var n=J.map(e,ze.fromDom);t.set(w.from(n))};var kw=function(e,t){return{insertTable:function(t,n){return Yv.insert(e,t,n)},setClipboardRows:function(e){return Cw(e,t)},getClipboardRows:function(){return Tw(t)}}};function Sw(e){var t=ag(e);var n=pw(e,t.lazyResize);var r=iv(e,t.lazyWire);var i=gw(e);var a=nl(w.none());tp.registerCommands(e,r,n,i,a);Ds.registerEvents(e,i,r,n);xw.addMenuItems(e,i);_w.addButtons(e);_w.addToolbars(e);e.on("PreInit",function(){e.serializer.addTempAttr(ps.firstSelected());e.serializer.addTempAttr(ps.lastSelected())});if(Fh(e)){e.on("keydown",function(n){fy.handle(n,e,r,t.lazyWire)})}e.on("remove",function(){t.destroy();n.destroy()});return kw(e,a)}e.add("table",Sw);function Ew(){}return Ew}()})();(function(){var e=function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");var t=function(e,t){var n;e.dom.getParents(e.selection.getStart(),function(e){var r;if(r=e.style[t==="forecolor"?"color":"background-color"]){n=r}});return n};var n=function(e){var t;var n=[];for(t=0;t<e.length;t+=2){n.push({text:e[t+1],color:"#"+e[t]})}return n};var r=function(e,t,n){e.undoManager.transact(function(){e.focus();e.formatter.apply(t,{value:n});e.nodeChanged()})};var i=function(e,t){e.undoManager.transact(function(){e.focus();e.formatter.remove(t,{value:null},null,true);e.nodeChanged()})};var a={getCurrentColor:t,mapColors:n,applyFormat:r,removeFormat:i};var o=function(e){e.addCommand("mceApplyTextcolor",function(t,n){a.applyFormat(e,t,n)});e.addCommand("mceRemoveTextcolor",function(t){a.removeFormat(e,t)})};var s={register:o};var u=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var l=tinymce.util.Tools.resolve("tinymce.util.Tools");var c=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"];var f=function(e){return e.getParam("textcolor_map",c)};var d=function(e){return e.getParam("forecolor_map",f(e))};var h=function(e){return e.getParam("backcolor_map",f(e))};var v=function(e){return e.getParam("textcolor_rows",5)};var p=function(e){return e.getParam("textcolor_cols",8)};var g=function(e){return e.getParam("forecolor_rows",v(e))};var m=function(e){return e.getParam("backcolor_rows",v(e))};var y=function(e){return e.getParam("forecolor_cols",p(e))};var b=function(e){return e.getParam("backcolor_cols",p(e))};var _=function(e){return e.getParam("color_picker_callback",null)};var w=function(e){return typeof _(e)==="function"};var x={getForeColorMap:d,getBackColorMap:h,getForeColorRows:g,getBackColorRows:m,getForeColorCols:y,getBackColorCols:b,getColorPickerCallback:_,hasColorPicker:w};var T=tinymce.util.Tools.resolve("tinymce.util.I18n");var C=function(e,t,n,r){var i,o,s,l,c,f,d,h=0;var v=u.DOM.uniqueId("mcearia");var p=function(e,t){var n=e==="transparent";return'<td class="mce-grid-cell'+(n?" mce-colorbtn-trans":"")+'">'+'<div id="'+v+"-"+h+++'"'+' data-mce-color="'+(e?e:"")+'"'+' role="option"'+' tabIndex="-1"'+' style="'+(e?"background-color: "+e:"")+'"'+' title="'+T.translate(t)+'">'+(n?"&#215;":"")+"</div>"+"</td>"};i=a.mapColors(n);i.push({text:T.translate("No color"),color:"transparent"});s='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>';l=i.length-1;for(f=0;f<t;f++){s+="<tr>";for(c=0;c<e;c++){d=f*e+c;if(d>l){s+="<td></td>"}else{o=i[d];s+=p(o.color,o.text)}}s+="</tr>"}if(r){s+="<tr>"+'<td colspan="'+e+'" class="mce-custom-color-btn">'+'<div id="'+v+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" '+'role="button" tabindex="-1" aria-labelledby="'+v+'-c" style="width: 100%">'+'<button type="button" role="presentation" tabindex="-1">'+T.translate("Custom...")+"</button>"+"</div>"+"</td>"+"</tr>";s+="<tr>";for(c=0;c<e;c++){s+=p("","Custom color")}s+="</tr>"}s+="</tbody></table>";return s};var k={getHtml:C};var S=function e(t,n){t.style.background=n;t.setAttribute("data-mce-color",n)};var E=function(e){return function(t){var n=t.control;if(n._color){e.execCommand("mceApplyTextcolor",n.settings.format,n._color)}else{e.execCommand("mceRemoveTextcolor",n.settings.format)}}};var P=function(e,t){return function(n){var r=this.parent();var i;var o=a.getCurrentColor(e,r.settings.format);var s=function(t){r.hidePanel();r.color(t);e.execCommand("mceApplyTextcolor",r.settings.format,t)};var c=function(){r.hidePanel();r.resetColor();e.execCommand("mceRemoveTextcolor",r.settings.format)};if(u.DOM.getParent(n.target,".mce-custom-color-btn")){r.hidePanel();var f=x.getColorPickerCallback(e);f.call(e,function(e){var n=r.panel.getEl().getElementsByTagName("table")[0];var i,a,o;i=l.map(n.rows[n.rows.length-1].childNodes,function(e){return e.firstChild});for(o=0;o<i.length;o++){a=i[o];if(!a.getAttribute("data-mce-color")){break}}if(o===t){for(o=0;o<t-1;o++){S(i[o],i[o+1].getAttribute("data-mce-color"))}}S(a,e);s(e)},o)}i=n.target.getAttribute("data-mce-color");if(i){if(this.lastId){u.DOM.get(this.lastId).setAttribute("aria-selected",false)}n.target.setAttribute("aria-selected",true);this.lastId=n.target.id;if(i==="transparent"){c()}else{s(i)}}else if(i!==null){r.hidePanel()}}};var O=function(e,t){return function(){var n=t?x.getForeColorCols(e):x.getBackColorCols(e);var r=t?x.getForeColorRows(e):x.getBackColorRows(e);var i=t?x.getForeColorMap(e):x.getBackColorMap(e);var a=x.hasColorPicker(e);return k.getHtml(n,r,i,a)}};var M=function(e){e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:true,html:O(e,true),onclick:P(e,x.getForeColorCols(e))},onclick:E(e)});e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:true,html:O(e,false),onclick:P(e,x.getBackColorCols(e))},onclick:E(e)})};var A={register:M};e.add("textcolor",function(e){s.register(e);A.register(e)});function N(){}return N}()})();var md=function(){this.explorerId=Zc(this._riot_id);this.handleBackTap=(()=>{this.close()});this.handleExplorerInsert=(e=>{this.opts.onInsert(e);this.close()})};i.tag2("viron-wyswyg-explorer",'<div class="Wyswyg_Explorer__head"> <div class="Wyswyg_Explorer__back" onclick="{getClickHandler(\'handleBackTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBackTap\')}"> <viron-icon-arrow-left></viron-icon-arrow-left> </div> <div class="Wyswyg_Explorer__title">ÁîªÂÉè„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ</div> </div> <div class="Wyswyg_Explorer__body"> <viron-explorer id="{explorerId}" def="{opts.def}" oninsert="{handleExplorerInsert}"></viron-explorer> </div>',"",'class="Wyswyg_Explorer"',function(e){this.external(md)});const yd=new URL(window.location.href);const bd=["bold italic underline | forecolor backcolor | image explorer link unlink","formatselect fontsizeselect","alignleft aligncenter alignright alignjustify alignnone | bullist numlist | outdent indent blockquote"];const _d=["bold italic underline forecolor backcolor","image explorer link unlink","alignleft aligncenter alignright alignjustify alignnone","bullist numlist | outdent indent blockquote"];const wd={edit:{title:"Edit",items:"undo redo | cut copy paste | selectall | searchreplace"},insert:{title:"Insert",items:"image link | inserttable hr"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | removeformat"},tools:{title:"Tools",items:"code fullscreen"}};const xd={};const Td={plugins:["code","hr","lists","link","image","paste","searchreplace","fullscreen","table","textcolor"],min_height:300,branding:false,relative_urls:false,remove_script_host:true,document_base_url:`${yd.origin}${yd.pathname}tinymce`,skin:"lightgray",skin_url:"skins/lightgray",theme:"modern",theme_url:"themes/modern/theme.js",body_class:"Wyswyg__body"};var Cd=function(){const e=this.riotx.get();const t=e.getter("layout.isMobile");this.editor=null;const n=()=>{const t=this.opts.explorer;e.action("drawers.add","viron-wyswyg-explorer",{def:t,onInsert:e=>{this.editor.execCommand("mceInsertContent",false,`<img src="${e.url}" width="100" />`)}},{isWide:true})};const r={selector:`.Wyswyg__editor${this._riot_id}`,init_instance_callback:e=>{this.editor=e;!!this.opts.val&&this.editor.setContent(this.opts.val);this.editor.on("Change",this.handleEditorChange);this.editor.on("focus",this.handleEditorFocus);this.editor.on("blur",this.handleEditorBlur)},setup:e=>{if(!!this.opts.explorer){e.addButton("explorer",{icon:"browse",tooltip:"Explorer",onclick:()=>{e.iframeElement.blur();setTimeout(()=>{n()},500)}})}},menu:(()=>{if(t){return xd}return wd})(),toolbar:(()=>{if(t){return _d}return bd})()};this.on("mount",()=>{gd.init(to({},Td,r))}).on("before-unmount",()=>{gd.remove(`.Wyswyg__editor${this._riot_id}`);this.editor.off("Change",this.handleEditorChange);this.editor.off("focus",this.handleEditorFocus);this.editor.off("blur",this.handleEditorBlur);this.editor.destroy();this.editor=null});this.handleEditorChange=sf(()=>{if(!this.opts.onchange){return}const e=this.editor.getContent();this.opts.onchange(e)},1e3);this.handleEditorFocus=(()=>{if(!this.opts.onfocus){return}this.opts.onfocus()});this.handleEditorBlur=(()=>{if(!this.opts.onblur){return}this.opts.onblur()});this.handleBlockerTap=(e=>{e.stopPropagation()})};i.tag2("viron-wyswyg",'<form class="Wyswyg__form"> <textarea class="Wyswyg__editor{_riot_id}"></textarea> </form> <div class="Wyswyg__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"","class=\"Wyswyg {'Wyswyg--disabled': opts.isdisabled, 'Wyswyg--preview': opts.ispreview, 'Wyswyg--error': opts.haserror}\"",function(e){this.external(Cd)});var kd=function(){};i.tag2("viron-parameters-error",'<div class="Parameters_Error__message">{opts.message} </div>',"",'class="Parameters_Error"',function(e){this.external(kd)});function Sd(e){return ul(e)&&e%1===0}var Ed=Sd;const Pd="textinput";const Od="textarea";const Md="html";const Ad="numberinput";const Nd="checkbox";const Rd="select";const Dd="uploader";const Ld="wyswyg";const Id="pug";const Bd="null";const jd="autocomplete";const Fd="base64";const Hd=e=>{const t=Pl(e);const n=e=>{let t;if(_o(e)){t=fo}else if(lu(e)){t=fu}else{return}t(e,(t,r)=>{if(kf(t)){e[r]=undefined}if(_o(t)||lu(t)){n(t)}})};n(t);return t};const zd=(e,t)=>{const n=e.name;const r=e.default;const i=e.required;const a=e.in;if(!Mf(t[n])){return}if(!Mf(r)){t[n]=Pl(r);return}if(!i){return}if(ql(["formData","header","path","query"],a)){return}const o=e.schema;if(ql(["boolean","integer","number","null","string"],o.type)){return}if(o.type==="object"){t[n]={};Ud(o,t[n])}if(o.type==="array"){t=[];const e=o.minItems;if(Ed(e)&&e>0){tf(e,()=>{t.push(Vd(o.items))})}}};const Ud=(e,t)=>{if(t===void 0)t={};const n=e.properties;const r=e.required||[];fo(n,(e,n)=>{if(ql(["boolean","integer","number","null","string"],e.type)){if(!Mf(t[n])){return}if(Mf(e.default)){return}t[n]=e.default}if(e.type==="object"){if(!ql(r,n)){return}t[n]={};Ud(e,t[n])}if(e.type==="array"){if(!ql(r,n)){return}t[n]=[];const i=e.minItems;if(Ed(i)&&i>0){tf(i,()=>{t[n].push(Vd(e.items))})}}});return t};const Vd=e=>{if(lu(e)){e=e[0]}if(ql(["boolean","integer","number","null","string"],e.type)){return e.default}if(e.type==="object"&&e){return Ud(e)}if(e.type==="array"){if(!e.required){return undefined}const t=[];const n=e.minItems;if(Ed(n)&&n>0){tf(n,()=>{t.push(Vd(e.items))})}return t}return undefined};var Wd={getUIType:e=>{if(!!e.enum){return Rd}if(!!e["x-autocomplete"]){return jd}const t=e.type;const n=e.format;switch(t){case"string":switch(n){case"date-time":return Pd;case"multiline":return Od;case"wyswyg":return Ld;case"pug":return Id;case"html":return Md;case"base64":return Fd;default:return Pd}case"number":case"integer":return Ad;case"boolean":return Nd;case"file":return Dd;case"null":return Bd;default:break}},getSpreadStyle:e=>{if(!!e.enum){return"spreadMedium"}switch(e.type){case"string":switch(e.format){case"base64":return"spreadSmall";case"multiline":case"pug":case"html":return"spreadFull";case"date-time":return"spreadMedium";case"wyswyg":default:return"spreadLarge"}case"number":case"integer":return"spreadMedium";case"boolean":case"file":case"null":default:return"spreadSmall"}},generateInitialVal:(e,t)=>{if(e===void 0)e=[];if(t===void 0)t={};const n=Hd(t);fu(e,e=>{zd(e,n)});return n},generateDefaultProperties:Ud,generateDefaultItem:Vd,trimNull:Hd};var qd;function Yd(){return qd.apply(null,arguments)}function Kd(e){qd=e}function $d(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function Gd(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function Xd(e){if(Object.getOwnPropertyNames){return Object.getOwnPropertyNames(e).length===0}else{var t;for(t in e){if(e.hasOwnProperty(t)){return false}}return true}}function Zd(e){return e===void 0}function Jd(e){return typeof e==="number"||Object.prototype.toString.call(e)==="[object Number]"}function Qd(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function eh(e,t){var n=[],r;for(r=0;r<e.length;++r){n.push(t(e[r],r))}return n}function th(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function nh(e,t){for(var n in t){if(th(t,n)){e[n]=t[n]}}if(th(t,"toString")){e.toString=t.toString}if(th(t,"valueOf")){e.valueOf=t.valueOf}return e}function rh(e,t,n,r){return Lg(e,t,n,r,true).utc()}function ih(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null,rfc2822:false,weekdayMismatch:false}}function ah(e){if(e._pf==null){e._pf=ih()}return e._pf}var oh;if(Array.prototype.some){oh=Array.prototype.some}else{oh=function(e){var t=Object(this);var n=t.length>>>0;for(var r=0;r<n;r++){if(r in t&&e.call(this,t[r],r,t)){return true}}return false}}function sh(e){if(e._isValid==null){var t=ah(e);var n=oh.call(t.parsedDateParts,function(e){return e!=null});var r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict){r=r&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined}if(Object.isFrozen==null||!Object.isFrozen(e)){e._isValid=r}else{return r}}return e._isValid}function uh(e){var t=rh(NaN);if(e!=null){nh(ah(t),e)}else{ah(t).userInvalidated=true}return t}var lh=Yd.momentProperties=[];function ch(e,t){var n,r,i;if(!Zd(t._isAMomentObject)){e._isAMomentObject=t._isAMomentObject}if(!Zd(t._i)){e._i=t._i}if(!Zd(t._f)){e._f=t._f}if(!Zd(t._l)){e._l=t._l}if(!Zd(t._strict)){e._strict=t._strict}if(!Zd(t._tzm)){e._tzm=t._tzm}if(!Zd(t._isUTC)){e._isUTC=t._isUTC}if(!Zd(t._offset)){e._offset=t._offset}if(!Zd(t._pf)){e._pf=ah(t)}if(!Zd(t._locale)){e._locale=t._locale}if(lh.length>0){for(n=0;n<lh.length;n++){r=lh[n];i=t[r];if(!Zd(i)){e[r]=i}}}return e}var fh=false;function dh(e){ch(this,e);this._d=new Date(e._d!=null?e._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN)}if(fh===false){fh=true;Yd.updateOffset(this);fh=false}}function hh(e){return e instanceof dh||e!=null&&e._isAMomentObject!=null}function vh(e){if(e<0){return Math.ceil(e)||0}else{return Math.floor(e)}}function ph(e){var t=+e,n=0;if(t!==0&&isFinite(t)){n=vh(t)}return n}function gh(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),a=0,o;for(o=0;o<r;o++){if(n&&e[o]!==t[o]||!n&&ph(e[o])!==ph(t[o])){a++}}return a+i}function mh(e){if(Yd.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+e)}}function yh(e,t){var n=true;return nh(function(){if(Yd.deprecationHandler!=null){Yd.deprecationHandler(null,e)}if(n){var r=[];var i;for(var a=0;a<arguments.length;a++){i="";if(typeof arguments[a]==="object"){i+="\n["+a+"] ";for(var o in arguments[0]){i+=o+": "+arguments[0][o]+", "}i=i.slice(0,-2)}else{i=arguments[a]}r.push(i)}mh(e+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack);n=false}return t.apply(this,arguments)},t)}var bh={};function _h(e,t){if(Yd.deprecationHandler!=null){Yd.deprecationHandler(e,t)}if(!bh[e]){mh(t);bh[e]=true}}Yd.suppressDeprecationWarnings=false;Yd.deprecationHandler=null;function wh(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function xh(e){var t,n;for(n in e){t=e[n];if(wh(t)){this[n]=t}else{this["_"+n]=t}}this._config=e;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Th(e,t){var n=nh({},e),r;for(r in t){if(th(t,r)){if(Gd(e[r])&&Gd(t[r])){n[r]={};nh(n[r],e[r]);nh(n[r],t[r])}else if(t[r]!=null){n[r]=t[r]}else{delete n[r]}}}for(r in e){if(th(e,r)&&!th(t,r)&&Gd(e[r])){n[r]=nh({},n[r])}}return n}function Ch(e){if(e!=null){this.set(e)}}var kh;if(Object.keys){kh=Object.keys}else{kh=function(e){var t,n=[];for(t in e){if(th(e,t)){n.push(t)}}return n}}var Sh={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Eh(e,t,n){var r=this._calendar[e]||this._calendar["sameElse"];return wh(r)?r.call(t,n):r}var Ph={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Oh(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];if(t||!n){return t}this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)});return this._longDateFormat[e]}var Mh="Invalid date";function Ah(){return this._invalidDate}var Nh="%d";var Rh=/\d{1,2}/;function Dh(e){return this._ordinal.replace("%d",e)}var Lh={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Ih(e,t,n,r){var i=this._relativeTime[n];return wh(i)?i(e,t,n,r):i.replace(/%d/i,e)}function Bh(e,t){var n=this._relativeTime[e>0?"future":"past"];return wh(n)?n(t):n.replace(/%s/i,t)}var jh={};function Fh(e,t){var n=e.toLowerCase();jh[n]=jh[n+"s"]=jh[t]=e}function Hh(e){return typeof e==="string"?jh[e]||jh[e.toLowerCase()]:undefined}function zh(e){var t={},n,r;for(r in e){if(th(e,r)){n=Hh(r);if(n){t[n]=e[r]}}}return t}var Uh={};function Vh(e,t){Uh[e]=t}function Wh(e){var t=[];for(var n in e){t.push({unit:n,priority:Uh[n]})}t.sort(function(e,t){return e.priority-t.priority});return t}function qh(e,t,n){var r=""+Math.abs(e),i=t-r.length,a=e>=0;return(a?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var Yh=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var Kh=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var $h={};var Gh={};function Xh(e,t,n,r){var i=r;if(typeof r==="string"){i=function(){return this[r]()}}if(e){Gh[e]=i}if(t){Gh[t[0]]=function(){return qh(i.apply(this,arguments),t[1],t[2])}}if(n){Gh[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)}}}function Zh(e){if(e.match(/\[[\s\S]/)){return e.replace(/^\[|\]$/g,"")}return e.replace(/\\/g,"")}function Jh(e){var t=e.match(Yh),n,r;for(n=0,r=t.length;n<r;n++){if(Gh[t[n]]){t[n]=Gh[t[n]]}else{t[n]=Zh(t[n])}}return function(n){var i="",a;for(a=0;a<r;a++){i+=wh(t[a])?t[a].call(n,e):t[a]}return i}}function Qh(e,t){if(!e.isValid()){return e.localeData().invalidDate()}t=ev(t,e.localeData());$h[t]=$h[t]||Jh(t);return $h[t](e)}function ev(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}Kh.lastIndex=0;while(n>=0&&Kh.test(e)){e=e.replace(Kh,r);Kh.lastIndex=0;n-=1}return e}var tv=/\d/;var nv=/\d\d/;var rv=/\d{3}/;var iv=/\d{4}/;var av=/[+-]?\d{6}/;var ov=/\d\d?/;var sv=/\d\d\d\d?/;var uv=/\d\d\d\d\d\d?/;var lv=/\d{1,3}/;var cv=/\d{1,4}/;var fv=/[+-]?\d{1,6}/;var dv=/\d+/;var hv=/[+-]?\d+/;var vv=/Z|[+-]\d\d:?\d\d/gi;var pv=/Z|[+-]\d\d(?::?\d\d)?/gi;var gv=/[+-]?\d+(\.\d{1,3})?/;var mv=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;var yv={};function bv(e,t,n){yv[e]=wh(t)?t:function(e,r){return e&&n?n:t}}function _v(e,t){if(!th(yv,e)){return new RegExp(wv(e))}return yv[e](t._strict,t._locale)}function wv(e){return xv(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}))}function xv(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Tv={};function Cv(e,t){var n,r=t;if(typeof e==="string"){e=[e]}if(Jd(t)){r=function(e,n){n[t]=ph(e)}}for(n=0;n<e.length;n++){Tv[e[n]]=r}}function kv(e,t){Cv(e,function(e,n,r,i){r._w=r._w||{};t(e,r._w,r,i)})}function Sv(e,t,n){if(t!=null&&th(Tv,e)){Tv[e](t,n._a,n,e)}}var Ev=0;var Pv=1;var Ov=2;var Mv=3;var Av=4;var Nv=5;var Rv=6;var Dv=7;var Lv=8;Xh("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e});Xh(0,["YY",2],0,function(){return this.year()%100});Xh(0,["YYYY",4],0,"year");Xh(0,["YYYYY",5],0,"year");Xh(0,["YYYYYY",6,true],0,"year");Fh("year","y");Vh("year",1);bv("Y",hv);bv("YY",ov,nv);bv("YYYY",cv,iv);bv("YYYYY",fv,av);bv("YYYYYY",fv,av);Cv(["YYYYY","YYYYYY"],Ev);Cv("YYYY",function(e,t){t[Ev]=e.length===2?Yd.parseTwoDigitYear(e):ph(e)});Cv("YY",function(e,t){t[Ev]=Yd.parseTwoDigitYear(e)});Cv("Y",function(e,t){t[Ev]=parseInt(e,10)});function Iv(e){return Bv(e)?366:365}function Bv(e){return e%4===0&&e%100!==0||e%400===0}Yd.parseTwoDigitYear=function(e){return ph(e)+(ph(e)>68?1900:2e3)};var jv=Hv("FullYear",true);function Fv(){return Bv(this.year())}function Hv(e,t){return function(n){if(n!=null){Uv(this,e,n);Yd.updateOffset(this,t);return this}else{return zv(this,e)}}}function zv(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Uv(e,t,n){if(e.isValid()&&!isNaN(n)){if(t==="FullYear"&&Bv(e.year())&&e.month()===1&&e.date()===29){e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Kv(n,e.month()))}else{e._d["set"+(e._isUTC?"UTC":"")+t](n)}}}function Vv(e){e=Hh(e);if(wh(this[e])){return this[e]()}return this}function Wv(e,t){if(typeof e==="object"){e=zh(e);var n=Wh(e);for(var r=0;r<n.length;r++){this[n[r].unit](e[n[r].unit])}}else{e=Hh(e);if(wh(this[e])){return this[e](t)}}return this}function qv(e,t){return(e%t+t)%t}var Yv;if(Array.prototype.indexOf){Yv=Array.prototype.indexOf}else{Yv=function(e){var t;for(t=0;t<this.length;++t){if(this[t]===e){return t}}return-1}}function Kv(e,t){if(isNaN(e)||isNaN(t)){return NaN}var n=qv(t,12);e+=(t-n)/12;return n===1?Bv(e)?29:28:31-n%7%2}Xh("M",["MM",2],"Mo",function(){return this.month()+1});Xh("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});Xh("MMMM",0,0,function(e){return this.localeData().months(this,e)});Fh("month","M");Vh("month",8);bv("M",ov);bv("MM",ov,nv);bv("MMM",function(e,t){return t.monthsShortRegex(e)});bv("MMMM",function(e,t){return t.monthsRegex(e)});Cv(["M","MM"],function(e,t){t[Pv]=ph(e)-1});Cv(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);if(i!=null){t[Pv]=i}else{ah(n).invalidMonth=e}});var $v=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;var Gv="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function Xv(e,t){if(!e){return $d(this._months)?this._months:this._months["standalone"]}return $d(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||$v).test(t)?"format":"standalone"][e.month()]}var Zv="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Jv(e,t){if(!e){return $d(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"]}return $d(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[$v.test(t)?"format":"standalone"][e.month()]}function Qv(e,t,n){var r,i,a,o=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(r=0;r<12;++r){a=rh([2e3,r]);this._shortMonthsParse[r]=this.monthsShort(a,"").toLocaleLowerCase();this._longMonthsParse[r]=this.months(a,"").toLocaleLowerCase()}}if(n){if(t==="MMM"){i=Yv.call(this._shortMonthsParse,o);return i!==-1?i:null}else{i=Yv.call(this._longMonthsParse,o);return i!==-1?i:null}}else{if(t==="MMM"){i=Yv.call(this._shortMonthsParse,o);if(i!==-1){return i}i=Yv.call(this._longMonthsParse,o);return i!==-1?i:null}else{i=Yv.call(this._longMonthsParse,o);if(i!==-1){return i}i=Yv.call(this._shortMonthsParse,o);return i!==-1?i:null}}}function ep(e,t,n){var r,i,a;if(this._monthsParseExact){return Qv.call(this,e,t,n)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(r=0;r<12;r++){i=rh([2e3,r]);if(n&&!this._longMonthsParse[r]){this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i");this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")}if(!n&&!this._monthsParse[r]){a="^"+this.months(i,"")+"|^"+this.monthsShort(i,"");this._monthsParse[r]=new RegExp(a.replace(".",""),"i")}if(n&&t==="MMMM"&&this._longMonthsParse[r].test(e)){return r}else if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e)){return r}else if(!n&&this._monthsParse[r].test(e)){return r}}}function tp(e,t){var n;if(!e.isValid()){return e}if(typeof t==="string"){if(/^\d+$/.test(t)){t=ph(t)}else{t=e.localeData().monthsParse(t);if(!Jd(t)){return e}}}n=Math.min(e.date(),Kv(e.year(),t));e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n);return e}function np(e){if(e!=null){tp(this,e);Yd.updateOffset(this,true);return this}else{return zv(this,"Month")}}function rp(){return Kv(this.year(),this.month())}var ip=mv;function ap(e){if(this._monthsParseExact){if(!th(this,"_monthsRegex")){up.call(this)}if(e){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!th(this,"_monthsShortRegex")){this._monthsShortRegex=ip}return this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}}var op=mv;function sp(e){if(this._monthsParseExact){if(!th(this,"_monthsRegex")){up.call(this)}if(e){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!th(this,"_monthsRegex")){this._monthsRegex=op}return this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}}function up(){function e(e,t){return t.length-e.length}var t=[],n=[],r=[],i,a;for(i=0;i<12;i++){a=rh([2e3,i]);t.push(this.monthsShort(a,""));n.push(this.months(a,""));r.push(this.months(a,""));r.push(this.monthsShort(a,""))}t.sort(e);n.sort(e);r.sort(e);for(i=0;i<12;i++){t[i]=xv(t[i]);n[i]=xv(n[i])}for(i=0;i<24;i++){r[i]=xv(r[i])}this._monthsRegex=new RegExp("^("+r.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function lp(e,t,n,r,i,a,o){var s=new Date(e,t,n,r,i,a,o);if(e<100&&e>=0&&isFinite(s.getFullYear())){s.setFullYear(e)}return s}function cp(e){var t=new Date(Date.UTC.apply(null,arguments));if(e<100&&e>=0&&isFinite(t.getUTCFullYear())){t.setUTCFullYear(e)}return t}function fp(e,t,n){var r=7+t-n,i=(7+cp(e,0,r).getUTCDay()-t)%7;return-i+r-1}function dp(e,t,n,r,i){var a=(7+n-r)%7,o=fp(e,r,i),s=1+7*(t-1)+a+o,u,l;if(s<=0){u=e-1;l=Iv(u)+s}else if(s>Iv(e)){u=e+1;l=s-Iv(e)}else{u=e;l=s}return{year:u,dayOfYear:l}}function hp(e,t,n){var r=fp(e.year(),t,n),i=Math.floor((e.dayOfYear()-r-1)/7)+1,a,o;if(i<1){o=e.year()-1;a=i+vp(o,t,n)}else if(i>vp(e.year(),t,n)){a=i-vp(e.year(),t,n);o=e.year()+1}else{o=e.year();a=i}return{week:a,year:o}}function vp(e,t,n){var r=fp(e,t,n),i=fp(e+1,t,n);return(Iv(e)-r+i)/7}Xh("w",["ww",2],"wo","week");Xh("W",["WW",2],"Wo","isoWeek");Fh("week","w");Fh("isoWeek","W");Vh("week",5);Vh("isoWeek",5);bv("w",ov);bv("ww",ov,nv);bv("W",ov);bv("WW",ov,nv);kv(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=ph(e)});function pp(e){return hp(e,this._week.dow,this._week.doy).week}var gp={dow:0,doy:6};function mp(){return this._week.dow}function yp(){return this._week.doy}function bp(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function _p(e){var t=hp(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}Xh("d",0,"do","day");Xh("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});Xh("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});Xh("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});Xh("e",0,0,"weekday");Xh("E",0,0,"isoWeekday");Fh("day","d");Fh("weekday","e");Fh("isoWeekday","E");Vh("day",11);Vh("weekday",11);Vh("isoWeekday",11);bv("d",ov);bv("e",ov);bv("E",ov);bv("dd",function(e,t){return t.weekdaysMinRegex(e)});bv("ddd",function(e,t){return t.weekdaysShortRegex(e)});bv("dddd",function(e,t){return t.weekdaysRegex(e)});kv(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);if(i!=null){t.d=i}else{ah(n).invalidWeekday=e}});kv(["d","e","E"],function(e,t,n,r){t[r]=ph(e)});function wp(e,t){if(typeof e!=="string"){return e}if(!isNaN(e)){return parseInt(e,10)}e=t.weekdaysParse(e);if(typeof e==="number"){return e}return null}function xp(e,t){if(typeof e==="string"){return t.weekdaysParse(e)%7||7}return isNaN(e)?null:e}var Tp="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function Cp(e,t){if(!e){return $d(this._weekdays)?this._weekdays:this._weekdays["standalone"]}return $d(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}var kp="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function Sp(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}var Ep="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Pp(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Op(e,t,n){var r,i,a,o=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(r=0;r<7;++r){a=rh([2e3,1]).day(r);this._minWeekdaysParse[r]=this.weekdaysMin(a,"").toLocaleLowerCase();this._shortWeekdaysParse[r]=this.weekdaysShort(a,"").toLocaleLowerCase();this._weekdaysParse[r]=this.weekdays(a,"").toLocaleLowerCase()}}if(n){if(t==="dddd"){i=Yv.call(this._weekdaysParse,o);return i!==-1?i:null}else if(t==="ddd"){i=Yv.call(this._shortWeekdaysParse,o);return i!==-1?i:null}else{i=Yv.call(this._minWeekdaysParse,o);return i!==-1?i:null}}else{if(t==="dddd"){i=Yv.call(this._weekdaysParse,o);if(i!==-1){return i}i=Yv.call(this._shortWeekdaysParse,o);if(i!==-1){return i}i=Yv.call(this._minWeekdaysParse,o);return i!==-1?i:null}else if(t==="ddd"){i=Yv.call(this._shortWeekdaysParse,o);if(i!==-1){return i}i=Yv.call(this._weekdaysParse,o);if(i!==-1){return i}i=Yv.call(this._minWeekdaysParse,o);return i!==-1?i:null}else{i=Yv.call(this._minWeekdaysParse,o);if(i!==-1){return i}i=Yv.call(this._weekdaysParse,o);if(i!==-1){return i}i=Yv.call(this._shortWeekdaysParse,o);return i!==-1?i:null}}}function Mp(e,t,n){var r,i,a;if(this._weekdaysParseExact){return Op.call(this,e,t,n)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(r=0;r<7;r++){i=rh([2e3,1]).day(r);if(n&&!this._fullWeekdaysParse[r]){this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i");this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i");this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")}if(!this._weekdaysParse[r]){a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,"");this._weekdaysParse[r]=new RegExp(a.replace(".",""),"i")}if(n&&t==="dddd"&&this._fullWeekdaysParse[r].test(e)){return r}else if(n&&t==="ddd"&&this._shortWeekdaysParse[r].test(e)){return r}else if(n&&t==="dd"&&this._minWeekdaysParse[r].test(e)){return r}else if(!n&&this._weekdaysParse[r].test(e)){return r}}}function Ap(e){if(!this.isValid()){return e!=null?this:NaN}var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(e!=null){e=wp(e,this.localeData());return this.add(e-t,"d")}else{return t}}function Np(e){if(!this.isValid()){return e!=null?this:NaN}var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Rp(e){if(!this.isValid()){return e!=null?this:NaN}if(e!=null){var t=xp(e,this.localeData());return this.day(this.day()%7?t:t-7)}else{return this.day()||7}}var Dp=mv;function Lp(e){if(this._weekdaysParseExact){if(!th(this,"_weekdaysRegex")){Hp.call(this)}if(e){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!th(this,"_weekdaysRegex")){this._weekdaysRegex=Dp}return this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}}var Ip=mv;function Bp(e){if(this._weekdaysParseExact){if(!th(this,"_weekdaysRegex")){Hp.call(this)}if(e){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!th(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=Ip}return this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}var jp=mv;function Fp(e){if(this._weekdaysParseExact){if(!th(this,"_weekdaysRegex")){Hp.call(this)}if(e){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!th(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=jp}return this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function Hp(){function e(e,t){return t.length-e.length}var t=[],n=[],r=[],i=[],a,o,s,u,l;for(a=0;a<7;a++){o=rh([2e3,1]).day(a);s=this.weekdaysMin(o,"");u=this.weekdaysShort(o,"");l=this.weekdays(o,"");t.push(s);n.push(u);r.push(l);i.push(s);i.push(u);i.push(l)}t.sort(e);n.sort(e);r.sort(e);i.sort(e);for(a=0;a<7;a++){n[a]=xv(n[a]);r[a]=xv(r[a]);i[a]=xv(i[a])}this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function zp(){return this.hours()%12||12}function Up(){return this.hours()||24}Xh("H",["HH",2],0,"hour");Xh("h",["hh",2],0,zp);Xh("k",["kk",2],0,Up);Xh("hmm",0,0,function(){return""+zp.apply(this)+qh(this.minutes(),2)});Xh("hmmss",0,0,function(){return""+zp.apply(this)+qh(this.minutes(),2)+qh(this.seconds(),2)});Xh("Hmm",0,0,function(){return""+this.hours()+qh(this.minutes(),2)});Xh("Hmmss",0,0,function(){return""+this.hours()+qh(this.minutes(),2)+qh(this.seconds(),2)});function Vp(e,t){Xh(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}Vp("a",true);Vp("A",false);Fh("hour","h");Vh("hour",13);function Wp(e,t){return t._meridiemParse}bv("a",Wp);bv("A",Wp);bv("H",ov);bv("h",ov);bv("k",ov);bv("HH",ov,nv);bv("hh",ov,nv);bv("kk",ov,nv);bv("hmm",sv);bv("hmmss",uv);bv("Hmm",sv);bv("Hmmss",uv);Cv(["H","HH"],Mv);Cv(["k","kk"],function(e,t,n){var r=ph(e);t[Mv]=r===24?0:r});Cv(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e);n._meridiem=e});Cv(["h","hh"],function(e,t,n){t[Mv]=ph(e);ah(n).bigHour=true});Cv("hmm",function(e,t,n){var r=e.length-2;t[Mv]=ph(e.substr(0,r));t[Av]=ph(e.substr(r));ah(n).bigHour=true});Cv("hmmss",function(e,t,n){var r=e.length-4;var i=e.length-2;t[Mv]=ph(e.substr(0,r));t[Av]=ph(e.substr(r,2));t[Nv]=ph(e.substr(i));ah(n).bigHour=true});Cv("Hmm",function(e,t,n){var r=e.length-2;t[Mv]=ph(e.substr(0,r));t[Av]=ph(e.substr(r))});Cv("Hmmss",function(e,t,n){var r=e.length-4;var i=e.length-2;t[Mv]=ph(e.substr(0,r));t[Av]=ph(e.substr(r,2));t[Nv]=ph(e.substr(i))});function qp(e){return(e+"").toLowerCase().charAt(0)==="p"}var Yp=/[ap]\.?m?\.?/i;function Kp(e,t,n){if(e>11){return n?"pm":"PM"}else{return n?"am":"AM"}}var $p=Hv("Hours",true);var Gp={calendar:Sh,longDateFormat:Ph,invalidDate:Mh,ordinal:Nh,dayOfMonthOrdinalParse:Rh,relativeTime:Lh,months:Gv,monthsShort:Zv,week:gp,weekdays:Tp,weekdaysMin:Ep,weekdaysShort:kp,meridiemParse:Yp};var Xp={};var Zp={};var Jp;function Qp(e){return e?e.toLowerCase().replace("_","-"):e}function eg(e){var t=0,n,r,i,a;while(t<e.length){a=Qp(e[t]).split("-");n=a.length;r=Qp(e[t+1]);r=r?r.split("-"):null;while(n>0){i=tg(a.slice(0,n).join("-"));if(i){return i}if(r&&r.length>=n&&gh(a,r,true)>=n-1){break}n--}t++}return null}function tg(e){var t=null;if(!Xp[e]&&typeof module!=="undefined"&&module&&module.exports){try{t=Jp._abbr;var n=require;n("./locale/"+e);ng(t)}catch(e){}}return Xp[e]}function ng(e,t){var n;if(e){if(Zd(t)){n=ag(e)}else{n=rg(e,t)}if(n){Jp=n}}return Jp._abbr}function rg(e,t){if(t!==null){var n=Gp;t.abbr=e;if(Xp[e]!=null){_h("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");n=Xp[e]._config}else if(t.parentLocale!=null){if(Xp[t.parentLocale]!=null){n=Xp[t.parentLocale]._config}else{if(!Zp[t.parentLocale]){Zp[t.parentLocale]=[]}Zp[t.parentLocale].push({name:e,config:t});return null}}Xp[e]=new Ch(Th(n,t));if(Zp[e]){Zp[e].forEach(function(e){rg(e.name,e.config)})}ng(e);return Xp[e]}else{delete Xp[e];return null}}function ig(e,t){if(t!=null){var n,r,i=Gp;r=tg(e);if(r!=null){i=r._config}t=Th(i,t);n=new Ch(t);n.parentLocale=Xp[e];Xp[e]=n;ng(e)}else{if(Xp[e]!=null){if(Xp[e].parentLocale!=null){Xp[e]=Xp[e].parentLocale}else if(Xp[e]!=null){delete Xp[e]}}}return Xp[e]}function ag(e){var t;if(e&&e._locale&&e._locale._abbr){e=e._locale._abbr}if(!e){return Jp}if(!$d(e)){t=tg(e);if(t){return t}e=[e]}return eg(e)}function og(){return kh(Xp)}function sg(e){var t;var n=e._a;if(n&&ah(e).overflow===-2){t=n[Pv]<0||n[Pv]>11?Pv:n[Ov]<1||n[Ov]>Kv(n[Ev],n[Pv])?Ov:n[Mv]<0||n[Mv]>24||n[Mv]===24&&(n[Av]!==0||n[Nv]!==0||n[Rv]!==0)?Mv:n[Av]<0||n[Av]>59?Av:n[Nv]<0||n[Nv]>59?Nv:n[Rv]<0||n[Rv]>999?Rv:-1;if(ah(e)._overflowDayOfYear&&(t<Ev||t>Ov)){t=Ov}if(ah(e)._overflowWeeks&&t===-1){t=Dv}if(ah(e)._overflowWeekday&&t===-1){t=Lv}ah(e).overflow=t}return e}function ug(e,t,n){if(e!=null){return e}if(t!=null){return t}return n}function lg(e){var t=new Date(Yd.now());if(e._useUTC){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]}return[t.getFullYear(),t.getMonth(),t.getDate()]}function cg(e){var t,n,r=[],i,a,o;if(e._d){return}i=lg(e);if(e._w&&e._a[Ov]==null&&e._a[Pv]==null){fg(e)}if(e._dayOfYear!=null){o=ug(e._a[Ev],i[Ev]);if(e._dayOfYear>Iv(o)||e._dayOfYear===0){ah(e)._overflowDayOfYear=true}n=cp(o,0,e._dayOfYear);e._a[Pv]=n.getUTCMonth();e._a[Ov]=n.getUTCDate()}for(t=0;t<3&&e._a[t]==null;++t){e._a[t]=r[t]=i[t]}for(;t<7;t++){e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t]}if(e._a[Mv]===24&&e._a[Av]===0&&e._a[Nv]===0&&e._a[Rv]===0){e._nextDay=true;e._a[Mv]=0}e._d=(e._useUTC?cp:lp).apply(null,r);a=e._useUTC?e._d.getUTCDay():e._d.getDay();if(e._tzm!=null){e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm)}if(e._nextDay){e._a[Mv]=24}if(e._w&&typeof e._w.d!=="undefined"&&e._w.d!==a){ah(e).weekdayMismatch=true}}function fg(e){var t,n,r,i,a,o,s,u;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){a=1;o=4;n=ug(t.GG,e._a[Ev],hp(Ig(),1,4).year);r=ug(t.W,1);i=ug(t.E,1);if(i<1||i>7){u=true}}else{a=e._locale._week.dow;o=e._locale._week.doy;var l=hp(Ig(),a,o);n=ug(t.gg,e._a[Ev],l.year);r=ug(t.w,l.week);if(t.d!=null){i=t.d;if(i<0||i>6){u=true}}else if(t.e!=null){i=t.e+a;if(t.e<0||t.e>6){u=true}}else{i=a}}if(r<1||r>vp(n,a,o)){ah(e)._overflowWeeks=true}else if(u!=null){ah(e)._overflowWeekday=true}else{s=dp(n,r,i,a,o);e._a[Ev]=s.year;e._dayOfYear=s.dayOfYear}}var dg=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var hg=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var vg=/Z|[+-]\d\d(?::?\d\d)?/;var pg=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]];var gg=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]];var mg=/^\/?Date\((\-?\d+)/i;function yg(e){var t,n,r=e._i,i=dg.exec(r)||hg.exec(r),a,o,s,u;if(i){ah(e).iso=true;for(t=0,n=pg.length;t<n;t++){if(pg[t][1].exec(i[1])){o=pg[t][0];a=pg[t][2]!==false;break}}if(o==null){e._isValid=false;return}if(i[3]){for(t=0,n=gg.length;t<n;t++){if(gg[t][1].exec(i[3])){s=(i[2]||" ")+gg[t][0];break}}if(s==null){e._isValid=false;return}}if(!a&&s!=null){e._isValid=false;return}if(i[4]){if(vg.exec(i[4])){u="Z"}else{e._isValid=false;return}}e._f=o+(s||"")+(u||"");Pg(e)}else{e._isValid=false}}var bg=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function _g(e,t,n,r,i,a){var o=[wg(e),Zv.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];if(a){o.push(parseInt(a,10))}return o}function wg(e){var t=parseInt(e,10);if(t<=49){return 2e3+t}else if(t<=999){return 1900+t}return t}function xg(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function Tg(e,t,n){if(e){var r=kp.indexOf(e),i=new Date(t[0],t[1],t[2]).getDay();if(r!==i){ah(n).weekdayMismatch=true;n._isValid=false;return false}}return true}var Cg={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function kg(e,t,n){if(e){return Cg[e]}else if(t){return 0}else{var r=parseInt(n,10);var i=r%100,a=(r-i)/100;return a*60+i}}function Sg(e){var t=bg.exec(xg(e._i));if(t){var n=_g(t[4],t[3],t[2],t[5],t[6],t[7]);if(!Tg(t[1],n,e)){return}e._a=n;e._tzm=kg(t[8],t[9],t[10]);e._d=cp.apply(null,e._a);e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm);ah(e).rfc2822=true}else{e._isValid=false}}function Eg(e){var t=mg.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}yg(e);if(e._isValid===false){delete e._isValid}else{return}Sg(e);if(e._isValid===false){delete e._isValid}else{return}Yd.createFromInputFallback(e)}Yd.createFromInputFallback=yh("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are "+"discouraged and will be removed in an upcoming major release. Please refer to "+"http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});Yd.ISO_8601=function(){};Yd.RFC_2822=function(){};function Pg(e){if(e._f===Yd.ISO_8601){yg(e);return}if(e._f===Yd.RFC_2822){Sg(e);return}e._a=[];ah(e).empty=true;var t=""+e._i,n,r,i,a,o,s=t.length,u=0;i=ev(e._f,e._locale).match(Yh)||[];for(n=0;n<i.length;n++){a=i[n];r=(t.match(_v(a,e))||[])[0];if(r){o=t.substr(0,t.indexOf(r));if(o.length>0){ah(e).unusedInput.push(o)}t=t.slice(t.indexOf(r)+r.length);u+=r.length}if(Gh[a]){if(r){ah(e).empty=false}else{ah(e).unusedTokens.push(a)}Sv(a,r,e)}else if(e._strict&&!r){ah(e).unusedTokens.push(a)}}ah(e).charsLeftOver=s-u;if(t.length>0){ah(e).unusedInput.push(t)}if(e._a[Mv]<=12&&ah(e).bigHour===true&&e._a[Mv]>0){ah(e).bigHour=undefined}ah(e).parsedDateParts=e._a.slice(0);ah(e).meridiem=e._meridiem;e._a[Mv]=Og(e._locale,e._a[Mv],e._meridiem);cg(e);sg(e)}function Og(e,t,n){var r;if(n==null){return t}if(e.meridiemHour!=null){return e.meridiemHour(t,n)}else if(e.isPM!=null){r=e.isPM(n);if(r&&t<12){t+=12}if(!r&&t===12){t=0}return t}else{return t}}function Mg(e){var t,n,r,i,a;if(e._f.length===0){ah(e).invalidFormat=true;e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){a=0;t=ch({},e);if(e._useUTC!=null){t._useUTC=e._useUTC}t._f=e._f[i];Pg(t);if(!sh(t)){continue}a+=ah(t).charsLeftOver;a+=ah(t).unusedTokens.length*10;ah(t).score=a;if(r==null||a<r){r=a;n=t}}nh(e,n||t)}function Ag(e){if(e._d){return}var t=zh(e._i);e._a=eh([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)});cg(e)}function Ng(e){var t=new dh(sg(Rg(e)));if(t._nextDay){t.add(1,"d");t._nextDay=undefined}return t}function Rg(e){var t=e._i,n=e._f;e._locale=e._locale||ag(e._l);if(t===null||n===undefined&&t===""){return uh({nullInput:true})}if(typeof t==="string"){e._i=t=e._locale.preparse(t)}if(hh(t)){return new dh(sg(t))}else if(Qd(t)){e._d=t}else if($d(n)){Mg(e)}else if(n){Pg(e)}else{Dg(e)}if(!sh(e)){e._d=null}return e}function Dg(e){var t=e._i;if(Zd(t)){e._d=new Date(Yd.now())}else if(Qd(t)){e._d=new Date(t.valueOf())}else if(typeof t==="string"){Eg(e)}else if($d(t)){e._a=eh(t.slice(0),function(e){return parseInt(e,10)});cg(e)}else if(Gd(t)){Ag(e)}else if(Jd(t)){e._d=new Date(t)}else{Yd.createFromInputFallback(e)}}function Lg(e,t,n,r,i){var a={};if(n===true||n===false){r=n;n=undefined}if(Gd(e)&&Xd(e)||$d(e)&&e.length===0){e=undefined}a._isAMomentObject=true;a._useUTC=a._isUTC=i;a._l=n;a._i=e;a._f=t;a._strict=r;return Ng(a)}function Ig(e,t,n,r){return Lg(e,t,n,r,false)}var Bg=yh("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ig.apply(null,arguments);if(this.isValid()&&e.isValid()){return e<this?this:e}else{return uh()}});var jg=yh("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ig.apply(null,arguments);if(this.isValid()&&e.isValid()){return e>this?this:e}else{return uh()}});function Fg(e,t){var n,r;if(t.length===1&&$d(t[0])){t=t[0]}if(!t.length){return Ig()}n=t[0];for(r=1;r<t.length;++r){if(!t[r].isValid()||t[r][e](n)){n=t[r]}}return n}function Hg(){var e=[].slice.call(arguments,0);return Fg("isBefore",e)}function zg(){var e=[].slice.call(arguments,0);return Fg("isAfter",e)}var Ug=function(){return Date.now?Date.now():+new Date};var Vg=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Wg(e){for(var t in e){if(!(Yv.call(Vg,t)!==-1&&(e[t]==null||!isNaN(e[t])))){return false}}var n=false;for(var r=0;r<Vg.length;++r){if(e[Vg[r]]){if(n){return false}if(parseFloat(e[Vg[r]])!==ph(e[Vg[r]])){n=true}}}return true}function qg(){return this._isValid}function Yg(){return vm(NaN)}function Kg(e){var t=zh(e),n=t.year||0,r=t.quarter||0,i=t.month||0,a=t.week||0,o=t.day||0,s=t.hour||0,u=t.minute||0,l=t.second||0,c=t.millisecond||0;this._isValid=Wg(t);this._milliseconds=+c+l*1e3+u*6e4+s*1e3*60*60;this._days=+o+a*7;this._months=+i+r*3+n*12;this._data={};this._locale=ag();this._bubble()}function $g(e){return e instanceof Kg}function Gg(e){if(e<0){return Math.round(-1*e)*-1}else{return Math.round(e)}}function Xg(e,t){Xh(e,0,0,function(){var e=this.utcOffset();var n="+";if(e<0){e=-e;n="-"}return n+qh(~~(e/60),2)+t+qh(~~e%60,2)})}Xg("Z",":");Xg("ZZ","");bv("Z",pv);bv("ZZ",pv);Cv(["Z","ZZ"],function(e,t,n){n._useUTC=true;n._tzm=Jg(pv,e)});var Zg=/([\+\-]|\d\d)/gi;function Jg(e,t){var n=(t||"").match(e);if(n===null){return null}var r=n[n.length-1]||[];var i=(r+"").match(Zg)||["-",0,0];var a=+(i[1]*60)+ph(i[2]);return a===0?0:i[0]==="+"?a:-a}function Qg(e,t){var n,r;if(t._isUTC){n=t.clone();r=(hh(e)||Qd(e)?e.valueOf():Ig(e).valueOf())-n.valueOf();n._d.setTime(n._d.valueOf()+r);Yd.updateOffset(n,false);return n}else{return Ig(e).local()}}function em(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}Yd.updateOffset=function(){};function tm(e,t,n){var r=this._offset||0,i;if(!this.isValid()){return e!=null?this:NaN}if(e!=null){if(typeof e==="string"){e=Jg(pv,e);if(e===null){return this}}else if(Math.abs(e)<16&&!n){e=e*60}if(!this._isUTC&&t){i=em(this)}this._offset=e;this._isUTC=true;if(i!=null){this.add(i,"m")}if(r!==e){if(!t||this._changeInProgress){bm(this,vm(e-r,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;Yd.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?r:em(this)}}function nm(e,t){if(e!=null){if(typeof e!=="string"){e=-e}this.utcOffset(e,t);return this}else{return-this.utcOffset()}}function rm(e){return this.utcOffset(0,e)}function im(e){if(this._isUTC){this.utcOffset(0,e);this._isUTC=false;if(e){this.subtract(em(this),"m")}}return this}function am(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true)}else if(typeof this._i==="string"){var e=Jg(vv,this._i);if(e!=null){this.utcOffset(e)}else{this.utcOffset(0,true)}}return this}function om(e){if(!this.isValid()){return false}e=e?Ig(e).utcOffset():0;return(this.utcOffset()-e)%60===0}function sm(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function um(){if(!Zd(this._isDSTShifted)){return this._isDSTShifted}var e={};ch(e,this);e=Rg(e);if(e._a){var t=e._isUTC?rh(e._a):Ig(e._a);this._isDSTShifted=this.isValid()&&gh(e._a,t.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function lm(){return this.isValid()?!this._isUTC:false}function cm(){return this.isValid()?this._isUTC:false}function fm(){return this.isValid()?this._isUTC&&this._offset===0:false}var dm=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/;var hm=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function vm(e,t){var n=e,r=null,i,a,o;if($g(e)){n={ms:e._milliseconds,d:e._days,M:e._months}}else if(Jd(e)){n={};if(t){n[t]=e}else{n.milliseconds=e}}else if(!!(r=dm.exec(e))){i=r[1]==="-"?-1:1;n={y:0,d:ph(r[Ov])*i,h:ph(r[Mv])*i,m:ph(r[Av])*i,s:ph(r[Nv])*i,ms:ph(Gg(r[Rv]*1e3))*i}}else if(!!(r=hm.exec(e))){i=r[1]==="-"?-1:r[1]==="+"?1:1;n={y:pm(r[2],i),M:pm(r[3],i),w:pm(r[4],i),d:pm(r[5],i),h:pm(r[6],i),m:pm(r[7],i),s:pm(r[8],i)}}else if(n==null){n={}}else if(typeof n==="object"&&("from"in n||"to"in n)){o=mm(Ig(n.from),Ig(n.to));n={};n.ms=o.milliseconds;n.M=o.months}a=new Kg(n);if($g(e)&&th(e,"_locale")){a._locale=e._locale}return a}vm.fn=Kg.prototype;vm.invalid=Yg;function pm(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function gm(e,t){var n={milliseconds:0,months:0};n.months=t.month()-e.month()+(t.year()-e.year())*12;if(e.clone().add(n.months,"M").isAfter(t)){--n.months}n.milliseconds=+t-+e.clone().add(n.months,"M");return n}function mm(e,t){var n;if(!(e.isValid()&&t.isValid())){return{milliseconds:0,months:0}}t=Qg(t,e);if(e.isBefore(t)){n=gm(e,t)}else{n=gm(t,e);n.milliseconds=-n.milliseconds;n.months=-n.months}return n}function ym(e,t){return function(n,r){var i,a;if(r!==null&&!isNaN(+r)){_h(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");a=n;n=r;r=a}n=typeof n==="string"?+n:n;i=vm(n,r);bm(this,i,e);return this}}function bm(e,t,n,r){var i=t._milliseconds,a=Gg(t._days),o=Gg(t._months);if(!e.isValid()){return}r=r==null?true:r;if(o){tp(e,zv(e,"Month")+o*n)}if(a){Uv(e,"Date",zv(e,"Date")+a*n)}if(i){e._d.setTime(e._d.valueOf()+i*n)}if(r){Yd.updateOffset(e,a||o)}}var _m=ym(1,"add");var wm=ym(-1,"subtract");function xm(e,t){var n=e.diff(t,"days",true);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Tm(e,t){var n=e||Ig(),r=Qg(n,this).startOf("day"),i=Yd.calendarFormat(this,r)||"sameElse";var a=t&&(wh(t[i])?t[i].call(this,n):t[i]);return this.format(a||this.localeData().calendar(i,this,Ig(n)))}function Cm(){return new dh(this)}function km(e,t){var n=hh(e)?e:Ig(e);if(!(this.isValid()&&n.isValid())){return false}t=Hh(!Zd(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()>n.valueOf()}else{return n.valueOf()<this.clone().startOf(t).valueOf()}}function Sm(e,t){var n=hh(e)?e:Ig(e);if(!(this.isValid()&&n.isValid())){return false}t=Hh(!Zd(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()<n.valueOf()}else{return this.clone().endOf(t).valueOf()<n.valueOf()}}function Em(e,t,n,r){r=r||"()";return(r[0]==="("?this.isAfter(e,n):!this.isBefore(e,n))&&(r[1]===")"?this.isBefore(t,n):!this.isAfter(t,n))}function Pm(e,t){var n=hh(e)?e:Ig(e),r;if(!(this.isValid()&&n.isValid())){return false}t=Hh(t||"millisecond");if(t==="millisecond"){return this.valueOf()===n.valueOf()}else{r=n.valueOf();return this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf()}}function Om(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Mm(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Am(e,t,n){var r,i,a,o;if(!this.isValid()){return NaN}r=Qg(e,this);if(!r.isValid()){return NaN}i=(r.utcOffset()-this.utcOffset())*6e4;t=Hh(t);switch(t){case"year":o=Nm(this,r)/12;break;case"month":o=Nm(this,r);break;case"quarter":o=Nm(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:vh(o)}function Nm(e,t){var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,a;if(t-r<0){i=e.clone().add(n-1,"months");a=(t-r)/(r-i)}else{i=e.clone().add(n+1,"months");a=(t-r)/(i-r)}return-(n+a)||0}Yd.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Yd.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Rm(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Dm(e){if(!this.isValid()){return null}var t=e!==true;var n=t?this.clone().utc():this;if(n.year()<0||n.year()>9999){return Qh(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ")}if(wh(Date.prototype.toISOString)){if(t){return this.toDate().toISOString()}else{return new Date(this._d.valueOf()).toISOString().replace("Z",Qh(n,"Z"))}}return Qh(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Lm(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)"}var e="moment";var t="";if(!this.isLocal()){e=this.utcOffset()===0?"moment.utc":"moment.parseZone";t="Z"}var n="["+e+'("]';var r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";var i="-MM-DD[T]HH:mm:ss.SSS";var a=t+'[")]';return this.format(n+r+i+a)}function Im(e){if(!e){e=this.isUtc()?Yd.defaultFormatUtc:Yd.defaultFormat}var t=Qh(this,e);return this.localeData().postformat(t)}function Bm(e,t){if(this.isValid()&&(hh(e)&&e.isValid()||Ig(e).isValid())){return vm({to:this,from:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function jm(e){return this.from(Ig(),e)}function Fm(e,t){if(this.isValid()&&(hh(e)&&e.isValid()||Ig(e).isValid())){return vm({from:this,to:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Hm(e){return this.to(Ig(),e)}function zm(e){var t;if(e===undefined){return this._locale._abbr}else{t=ag(e);if(t!=null){this._locale=t}return this}}var Um=yh("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){if(e===undefined){return this.localeData()}else{return this.locale(e)}});function Vm(){return this._locale}function Wm(e){e=Hh(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(e==="week"){this.weekday(0)}if(e==="isoWeek"){this.isoWeekday(1)}if(e==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function qm(e){e=Hh(e);if(e===undefined||e==="millisecond"){return this}if(e==="date"){e="day"}return this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function Ym(){return this._d.valueOf()-(this._offset||0)*6e4}function Km(){return Math.floor(this.valueOf()/1e3)}function $m(){return new Date(this.valueOf())}function Gm(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Xm(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Zm(){return this.isValid()?this.toISOString():null}function Jm(){return sh(this)}function Qm(){return nh({},ah(this))}function ey(){return ah(this).overflow}function ty(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Xh(0,["gg",2],0,function(){return this.weekYear()%100});Xh(0,["GG",2],0,function(){return this.isoWeekYear()%100});function ny(e,t){Xh(0,[e,e.length],0,t)}ny("gggg","weekYear");ny("ggggg","weekYear");ny("GGGG","isoWeekYear");ny("GGGGG","isoWeekYear");Fh("weekYear","gg");Fh("isoWeekYear","GG");Vh("weekYear",1);Vh("isoWeekYear",1);bv("G",hv);bv("g",hv);bv("GG",ov,nv);bv("gg",ov,nv);bv("GGGG",cv,iv);bv("gggg",cv,iv);bv("GGGGG",fv,av);bv("ggggg",fv,av);kv(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=ph(e)});kv(["gg","GG"],function(e,t,n,r){t[r]=Yd.parseTwoDigitYear(e)});function ry(e){return sy.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function iy(e){return sy.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function ay(){return vp(this.year(),1,4)}function oy(){var e=this.localeData()._week;return vp(this.year(),e.dow,e.doy)}function sy(e,t,n,r,i){var a;if(e==null){return hp(this,r,i).year}else{a=vp(e,r,i);if(t>a){t=a}return uy.call(this,e,t,n,r,i)}}function uy(e,t,n,r,i){var a=dp(e,t,n,r,i),o=cp(a.year,0,a.dayOfYear);this.year(o.getUTCFullYear());this.month(o.getUTCMonth());this.date(o.getUTCDate());return this}Xh("Q",0,"Qo","quarter");Fh("quarter","Q");Vh("quarter",7);bv("Q",tv);Cv("Q",function(e,t){t[Pv]=(ph(e)-1)*3});function ly(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}Xh("D",["DD",2],"Do","date");Fh("date","D");Vh("date",9);bv("D",ov);bv("DD",ov,nv);bv("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});Cv(["D","DD"],Ov);Cv("Do",function(e,t){t[Ov]=ph(e.match(ov)[0])});var cy=Hv("Date",true);Xh("DDD",["DDDD",3],"DDDo","dayOfYear");Fh("dayOfYear","DDD");Vh("dayOfYear",4);bv("DDD",lv);bv("DDDD",rv);Cv(["DDD","DDDD"],function(e,t,n){n._dayOfYear=ph(e)});function fy(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}Xh("m",["mm",2],0,"minute");Fh("minute","m");Vh("minute",14);bv("m",ov);bv("mm",ov,nv);Cv(["m","mm"],Av);var dy=Hv("Minutes",false);Xh("s",["ss",2],0,"second");Fh("second","s");Vh("second",15);bv("s",ov);bv("ss",ov,nv);Cv(["s","ss"],Nv);var hy=Hv("Seconds",false);Xh("S",0,0,function(){return~~(this.millisecond()/100)});Xh(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Xh(0,["SSS",3],0,"millisecond");Xh(0,["SSSS",4],0,function(){return this.millisecond()*10});Xh(0,["SSSSS",5],0,function(){return this.millisecond()*100});Xh(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Xh(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Xh(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Xh(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Fh("millisecond","ms");Vh("millisecond",16);bv("S",lv,tv);bv("SS",lv,nv);bv("SSS",lv,rv);var vy;for(vy="SSSS";vy.length<=9;vy+="S"){bv(vy,dv)}function py(e,t){t[Rv]=ph(("0."+e)*1e3)}for(vy="S";vy.length<=9;vy+="S"){Cv(vy,py)}var gy=Hv("Milliseconds",false);Xh("z",0,0,"zoneAbbr");Xh("zz",0,0,"zoneName");function my(){return this._isUTC?"UTC":""}function yy(){return this._isUTC?"Coordinated Universal Time":""}var by=dh.prototype;by.add=_m;by.calendar=Tm;by.clone=Cm;by.diff=Am;by.endOf=qm;by.format=Im;by.from=Bm;by.fromNow=jm;by.to=Fm;by.toNow=Hm;by.get=Vv;by.invalidAt=ey;by.isAfter=km;by.isBefore=Sm;by.isBetween=Em;by.isSame=Pm;by.isSameOrAfter=Om;by.isSameOrBefore=Mm;by.isValid=Jm;by.lang=Um;by.locale=zm;by.localeData=Vm;by.max=jg;by.min=Bg;by.parsingFlags=Qm;by.set=Wv;by.startOf=Wm;by.subtract=wm;by.toArray=Gm;by.toObject=Xm;by.toDate=$m;by.toISOString=Dm;by.inspect=Lm;by.toJSON=Zm;by.toString=Rm;by.unix=Km;by.valueOf=Ym;by.creationData=ty;by.year=jv;by.isLeapYear=Fv;by.weekYear=ry;by.isoWeekYear=iy;by.quarter=by.quarters=ly;by.month=np;by.daysInMonth=rp;by.week=by.weeks=bp;by.isoWeek=by.isoWeeks=_p;by.weeksInYear=oy;by.isoWeeksInYear=ay;by.date=cy;by.day=by.days=Ap;by.weekday=Np;by.isoWeekday=Rp;by.dayOfYear=fy;by.hour=by.hours=$p;by.minute=by.minutes=dy;by.second=by.seconds=hy;by.millisecond=by.milliseconds=gy;by.utcOffset=tm;by.utc=rm;by.local=im;by.parseZone=am;by.hasAlignedHourOffset=om;by.isDST=sm;by.isLocal=lm;by.isUtcOffset=cm;by.isUtc=fm;by.isUTC=fm;by.zoneAbbr=my;by.zoneName=yy;by.dates=yh("dates accessor is deprecated. Use date instead.",cy);by.months=yh("months accessor is deprecated. Use month instead",np);by.years=yh("years accessor is deprecated. Use year instead",jv);by.zone=yh("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",nm);by.isDSTShifted=yh("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",um);function _y(e){return Ig(e*1e3)}function wy(){return Ig.apply(null,arguments).parseZone()}function xy(e){return e}var Ty=Ch.prototype;Ty.calendar=Eh;Ty.longDateFormat=Oh;Ty.invalidDate=Ah;Ty.ordinal=Dh;Ty.preparse=xy;Ty.postformat=xy;Ty.relativeTime=Ih;Ty.pastFuture=Bh;Ty.set=xh;Ty.months=Xv;Ty.monthsShort=Jv;Ty.monthsParse=ep;Ty.monthsRegex=sp;Ty.monthsShortRegex=ap;Ty.week=pp;Ty.firstDayOfYear=yp;Ty.firstDayOfWeek=mp;Ty.weekdays=Cp;Ty.weekdaysMin=Pp;Ty.weekdaysShort=Sp;Ty.weekdaysParse=Mp;Ty.weekdaysRegex=Lp;Ty.weekdaysShortRegex=Bp;Ty.weekdaysMinRegex=Fp;Ty.isPM=qp;Ty.meridiem=Kp;function Cy(e,t,n,r){var i=ag();var a=rh().set(r,t);return i[n](a,e)}function ky(e,t,n){if(Jd(e)){t=e;e=undefined}e=e||"";if(t!=null){return Cy(e,t,n,"month")}var r;var i=[];for(r=0;r<12;r++){i[r]=Cy(e,r,n,"month")}return i}function Sy(e,t,n,r){if(typeof e==="boolean"){if(Jd(t)){n=t;t=undefined}t=t||""}else{t=e;n=t;e=false;if(Jd(t)){n=t;t=undefined}t=t||""}var i=ag(),a=e?i._week.dow:0;if(n!=null){return Cy(t,(n+a)%7,r,"day")}var o;var s=[];for(o=0;o<7;o++){s[o]=Cy(t,(o+a)%7,r,"day")}return s}function Ey(e,t){return ky(e,t,"months")}function Py(e,t){return ky(e,t,"monthsShort")}function Oy(e,t,n){return Sy(e,t,n,"weekdays")}function My(e,t,n){return Sy(e,t,n,"weekdaysShort")}function Ay(e,t,n){return Sy(e,t,n,"weekdaysMin")}ng("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=ph(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});Yd.lang=yh("moment.lang is deprecated. Use moment.locale instead.",ng);Yd.langData=yh("moment.langData is deprecated. Use moment.localeData instead.",ag);var Ny=Math.abs;function Ry(){var e=this._data;this._milliseconds=Ny(this._milliseconds);this._days=Ny(this._days);this._months=Ny(this._months);e.milliseconds=Ny(e.milliseconds);e.seconds=Ny(e.seconds);e.minutes=Ny(e.minutes);e.hours=Ny(e.hours);e.months=Ny(e.months);e.years=Ny(e.years);return this}function Dy(e,t,n,r){var i=vm(t,n);e._milliseconds+=r*i._milliseconds;e._days+=r*i._days;e._months+=r*i._months;return e._bubble()}function Ly(e,t){return Dy(this,e,t,1)}function Iy(e,t){return Dy(this,e,t,-1)}function By(e){if(e<0){return Math.floor(e)}else{return Math.ceil(e)}}function jy(){var e=this._milliseconds;var t=this._days;var n=this._months;var r=this._data;var i,a,o,s,u;if(!(e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0)){e+=By(Hy(n)+t)*864e5;t=0;n=0}r.milliseconds=e%1e3;i=vh(e/1e3);r.seconds=i%60;a=vh(i/60);r.minutes=a%60;o=vh(a/60);r.hours=o%24;t+=vh(o/24);u=vh(Fy(t));n+=u;t-=By(Hy(u));s=vh(n/12);n%=12;r.days=t;r.months=n;r.years=s;return this}function Fy(e){return e*4800/146097}function Hy(e){return e*146097/4800}function zy(e){if(!this.isValid()){return NaN}var t;var n;var r=this._milliseconds;e=Hh(e);if(e==="month"||e==="year"){t=this._days+r/864e5;n=this._months+Fy(t);return e==="month"?n:n/12}else{t=this._days+Math.round(Hy(this._months));switch(e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}}function Uy(){if(!this.isValid()){return NaN}return this._milliseconds+this._days*864e5+this._months%12*2592e6+ph(this._months/12)*31536e6}function Vy(e){return function(){return this.as(e)}}var Wy=Vy("ms");var qy=Vy("s");var Yy=Vy("m");var Ky=Vy("h");var $y=Vy("d");var Gy=Vy("w");var Xy=Vy("M");var Zy=Vy("y");function Jy(){return vm(this)}function Qy(e){e=Hh(e);return this.isValid()?this[e+"s"]():NaN}function eb(e){return function(){return this.isValid()?this._data[e]:NaN}}var tb=eb("milliseconds");var nb=eb("seconds");var rb=eb("minutes");var ib=eb("hours");var ab=eb("days");var ob=eb("months");var sb=eb("years");function ub(){return vh(this.days()/7)}var lb=Math.round;var cb={ss:44,s:45,m:45,h:22,d:26,M:11};function fb(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function db(e,t,n){var r=vm(e).abs();var i=lb(r.as("s"));var a=lb(r.as("m"));var o=lb(r.as("h"));var s=lb(r.as("d"));var u=lb(r.as("M"));var l=lb(r.as("y"));var c=i<=cb.ss&&["s",i]||i<cb.s&&["ss",i]||a<=1&&["m"]||a<cb.m&&["mm",a]||o<=1&&["h"]||o<cb.h&&["hh",o]||s<=1&&["d"]||s<cb.d&&["dd",s]||u<=1&&["M"]||u<cb.M&&["MM",u]||l<=1&&["y"]||["yy",l];c[2]=t;c[3]=+e>0;c[4]=n;return fb.apply(null,c)}function hb(e){if(e===undefined){return lb}if(typeof e==="function"){lb=e;return true}return false}function vb(e,t){if(cb[e]===undefined){return false}if(t===undefined){return cb[e]}cb[e]=t;if(e==="s"){cb.ss=t-1}return true}function pb(e){if(!this.isValid()){return this.localeData().invalidDate()}var t=this.localeData();var n=db(this,!e,t);if(e){n=t.pastFuture(+this,n)}return t.postformat(n)}var gb=Math.abs;function mb(e){return(e>0)-(e<0)||+e}function yb(){if(!this.isValid()){return this.localeData().invalidDate()}var e=gb(this._milliseconds)/1e3;var t=gb(this._days);var n=gb(this._months);var r,i,a;r=vh(e/60);i=vh(r/60);e%=60;r%=60;a=vh(n/12);n%=12;var o=a;var s=n;var u=t;var l=i;var c=r;var f=e?e.toFixed(3).replace(/\.?0+$/,""):"";var d=this.asSeconds();if(!d){return"P0D"}var h=d<0?"-":"";var v=mb(this._months)!==mb(d)?"-":"";var p=mb(this._days)!==mb(d)?"-":"";var g=mb(this._milliseconds)!==mb(d)?"-":"";return h+"P"+(o?v+o+"Y":"")+(s?v+s+"M":"")+(u?p+u+"D":"")+(l||c||f?"T":"")+(l?g+l+"H":"")+(c?g+c+"M":"")+(f?g+f+"S":"")}var bb=Kg.prototype;bb.isValid=qg;bb.abs=Ry;bb.add=Ly;bb.subtract=Iy;bb.as=zy;bb.asMilliseconds=Wy;bb.asSeconds=qy;bb.asMinutes=Yy;bb.asHours=Ky;bb.asDays=$y;bb.asWeeks=Gy;bb.asMonths=Xy;bb.asYears=Zy;bb.valueOf=Uy;bb._bubble=jy;bb.clone=Jy;bb.get=Qy;bb.milliseconds=tb;bb.seconds=nb;bb.minutes=rb;bb.hours=ib;bb.days=ab;bb.weeks=ub;bb.months=ob;bb.years=sb;bb.humanize=pb;bb.toISOString=yb;bb.toString=yb;bb.toJSON=yb;bb.locale=zm;bb.localeData=Vm;bb.toIsoString=yh("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",yb);bb.lang=Um;Xh("X",0,0,"unix");Xh("x",0,0,"valueOf");bv("x",hv);bv("X",gv);Cv("X",function(e,t,n){n._d=new Date(parseFloat(e,10)*1e3)});Cv("x",function(e,t,n){n._d=new Date(ph(e))});Yd.version="2.20.1";Kd(Ig);Yd.fn=by;Yd.min=Hg;Yd.max=zg;Yd.now=Ug;Yd.utc=rh;Yd.unix=_y;Yd.months=Ey;Yd.isDate=Qd;Yd.locale=ng;Yd.invalid=uh;Yd.duration=vm;Yd.isMoment=hh;Yd.weekdays=Oy;Yd.parseZone=wy;Yd.localeData=ag;Yd.isDuration=$g;Yd.monthsShort=Py;Yd.weekdaysMin=Ay;Yd.defineLocale=rg;Yd.updateLocale=ig;Yd.locales=og;Yd.weekdaysShort=My;Yd.normalizeUnits=Hh;Yd.relativeTimeRounding=hb;Yd.relativeTimeThreshold=vb;Yd.calendarFormat=xm;Yd.prototype=by;Yd.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"};"use strict";var _b={rfc3986:{}};_b.generate=function(){var e="|";var t="0-9";var n="["+t+"]";var r="a-zA-Z";var i="["+r+"]";_b.rfc3986.cidr=n+e+"[1-2]"+n+e+"3"+"[0-2]";var a=t+"A-Fa-f";var o="["+a+"]";var s=r+t+"-\\._~";var u="!\\$&'\\(\\)\\*\\+,;=";var l="%"+a;var c=s+l+u+":@";var f="["+c+"]";var d="0?";var h="(?:"+d+d+n+e+d+"[1-9]"+n+e+"1"+n+n+e+"2"+"[0-4]"+n+e+"25"+"[0-5])";_b.rfc3986.IPv4address="(?:"+h+"\\.){3}"+h;var v=o+"{1,4}";var p="(?:"+v+":"+v+"|"+_b.rfc3986.IPv4address+")";var g="(?:"+v+":){6}"+p;var m="::(?:"+v+":){5}"+p;var y="(?:"+v+")?::(?:"+v+":){4}"+p;var b="(?:(?:"+v+":){0,1}"+v+")?::(?:"+v+":){3}"+p;var _="(?:(?:"+v+":){0,2}"+v+")?::(?:"+v+":){2}"+p;var w="(?:(?:"+v+":){0,3}"+v+")?::"+v+":"+p;var x="(?:(?:"+v+":){0,4}"+v+")?::"+p;var T="(?:(?:"+v+":){0,5}"+v+")?::"+v;var C="(?:(?:"+v+":){0,6}"+v+")?::";_b.rfc3986.IPv6address="(?:"+g+e+m+e+y+e+b+e+_+e+w+e+x+e+T+e+C+")";_b.rfc3986.IPvFuture="v"+o+"+\\.["+s+u+":]+";_b.rfc3986.scheme=i+"["+r+t+"+-\\.]*";var k="["+s+l+u+":]*";_b.rfc3986.IPLiteral="\\[(?:"+_b.rfc3986.IPv6address+e+_b.rfc3986.IPvFuture+")\\]";var S="["+s+l+u+"]{0,255}";var E="(?:"+_b.rfc3986.IPLiteral+e+_b.rfc3986.IPv4address+e+S+")";var P=n+"*";var O="(?:"+k+"@)?"+E+"(?::"+P+")?";var M=f+"*";var A=f+"+";var N="(?:\\/"+M+")*";var R="\\/(?:"+A+N+")?";var D=A+N;_b.rfc3986.hierPart="(?:"+"(?:\\/\\/"+O+N+")"+e+R+e+D+")";_b.rfc3986.query="["+c+"\\/\\?]*(?=#|$)";_b.rfc3986.fragment="["+c+"\\/\\?]*";_b.rfc3986.uri="^(?:"+_b.rfc3986.scheme+":"+_b.rfc3986.hierPart+")(?:\\?"+_b.rfc3986.query+")?"+"(?:#"+_b.rfc3986.fragment+")?$"};_b.generate();var wb=_b.rfc3986;const xb={isValid:true,message:""};const Tb=(e,t)=>{const n=to({},xb);if(!ro(t,"multipleOf")){return n}const r=t.multipleOf;if(!ul(r)||r<0){return n}if(e%r!==0){n.isValid=false;n.message=`${r}„ÅßÂâ≤„ÇäÂàá„Çå„ÇãÊï∞ÂÄ§„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`}return n};const Cb=(e,t)=>{const n=to({},xb);if(!ro(t,"maximum")){return n}const r=t.maximum;if(!ul(r)){return n}const i=!!t.exclusiveMaximum;if(i){if(e>=r){n.isValid=false;n.message=`${r}„Çà„ÇäÂ∞è„Åï„ÅÑÊï∞ÂÄ§„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}}else{if(e>r){n.isValid=false;n.message=`${r}‰ª•‰∏ã„ÅÆÊï∞ÂÄ§„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}}return n};const kb=(e,t)=>{const n=to({},xb);if(!ro(t,"minimum")){return n}const r=t.minimum;if(!ul(r)){return n}const i=!!t.exclusiveMinimum;if(i){if(e<=r){n.isValid=false;n.message=`${r}„Çà„ÇäÂ§ß„Åç„ÅÑÊï∞ÂÄ§„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}}else{if(e<r){n.isValid=false;n.message=`${r}‰ª•‰∏ä„ÅÆÊï∞ÂÄ§„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}}return n};const Sb=(e,t)=>{const n=to({},xb);if(!ro(t,"maxLength")){return n}const r=t.maxLength;if(!Ed(r)||r<0){return n}if(e.length>r){n.isValid=false;n.message=`ÊñáÂ≠óÊï∞„Çí${r}‰ª•‰∏ã„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}return n};const Eb=(e,t)=>{const n=to({},xb);const r=t.minLength||0;if(e.length<r){n.isValid=false;n.message=`ÊñáÂ≠óÊï∞„Çí${r}‰ª•‰∏ä„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}return n};const Pb=(e,t)=>{const n=to({},xb);if(!ro(t,"pattern")){return n}const r=t.pattern;if(!e.match(r)){n.isValid=false;n.message=`${r}„Å´„Éû„ÉÉ„ÉÅ„Åï„Åõ„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}return n};const Ob=(e,t)=>{const n=to({},xb);let r;let i;if(ro(t,"items")){r=t.items}else{r={}}if(ro(t,"additionalItems")){i=t.additionalItems}else{i={}}if(Mf(r)||_o(r)){return n}if(Tf(i)&&i||_o(i)){return n}if(Tf(i)&&!i&&lu(r)){if(e.length<=r.length){return n}}n.isValid=false;n.message=`Ë¶ÅÁ¥†Êï∞„Çí${r.length}‰ª•‰∏ã„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n};const Mb=(e,t)=>{const n=to({},xb);if(!ro(t,"maxItems")){return n}const r=t.maxItems;if(!Ed(r)||r<0){return n}if(e.length>r){n.isValid=false;n.message=`Ë¶ÅÁ¥†Êï∞„Çí${r}‰ª•‰∏ã„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}return n};const Ab=(e,t)=>{const n=to({},xb);const r=t.minItems||0;if(e.length<r){n.isValid=false;n.message=`Ë¶ÅÁ¥†Êï∞„Çí${r}‰ª•‰∏ä„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}return n};const Nb=(e,t)=>{const n=to({},xb);const r=t.uniqueItems||false;if(!r){return n}if(e.length!==ol(e,(e,t)=>{e=JSON.stringify(Pl(e));t=JSON.stringify(Pl(t));return e===t}).length){n.isValid=false;n.message="ÂÜÖÂÆπ„ÅåÈáçË§á„Åó„Å™„ÅÑË¶ÅÁ¥†„ÅßÊßãÊàê„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ";return n}return n};const Rb=(e,t)=>{const n=to({},xb);if(!ro(t,"maxProperties")){return n}const r=t.maxProperties;if(!Ed(r)||r<0){return n}if(Ml(e)>r){n.isValid=false;n.message=`Ë¶ÅÁ¥†Êï∞„Çí${r}‰ª•‰∏ã„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}return n};const Db=(e,t)=>{const n=to({},xb);const r=t.minProperties||0;if(Ml(e)<r){n.isValid=false;n.message=`Ë¶ÅÁ¥†Êï∞„Çí${r}‰ª•‰∏ä„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}return n};const Lb=(e,t)=>{const n=to({},xb);if(!ro(t,"required")){return n}const r=t.required;if(!lu(r)||!r.length){return n}fu(r,r=>{if(!ro(e,r)){n.isValid=false;const e=t.properties[r].description?`(${t.properties[r].description})`:"";n.message=`Ë¶ÅÁ¥†„Å´${r}${e}„ÇíÂê´„ÇÅ„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`}});return n};const Ib=(e,t)=>{const n=to({},xb);let r;if(!ro(t,"properties")){}else{}if(!ro(t,"patternProperties")){}else{}if(!ro(t,"additionalProperties")){r={}}else{r=t.additionalProperties}if(Tf(r)&&r||_o(r)){return n}if(Tf(r)&&!r){}return n};const Bb=(e,t)=>{const n=to({},xb);return n};const jb=(e,t)=>{const n=to({},xb);if(!ro(t,"enum")){return n}const r=t.enum;if(!lu(r)){return n}let i=false;fu(r,t=>{if(e===t){i=true}});if(!i){n.isValid=false;n.message=`${JSON.stringify(r)}„ÅÆ„ÅÑ„Åö„Çå„Åã„ÅÆÂÄ§„ÇíË®≠ÂÆö„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`}return n};const Fb=(e,t)=>{const n=to({},xb);if(!ro(t,"type")){return n}let r;if(lu(t.type)){r=t.type}else{r=[t.type]}let i=false;fu(r,t=>{switch(t){case"integer":case"number":if(ul(e)){i=true}break;case"string":if(Ef(e)){i=true}break;case"array":if(lu(e)){i=true}break;case"object":if(_o(e)){i=true}break;case"boolean":if(Tf(e)){i=true}break;case"null":if(kf(e)){i=true}break;case"file":if(!!e&&Ef(e.name)){i=true}break;default:break}});if(!i){n.isValid=false;n.message=`Âûã„Çí${JSON.stringify(r)}„ÅÆ„ÅÑ„Åö„Çå„Åã„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`}return n};const Hb=(e,t)=>{const n=to({},xb);if(!ro(t,"allOf")){return n}const r=t.allOf;if(!lu(r)){return n}return n};const zb=(e,t)=>{const n=to({},xb);if(!ro(t,"anyOf")){return n}const r=t.anyOf;if(!lu(r)){return n}return n};const Ub=(e,t)=>{const n=to({},xb);if(!ro(t,"oneOf")){return n}const r=t.oneOf;if(!lu(r)){return n}return n};const Vb=(e,t)=>{const n=to({},xb);if(!ro(t,"not")){return n}const r=t.not;if(!lu(r)){return n}return n};const Wb=(e,t)=>{const n=to({},xb);if(!ro(t,"definitions")){return n}const r=t.definitions;if(!lu(r)){return n}return n};const qb=(e,t)=>{const n=to({},xb);if(!ro(t,"format")){return n}const r=t.format;if(!Ef(r)){return n}switch(r){case"date-time":{if(!Ef(e)){return n}const t=/^(\d{4})-(0[1-9]|1[012])-(0[1-9]|[12]\d|3[01])T([01]\d|2[0-3]):([0-5]\d):([0-5]\d|60)(\.\d+)?(([Zz])|([\+\-])([01]\d|2[0-3]):([0-5]\d))$/;const r=e.match(t);if(kf(r)){n.isValid=false;n.message='"date-time"„Å´Ââá„Å£„Åü„Éï„Ç©„Éº„Éû„ÉÉ„Éà„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';return n}const i=Yd(e).isValid();if(!i){n.isValid=false;n.message="Â≠òÂú®„Åô„ÇãÊó•‰ªò„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ";return n}break}case"email":{if(!Ef(e)){return n}const t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;const r=e.match(t);if(kf(r)){n.isValid=false;n.message='"email"„Å´Ââá„Å£„Åü„Éï„Ç©„Éº„Éû„ÉÉ„Éà„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';return n}break}case"hostname":{if(!Ef(e)){return n}if(e.length>255){n.isValid=false;n.message='"hostname"„ÅØ255ÊñáÂ≠ó‰ª•ÂÜÖ„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';return n}const t=/^[a-z\d]([a-z\d\-]{0,61}[a-z\d])?(\.[a-z\d]([a-z\d\-]{0,61}[‚Äå‚Äãa-z\d])?)*$/i;const r=e.match(t);if(kf(r)){n.isValid=false;n.message='"hostname"„Å´Ââá„Å£„Åü„Éï„Ç©„Éº„Éû„ÉÉ„Éà„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';return n}break}case"ipv4":{if(!Ef(e)){return n}const t=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;const r=e.match(t);if(kf(r)){n.isValid=false;n.message='"ipv4"„Å´Ââá„Å£„Åü„Éï„Ç©„Éº„Éû„ÉÉ„Éà„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';return n}break}case"ipv6":{if(!Ef(e)){return n}if(e.match(/::/)){let t=7;if(e.match(/((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/)){t=6}if(e.match(/^::/)){e=e.replace("::","0::")}if(e.match(/::$/)){e=e.replace("::","::0")}while(e.match(/:/g).length<t){e=e.replace("::",":0::")}e=e.replace("::",":0:")}let t=[/^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/,/^([0-9a-fA-F]{1,4}:){6}((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/];let r=false;fu(t,t=>{const n=e.match(t);if(!kf(n)){r=true}});if(!r){n.isValid=false;n.message='"ipv6"„Å´Ââá„Å£„Åü„Éï„Ç©„Éº„Éû„ÉÉ„Éà„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';return n}break}case"uri":{if(!Ef(e)){return n}const t=wb.uri;const r=e.match(t);if(kf(r)){n.isValid=false;n.message='"uri"„Å´Ââá„Å£„Åü„Éï„Ç©„Éº„Éû„ÉÉ„Éà„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';return n}break}default:break}return n};var Yb={errors:(e,t)=>{const n=[];if(Mf(e)){if(t.required){return["ÂøÖÈ†àÈ†ÖÁõÆ„Åß„Åô„ÄÇ"]}return n}const r=Fb(e,t);if(!r.isValid){return[r.message]}const i=t.type;switch(i){case"number":n.push(Tb(e,t));n.push(Cb(e,t));n.push(kb(e,t));break;case"string":n.push(Sb(e,t));n.push(Eb(e,t));n.push(Pb(e,t));break;case"array":n.push(Ob(e,t));n.push(Mb(e,t));n.push(Ab(e,t));n.push(Nb(e,t));break;case"object":n.push(Rb(e,t));n.push(Db(e,t));n.push(Lb(e,t));n.push(Ib(e,t));n.push(Bb(e,t));break;default:break}n.push(jb(e,t));n.push(Hb(e,t));n.push(zb(e,t));n.push(Ub(e,t));n.push(Vb(e,t));n.push(Wb(e,t));n.push(qb(e,t));return Gu(Kl(n,e=>{return e.isValid}),e=>{return e.message})}};const Kb=e=>{if(cd(e)){return false}return ul(e)};var $b=function(){const e=this.riotx.get();const t=this.opts.formobject;this.title=t.name;if(t.required){this.title=`${this.title} *`}this.description=t.description;this.autocompleteConfig=t["x-autocomplete"];this.accept=t["x-accept"]||"*";this.mimeType=t["x-mime-type"];this.placeholder=t.example;this.explorerConfig=t["x-explorer-component"];if(!!this.explorerConfig){this.explorerConfig=to({api:to({method:"get"},this.explorerConfig.api),pagination:true,style:"explorer"},this.explorerConfig)}this.isDisabled=this.opts.isdisabled;if(t.readOnly){this.isDisabled=true}this.uiType=(()=>{if(!this.opts.ispreview&&!t.readOnly||t.type!=="string"||!this.opts.val){return Wd.getUIType(t)}const e=this.opts.val.split(".");if(e.length<2){return Wd.getUIType(t)}const n=e[e.length-1];if(ql(["png","jpg","jpeg","gif"],n)){return"image"}return Wd.getUIType(t)})();this.errors=[];this.hasError=false;const n=()=>{this.errors=Yb.errors(this.opts.val,t);this.hasError=!!this.errors.length;if(!this.opts.onvalidate){return}this.opts.onvalidate(this._riot_id,!this.hasError)};this.isFocus=false;this.getSelectOptions=(()=>{const e=[];if(Mf(this.opts.val)){e.push({label:"-- select an option --",value:undefined,isSelected:true,isDiabled:true})}fu(t.enum,(t,n)=>{e.push({id:`select_${n}`,label:t,value:t,isSelected:t===this.opts.val})});return e});this.isMobile=e.getter("layout.isMobile");this.listen("layout",()=>{this.isMobile=e.getter("layout.isMobile");this.update()});n();this.on("update",()=>{n()});const r=e=>{if(!this.opts.onsubmit){return}this.opts.onsubmit(this.opts.identifier,e)};const i=e=>{if(!this.opts.onchange){return}this.opts.onchange(this.opts.identifier,e)};const a=()=>{if(!this.isFocus){return}if(!this.hasError){return}if(this.opts.ispreview){return}if(this.isMobile){return}const t=this.refs.body;const n=t.getBoundingClientRect();e.action("popovers.add","viron-parameters-error",{message:this.errors[0]},{x:n.left+n.width/2,y:n.top,width:n.width,direction:"B",isError:true,watchElm:t})};this.handleBodyTap=(e=>{e.stopPropagation()});this.handleFormFocus=(()=>{this.isFocus=true;this.update();this.closeAllFloats();a()});this.handleFormBlur=(()=>{this.isFocus=false;this.update()});this.handleTextInputSubmit=(e=>{let t;if(!e){t=undefined}else{t=e}r(t)});this.handleTextinputChange=(e=>{let t;if(!e){t=undefined}else{t=e}i(t)});this.handleTextareaChange=(e=>{let t;if(!e){t=undefined}else{t=e}i(t)});this.handleHtmlChange=(e=>{let t;if(!e){t=undefined}else{t=e}i(t)});this.handlePugChange=(e=>{let t;if(!e){t=undefined}else{t=e}i(t)});this.handleNumberInputSubmit=(e=>{let t;if(!Kb(e)){t=undefined}else{t=e}r(t)});this.handleNumberinputChange=(e=>{let t;if(!Kb(e)){t=undefined}else{t=e}i(t)});this.handleCheckboxChange=(e=>{i(e)});this.handleSelectChange=(e=>{const t=qu(e,e=>{return e.isSelected});const n=t?t.label:undefined;i(n)});this.handleUploaderChange=(e=>{let t;if(!e){t=undefined}else{t=e}i(t)});this.handleBase64Change=(e=>{let t;if(!e){t=undefined}else{t=e}i(t)});this.handleAutocompleteSubmit=(e=>{switch(t.type){case"string":if(!e){e=undefined}break;case"number":case"integer":if(!e){e=undefined}else{e=Number(e);if(!Kb(e)){e=undefined}}break}r(e)});this.handleAutocompleteChange=(e=>{switch(t.type){case"string":if(!e){e=undefined}break;case"number":case"integer":if(!e){e=undefined}else{e=Number(e);if(!Kb(e)){e=undefined}}break}i(e)});this.handleWyswygChange=(e=>{let t;if(!e){t=undefined}else{t=e}i(t)})};i.tag2("viron-parameters-form",'<div class="Parameters_Form__head" if="{uiType !== \'checkbox\'}"> <div class="Parameters_Form__title">{title}</div> <div class="Parameters_Form__description" if="{!!description}">{description}</div> </div> <div class="Parameters_Form__error" if="{isMobile &amp;&amp; isFocus &amp;&amp; hasError &amp;&amp; !opts.ispreview}">{errors[0]}</div> <div class="Parameters_Form__body" ref="body" onclick="{getClickHandler(\'handleBodyTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBodyTap\')}"> <virtual if="{uiType === \'textinput\'}"> <viron-textinput val="{opts.val}" theme="{opts.theme}" placeholder="{placeholder}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" onsubmit="{handleTextInputSubmit}" onchange="{handleTextinputChange}" onfocus="{handleFormFocus}" onblur="{handleFormBlur}"></viron-textinput> </virtual> <virtual if="{uiType === \'textarea\'}"> <viron-textarea val="{opts.val}" theme="{opts.theme}" placeholder="{placeholder}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" onchange="{handleTextareaChange}" onfocus="{handleFormFocus}" onblur="{handleFormBlur}"></viron-textarea> </virtual> <virtual if="{uiType === \'numberinput\'}"> <viron-numberinput val="{opts.val}" theme="{opts.theme}" placeholder="{placeholder}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" onsubmit="{handleNumberInputSubmit}" onchange="{handleNumberinputChange}" onfocus="{handleFormFocus}" onblur="{handleFormBlur}"></viron-numberinput> </virtual> <virtual if="{uiType === \'checkbox\'}"> <viron-checkbox ischecked="{opts.val}" theme="{opts.theme}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" label="{title}" onchange="{handleCheckboxChange}"></viron-checkbox> </virtual> <virtual if="{uiType === \'select\'}"> <viron-select options="{getSelectOptions()}" theme="{opts.theme}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" onchange="{handleSelectChange}"></viron-select> </virtual> <virtual if="{uiType === \'uploader\'}"> <viron-uploader accept="{accept}" theme="{opts.theme}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" onchange="{handleUploaderChange}"></viron-uploader> </virtual> <virtual if="{uiType === \'base64\'}"> <viron-base64 val="{opts.val}" theme="{opts.theme}" ispreview="{opts.ispreview}" mimetype="{mimeType}" onchange="{handleBase64Change}"></viron-base64> </virtual> <virtual if="{uiType === \'html\'}"> <viron-html val="{opts.val}" theme="{opts.theme}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" onchange="{handleHtmlChange}" onfocus="{handleFormFocus}" onblur="{handleFormBlur}"></viron-html> </virtual> <virtual if="{uiType === \'pug\'}"> <viron-pug val="{opts.val}" theme="{opts.theme}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" onchange="{handlePugChange}" onfocus="{handleFormFocus}" onblur="{handleFormBlur}"></viron-pug> </virtual> <virtual if="{uiType === \'autocomplete\'}"> <viron-autocomplete val="{opts.val}" theme="{opts.theme}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" config="{autocompleteConfig}" onsubmit="{handleAutocompleteSubmit}" onchange="{handleAutocompleteChange}" onfocus="{handleFormFocus}" onblur="{handleFormBlur}"></viron-autocomplete> </virtual> <virtual if="{uiType === \'wyswyg\'}"> <viron-wyswyg val="{opts.val}" theme="{opts.theme}" explorer="{explorerConfig}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" onchange="{handleWyswygChange}"></viron-wyswyg> </virtual> <virtual if="{uiType === \'image\'}"> <viron-image val="{opts.val}" theme="{opts.theme}" ispreview="{opts.ispreview || isDisabled}"></viron-image> </virtual> <virtual if="{uiType === \'null\'}"> <div>NULL</div> </virtual> </div>',"","class=\"Parameters_Form {'Parameters_Form--preview': opts.ispreview}\"",function(e){this.external($b)});var Gb=function(){const e=this.propertiesObject=this.opts.propertiesobject;this.errors=[];this.hasError=false;const t=()=>{this.errors=Yb.errors(this.opts.val,to({required:this.opts.required},e));this.hasError=!!this.errors.length;if(!this.opts.onvalidate){return}this.opts.onvalidate(this._riot_id,!this.hasError)};t();this.on("update",()=>{t()});this.isFormMode=(e=>{return ql(["boolean","integer","number","null","string"],e.type)});this.isPropertiesMode=(e=>{return e.type==="object"});this.isItemsMode=(e=>{return e.type==="array"});this.getVal=(e=>{if(!_o(this.opts.val)){return undefined}return this.opts.val[e]});this.getFormObject=((t,n)=>{const r=Pl(n);r.name=t;r.required=ql(e.required,t);return r});this.getPropertiesObject=((e,t)=>{const n=Pl(t);return n});this.getSchemaObject=((e,t)=>{const n=Pl(t);return n});this.getRequired=(t=>{return ql(e.required,t)});this.getSpreadStyle=((e,t)=>{if(ql(["array","object"],t.type)){return"spreadFull"}const n=this.getFormObject(e,t);return Wd.getSpreadStyle(n)});this.handlePropertySubmit=((e,t)=>{if(!this.opts.onsubmit){return}let n=this.opts.val||{};n[e]=t;fo(n,(e,t)=>{if(Mf(e)){delete n[t]}});if(!Ml(n)){n=undefined}this.opts.onsubmit(this.opts.identifier,n)});this.handlePropertyChange=((e,t)=>{if(!this.opts.onchange){return}let n=this.opts.val||{};n[e]=t;fo(n,(e,t)=>{if(Mf(e)){delete n[t]}});if(!Ml(n)){n=undefined}this.opts.onchange(this.opts.identifier,n)});this.handlePropertyValidate=((e,t)=>{if(!this.opts.onvalidate){return}this.opts.onvalidate(e,t)})};i.tag2("viron-parameters-properties",'<div class="Parameters_Properties__head"> <div class="Parameters_Properties__label">{opts.label}{opts.required ? \' *\' : \'\'}</div> </div> <div class="Parameters_Properties__error" if="{hasError}">{errors[0]}</div> <div class="Parameters_Properties__body"> <div class="Parameters_Properties__item {\'Parameters_Properties__item--\' + parent.getSpreadStyle(key, property)}" each="{property, key in propertiesObject.properties}"> <virtual if="{isFormMode(property)}"> <viron-parameters-form no-reorder identifier="{key}" val="{parent.getVal(key)}" theme="{parent.opts.theme}" ispreview="{parent.opts.ispreview}" formobject="{parent.getFormObject(key, property)}" onsubmit="{parent.handlePropertySubmit}" onchange="{parent.handlePropertyChange}" onvalidate="{parent.handlePropertyValidate}"></viron-parameters-form> </virtual> <virtual if="{isPropertiesMode(property)}"> <viron-parameters-properties no-reorder label="{key}" identifier="{key}" val="{parent.getVal(key)}" theme="{parent.opts.theme}" ispreview="{parent.opts.ispreview}" required="{parent.getRequired(key)}" propertiesobject="{parent.getPropertiesObject(key, property)}" onsubmit="{parent.handlePropertySubmit}" onchange="{parent.handlePropertyChange}" onvalidate="{parent.handlePropertyValidate}"></viron-parameters-properties> </virtual> <virtual if="{isItemsMode(property)}"> <viron-parameters-items no-reorder label="{key}" identifier="{key}" val="{parent.getVal(key)}" theme="{parent.opts.theme}" ispreview="{parent.opts.ispreview}" required="{parent.getRequired(key)}" schemaobject="{parent.getSchemaObject(key, property)}" onsubmit="{parent.handlePropertySubmit}" onchange="{parent.handlePropertyChange}" onvalidate="{parent.handlePropertyValidate}"></viron-parameters-items> </virtual> </div> </div>',"",'class="Parameters_Properties"',function(e){this.external(Gb)});function Xb(e,t){if(t==null){return e}var n=e.length,r=-1,i=t.length;while(++r<i){e[n+r]=t[r]}return e}var Zb=Xb;var Jb=Object.keys||function(e){var t=[];fo(e,function(e,n){t.push(n)});return t};var Qb=Jb;var e_=function(){const e=this.schemaObject=this.opts.schemaobject;const t=this.opts.schemaobject.items;this.isFormMode=ql(["boolean","integer","number","null","string"],t.type);this.isPropertiesMode=t.type==="object";this.isItemsMode=t.type==="array";if(this.isFormMode){const e=Pl(t);this.formObject=e}if(this.isPropertiesMode){const e=Pl(t);this.propertiesObject=e}if(this.isItemsMode){const e=Pl(t.items);this.itemsObject=e}this.errors=[];this.hasError=false;const n=()=>{this.errors=Yb.errors(this.opts.val,to({required:this.opts.required},e));this.hasError=!!this.errors.length;if(!this.opts.onvalidate){return}this.opts.onvalidate(this._riot_id,!this.hasError)};this.itemsOpened=[];tf((this.opts.val||[]).length,e=>{this.itemsOpened[e]=false});n();this.on("update",()=>{n()});this.isItemOpened=(e=>{return this.itemsOpened[e]});this.getBriefItemTitle=((e,t)=>{if(this.isFormMode){switch(this.formObject.type){case"string":return e||"-";case"number":case"integer":return Mf(e)?"-":String(e);case"boolean":return Tf(e)?String(e):"-";case"file":return"file";case"null":return kf(e)?"null":"-";default:return"-"}}if(this.isPropertiesMode){let t;const n=this.propertiesObject.properties;const r=Qb(n);fu(r,n=>{if(!Mf(t)){return}if(Mf(e[n])){return}if(_o(e[n])){t="{Object}"}else if(lu(e[n])){t="[Array]"}else{t=String(e[n])}});if(!t){t="-"}return t}if(this.isItemsMode){return`[${t}]`}return"-"});this.getBriefItemDescription=(e=>{if(!this.isPropertiesMode){return"-"}let t="";const n=this.propertiesObject.properties;const r=Qb(n);fu(r,r=>{const i=n[r].description||r;let a="-";if(!Mf(e[r])){if(_o(e[r])){a="{Object}"}else if(lu(e[r])){a="[Array]"}else{a=String(e[r])}}t=`${t} ${i}:${a}`});return t});this.handleAddButtonTap=(()=>{if(this.opts.ispreview){return}if(!this.opts.onchange){return}let e=this.opts.val||[];let t=null;if(this.isFormMode){t=this.formObject.default}else if(this.isPropertiesMode){t=Wd.generateDefaultProperties(this.propertiesObject)}else if(this.isItemsMode){t=[]}e=Zb([t],e);this.itemsOpened=Zb([false],this.itemsOpened);this.update();this.opts.onchange(this.opts.identifier,e)});this.handleOpenAllButtonTap=(()=>{this.itemsOpened=Gu(this.itemsOpened,()=>{return true});this.update()});this.handleRemoveButtonTap=(e=>{if(this.opts.ispreview){return}if(!this.opts.onchange){return}const t=e.item.idx;let n=this.opts.val;n.splice(t,1);if(!n.length){n=undefined}this.itemsOpened.splice(t,1);this.update();this.opts.onchange(this.opts.identifier,n)});this.handleCloseButtonTap=(e=>{const t=e.item.idx;this.itemsOpened[t]=false;this.update()});this.handleItemBriefTap=(e=>{const t=e.item.idx;this.itemsOpened[t]=true;this.update()});this.handleItemSubmit=((e,t)=>{if(!this.opts.onsubmit){return}const n=this.opts.val;n[e]=t;this.opts.onsubmit(this.opts.identifier,n)});this.handleItemChange=((e,t)=>{if(!this.opts.onchange){return}const n=this.opts.val;n[e]=t;this.opts.onchange(this.opts.identifier,n)});this.handleItemValidate=((e,t)=>{if(!this.opts.onvalidate){return}this.opts.onvalidate(e,t)})};i.tag2("viron-parameters-items",'<div class="Parameters_Items__head"> <div class="Parameters_Items__addButton" if="{!opts.ispreview}" onclick="{getClickHandler(\'handleAddButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleAddButtonTap\')}"> <viron-icon-plus></viron-icon-plus> </div> <div class="Parameters_Items__headContent"> <div class="Parameters_Items__label">{opts.label}{opts.required ? \' *\' : \'\'}</div> <div class="Parameters_Items__error" if="{hasError}">{errors[0]}</div> </div> <div class="Parameters_Items__openButton" if="{!!opts.val &amp;&amp; !!opts.val.length}" onclick="{getClickHandler(\'handleOpenAllButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleOpenAllButtonTap\')}">È†ÖÁõÆ„Çí„Åô„Åπ„Å¶Èñã„Åè</div> </div> <div class="Parameters_Items__body" if="{!!opts.val &amp;&amp; !!opts.val.length}"> <div class="Parameters_Items__item {\'Parameters_Items__item--opened\': parent.isItemOpened(idx)}" each="{val, idx in opts.val}"> <div class="Parameters_Items__itemDetail"> <div class="Parameters_Items__itemHead"> <div class="Parameters_Items__closeButton" onclick="{getClickHandler(\'handleCloseButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleCloseButtonTap\')}"> <viron-icon-arrow-up></viron-icon-arrow-up> </div> <div class="Parameters_Items__removeButton" if="{!parent.opts.ispreview}" onclick="{getClickHandler(\'handleRemoveButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleRemoveButtonTap\')}">„Åì„ÅÆÈ†ÖÁõÆ„ÇíÂâäÈô§</div> </div> <div class="Parameters_Items__itemBody"> <virtual if="{parent.isFormMode}"> <viron-parameters-form no-reorder identifier="{idx}" val="{val}" theme="{parent.opts.theme}" ispreview="{parent.opts.ispreview}" formobject="{parent.formObject}" onsubmit="{parent.handleItemSubmit}" onchange="{parent.handleItemChange}" onvalidate="{parent.handleItemValidate}"></viron-parameters-form> </virtual> <virtual if="{parent.isPropertiesMode}"> <viron-parameters-properties no-reorder label="{parent.opts.label}[{idx}]" identifier="{idx}" val="{val}" theme="{parent.opts.theme}" ispreview="{parent.opts.ispreview}" propertiesobject="{parent.propertiesObject}" onsubmit="{parent.handleItemSubmit}" onchange="{parent.handleItemChange}" onvalidate="{parent.handleItemValidate}"></viron-parameters-properties> </virtual> <virtual if="{parent.isItemsMode}"> <viron-parameters-items no-reorder label="{parent.opts.label}[{idx}]" identifier="{idx}" val="{val}" theme="{parent.opts.theme}" ispreview="{parent.opts.ispreview}" schemaobject="{parent.schemaObject.items}" onsubmit="{parent.handleItemSubmit}" onchange="{parent.handleItemChange}" onvalidate="{parent.handleItemValidate}"></viron-parameters-items> </virtual> </div> </div> <div class="Parameters_Items__itemBrief" onclick="{getClickHandler(\'handleItemBriefTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleItemBriefTap\')}"> <div class="Parameters_Items__itemBriefTitle">{parent.getBriefItemTitle(val, idx)}</div> <div class="Parameters_Items__itemBriefDescription" if="{parent.isPropertiesMode}">{parent.getBriefItemDescription(val)}</div> <div class="Parameters_Items__itemBriefOpenButton"> <viron-icon-arrow-down></viron-icon-arrow-down> </div> </div> </div> </div>',"","class=\"Parameters_Items {'Parameters_Items--preview': opts.ispreview}\"",function(e){this.external(e_)});var t_=function(){const e=this.parameterObject=this.opts.parameterobject;this.isFormMode=false;this.formObject=null;this.isFormDisabled=false;this.isPropertiesMode=false;this.propertiesObject=null;this.propertiesLabel=null;this.isItemsMode=false;this.schemaObject=null;this.itemsLabel=null;this.spreadStyle="spreadSmall";if(ql(["query","header","path","formData"],e.in)){if(ql(["string","number","integer","boolean","file"],e.type)){this.isFormMode=true;const t=Pl(e);delete t.in;this.formObject=t;this.spreadStyle=Wd.getSpreadStyle(t);if(e.in==="path"&&e.name===this.opts.primary){this.isFormDisabled=true}}else{this.isItemsMode=true;const t=Pl(e);this.schemaObject=t;this.itemsLabel=e.description||e.name;this.spreadStyle="spreadFull"}}else{const t=e.schema;if(ql(["boolean","integer","number","null","string"],t.type)){this.isFormMode=true;const t=Pl(e.schema);this.formObject=t;this.spreadStyle=Wd.getSpreadStyle(t)}else if(t.type==="object"){this.isPropertiesMode=true;const n=Pl(t);this.propertiesObject=n;this.propertiesLabel=e.description||e.name;this.spreadStyle="spreadFull"}else{this.isItemsMode=true;const n=Pl(t);this.schemaObject=n;this.itemsLabel=e.description||e.name;this.spreadStyle="spreadFull"}}this.handleValSubmit=((e,t)=>{if(!this.opts.onsubmit){return}this.opts.onsubmit(e,t)});this.handleValChange=((e,t)=>{if(!this.opts.onchange){return}this.opts.onchange(e,t)});this.handleValValidate=((e,t)=>{if(!this.opts.onvalidate){return}this.opts.onvalidate(e,t)})};i.tag2("viron-parameters-parameter",'<virtual if="{isFormMode}"> <viron-parameters-form formobject="{formObject}" identifier="{parameterObject.name}" val="{opts.val}" theme="{opts.theme}" ispreview="{opts.ispreview}" isdisabled="{isFormDisabled}" onsubmit="{handleValSubmit}" onchange="{handleValChange}" onvalidate="{handleValValidate}"></viron-parameters-form> </virtual> <virtual if="{isPropertiesMode}"> <viron-parameters-properties label="{propertiesLabel}" identifier="{parameterObject.name}" val="{opts.val}" theme="{opts.theme}" ispreview="{opts.ispreview}" required="{parameterObject.required}" propertiesobject="{propertiesObject}" onsubmit="{handleValSubmit}" onchange="{handleValChange}" onvalidate="{handleValValidate}"></viron-parameters-properties> </virtual> <virtual if="{isItemsMode}"> <viron-parameters-items label="{itemsLabel}" identifier="{parameterObject.name}" val="{opts.val}" theme="{opts.theme}" ispreview="{opts.ispreview}" required="{parameterObject.required}" schemaobject="{schemaObject}" onsubmit="{handleValSubmit}" onchange="{handleValChange}" onvalidate="{handleValValidate}"></viron-parameters-items> </virtual>',"","class=\"Parameters_Parameter {'Parameters_Parameter--' + spreadStyle}\"",function(e){this.external(t_)});function n_(e,t){return Pu(e,function(e){return e===t})}var r_=n_;var i_=function(){this.isNarrow=false;const e=()=>{const e=this.root;const t=e.getBoundingClientRect();const n=t.width;if(n>450){this.isNarrow=false}else{this.isNarrow=true}this.update()};const t=sf(()=>{e()},1e3);this.on("mount",()=>{window.addEventListener("resize",t);e()}).on("unmount",()=>{window.removeEventListener("resize",t)});this.handleValSubmit=((e,t)=>{if(!this.opts.onsubmit){return}const n=this.opts.val;n[e]=t;fo(n,(e,t)=>{if(Mf(e)){delete n[t]}});this.opts.onsubmit(n)});this.handleValChange=((e,t)=>{if(!this.opts.onchange){return}const n=this.opts.val;n[e]=t;fo(n,(e,t)=>{if(Mf(e)){delete n[t]}});this.opts.onchange(n)});const n={};this.handleValValidate=((e,t)=>{n[e]=t;if(!this.opts.onvalidate){return}if(r_(n,false)){this.opts.onvalidate(false)}else{this.opts.onvalidate(true)}})};i.tag2("viron-parameters",'<viron-parameters-parameter each="{parameterObject in opts.parameterobjects}" val="{parent.opts.val[parameterObject.name]}" theme="{parent.opts.theme}" ispreview="{parent.opts.ispreview}" parameterobject="{parameterObject}" primary="{parent.opts.primary}" onsubmit="{parent.handleValSubmit}" onchange="{parent.handleValChange}" onvalidate="{parent.handleValValidate}"></viron-parameters-parameter>',"","class=\"Parameters {'Parameters--narrow': isNarrow}\"",function(e){this.external(i_)});var a_=function(){const e=this.riotx.get();const t=this.opts.operationObject;this.isValid=true;this.layoutType=e.getter("layout.type");this.val=Wd.generateInitialVal(t.parameters,this.opts.initialVal);this.title=t.summary||t.operationId;this.submitLabel=null;this.submitModifier=null;let n=null;const r=e.getter("oas.pathItemObjectMethodNameByOperationId",t.operationId);const i=t["x-submit-label"];switch(r){case"get":this.submitLabel=i||"ÂèñÂæó„Åô„Çã";this.successMessage="ÂèñÂæó„Åó„Åæ„Åó„Åü„ÄÇ";break;case"post":this.submitLabel=i||"Êñ∞Ë¶è‰ΩúÊàê„Åô„Çã";n="Êñ∞Ë¶è‰ΩúÊàê„Åó„Åæ„Åó„Åü„ÄÇ";break;case"put":this.submitLabel=i||"‰øùÂ≠ò„Åô„Çã";n="‰øùÂ≠ò„Åó„Åæ„Åó„Åü„ÄÇ";break;case"delete":this.submitLabel=i||"ÂâäÈô§„Åô„Çã";this.submitModifier="emphasised";n="ÂâäÈô§„Åó„Åæ„Åó„Åü„ÄÇ";break;default:this.submitLabel="ÂÆüË°å„Åô„Çã";n="ÂÆå‰∫Ü„Åó„Åæ„Åó„Åü„ÄÇ";break}const a=()=>{Promise.resolve().then(()=>e.action("components.operate",t,this.val)).then(()=>{this.close();this.opts.onSuccess();return e.action("toasts.add",{message:n})}).catch(t=>{if(t.status===401){return e.action("modals.add","viron-error",{title:"Ë™çË®ºÂàá„Çå"}).then(()=>{this.getRouter().navigateTo("/")})}return e.action("modals.add","viron-error",{error:t})})};const o=()=>{if(!this.isValid){return}Promise.resolve().then(()=>e.action("modals.add","viron-dialog",{title:this.title,message:"Êú¨ÂΩì„Å´ÂÆüË°å„Åó„Åæ„Åô„ÅãÔºü",labelPositive:this.submitLabel,onPositiveSelect:()=>{a()}}))};const s=()=>{const e=this.refs.submit;if(!e){return}const t="ComponentsPage_Operation__submit--disabled";if(this.isValid){e.classList.remove(t)}else{e.classList.add(t)}};this.listen("layout",()=>{this.layoutType=e.getter("layout.type");this.update()});this.on("mount",()=>{s()});this.handleCancelTap=(()=>{this.close()});this.handleParametersChange=(e=>{this.val=e;this.update()});this.handleParametersValidate=(e=>{this.isValid=e;s()});this.handleFormSubmit=(()=>{o()});this.handleSubmitTap=(()=>{o()})};i.tag2("viron-components-page-operation",'<div class="ComponentsPage_Operation__head"> <div class="ComponentsPage_Operation__title">{title}</div> <div class="ComponentsPage_Operation__cancel" onclick="{getClickHandler(\'handleCancelTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleCancelTap\')}">„Ç≠„É£„É≥„Çª„É´</div> </div> <div class="ComponentsPage_Operation__body"> <viron-parameters val="{val}" parameterobjects="{opts.operationObject.parameters}" primary="{opts.primary}" onsubmit="{handleFormSubmit}" onchange="{handleParametersChange}" onvalidate="{handleParametersValidate}"></viron-parameters> </div> <div class="ComponentsPage_Operation__tail"> <div class="ComponentsPage_Operation__submit ComponentsPage_Operation__submit--{submitModifier}" ref="submit" onclick="{getClickHandler(\'handleSubmitTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleSubmitTap\')}">{submitLabel}</div> </div>',"",'class="ComponentsPage_Operation ComponentsPage_Operation--{layoutType}"',function(e){this.external(a_)});var o_=function(){this.list=this.opts.list||[];this.size=this.opts.size||this.list.length;if(this.size>this.list.length){this.size=this.list.length}const e=50;this.bodyHeight=e*this.size;this.bodyTop=0;this.hasControlButtons=this.list.length>this.size;this.currentIdx=0;this.maxIdx=this.list.length-this.size;this.handlePrevItemTap=(()=>{this.currentIdx=this.currentIdx-1;if(this.currentIdx<0){this.currentIdx=0}this.bodyTop=this.currentIdx*e;this.update()});this.handleNextItemTap=(()=>{this.currentIdx=this.currentIdx+1;if(this.currentIdx>this.maxIdx){this.currentIdx=this.maxIdx}this.bodyTop=this.currentIdx*e;this.update()});this.handleItemTap=(e=>{if(!this.opts.onselect){return}const t=e.item.item.id;this.opts.onselect(t)})};i.tag2("viron-list",'<div class="List__item" if="{hasControlButtons}" onclick="{getClickHandler(\'handlePrevItemTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePrevItemTap\')}"> <viron-icon-up class="List__icon"></viron-icon-up> <div class="List__label">Êàª„Çã</div> </div> <div class="List__body" riot-style="height:{bodyHeight}px;"> <div class="List__itemsWrapper" riot-style="top:-{bodyTop}px;"> <div class="List__item" each="{item in list}" onclick="{getClickHandler(\'handleItemTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleItemTap\')}"> <div class="List__label">{item.label}</div> </div> </div> </div> <div class="List__item" if="{hasControlButtons}" onclick="{getClickHandler(\'handleNextItemTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleNextItemTap\')}"> <viron-icon-down class="List__icon"></viron-icon-down> <div class="List__label">„Åï„Çâ„Å´Ë°®Á§∫</div> </div>',"",'class="List"',function(e){this.external(o_)});var s_=function(){this.list=Gu(this.opts.operations,e=>{return{id:e.operationId,label:e.summary||e.operationId}});this.handleItemSelect=(e=>{this.close();const t=qu(this.opts.operations,t=>{return t.operationId===e});this.opts.onSelect(t)})};i.tag2("viron-components-page-table-operations",'<viron-list list="{list}" size="{5}" onselect="{handleItemSelect}"></viron-list>',"",'class="ComponentsPage_Card_Table_Operations"',function(e){this.external(s_)});var u_=function(){const e=this.riotx.get();const t=this.opts.dataList;const n=this.opts.selectedIdx;this.layoutType=e.getter("layout.type");this.parameterObjects=this.opts.parameterObjects;this.operations=this.opts.operations||[];this.val=null;this.selectedIdx=null;this.isPrevButtonDisabled=false;this.isNextButtonDisabled=false;const r=e=>{this.val=Wd.generateInitialVal(this.parameterObjects,t[e]);this.selectedIdx=e;this.isPrevButtonDisabled=e===0;this.isNextButtonDisabled=e===t.length-1};r(n);this.listen("layout",()=>{this.layoutType=e.getter("layout.type");this.update()});this.isOperationsHidden=(()=>{const t=e.getter("layout.isMobile");if(t){return true}if(this.operations.length>=5){return true}return false});this.handleOperationTap=(e=>{const t=e.item.operation;Promise.resolve().then(()=>{this.close()}).then(()=>{setTimeout(()=>{this.opts.onOperationSelect(t,this.selectedIdx)},500)})});this.handleOperationsButtonTap=(t=>{t.stopPropagation();const n=t.currentTarget.getBoundingClientRect();e.action("popovers.add","viron-components-page-table-operations",{operations:this.operations,onSelect:e=>{this.close();setTimeout(()=>{this.opts.onOperationSelect(e,this.selectedIdx)},500)}},{x:n.left+n.width/2,y:n.bottom,width:240,direction:"TR"})});this.handleBackButtonTap=(()=>{this.close()});this.handlePrevButtonTap=(()=>{if(this.isPrevButtonDisabled){return}r(this.selectedIdx-1);this.update()});this.handleNextButtonTap=(()=>{if(this.isNextButtonDisabled){return}r(this.selectedIdx+1);this.update()})};i.tag2("viron-components-page-preview",'<div class="ComponentsPage_Preview__head"> <div class="ComponentsPage_Preview__title">„Éó„É¨„Éì„É•„Éº</div> <div class="ComponentsPage_Preview__operations" if="{!!this.operations.length &amp;&amp; !isOperationsHidden()}"> <div class="ComponentsPage_Preview__operation ComponentsPage_Preview__operation--{operation.method}" each="{operation in this.operations}" onclick="{getClickHandler(\'handleOperationTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleOperationTap\')}">{operation.summary || operation.operationId}</div> </div> <div class="ComponentsPage_Preview__operationsButton" if="{!!this.operations.length &amp;&amp; isOperationsHidden()}" onclick="{getClickHandler(\'handleOperationsButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleOperationsButtonTap\')}"> <viron-icon-setting></viron-icon-setting> </div> <div class="ComponentsPage_Preview__backButton" onclick="{getClickHandler(\'handleBackButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBackButtonTap\')}"> <viron-icon-arrow-left></viron-icon-arrow-left> </div> </div> <div class="ComponentsPage_Preview__body"> <viron-parameters val="{val}" ispreview="{true}" parameterobjects="{parameterObjects}"></viron-parameters> </div> <div class="ComponentsPage_Preview__tail"> <div class="ComponentsPage_Preview__prevButton {\'ComponentsPage_Preview__prevButton--disabled\': isPrevButtonDisabled}" onclick="{getClickHandler(\'handlePrevButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePrevButtonTap\')}"> <viron-icon-arrow-up></viron-icon-arrow-up> </div> <div class="ComponentsPage_Preview__nextButton {\'ComponentsPage_Preview__prevButton--disabled\': isNextButtonDisabled}" onclick="{getClickHandler(\'handleNextButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleNextButtonTap\')}"> <viron-icon-arrow-down></viron-icon-arrow-down> </div> </div>',"",'class="ComponentsPage_Preview ComponentsPage_Preview--{layoutType}"',function(e){this.external(u_)});var l_=function(){const e=this.riotx.get();this.layoutType=e.getter("layout.type");this.val=Wd.generateInitialVal(this.opts.parameterObjects,this.opts.initialVal);this.listen("layout",()=>{this.layoutType=e.getter("layout.type");this.update()});this.handleCloseButtonTap=(()=>{this.close()});this.handleParametersChange=(e=>{this.val=e;this.update()});this.handleSearchButtonTap=(()=>{if(!this.opts.onSearch){this.close();return}this.opts.onSearch(this.val);this.close()})};i.tag2("viron-components-page-search",'<div class="ComponentsPage_Search__head"> <div class="ComponentsPage_Search__closeButton" onclick="{getClickHandler(\'handleCloseButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleCloseButtonTap\')}"> <viron-icon-close></viron-icon-close> </div> <div class="ComponentsPage_Search__title">Ê§úÁ¥¢</div> <div class="ComponentsPage_Search__description">„ÇØ„Ç®„É™„Éë„É©„É°„Éº„Çø„ÇíÊåáÂÆö„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ</div> </div> <div class="ComponentsPage_Search__body"> <viron-parameters val="{val}" theme="ghost" parameterobjects="{opts.parameterObjects}" onchange="{handleParametersChange}"></viron-parameters> </div> <div class="ComponentsPage_Search__tail"> <viron-button label="Ê§úÁ¥¢„Åô„Çã" onselect="{handleSearchButtonTap}"></viron-button> </div>',"",'class="ComponentsPage_Search ComponentsPage_Search--{layoutType}"',function(e){this.external(l_)});var c_=function(){const e=this.riotx.get();const t=t=>{if(!t&&this.hasPagination){t={};const e=this.pagination.size;const n=this.pagination.current;t.limit=e;t.offset=(n-1)*e}const n=to({},this.searchQueries,t);return Promise.resolve().then(()=>{this.isLoading=true;this.update()}).then(()=>Promise.all([new Promise(e=>setTimeout(e,300)),e.action("components.get",this.opts.id,this.opts.def,n)])).then(()=>{this.isLoading=false;this.update()}).catch(e=>{this.isLoading=false;if(e.status===401){this.error="Ë™çË®º„Ç®„É©„Éº„ÄÇ"}else{const e=this.opts.def.api;this.error=`[${e.method.toUpperCase()} ${e.path}]ÈÄö‰ø°„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ`}this.update()})};const n=e=>{if(!lu(e)){return"„É¨„Çπ„Éù„É≥„Çπ„Éá„Éº„Çø„ÅåÈÖçÂàó„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ"}if(!e.length){return"0‰ª∂„Åß„Åô„ÄÇ"}if(!_o(e[0])){return"Ë°å„Éá„Éº„Çø„Åå„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ"}return null};const r=(e,t)=>{const n={};fu(e.parameters||[],e=>{const r=e.name;const i=e.in;if(i==="body"){n[r]={};fo(e.schema.properties||{},(e,i)=>{if(!Mf(t[i])&&!kf(t[i])){n[r][i]=t[i]}})}else{if(!Mf(t[r])&&!kf(t[r])){n[r]=t[r]}}});i(e,Pl(n))};const i=(n,r)=>{e.action("drawers.add","viron-components-page-operation",{operationObject:n,initialVal:r,primary:this.primary,onSuccess:()=>{t()}})};const a=()=>{const e=this.rowOperations;if(!e||e.length!==1){return"setting"}switch(e[0].method){case"get":return"file";case"put":return"edit";case"post":return"plus";case"delete":return"remove";default:return"setting"}};this.data=null;this.columns=[];this.visibleColumnKeys=null;this.tableOperations=[];this.rowOperations=[];this.rowOperationsIcon=a();this.postOperation=null;this.searchParameters=[];this.primary=null;this.isLoading=true;this.error=null;this.hasPagination=false;this.pagination=null;this.paginationSize=e.getter("layout.isDesktop")?5:3;this.searchQueries={};fo(this.opts.crosssearchqueries,(e,t)=>{if(!Mf(e)){this.searchQueries[t]=e}});this.hasSearchQueries=!!Ml(this.searchQueries);this.autoRefreshSec=null;let o=null;const s=()=>{if(!this.autoRefreshSec){return}if(o){return}o=window.setInterval(()=>{t()},this.autoRefreshSec*1e3)};const u=()=>{window.clearInterval(o);o=null};this.listen("layout",()=>{this.paginationSize=e.getter("layout.isDesktop")?5:3;this.update()});this.listen(this.opts.id,()=>{this.data=e.getter("components.response",this.opts.id);this.columns=e.getter("components.columns",this.opts.id);this.tableOperations=e.getter("components.operations",this.opts.id,"table");this.rowOperations=e.getter("components.operations",this.opts.id,"row");this.rowOperationsIcon=a();this.postOperation=e.getter("components.postOperation",this.opts.id,"table");this.searchParameters=e.getter("components.searchParameters",this.opts.id);this.primary=e.getter("components.primary",this.opts.id);this.error=n(this.data);this.hasPagination=e.getter("components.hasPagination",this.opts.id);this.pagination=e.getter("components.pagination",this.opts.id);this.autoRefreshSec=e.getter("components.autoRefreshSec",this.opts.id);s();this.update()});this.refreshId=e.getter("util.components_refresh");this.listen("util",()=>{const n=e.getter("util.components_refresh");if(this.refreshId!==n){this.refreshId=n;t()}});this.getFilteredColumns=(()=>{if(!this.visibleColumnKeys){return this.columns}return rl(this.columns,e=>{return ql(this.visibleColumnKeys,e.key)})});let l=to(this.opts.crosssearchqueries);this.on("mount",()=>{t()}).on("updated",()=>{const e=this.opts.crosssearchqueries;let n=false;fo(e,(e,t)=>{if(e!==l[t]){n=true}});if(Ml(e)!==Ml(l)){n=true}if(n){fo(e,(e,t)=>{if(!Mf(e)){this.searchQueries[t]=e}else{delete this.searchQueries[t]}});this.hasSearchQueries=!!Ml(this.searchQueries);if(!this.hasPagination){t()}else{const e={};const n=this.pagination.size;const r=1;e.limit=n;e.offset=(r-1)*n;t(e)}}l=to({},this.opts.crosssearchqueries)}).on("unmount",()=>{u();e.action("components.remove",this.opts.id)});this.handlePostButtonTap=(()=>{i(this.postOperation)});this.handleSearchButtonTap=(()=>{e.action("drawers.add","viron-components-page-search",{parameterObjects:this.searchParameters,initialVal:this.searchQueries,onSearch:e=>{this.searchQueries=e;this.hasSearchQueries=!!Ml(e);if(!this.hasPagination){t()}else{const e={};const n=this.pagination.size;const r=1;e.limit=n;e.offset=(r-1)*n;t(e)}}},{isNarrow:true})});this.handleFilterButtonTap=(()=>{e.action("drawers.add","viron-components-page-filter",{columns:this.columns,selectedColumnKeys:this.visibleColumnKeys,onChange:e=>{this.visibleColumnKeys=e;t()}},{isNarrow:true})});this.handleSettingButtonTap=(()=>{const t=this.refs.settingIcon.root.getBoundingClientRect();e.action("popovers.add","viron-components-page-table-operations",{operations:this.tableOperations,onSelect:e=>{i(e)}},{x:t.left+t.width/2,y:t.bottom,width:240,direction:"TR"})});this.handleRowTap=(t=>{const n="preview";const i={};fu(this.columns,e=>{const t=Pl(e);const n=t.key;delete t.key;i[n]=t});const a=[{in:"body",name:n,schema:{type:"object",properties:i}}];const o=[];fu(this.data,e=>{const t={};t[n]=Pl(e);o.push(t)});e.action("drawers.add","viron-components-page-preview",{parameterObjects:a,dataList:o,selectedIdx:t.item.idx,operations:this.rowOperations,onOperationSelect:(e,t)=>{r(e,this.data[t])}})});this.handleRowSettingButtonTap=(t=>{t.stopPropagation();const n=t.item.row;if(this.rowOperations.length===1){r(this.rowOperations[0],n);return}const i=t.currentTarget;const a=i.getBoundingClientRect();Promise.resolve().then(()=>{this.closeAllFloats()}).then(()=>{e.action("popovers.add","viron-components-page-table-operations",{operations:this.rowOperations,onSelect:e=>{r(e,n)}},{x:a.left+a.width/2,y:a.bottom,width:240,direction:"TR",watchElm:i})})});this.handlePaginationChange=(e=>{const n=this.pagination.size;t({limit:n,offset:(e-1)*n})})};i.tag2("viron-components-page-table",'<div class="ComponentsPage_Card_Table__head"> <div class="ComponentsPage_Card_Table__headAside"> <div class="ComponentsPage_Card_Table__postOperation" if="{postOperation}" onclick="{getClickHandler(\'handlePostButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePostButtonTap\')}"> <viron-icon-plus-thin></viron-icon-plus-thin> </div> <div class="ComponentsPage_Card_Table__title">{opts.def.name}</div> </div> <div class="ComponentsPage_Card_Table__headAside"> <div class="ComponentsPage_Card_Table__control"> <viron-icon-search class="ComponentsPage_Card_Table__searchIcon {\'ComponentsPage_Card_Table__searchIcon--active\': hasSearchQueries}" if="{searchParameters.length}" onclick="{getClickHandler(\'handleSearchButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleSearchButtonTap\')}"></viron-icon-search> <viron-icon-filter class="ComponentsPage_Card_Table__filterIcon {\'ComponentsPage_Card_Table__filterIcon--active\': !!visibleColumnKeys}" onclick="{getClickHandler(\'handleFilterButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleFilterButtonTap\')}"></viron-icon-filter> <viron-icon-setting if="{tableOperations.length}" ref="settingIcon" onclick="{getClickHandler(\'handleSettingButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleSettingButtonTap\')}"></viron-icon-setting> </div> </div> </div> <div class="ComponentsPage_Card_Table__body"> <virtual if="{isLoading}"> <div class="ComponentsPage_Card_Table__progressWrapper"> <div class="ComponentsPage_Card_Table__progress"> <viron-icon-reload></viron-icon-reload> </div> </div> </virtual> <virtual if="{!isLoading}"> <virtual if="{!!error}"> <div class="ComponentsPage_Card_Table__errorWrapper"> <div class="ComponentsPage_Card_Table__error">{error}</div> </div> </virtual> <virtual if="{!error}"> <table class="ComponentsPage_Card_Table__table"> <thead class="ComponentsPage_Card_Table__thead"> <tr class="ComponentsPage_Card_Table__theadRow"> <th class="ComponentsPage_Card_Table__th" each="{column in getFilteredColumns()}">{column.description || column.key}</th> <th class="ComponentsPage_Card_Table__th ComponentsPage_Card_Table__th--sticky" if="{rowOperations.length}">Êìç‰Ωú</th> </tr> </thead> <tbody class="ComponentsPage_Card_Table__tbody"> <tr class="ComponentsPage_Card_Table__tbodyRow" each="{row, idx in data}" onclick="{getClickHandler(\'handleRowTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleRowTap\')}"> <td each="{column in parent.getFilteredColumns()}" data-is="viron-components-page-table-cell" data="{row[column.key]}" column="{column}"></td> <td class="ComponentsPage_Card_Table__td ComponentsPage_Card_Table__td--sticky" if="{rowOperations.length}"><span data-is="viron-icon-{rowOperationsIcon}" ref="rowSettingIcon" onclick="{getClickHandler(\'handleRowSettingButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleRowSettingButtonTap\')}"></span></td> </tr> </tbody> </table> </virtual> </virtual> </div> <div class="ComponentsPage_Card_Table__tail" if="{hasPagination}"> <viron-pagination max="{pagination.max}" size="{paginationSize}" current="{pagination.current}" onchange="{handlePaginationChange}"></viron-pagination> </div> <div class="ComponentsPage_Card_Table__blocker" if="{isLoading}"></div>',"",'class="ComponentsPage_Card_Table"',function(e){this.external(c_)});var f_=function(){};i.tag2("viron-components-page-unsupported",'<div class="ComponentsPage_Card_Unsupported__head"> <div class="ComponentsPage_Card_Unsupported__title">{opts.def.name}</div> </div> <div class="ComponentsPage_Card_Unsupported__body"> <div class="ComponentsPage_Card_Unsupported__error">„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„Çø„Ç§„Éó„Äå{opts.def.style}„Äç„ÅØÁèæÂú®„Çµ„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ</div> </div>',"",'class="ComponentsPage_Card_Unsupported"',function(e){this.external(f_)});var d_=function(){this.componentId=Zc(this._riot_id);this.cardType=null;this.columnSize="columnSpreadSmall";this.rowSize="rowSpreadSmall";switch(this.opts.def.style){case"chart":this.cardType="components-page-unsupported";this.columnSize="columnSpreadSmall";this.rowSize="rowSpreadMedium";break;case"graph-scatterplot":case"graph-line":case"graph-bar":case"graph-horizontal-bar":case"graph-stacked-bar":case"graph-horizontal-stacked-bar":case"graph-stacked-area":this.cardType="components-page-chart";this.columnSize="columnSpreadSmall";this.rowSize="rowSpreadMedium";break;case"table":this.cardType="components-page-table";this.columnSize="columnSpreadFull";this.rowSize="rowSpreadLarge";break;case"number":this.cardType="components-page-number";this.columnSize="columnSpreadSmall";this.rowSize="rowSpreadSmall";break;case"explorer":this.cardType="explorer";this.columnSize="columnSpreadFull";this.rowSize="rowSpreadLarge";break;default:break}};i.tag2("viron-components-page-card",'<div data-is="viron-{cardType}" id="{componentId}" def="{opts.def}" crosssearchqueries="{opts.crosssearchqueries}"></div>',"",'class="ComponentsPage_Card ComponentsPage_Card--{columnSize} ComponentsPage_Card--{rowSize}"',function(e){this.external(d_)});var h_=function(){const e=this.riotx.get();this.name=e.getter("page.name");this.components=e.getter("page.components");this.layoutType=e.getter("layout.type");this.isDesktop=e.getter("layout.isDesktop");this.parameterObjectsForCrossSearch=e.getter("components.parameterObjectsForCrossSearch");this.isCrossSearchEnabled=!!this.parameterObjectsForCrossSearch.length&&this.components.length>=2;this.crossSearchQueries={};this.hasCrossSearchQueries=false;this.listen("page",()=>{this.name=e.getter("page.name");this.components=e.getter("page.components");this.crossSearchQueries={};this.hasCrossSearchQueries=false;this.update()});this.listen("layout",()=>{this.layoutType=e.getter("layout.type");this.isDesktop=e.getter("layout.isDesktop");this.update()});this.listen("components",()=>{this.parameterObjectsForCrossSearch=e.getter("components.parameterObjectsForCrossSearch");this.isCrossSearchEnabled=!!this.parameterObjectsForCrossSearch.length&&this.components.length>=2;this.update()});this.getCrossSearchQueriesByDef=(e=>{const t={};fu(e.query,e=>{t[e.key]=this.crossSearchQueries[e.key]});return t});this.handleRefreshTap=(()=>{e.action("util.refreshAllComponents")});this.handleCrossSearchTap=(()=>{e.action("drawers.add","viron-components-page-search",{parameterObjects:this.parameterObjectsForCrossSearch,initialVal:this.crossSearchQueries,onSearch:e=>{this.crossSearchQueries=e;this.hasCrossSearchQueries=!!Ml(e);this.update()}},{isNarrow:true})})};i.tag2("viron-components-page",'<div class="ComponentsPage__head"> <div class="ComponentsPage__name">{name}</div> <div class="ComponentsPage__control" if="{isDesktop}"> <div class="ComponentsPage__refresh" onclick="{getClickHandler(\'handleRefreshTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleRefreshTap\')}"> <viron-icon-reload></viron-icon-reload> </div> <div class="ComponentsPage__crossSearch {\'ComponentsPage__crossSearch--active\': hasCrossSearchQueries}" if="{isCrossSearchEnabled}" onclick="{getClickHandler(\'handleCrossSearchTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleCrossSearchTap\')}"> <viron-icon-search></viron-icon-search> </div> </div> </div> <div class="ComponentsPage__container"> <viron-components-page-card each="{component in components}" def="{component}" crosssearchqueries="{parent.getCrossSearchQueriesByDef(component)}"></viron-components-page-card> </div>',"",'class="ComponentsPage ComponentsPage--{layoutType}"',function(e){this.external(h_)});var v_=n(function(e){(function(e){"use strict";e.exports.is_uri=n;e.exports.is_http_uri=r;e.exports.is_https_uri=i;e.exports.is_web_uri=a;e.exports.isUri=n;e.exports.isHttpUri=r;e.exports.isHttpsUri=i;e.exports.isWebUri=a;var t=function(e){var t=e.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return t};function n(e){if(!e){return}if(/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(e)){return}if(/%[^0-9a-f]/i.test(e)){return}if(/%[0-9a-f](:?[^0-9a-f]|$)/i.test(e)){return}var n=[];var r="";var i="";var a="";var o="";var s="";var u="";n=t(e);r=n[1];i=n[2];a=n[3];o=n[4];s=n[5];if(!(r&&r.length&&a.length>=0)){return}if(i&&i.length){if(!(a.length===0||/^\//.test(a))){return}}else{if(/^\/\//.test(a)){return}}if(!/^[a-z][a-z0-9\+\-\.]*$/.test(r.toLowerCase())){return}u+=r+":";if(i&&i.length){u+="//"+i}u+=a;if(o&&o.length){u+="?"+o}if(s&&s.length){u+="#"+s}return u}function r(e,r){if(!n(e)){return}var i=[];var a="";var o="";var s="";var u="";var l="";var c="";var f="";i=t(e);a=i[1];o=i[2];s=i[3];l=i[4];c=i[5];if(!a){return}if(r){if(a.toLowerCase()!="https"){return}}else{if(a.toLowerCase()!="http"){return}}if(!o){return}if(/:(\d+)$/.test(o)){u=o.match(/:(\d+)$/)[0];o=o.replace(/:\d+$/,"")}f+=a+":";f+="//"+o;if(u){f+=u}f+=s;if(l&&l.length){f+="?"+l}if(c&&c.length){f+="#"+c}return f}function i(e){return r(e,true)}function a(e){return r(e)||i(e)}})(e)});var p_=function(){const e=this.riotx.get();this.endpointURL="";this.errorMessage="";this.isLikelyToBeSelfSignedCertificate=false;const t=t=>{if(!v_.isUri(t)){return"URL„Å´Ë™§„Çä„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ"}if(!!e.getter("endpoints.oneByURL",t)){return"Êó¢„Å´Â≠òÂú®„Åô„Çã„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„Åß„Åô„ÄÇ"}return null};this.handleEndpointURLChange=(e=>{this.endpointURL=e;this.update()});this.handleSelfSignedCertificateButtonTap=(()=>{window.open(this.endpointURL,"_blank")});this.handleFormSubmit=(e=>{this.registerEndpoint(e)});this.handleAddButtonSelect=(()=>{this.registerEndpoint()});this.registerEndpoint=(n=>{const r=t(n||this.endpointURL);if(!!r){this.errorMessage=r;this.isLikelyToBeSelfSignedCertificate=false;this.update();return}Promise.resolve().then(()=>e.action("endpoints.add",this.endpointURL)).then(()=>e.action("toasts.add",{message:"„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíËøΩÂä†„Åó„Åæ„Åó„Åü„ÄÇ"})).then(()=>{this.close()}).catch(e=>{switch(e.status){case 404:this.errorMessage="„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ";break;default:this.errorMessage="„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíËøΩÂä†Âá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ";break}if(this.endpointURL.startsWith("https://")){this.isLikelyToBeSelfSignedCertificate=true}else{this.isLikelyToBeSelfSignedCertificate=false}this.update()})})};i.tag2("viron-application-header-menu-entry",'<div class="Application_Header_Menu_Entry__title">ÁÆ°ÁêÜÁîªÈù¢„ÇíËøΩÂä†</div> <div class="Application_Header_Menu_Entry__message" if="{!!errorMessage}">{errorMessage}</div> <div class="Application_Header_Menu_Entry__selfSignedCertificate" if="{!!isLikelyToBeSelfSignedCertificate}" onclick="{getClickHandler(\'handleSelfSignedCertificateButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleSelfSignedCertificateButtonTap\')}">Self-Signed Certificate?</div> <div class="Application_Header_Menu_Entry__inputs"> <viron-textinput placeholder="URL„ÅÆÂÖ•Âäõ" val="{endpointURL}" onsubmit="{handleFormSubmit}" onchange="{handleEndpointURLChange}"></viron-textinput> </div> <div class="Application_Header_Menu_Entry__control"> <viron-button label="ËøΩÂä†" onselect="{handleAddButtonSelect}"></viron-button> </div>',"",'class="Application_Header_Menu_Entry"',function(e){this.external(p_)});var g_=function(){const e=this.riotx.get();this.handleTap=(()=>{e.action("modals.add","viron-application-header-menu-entry")})};i.tag2("viron-endpoints-page-add",'<div class="EndpointsPage_Add__content"> <div class="EndpointsPage_Add__icon"> <viron-icon-plus></viron-icon-plus> </div> <div class="EndpointsPage_Add__label">ËøΩÂä†</div> </div>',"",'class="EndpointsPage_Add" onclick="{getClickHandler(\'handleTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleTap\')}"',function(e){this.external(g_)});var m_=function(){};i.tag2("viron-tag",'<div class="Tag__label">{opts.label}</div>',"",'class="Tag"',function(e){this.external(m_)});"use strict";var y_=typeof self==="object"&&self.self===self&&self||typeof e==="object"&&e.global===e&&e||e;"use strict";var b_=function(){return typeof y_.Promise==="function"&&typeof y_.Promise.prototype.then==="function"};var __={}.toString;var w_=Array.isArray||function(e){return __.call(e)=="[object Array]"};"use strict";function x_(){try{var e=new Uint8Array(1);e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return e.foo()===42}catch(e){return false}}C_.TYPED_ARRAY_SUPPORT=x_();var T_=C_.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function C_(e,t,n){if(!C_.TYPED_ARRAY_SUPPORT&&!(this instanceof C_)){return new C_(e,t,n)}if(typeof e==="number"){return P_(this,e)}return B_(this,e,t,n)}if(C_.TYPED_ARRAY_SUPPORT){C_.prototype.__proto__=Uint8Array.prototype;C_.__proto__=Uint8Array;if(typeof Symbol!=="undefined"&&Symbol.species&&C_[Symbol.species]===C_){Object.defineProperty(C_,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false})}}function k_(e){if(e>=T_){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+T_.toString(16)+" bytes")}return e|0}function S_(e){return e!==e}function E_(e,t){var n;if(C_.TYPED_ARRAY_SUPPORT){n=new Uint8Array(t);n.__proto__=C_.prototype}else{n=e;if(n===null){n=new C_(t)}n.length=t}return n}function P_(e,t){var n=E_(e,t<0?0:k_(t)|0);if(!C_.TYPED_ARRAY_SUPPORT){for(var r=0;r<t;++r){n[r]=0}}return n}function O_(e,t){var n=D_(t)|0;var r=E_(e,n);var i=r.write(t);if(i!==n){r=r.slice(0,i)}return r}function M_(e,t){var n=t.length<0?0:k_(t.length)|0;var r=E_(e,n);for(var i=0;i<n;i+=1){r[i]=t[i]&255}return r}function A_(e,t,n,r){if(n<0||t.byteLength<n){throw new RangeError("'offset' is out of bounds")}if(t.byteLength<n+(r||0)){throw new RangeError("'length' is out of bounds")}var i;if(n===undefined&&r===undefined){i=new Uint8Array(t)}else if(r===undefined){i=new Uint8Array(t,n)}else{i=new Uint8Array(t,n,r)}if(C_.TYPED_ARRAY_SUPPORT){i.__proto__=C_.prototype}else{i=M_(e,i)}return i}function N_(e,t){if(C_.isBuffer(t)){var n=k_(t.length)|0;var r=E_(e,n);if(r.length===0){return r}t.copy(r,0,0,n);return r}if(t){if(typeof ArrayBuffer!=="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t){if(typeof t.length!=="number"||S_(t.length)){return E_(e,0)}return M_(e,t)}if(t.type==="Buffer"&&Array.isArray(t.data)){return M_(e,t.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function R_(e,t){t=t||Infinity;var n;var r=e.length;var i=null;var a=[];for(var o=0;o<r;++o){n=e.charCodeAt(o);if(n>55295&&n<57344){if(!i){if(n>56319){if((t-=3)>-1){a.push(239,191,189)}continue}else if(o+1===r){if((t-=3)>-1){a.push(239,191,189)}continue}i=n;continue}if(n<56320){if((t-=3)>-1){a.push(239,191,189)}i=n;continue}n=(i-55296<<10|n-56320)+65536}else if(i){if((t-=3)>-1){a.push(239,191,189)}}i=null;if(n<128){if((t-=1)<0){break}a.push(n)}else if(n<2048){if((t-=2)<0){break}a.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0){break}a.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0){break}a.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else{throw new Error("Invalid code point")}}return a}function D_(e){if(C_.isBuffer(e)){return e.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){e=""+e}var t=e.length;if(t===0){return 0}return R_(e).length}function L_(e,t,n,r){for(var i=0;i<r;++i){if(i+n>=t.length||i>=e.length){break}t[i+n]=e[i]}return i}function I_(e,t,n,r){return L_(R_(t,e.length-n),e,n,r)}function B_(e,t,n,r){if(typeof t==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&t instanceof ArrayBuffer){return A_(e,t,n,r)}if(typeof t==="string"){return O_(e,t,n)}return N_(e,t)}C_.prototype.write=function e(t,n,r){if(n===undefined){r=this.length;n=0}else if(r===undefined&&typeof n==="string"){r=this.length;n=0}else if(isFinite(n)){n=n|0;if(isFinite(r)){r=r|0}else{r=undefined}}var i=this.length-n;if(r===undefined||r>i){r=i}if(t.length>0&&(r<0||n<0)||n>this.length){throw new RangeError("Attempt to write outside buffer bounds")}return I_(this,t,n,r)};C_.prototype.slice=function e(t,n){var r=this.length;t=~~t;n=n===undefined?r:~~n;if(t<0){t+=r;if(t<0){t=0}}else if(t>r){t=r}if(n<0){n+=r;if(n<0){n=0}}else if(n>r){n=r}if(n<t){n=t}var i;if(C_.TYPED_ARRAY_SUPPORT){i=this.subarray(t,n);i.__proto__=C_.prototype}else{var a=n-t;i=new C_(a,undefined);for(var o=0;o<a;++o){i[o]=this[o+t]}}return i};C_.prototype.copy=function e(t,n,r,i){if(!r){r=0}if(!i&&i!==0){i=this.length}if(n>=t.length){n=t.length}if(!n){n=0}if(i>0&&i<r){i=r}if(i===r){return 0}if(t.length===0||this.length===0){return 0}if(n<0){throw new RangeError("targetStart out of bounds")}if(r<0||r>=this.length){throw new RangeError("sourceStart out of bounds")}if(i<0){throw new RangeError("sourceEnd out of bounds")}if(i>this.length){i=this.length}if(t.length-n<i-r){i=t.length-n+r}var a=i-r;var o;if(this===t&&r<n&&n<i){for(o=a-1;o>=0;--o){t[o+n]=this[o+r]}}else if(a<1e3||!C_.TYPED_ARRAY_SUPPORT){for(o=0;o<a;++o){t[o+n]=this[o+r]}}else{Uint8Array.prototype.set.call(t,this.subarray(r,r+a),n)}return a};C_.prototype.fill=function e(t,n,r){if(typeof t==="string"){if(typeof n==="string"){n=0;r=this.length}else if(typeof r==="string"){r=this.length}if(t.length===1){var i=t.charCodeAt(0);if(i<256){t=i}}}else if(typeof t==="number"){t=t&255}if(n<0||this.length<n||this.length<r){throw new RangeError("Out of range index")}if(r<=n){return this}n=n>>>0;r=r===undefined?this.length:r>>>0;if(!t){t=0}var a;if(typeof t==="number"){for(a=n;a<r;++a){this[a]=t}}else{var o=C_.isBuffer(t)?t:new C_(t);var s=o.length;for(a=0;a<r-n;++a){this[a+n]=o[a%s]}}return this};C_.concat=function e(t,n){if(!w_(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return E_(null,0)}var r;if(n===undefined){n=0;for(r=0;r<t.length;++r){n+=t[r].length}}var i=P_(null,n);var a=0;for(r=0;r<t.length;++r){var o=t[r];if(!C_.isBuffer(o)){throw new TypeError('"list" argument must be an Array of Buffers')}o.copy(i,a);a+=o.length}return i};C_.byteLength=D_;C_.prototype._isBuffer=true;C_.isBuffer=function e(t){return!!(t!=null&&t._isBuffer)};var j_=C_;var F_;var H_=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];var z_=function e(t){if(!t){throw new Error('"version" cannot be null or undefined')}if(t<1||t>40){throw new Error('"version" should be in range from 1 to 40')}return t*4+17};var U_=function e(t){return H_[t]};var V_=function(e){var t=0;while(e!==0){t++;e>>>=1}return t};var W_=function e(t){if(typeof t!=="function"){throw new Error('"toSJISFunc" is not a valid function.')}F_=t};var q_=function(){return typeof F_!=="undefined"};var Y_=function e(t){return F_(t)};var K_={getSymbolSize:z_,getSymbolTotalCodewords:U_,getBCHDigit:V_,setToSJISFunction:W_,isKanjiModeEnabled:q_,toSJIS:Y_};var $_=n(function(e,t){t.L={bit:1};t.M={bit:0};t.Q={bit:3};t.H={bit:2};function n(e){if(typeof e!=="string"){throw new Error("Param is not a string")}var n=e.toLowerCase();switch(n){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}t.isValid=function e(t){return t&&typeof t.bit!=="undefined"&&t.bit>=0&&t.bit<4};t.from=function e(r,i){if(t.isValid(r)){return r}try{return n(r)}catch(e){return i}}});function G_(){this.buffer=[];this.length=0}G_.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(var n=0;n<t;n++){this.putBit((e>>>t-n-1&1)===1)}},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);if(this.buffer.length<=t){this.buffer.push(0)}if(e){this.buffer[t]|=128>>>this.length%8}this.length++}};var X_=G_;function Z_(e){if(!e||e<1){throw new Error("BitMatrix size must be defined and greater than 0")}this.size=e;this.data=new j_(e*e);this.data.fill(0);this.reservedBit=new j_(e*e);this.reservedBit.fill(0)}Z_.prototype.set=function(e,t,n,r){var i=e*this.size+t;this.data[i]=n;if(r){this.reservedBit[i]=true}};Z_.prototype.get=function(e,t){return this.data[e*this.size+t]};Z_.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};Z_.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var J_=Z_;var Q_=n(function(e,t){var n=K_.getSymbolSize;t.getRowColCoords=function e(t){if(t===1){return[]}var r=Math.floor(t/7)+2;var i=n(t);var a=i===145?26:Math.ceil((i-13)/(2*r-2))*2;var o=[i-7];for(var s=1;s<r-1;s++){o[s]=o[s-1]-a}o.push(6);return o.reverse()};t.getPositions=function e(n){var r=[];var i=t.getRowColCoords(n);var a=i.length;for(var o=0;o<a;o++){for(var s=0;s<a;s++){if(o===0&&s===0||o===0&&s===a-1||o===a-1&&s===0){continue}r.push([i[o],i[s]])}}return r}});var ew=K_.getSymbolSize;var tw=7;var nw=function e(t){var n=ew(t);return[[0,0],[n-tw,0],[0,n-tw]]};var rw={getPositions:nw};var iw=n(function(e,t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var n={N1:3,N2:3,N3:40,N4:10};t.isValid=function e(t){return t&&t!==""&&!isNaN(t)&&t>=0&&t<=7};t.from=function e(n){return t.isValid(n)?parseInt(n,10):undefined};t.getPenaltyN1=function e(t){var r=t.size;var i=0;var a=0;var o=0;var s=null;var u=null;for(var l=0;l<r;l++){a=o=0;s=u=null;for(var c=0;c<r;c++){var f=t.get(l,c);if(f===s){a++}else{if(a>=5){i+=n.N1+(a-5)}s=f;a=1}f=t.get(c,l);if(f===u){o++}else{if(o>=5){i+=n.N1+(o-5)}u=f;o=1}}if(a>=5){i+=n.N1+(a-5)}if(o>=5){i+=n.N1+(o-5)}}return i};t.getPenaltyN2=function e(t){var r=t.size;var i=0;for(var a=0;a<r-1;a++){for(var o=0;o<r-1;o++){var s=t.get(a,o)+t.get(a,o+1)+t.get(a+1,o)+t.get(a+1,o+1);if(s===4||s===0){i++}}}return i*n.N2};t.getPenaltyN3=function e(t){var r=t.size;var i=0;var a=0;var o=0;for(var s=0;s<r;s++){a=o=0;for(var u=0;u<r;u++){a=a<<1&2047|t.get(s,u);if(u>=10&&(a===1488||a===93)){i++}o=o<<1&2047|t.get(u,s);if(u>=10&&(o===1488||o===93)){i++}}}return i*n.N3};t.getPenaltyN4=function e(t){var r=0;var i=t.data.length;for(var a=0;a<i;a++){r+=t.data[a]}var o=Math.abs(Math.ceil(r*100/i/5)-10);return o*n.N4};function r(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2===0;case t.Patterns.PATTERN001:return n%2===0;case t.Patterns.PATTERN010:return r%3===0;case t.Patterns.PATTERN011:return(n+r)%3===0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2===0;case t.Patterns.PATTERN101:return n*r%2+n*r%3===0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2===0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}t.applyMask=function e(t,n){var i=n.size;for(var a=0;a<i;a++){for(var o=0;o<i;o++){if(n.isReserved(o,a)){continue}n.xor(o,a,r(t,o,a))}}};t.getBestMask=function e(n,r){var i=Object.keys(t.Patterns).length;var a=0;var o=Infinity;for(var s=0;s<i;s++){r(s);t.applyMask(s,n);var u=t.getPenaltyN1(n)+t.getPenaltyN2(n)+t.getPenaltyN3(n)+t.getPenaltyN4(n);t.applyMask(s,n);if(u<o){o=u;a=s}}return a}});var aw=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81];var ow=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];var sw=function e(t,n){switch(n){case $_.L:return aw[(t-1)*4+0];case $_.M:return aw[(t-1)*4+1];case $_.Q:return aw[(t-1)*4+2];case $_.H:return aw[(t-1)*4+3];default:return undefined}};var uw=function e(t,n){switch(n){case $_.L:return ow[(t-1)*4+0];case $_.M:return ow[(t-1)*4+1];case $_.Q:return ow[(t-1)*4+2];case $_.H:return ow[(t-1)*4+3];default:return undefined}};var lw={getBlocksCount:sw,getTotalCodewordsCount:uw};var cw=new j_(512);var fw=new j_(256);(function e(){var t=1;for(var n=0;n<255;n++){cw[n]=t;fw[t]=n;t<<=1;if(t&256){t^=285}}for(n=255;n<512;n++){cw[n]=cw[n-255]}})();var dw=function e(t){if(t<1){throw new Error("log("+t+")")}return fw[t]};var hw=function e(t){return cw[t]};var vw=function e(t,n){if(t===0||n===0){return 0}return cw[fw[t]+fw[n]]};var pw={log:dw,exp:hw,mul:vw};var gw=n(function(e,t){t.mul=function e(t,n){var r=new j_(t.length+n.length-1);r.fill(0);for(var i=0;i<t.length;i++){for(var a=0;a<n.length;a++){r[i+a]^=pw.mul(t[i],n[a])}}return r};t.mod=function e(t,n){var r=new j_(t);while(r.length-n.length>=0){var i=r[0];for(var a=0;a<n.length;a++){r[a]^=pw.mul(n[a],i)}var o=0;while(o<r.length&&r[o]===0){o++}r=r.slice(o)}return r};t.generateECPolynomial=function e(n){var r=new j_([1]);for(var i=0;i<n;i++){r=t.mul(r,[1,pw.exp(i)])}return r}});function mw(e){this.genPoly=undefined;this.degree=e;if(this.degree){this.initialize(this.degree)}}mw.prototype.initialize=function e(t){this.degree=t;this.genPoly=gw.generateECPolynomial(this.degree)};mw.prototype.encode=function e(t){if(!this.genPoly){throw new Error("Encoder not initialized")}var n=new j_(this.degree);n.fill(0);var r=j_.concat([t,n],t.length+this.degree);var i=gw.mod(r,this.genPoly);var a=this.degree-i.length;if(a>0){var o=new j_(this.degree);o.fill(0);i.copy(o,a);return o}return i};var yw=mw;var bw="[0-9]+";var _w="[A-Z $%*+\\-./:]+";var ww="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|"+"[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|"+"[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|"+"[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ww=ww.replace(/u/g,"\\u");var xw="(?:(?![A-Z0-9 $%*+\\-./:]|"+ww+").)+";var Tw=new RegExp(ww,"g");var Cw=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");var kw=new RegExp(xw,"g");var Sw=new RegExp(bw,"g");var Ew=new RegExp(_w,"g");var Pw=new RegExp("^"+ww+"$");var Ow=new RegExp("^"+bw+"$");var Mw=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");var Aw=function e(t){return Pw.test(t)};var Nw=function e(t){return Ow.test(t)};var Rw=function e(t){return Mw.test(t)};var Dw={KANJI:Tw,BYTE_KANJI:Cw,BYTE:kw,NUMERIC:Sw,ALPHANUMERIC:Ew,testKanji:Aw,testNumeric:Nw,testAlphanumeric:Rw};var Lw=n(function(e,t){t.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]};t.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]};t.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]};t.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]};t.MIXED={bit:-1};t.getCharCountIndicator=function e(t,n){if(!t.ccBits){throw new Error("Invalid mode: "+t)}if(!Iw.isValid(n)){throw new Error("Invalid version: "+n)}if(n>=1&&n<10){return t.ccBits[0]}else if(n<27){return t.ccBits[1]}return t.ccBits[2]};t.getBestModeForData=function e(n){if(Dw.testNumeric(n)){return t.NUMERIC}else if(Dw.testAlphanumeric(n)){return t.ALPHANUMERIC}else if(Dw.testKanji(n)){return t.KANJI}else{return t.BYTE}};t.toString=function e(t){if(t&&t.id){return t.id}throw new Error("Invalid mode")};t.isValid=function e(t){return t&&t.bit&&t.ccBits};function n(e){if(typeof e!=="string"){throw new Error("Param is not a string")}var n=e.toLowerCase();switch(n){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}t.from=function e(r,i){if(t.isValid(r)){return r}try{return n(r)}catch(e){return i}}});var Iw=n(function(e,t){var n=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0;var r=K_.getBCHDigit(n);function i(e,n,r){for(var i=1;i<=40;i++){if(n<=t.getCapacity(i,r,e)){return i}}return undefined}function a(e,t){return Lw.getCharCountIndicator(e,t)+4}function o(e,t){var n=0;e.forEach(function(e){var r=a(e.mode,t);n+=r+e.getBitsLength()});return n}function s(e,n){for(var r=1;r<=40;r++){var i=o(e,r);if(i<=t.getCapacity(r,n,Lw.MIXED)){return r}}return undefined}t.isValid=function e(t){return!isNaN(t)&&t>=1&&t<=40};t.from=function e(n,r){if(t.isValid(n)){return parseInt(n,10)}return r};t.getCapacity=function e(n,r,i){if(!t.isValid(n)){throw new Error("Invalid QR Code version")}if(typeof i==="undefined"){i=Lw.BYTE}var o=K_.getSymbolTotalCodewords(n);var s=lw.getTotalCodewordsCount(n,r);var u=(o-s)*8;if(i===Lw.MIXED){return u}var l=u-a(i,n);switch(i){case Lw.NUMERIC:return Math.floor(l/10*3);case Lw.ALPHANUMERIC:return Math.floor(l/11*2);case Lw.KANJI:return Math.floor(l/13);case Lw.BYTE:default:return Math.floor(l/8)}};t.getBestVersionForData=function e(t,n){var r;var a=$_.from(n,$_.M);if(w_(t)){if(t.length>1){return s(t,a)}if(t.length===0){return 1}r=t[0]}else{r=t}return i(r.mode,r.getLength(),a)};t.getEncodedBits=function e(i){if(!t.isValid(i)||i<7){throw new Error("Invalid QR Code version")}var a=i<<12;while(K_.getBCHDigit(a)-r>=0){a^=n<<K_.getBCHDigit(a)-r}return i<<12|a}});var Bw=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0;var jw=1<<14|1<<12|1<<10|1<<4|1<<1;var Fw=K_.getBCHDigit(Bw);var Hw=function e(t,n){var r=t.bit<<3|n;var i=r<<10;while(K_.getBCHDigit(i)-Fw>=0){i^=Bw<<K_.getBCHDigit(i)-Fw}return(r<<10|i)^jw};var zw={getEncodedBits:Hw};function Uw(e){this.mode=Lw.NUMERIC;this.data=e.toString()}Uw.getBitsLength=function e(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Uw.prototype.getLength=function e(){return this.data.length};Uw.prototype.getBitsLength=function e(){return Uw.getBitsLength(this.data.length)};Uw.prototype.write=function e(t){var n,r,i;for(n=0;n+3<=this.data.length;n+=3){r=this.data.substr(n,3);i=parseInt(r,10);t.put(i,10)}var a=this.data.length-n;if(a>0){r=this.data.substr(n);i=parseInt(r,10);t.put(i,a*3+1)}};var Vw=Uw;var Ww=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function qw(e){this.mode=Lw.ALPHANUMERIC;this.data=e}qw.getBitsLength=function e(t){return 11*Math.floor(t/2)+6*(t%2)};qw.prototype.getLength=function e(){return this.data.length};qw.prototype.getBitsLength=function e(){return qw.getBitsLength(this.data.length)};qw.prototype.write=function e(t){var n;for(n=0;n+2<=this.data.length;n+=2){var r=Ww.indexOf(this.data[n])*45;r+=Ww.indexOf(this.data[n+1]);t.put(r,11)}if(this.data.length%2){t.put(Ww.indexOf(this.data[n]),6)}};var Yw=qw;function Kw(e){this.mode=Lw.BYTE;this.data=new j_(e)}Kw.getBitsLength=function e(t){return t*8};Kw.prototype.getLength=function e(){return this.data.length};Kw.prototype.getBitsLength=function e(){return Kw.getBitsLength(this.data.length)};Kw.prototype.write=function(e){for(var t=0,n=this.data.length;t<n;t++){e.put(this.data[t],8)}};var $w=Kw;function Gw(e){this.mode=Lw.KANJI;this.data=e}Gw.getBitsLength=function e(t){return t*13};Gw.prototype.getLength=function e(){return this.data.length};Gw.prototype.getBitsLength=function e(){return Gw.getBitsLength(this.data.length)};Gw.prototype.write=function(e){var t;for(t=0;t<this.data.length;t++){var n=K_.toSJIS(this.data[t]);if(n>=33088&&n<=40956){n-=33088}else if(n>=57408&&n<=60351){n-=49472}else{throw new Error("Invalid SJIS character: "+this.data[t]+"\n"+"Make sure your charset is UTF-8")}n=(n>>>8&255)*192+(n&255);e.put(n,13)}};var Xw=Gw;var Zw=n(function(e){"use strict";var t={single_source_shortest_paths:function(e,n,r){var i={};var a={};a[n]=0;var o=t.PriorityQueue.make();o.push(n,0);var s,u,l,c,f,d,h,v,p;while(!o.empty()){s=o.pop();u=s.value;c=s.cost;f=e[u]||{};for(l in f){if(f.hasOwnProperty(l)){d=f[l];h=c+d;v=a[l];p=typeof a[l]==="undefined";if(p||v>h){a[l]=h;o.push(l,h);i[l]=u}}}}if(typeof r!=="undefined"&&typeof a[r]==="undefined"){var g=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(g)}return i},extract_shortest_path_from_predecessor_list:function(e,t){var n=[];var r=t;while(r){n.push(r);r=e[r]}n.reverse();return n},find_path:function(e,n,r){var i=t.single_source_shortest_paths(e,n,r);return t.extract_shortest_path_from_predecessor_list(i,r)},PriorityQueue:{make:function(e){var n=t.PriorityQueue,r={},i;e=e||{};for(i in n){if(n.hasOwnProperty(i)){r[i]=n[i]}}r.queue=[];r.sorter=e.sorter||n.default_sorter;return r},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n);this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};{e.exports=t}});var Jw=n(function(e,t){function n(e){return unescape(encodeURIComponent(e)).length}function r(e,t,n){var r=[];var i;while((i=e.exec(n))!==null){r.push({data:i[0],index:i.index,mode:t,length:i[0].length})}return r}function i(e){var t=r(Dw.NUMERIC,Lw.NUMERIC,e);var n=r(Dw.ALPHANUMERIC,Lw.ALPHANUMERIC,e);var i;var a;if(K_.isKanjiModeEnabled()){i=r(Dw.BYTE,Lw.BYTE,e);a=r(Dw.KANJI,Lw.KANJI,e)}else{i=r(Dw.BYTE_KANJI,Lw.BYTE,e);a=[]}var o=t.concat(n,i,a);return o.sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function a(e,t){switch(t){case Lw.NUMERIC:return Vw.getBitsLength(e);case Lw.ALPHANUMERIC:return Yw.getBitsLength(e);case Lw.KANJI:return Xw.getBitsLength(e);case Lw.BYTE:return $w.getBitsLength(e)}}function o(e){return e.reduce(function(e,t){var n=e.length-1>=0?e[e.length-1]:null;if(n&&n.mode===t.mode){e[e.length-1].data+=t.data;return e}e.push(t);return e},[])}function s(e){var t=[];for(var r=0;r<e.length;r++){var i=e[r];switch(i.mode){case Lw.NUMERIC:t.push([i,{data:i.data,mode:Lw.ALPHANUMERIC,length:i.length},{data:i.data,mode:Lw.BYTE,length:i.length}]);break;case Lw.ALPHANUMERIC:t.push([i,{data:i.data,mode:Lw.BYTE,length:i.length}]);break;case Lw.KANJI:t.push([i,{data:i.data,mode:Lw.BYTE,length:n(i.data)}]);break;case Lw.BYTE:t.push([{data:i.data,mode:Lw.BYTE,length:n(i.data)}])}}return t}function u(e,t){var n={};var r={start:{}};var i=["start"];for(var o=0;o<e.length;o++){var s=e[o];var u=[];for(var l=0;l<s.length;l++){var c=s[l];var f=""+o+l;u.push(f);n[f]={node:c,lastCount:0};r[f]={};for(var d=0;d<i.length;d++){var h=i[d];if(n[h]&&n[h].node.mode===c.mode){r[h][f]=a(n[h].lastCount+c.length,c.mode)-a(n[h].lastCount,c.mode);n[h].lastCount+=c.length}else{if(n[h]){n[h].lastCount=c.length}r[h][f]=a(c.length,c.mode)+4+Lw.getCharCountIndicator(c.mode,t)}}}i=u}for(d=0;d<i.length;d++){r[i[d]]["end"]=0}return{map:r,table:n}}function l(e,t){var n;var r=Lw.getBestModeForData(e);n=Lw.from(t,r);if(n!==Lw.BYTE&&n.bit<r.bit){throw new Error('"'+e+'"'+" cannot be encoded with mode "+Lw.toString(n)+".\n Suggested mode is: "+Lw.toString(r))}if(n===Lw.KANJI&&!K_.isKanjiModeEnabled()){n=Lw.BYTE}switch(n){case Lw.NUMERIC:return new Vw(e);case Lw.ALPHANUMERIC:return new Yw(e);case Lw.KANJI:return new Xw(e);case Lw.BYTE:return new $w(e)}}t.fromArray=function e(t){return t.reduce(function(e,t){if(typeof t==="string"){e.push(l(t,null))}else if(t.data){e.push(l(t.data,t.mode))}return e},[])};t.fromString=function e(n,r){var a=i(n,K_.isKanjiModeEnabled());var l=s(a);var c=u(l,r);var f=Zw.find_path(c.map,"start","end");var d=[];for(var h=1;h<f.length-1;h++){d.push(c.table[f[h]].node)}return t.fromArray(o(d))};t.rawSplit=function e(n){return t.fromArray(i(n,K_.isKanjiModeEnabled()))}});function Qw(e,t){var n=e.size;var r=rw.getPositions(t);for(var i=0;i<r.length;i++){var a=r[i][0];var o=r[i][1];for(var s=-1;s<=7;s++){if(a+s<=-1||n<=a+s){continue}for(var u=-1;u<=7;u++){if(o+u<=-1||n<=o+u){continue}if(s>=0&&s<=6&&(u===0||u===6)||u>=0&&u<=6&&(s===0||s===6)||s>=2&&s<=4&&u>=2&&u<=4){e.set(a+s,o+u,true,true)}else{e.set(a+s,o+u,false,true)}}}}}function ex(e){var t=e.size;for(var n=8;n<t-8;n++){var r=n%2===0;e.set(n,6,r,true);e.set(6,n,r,true)}}function tx(e,t){var n=Q_.getPositions(t);for(var r=0;r<n.length;r++){var i=n[r][0];var a=n[r][1];for(var o=-2;o<=2;o++){for(var s=-2;s<=2;s++){if(o===-2||o===2||s===-2||s===2||o===0&&s===0){e.set(i+o,a+s,true,true)}else{e.set(i+o,a+s,false,true)}}}}}function nx(e,t){var n=e.size;var r=Iw.getEncodedBits(t);var i,a,o;for(var s=0;s<18;s++){i=Math.floor(s/3);a=s%3+n-8-3;o=(r>>s&1)===1;e.set(i,a,o,true);e.set(a,i,o,true)}}function rx(e,t,n){var r=e.size;var i=zw.getEncodedBits(t,n);var a,o;for(a=0;a<15;a++){o=(i>>a&1)===1;if(a<6){e.set(a,8,o,true)}else if(a<8){e.set(a+1,8,o,true)}else{e.set(r-15+a,8,o,true)}if(a<8){e.set(8,r-a-1,o,true)}else if(a<9){e.set(8,15-a-1+1,o,true)}else{e.set(8,15-a-1,o,true)}}e.set(r-8,8,1,true)}function ix(e,t){var n=e.size;var r=-1;var i=n-1;var a=7;var o=0;for(var s=n-1;s>0;s-=2){if(s===6){s--}while(true){for(var u=0;u<2;u++){if(!e.isReserved(i,s-u)){var l=false;if(o<t.length){l=(t[o]>>>a&1)===1}e.set(i,s-u,l);a--;if(a===-1){o++;a=7}}}i+=r;if(i<0||n<=i){i-=r;r=-r;break}}}}function ax(e,t,n){var r=new X_;n.forEach(function(t){r.put(t.mode.bit,4);r.put(t.getLength(),Lw.getCharCountIndicator(t.mode,e));t.write(r)});var i=K_.getSymbolTotalCodewords(e);var a=lw.getTotalCodewordsCount(e,t);var o=(i-a)*8;if(r.getLengthInBits()+4<=o){r.put(0,4)}while(r.getLengthInBits()%8!==0){r.putBit(0)}var s=(o-r.getLengthInBits())/8;for(var u=0;u<s;u++){r.put(u%2?17:236,8)}return ox(r,e,t)}function ox(e,t,n){var r=K_.getSymbolTotalCodewords(t);var i=lw.getTotalCodewordsCount(t,n);var a=r-i;var o=lw.getBlocksCount(t,n);var s=r%o;var u=o-s;var l=Math.floor(r/o);var c=Math.floor(a/o);var f=c+1;var d=l-c;var h=new yw(d);var v=0;var p=new Array(o);var g=new Array(o);var m=0;var y=new j_(e.buffer);for(var b=0;b<o;b++){var _=b<u?c:f;p[b]=y.slice(v,v+_);g[b]=h.encode(p[b]);v+=_;m=Math.max(m,_)}var w=new j_(r);var x=0;var T,C;for(T=0;T<m;T++){for(C=0;C<o;C++){if(T<p[C].length){w[x++]=p[C][T]}}}for(T=0;T<d;T++){for(C=0;C<o;C++){w[x++]=g[C][T]}}return w}function sx(e,t,n,r){var i;if(w_(e)){i=Jw.fromArray(e)}else if(typeof e==="string"){var a=t;if(!a){var o=Jw.rawSplit(e);a=Iw.getBestVersionForData(o,n)}i=Jw.fromString(e,a||40)}else{throw new Error("Invalid data")}var s=Iw.getBestVersionForData(i,n);if(!s){throw new Error("The amount of data is too big to be stored in a QR Code")}if(!t){t=s}else if(t<s){throw new Error("\n"+"The chosen QR Code version cannot contain this amount of data.\n"+"Minimum version required to store current data is: "+s+".\n")}var u=ax(t,n,i);var l=K_.getSymbolSize(t);var c=new J_(l);Qw(c,t);ex(c);tx(c,t);rx(c,n,0);if(t>=7){nx(c,t)}ix(c,u);if(!r){r=iw.getBestMask(c,rx.bind(null,c,n))}iw.applyMask(r,c);rx(c,n,r);return{modules:c,version:t,errorCorrectionLevel:n,maskPattern:r,segments:i}}var ux=function e(t,n){if(typeof t==="undefined"||t===""){throw new Error("No input text")}var r=$_.M;var i;var a;if(typeof n!=="undefined"){r=$_.from(n.errorCorrectionLevel,$_.M);i=Iw.from(n.version);a=iw.from(n.maskPattern);if(n.toSJISFunc){K_.setToSJISFunction(n.toSJISFunc)}}return sx(t,i,r,a)};var lx={create:ux};var cx=n(function(e,t){function n(e){if(typeof e!=="string"){throw new Error("Color should be defined as hex string")}var t=e.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8){throw new Error("Invalid hex color: "+e)}if(t.length===3||t.length===4){t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))}if(t.length===6){t.push("F","F")}var n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function e(t){if(!t){t={}}if(!t.color){t.color={}}var r=typeof t.margin==="undefined"||t.margin===null||t.margin<0?4:t.margin;var i=t.width&&t.width>=21?t.width:undefined;var a=t.scale||4;return{width:i,scale:i?4:a,margin:r,color:{dark:n(t.color.dark||"#000000ff"),light:n(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}};t.getScale=function e(t,n){return n.width&&n.width>=t+n.margin*2?n.width/(t+n.margin*2):n.scale};t.getImageWidth=function e(n,r){var i=t.getScale(n,r);return Math.floor((n+r.margin*2)*i)};t.qrToImageData=function e(n,r,i){var a=r.modules.size;var o=r.modules.data;var s=t.getScale(a,i);var u=Math.floor((a+i.margin*2)*s);var l=i.margin*s;var c=[i.color.light,i.color.dark];for(var f=0;f<u;f++){for(var d=0;d<u;d++){var h=(f*u+d)*4;var v=i.color.light;if(f>=l&&d>=l&&f<u-l&&d<u-l){var p=Math.floor((f-l)/s);var g=Math.floor((d-l)/s);v=c[o[p*a+g]?1:0]}n[h++]=v.r;n[h++]=v.g;n[h++]=v.b;n[h]=v.a}}}});var fx=n(function(e,t){function n(e,t,n){e.clearRect(0,0,t.width,t.height);if(!t.style){t.style={}}t.height=n;t.width=n;t.style.height=n+"px";t.style.width=n+"px"}function r(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}t.render=function e(t,i,a){var o=a;var s=i;if(typeof o==="undefined"&&(!i||!i.getContext)){o=i;i=undefined}if(!i){s=r()}o=cx.getOptions(o);var u=cx.getImageWidth(t.modules.size,o);var l=s.getContext("2d");var c=l.createImageData(u,u);cx.qrToImageData(c.data,t,o);n(l,s,u);l.putImageData(c,0,0);return s};t.renderToDataURL=function e(n,r,i){var a=i;if(typeof a==="undefined"&&(!r||!r.getContext)){a=r;r=undefined}if(!a){a={}}var o=t.render(n,r,a);var s=a.type||"image/png";var u=a.rendererOpts||{};return o.toDataURL(s,u.quality)}});function dx(e,t){var n=e.a/255;var r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function hx(e,t,n){var r=e+t;if(typeof n!=="undefined"){r+=" "+n}return r}function vx(e,t,n){var r="";var i=0;var a=false;var o=0;for(var s=0;s<e.length;s++){var u=Math.floor(s%t);var l=Math.floor(s/t);if(!u&&!a){a=true}if(e[s]){o++;if(!(s>0&&u>0&&e[s-1])){r+=a?hx("M",u+n,.5+l+n):hx("m",i,0);i=0;a=false}if(!(u+1<t&&e[s+1])){r+=hx("h",o);o=0}}else{i++}}return r}var px=function e(t,n,r){var i=cx.getOptions(n);var a=t.modules.size;var o=t.modules.data;var s=a+i.margin*2;var u=!i.color.light.a?"":"<path "+dx(i.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>';var l="<path "+dx(i.color.dark,"stroke")+' d="'+vx(o,a,i.margin)+'"/>';var c='viewBox="'+"0 0 "+s+" "+s+'"';var f=!i.width?"":'width="'+i.width+'" height="'+i.width+'" ';var d='<svg xmlns="http://www.w3.org/2000/svg" '+f+c+">"+u+l+"</svg>";if(typeof r==="function"){r(null,d)}return d};var gx={render:px};function mx(e,t,n,r,i){var a=[].slice.call(arguments,1);var o=a.length;var s=typeof a[o-1]==="function";if(!s&&!b_()){throw new Error("Callback required as last argument")}if(s){if(o<2){throw new Error("Too few arguments provided")}if(o===2){i=n;n=t;t=r=undefined}else if(o===3){if(t.getContext&&typeof i==="undefined"){i=r;r=undefined}else{i=r;r=n;n=t;t=undefined}}}else{if(o<1){throw new Error("Too few arguments provided")}if(o===1){n=t;t=r=undefined}else if(o===2&&!t.getContext){r=n;n=t;t=undefined}return new Promise(function(i,a){try{var o=lx.create(n,r);i(e(o,t,r))}catch(e){a(e)}})}try{var u=lx.create(n,r);i(null,e(u,t,r))}catch(e){i(e)}}var yx=lx.create;var bx=mx.bind(null,fx.render);var _x=mx.bind(null,fx.renderToDataURL);var wx=mx.bind(null,function(e,t,n){return gx.render(e,n)});var xx={create:yx,toCanvas:bx,toDataURL:_x,toString:wx};var Tx=function(){this.on("mount",()=>{xx.toCanvas(this.refs.canvas,this.opts.data.value,{width:this.opts.data.size},e=>{if(e){console.error(e)}})})};i.tag2("viron-qrcode",'<canvas class="Qrcode_canvas" ref="canvas"></canvas>',"",'class="Qrcode"',function(e){this.external(Tx)});var Cx=function(){const e=this.riotx.get();const t=to({},{url:this.opts.endpoint.url,memo:this.opts.endpoint.memo});const n=e.getter("application.latestVersion");const r=encodeURIComponent(JSON.stringify(t));const i=`https://cam-inc.github.io/viron/${n}/#/endpointimport?endpoint=${r}`;this.data={size:200,value:i}};i.tag2("viron-endpoints-page-endpoint-menu-qrcode",'<div class="EndpointsPage_Endpoint_Menu_QRCode__title">QR„Ç≥„Éº„Éâ</div> <div class="EndpointsPage_Endpoint_Menu_QRCode__message">„É¢„Éê„Ç§„É´Á´ØÊú´„Å´„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíËøΩÂä†„Åß„Åç„Åæ„Åô„ÄÇ<br>„ÅäÂ•Ω„Åç„Å™QR„Ç≥„Éº„Éâ„É™„Éº„ÉÄ„Éº„ÅßË™≠„ÅøËæº„Çì„Åß‰∏ã„Åï„ÅÑ„ÄÇ</div> <div class="EndpointsPage_Endpoint_Menu_QRCode__canvas"> <viron-qrcode data="{data}"></viron-qrcode> </div>',"",'class="EndpointsPage_Endpoint_Menu_QRCode"',function(e){this.external(Cx)});var kx=function(){const e=this.riotx.get();const t=!!this.opts.endpoint.token;const n=e.getter("layout.isDesktop");this.list=[];if(n){this.list.push({id:"qrcode",label:"QR„Ç≥„Éº„Éâ"})}this.list.push({id:"remove",label:"„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíÂâäÈô§"});if(t){this.list.push({id:"signout",label:"„É≠„Ç∞„Ç¢„Ç¶„Éà"})}const r=()=>{Promise.resolve().then(()=>e.action("modals.add","viron-endpoints-page-endpoint-menu-qrcode",{endpoint:this.opts.endpoint})).then(()=>{this.close()}).catch(t=>e.action("modals.add","viron-error",{error:t}))};const i=()=>{Promise.resolve().then(()=>e.action("endpoints.remove",this.opts.endpoint.key)).then(()=>e.action("toasts.add",{message:"„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü„ÄÇ"})).then(()=>{this.close()}).catch(t=>e.action("modals.add","viron-error",{error:t}))};const a=()=>{Promise.resolve().then(()=>e.action("auth.remove",this.opts.endpoint.key)).then(()=>e.action("toasts.add",{message:"„É≠„Ç∞„Ç¢„Ç¶„Éà„Åó„Åæ„Åó„Åü„ÄÇ"})).then(()=>{this.close()}).catch(t=>e.action("modals.add","viron-error",{error:t}))};this.handleItemSelect=(e=>{switch(e){case"qrcode":r();break;case"remove":i();break;case"signout":a();break;default:break}})};i.tag2("viron-endpoints-page-endpoint-menu",'<viron-list list="{list}" onselect="{handleItemSelect}"></viron-list>',"",'class="EndpointsPage_Endpoint_Menu"',function(e){this.external(kx)});var Sx=function(){};i.tag2("viron-horizontal-rule",'<div class="HorizontalRule__line"></div> <virtual if="{!!opts.label}"> <div class="HorizontalRule__label">{opts.label}</div> <div class="HorizontalRule__line"></div> </virtual>',"",'class="HorizontalRule"',function(e){this.external(Sx)});var Ex=function(){const e=this.riotx.get();this.errorMessage=null;this.mailAddress="";this.password="";this.handleMailAddressChange=(e=>{this.mailAddress=e;this.update()});this.handlePasswordChange=(e=>{this.password=e;this.update()});this.handleFromSubmit=(()=>{t()});this.handleSigninButtonSelect=(()=>{t()});const t=()=>{Promise.resolve().then(()=>e.action("auth.signinEmail",this.opts.endpointkey,this.opts.authtype,this.mailAddress,this.password)).then(()=>{this.opts.closer();this.getRouter().navigateTo(`/${this.opts.endpointkey}`)}).catch(()=>{this.errorMessage="„É≠„Ç∞„Ç§„É≥Âá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇÊ≠£„Åó„ÅÑ„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„Å®„Éë„Çπ„ÉØ„Éº„Éâ„Çí‰ΩøÁî®„Åó„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ‰ΩøÁî®„Åó„Åü„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„Åå‰∫à„ÇÅÁÆ°ÁêÜËÄÖ„Å®„Åó„Å¶ÁôªÈå≤„Åï„Çå„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ";this.update()})}};i.tag2("viron-endpoints-page-endpoint-signin-email",'<div class="EndpointsPage_Endpoint_Signin_Email__error" if="{errorMessage}">{errorMessage}</div> <viron-textinput placeholder="ID„Åæ„Åü„ÅØ„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ" val="{mailAddress}" onsubmit="{handleFromSubmit}" onchange="{handleMailAddressChange}"></viron-textinput> <viron-textinput placeholder="„Éë„Çπ„ÉØ„Éº„Éâ" type="password" val="{password}" onsubmit="{handleFromSubmit}" onchange="{handlePasswordChange}"></viron-textinput> <viron-button class="EndpointsPage_Endpoint_Signin_Email__button" label="„É≠„Ç∞„Ç§„É≥" theme="secondary" onselect="{handleSigninButtonSelect}"></viron-button>',"",'class="EndpointsPage_Endpoint_Signin_Email"',function(e){this.external(Ex)});function Px(e){e=Nl(e);if(e.search(/[\xC0-\xFF]/g)>-1){e=e.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")}return e}var Ox=Px;var Mx=/[^\x20\x2D0-9A-Z\x5Fa-z\xC0-\xD6\xD8-\xF6\xF8-\xFF]/g;function Ax(e){e=Nl(e);return e.replace(Mx,"")}var Nx=Ax;function Rx(e){e=Nl(e);return e.toUpperCase()}var Dx=Rx;function Lx(e){e=Nl(e);return e.toLowerCase()}var Ix=Lx;function Bx(e){e=Nl(e);e=Ox(e);e=Nx(e).replace(/[\-_]/g," ");if(/[a-z]/.test(e)&&/^|\s[A-Z]+\s|$/.test(e)){e=e.replace(/\s(\w+)/g,function(e,t){return/^[A-Z]+$/.test(t)?e:Ix(e)})}else if(/\s/.test(e)){e=Ix(e)}return e.replace(/\s[a-z]/g,Dx).replace(/^\s*[A-Z]+/g,Ix).replace(/\s+/g,"")}var jx=Bx;function Fx(e){e=Nl(e);return jx(e).replace(/^[a-z]/,Dx)}var Hx=Fx;var zx=function(){const e=this.riotx.get();this.isGoogle=this.opts.authtype.provider==="google";this.label=Hx(this.opts.authtype.provider);this.isMobile=e.getter("layout.isMobile");this.listen("layout",()=>{this.isMobile=e.getter("layout.isMobile");this.update()});this.handleButtonTap=(()=>{this.opts.closer();Promise.resolve().then(()=>e.action("auth.signinOAuth",this.opts.endpointkey,this.opts.authtype)).catch(t=>e.action("modals.add","viron-error",{error:t}))})};i.tag2("viron-endpoints-page-endpoint-signin-oauth",'<virtual if="{isGoogle}"> <div class="EndpointsPage_Endpoint_Signin_Oauth__googleButton {\'EndpointsPage_Endpoint_Signin_Oauth__googleButton--large\': isMobile}" onclick="{getClickHandler(\'handleButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleButtonTap\')}"></div> </virtual> <virtual if="{isFacebook}"> <div class="EndpointsPage_Endpoint_Signin_Oauth__facebookButton {\'EndpointsPage_Endpoint_Signin_Oauth__facebookButton--large\': isMobile}" onclick="{getClickHandler(\'handleButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleButtonTap\')}"></div> </virtual> <virtual if="{!isGoogle &amp;&amp; !isFacebook}"> <div class="EndpointsPage_Endpoint_Signin_Oauth__button" onclick="{getClickHandler(\'handleButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleButtonTap\')}"> <div class="EndpointsPage_Endpoint_Signin_Oauth__label">{label}</div> </div> </virtual>',"",'class="EndpointsPage_Endpoint_Signin_Oauth"',function(e){this.external(zx)});var Ux=function(){const e=this.riotx.get();this.isDesktop=e.getter("layout.isDesktop");this.emails=rl(this.opts.authtypes,e=>{return e.type===jl.authtypeEmail});this.oauths=rl(this.opts.authtypes,e=>{return e.type===jl.authtypeOauth});this.listen("layout",()=>{this.isDesktop=e.getter("layout.isDesktop");this.update()});this.closer=(()=>{this.close()})};i.tag2("viron-endpoints-page-endpoint-signin",'<div class="EndpointsPage_Endpoint_Signin__main"> <virtual if="{!!opts.endpoint.thumbnail}"> <div class="EndpointsPage_Endpoint_Signin__thumbnail" riot-style="background-image:url({opts.endpoint.thumbnail});"></div> </virtual> <virtual if="{!opts.endpoint.thumbnail}"> <div class="EndpointsPage_Endpoint_Signin__thumbnailDefault"> <viron-icon-star></viron-icon-star> </div> </virtual> <div class="EndpointsPage_Endpoint_Signin__name">{opts.endpoint.name || \'- - -\'}</div> <div class="EndpointsPage_Endpoint_Signin__emails" if="{!!emails.length}"> <viron-endpoints-page-endpoint-signin-email each="{authtype in emails}" authtype="{authtype}" endpointkey="{parent.opts.endpoint.key}" closer="{closer}"></viron-endpoints-page-endpoint-signin-email> </div> <virtual if="{!isDesktop &amp;&amp; !!oauths.length}"> <viron-horizontal-rule label="„Åæ„Åü„ÅØ"></viron-horizontal-rule> <div class="EndpointsPage_Endpoint_Signin__oauths EndpointsPage_Endpoint_Signin__oauths--centered"> <viron-endpoints-page-endpoint-signin-oauth each="{authtype in oauths}" authtype="{authtype}" endpointkey="{parent.opts.endpoint.key}" closer="{closer}"></viron-endpoints-page-endpoint-signin-oauth> </div> </virtual> </div> <div class="EndpointsPage_Endpoint_Signin__aside" if="{isDesktop &amp;&amp; !!oauths.length}"> <div class="EndpointsPage_Endpoint_Signin__oauthMessage">„Åæ„Åü„ÅØ„ÄÅ„Åì„Å°„Çâ„Çí<br>Âà©Áî®„Åó„Å¶„É≠„Ç∞„Ç§„É≥</div> <div class="EndpointsPage_Endpoint_Signin__oauths"> <viron-endpoints-page-endpoint-signin-oauth each="{authtype in oauths}" authtype="{authtype}" endpointkey="{parent.opts.endpoint.key}" closer="{closer}"></viron-endpoints-page-endpoint-signin-oauth> </div> </div>',"",'class="EndpointsPage_Endpoint_Signin"',function(e){this.external(Ux)});var Vx=function(){const e=this.riotx.get();this.isSelfDragged=false;this.isDragging=e.getter("application.isDragging");this.isPrevDroppable=false;this.isNextDroppable=false;this.listen("application",()=>{if(!this.isMounted){return}this.isDragging=e.getter("application.isDragging");this.update()});this.handleDragStart=(t=>{t.dataTransfer.effectAllowed="move";t.dataTransfer.setData("text/plain",this.opts.endpoint.key);e.action("application.startDrag");this.isSelfDragged=true;this.update()});this.handleDrag=(()=>{});this.handleDragEnd=(()=>{e.action("application.endDrag");this.isSelfDragged=false;this.update()});this.handlePrevDragEnter=(e=>{e.preventDefault();this.isPrevDroppable=true;this.update()});this.handleNextDragEnter=(e=>{e.preventDefault();this.isNextDroppable=true;this.update()});this.handlePrevDragOver=(e=>{e.preventDefault()});this.handleNextDragOver=(e=>{e.preventDefault()});this.handlePrevDragLeave=(()=>{this.isPrevDroppable=false;this.update()});this.handleNextDragLeave=(()=>{this.isNextDroppable=false;this.update()});const t=(t,n)=>{const r=t.dataTransfer.getData("text/plain");Promise.resolve().then(()=>e.action("endpoints.changeOrder",r,n)).catch(t=>e.action("modals.add","viron-error",{error:t}))};this.handlePrevDrop=(e=>{this.isPrevDroppable=false;this.update();t(e,this.opts.endpoint.order)});this.handleNextDrop=(e=>{this.isNextDroppable=false;this.update();t(e,this.opts.endpoint.order+1)});this.handleTap=(()=>{const t=this.opts.endpoint.key;Promise.resolve().then(()=>e.action("auth.validate",t)).then(n=>{if(n){this.getRouter().navigateTo(`/${t}`);return Promise.resolve()}return Promise.resolve().then(()=>e.action("auth.getTypes",t)).then(t=>e.action("modals.add","viron-endpoints-page-endpoint-signin",{endpoint:this.opts.endpoint,authtypes:t},{isSpread:true,width:648}))}).catch(t=>e.action("modals.add","viron-error",{error:t}))});this.handleMenuTap=(t=>{t.stopPropagation();Promise.resolve().then(()=>{this.closeAllFloats()}).then(()=>{const t=this.refs.menu.root;const n=t.getBoundingClientRect();e.action("popovers.add","viron-endpoints-page-endpoint-menu",{endpoint:this.opts.endpoint},{x:n.left+n.width/2,y:n.bottom,width:228,direction:"TR",watchElm:t})})})};i.tag2("viron-endpoints-page-endpoint",'<div class="EndpointsPage_Endpoint__dropareaMarker EndpointsPage_Endpoint__dropareaMarker--prev {\'EndpointsPage_Endpoint__dropareaMarker--active\': isPrevDroppable}"></div> <div class="EndpointsPage_Endpoint__content"> <div class="EndpointsPage_Endpoint__head"> <virtual if="{!!opts.endpoint.thumbnail}"> <div class="EndpointsPage_Endpoint__thumbnail" riot-style="background-image:url({opts.endpoint.thumbnail});"></div> </virtual> <virtual if="{!opts.endpoint.thumbnail}"> <div class="EndpointsPage_Endpoint__thumbnailDefault"> <viron-icon-star></viron-icon-star> </div> </virtual> <div class="EndpointsPage_Endpoint__headContent"> <div class="EndpointsPage_Endpoint__name">{opts.endpoint.name || \'- - -\'}</div> <div class="EndpointsPage_Endpoint__urlWrapper"> <div class="EndpointsPage_Endpoint__color EndpointsPage_Endpoint__color--{opts.endpoint.color || \'blue\'}"></div> <div class="EndpointsPage_Endpoint__url">{opts.endpoint.url}</div> </div> </div> <viron-icon-setting class="EndpointsPage_Endpoint__menu" ref="menu" onclick="{getClickHandler(\'handleMenuTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleMenuTap\')}"></viron-icon-setting> </div> <div class="EndpointsPage_Endpoint__body"> <div class="EndpointsPage_Endpoint__description">{!!opts.endpoint.thumbnail ? (opts.endpoint.description || \'-\') : \'„É≠„Ç∞„Ç§„É≥„ÅßÁÆ°ÁêÜÁîªÈù¢ÊÉÖÂ†±„ÇíÂèñÂæó„Åß„Åç„Åæ„Åô\'}</div> <div class="EndpointsPage_Endpoint__tags"> <viron-tag each="{tag in opts.endpoint.tags}" label="{tag}"></viron-tag> </div> </div> <div class="EndpointsPage_Endpoint__droparea EndpointsPage_Endpoint__droparea--prev" if="{isDragging &amp;&amp; !isSelfDragged}" ondragenter="{handlePrevDragEnter}" ondragover="{handlePrevDragOver}" ondragleave="{handlePrevDragLeave}" ondrop="{handlePrevDrop}"></div> <div class="EndpointsPage_Endpoint__droparea EndpointsPage_Endpoint__droparea--next" if="{isDragging &amp;&amp; !isSelfDragged}" ondragenter="{handleNextDragEnter}" ondragover="{handleNextDragOver}" ondragleave="{handleNextDragLeave}" ondrop="{handleNextDrop}"></div> </div> <div class="EndpointsPage_Endpoint__dropareaMarker EndpointsPage_Endpoint__dropareaMarker--next {\'EndpointsPage_Endpoint__dropareaMarker--active\': isNextDroppable}"></div>',"",'class="EndpointsPage_Endpoint" draggable="{opts.isdraggable}" ondragstart="{handleDragStart}" ondrag="{handleDrag}" ondragend="{handleDragEnd}" onclick="{getClickHandler(\'handleTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleTap\')}"',function(e){this.external(Vx)});var Wx=function(){const e=this.riotx.get();this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.layoutType=e.getter("layout.type");this.endpoints=e.getter("endpoints.allByOrderFiltered");this.listen("application",()=>{this.endpoints=e.getter("endpoints.allByOrderFiltered");this.update()});this.listen("endpoints",()=>{this.endpoints=e.getter("endpoints.allByOrderFiltered");this.update()});this.listen("layout",()=>{this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.layoutType=e.getter("layout.type");this.update()})};i.tag2("viron-endpoints-page",'<div class="EndpointsPage__head"> <div class="EndpointsPage__title">„Éõ„Éº„É†</div> </div> <div class="EndpointsPage__container"> <viron-endpoints-page-endpoint each="{endpoint in endpoints}" endpoint="{endpoint}" isdraggable="{true}"></viron-endpoints-page-endpoint> <viron-endpoints-page-add></viron-endpoints-page-add> </div>',"",'class="EndpointsPage EndpointsPage--{layoutType}"',function(e){this.external(Wx)});var qx=function(){};i.tag2("viron-notfound-page","<div>Not Found...</div>","",'class="NotfoundPage"',function(e){this.external(qx)});var Yx=function(){};i.tag2("viron-application-blocker","","",'class="Application_Blocker"',function(e){this.external(Yx)});var Kx=function(){this.isActive=false;this.on("mount",()=>{setTimeout(()=>{this.isActive=true;this.update()},100)})};i.tag2("viron-application-dimmer","","","class=\"Application_Dimmer {'Application_Dimmer--active': isActive}\"",function(e){this.external(Kx)});const $x=e=>{if(e===void 0)e=100;return new Promise(t=>setTimeout(t,e))};var Gx=function(){const e=this.riotx.get();let t;const n=()=>{Promise.resolve().then(()=>$x()).then(()=>{this.isVisible=true;this.update()})};const r=()=>{this.isHidden=true;this.update();setTimeout(()=>{e.action("drawers.remove",this.opts.id)},300)};this.layoutType=e.getter("layout.type");this.listen("layout",()=>{this.layoutType=e.getter("layout.type");this.update()});this.on("mount",()=>{t=i.mount(this.refs.content,this.opts.tagname,to({isDrawer:true,drawerCloser:r},this.opts.tagopts))[0];n();window.addEventListener("keydown",this.handleKeyDown)}).on("before-unmount",()=>{t.unmount(true)}).on("unmount",()=>{window.removeEventListener("keydown",this.handleKeyDown)});this.handleTap=(()=>{r()});this.handleFrameTap=(e=>{e.stopPropagation();this.closeAllFloats()});this.handleKeyDown=(e=>{switch(e.keyCode){case 27:r();break;default:break}})};i.tag2("viron-drawer",'<div class="Drawer__frame" onclick="{getClickHandler(\'handleFrameTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleFrameTap\')}"> <div class="Drawer__contentWrapper"> <div class="Drawer__content" ref="content"></div> </div> </div>',"","class=\"Drawer Drawer--{opts.theme} {'Drawer--visible' : isVisible, 'Drawer--hidden': isHidden} Drawer--{layoutType} {'Drawer--narrow' : opts.isnarrow} {'Drawer--wide': opts.iswide}\" riot-style=\"{opts.depth ? 'z-index:' + opts.depth : ''};\" onclick=\"{getClickHandler('handleTap')}\" ontouchstart=\"{getTouchStartHandler()}\" ontouchmove=\"{getTouchMoveHandler()}\" ontouchend=\"{getTouchEndHandler('handleTap')}\"",function(e){this.external(Gx)});var Xx=function(){const e=this.riotx.get();this.drawers=e.getter("drawers.all");this.listen("drawers",()=>{this.drawers=e.getter("drawers.all");this.update()})};i.tag2("viron-application-drawers",'<virtual each="{drawers}"> <viron-drawer id="{id}" tagname="{tagName}" tagopts="{tagOpts}" depth="{drawerOpts.depth}" theme="{drawerOpts.theme}" isnarrow="{drawerOpts.isNarrow}" iswide="{drawerOpts.isWide}"></viron-drawer> </virtual>',"",'class="Application_Drawers"',function(e){this.external(Xx)});var Zx=function(){const e=this.riotx.get();const t=5;this.names=e.getter("endpoints.namesFiltered",t);this._tags=e.getter("endpoints.tagsFiltered",t);this.isEmpty=!this.names.length&&!this._tags.length;this.listen("application",()=>{this.names=e.getter("endpoints.namesFiltered",t);this._tags=e.getter("endpoints.tagsFiltered",t);this.isEmpty=!this.names.length&&!this._tags.length;this.update()});this.handleMouseDown=(e=>{e.stopPropagation();e.preventDefault()});this.handleItemTap=(t=>{const n=t.item.value||"";Promise.resolve().then(()=>e.action("application.updateEndpointFilterText",n)).catch(t=>e.action("modals.add","viron-error",{error:t}))})};i.tag2("viron-application-header-filter-autocomplete",'<virtual if="{isEmpty}"> <div class="Application_Header_Filter_Autocomplete__empty">ÂÄôË£úÁÑ°„Åó</div> </virtual> <virtual if="{!isEmpty}"> <virtual if="{!!names.length}"> <div class="Application_Header_Filter_Autocomplete__list"> <div class="Application_Header_Filter_Autocomplete__label">„Ç´„Éº„Éâ</div> <div class="Application_Header_Filter_Autocomplete__item" each="{value in names}" onclick="{getClickHandler(\'handleItemTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleItemTap\')}">{value}</div> </div> </virtual> <virtual if="{!!_tags.length}"> <div class="Application_Header_Filter_Autocomplete__list"> <div class="Application_Header_Filter_Autocomplete__label">„Çø„Ç∞</div> <div class="Application_Header_Filter_Autocomplete__item" each="{value in _tags}" onclick="{getClickHandler(\'handleItemTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleItemTap\')}">{value}</div> </div> </virtual> </virtual>',"",'class="Application_Header_Filter_Autocomplete" onmousedown="{handleMouseDown}"',function(e){this.external(Zx)});var Jx=function(){const e=this.riotx.get();this.isOpened=false;this.filterText=e.getter("application.endpointFilterText");this.listen("application",()=>{if(!this.refs.input){return}const t=e.getter("application.endpointFilterText");if(t!==this.filterText){this.refs.input.value=this.filterText=e.getter("application.endpointFilterText")}});this.handleCloseIconMouseDown=(e=>{e.stopPropagation();e.preventDefault()});this.handleCloseIconTap=(()=>{Promise.resolve().then(()=>e.action("application.resetEndpointFilterText")).catch(t=>e.action("modals.add","viron-error",{error:t}))});this.handleSearchIconMouseDown=(e=>{e.stopPropagation();e.preventDefault()});this.handleSearchIconTap=(()=>{if(this.isOpened){Promise.resolve().then(()=>e.action("application.updateEndpointFilterText",this.refs.input.value||"")).catch(t=>e.action("modals.add","viron-error",{error:t}));return}this.isOpened=true;this.update();if(this.isOpened){setTimeout(()=>{if(!this.refs.input){return}this.refs.input.value=e.getter("application.endpointFilterText");this.refs.input.focus()},100)}});this.handleFormSubmit=(()=>{Promise.resolve().then(()=>e.action("application.updateEndpointFilterText",this.refs.input.value||"")).catch(t=>e.action("modals.add","viron-error",{error:t}))});this.handleInputFocus=(()=>{new Promise(e=>{setTimeout(e,500)}).then(()=>{const t=this.root;if(!t){return}const n=t.getBoundingClientRect();e.action("popovers.add","viron-application-header-filter-autocomplete",null,{x:n.left+n.width/2,y:n.bottom-10,width:n.width,direction:"T"})})});this.handleInputBlur=(()=>{this.isOpened=false;this.update()});this.handleInputChange=(e=>{e.stopPropagation()});this.handleInputInput=(t=>{const n=t.target.value||"";Promise.resolve().then(()=>e.action("application.updateEndpointTempFilterText",n)).catch(t=>e.action("modals.add","viron-error",{error:t}))})};i.tag2("viron-application-header-filter",'<viron-icon-close class="Application_Header_Filter__closeIcon" if="{isOpened}" onmousedown="{handleCloseIconMouseDown}" onclick="{getClickHandler(\'handleCloseIconTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleCloseIconTap\')}"></viron-icon-close> <form class="Application_Header_Filter__form" if="{isOpened}" onsubmit="{handleFormSubmit}"> <input class="Application_Header_Filter__input" ref="input" placeholder="„Ç´„Éº„Éâ„ÇíÊ§úÁ¥¢" onfocus="{handleInputFocus}" onblur="{handleInputBlur}" oninput="{handleInputInput}" onchange="{handleInputChange}"> </form> <viron-icon-search class="Application_Header_Filter__searchIcon" onmousedown="{handleSearchIconMouseDown}" onclick="{getClickHandler(\'handleSearchIconTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleSearchIconTap\')}"></viron-icon-search> <div class="Application_Header_Filter__text" if="{!isOpened &amp;&amp; !!filterText}">filtered by: {filterText}</div>',"","class=\"Application_Header_Filter {'Application_Header_Filter--opened': isOpened}\"",function(e){this.external(Jx)});var Qx=function(){const e=this.riotx.get();this.isOpened=false;this.getPagesHeight=(()=>{if(!this.isOpened){return 0}const e=this.refs.pagesInner;if(!e){return 0}const t=e.getBoundingClientRect();return t.height});this.handleHeadTap=(()=>{this.isOpened=!this.isOpened;this.update()});this.handleIndependentHeadTap=(()=>{this.opts.closer();const t=this.opts.group.pages[0].id;this.getRouter().navigateTo(`/${e.getter("current.all")}/${t}`)});this.handlePageTap=(t=>{this.opts.closer();const n=t.item.page.id;this.getRouter().navigateTo(`/${e.getter("current.all")}/${n}`)})};i.tag2("viron-application-menu-group",'<virtual if="{!opts.group.isIndependent}"> <div class="Application_Menu_Group__head" onclick="{getClickHandler(\'handleHeadTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleHeadTap\')}"> <div class="Application_Menu_Group__name">{opts.group.name}</div> <viron-icon-arrow-up class="Application_Menu_Group__arrow"></viron-icon-arrow-up> </div> <div class="Application_Menu_Group__pages" riot-style="height:{getPagesHeight()}px;"> <div class="Application_Menu_Group__pagesInner" ref="pagesInner"> <div class="Application_Menu_Group__page" each="{page in opts.group.pages}" onclick="{getClickHandler(\'handlePageTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePageTap\')}">{page.name}</div> </div> </div> </virtual> <virtual if="{opts.group.isIndependent}"> <div class="Application_Menu_Group__head" onclick="{getClickHandler(\'handleIndependentHeadTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleIndependentHeadTap\')}"> <div class="Application_Menu_Group__name">{opts.group.pages[0].name}</div> </div> </virtual>',"","class=\"Application_Menu_Group {'Application_Menu_Group--open': isOpened}\"",function(e){this.external(Qx)});var eT=function(){const e=this.riotx.get();this.closer=(()=>{this.close()});this.menu=e.getter("viron.menu");this.layoutType=e.getter("layout.type");this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.listen("viron",()=>{this.menu=e.getter("viron.menu");this.update()});this.listen("layout",()=>{if(!this.isMounted){return}this.layoutType=e.getter("layout.type");this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.update()});this.handleHomeButtonTap=(()=>{this.close();this.getRouter().navigateTo("/")})};i.tag2("viron-application-menu",'<div class="Application_Menu__bg"></div> <div class="Application_Menu__overlay"></div> <div class="Application_Menu__content"> <div class="Application_Menu__head"> <div class="Application_Menu__homeButton" onclick="{getClickHandler(\'handleHomeButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleHomeButtonTap\')}"> <viron-icon-arrow-left class="Application_Menu__arrow"></viron-icon-arrow-left> <viron-icon-logo class="Application_Menu__logo"></viron-icon-logo> </div> </div> <div class="Application_Menu__body"> <div class="Application_Menu__section" each="{section in menu}"> <div class="Application_Menu__sectionName">{section.name}</div> <div class="Application_Menu__groups"> <viron-application-menu-group each="{group in section.groups}" group="{group}" closer="{parent.closer}"></viron-application-menu-group> </div> </div> </div> </div>',"",'class="Application_Menu Application_Menu--{layoutType}"',function(e){this.external(eT)});var tT=function(){const e=this.riotx.get();this.name=e.getter("viron.name");this.color=e.getter("viron.color");const t=e.getter("viron.endpointKey");const n=e.getter("endpoints.one",t);this.url=!!n?n.url:null;this.description=!!n?n.description:null;this._tags=!!n?n.tags:null;this.listen("viron",()=>{this.name=e.getter("viron.name");this.color=e.getter("viron.color");const t=e.getter("viron.endpointKey");const n=e.getter("endpoints.one",t);this.url=!!n?n.url:null;this.description=!!n?n.description:null;this._tags=!!n?n.tags:null;this.update()})};i.tag2("viron-application-header-info",'<div class="Application_Header_Info__name">{name}</div> <div class="Application_Header_Info__urlWrapper"> <div class="Application_Header_Info__color Application_Header_Info__color--{color || \'blue\'}"></div> <div class="Application_Header_Info__url">{url}</div> </div> <div class="Application_Header_Info__description" if="{description}">{description}</div> <div class="Application_Header_Info__tags" if="{_tags &amp;&amp; !!_tags.length}"> <viron-tag each="{tag in _tags}" label="{tag}"></viron-tag> </div>',"",'class="Application_Header_Info"',function(e){this.external(tT)});var nT=function(){const e=this.riotx.get();this.handleClearButtonTap=(()=>{Promise.resolve().then(()=>e.action("endpoints.removeAll")).then(()=>{this.close();return e.action("toasts.add",{message:"„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà‰∏ÄË¶ß„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü„ÄÇ"})}).catch(t=>{this.close();return e.action("modals.add","viron-error",{error:t})})})};i.tag2("viron-application-header-menu-clear",'<div class="Application_Header_Menu_Clear__title">ÂÖ®„Å¶„ÅÆ„Ç´„Éº„Éâ„ÇíÂâäÈô§</div> <div class="Application_Header_Menu_Clear__description">„Éõ„Éº„É†„ÅÆ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà‰∏ÄË¶ß„ÇíÁ©∫„Å´„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÊìç‰Ωú„ÅØÂèñ„ÇäÊ∂à„Åõ„Åæ„Åõ„Çì„ÄÇ</div> <div class="Application_Header_Menu_Clear__control"> <viron-button label="ÂâäÈô§„Åô„Çã" theme="secondary" onselect="{handleClearButtonTap}"></viron-button> </div>',"",'class="Application_Header_Menu_Clear"',function(e){this.external(nT)});var rT=function(){const e=this.riotx.get();const t=e.getter("endpoints.allWithoutToken");this.handleExportButtonTap=(()=>{Promise.resolve().then(()=>{ps(JSON.stringify(t),"endpoints.json","application/json")}).then(()=>{this.close();return e.action("toasts.add",{message:"„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà‰∏ÄË¶ß„ÇíÊõ∏„ÅçÂá∫„Åó„Åæ„Åó„Åü„ÄÇ"})}).catch(t=>{this.close();return e.action("modals.add","viron-error",{error:t})})})};i.tag2("viron-application-header-menu-export",'<div class="Application_Header_Menu_Export__title">„Éõ„Éº„É†„Çí‰øùÂ≠ò</div> <div class="Application_Header_Menu_Export__description">„Éõ„Éº„É†„ÅÆ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà‰∏ÄË¶ß„Çíjson„Éï„Ç°„Ç§„É´„Å®„Åó„Å¶Êõ∏„ÅçÂá∫„Åó„Åæ„Åô„ÄÇ</div> <div class="Application_Header_Menu_Export__control"> <viron-button label="‰øùÂ≠ò„Åô„Çã" onselect="{handleExportButtonTap}"></viron-button> </div>',"",'class="Application_Header_Menu_Export"',function(e){this.external(rT)});var iT=function(){const e=this.riotx.get();this.errorMessage=null;this.endpoints=null;this.handleFileChange=(t=>{if(!t){this.errorMessage=null;this.endpoints=null;this.update();return}if(!e.getter("ua.isEdge")&&t.type!=="application/json"){this.errorMessage="JSONÂΩ¢Âºè„ÅÆ„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ";this.endpoints=null;this.update();return}const n=new FileReader;n.readAsText(t);n.onerror=(e=>{this.endpoints=null;this.errorMessage=e.message||"„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ";this.update()});n.onload=(e=>{const t=e.target.result;try{this.endpoints=JSON.parse(t);this.errorMessage=""}catch(e){this.endpoints=null;this.errorMessage=e.message||"JSONÂΩ¢Âºè„ÅÆ„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ"}finally{this.update()}})});this.handleImportButtonTap=(()=>{if(!this.endpoints){return}Promise.resolve().then(()=>e.action("endpoints.mergeAll",this.endpoints)).then(()=>{this.close();return e.action("toasts.add",{message:"„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà‰∏ÄË¶ß„ÇíË™≠„ÅøËæº„Åø„Åæ„Åó„Åü„ÄÇ"})}).catch(t=>{this.close();return e.action("modals.add","viron-error",{error:t})})})};i.tag2("viron-application-header-menu-import",'<div class="Application_Header_Menu_Import__title">„Éõ„Éº„É†„ÇíË™≠„ÅøËæº„Åø</div> <div class="Application_Header_Menu_Import__description">„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà‰∏ÄË¶ß„Çí„Éõ„Éº„É†„Å´ÂèçÊò†„Åó„Åæ„Åô„ÄÇ</div> <div class="Application_Header_Menu_Import__error" if="{errorMessage}">{errorMessage}</div> <div class="Application_Header_Menu_Import__control"> <viron-uploader accept="application/json" onchange="{handleFileChange}"></viron-uploader> <viron-button label="Ë™≠„ÅøËæº„ÇÄ" isdisabled="{!endpoints}" onselect="{handleImportButtonTap}"></viron-button> </div>',"",'class="Application_Header_Menu_Import"',function(e){this.external(iT)});var aT=function(){const e=this.riotx.get();const t=e.getter("location.isTop");const n=e.getter("layout.isDesktop");const r=[{label:"„Éò„É´„Éó",id:"navigate_to_doc"}];const i=[];i.push({label:"ËøΩÂä†",id:"add_endpoint"});if(n){i.push({label:"„Éõ„Éº„É†„Çí‰øùÂ≠ò",id:"export_endpoints"});i.push({label:"„Éõ„Éº„É†„ÇíË™≠„ÅøËæº„Åø",id:"import_endpoints"})}i.push({label:"ÂÖ®„Å¶„ÅÆ„Ç´„Éº„Éâ„ÇíÂâäÈô§",id:"remove_all_endpoints"});if(t){this.actions=[].concat(i).concat(r)}else{this.actions=[].concat(r)}this.showEntryModal=(()=>{e.action("modals.add","viron-application-header-menu-entry")});this.showExportModal=(()=>{e.action("modals.add","viron-application-header-menu-export")});this.showImportModal=(()=>{e.action("modals.add","viron-application-header-menu-import")});this.showClearModal=(()=>{e.action("modals.add","viron-application-header-menu-clear")});this.handleActionSelect=(e=>{switch(e){case"navigate_to_doc":window.open("https://cam-inc.github.io/viron-doc/","_blank");this.close();break;case"add_endpoint":this.showEntryModal();this.close();break;case"export_endpoints":this.showExportModal();this.close();break;case"import_endpoints":this.showImportModal();this.close();break;case"remove_all_endpoints":this.showClearModal();this.close();break;default:this.close();break}})};i.tag2("viron-application-header-menu",'<viron-list list="{actions}" size="{6}" onselect="{handleActionSelect}"></viron-list>',"",'class="Application_Header_Menu"',function(e){this.external(aT)});var oT=function(){const e=this.riotx.get();this.isTopPage=e.getter("location.isTop");this.isMenuOpened=e.getter("application.isMenuOpened");this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.name=e.getter("viron.name");this.thumbnail=e.getter("viron.thumbnail");this.color=e.getter("viron.color");this.listen("location",()=>{this.isTopPage=e.getter("location.isTop");this.update()});this.listen("application",()=>{this.isMenuOpened=e.getter("application.isMenuOpened");this.update()});this.listen("layout",()=>{this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.update()});this.listen("viron",()=>{this.name=e.getter("viron.name");this.thumbnail=e.getter("viron.thumbnail");this.color=e.getter("viron.color");this.update()});this.handleMenuToggleButtonTap=(()=>{if(!this.isMobile){e.action("application.toggleMenu");return}e.action("modals.add","viron-application-menu",null,{isSpread:true,class:"Application_Menu_Modal"})});this.handleInfoTap=(()=>{const t=this.refs.thumbnail.getBoundingClientRect();e.action("popovers.add","viron-application-header-info",null,{x:t.left+t.width/2,y:t.bottom,width:312,direction:"TR"})});this.handleDotsIconTap=(()=>{const t=this.refs.dotsIcon.root.getBoundingClientRect();e.action("popovers.add","viron-application-header-menu",null,{x:t.left+t.width/2,y:t.bottom,width:228,direction:"TR"})})};i.tag2("viron-application-header",'<div class="Application_Header__item"> <virtual if="{isTopPage &amp;&amp; isDesktop}"> <viron-application-header-filter></viron-application-header-filter> </virtual> <virtual if="{isTopPage &amp;&amp; isMobile}"> <viron-icon-logo></viron-icon-logo> </virtual> <virtual if="{!isTopPage}"> <virtual if="{isMenuOpened}"> <viron-icon-menu class="Application_Header__menuIcon" onclick="{getClickHandler(\'handleMenuToggleButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleMenuToggleButtonTap\')}"></viron-icon-menu> </virtual> <virtual if="{!isMenuOpened}"> <viron-icon-menu-invert class="Application_Header__menuIcon" onclick="{getClickHandler(\'handleMenuToggleButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleMenuToggleButtonTap\')}"></viron-icon-menu-invert> </virtual> </virtual> </div> <div class="Application_Header__item" if="{!isTopPage &amp;&amp; isMobile}"> <div class="Application_Header__thumbnail" riot-style="background-image:url({thumbnail});"></div> </div> <div class="Application_Header__item Application_Header__item--tail"> <virtual if="{!isTopPage}"> <virtual if="{!isMobile}"> <div class="Application_Header__info" onclick="{getClickHandler(\'handleInfoTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleInfoTap\')}"> <div class="Application_Header__color Application_Header__color--{color}"></div> <div class="Application_Header__name">{name}</div> <viron-icon-arrow-right class="Application_Header__arrow"></viron-icon-arrow-right> <div class="Application_Header__thumbnail" ref="thumbnail" riot-style="background-image:url({thumbnail});"></div> </div> </virtual> </virtual> <viron-icon-dots class="Application_Header__dotsIcon" ref="dotsIcon" onclick="{getClickHandler(\'handleDotsIconTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleDotsIconTap\')}"></viron-icon-dots> </div>',"",'class="Application_Header"',function(e){this.external(oT)});const sT=e=>{if(e===void 0)e=100;return new Promise(t=>setTimeout(t,e))};var uT=function(){const e=this.riotx.get();this.path=this.opts.tagopts.path;const t=()=>{Promise.resolve().then(()=>sT()).then(()=>{this.isVisible=true;this.update()})};const n=()=>{this.isHidden=true;this.update();setTimeout(()=>{e.action("mediapreviews.remove",this.opts.id)},1e3)};this.on("mount",()=>{t();window.addEventListener("keydown",this.handleKeyDown)}).on("unmount",()=>{window.removeEventListener("keydown",this.handleKeyDown)});this.handleTap=(()=>{n()});this.handleFrameTap=(e=>{e.stopPropagation();this.closeAllFloats()});this.handleCloseButtonTap=(()=>{n()});this.handleKeyDown=(e=>{switch(e.keyCode){case 27:n();break;default:break}})};i.tag2("viron-mediapreview",'<div class="Mediapreview__frame" onclick="{getClickHandler(\'handleFrameTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleFrameTap\')}"> <div class="Mediapreview__image" riot-style="background-image: url({path});"></div> <div class="Mediapreview__path">{path}</div> <div class="Mediapreview__closeButton" onclick="{getClickHandler(\'handleCloseButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleCloseButtonTap\')}"> <viron-icon-close></viron-icon-close> </div> </div>',"",'class="Mediapreview {\'Mediapreview--visible\': isVisible, \'Mediapreview--hidden\': isHidden} Mediapreview--{opts.mediapreviewopts.theme}" onclick="{getClickHandler(\'handleTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleTap\')}"',function(e){this.external(uT)});var lT=function(){const e=this.riotx.get();this.mediapreviews=e.getter("mediapreviews.all");this.listen("mediapreviews",()=>{this.mediapreviews=e.getter("mediapreviews.all");this.update()})};i.tag2("viron-application-mediapreviews",'<virtual each="{mediapreviews}"> <viron-mediapreview id="{id}" tagopts="{tagOpts}" mediapreviewopts="{mediapreviewOpts}"></viron-mediapreview> </virtual>',"",'class="Application_Mediapreviews"',function(e){this.external(lT)});const cT=e=>{if(e===void 0)e=100;return new Promise(t=>setTimeout(t,e))};var fT=function(){const e=this.riotx.get();let t;const n=()=>{Promise.resolve().then(()=>cT()).then(()=>{this.isVisible=true;this.update()})};const r=()=>{this.isHidden=true;this.update();setTimeout(()=>{e.action("modals.remove",this.opts.id)},1e3)};this.layoutType=e.getter("layout.type");this.isDesktop=e.getter("layout.isDesktop");this.listen("layout",()=>{this.layoutType=e.getter("layout.type");this.isDesktop=e.getter("layout.isDesktop");this.update()});this.on("mount",()=>{t=i.mount(this.refs.content,this.opts.tagname,to({isModal:true,modalCloser:r},this.opts.tagopts))[0];n();window.addEventListener("keydown",this.handleKeyDown)}).on("before-unmount",()=>{t.unmount(true)}).on("unmount",()=>{window.removeEventListener("keydown",this.handleKeyDown)});this.handleTap=(()=>{r()});this.handleFrameTap=(e=>{e.stopPropagation();this.closeAllFloats()});this.handleCloseButtonTap=(()=>{r()});this.handleKeyDown=(e=>{switch(e.keyCode){case 27:r();break;default:break}})};i.tag2("viron-modal",'<div class="Modal__frame" riot-style="{(isDesktop &amp;&amp; !!opts.modalopts.width) ? \'width:\' +opts.modalopts.width + \'px\' : \'\'};" onclick="{getClickHandler(\'handleFrameTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleFrameTap\')}"> <div class="Modal__closeButton" onclick="{getClickHandler(\'handleCloseButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleCloseButtonTap\')}"> <viron-icon-close></viron-icon-close> </div> <div class="Modal__content" ref="content"></div> </div>',"","class=\"Modal {'Modal--visible': isVisible, 'Modal--hidden': isHidden} Modal--{opts.modalopts.theme} Modal--{layoutType} {opts.modalopts.isSpread ? 'Modal--spread': ''} {opts.modalopts.class}\" onclick=\"{getClickHandler('handleTap')}\" ontouchstart=\"{getTouchStartHandler()}\" ontouchmove=\"{getTouchMoveHandler()}\" ontouchend=\"{getTouchEndHandler('handleTap')}\"",function(e){this.external(fT)});var dT=function(){const e=this.riotx.get();this.modals=e.getter("modals.all");this.listen("modals",()=>{this.modals=e.getter("modals.all");this.update()})};i.tag2("viron-application-modals",'<virtual each="{modals}"> <viron-modal id="{id}" tagname="{tagName}" tagopts="{tagOpts}" modalopts="{modalOpts}"></viron-modal> </virtual>',"",'class="Application_Modals"',function(e){this.external(dT)});const hT="ontouchstart"in document;const vT=e=>{if(e===void 0)e=100;return new Promise(t=>setTimeout(t,e))};var pT=function(){const e=this.riotx.get();let t;const n=()=>{Promise.resolve().then(()=>vT()).then(()=>{this.isVisible=true;this.update()})};const r=()=>{this.isHidden=true;this.update();setTimeout(()=>{e.action("popovers.remove",this.opts.id)},1e3)};const a=this.opts.popoveropts.watchElm;let o=null;if(!!a){const e=a.getBoundingClientRect();const t=e.left;const n=e.top;o=window.setInterval(()=>{if(!a){r();window.clearInterval(o)}const e=a.getBoundingClientRect();const i=e.left;const s=e.top;if(i!==t||s!==n){r();window.clearInterval(o)}},100)}this.isVisible=false;this.on("mount",()=>{t=i.mount(this.refs.content,this.opts.tagname,to({isPopover:true,popoverCloser:r},this.opts.tagopts))[0];n();window.addEventListener("resize",this.handleWindowResize);window.addEventListener("scroll",this.handleWindowScroll);window.addEventListener("click",this.handleWindowClick);window.addEventListener("touchend",this.handleWindowTouchEnd)}).on("before-unmount",()=>{t.unmount(true);window.clearInterval(o)}).on("unmount",()=>{window.removeEventListener("resize",this.handleWindowResize);window.removeEventListener("scroll",this.handleWindowScroll);window.removeEventListener("click",this.handleWindowClick);window.removeEventListener("touchend",this.handleWindowTouchend)});this.getPosition=(()=>{const e=this.opts.popoveropts;const t=[];t.push(`left:${e.x}px;`);t.push(`top:${e.y}px;`);return t.join("")});this.getSize=(()=>{const e=this.opts.popoveropts;const t=[];t.push(`width:${e.width}px;`);if(!!e.height){t.push(`height:${e.height}px;`)}return t.join("")});this.handleFrameInnerTap=(e=>{e.stopPropagation()});this.handleFrameInnerScroll=(e=>{e.stopPropagation()});this.handleWindowResize=(()=>{r()});this.handleWindowScroll=(()=>{r()});this.handleWindowClick=(()=>{if(hT){return}r()});this.handleWindowTouchEnd=(()=>{r()})};i.tag2("viron-popover",'<div class="Popover__blocker"></div> <div class="Popover__frameOuter"> <div class="Popover__frameInner" riot-style="{getSize()};" onclick="{getClickHandler(\'handleFrameInnerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleFrameInnerTap\')}" onscroll="{handleFrameInnerScroll}"> <div class="Popover__content" ref="content"></div> </div> </div> <div class="Popover__arrow"></div>',"","class=\"Popover {'Popover--visible': isVisible, 'Popover--hidden': isHidden} Popover--{opts.popoveropts.direction} {'Popover--error': opts.popoveropts.isError}\" riot-style=\"{getPosition()};\"",function(e){this.external(pT)});const gT=e=>{if(e===void 0)e=100;return new Promise(t=>setTimeout(t,e))};var mT=function(){const e=this.riotx.get();let t;const n=()=>{Promise.resolve().then(()=>gT()).then(()=>{this.isVisible=true;this.update()})};const r=()=>{this.isHidden=true;this.update();setTimeout(()=>{e.action("popovers.remove",this.opts.id)},1e3)};this.on("mount",()=>{t=i.mount(this.refs.content,this.opts.tagname,to({isPopover:true,popoverCloser:r},this.opts.tagopts))[0];n();window.addEventListener("keydown",this.handleKeyDown);window.addEventListener("resize",this.handleWindowResize)}).on("before-unmount",()=>{t.unmount(true)}).on("unmount",()=>{window.removeEventListener("keydown",this.handleKeyDown);window.removeEventListener("resize",this.handleWindowResize)});this.handleTap=(()=>{r()});this.handleFrameTap=(e=>{e.stopPropagation()});this.handleKeyDown=(e=>{switch(e.keyCode){case 27:r();break;default:break}});this.handleWindowResize=(()=>{r()})};i.tag2("viron-popover-spread",'<div class="PopoverSpread__frame" onclick="{getClickHandler(\'handleFrameTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleFrameTap\')}"> <div class="PopoverSpread__content" ref="content"></div> </div>',"",'class="PopoverSpread {\'PopoverSpread--visible\': isVisible, \'PopoverSpread--hidden\': isHidden}" onclick="{getClickHandler(\'handleTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleTap\')}"',function(e){this.external(mT)});var yT=function(){const e=this.riotx.get();this.popovers=e.getter("popovers.all");this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.listen("popovers",()=>{this.popovers=e.getter("popovers.all");this.update()});this.listen("layout",()=>{this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.update()})};i.tag2("viron-application-popovers",'<virtual each="{popovers}"> <virtual if="{isDesktop}"> <viron-popover id="{id}" tagname="{tagName}" tagopts="{tagOpts}" popoveropts="{popoverOpts}"></viron-popover> </virtual> <virtual if="{isMobile}"> <viron-popover-spread id="{id}" tagname="{tagName}" tagopts="{tagOpts}" popoveropts="{popoverOpts}"></viron-popover-spread> </virtual> </virtual>',"",'class="Application_Popovers"',function(e){this.external(yT)});var bT=function(){};i.tag2("viron-application-poster",'<div class="Application_Poster__bg"></div> <div class="Application_Poster__overlay"></div> <div class="Application_Poster__content"> <viron-icon-logo class="Application_Poster__logo"></viron-icon-logo> <div class="Application_Poster__label">„Éõ„Éº„É†</div> </div>',"",'class="Application_Poster"',function(e){this.external(bT)});var _T=function(){this.isAnimating=this.opts.isactive;this.on("update",()=>{if(this.opts.isactive){this.isAnimating=true}else if(this.isAnimating){setTimeout(()=>{this.isAnimating=false;this.update()},300)}})};i.tag2("viron-application-progress-linear",'<div class="Application_ProgressLinear__bar"> <div class="Application_ProgressLinear__particle"></div> <div class="Application_ProgressLinear__particle"></div> </div>',"","class=\"Application_ProgressLinear {'Application_ProgressLinear--visible' : opts.isactive, 'Application_ProgressLinear--animating' : isAnimating}\"",function(e){this.external(_T)});var wT=function(){};i.tag2("viron-application-splash",'<div class="Application_Splash__container"> <viron-icon-logo class="Application_Splash__logo"></viron-icon-logo> </div>',"",'class="Application_Splash"',function(e){this.external(wT)});const xT=e=>{if(e===void 0)e=100;return new Promise(t=>setTimeout(t,e))};var TT=function(){const e=this.riotx.get();let t;this.isVisible=false;const n=()=>{Promise.resolve().then(()=>xT()).then(()=>{this.isVisible=true;this.update()})};const r=()=>{this.isVisible=false;this.update();setTimeout(()=>{e.action("toasts.remove",this.opts.id)},1e3)};this.on("mount",()=>{n();if(this.opts.autohide){t=setTimeout(()=>{r()},this.opts.timeout)}}).on("unmount",()=>{clearTimeout(t)});this.handleTap=(()=>{clearTimeout(t);r()})};i.tag2("viron-toast",'<div class="Toast__message">{opts.message}</div>',"",'class="Toast {\'Toast--visible\' : isVisible, \'Toast--error\' : opts.iserror}" onclick="{getClickHandler(\'handleTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleTap\')}"',function(e){this.external(TT)});var CT=function(){const e=this.riotx.get();this.toasts=e.getter("toasts.all");this.listen("toasts",()=>{this.toasts=e.getter("toasts.all");this.update()})};i.tag2("viron-application-toasts",'<virtual each="{toasts}"> <viron-toast id="{id}" message="{message}" autohide="{autoHide}" timeout="{timeout}" iserror="{isError}"></viron-toast> </virtual>',"",'class="Application_Toasts"',function(e){this.external(CT)});var kT=function(){const e=this.riotx.get();this.isLaunched=e.getter("application.isLaunched");this.isNavigating=e.getter("application.isNavigating");this.isNetworking=e.getter("application.isNetworking");this.theme=e.getter("viron.theme");this.pageName=e.getter("location.name");this.isTopPage=e.getter("location.isTop");this.pageRoute=e.getter("location.route");this.endpointsCount=e.getter("endpoints.one");this.endpointFilterText=e.getter("application.endpointFilterText");this.usingBrowser=e.getter("ua.usingBrowser");this.layoutType=e.getter("layout.type");this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.isAsideClosed=!e.getter("location.isTop")&&!e.getter("application.isMenuOpened");this.listen("application",()=>{this.isLaunched=e.getter("application.isLaunched");if(this.isNavigating&&!e.getter("application.isNavigating")){this.refs.main.scrollTop=0}this.isNavigating=e.getter("application.isNavigating");this.isNetworking=e.getter("application.isNetworking");this.endpointFilterText=e.getter("application.endpointFilterText");this.isAsideClosed=!e.getter("location.isTop")&&!e.getter("application.isMenuOpened");this.update()});this.listen("viron",()=>{this.theme=e.getter("viron.theme");this.update()});this.listen("location",()=>{this.pageName=e.getter("location.name");this.isTopPage=e.getter("location.isTop");this.pageRoute=e.getter("location.route");this.isAsideClosed=!e.getter("location.isTop")&&!e.getter("application.isMenuOpened");this.update()});this.listen("endpoints",()=>{this.endpointsCount=e.getter("endpoints.count");this.update()});this.listen("ua",()=>{this.usingBrowser=e.getter("ua.usingBrowser");this.update()});this.listen("layout",()=>{this.layoutType=e.getter("layout.type");this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.update()});const t=sf(()=>{const t=window.innerWidth;const n=window.innerHeight;e.action("layout.updateSize",t,n)},1e3);this.on("mount",()=>{window.addEventListener("resize",t)}).on("unmount",()=>{window.removeEventListener("resize",t)})};i.tag2("viron",'<div class="Application__container"> <div class="Application__aside" if="{isDesktop}"> <div class="Application__asideAdjuster"> <div class="Application__asideContent"> <viron-application-poster if="{isTopPage}"></viron-application-poster> <viron-application-menu if="{!isTopPage}"></viron-application-menu> </div> </div> </div> <div class="Application__header"> <viron-application-header></viron-application-header> </div> <div class="Application__main" ref="main"> <div class="Application__page"> <div data-is="viron-{pageName}-page" route="{pageRoute}"></div> </div> </div> </div> <viron-application-drawers></viron-application-drawers> <viron-application-mediapreviews></viron-application-mediapreviews> <viron-application-modals></viron-application-modals> <viron-application-popovers></viron-application-popovers> <viron-application-toasts></viron-application-toasts> <viron-application-progress-linear isactive="{isNavigating || isNetworking}"></viron-application-progress-linear> <viron-application-dimmer if="{isNavigating}"></viron-application-dimmer> <viron-application-blocker if="{isNavigating}"></viron-application-blocker> <viron-application-splash if="{!isLaunched}"></viron-application-splash>',"","class=\"Application Application--{usingBrowser} Application--{layoutType} Application--{theme} {isAsideClosed ? 'Application--asideClosed' : ''}\"",function(e){this.external(kT)});window.addEventListener("load",()=>{let e;Promise.resolve().then(()=>Je.init()).then(()=>ba.init()).then(()=>Jc.init()).then(t=>{e=t;window.store=t}).then(()=>{i.mount("viron")}).then(()=>e.action("endpoints.cleanup")).then(()=>Promise.all([e.action("endpoints.tidyUpOrder"),e.action("ua.setup")])).then(()=>pa.init(e)).catch(t=>e.action("modals.add","viron-error",{error:t}))})})();
//# sourceMappingURL=app.min.js.map